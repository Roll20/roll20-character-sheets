<input type="checkbox" name="attr_use_specfont" value="1" class="sheet-accessible sheet-noshow" role="presentation" />
<input type="checkbox" name="attr_use_specfont" value="2" class="sheet-comic sheet-noshow" role="presentation" />
<input type="checkbox" name="attr_use_specfont" value="3" class="sheet-segoe sheet-noshow" role="presentation" />
<input type="checkbox" name="attr_use_specfont" value="4" class="sheet-lucida sheet-noshow" role="presentation" />
<input type="checkbox" name="attr_use_specfont" value="5" class="sheet-fantasy sheet-noshow" role="presentation" />
<input type="checkbox" name="attr_use_background" value="1" class="sheet-graph-paper sheet-noshow" role="presentation" />
<input type="checkbox" name="attr_use_background" value="2" class="sheet-parchment-1 sheet-noshow" role="presentation" />
<input type="checkbox" name="attr_use_background" value="3" class="sheet-parchment-2 sheet-noshow" role="presentation" />

<div style="width:100%;min-width:100%;margin-top:-1em;" class="sheet-pf-wrapper">
	<span class="sheet-offscreen" data-i18n="instru-a-3">Screenreader users should check expand all to ensure all content is visible to the reader. It is the second checkbox on this page.</span>
	<span class="sheet-offscreen" data-i18n="instru-a-2">Screenreader users please turn on reading of Title attributes. A lot of information is still in the titles.</span>
	<span class="sheet-offscreen" data-i18n="instru-a-1">Checkboxes with a label right after cause the section with same name (h2 or h3 header) to be revealed or hidden.</span>
	<span class="sheet-offscreen" data-i18n="instru-a-0">New sheets begin on the Configuration page. Use the Settings button(config-show) to edit the sheet.</span>
	<input type="checkbox" name="attr_expandall" value="1" class="sheet-offscreen" aria-label="Expand All" data-i18n-aria-label="expand-all"  />
	<input type="checkbox" name="attr_attentionv142-show" value="1" class="sheet-showarrow sheet-ack-button" data-i18n-title="show-announcements" aria-label="Check to reveal Announcements section" data-i18n-aria-label="show-announcements" />
	<label class="sheet-showsect" data-i18n-title="show-announcements" data-i18n-aria-label="show-announcements" data-i18n="announcements">Announcements</label>
	<div style="margin-right: 43%;float: right;" role="status" aria-live="polite" aria-label="Monster or PC Indicator" data-i18n-aria-label="monster-or-pc-indicator">
		<input type="checkbox" name="attr_is_npc" value="1" class="sheet-condition-exists" role="Presentation"><label style="font-size:1rem; padding:.25em .5em .25em .5em;" data-i18n-title="monster-or-non-player-character" data-i18n-aria-label="monster-or-non-player-character"><b data-i18n="monster-or-non-player-character-abbrv">Monster/NPC</b></label>
	</div>
	<div role="contentinfo" class="sheet-announcements sheet-selectable" aria-label="Announces changes to sheet" data-i18n-aria-label="announcements" >
		<div class="sheet-footer" style="text-align:left; padding:5px; margin:5px;">
			<label class="sheet-small-label2 sheet-number" ><input type="text" name="attr_PFSheet_Version" value="0" class="sheet-calc sheet-number" readonly title="A non-blank version indicates attributes have been successfully recalculated." /><span data-i18n="version">Version</span></label>
			<h2 data-i18n="new-features">New Features and Updates</h2>
			<p>In this version (1.42):</p>
			<ol>
				<li>Merge 5 old lists into new Ability list, to do click <strong style="margin: 3px 2px 2px 2px; padding: 1px 2px 0 2px; border-radius: 5px; border: 1px solid #808080; background-color: #FFFFFF; color: Black;">Merge</strong> buttons in <em>⛭ (Settings)</em></li>
				<li>Delete buttons (<span style="margin: 1px 3px 2px 3px; padding: 1px 2px 3px 2px; border-radius: 5px; border: 1px solid #808080; background-color: #FFFFFF; color: Black; font-family:Pictos;">#</span>) added to every list to mass delete all items in list.
				<br/><em>Note for tabbed list (equipment, abilities, spells) this deletes <strong>all</strong> items no matter what tab you are on</em></li>
				<li>GMs can now <strong>Update all sheets</strong> from 'Experimental' section of Settings in game. Note it's experimental so do so on a copy of your campaign first.</li>
			</ol>
			<label class="sheet-boldlabel-check" style="margin-top:1em;display:block;"><input type="checkbox" name="attr_attentionv142-show" value="1">&nbsp;<b><span data-i18n="do-not-show-again">Do not show again</span></b></label>
<br/>
			<p>In last version (1.41):</p>
			<ol>
				<li>Attack damage dice adjust based on size! Check <strong>Adjust damage based on size</strong> in <em>Settings</em> to try it out! </li>
				<li>Fix to auto-calculated hit points, Pin AC penalty, Equation macros allow "|max"</li>
				<li>Defense stats have custom whisper</li>
			</ol>					
			<h2>Where did stuff go?</h2>
			<ul>
				<li data-i18n="announcements-24">Click <strong>⛭ Settings</strong> button next to Pathfinder logo to toggle Settings page.</li>
				<li data-i18n="announcements-25">Check <strong>Display roll templates for customization</strong> on <em>Settings</em> page to customize rolls.</li>
				<li data-i18n="announcements-26">Check <strong>Use Spell Points</strong> on <em>Settings</em> page if you use spell points.</li>
				<li> Monster hp and hit dice found in Class and Race grid. Monsters now use PC fields.</li>
				<li> Check <strong>Show both roll menu buttons for Monsters/NPCs</strong> to display NPC buttons on top even when on PC pages</li>
				<li>Click the <strong>mode</strong> button to enter expanded mode if fields are not found</li>
				<li data-i18n="announcements-27">Extra calculated numbers available on <em>Notes</em> page for point pools, or for use in tokens bars, etc</li>
			</ul>
			<label><button type="roll" class="sheet-no-decoration" title="url will appear in chat" style="color:#0000FF;" name="roll_blank" value="http://tinyurl.com/Old-Announcements"><b data-i18n="announcements-old">Old Announcements</b></button></label>
		</div>
	</div>
	<div role="banner" class="sheet-section-header">
		<div class="sheet-table-row">
			<div class="sheet-table-cell sheet-entry-20p" role="presentation">
				<img src="http://i.imgur.com/h1t4ERY.png?1" style="max-height: 70px;min-width: 140px;margin-bottom: -.5em;" data-i18n-alt="pathfinder-logo" alt="Pathfinder RPG Logo &copy; Paizo" />
			</div>
			<label class="sheet-small-label2" style="width:3em; padding:0;" data-i18n-title="edit-mode-title" data-i18n-aria-label="edit-mode-title">
				<input type="checkbox" name="attr_readonly_show" value="1" class="sheet-cssbutton sheet-readonly-show" style="height:1px;" data-i18n-aria-label="edit-mode-title" checked /><span></span>
				<span style="text-align: right;margin-top: 0.27rem;" data-i18n="mode">Mode</span>
			</label>
			<label class="sheet-small-label2" style="width:3em;" data-i18n-title="recalculate-cmd" data-i18n-aria-label="recalculate-cmd">
				<input type="checkbox" name="attr_recalc1" value="1" class="sheet-cssbutton sheet-refreshbutton sheet-sect-show" data-i18n-aria-label="recalculate-cmd" /><span></span>
				<span style="vertical-align:bottom;" data-i18n="recalculate-abbrv">Recalc</span>
				<input type="checkbox" name="attr_migrate1" value="1" style="display:none;" aria-label="for the API to ensure sheets up to date" />
				<span class="sheet-sect sheet-progress-icon" style="position:absolute; top:-3em;"><img src="http://i.imgur.com/XKktDjC.gif" />&nbsp;<span data-i18n="loading">Loading...</span></span>
			</label>
			<label class="sheet-small-label2" style="width:3em;" data-i18n-title="display-settings-config" data-i18n-aria-label="display-settings-config">
				<input type="checkbox" name="attr_config-show" value="1" class="sheet-cssbutton sheet-configbutton" data-i18n-aria-label="display-settings-config" checked /><span></span>
				<span style="vertical-align:bottom;" data-i18n="settings">Settings</span>
			</label>
			<input type="checkbox" name="attr_is_npc" value="1" class="sheet-sect-show sheet-sect-show-inverse" role="presentation" />
			<label class="sheet-small-label2"><input title="@{character_name}" type="text" name="attr_character_name" placeholder="Character Name" data-i18n-placeholder="character-name" /><span data-i18n="character-name">Character Name</span></label>
			<label class="sheet-small-label2 sheet-sect-inverse"><input title="@{player-name}" type="text" name="attr_player-name" placeholder="Player Name" data-i18n-placeholder="player-name" /><span data-i18n="player-name">Player Name</span></label>
			<label class="sheet-small-label2 sheet-sect-inverse"><input title="@{class-0-name}" type="text" name="attr_class-0-name" placeholder="Class" data-i18n-placeholder="class" /><span data-i18n="class">Class</span></label>
			<label class="sheet-small-label2 sheet-sect"><input title="@{npc-type}" type="text" name="attr_npc-type" placeholder="Type (sub-type)" data-i18n-placeholder="type-or-sub-type" /><span data-i18n="type-or-sub-type">Type/(sub-type)</span></label>
			<label class="sheet-small-label2 sheet-sect sheet-number"><input class="sheet-number" title="@{npc-cr}" type="text" name="attr_npc-cr" value="0" /><span data-i18n="challenge-rating-abbrv">CR</span></label>
			<label class="sheet-small-label2 sheet-sect sheet-number"><input title="@{npc-hd-num}" type="number" name="attr_npc-hd-num" value="0" /><span data-i18n="hit-dice-abbrv">HD</span></label>
			<label class="sheet-small-label2 sheet-sect-inverse sheet-number"><input title="@{level}" type="number" name="attr_level" value="0" style="text-align:right;" class="sheet-calc" readonly data-i18n-placeholder="level" /><span data-i18n="level">Level</span></label>
		</div>
	</div>
	<input type="checkbox" name="attr_config-show" value="1" class="sheet-config-show sheet-noshow" data-i18n-aria-label="display-settings-config" role="presentation" checked />
	<div class="sheet-pfsheet">
		<input type="checkbox" name="attr_readonly_show" value="1" class="sheet-readonly-show sheet-noshow" role="presentation" checked />
		<input type="checkbox" name="attr_is_undead" value="1" style="display:none;" role="presentation" />
		<input type="checkbox" name="attr_normal_macro_show" value="1" class="sheet-all-macro-text-show" style="display:none;" role="presentation" />
		<input type="checkbox" name="attr_adv_macro_show" value="1" class="sheet-advanced-macro-show" role="presentation" />
		<input type="checkbox" name="attr_is_npc" value="1" class="sheet-show-npc-tab" style="display:none;" />
		<input type="checkbox" name="attr_use_spells" value="1" class="sheet-show-spell-tab" style="margin-right:.5em;display:none;" data-i18n-aria-label="uses-spells-title" role="presentation" />		
		<div role="contentinfo" aria-label="Buffs and Conditions" data-i18n-aria-label="buffs-conditions-status-section" class="sheet-section-status" >
			<div class="sheet-status-panel" role="status" aria-live="polite" aria-label="Current Conditions" data-i18n-aria-label="current-conditions">
				<div class="sheet-options">
					<input type="checkbox" class="sheet-condition-exists" name="attr_condition-Blinded" value="2" role="Presentation"><label title="-2 penalty to Armor Class" data-i18n-title="condition-blinded-title" data-i18n-aria-label="condition-blinded-title"><b data-i18n="blinded"> Blinded</b></label>
					<input type="checkbox" class="sheet-condition-exists" name="attr_condition-Cowering" value="2" role="Presentation"><label title="-2 penalty to Armor Class" data-i18n-title="condition-cowering-title" data-i18n-aria-label="condition-cowering-title"><b data-i18n="cowering"> Cowering</b></label>
					<input type="checkbox" class="sheet-condition-exists" name="attr_condition-Dazzled" value="1" role="Presentation"><label title="-1 penalty on attack rolls" data-i18n-title="condition-dazzled-title" data-i18n-aria-label="condition-dazzled-title"><b data-i18n="dazzled"> Dazzled</b></label>
					<input type="checkbox" class="sheet-condition-exists" name="attr_condition-Deafened" value="4" role="Presentation"><label title="-4 penalty on initiative rolls" data-i18n-title="condition-deafened-title" data-i18n-aria-label="condition-deafened-title"><b data-i18n="deafened"> Deafened</b></label>
					<input type="checkbox" class="sheet-condition-exists" name="attr_condition_is_drained" value="1" role="Presentation"><label title="-1 penalty on all attack rolls, combat maneuver checks, combat maneuver defense, saving throws, skill checks, and ability checks. Additionally there is a 5 hp reduction to both current hp and maximum hp." data-i18n-title="condition-energy-drained-title" data-i18n-aria-label="condition-energy-drained-title"><b data-i18n="energy-drained"> Energy Drain</b></label>
					<input type="checkbox" class="sheet-condition-exists" name="attr_condition-Entangled" value="2" role="Presentation"><label title="-2 penalty on all attack rolls and a -4 penalty to Dexterity" data-i18n-title="condition-blinded-title" data-i18n-aria-label="condition-blinded-title"><b data-i18n="entangled"> Entangled</b></label>
					<input type="checkbox" class="sheet-condition-exists" name="attr_condition-Fear" value="2" role="Presentation"><label title="Shaken/Frightened/Panicked: -2 penalty on attack rolls, saving throws, skill checks, and ability checks" data-i18n-title="condition-blinded-title" data-i18n-aria-label="condition-blinded-title"><b data-i18n="fear"> Fear</b></label>
					<input type="checkbox" class="sheet-condition-exists" name="attr_condition-Flat-Footed" value="1" role="Presentation"><label title="Flat-Footed: loses DEX bonus to AC and CMD (if any) and cannot make attacks of opportunity, unless he has the Combat Reflexes feat or Uncanny Dodge class ability." data-i18n-title="condition-flat-footed-title" data-i18n-aria-label="condition-flat-footed-title"><b data-i18n="flat-footed"> Flat-Footed</b></label>
					<input type="checkbox" class="sheet-condition-exists" name="attr_condition-Grappled" value="2" role="Presentation"><label title="-2 penalty on all attack rolls and a -4 penalty to Dexterity" data-i18n-title="condition-grappled-title" data-i18n-aria-label="condition-grappled-title"><b data-i18n="grappled"> Grappled</b></label>
					<input type="checkbox" class="sheet-condition-exists" name="attr_condition-Helpless" value="1" role="Presentation"><label title="Set Dexterity to 0(-5 DEX-mod)"><b data-i18n="helpless" data-i18n-title="condition-helpless-title" data-i18n-aria-label="condition-helpless-title">Helpless</b></label>
					<input type="checkbox" class="sheet-condition-exists" name="attr_condition-Invisible" value="2" role="Presentation"><label title="+2 bonus on attack rolls" data-i18n-title="condition-invisible-title" data-i18n-aria-label="condition-invisible-title"><b data-i18n="invisible"> Invisible</b></label>
					<input type="checkbox" class="sheet-condition-exists" name="attr_condition-Pinned" value="4" role="Presentation"><label title="Additional -4 penalty to Armor Class" data-i18n-title="condition-pinned-title" data-i18n-aria-label="condition-pinned-title"><b data-i18n="pinned"> Pinned</b></label>
					<input type="checkbox" class="sheet-condition-exists" name="attr_condition-Prone" value="4" role="Presentation"><label title="-4 penalty on melee attack rolls" data-i18n-title="condition-prone-title" data-i18n-aria-label="condition-prone-title"><b data-i18n="prone"> Prone</b></label>
					<input type="checkbox" class="sheet-condition-exists" name="attr_condition-Sickened" value="2" role="Presentation"><label title="-2 penalty on all attack rolls, weapon damage rolls, saving throws, skill checks, and ability checks" data-i18n-title="condition-sickened-title" data-i18n-aria-label="condition-sickened-title"><b data-i18n="sickened"> Sickened</b></label>
					<input type="checkbox" class="sheet-condition-exists" name="attr_condition-Stunned" value="2" role="Presentation"><label title="-2 penalty to Armor Class" data-i18n-title="condition-stunned-title" data-i18n-aria-label="condition-stunned-title"><b data-i18n="stunned"> Stunned</b></label>
					<input type="checkbox" class="sheet-condition-exists" name="attr_condition-Fatigued" value="1" role="Presentation"><label title="-2 penalty to Strength and Dexterity" data-i18n-title="condition-fatigued-title" data-i18n-aria-label="condition-fatigued-title"><b data-i18n="fatigued"> Fatigued</b></label>
					<input type="checkbox" class="sheet-condition-exists" name="attr_condition-Fatigued" value="3" role="Presentation"><label title="-6 penalty to Strength and Dexterity" data-i18n-title="condition-exhausted-title" data-i18n-aria-label="condition-exhausted-title"><b data-i18n="exhausted"> Exhausted</b></label>
					<input type="checkbox" class="sheet-condition-exists" name="attr_condition-Wounds" value="1" role="Presentation"><label title="-1 penalty on all attack rolls, saving throws, skill checks, and ability checks, as well as to AC and caster level" data-i18n-title="grazed-title" data-i18n-aria-label="grazed-title"><b data-i18n="grazed"> Grazed</b></label>
					<input type="checkbox" class="sheet-condition-exists" name="attr_condition-Wounds" value="2" role="Presentation"><label title="-2 penalty on all attack rolls, saving throws, skill checks, and ability checks, as well as to AC and caster level" data-i18n-title="wounded-title" data-i18n-aria-label="wounded-title"><b data-i18n="wounded"> Wounded</b></label>
					<input type="checkbox" class="sheet-condition-exists" name="attr_condition-Wounds" value="3" role="Presentation"><label title="-3 penalty on all attack rolls, saving throws, skill checks, and ability checks, as well as to AC and caster level" data-i18n-title="critical-title" data-i18n-aria-label="critical-title"><b data-i18n="critical"> Critical</b></label>
					<input type="checkbox" class="sheet-condition-exists" name="attr_maxdex-toggle" value="1" role="Presentation"><label title="Maximum Dexterity to AC limited due to armor or encumbrance." data-i18n-title="maximum-dexterity-title" data-i18n-aria-label="maximum-dexterity-title"><b data-i18n="condition-maximum-dexterity-abbrv"> Max Dex</b></label>
					<input type="checkbox" class="sheet-condition-exists" name="attr_nodex-toggle" value="1" role="Presentation"><label title="Lose Dexterity to AC." data-i18n-title="lose-dexterity-title" data-i18n-aria-label="lose-dexterity-title"><b data-i18n="condition-lose-dexterity-abbrv"> Lose Dex</b></label>
					<input type="checkbox" class="sheet-condition-exists" name="attr_STR-modded" value="1" role="Presentation"><label title="Str Penalized" data-i18n-title="strength-penalized-title" data-i18n-aria-label="strength-penalized-title"><b data-i18n="strength-penalized"> Str Penalized</b></label>
					<input type="checkbox" class="sheet-condition-exists" name="attr_DEX-modded" value="1" role="Presentation"><label title="Dex Penalized" data-i18n-title="dexterity-penalized-title" data-i18n-aria-label="dexterity-penalized-title"><b data-i18n="dexterity-penalized"> Dex Penalized</b></label>
					<input type="checkbox" class="sheet-condition-exists" name="attr_CON-modded" value="1" role="Presentation"><label title="Con Penalized" data-i18n-title="constitution-penalized-title" data-i18n-aria-label="constitution-penalized-title"><b data-i18n="constitution-penalized"> Con Penalized</b></label>
					<input type="checkbox" class="sheet-condition-exists" name="attr_INT-modded" value="1" role="Presentation"><label title="Int Penalized" data-i18n-title="intelligence-penalized-title" data-i18n-aria-label="intelligence-penalized-title"><b data-i18n="intelligence-penalized"> Int Penalized</b></label>
					<input type="checkbox" class="sheet-condition-exists" name="attr_WIS-modded" value="1" role="Presentation"><label title="Wis Penalized" data-i18n-title="wisdom-penalized-title" data-i18n-aria-label="wisdom-penalized-title"><b data-i18n="wisdom-penalized"> Wis Penalized</b></label>
					<input type="checkbox" class="sheet-condition-exists" name="attr_CHA-modded" value="1" role="Presentation"><label title="Cha Penalized" data-i18n-title="charisma-penalized-title" data-i18n-aria-label="charisma-penalized-title"><b data-i18n="charisma-penalized"> Cha Penalized</b></label>
					<input type="checkbox" class="sheet-or-A-show sheet-noshow" name="attr_max-dex-source" value="0" role="Presentation" />
					<input type="checkbox" class="sheet-or-B-show sheet-noshow" name="attr_max-dex-source" value="2" role="Presentation" />
					<div class="sheet-either-or-sect">
						<input type="checkbox" class="sheet-condition-exists" name="attr_current-load" value="3" role="Presentation"><label title="While overloaded in this way, the character loses any Dexterity bonus to AC and can move only 5 feet per round (as a full-round action)." data-i18n-title="overloaded-title" data-i18n-aria-label="overloaded-title"><b data-i18n="overloaded"> Overloaded</b></label>
					</div>
					<span class="sheet-panel-name" data-i18n="current-conditions">Current Conditions</span>
				</div>
			</div>
			<div class="sheet-status-panel" role="status" aria-live="polite" aria-label="Current Buffs" data-i18n-aria-label="current-buffs">
				<div class="sheet-options">
					<input type="checkbox" class="sheet-buff-exists" name="attr_buff_STR_exists" value="1" role="presentation" /><label class="sheet-small-label2 sheet-number" title="Bonus to strength ability score." data-i18n-title="buff-strength-title" data-i18n-aria-label="buff-strength-title"><input title="@{buff_STR-total}" name="attr_buff_STR-total" type="number" value="0" class="sheet-calc" readonly /><span data-i18n="strength-abbrv">STR</span></label>
					<input type="checkbox" class="sheet-buff-exists" name="attr_buff_DEX_exists" value="1" role="presentation" /><label class="sheet-small-label2 sheet-number" title="Bonus to dexterity ability score." data-i18n-title="buff-dexterity-title" data-i18n-aria-label="buff-dexterity-title"><input title="@{buff_DEX-total}" name="attr_buff_DEX-total" type="number" value="0" class="sheet-calc" readonly /><span data-i18n="dexterity-abbrv">DEX</span></label>
					<input type="checkbox" class="sheet-buff-exists" name="attr_buff_CON_exists" value="1" role="presentation" /><label class="sheet-small-label2 sheet-number" title="Bonus to constitution ability score." data-i18n-title="buff-constitution-title" data-i18n-aria-label="buff-constitution-title"><input title="@{buff_CON-total}" name="attr_buff_CON-total" type="number" value="0" class="sheet-calc" readonly /><span data-i18n="constitution-abbrv">CON</span></label>
					<input type="checkbox" class="sheet-buff-exists" name="attr_buff_INT_exists" value="1" role="presentation" /><label class="sheet-small-label2 sheet-number" title="Bonus to intelligence ability score." data-i18n-title="buff-intelligence-title" data-i18n-aria-label="buff-intelligence-title"><input title="@{buff_INT-total}" name="attr_buff_INT-total" type="number" value="0" class="sheet-calc" readonly /><span data-i18n="intelligence-abbrv">INT</span></label>
					<input type="checkbox" class="sheet-buff-exists" name="attr_buff_WIS_exists" value="1" role="presentation" /><label class="sheet-small-label2 sheet-number" title="Bonus to wisdom ability score." data-i18n-title="buff-wisdom-title" data-i18n-aria-label="buff-wisdom-title"><input title="@{buff_WIS-total}" name="attr_buff_WIS-total" type="number" value="0" class="sheet-calc" readonly /><span data-i18n="wisdom-abbrv">WIS</span></label>
					<input type="checkbox" class="sheet-buff-exists" name="attr_buff_CHA_exists" value="1" role="presentation" /><label class="sheet-small-label2 sheet-number" title="Bonus to charisma ability score." data-i18n-title="buff-charisma-title" data-i18n-aria-label="buff-charisma-title"><input title="@{buff_CHA-total}" name="attr_buff_CHA-total" type="number" value="0" class="sheet-calc" readonly /><span data-i18n="charisma-abbrv">CHA</span></label>
					<input type="checkbox" class="sheet-buff-exists" name="attr_buff_STR_penalty_exists" value="1" role="presentation" /><label class="sheet-small-label2 sheet-number" title="strength penalty" data-i18n-title="strength-penalized-title" data-i18n-aria-label="buff-strength-title"><input title="@{buff_STR-total_penalty}" name="attr_buff_STR-total_penalty" type="number" value="0" class="sheet-calc" readonly />-<span data-i18n="strength-abbrv">STR</span></label>
					<input type="checkbox" class="sheet-buff-exists" name="attr_buff_DEX_penalty_exists" value="1" role="presentation" /><label class="sheet-small-label2 sheet-number" title="Dexterity penalty" data-i18n-title="dexterity-penalized-title" data-i18n-aria-label="buff-dexterity-title"><input title="@{buff_DEX-total_penalty}" name="attr_buff_DEX-total_penalty" type="number" value="0" class="sheet-calc" readonly />-<span data-i18n="dexterity-abbrv">DEX</span></label>
					<input type="checkbox" class="sheet-buff-exists" name="attr_buff_CON_penalty_exists" value="1" role="presentation" /><label class="sheet-small-label2 sheet-number" title="constitution penalty" data-i18n-title="constitution-penalized-title" data-i18n-aria-label="buff-constitution-title"><input title="@{buff_CON-total_penalty}" name="attr_buff_CON-total_penalty" type="number" value="0" class="sheet-calc" readonly />-<span data-i18n="constitution-abbrv">CON</span></label>
					<input type="checkbox" class="sheet-buff-exists" name="attr_buff_INT_penalty_exists" value="1" role="presentation" /><label class="sheet-small-label2 sheet-number" title="intelligency penalty" data-i18n-title="intelligence-penalized-title" data-i18n-aria-label="buff-intelligence-title"><input title="@{buff_INT-total_penalty}" name="attr_buff_INT-total_penalty" type="number" value="0" class="sheet-calc" readonly />-<span data-i18n="intelligence-abbrv">INT</span></label>
					<input type="checkbox" class="sheet-buff-exists" name="attr_buff_WIS_penalty_exists" value="1" role="presentation" /><label class="sheet-small-label2 sheet-number" title="wisdom penalty" data-i18n-title="wisdom-penalized-title" data-i18n-aria-label="buff-wisdom-title"><input title="@{buff_WIS-total_penalty}" name="attr_buff_WIS-total_penalty" type="number" value="0" class="sheet-calc" readonly />-<span data-i18n="wisdom-abbrv">WIS</span></label>
					<input type="checkbox" class="sheet-buff-exists" name="attr_buff_CHA_penalty_exists" value="1" role="presentation" /><label class="sheet-small-label2 sheet-number" title="charisma penalty" data-i18n-title="charisma-penalized-title" data-i18n-aria-label="buff-charisma-title"><input title="@{buff_CHA-total_penalty}" name="attr_buff_CHA-total_penalty" type="number" value="0" class="sheet-calc" readonly />-<span data-i18n="charisma-abbrv">CHA</span></label>
					<input type="checkbox" class="sheet-buff-exists" name="attr_buff_Fort_exists" value="1" role="presentation" /><label class="sheet-small-label2 sheet-number" title="Bonus to fortitude saving throws." data-i18n-title="buff-fortitude-title" data-i18n-aria-label="buff-fortitude-title"><input title="@{buff_Fort-total}" name="attr_buff_Fort-total" type="number" value="0" class="sheet-calc" readonly /><span data-i18n="fortitude-abbrv">Fort</span></label>
					<input type="checkbox" class="sheet-buff-exists" name="attr_buff_Ref_exists" value="1" role="presentation" /><label class="sheet-small-label2 sheet-number" title="Bonus to reflex saving throws." data-i18n-title="buff-reflex-title" data-i18n-aria-label="buff-reflex-title"><input title="@{buff_Ref-total}" name="attr_buff_Ref-total" type="number" value="0" class="sheet-calc" readonly /><span data-i18n="reflex-abbrv">Ref</span></label>
					<input type="checkbox" class="sheet-buff-exists" name="attr_buff_Will_exists" value="1" role="presentation" /><label class="sheet-small-label2 sheet-number" title="Bonus to will saving throws." data-i18n-title="buff-will-title" data-i18n-aria-label="buff-will-title"><input title="@{buff_Will-total}" name="attr_buff_Will-total" type="number" value="0" class="sheet-calc" readonly /><span data-i18n="willpower-abbrv">Will</span></label>
					<input type="checkbox" class="sheet-buff-exists" name="attr_buff_AC_exists" value="1" role="presentation" /><label class="sheet-small-label2 sheet-number" title="Bonus to armor class." data-i18n-title="buff-armor-class-title" data-i18n-aria-label="buff-armor-class-title"><input title="@{buff_AC-total}" name="attr_buff_AC-total" type="number" value="0" class="sheet-calc" readonly /><span data-i18n="armor-class-abbrv">AC</span></label>
					<input type="checkbox" class="sheet-buff-exists" name="attr_buff_Touch_exists" value="1" role="presentation" /><label class="sheet-small-label2 sheet-number" title="Bonus to touch attack armor class." data-i18n-title="buff-touch-title" data-i18n-aria-label="buff-touch-title"><input title="@{buff_Touch-total}" name="attr_buff_Touch-total" type="number" value="0" class="sheet-calc" readonly /><span data-i18n="touch-armor-class-abbrv">Touch AC</span></label>
					<input type="checkbox" class="sheet-buff-exists" name="attr_buff_CMD_exists" value="1" role="presentation" /><label class="sheet-small-label2 sheet-number" title="Bonus to combat maneuver defense." data-i18n-title="buff-cmd-title" data-i18n-aria-label="buff-cmd-title"><input title="@{buff_CMD-total}" name="attr_buff_CMD-total" type="number" value="0" class="sheet-calc" readonly /><span data-i18n="combat-maneuver-defense-abbrv">CMD</span></label>
					<input type="checkbox" class="sheet-buff-exists" name="attr_buff_Melee_exists" value="1" role="presentation" /><label class="sheet-small-label2 sheet-number" title="Bonus to all melee attack rolls." data-i18n-title="buff-melee-title" data-i18n-aria-label="buff-melee-title"><input title="@{buff_Melee-total}" name="attr_buff_Melee-total" type="number" value="0" class="sheet-calc" readonly /><span data-i18n="melee">Melee</span></label>
					<input type="checkbox" class="sheet-buff-exists" name="attr_buff_Ranged_exists" value="1" role="presentation" /><label class="sheet-small-label2 sheet-number" title="Bonus to all ranged attack rolls." data-i18n-title="buff-ranged-title" data-i18n-aria-label="buff-ranged-title"><input title="@{buff_Ranged-total}" name="attr_buff_Ranged-total" type="number" value="0" class="sheet-calc" readonly /><span data-i18n="ranged">Ranged</span></label>
					<input type="checkbox" class="sheet-buff-exists" name="attr_buff_DMG_exists" value="1" role="presentation" /><label class="sheet-small-label2 sheet-number" title="Bonus to all attack damage." data-i18n-title="buff-damage-title" data-i18n-aria-label="buff-damage-title"><input title="@{buff_DMG-total}" name="attr_buff_DMG-total" type="number" value="0" class="sheet-calc" readonly /><span data-i18n="damage">Damage</span></label>
					<input type="checkbox" class="sheet-buff-exists" name="attr_buff_Check_exists" value="1" role="presentation" /><label class="sheet-small-label2 sheet-number" title="Bonus to all skill and ability checks." data-i18n-title="buff-skill-checks-title" data-i18n-aria-label="buff-skill-checks-title"><input title="@{buff_Check-total}" name="attr_buff_Check-total" type="number" value="0" class="sheet-calc" readonly /><span data-i18n="check">Check</span></label>
					<input type="checkbox" class="sheet-buff-exists" name="attr_buff_CasterLevel_exists" value="1" role="presentation" /><label class="sheet-small-label2 sheet-number" title="Bonus to spell caster level." data-i18n-title="buff-spell-caster-level-title" data-i18n-aria-label="buff-spell-caster-level-title"><input title="@{buff_CasterLevel-total}" name="attr_buff_CasterLevel-total" type="number" value="0" class="sheet-calc" readonly /><span data-i18n="caster-level">Caster Level</span></label>
					<input type="checkbox" class="sheet-buff-exists" name="attr_buff_HP-temp_exists" value="1" role="presentation" /><label class="sheet-small-label2 sheet-number" title="Temporary hit points." data-i18n-title="buff-temp-hp-title" data-i18n-aria-label="buff-temp-hp-title"><input title="@{buff_HP-temp-total}" name="attr_buff_HP-temp-total" type="number" value="0" class="sheet-calc" readonly /><span data-i18n="temporary-hit-points-abbrv">Temp HP</span></label>
					<span class="sheet-panel-name" data-i18n="current-buffs">Current Buffs</span>
				</div>
			</div>
		</div>
		<div role="contentinfo" aria-label="Buffs and Conditions" data-i18n-aria-label="buffs-conditions-edit-section" class="sheet-section-condbuffedit">
			<input type="checkbox" name="attr_conditions-show" value="1" class="sheet-showarrow sheet-conditions-show" title="Click to expand condition edit area." data-i18n-title="conditions-showsect-cmd" aria-labeledby="Set Conditions" data-i18n-aria-label="conditions-set" />
			<h2 class="sheet-showsect" style="width:49%;margin-right:.25em;margin-bottom:0;"><label data-i18n="conditions-set">Set Conditions</label></h2>
			<input type="checkbox" name="attr_buffstop-show" value="1" class="sheet-showarrow sheet-buffs-show" title="Click to expand buff edit area." data-i18n-title="buffs-showsect-cmd" aria-labeledby="Set Buffs" data-i18n-aria-label="buffs-set" />
			<h2 class="sheet-showsect" style="margin-bottom:0;"><label data-i18n="buffs-set">Set Buffs</label></h2>
			<div class="sheet-cheat"></div>
			<div class="sheet-table sheet-conditions">
				<span class="sheet-table-name sheet-secondary-table-name" data-i18n="conditions-set">Set Conditions</span>
				<div class="sheet-table-group">
					<div class="sheet-table-row">
						<label class="sheet-table-cell sheet-left" style="width:20%;"><input type="checkbox" title="@{condition-Blinded}" class="sheet-boldlabel-check" name="attr_condition-Blinded" value="2" /><b><span title="-2 penalty to Armor Class" data-i18n-title="condition-blinded-title" data-i18n-aria-label="condition-blinded-title" data-i18n="blinded">Blinded</span></b></label>
						<label class="sheet-table-cell sheet-left" style="width:20%;"><input type="checkbox" title="@{condition-Cowering}" class="sheet-boldlabel-check" name="attr_condition-Cowering" value="2" /><b><span title="-2 penalty to Armor Class" data-i18n-title="condition-cowering-title" data-i18n-aria-label="condition-cowering-title" data-i18n="cowering">Cowering</span></b></label>
						<label class="sheet-table-cell sheet-left" style="width:20%;"><input type="checkbox" title="@{condition-Dazzled}" class="sheet-boldlabel-check" name="attr_condition-Dazzled" value="1" /><b><span title="-1 penalty on attack rolls" data-i18n-title="condition-dazzled-title" data-i18n-aria-label="condition-dazzled-title" data-i18n="dazzled">Dazzled</span></b></label>
						<label class="sheet-table-cell sheet-left" style="width:20%;"><input type="checkbox" title="@{condition-Deafened}" class="sheet-boldlabel-check" name="attr_condition-Deafened" value="4" /><b><span title="-4 penalty on initiative rolls" data-i18n-title="condition-deafened-title" data-i18n-aria-label="condition-deafened-title" data-i18n="deafened">Deafened</span></b></label>
						<label class="sheet-table-cell sheet-left" style="width:20%;"><input style="width:2.8em;" title="@{condition-Drained}" type="number" name="attr_condition-Drained" value="0" max="0" /><b><span title="-1 penalty on all attack rolls, combat maneuver checks, combat maneuver defense, saving throws, skill checks, and ability checks. Additionally there is a 5 hp reduction to both current hp and maximum hp." data-i18n-title="condition-energy-drained-title" data-i18n-aria-label="condition-energy-drained-title" data-i18n="energy-drained">Energy Drain</span></b></label>
					</div>
					<div class="sheet-table-row">
						<label class="sheet-table-cell sheet-left" style="width:20%;"><input type="checkbox" title="@{condition-Entangled}" class="sheet-boldlabel-check" name="attr_condition-Entangled" value="2" /><b><span title="-2 penalty on all attack rolls and a -4 penalty to Dexterity" data-i18n-title="condition-entangled-title" data-i18n-aria-label="condition-entangled-title" data-i18n="entangled">Entangled</span></b></label>
						<label class="sheet-table-cell sheet-left" style="width:20%;"><input type="checkbox" title="@{condition-Fear}" class="sheet-boldlabel-check" name="attr_condition-Fear" value="2" /><b><span title="Shaken/Frightened/Panicked: -2 penalty on attack rolls, saving throws, skill checks, and ability checks" data-i18n-title="condition-fear-title" data-i18n-aria-label="condition-fear-title" data-i18n="fear-any">Fear (any)</span></b></label>
						<label class="sheet-table-cell sheet-left" style="width:20%;"><input type="checkbox" title="@{condition-Flat-Footed}" class="sheet-boldlabel-check" name="attr_condition-Flat-Footed" value="1" /><b><span title="Flat-Footed: loses DEX bonus to AC and CMD (if any) and cannot make attacks of opportunity, unless he has the Combat Reflexes feat or Uncanny Dodge class ability." data-i18n-title="condition-flat-footed-title" data-i18n-aria-label="condition-flat-footed-title" data-i18n="flat-footed">Flat-Footed</span></b></label>
						<label class="sheet-table-cell sheet-left" style="width:20%;"><input type="checkbox" title="@{condition-Grappled}" class="sheet-boldlabel-check" name="attr_condition-Grappled" value="2" /><b><span title="-2 penalty on all attack rolls and a -4 penalty to Dexterity" data-i18n-title="condition-grappled-title" data-i18n-aria-label="condition-grappled-title" data-i18n="grappled">Grappled</span></b></label>
						<label class="sheet-table-cell sheet-left" style="width:20%;"><input type="checkbox" title="@{condition-Helpless}" class="sheet-boldlabel-check" name="attr_condition-Helpless" value="1" /><b><span title="Set Dexterity to 0(-5 DEX-mod)" data-i18n-title="condition-helpless-title" data-i18n-aria-label="condition-helpless-title" data-i18n="helpless">Helpless</span></b></label>
					</div>
					<div class="sheet-table-row">
						<label class="sheet-table-cell sheet-left" style="width:20%;"><input type="checkbox" title="@{condition-Invisible}" class="sheet-boldlabel-check" name="attr_condition-Invisible" value="2" /><b><span title="+2 bonus on attack rolls" data-i18n-title="condition-invisible-title" data-i18n-aria-label="condition-invisible-title" data-i18n="invisible">Invisible</span></b></label>
						<label class="sheet-table-cell sheet-left" style="width:20%;"><input type="checkbox" title="@{condition-Pinned}" class="sheet-boldlabel-check" name="attr_condition-Pinned" value="4" /><b><span title="Additional -4 penalty to Armor Class" data-i18n-title="condition-pinned-title" data-i18n-aria-label="condition-pinned-title" data-i18n="pinned">Pinned</span></b></label>
						<label class="sheet-table-cell sheet-left" style="width:20%;"><input type="checkbox" title="@{condition-Prone}" class="sheet-boldlabel-check" name="attr_condition-Prone" value="4" /><b><span title="-4 penalty on melee attack rolls" data-i18n-title="condition-prone-title" data-i18n-aria-label="condition-prone-title" data-i18n="prone">Prone</span></b></label>
						<label class="sheet-table-cell sheet-left" style="width:20%;"><input type="checkbox" title="@{condition-Sickened}" class="sheet-boldlabel-check" name="attr_condition-Sickened" value="2" /><b><span title="-2 penalty on all attack rolls, weapon damage rolls, saving throws, skill checks, and ability checks" data-i18n-title="condition-sickened-title" data-i18n-aria-label="condition-sickened-title" data-i18n="sickened">Sickened</span></b></label>
						<label class="sheet-table-cell sheet-left" style="width:20%;"><input type="checkbox" title="@{condition-Stunned}" class="sheet-boldlabel-check" name="attr_condition-Stunned" value="2" /><b><span title="-2 penalty to Armor Class" data-i18n-title="condition-stunned-title" data-i18n-aria-label="condition-stunned-title" data-i18n="stunned">Stunned</span></b></label>
					</div>
					<div class="sheet-table-row">
						<label class="sheet-table-cell sheet-left" style="width:20%;">&nbsp;</label>
						<label class="sheet-table-cell sheet-left" style="width:20%;"><input type="radio" title="@{condition-Fatigued}" class="sheet-boldlabel-check" name="attr_condition-Fatigued" value="1" /><b><span title="-2 penalty to Strength and Dexterity" data-i18n-title="condition-fatigued-title" data-i18n-aria-label="condition-fatigued-title" data-i18n="fatigued">Fatigued</span></b></label>
						<label class="sheet-table-cell sheet-left" style="width:20%;"><input type="radio" title="@{condition-Fatigued}" class="sheet-boldlabel-check" name="attr_condition-Fatigued" value="3" /><b><span title="-6 penalty to Strength and Dexterity" data-i18n-title="condition-exhausted-title" data-i18n-aria-label="condition-exhausted-title" data-i18n="exhausted">Exhausted</span></b></label>
						<label class="sheet-table-cell sheet-left" style="width:20%;"><input type="radio" title="@{condition-Fatigued}" class="sheet-boldlabel-check" name="attr_condition-Fatigued" value="0" checked /><span class="sheet-offCase"><b><span data-i18n="neither">Neither</span></b></span></label>
						<label class="sheet-table-cell sheet-left" style="width:20%;">&nbsp;</label>
					</div>
				</div>
			</div>
			<div class="sheet-repeating-sect sheet-buffs">
				<span class="sheet-nontable-name sheet-secondary-table-name" style="margin-bottom:0;" data-i18n="set-buffs">Set Buffs</span>
				<input type="checkbox" class="sheet-minimize-show sheet-cssbutton" data-i18n-title="minimize-all-cmd" data-i18n-aria-label="minimize-all-cmd" title="Minimize all rows." name="attr_buff-min-show" value="1" /><span></span>
				<input type="checkbox" class="sheet-lock-show sheet-cssbutton" data-i18n-title="expand-cmd" data-i18n-aria-label="expand-cmd" title="Collapse or expand all rows." name="attr_buff-expand-show" value="1" /><span></span>
				<input type="checkbox" class="sheet-split-column-show sheet-cssbutton" data-i18n-title="column-cmd" data-i18n-aria-label="column-cmd" title="Split into two columns" name="attr_buff-column-show" value="1" /><span></span>
				<input class="sheet-deletebutton sheet-cssbutton sheet-deletesect-show" type="checkbox" name="attr_delete_repeating_buff_btn" value="1" data-i18n-title="delete-buff" data-i18n-aria-label="delete-buff-must-confirm-next-checkbox" /><span></span><label class="sheet-deletesect sheet-allrows-note"><input type="checkbox" class="sheet-selectedlabel-check" name="attr_delete_repeating_buff" data-i18n-aria-label="confirm-delete-buff" data-i18n-title="confirm-delete-buff" value="1" /><b data-i18n="delete-all-rows-are-you-sure">delete all rows are you sure</b></label>
				<div class="sheet-sect-buff sheet-repeating-fields">
					<fieldset class="repeating_buff">
						<div class="sheet-nontable-repeating">
							<span class="sheet-error"><span class="sheet-pictos">!</span><span data-i18n="error-msg1">Error! You must delete this row before editing any items in this section.</span></span>
							<h3 class="sheet-offscreen">Buff <span name="attr_buff-name"></span></h3>
							<input type="checkbox" class="sheet-counted sheet-sect-show" data-i18n-title="minimize-cmd" data-i18n-aria-label="minimize-cmd" title="Minimize Row" name="attr_row-show" value="1" checked /><span></span>
							<label class="sheet-small-label2" data-i18n-title="toggle-buff" data-i18n-aria-label="toggle-buff" title="When checked, this buff is active and will count towards the totals, which will then affect the rest of the sheet. Also, only the visible/selected buffs will count towards the totals.">
								<input type="checkbox" name="attr_buff-enable_toggle" title="@{repeating_buff_$X_buff-enable_toggle}" value="1" />
								<span data-i18n="enabled-chkbox">Enabled</span>
							</label>
							<label class="sheet-small-label2 sheet-entry-25p-shrink"><input type="text" name="attr_buff-name" title="@{repeating_buff_$X_buff-name}" placeholder="Name" data-i18n-placeholder="name" /><span data-i18n="name">Name</span></label>
							<input class="sheet-nextitem-show" type="checkbox" title="@{repeating_buff_$X_buff-STR-show}" name="attr_buff-STR-show" value="1" />
							<div class="sheet-linked-fields sheet-b-str">
								<input type="checkbox" name="attr_buff-STR_error" class="sheet-error-mshow" value="1" />
								<label class="sheet-small-label2 sheet-macro-text-inline sheet-highlight"><input type="text" name="attr_buff-STR_macro-text" title="@{repeating_buff_$X_buff-STR_macro-text}" placeholder="#/Equation" value="" data-i18n-placeholder="equation-macro-place" /><span class="sheet-super sheet-note-a" data-i18n="strength-calculation-abbrv">STR calc</span></label>
								<label class="sheet-small-label2 sheet-number sheet-highlight"><input type="number" name="attr_buff-STR" title="@{repeating_buff_$X_buff-STR}" value="0" class="sheet-calc" readonly /><span data-i18n="strength-abbrv">STR</span></label>
							</div>
							<input class="sheet-nextitem-show" type="checkbox" title="@{repeating_buff_$X_buff-DEX-show}" name="attr_buff-DEX-show" value="1" />
							<div class="sheet-linked-fields sheet-b-dex">
								<input type="checkbox" name="attr_buff-DEX_error" class="sheet-error-mshow" value="1" />
								<label class="sheet-small-label2 sheet-macro-text-inline sheet-highlight"><input type="text" name="attr_buff-DEX_macro-text" title="@{repeating_buff_$X_buff-DEX_macro-text}" placeholder="#/Equation" value="" data-i18n-placeholder="equation-macro-place" /><span class="sheet-super sheet-note-a" data-i18n="dexterity-calculation-abbrv">DEX calc</span></label>
								<label class="sheet-small-label2 sheet-number sheet-highlight"><input type="number" name="attr_buff-DEX" title="@{repeating_buff_$X_buff-DEX}" value="0" class="sheet-calc" readonly /><span data-i18n="dexterity-abbrv">DEX</span></label>
							</div>
							<input class="sheet-nextitem-show" type="checkbox" title="@{repeating_buff_$X_buff-CON-show}" name="attr_buff-CON-show" value="1" />
							<div class="sheet-linked-fields sheet-b-con">
								<input type="checkbox" name="attr_buff-CON_error" class="sheet-error-mshow" value="1" />
								<label class="sheet-small-label2 sheet-macro-text-inline sheet-highlight"><input type="text" name="attr_buff-CON_macro-text" title="@{repeating_buff_$X_buff-CON_macro-text}" placeholder="#/Equation" value="" data-i18n-placeholder="equation-macro-place" /><span class="sheet-super sheet-note-a" data-i18n="constitution-calculation-abbrv">CON Calc</span></label>
								<label class="sheet-small-label2 sheet-number sheet-highlight"><input type="number" name="attr_buff-CON" title="@{repeating_buff_$X_buff-CON}" value="0" class="sheet-calc" readonly /><span data-i18n="constitution-abbrv">CON</span></label>
							</div>
							<input class="sheet-nextitem-show" type="checkbox" title="@{repeating_buff_$X_buff-INT-show}" name="attr_buff-INT-show" value="1" />
							<div class="sheet-linked-fields sheet-b-int">
								<input type="checkbox" name="attr_buff-INT_error" class="sheet-error-mshow" value="1" />
								<label class="sheet-small-label2 sheet-macro-text-inline sheet-highlight"><input type="text" name="attr_buff-INT_macro-text" title="@{repeating_buff_$X_buff-INT_macro-text}" placeholder="#/Equation" value="" data-i18n-placeholder="equation-macro-place" /><span class="sheet-super sheet-note-a" data-i18n="intelligence-calculation-abbrv">INT Calc</span></label>
								<label class="sheet-small-label2 sheet-number sheet-highlight"><input type="number" name="attr_buff-INT" title="@{repeating_buff_$X_buff-INT}" value="0" class="sheet-calc" readonly /><span data-i18n="intelligence-abbrv">INT</span></label>
							</div>
							<input class="sheet-nextitem-show" type="checkbox" title="@{repeating_buff_$X_buff-WIS-show}" name="attr_buff-WIS-show" value="1" />
							<div class="sheet-linked-fields sheet-b-wis">
								<input type="checkbox" name="attr_buff-WIS_error" class="sheet-error-mshow" value="1" />
								<label class="sheet-small-label2 sheet-macro-text-inline sheet-highlight"><input type="text" name="attr_buff-WIS_macro-text" title="@{repeating_buff_$X_buff-WIS_macro-text}" placeholder="#/Equation" value="" data-i18n-placeholder="equation-macro-place" /><span class="sheet-super sheet-note-a" data-i18n="wisdom-calculation-abbrv">WIS Calc</span></label>
								<label class="sheet-small-label2 sheet-number sheet-highlight"><input type="number" name="attr_buff-WIS" title="@{repeating_buff_$X_buff-WIS}" value="0" class="sheet-calc" readonly /><span data-i18n="wisdom-abbrv">WIS</span></label>
							</div>
							<input class="sheet-nextitem-show" type="checkbox" title="@{repeating_buff_$X_buff-CHA-show}" name="attr_buff-CHA-show" value="1" />
							<div class="sheet-linked-fields sheet-b-cha">
								<input type="checkbox" name="attr_buff-CHA_error" class="sheet-error-mshow" value="1" />
								<label class="sheet-small-label2 sheet-macro-text-inline sheet-highlight"><input type="text" name="attr_buff-CHA_macro-text" title="@{repeating_buff_$X_buff-CHA_macro-text}" placeholder="#/Equation" value="" data-i18n-placeholder="equation-macro-place" /><span class="sheet-super sheet-note-a" data-i18n="charisma-calculation-abbrv">CHA Calc</span></label>
								<label class="sheet-small-label2 sheet-number sheet-highlight"><input type="number" name="attr_buff-CHA" title="@{repeating_buff_$X_buff-CHA}" value="0" class="sheet-calc" readonly /><span data-i18n="charisma-abbrv">CHA</span></label>
							</div>
							<input class="sheet-nextitem-show" type="checkbox" title="@{repeating_buff_$X_buff-Fort-show}" name="attr_buff-Fort-show" value="1" />
							<div class="sheet-linked-fields sheet-b-fort">
								<input type="checkbox" name="attr_buff-Fort_error" class="sheet-error-mshow" value="1" />
								<label class="sheet-small-label2 sheet-macro-text-inline sheet-highlight"><input type="text" name="attr_buff-Fort_macro-text" title="@{repeating_buff_$X_buff-Fort_macro-text}" placeholder="#/Equation" value="" data-i18n-placeholder="equation-macro-place" /><span class="sheet-super sheet-note-a" data-i18n="fortitude-calculation-abbrv">Fort Calc</span></label>
								<label class="sheet-small-label2 sheet-number sheet-highlight"><input type="number" name="attr_buff-Fort" title="@{repeating_buff_$X_buff-Fort}" value="0" class="sheet-calc" readonly /><span data-i18n="fortitude-abbrv">Fort</span></label>
							</div>
							<input class="sheet-nextitem-show" type="checkbox" title="@{repeating_buff_$X_buff-Ref-show}" name="attr_buff-Ref-show" value="1" />
							<div class="sheet-linked-fields sheet-b-ref">
								<input type="checkbox" name="attr_buff-Ref_error" class="sheet-error-mshow" value="1" />
								<label class="sheet-small-label2 sheet-macro-text-inline sheet-highlight"><input type="text" name="attr_buff-Ref_macro-text" title="@{repeating_buff_$X_buff-Ref_macro-text}" placeholder="#/Equation" value="" data-i18n-placeholder="equation-macro-place" /><span class="sheet-super sheet-note-a" data-i18n="reflex-calculation-abbrv">Ref Calc</span></label>
								<label class="sheet-small-label2 sheet-number sheet-highlight"><input type="number" name="attr_buff-Ref" title="@{repeating_buff_$X_buff-Ref}" value="0" class="sheet-calc" readonly /><span data-i18n="reflex-abbrv">Ref</span></label>
							</div>
							<input class="sheet-nextitem-show" type="checkbox" title="@{repeating_buff_$X_buff-Will-show}" name="attr_buff-Will-show" value="1" />
							<div class="sheet-linked-fields sheet-b-will">
								<input type="checkbox" name="attr_buff-Will_error" class="sheet-error-mshow" value="1" />
								<label class="sheet-small-label2 sheet-macro-text-inline sheet-highlight"><input type="text" name="attr_buff-Will_macro-text" title="@{repeating_buff_$X_buff-Will_macro-text}" placeholder="#/Equation" value="" data-i18n-placeholder="equation-macro-place" /><span class="sheet-super sheet-note-a" data-i18n="willpower-calculation-abbrv">Will Calc</span></label>
								<label class="sheet-small-label2 sheet-number sheet-highlight"><input type="number" name="attr_buff-Will" title="@{repeating_buff_$X_buff-Will}" value="0" class="sheet-calc" readonly /><span data-i18n="willpower-abbrv">Will</span></label>
							</div>
							<input class="sheet-nextitem-show" type="checkbox" title="@{repeating_buff_$X_buff-AC-show}" name="attr_buff-AC-show" value="1" />
							<div class="sheet-linked-fields sheet-b-ac">
								<input type="checkbox" name="attr_buff-AC_error" class="sheet-error-mshow" value="1" />
								<label class="sheet-small-label2 sheet-macro-text-inline sheet-highlight"><input type="text" name="attr_buff-AC_macro-text" title="@{repeating_buff_$X_buff-AC_macro-text}" placeholder="#/Equation" value="" data-i18n-placeholder="equation-macro-place" /><span class="sheet-super sheet-note-a" data-i18n="armor-class-calculation-abbrv">AC Calc</span></label>
								<label class="sheet-small-label2 sheet-number sheet-highlight"><input type="number" name="attr_buff-AC" title="@{repeating_buff_$X_buff-AC}" value="0" class="sheet-calc" readonly /><span data-i18n="armor-class-abbrv">AC</span></label>
							</div>
							<input class="sheet-nextitem-show" type="checkbox" title="@{repeating_buff_$X_buff-Touch-show}" name="attr_buff-Touch-show" value="1" />
							<div class="sheet-linked-fields sheet-b-touch">
								<input type="checkbox" name="attr_buff-Touch_error" class="sheet-error-mshow" value="1" />
								<label class="sheet-small-label2 sheet-macro-text-inline sheet-highlight"><input type="text" name="attr_buff-Touch_macro-text" title="@{repeating_buff_$X_buff-Touch_macro-text}" placeholder="#/Equation" value="" data-i18n-placeholder="equation-macro-place" /><span class="sheet-super sheet-note-a" data-i18n="touch-armor-class-calculation-abbrv">Touch Calc</span></label>
								<label class="sheet-small-label2 sheet-number sheet-highlight"><input type="number" name="attr_buff-Touch" title="@{repeating_buff_$X_buff-Touch}" value="0" class="sheet-calc" readonly /><span data-i18n="touch-armor-class-abbrv">Touch</span></label>
							</div>
							<input class="sheet-nextitem-show" type="checkbox" title="@{repeating_buff_$X_buff-CMD-show}" name="attr_buff-CMD-show" value="1" />
							<div class="sheet-linked-fields sheet-b-cmd">
								<input type="checkbox" name="attr_buff-CMD_error" class="sheet-error-mshow" value="1" />
								<label class="sheet-small-label2 sheet-macro-text-inline sheet-highlight"><input type="text" name="attr_buff-CMD_macro-text" title="@{repeating_buff_$X_buff-CMD_macro-text}" placeholder="#/Equation" value="" data-i18n-placeholder="equation-macro-place" /><span class="sheet-super sheet-note-a" data-i18n="combat-maneuver-defense-calculation-abbrv">CMD Calc</span></label>
								<label class="sheet-small-label2 sheet-number sheet-highlight"><input type="number" name="attr_buff-CMD" title="@{repeating_buff_$X_buff-CMD}" value="0" class="sheet-calc" readonly /><span data-i18n="combat-maneuver-defense-abbrv">CMD</span></label>
							</div>
							<input class="sheet-nextitem-show" type="checkbox" title="@{repeating_buff_$X_buff-Melee-show}" name="attr_buff-Melee-show" value="1" />
							<div class="sheet-linked-fields sheet-b-melee">
								<input type="checkbox" name="attr_buff-Melee_error" class="sheet-error-mshow" value="1" />
								<label class="sheet-small-label2 sheet-macro-text-inline sheet-highlight"><input type="text" name="attr_buff-Melee_macro-text" title="@{repeating_buff_$X_buff-Melee_macro-text}" placeholder="#/Equation" value="" data-i18n-placeholder="equation-macro-place" /><span class="sheet-super sheet-note-a" data-i18n="melee-calculation">Melee Calc</span></label>
								<label class="sheet-small-label2 sheet-number sheet-highlight"><input type="number" name="attr_buff-Melee" title="@{repeating_buff_$X_buff-Melee}" value="0" class="sheet-calc" readonly /><span data-i18n="melee">Melee</span></label>
							</div>
							<input class="sheet-nextitem-show" type="checkbox" title="@{repeating_buff_$X_buff-Ranged-show}" name="attr_buff-Ranged-show" value="1" />
							<div class="sheet-linked-fields sheet-b-ranged">
								<input type="checkbox" name="attr_buff-Ranged_error" class="sheet-error-mshow" value="1" />
								<label class="sheet-small-label2 sheet-macro-text-inline sheet-highlight"><input type="text" name="attr_buff-Ranged_macro-text" title="@{repeating_buff_$X_buff-Ranged_macro-text}" placeholder="#/Equation" value="" data-i18n-placeholder="equation-macro-place" /><span class="sheet-super sheet-note-a" data-i18n="ranged-calculation">Ranged Calc</span></label>
								<label class="sheet-small-label2 sheet-number sheet-highlight"><input type="number" name="attr_buff-Ranged" title="@{repeating_buff_$X_buff-Ranged}" value="0" class="sheet-calc" readonly /><span data-i18n="ranged">Ranged</span></label>
							</div>
							<input class="sheet-nextitem-show" type="checkbox" title="@{repeating_buff_$X_buff-DMG-show}" name="attr_buff-DMG-show" value="1" />
							<div class="sheet-linked-fields sheet-b-dmg">
								<input type="checkbox" name="attr_buff-DMG_error" class="sheet-error-mshow" value="1" />
								<label class="sheet-small-label2 sheet-macro-text-inline sheet-highlight"><input type="text" name="attr_buff-DMG_macro-text" title="@{repeating_buff_$X_buff-DMG_macro-text}" placeholder="#/Equation" value="" data-i18n-placeholder="equation-macro-place" /><span class="sheet-super sheet-note-a" data-i18n="damage-calculation-abbrv">DMG Calc</span></label>
								<label class="sheet-small-label2 sheet-number sheet-highlight"><input type="number" name="attr_buff-DMG" title="@{repeating_buff_$X_buff-DMG}" value="0" class="sheet-calc" readonly /><span data-i18n="damage-abbrv">DMG</span></label>
							</div>
							<input class="sheet-nextitem-show" type="checkbox" title="@{repeating_buff_$X_buff-Check-show}" name="attr_buff-Check-show" value="1" />
							<div class="sheet-linked-fields sheet-b-check">
								<input type="checkbox" name="attr_buff-Check_error" class="sheet-error-mshow" value="1" />
								<label class="sheet-small-label2 sheet-macro-text-inline sheet-highlight"><input type="text" name="attr_buff-Check_macro-text" title="@{repeating_buff_$X_buff-Check_macro-text} Skill and ability check" placeholder="#/Equation" value="" data-i18n-placeholder="equation-macro-place" /><span class="sheet-super sheet-note-a" data-i18n="check-calculation">Check Calc</span></label>
								<label class="sheet-small-label2 sheet-number sheet-highlight"><input type="number" name="attr_buff-Check" title="@{repeating_buff_$X_buff-Check} Skill and ability check" value="0" class="sheet-calc" readonly /><span data-i18n="check">Check</span></label>
							</div>
							<input class="sheet-nextitem-show" type="checkbox" title="@{repeating_buff_$X_buff-CasterLevel-show}" name="attr_buff-CasterLevel-show" value="1" />
							<div class="sheet-linked-fields sheet-b-casterlevel">
								<input type="checkbox" name="attr_buff-CasterLevel_error" class="sheet-error-mshow" value="1" />
								<label class="sheet-small-label2 sheet-macro-text-inline sheet-highlight"><input type="text" name="attr_buff-CasterLevel_macro-text" title="@{repeating_buff_$X_buff-CasterLevel_macro-text}" placeholder="#/Equation" value="" data-i18n-placeholder="equation-macro-place" /><span class="sheet-super sheet-note-a" data-i18n="caster-level-calculation">Caster Lvl Calc</span></label>
								<label class="sheet-small-label2 sheet-number sheet-highlight"><input type="number" name="attr_buff-CasterLevel" title="@{repeating_buff_$X_buff-CasterLevel}" value="0" class="sheet-calc" readonly /><span data-i18n="caster-level-abbrv">CL</span></label>
							</div>
							<input class="sheet-nextitem-show" type="checkbox" title="@{repeating_buff_$X_buff-HP-temp-show}" name="attr_buff-HP-temp-show" value="1" />
							<div class="sheet-linked-fields sheet-b-hp-temp">
								<input type="checkbox" name="attr_buff-HP-temp_error" class="sheet-error-mshow" value="1" />
								<label class="sheet-small-label2 sheet-macro-text-inline sheet-highlight"><input type="text" name="attr_buff-HP-temp_macro-text" title="@{repeating_buff_$X_buff-HP-temp_macro-text}" placeholder="#/Equation" value="" data-i18n-placeholder="equation-macro-place" /><span class="sheet-super sheet-note-a" data-i18n="temporary-hit-points-calculation-abbrv">Temp HP Calc</span></label>
								<label class="sheet-small-label2 sheet-number sheet-highlight"><input type="number" name="attr_buff-HP-temp" title="@{repeating_buff_$X_buff-HP-temp}" value="0" class="sheet-calc" readonly /><span data-i18n="hit-points-abbrv">HP</span></label>
							</div>
							<div class="sheet-sect sheet-expand">
								<input type="checkbox" class="sheet-showarrow sheet-options-show" title="@{repeating_buff_$X_options-show}" name="attr_options-show" value="1" checked />
								<label class="sheet-showsect sheet-options-showlabel" data-i18n="select-buffs">Select Buffs</label>
								<input type="checkbox" class="sheet-showarrow sheet-desc-show" title="@{repeating_buff_$X_description-show}" name="attr_description-show" value="1" />
								<label class="sheet-showsect sheet-desc-showlabel" data-i18n="notes">Notes</label>
								<input type="checkbox" class="sheet-showarrow sheet-id-show" title="Click to expand" data-i18n-title="showsect-cmd" data-i18n-aria-label="showsect-cmd" name="attr_ids-show" value="1" />
								<label class="sheet-showsect sheet-id-showlabel" data-i18n="identification-abbrv">ID</label>
								<hr class="sheet-subnav-hr">
								<div class="sheet-cheat"></div>
								<div class="sheet-table sheet-options">
									<div class="sheet-table-row" style="font-weight:bold;">
										<!-- wrap do not make into table cells for 1/2 size col -->
										<span title="Bonus to strength ability score." data-i18n-title="buff-strength-title" data-i18n-aria-label="buff-strength-title"><span data-i18n="strength-abbrv">STR</span>:<input class="sheet-b-str-show" type="checkbox" title="@{repeating_buff_$X_buff-STR-show}" name="attr_buff-STR-show" value="1" /></span>
										<span title="Bonus to dexterity ability score." data-i18n-title="buff-dexterity-title" data-i18n-aria-label="buff-dexterity-title"><span data-i18n="dexterity-abbrv">DEX</span>:<input class="sheet-b-dex-show" type="checkbox" title="@{repeating_buff_$X_buff-DEX-show}" name="attr_buff-DEX-show" value="1" /></span>
										<span title="Bonus to constitution ability score." data-i18n-title="buff-constitution-title" data-i18n-aria-label="buff-constitution-title"><span data-i18n="constitution-abbrv">CON</span>:<input class="sheet-b-con-show" type="checkbox" title="@{repeating_buff_$X_buff-CON-show}" name="attr_buff-CON-show" value="1" /></span>
										<span title="Bonus to intelligence ability score." data-i18n-title="buff-intelligence-title" data-i18n-aria-label="buff-intelligence-title"><span data-i18n="intelligence-abbrv">INT</span>:<input class="sheet-b-int-show" type="checkbox" title="@{repeating_buff_$X_buff-INT-show}" name="attr_buff-INT-show" value="1" /></span>
										<span title="Bonus to wisdom ability score." data-i18n-title="buff-wisdom-title" data-i18n-aria-label="buff-wisdom-title"><span data-i18n="wisdom-abbrv">WIS</span>:<input class="sheet-b-wis-show" type="checkbox" title="@{repeating_buff_$X_buff-WIS-show}" name="attr_buff-WIS-show" value="1" /></span>
										<span title="Bonus to charisma ability score." data-i18n-title="buff-charisma-title" data-i18n-aria-label="buff-charisma-title"><span data-i18n="charisma-abbrv">CHA</span>:<input class="sheet-b-cha-show" type="checkbox" title="@{repeating_buff_$X_buff-CHA-show}" name="attr_buff-CHA-show" value="1" /></span>
										<span title="Bonus to fortitude saving throws." data-i18n-title="buff-fortitude-title" data-i18n-aria-label="buff-fortitude-title"><span data-i18n="fortitude-abbrv">Fort</span>:<input class="sheet-b-fort-show" type="checkbox" title="@{repeating_buff_$X_buff-Fort-show}" name="attr_buff-Fort-show" value="1" /></span>
										<span title="Bonus to reflex saving throws." data-i18n-title="buff-reflex-title" data-i18n-aria-label="buff-reflex-title"><span data-i18n="reflex-abbrv">Ref</span>:<input class="sheet-b-ref-show" type="checkbox" title="@{repeating_buff_$X_buff-Ref-show}" name="attr_buff-Ref-show" value="1" /></span>
										<span title="Bonus to will saving throws." data-i18n-title="buff-will-title" data-i18n-aria-label="buff-will-title"><span data-i18n="willpower-abbrv">Will</span>:<input class="sheet-b-will-show" type="checkbox" title="@{repeating_buff_$X_buff-Will-show}" name="attr_buff-Will-show" value="1" /></span>
										<span title="Bonus to armor class." data-i18n-title="buff-armor-class-title" data-i18n-aria-label="buff-armor-class-title"><span data-i18n="armor-class-abbrv">AC</span>:<input class="sheet-b-ac-show" type="checkbox" title="@{repeating_buff_$X_buff-AC-show}" name="attr_buff-AC-show" value="1" /></span>
										<span title="Bonus to touch attack armor class." data-i18n-title="buff-touch-title" data-i18n-aria-label="buff-touch-title"><span data-i18n="touch-armor-class-abbrv">Touch AC</span>:<input class="sheet-b-touch-show" type="checkbox" title="@{repeating_buff_$X_buff-Touch-show}" name="attr_buff-Touch-show" value="1" /></span>
										<span title="Bonus to combat maneuver defense." data-i18n-title="buff-cmd-title" data-i18n-aria-label="buff-cmd-title"><span data-i18n="combat-maneuver-defense-abbrv">CMD</span>:<input class="sheet-b-cmd-show" type="checkbox" title="@{repeating_buff_$X_buff-CMD-show}" name="attr_buff-CMD-show" value="1" /></span>
										<span title="Bonus to all melee attack rolls." data-i18n-title="buff-melee-title" data-i18n-aria-label="buff-melee-title"><span data-i18n="melee">Melee</span>:<input class="sheet-b-melee-show" type="checkbox" title="@{repeating_buff_$X_buff-Melee-show}" name="attr_buff-Melee-show" value="1" /></span>
										<span title="Bonus to all ranged attack rolls." data-i18n-title="buff-ranged-title" data-i18n-aria-label="buff-ranged-title"><span data-i18n="ranged">Ranged</span>:<input class="sheet-b-ranged-show" type="checkbox" title="@{repeating_buff_$X_buff-Ranged-show}" name="attr_buff-Ranged-show" value="1" /></span>
										<span title="Bonus to all attack damage." data-i18n-title="buff-damage-title" data-i18n-aria-label="buff-damage-title"><span data-i18n="damage-abbrv">Dmg</span>:<input class="sheet-b-dmg-show" type="checkbox" title="@{repeating_buff_$X_buff-DMG-show}" name="attr_buff-DMG-show" value="1" /></span>
										<span title="Bonus to all skill and ability checks." data-i18n-title="buff-skill-checks-title" data-i18n-aria-label="buff-skill-checks-title"><span data-i18n="check">Check</span>:<input class="sheet-b-check-show" type="checkbox" title="@{repeating_buff_$X_buff-Check-show}" name="attr_buff-Check-show" value="1" /></span>
										<span title="Bonus to spell caster level." data-i18n-title="buff-caster-level-title" data-i18n-aria-label="buff-caster-level-title"><span data-i18n="caster-level">Caster Lvl</span>:<input class="sheet-b-casterlevel-show" type="checkbox" title="@{repeating_buff_$X_buff-CasterLevel-show}" name="attr_buff-CasterLevel-show" value="1" /></span>
										<span title="Temporary hit points." data-i18n-title="buff-temp-hp-title" data-i18n-aria-label="buff-temp-hp-title"><span data-i18n="temporary-hit-points-abbrv">Temp HP</span>:<input class="sheet-b-hp-temp-show" type="checkbox" title="@{repeating_buff_$X_buff-HP-temp-show}" name="attr_buff-HP-temp-show" value="1" /></span>
									</div>
								</div>
								<textarea class="sheet-desc sheet-half" name="attr_buff-notes" title="@{repeating_buff_$X_buff-notes}" placeholder="Buff Notes" data-i18n-placeholder="buff-notes"></textarea>
								<div class="sheet-repeating-id">
									<span data-i18n="row-identification-for-macros">Row ID for macros</span>: <span class="sheet-selectable" name="attr_row_id" />
								</div>
							</div>
						</div>
					</fieldset>
				</div>
			</div>
		</div>
		<input type="checkbox" class="sheet-noshow sheet-npc-show sheet-not-A-show" name="attr_is_npc" value="1" role="presentation" />
		<input type="checkbox" class="sheet-noshow sheet-or-B-show" name="attr_both_whisper_show" value="1" role="presentation" />		
		<div role="group" aria-label="menu buttons display menus in chat area for user to pick from. These are groups of attacks, abilities, etc" class="sheet-top-buttons sheet-inline sheet-not-A-or-B-sect" style="margin-top:.25em;">
			<input class="sheet-showarrow sheet-h2arrow" style="width:6em;margin-right:-6em;" type="checkbox" name="attr_command-buttons-show" aria-label="check to reveal command buttons" value="1" checked />
			<h2 class="sheet-clickheader sheet-showsect"><label title="Show chat ability command buttons" data-i18n-title="buttons-showsect-cmd" data-i18n-aria-label="buttons-showsect-cmd" data-i18n="buttons">Buttons</label></h2>
			<span class="sheet-h2-section sheet-inline" style="margin-left:2em;width:50%;">
				<input type="checkbox" name="attr_unchained_skills-show" class="sheet-unchained-show" value="1" role="presentation" />
				<input type="checkbox" name="attr_BG-Skill-Use" class="sheet-consolidated-show" value="0" role="presentation" />
				<input type="checkbox" name="attr_BG-Skill-Use" class="sheet-bg-show" value="1" checked role="presentation" />
				<input type="checkbox" name="attr_use_spells" class="sheet-sect2-show sheet-noshow" value="1" />
				<input type="checkbox" name="attr_spellclass-0-exists" class="sheet-spellclass0-show sheet-noshow" value="1" />
				<input type="checkbox" name="attr_spellclass-1-exists" class="sheet-spellclass1-show sheet-noshow" value="1" />
				<input type="checkbox" name="attr_spellclass-2-exists" class="sheet-spellclass2-show sheet-noshow" value="1" />
				<button type="roll" name="roll_ability_checks" class="sheet-command-button" value="@{CHAR-whisper} @{ability_checks_macro} {{whisper=@{PC-whisper}}} {{switch=~@{character_id}|NPC-ability_checks}}" title="%{selected|ability_checks}" data-i18n="ability-checks">Ability Checks</button>
				<button type="roll" name="roll_Roll-for-initiative" class="sheet-command-button" value="@{PC-whisper} @{init-macro-text}" title="%{selected|Roll-for-initiative}" data-i18n="initiative-abbrv">Init</button>
				<button type="roll" name="roll_defenses" class="sheet-command-button" value="@{CHAR-whisper} @{defenses-macro} {{whisper=@{PC-whisper}}} {{switch=~@{character_id}|NPC-defenses}} " title="%{selected|defenses}" data-i18n="defenses">Defenses</button>
				<button type="roll" name="roll_attacks" class="sheet-command-button" value="@{CHAR-whisper} @{attacks-macro} {{whisper=@{PC-whisper}}} {{switch=~@{character_id}|NPC-attacks}}" title="%{selected|attacks}" data-i18n="attacks">Attacks</button>
				<button type="roll" name="roll_abilities" class="sheet-command-button" value="@{CHAR-whisper} @{ability_buttons_macro} {{whisper=@{PC-whisper}}} {{switch=~@{character_id}|NPC-abilities}}" title="%{selected|abilities}" data-i18n="abilities">Abilities</button>
				<button type="roll" name="roll_combat_skills" class="sheet-command-button" value="@{CHAR-whisper} @{combat_skills-macro} {{whisper=@{PC-whisper}}} {{switch=~@{character_id}|NPC-combat_skills}}" title="%{selected|combat_skills}" data-i18n="combat-skills">Combat Skills</button>
				<button type="roll" name="roll_skills" class="sheet-command-button" value="@{CHAR-whisper} @{skills-macro} {{whisper=@{PC-whisper}}} {{switch=~@{character_id}|NPC-skills}}" title="%{selected|skills}" data-i18n="all-skills">All Skills</button>
				<button type="roll" name="roll_adventure_skills" class="sheet-command-button sheet-bg-only" value="@{CHAR-whisper} @{adventure_skills-macro} {{whisper=@{PC-whisper}}} {{switch=~@{character_id}|NPC-adventure_skills}}" title="%{selected|adventure_skills}" data-i18n="adventure">Adventure</button>
				<button type="roll" name="roll_background_skills" class="sheet-command-button sheet-bg-only" value="@{CHAR-whisper} @{background_skills-macro} {{switch=~@{character_id}|NPC-background_skills}}" title="%{selected|background_skills}" data-i18n="background">Background</button>
				<button type="roll" name="roll_consolidated_skills" class="sheet-command-button sheet-consolidated" value="@{CHAR-whisper} @{consolidated_skills-macro} {{whisper=@{PC-whisper}}} {{switch=~@{character_id}|NPC-consolidated_skills}}" title="%{selected|consolidated_skills}" data-i18n="consolidated">Consolidated</button>
				<button type="roll" name="roll_spellbook-0" class="sheet-command-button sheet-sect2 sheet-sect-spellclass0" value="@{CHAR-whisper} @{spellclass-0-book} {{whisper=@{PC-whisper}}} {{switch=~@{character_id}|NPC-spellbook-0}}" title="%{selected|spellbook-0}"><span name="attr_spellclass-0-name"></span>&nbsp;<span data-i18n="spellbook">Spellbook</span></button>
				<button type="roll" name="roll_spellbook-1" class="sheet-command-button sheet-sect2 sheet-sect-spellclass1" value="@{CHAR-whisper} @{spellclass-1-book} {{whisper=@{PC-whisper}}} {{switch=~@{character_id}|NPC-spellbook-1}}" title="%{selected|spellbook-1}"><span name="attr_spellclass-1-name"></span>&nbsp;<span data-i18n="spellbook">Spellbook</span></button>
				<button type="roll" name="roll_spellbook-2" class="sheet-command-button sheet-sect2 sheet-sect-spellclass2" value="@{CHAR-whisper} @{spellclass-2-book} {{whisper=@{PC-whisper}}} {{switch=~@{character_id}|NPC-spellbook-2}}" title="%{selected|spellbook-2}"><span name="attr_spellclass-2-name"></span>&nbsp;<span data-i18n="spellbook">Spellbook</span></button>
				<button type="roll" name="roll_items" class="sheet-command-button" value="@{CHAR-whisper} @{item_buttons_macro} {{whisper=@{PC-whisper}}} {{switch=~@{character_id}|NPC-items}}" title="%{selected|items}" data-i18n="items">Items</button>

				<input type="hidden" name="attr_fort-macro-text" value="[[ 1d20 + [[ @{Fort} ]] ]]" />
				<input type="hidden" name="attr_ref-macro-text" value="[[ 1d20 + [[ @{Ref} ]] ]]" />
				<input type="hidden" name="attr_will-macro-text" value="[[ 1d20 + [[ @{Will} ]] ]]" />

				<input type="hidden" name="attr_ability_checks_macro" value="&{template:pf_block} @{toggle_accessible_flag} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_block-check}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{name=^{ability-checks}}} {{row01=^{ability-scores}}} {{row02=[^{strength-abbrv}](~@{character_id}|STR-Check) [^{dexterity-abbrv}](~@{character_id}|DEX-Check) [^{constitution-abbrv}](~@{character_id}|CON-Check) [^{intelligence-abbrv}](~@{character_id}|INT-Check) [^{wisdom-abbrv}](~@{character_id}|WIS-Check) [^{charisma-abbrv}](~@{character_id}|CHA-Check)}} {{row03=^{initiative}}} {{row04=[^{initiative-abbrv}](~@{character_id}|Roll-for-initiative)}}" />
				<input type="hidden" name="attr_defenses-macro" value="&{template:pf_block} @{toggle_accessible_flag} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_defense}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{name=^{defenses}}} {{buttons=[^{fortitude-abbrv}](~@{character_id}|Fort-Save) [^{reflex-abbrv}](~@{character_id}|Ref-Save) [^{willpower-abbrv}](~@{character_id}|Will-Save) [^{all-saves}](~@{character_id}|All-Saves) [^{defense-statistics-abbrv}](~@{character_id}|defense-stats)}}" />
				<input type="hidden" name="attr_defense-stats-macro-text" value="&{template:pf_defense} @{toggle_accessible_flag} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_defense}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{name=^{defense-statistics}}} {{showdefenses=1}} {{showsaves=1}} {{showspecialdefenses=1}} {{ac=@{ac}}} {{touch=@{touch}}} {{flat_footed=@{flat-footed}}} @{var_armor_notes} {{cmd=@{cmd}}} @{var_cmd_notes} {{fort=@{fort}}} {{ref=@{ref}}} {{will=@{will}}} {{spellfail=@{spell-fail}}} @{toggle_save_notes} @{var_dr_notes} @{var_resistances_notes} @{var_immunities_notes} @{var_weaknesses_notes} @{var_sr0_notes} @{var_defensive-abilities_notes} @{var_armor_notes} @{var_defense_notes}" />
				<input type="hidden" name="attr_all_saves-macro" value="&{template:pf_defense} @{toggle_accessible_flag} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_defense}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle}} {{name=^{all-saves}}} {{^{fortitude-save}=@{fort-macro-text}}} {{^{reflex-save}=@{ref-macro-text}}} {{^{willpower-abbrv}=@{will-macro-text}}} @{toggle_save_notes}" />
				<input type="hidden" name="attr_fort-save-macro-text" value="&{template:pf_defense} @{toggle_accessible_flag} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_defense}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle}} {{name=^{fortitude}}} {{^{save}=@{fort-macro-text}}} @{toggle_save_notes}" />
				<input type="hidden" name="attr_ref-save-macro-text" value="&{template:pf_defense} @{toggle_accessible_flag} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_defense}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle}} {{name=^{reflex}}} {{^{save}=@{ref-macro-text}}} @{toggle_save_notes}" />
				<input type="hidden" name="attr_will-save-macro-text" value="&{template:pf_defense} @{toggle_accessible_flag} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_defense}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle}} {{name=^{willpower-abbrv}}} {{^{save}=@{will-macro-text}}} @{toggle_save_notes}" />
				<input type="hidden" name="attr_attacks-macro" value="&{template:pf_block} @{toggle_attack_accessible} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_attack-melee}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle}} {{name=^{attacks}}} @{attacks_header_macro} {{description=^{none-available} }}" />
				<input type="hidden" name="attr_attacks_header_macro" value="{{row01= **^{base-attacks}** }} {{row02=[^{melee}](~@{character_id}|Melee-Attack-Roll) [^{ranged}](~@{character_id}|Ranged-Attack-Roll) [^{combat-maneuver-bonus-abbrv}](~@{character_id}|CMB-Check) [^{melee2}](~@{character_id}|Melee2-Attack-Roll) }}" />
				<input type="hidden" name="attr_skills-macro" value="&{template:pf_generic} @{toggle_accessible_flag} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_generic-skill}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle}} {{name=^{skills} }} {{ [^{appraise}](~@{character_id}|Appraise-check) [^{acrobatics}](~@{character_id}|Acrobatics-check) [^{bluff}](~@{character_id}|Bluff-check) [^{climb}](~@{character_id}|Climb-check) [^{craft}](~@{character_id}|craft_skills_buttons_macro) [^{diplomacy}](~@{character_id}|Diplomacy-check) [^{disable-device}](~@{character_id}|Disable-Device-check) [^{disguise}](~@{character_id}|Disguise-check) [^{escape-artist}](~@{character_id}|Escape-Artist-check) [^{fly}](~@{character_id}|Fly-check) [^{handle-animal}](~@{character_id}|Handle-Animal-check) [^{heal}](~@{character_id}|Heal-check) [^{knowledge}](~@{character_id}|knowledge_skills_buttons_macro) [^{intimidate}](~@{character_id}|Intimidate-check) [^{linguistics}](~@{character_id}|Linguistics-check) [^{misc-skill}](~@{character_id}|misc-skill_skills_buttons_macro) [^{perception}](~@{character_id}|Perception-check) [^{perform}](~@{character_id}|perform_skills_buttons_macro) [^{profession}](~@{character_id}|profession_skills_buttons_macro) [^{ride}](~@{character_id}|Ride-check) [^{sense-motive}](~@{character_id}|Sense-Motive-check) [^{sleight-of-hand}](~@{character_id}|Sleight-of-Hand-check) [^{spellcraft}](~@{character_id}|Spellcraft-check) [^{stealth}](~@{character_id}|Stealth-check) [^{swim}](~@{character_id}|Swim-check) [^{use-magic-device}](~@{character_id}|Use-Magic-Device-check) }}" />
				<input type="hidden" name="attr_combat_skills-macro" value="&{template:pf_generic} @{toggle_accessible_flag} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_generic-skill}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle}} {{name=^{combat-skills} }} {{^{skills}}} {{ [^{acrobatics}](~@{character_id}|Acrobatics-check) [^{bluff}](~@{character_id}|Bluff-check) [^{disable-device}](~@{character_id}|Disable-Device-check) [^{fly}](~@{character_id}|Fly-check) [^{handle-animal}](~@{character_id}|Handle-Animal-check) [^{intimidate}](~@{character_id}|Intimidate-check) [^{perception}](~@{character_id}|Perception-check)  [^{ride}](~@{character_id}|Ride-check)  [^{sense-motive}](~@{character_id}|Sense-Motive-check) [^{spellcraft}](~@{character_id}|Spellcraft-check) [^{stealth}](~@{character_id}|Stealth-check) [^{use-magic-device}](~@{character_id}|Use-Magic-Device-check) [^{perform}](~@{character_id}|perform_skills_buttons_macro) }} {{^{knowledge} ^{skills}}} {{ [^{arcana}](~@{character_id}|Knowledge-Arcana-check) [^{dungeoneering}](~@{character_id}|Knowledge-Dungeoneering-check) [^{engineering}](~@{character_id}|Knowledge-Engineering-check) [^{geography}](~@{character_id}|Knowledge-Geography-check) [^{history}](~@{character_id}|Knowledge-History-check) [^{local}](~@{character_id}|Knowledge-Local-check) [^{nature}](~@{character_id}|Knowledge-Nature-check) [^{nobility}](~@{character_id}|Knowledge-Nobility-check) [^{planes}](~@{character_id}|Knowledge-Planes-check) [^{religion}](~@{character_id}|Knowledge-Religion-check) }}" />							
				<input type="hidden" name="attr_spellclass-0-book" value="&{template:pf_block} @{toggle_spell_accessible} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_block}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle}} {{name=@{spellclass-0-name} ^{spells}}} {{row01=**^{checks}**}} {{row02=[^{caster-level-check}](~@{character_id}|Spell-Class-0-CL-Check) [^{concentration-check}](~@{character_id}|Concentration-Check-0) [^{spell-failure}](~@{character_id}|Spell-Fail-Check)}} {{description=^{none-available} }}" />
				<input type="hidden" name="attr_spellclass-1-book" value="&{template:pf_block} @{toggle_spell_accessible} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_block}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle}} {{name=@{spellclass-1-name} ^{spells}}} {{row01=**^{checks}**}} {{row02=[^{caster-level-check}](~@{character_id}|Spell-Class-1-CL-Check) [^{concentration-check}](~@{character_id}|Concentration-Check-1) [^{spell-failure}](~@{character_id}|Spell-Fail-Check)}} {{description=^{none-available} }}" />
				<input type="hidden" name="attr_spellclass-2-book" value="&{template:pf_block} @{toggle_spell_accessible} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_block}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle}} {{name=@{spellclass-2-name} ^{spells}}} {{row01=**^{check}**}} {{row02=[^{caster-level-check}](~@{character_id}|Spell-Class-2-CL-Check) [^{concentration-check}](~@{character_id}|Concentration-Check-2) [^{spell-failure}](~@{character_id}|Spell-Fail-Check)}} {{description=^{none-available} }}" />
				<input type="hidden" name="attr_item_buttons_macro" value="&{template:pf_block} @{toggle_attack_accessible} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_attack-melee}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle}} {{name=^{items}}} {{description=^{none-available} }}" />
			</span>
		</div>	
		<div class="sheet-cheat sheet-not-A-or-B-sect"></div>
		<div role="group" aria-label="menu buttons display menus in chat area for user to pick from. These are groups of attacks, abilities, etc" class="sheet-top-buttons sheet-inline sheet-sect-npc" style="margin-top:.25em;">
			<input class="sheet-showarrow sheet-h2arrow" style="width:6em;margin-right:-6em;" type="checkbox" name="attr_NPC-command-buttons-show" aria-label="check to reveal command buttons" value="1" checked />
			<h2 class="sheet-clickheader sheet-showsect"><label title="Show chat ability command buttons" data-i18n-title="buttons-showsect-cmd" data-i18n-aria-label="buttons-showsect-cmd" data-i18n="npc-buttons">NPC Buttons</label></h2>
			<span class="sheet-h2-section sheet-inline" style="margin-left:2em;width:50%;">				
				<input type="checkbox" name="attr_unchained_skills-show" class="sheet-unchained-show" value="1" role="presentation" />
				<input type="checkbox" name="attr_BG-Skill-Use" class="sheet-consolidated-show" value="0" role="presentation" />
				<input type="checkbox" name="attr_BG-Skill-Use" class="sheet-bg-show" value="1" checked role="presentation" />
				<input type="checkbox" name="attr_use_spells" class="sheet-sect2-show sheet-noshow" value="1" />
				<input type="checkbox" name="attr_spellclass-0-exists" class="sheet-spellclass0-show sheet-noshow" value="1" />
				<input type="checkbox" name="attr_spellclass-1-exists" class="sheet-spellclass1-show sheet-noshow" value="1" />
				<input type="checkbox" name="attr_spellclass-2-exists" class="sheet-spellclass2-show sheet-noshow" value="1" />
				<button type="roll" name="roll_NPC-ability_checks" class="sheet-command-button" value="@{CHAR-whisper} @{NPC-ability_checks_macro} {{whisper=@{NPC-whisper}}} {{switch=~@{character_id}|ability_checks}}" title="%{selected|NPC-ability_checks}" data-i18n="ability-checks">Ability Checks</button>
				<button type="roll" name="roll_NPC-Initiative-Roll" class="sheet-command-button" value="@{NPC-whisper} @{init-macro-text}" title="%{selected|NPC-Initiative-Roll}" data-i18n="initiative-abbrv">Init</button>
				<button type="roll" name="roll_NPC-defenses" class="sheet-command-button" value="@{CHAR-whisper} @{NPC-defenses-macro} {{whisper=@{NPC-whisper}}} {{switch=~@{character_id}|NPC-defenses}}" title="%{selected|NPC-defenses}" data-i18n="defenses">Defenses</button>
				<button type="roll" name="roll_NPC-attacks" class="sheet-command-button" value="@{CHAR-whisper} @{attacks-macro-npc} {{whisper=@{NPC-whisper}}} {{switch=~@{character_id}|attacks}}" title="%{selected|NPC-attacks}" data-i18n="attacks">Attacks</button>
				<button type="roll" name="roll_NPC-abilities" class="sheet-command-button" value="@{CHAR-whisper} @{NPC-ability_buttons_macro} {{whisper=@{NPC-whisper}}} {{switch=~@{character_id}|abilities}}" title="%{selected|NPC-abilities}" data-i18n="abilities">Abilities</button>
				<button type="roll" name="roll_NPC-combat_skills" class="sheet-command-button" value="@{CHAR-whisper} @{NPC-combat_skills-macro} {{whisper=@{NPC-whisper}}} {{switch=~@{character_id}|combat_skills}}" title="%{selected|NPC-combat_skills}" data-i18n="combat-skills">Combat Skills</button>
				<button type="roll" name="roll_NPC-skills" class="sheet-command-button" value="@{CHAR-whisper} @{NPC-skills-macro} {{whisper=@{NPC-whisper}}} {{switch=~@{character_id}|skills}}" title="%{selected|NPC-skills}" data-i18n="all-skills">All Skills</button>
				<button type="roll" name="roll_NPC-adventure_skills" class="sheet-command-button sheet-bg-only" value="@{CHAR-whisper} @{NPC-adventure_skills-macro} {{whisper=@{NPC-whisper}}} {{switch=~@{character_id}|adventure_skills}}" title="%{selected|NPC-adventure_skills}" data-i18n="adventure">Adventure</button>
				<button type="roll" name="roll_NPC-background_skills" class="sheet-command-button sheet-bg-only" value="@{CHAR-whisper} @{NPC-background_skills-macro} {{whisper=@{NPC-whisper}}} {{switch=~@{character_id}|background_skills}}" title="%{selected|NPC-background_skills}" data-i18n="background">Background</button>
				<button type="roll" name="roll_NPC-consolidated_skills" class="sheet-command-button sheet-consolidated" value="@{CHAR-whisper} @{NPC-consolidated_skills-macro} {{whisper=@{NPC-whisper}}} {{switch=~@{character_id}|consolidated_skills}}" title="%{selected|NPC-consolidated_skills}" data-i18n="consolidated">Consolidated</button>
				<button type="roll" name="roll_NPC-spellbook-0" class="sheet-command-button sheet-sect2 sheet-sect-spellclass0" value="@{CHAR-whisper} @{spellclass-0-book-npc} {{whisper=@{NPC-whisper}}} {{switch=~@{character_id}|spellbook-0}}" title="%{selected|NPC-spellbook-0}"><span name="attr_spellclass-0-name"></span>&nbsp;<span data-i18n="spellbook">Spellbook</span></button>
				<button type="roll" name="roll_NPC-spellbook-1" class="sheet-command-button sheet-sect2 sheet-sect-spellclass1" value="@{CHAR-whisper} @{spellclass-1-book-npc} {{whisper=@{NPC-whisper}}} {{switch=~@{character_id}|spellbook-1}}" title="%{selected|NPC-spellbook-1}"><span name="attr_spellclass-1-name"></span>&nbsp;<span data-i18n="spellbook">Spellbook</span></button>
				<button type="roll" name="roll_NPC-spellbook-2" class="sheet-command-button sheet-sect2 sheet-sect-spellclass2" value="@{CHAR-whisper} @{spellclass-2-book-npc} {{whisper=@{NPC-whisper}}} {{switch=~@{character_id}|spellbook-2}}" title="%{selected|NPC-spellbook-2}"><span name="attr_spellclass-2-name"></span>&nbsp;<span data-i18n="spellbook">Spellbook</span></button>
				<button type="roll" name="roll_NPC-items" class="sheet-command-button" value="@{CHAR-whisper} @{NPC-item_buttons_macro} {{whisper=@{NPC-whisper}}} {{switch=~@{character_id}|items}}" title="%{selected|NPC-items}" data-i18n="items">Items</button>
				<input type="hidden" name="attr_NPC-ability_checks_macro" value="&{template:pf_block} @{toggle_accessible_flag} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_block-check}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{name=^{npc} ^{ability-checks}}} {{row01=[^{strength-abbrv}](~@{character_id}|NPC-STR-Check) [^{dexterity-abbrv}](~@{character_id}|NPC-DEX-Check) [^{constitution-abbrv}](~@{character_id}|NPC-CON-Check) [^{intelligence-abbrv}](~@{character_id}|NPC-INT-Check) [^{wisdom-abbrv}](~@{character_id}|NPC-WIS-Check) [^{charisma-abbrv}](~@{character_id}|NPC-CHA-Check)}} {{row03=^{initiative}}} {{row04=[^{initiative-abbrv}](~@{character_id}|NPC-Initiative-Roll)}}" />
				<input type="hidden" name="attr_NPC-defenses-macro" value="&{template:pf_block} @{toggle_accessible_flag} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_defense}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{name=^{npc} ^{defenses}}} {{buttons=[^{fortitude-abbrv}](~@{character_id}|NPC-Fort-Save) [^{reflex-abbrv}](~@{character_id}|NPC-Ref-Save) [^{willpower-abbrv}](~@{character_id}|NPC-Will-Save) [^{all-saves}](~@{character_id}|NPC-All-Saves) [^{defense-statistics-abbrv}](~@{character_id}|NPC-defense-stats)}}" />
				<input type="hidden" name="attr_attacks-macro-npc" value="&{template:pf_block} @{toggle_attack_accessible} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_attack-melee}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle}} {{name=^{npc} ^{attacks}}} @{NPC-attacks_header_macro} {{description=^{none-available} }}" />
				<input type="hidden" name="attr_NPC-attacks_header_macro" value="{{row01= **^{base-attacks}** }} {{row02=[^{melee}](~@{character_id}|NPC-Melee-Attack-Roll) [^{ranged}](~@{character_id}|NPC-Ranged-Attack-Roll) [^{combat-maneuver-bonus-abbrv}](~@{character_id}|NPC-CMB-Check) [^{melee2}](~@{character_id}|NPC-Melee2-Attack-Roll) }}" />
				<input type="hidden" name="attr_NPC-skills-macro" value="&{template:pf_generic} @{toggle_accessible_flag} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_generic-skill}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle}} {{name=^{npc} ^{skills} }} {{ [^{appraise}](~@{character_id}|NPC-Appraise-check) [^{acrobatics}](~@{character_id}|NPC-Acrobatics-check) [^{bluff}](~@{character_id}|NPC-Bluff-check) [^{climb}](~@{character_id}|NPC-Climb-check) [^{craft}](~@{character_id}|NPC-craft_skills_buttons_macro) [^{diplomacy}](~@{character_id}|NPC-Diplomacy-check) [^{disable-device}](~@{character_id}|NPC-Disable-Device-check) [^{disguise}](~@{character_id}|NPC-Disguise-check) [^{escape-artist}](~@{character_id}|NPC-Escape-Artist-check) [^{fly}](~@{character_id}|NPC-Fly-check) [^{handle-animal}](~@{character_id}|NPC-Handle-Animal-check) [^{heal}](~@{character_id}|NPC-Heal-check) [^{knowledge}](~@{character_id}|NPC-knowledge_skills_buttons_macro) [^{intimidate}](~@{character_id}|NPC-Intimidate-check) [^{linguistics}](~@{character_id}|NPC-Linguistics-check) [^{misc-skill}](~@{character_id}|NPC-misc-skill_skills_buttons_macro) [^{perception}](~@{character_id}|NPC-Perception-check) [^{perform}](~@{character_id}|NPC-perform_skills_buttons_macro) [^{profession}](~@{character_id}|NPC-profession_skills_buttons_macro) [^{ride}](~@{character_id}|NPC-Ride-check) [^{sense-motive}](~@{character_id}|NPC-Sense-Motive-check) [^{sleight-of-hand}](~@{character_id}|NPC-Sleight-of-Hand-check) [^{spellcraft}](~@{character_id}|NPC-Spellcraft-check) [^{stealth}](~@{character_id}|NPC-Stealth-check) [^{swim}](~@{character_id}|NPC-Swim-check) [^{use-magic-device}](~@{character_id}|NPC-Use-Magic-Device-check) }}" />
				<input type="hidden" name="attr_NPC-combat_skills-macro" value="&{template:pf_generic} @{toggle_accessible_flag} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_generic-skill}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle}} {{name=^{npc} ^{combat-skills} }} {{^{npc} ^{skills}}} {{ [^{acrobatics}](~@{character_id}|NPC-Acrobatics-check) [^{bluff}](~@{character_id}|NPC-Bluff-check) [^{disable-device}](~@{character_id}|NPC-Disable-Device-check) [^{fly}](~@{character_id}|NPC-Fly-check)  [^{handle-animal}](~@{character_id}|NPC-Handle-Animal-check) [^{intimidate}](~@{character_id}|NPC-Intimidate-check) [^{perception}](~@{character_id}|NPC-Perception-check)  [^{ride}](~@{character_id}|NPC-Ride-check) [^{sense-motive}](~@{character_id}|NPC-Sense-Motive-check) [^{stealth}](~@{character_id}|NPC-Stealth-check) [^{survival}](~@{character_id}|NPC-Survival-check) [^{use-magic-device}](~@{character_id}|NPC-Use-Magic-Device-check) [^{perform}](~@{character_id}|NPC-perform_skills_buttons_macro) }} {{^{knowledge} ^{skills}}} {{ [^{arcana}](~@{character_id}|NPC-Knowledge-Arcana-check) [^{dungeoneering}](~@{character_id}|NPC-Knowledge-Dungeoneering-check) [^{engineering}](~@{character_id}|NPC-Knowledge-Engineering-check) [^{geography}](~@{character_id}|NPC-Knowledge-Geography-check) [^{history}](~@{character_id}|NPC-Knowledge-History-check) [^{local}](~@{character_id}|NPC-Knowledge-Local-check) [^{nature}](~@{character_id}|NPC-Knowledge-Nature-check) [^{nobility}](~@{character_id}|NPC-Knowledge-Nobility-check) [^{planes}](~@{character_id}|NPC-Knowledge-Planes-check) [^{religion}](~@{character_id}|NPC-Knowledge-Religion-check) }}" />							
				<input type="hidden" name="attr_spellclass-0-book-npc" value="&{template:pf_block} @{toggle_spell_accessible} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_block}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle}} {{name=^{npc} @{spellclass-0-name} ^{spells}}} {{row01=**^{checks}**}} {{row02=[^{caster-level-check}](~@{character_id}|Spell-Class-0-CL-Check) [^{concentration-check}](~@{character_id}|Concentration-Check-0) [^{spell-failure}](~@{character_id}|NPC-Spell-Fail-Check)}} {{description=^{none-available} }}" />
				<input type="hidden" name="attr_spellclass-1-book-npc" value="&{template:pf_block} @{toggle_spell_accessible} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_block}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle}} {{name=^{npc} @{spellclass-1-name} ^{spells}}} {{row01=**^{checks}**}} {{row02=[^{caster-level-check}](~@{character_id}|Spell-Class-1-CL-Check) [^{concentration-check}](~@{character_id}|Concentration-Check-1) [^{spell-failure}](~@{character_id}|NPC-Spell-Fail-Check)}} {{description=^{none-available} }}" />
				<input type="hidden" name="attr_spellclass-2-book-npc" value="&{template:pf_block} @{toggle_spell_accessible} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_block}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle}} {{name=^{npc} @{spellclass-2-name} ^{spells}}} {{row01=**^{checks}**}} {{row02=[^{caster-level-check}](~@{character_id}|Spell-Class-2-CL-Check) [^{concentration-check}](~@{character_id}|Concentration-Check-2) [^{spell-failure}](~@{character_id}|NPC-Spell-Fail-Check)}} {{description=^{none-available} }}" />
				<input type="hidden" name="attr_NPC-item_buttons_macro" value="&{template:pf_block} @{toggle_attack_accessible} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_attack-melee}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle}} {{name=^{items}}} {{description=^{none-available} }}" />
			</span>
			<div style="display:none;">
				<button type="roll" name="roll_skills_buttons_macro"  value="@{skills-macro}" >Old All Skills</button>
				<button type="roll" name="roll_NPC-skills_buttons_macro"  value="@{NPC-skills-macro}" >Old NPC All Skills</button>
				<button type="roll" name="roll_adventure_skills_buttons_macro"  value="@{adventure_skills-macro}" >Old Adventure</button>
				<button type="roll" name="roll_background_skills_buttons_macro"  value="@{background_skills-macro}" >Old Background</button>
				<button type="roll" name="roll_consolidated_skills_buttons_macro"  value="@{consolidated_skills-macro}" >Old Consolidated</button>
				<button type="roll" name="roll_NPC-attacks_buttons"  value="@{attacks-macro-npc}" >old npc Attacks</button>
				<button type="roll" name="roll_attacks_buttons" value="@{attacks-macro}"  >old Attacks</button>
				<button type="roll" name="roll_attacks_buttons_macro-npc"  value="@{attacks-macro-npc}">old NPC Attacks</button>
				<button type="roll" name="roll_spellbook-0-roll"  value="@{spellclass-0-book}" >old class 0 spellbook</button>
				<button type="roll" name="roll_spellbook-1-roll"  value="@{spellclass-1-book}" >old class 1 spellbook</button>
				<button type="roll" name="roll_spellbook-2-roll"  value="@{spellclass-2-book}" >old class 2 spellbook</button>
				<button type="roll" name="roll_spellbook-0-roll-npc"  value="@{spellclass-0-book-npc}" >old NPC class 0 spellbook</button>
				<button type="roll" name="roll_spellbook-1-roll-npc"  value="@{spellclass-1-book-npc}" >old NPC class 1 spellbook</button>
				<button type="roll" name="roll_spellbook-2-roll-npc"  value="@{spellclass-2-book-npc}" >old NPC class 2 spellbook</button>
			</div>
		</div>
		<div role="main" class="sheet-main">
			<div role="menubar" class="sheet-mainnav sheet-tabs" aria-label="Main menubar"  data-i18n-aria-label="nav-main-desc"></div>
			<input type="radio" name="attr_tab" value="1" class="sheet-tabinput sheet-tab1 sheet-narrow-tab" aria-label="Core" data-i18n-title="core" data-i18n-aria-label="core" checked />
			<label role="menuitem" class="sheet-tab sheet-tab1 sheet-narrow-tab" data-i18n-title="core" data-i18n-aria-label="core" title="Core" data-i18n="core">Core</label>
			<input type="radio" name="attr_tab" value="2" class="sheet-tabinput sheet-tab2 sheet-wider-tab" data-i18n-title="defenses" aria-label="Defenses" data-i18n-aria-label="defenses" />
			<label role="menuitem" class="sheet-tab sheet-tab2 sheet-wider-tab" data-i18n-title="defenses" data-i18n-aria-label="defenses" title="defenses" data-i18n="defenses">Defenses</label>
			<input type="radio" name="attr_tab" value="3" class="sheet-tabinput sheet-tab3" data-i18n-title="attacks" daria-label="Attacks" data-i18n-aria-label="attacks" />
			<label role="menuitem" class="sheet-tab sheet-tab3" data-i18n-title="attacks" data-i18n-aria-label="attacks" data-i18n="attacks">Attacks</label>
			<input type="radio" name="attr_tab" value="4" class="sheet-tabinput sheet-tab4 sheet-wider-tab" data-i18n-title="abilities" aria-label="Abilities" data-i18n-aria-label="abilities" />
			<label role="menuitem" class="sheet-tab sheet-tab4 sheet-wider-tab" data-i18n-title="abilities" data-i18n-aria-label="abilities" data-i18n="abilities">Abilities</label>
			<input type="radio" name="attr_tab" value="5" class="sheet-tabinput sheet-tab5" data-i18n-title="skills" aria-label="Skills" data-i18n-aria-label="skills" />
			<label role="menuitem" class="sheet-tab sheet-tab5" data-i18n-title="skills" data-i18n-aria-label="skills" data-i18n="skills">Skills</label>
			<input type="radio" name="attr_tab" value="7" class="sheet-tabinput sheet-tab7 sheet-spelltab" data-i18n-title="spells" aria-label="Spells" data-i18n-aria-label="spells" />
			<label role="menuitem" class="sheet-tab sheet-tab7 sheet-spelltab" data-i18n-title="spells" data-i18n-aria-label="spells" title="Spells" data-i18n="spells">Spells</label>
			<input type="radio" name="attr_tab" value="6" class="sheet-tabinput sheet-tab6 sheet-wider-tab" data-i18n-title="inventory" aria-label="Inventory" data-i18n-aria-label="inventory" />
			<label role="menuitem" class="sheet-tab sheet-tab6 sheet-wider-tab" data-i18n-title="inventory" data-i18n-aria-label="inventory" title="Inventory" data-i18n="inventory">Inventory</label>
			<input type="radio" name="attr_tab" value="8" class="sheet-tabinput sheet-tab8 sheet-narrow-tab sheet-npctab" data-i18n-title="npc" aria-label="NPC" data-i18n-aria-label="npc" />
			<label role="menuitem" class="sheet-tab sheet-tab8 sheet-narrow-tab sheet-npctab" data-i18n-title="npc" data-i18n-aria-label="npc" title="NPC" data-i18n="npc">NPC</label>
			<input type="radio" name="attr_tab" value="9" class="sheet-tabinput sheet-tab9 sheet-narrow-tab" data-i18n-title="notes" aria-label="notes" data-i18n-aria-label="notes" />
			<label role="menuitem" class="sheet-tab sheet-tab9 sheet-narrow-tab" data-i18n-title="notes" data-i18n-aria-label="notes" title="notes" data-i18n="notes">notes</label>
			<input type="radio" name="attr_tab" value="99" class="sheet-tabinput sheet-tab99" data-i18n-title="all" aria-label="All" data-i18n-aria-label="all" />
			<label role="menuitem" class="sheet-tab sheet-tab99" data-i18n-title="all" data-i18n-aria-label="all" title="All" data-i18n="all">All</label>
			<div class="sheet-cheat"></div>
			<div class="sheet-section1 sheet-section sheet-section-core" role="region" aria-label="Core" data-i18n-aria-label="core">
				<h1 class="sheet-selected-tabtitle" data-i18n="core">Core</h1>				
					<input class="sheet-showarrow sheet-h2arrow" type="checkbox" name="attr_character-details-show" data-i18n-aria-label="char-h-exp" value="1" checked />
					<h2 class="sheet-clickheader sheet-showsect"><label title="Expand Character Details" data-i18n-title="char-h-exp" data-i18n-aria-label="char-h-exp" data-i18n="char">Character Details</label></h2>
					<div class="sheet-h2-section sheet-nontable sheet-core-details sheet-wide-readonly">					
						<span class="sheet-nontable-name sheet-secondary-table-name" data-i18n="char">Character Details</span>
						<label class="sheet-small-label2 sheet-autoexpand"><input title="@{character_title}" type="text" name="attr_character_title" placeholder="Title/Nickname" data-i18n-placeholder="title"><span data-i18n="title">Title/Nickname</span><span name="attr_character_title" class="sheet-autoexpand"></span></label>
						<label class="sheet-small-label2 sheet-autoexpand"><input title="@{race}" type="text" name="attr_race" placeholder="Race" data-i18n-placeholder="race"><span data-i18n="race">Race</span><span name="attr_race" class="sheet-autoexpand"></span></label>
						<label class="sheet-small-label2 sheet-autoexpand"><input title="@{npc-type}" type="text" name="attr_npc-type" placeholder="Type/(sub-type)" data-i18n-placeholder="type-or-sub-type"><span data-i18n="type-or-sub-type">Type/(sub-type)</span><span name="attr_npc-type" class="sheet-autoexpand"></span></label>
						<label class="sheet-small-label2 sheet-autoexpand"><input title="@{alignment}" type="text" name="attr_alignment" placeholder="Alignment" data-i18n-placeholder="alignment"><span data-i18n="alignment">Alignment</span><span name="attr_alignment" class="sheet-autoexpand"></span></label>
						<label class="sheet-small-label2 sheet-autoexpand"><input title="@{gender}" type="text" name="attr_gender" placeholder="Gender" data-i18n-placeholder="gender"><span data-i18n="gender">Gender</span><span name="attr_gender" class="sheet-autoexpand"></span></label>
						<label class="sheet-small-label2 sheet-entry-med sheet-hide-readonly" style="padding-left:.5em;">
							<select title="@{default_char_size}" name="attr_default_char_size" >
								<option value="-8" data-i18n="size-colossal">Colossal</option>
								<option value="-4" data-i18n="size-gargantuan">Gargantuan</option>
								<option value="-2" data-i18n="size-huge">Huge</option>
								<option value="-1" data-i18n="size-large">Large</option>
								<option value="0" data-i18n="medium-abbrv-default" selected>&#8226;Medium</option>
								<option value="1" data-i18n="size-small">Small</option>
								<option value="2" data-i18n="size-tiny">Tiny</option>
								<option value="4" data-i18n="size-diminutive">Diminutive</option>
								<option value="8" data-i18n="size-fine">Fine</option>
							</select>
							<span data-i18n="default-size">Default Size</span>
						</label>
						<label class="sheet-small-label2 sheet-entry-med" style="padding-left:.5em;">
							<select title="@{size}" name="attr_size">
								<option value="-8" data-i18n="size-colossal">Colossal</option>
								<option value="-4" data-i18n="size-gargantuan">Gargantuan</option>
								<option value="-2" data-i18n="size-huge">Huge</option>
								<option value="-1" data-i18n="size-large">Large</option>
								<option value="0" data-i18n="medium-abbrv-default" selected>&#8226;Medium</option>
								<option value="1" data-i18n="size-small">Small</option>
								<option value="2" data-i18n="size-tiny">Tiny</option>
								<option value="4" data-i18n="size-diminutive">Diminutive</option>
								<option value="8" data-i18n="size-fine">Fine</option>
							</select>
							<span data-i18n="size">Size</span>
						</label>
						<label class="sheet-small-label2 sheet-narrow-numbers">
							<input title="@{size}" type="hidden" name="attr_old_size" value="x" >
							<input title="@{size}" type="number" name="attr_size" value="0" class="sheet-calc" readonly>
							<span data-i18n="modifier-abbrv">Mod</span>
						</label>
						<label class="sheet-small-label2 sheet-narrow-numbers sheet-hide-readonly"><input title="@{size_skill}" type="number" name="attr_size_skill" value="0" class="sheet-calc" readonly><span title="Size adjustment for skills. Double for stealth" data-i18n-title="skill-size-title" data-i18n-aria-label="skill-size-title" data-i18n="skill-size-modifier">Skill</span></label>
						<label class="sheet-small-label2 sheet-number">
							<input type="checkbox" value="4" name="attr_legs" title="@{legs}" style="margin-bottom: .4em;"/>
							<span title="How many legs the character has. Affects carrying capacity. Check if it should use quadraped carrying capacity" data-i18n-title="legs-title" data-i18n-aria-label="legs-title" data-i18n="four-legged-abbrv">Quad</span>
						</label>
						<label class="sheet-small-label2 sheet-number"><input title="@{age}" type="number" name="attr_age" placeholder="Age" data-i18n-placeholder="details-age" class="sheet-entry-wide" /><span data-i18n="age">Age</span></label>
						<label class="sheet-small-label2 sheet-autoexpand"><input title="@{height}" type="text" name="attr_height" placeholder="Height" data-i18n-placeholder="details-height" /><span data-i18n="details-height">Height</span><span name="attr_height" class="sheet-autoexpand"></span></label>
						<label class="sheet-small-label2 sheet-autoexpand"><input title="@{weight}" type="text" name="attr_weight" placeholder="Weight" data-i18n-placeholder="details-weight" /><span data-i18n="weight">Weight</span><span name="attr_weight" class="sheet-autoexpand"></span></label>
						<label class="sheet-small-label2 sheet-autoexpand"><input title="@{eyes}" type="text" name="attr_eyes" placeholder="Eyes Details" data-i18n-placeholder="eyes-details" /><span data-i18n="eyes">Eyes</span><span name="attr_eyes" class="sheet-autoexpand"></span></label>
						<label class="sheet-small-label2 sheet-autoexpand"><input title="@{hair}" type="text" name="attr_hair" placeholder="Hair Details" data-i18n-placeholder="hair-details" /><span data-i18n="hair">Hair</span><span name="attr_hair" class="sheet-autoexpand"></span></label>
						<label class="sheet-small-label2 sheet-autoexpand"><input title="@{skin}" type="text" name="attr_skin" placeholder="Skin Details" data-i18n-placeholder="skin-details" /><span data-i18n="skin">Skin</span><span name="attr_skin" class="sheet-autoexpand"></span></label>
						<label class="sheet-small-label2 sheet-autoexpand"><input title="@{deity}" type="text" name="attr_deity" placeholder="Deity" data-i18n-placeholder="details-deity" /><span data-i18n="deity">Deity</span><span name="attr_deity" class="sheet-autoexpand"></span></label>
						<label class="sheet-small-label2 sheet-autoexpand"><input title="@{homeland}" type="text" name="attr_homeland" placeholder="Homeland" data-i18n-placeholder="details-homeland" /><span data-i18n="homeland">Homeland</span><span name="attr_homeland" class="sheet-autoexpand"></span></label>
						<label class="sheet-small-label2 sheet-autoexpand"><input title="@{occupation}" type="text" name="attr_occupation" placeholder="Occupation" data-i18n-placeholder="details-occupation" /><span data-i18n="occupation">Occupation</span><span name="attr_occupation" class="sheet-autoexpand"></span></label>
						<label class="sheet-small-label2 sheet-autoexpand"><input title="@{vision}" data-i18n-title="vision-title" data-i18n-aria-label="vision-title" type="text" name="attr_vision" placeholder="Vision Details" data-i18n-placeholder="vision-details" /><span data-i18n="vision-senses">Vision and Senses</span><span name="attr_vision" class="sheet-autoexpand"></span></label>
						<label class="sheet-small-label2 sheet-autoexpand"><input title="@{languages}" type="text" name="attr_languages" value="" placeholder="Languages" data-i18n-placeholder="details-languages" class="sheet-entry-wide" style="width:100%;" /><span data-i18n="languages">Languages</span><span name="attr_languages" class="sheet-autoexpand"></span></label>
						<input title="@{CMD-size}" type="hidden" name="attr_CMD-size" value="0">
						<input title="@{size_skill_double}" type="hidden" name="attr_size_skill_double" value="0">
						<span class="sheet-cheat"></span>
						<label class="sheet-small-label2 sheet-wide-textareaparent"><textarea class="sheet-inline-textarea" title="@{character_description}" type="text" name="attr_character_description" placeholder="Description" data-i18n-placeholder="description"></textarea><span data-i18n="description">Description</span></label>
					</div>
					
				<div class="sheet-row sheet-row1 sheet-flex-row">
					<input class="sheet-prestige-show sheet-noshow" type="checkbox" name="attr_use_prestige_fame" value="1" />	
					<input type="hidden" name="attr_checks-cond" value="0" />
					<div class="sheet-cheat"></div>
					<div class="sheet-col">
						<input class="sheet-showarrow sheet-h2arrow" type="checkbox" name="attr_ability-scores-show" data-i18n-aria-label="ability-scores" value="1" checked />
						<h2 class="sheet-clickheader sheet-showsect"><label title="Click to expand" data-i18n-title="showsect-cmd" data-i18n-aria-label="showsect-cmd" data-i18n="ability-scores">Ability Scores</label></h2>
						<div class="sheet-h2-section sheet-ability-scores">
							<br style="display:none;" class="sheet-hide-readonly" />
							<div class="sheet-table sheet-narrow-numbers-readonly">
								<span class="sheet-table-name sheet-secondary-table-name" data-i18n="ability-scores">Ability Scores</span>
								<div class="sheet-table-group-head">
									<span class="sheet-table-header" data-i18n="ability">Ability</span>
									<span class="sheet-table-header" data-i18n-title="ability-score" data-i18n="total">Total</span>
									<span class="sheet-table-header sheet-right-border" data-i18n="modifier-abbrv">Mod</span>
									<span class="sheet-table-header sheet-emphasize-field" data-i18n="base-value">Base</span>
									<span class="sheet-table-header" data-i18n-title="inherent-bonus" data-i18n-aria-label="inherent-bonus" data-i18n="inherent-abbrv">Inher</span>
									<span class="sheet-table-header" data-i18n-title="enhancement-bonus" data-i18n="enhancement-abbrv">Enhan</span>
									<span class="sheet-table-header" data-i18n-title="miscellaneous-bonus" data-i18n="miscellaneous-abbrv">Misc</span>
									<span class="sheet-table-header" data-i18n="buffs">Buffs</span>
									<span class="sheet-table-header" data-i18n-title="ability-damage-desc" data-i18n="damage">Damage</span>
									<span class="sheet-table-header" data-i18n-title="ability-penalty-desc" data-i18n="penalty">Penalty</span>
									<span class="sheet-table-header" data-i18n-title="ability-drain-desc" data-i18n="drain">Drain</span>
									<span class="sheet-table-header" data-i18n-title="debuff-title" data-i18n="debuff">Debuff</span>
									<span class="sheet-table-header" data-i18n-title="condition-description" data-i18n-aria-label="condition-description" data-i18n="condition-abbrv">Cond</span>
								</div>
								<div class="sheet-table-group">
									<div class="sheet-table-row">
										<span class="sheet-table-cell"><button class="sheet-text-button" title="%{selected|STR-Check}" type="roll" name="roll_STR-Check" value="@{PC-whisper} &{template:pf_generic} @{toggle_accessible_flag} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_block-check}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle}} {{name=^{strength}}} {{check=[[ 1d20 + [[ @{STR-mod} ]]  + [[ @{checks-cond}  ]] ]]}}">&nbsp;<span style="vertical-align: middle;" data-i18n="strength-abbrv">STR</span></button></span>
										<span class="sheet-table-cell sheet-number"><input class="sheet-calc sheet-number" readonly title="@{STR}" type="text" name="attr_STR" value="10" /></span>
										<span class="sheet-table-cell sheet-right-border"><input type="checkbox" class="sheet-warn-show" name="attr_STR-modded" value="1"/><input class="sheet-calc sheet-highlight" readonly title="@{STR-mod}" type="number" name="attr_STR-mod" value="0" /></span>
										<span class="sheet-table-cell sheet-right-border sheet-emphasize-field"><input class="sheet-number" title="@{STR-base}" type="text" name="attr_STR-base" value="10"/></span>
										<span class="sheet-table-cell"><input title="@{STR-inherent}" type="number" name="attr_STR-inherent" value="0" /></span>
										<span class="sheet-table-cell"><input title="@{STR-enhance}" type="number" name="attr_STR-enhance" value="0" /></span>
										<span class="sheet-table-cell"><input title="@{STR-misc}" type="number" name="attr_STR-misc" value="0" /></span>
										<span class="sheet-table-cell sheet-right-border"><input title="@{buff_STR-total}" type="number" name="attr_buff_STR-total" value="0" class="sheet-calc" readonly /></span>
										<span class="sheet-table-cell"><input title="@{STR-damage}" type="number" name="attr_STR-damage" value="0" max="0" /></span>
										<span class="sheet-table-cell"><input title="@{STR-penalty}" type="number" name="attr_STR-penalty" value="0" max="0" /></span>
										<span class="sheet-table-cell"><input title="@{STR-drain}" type="number" name="attr_STR-drain" value="0" max="0" /></span>
										<span class="sheet-table-cell"><input title="@{buff_STR-total_penalty}" name="attr_buff_STR-total_penalty" type="number" value="0" class="sheet-calc" readonly /></span>
										<span class="sheet-table-cell"><input title="@{STR-cond}" type="number" name="attr_STR-cond" value="0" class="sheet-calc" readonly /></span>
									</div>
									<div class="sheet-table-row">
										<span class="sheet-table-cell"><button class="sheet-text-button" title="%{selected|DEX-Check}" type="roll" name="roll_DEX-Check" value="@{PC-whisper} &{template:pf_generic} @{toggle_accessible_flag} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_block-check}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle}} {{name=^{dexterity}}} {{check=[[ 1d20 + [[ @{DEX-mod} ]]  + [[ @{checks-cond} ]] ]]}}">&nbsp;<span style="vertical-align: middle;" data-i18n="dexterity-abbrv">DEX</span></button></span>
										<span class="sheet-table-cell sheet-number"><input class="sheet-calc sheet-number" readonly title="@{DEX}" type="text" name="attr_DEX" value="10" /></span>
										<span class="sheet-table-cell sheet-right-border"><input type="checkbox" class="sheet-warn-show" name="attr_DEX-modded" value="1"/><input class="sheet-calc sheet-highlight" readonly title="@{DEX-mod}" type="number" name="attr_DEX-mod" value="0" /></span>
										<span class="sheet-table-cell sheet-right-border sheet-emphasize-field"><input class="sheet-number" title="@{DEX-base}" type="text" name="attr_DEX-base" value="10"/></span>
										<span class="sheet-table-cell"><input title="@{DEX-inherent}" type="number" name="attr_DEX-inherent" value="0" /></span>
										<span class="sheet-table-cell"><input title="@{DEX-enhance}" type="number" name="attr_DEX-enhance" value="0" /></span>
										<span class="sheet-table-cell"><input title="@{DEX-misc}" type="number" name="attr_DEX-misc" value="0" min="0" /></span>
										<span class="sheet-table-cell sheet-right-border"><input class="sheet-calc" readonly title="@{buff_DEX-total}" type="number" name="attr_buff_DEX-total" value="0" /></span>
										<span class="sheet-table-cell"><input title="@{DEX-damage}" type="number" name="attr_DEX-damage" value="0" max="0" /></span>
										<span class="sheet-table-cell"><input title="@{DEX-penalty}" type="number" name="attr_DEX-penalty" value="0" max="0" /></span>
										<span class="sheet-table-cell"><input title="@{DEX-drain}" type="number" name="attr_DEX-drain" value="0" max="0" /></span>
										<span class="sheet-table-cell"><input title="@{buff_DEX-total_penalty}" name="attr_buff_DEX-total_penalty" type="number" value="0" class="sheet-calc" readonly /></span>
										<span class="sheet-table-cell"><input class="sheet-calc" readonly title="@{DEX-cond}" type="number" name="attr_DEX-cond" value="0" max="0" /></span>
									</div>
									<div class="sheet-table-row">
										<span class="sheet-table-cell"><button class="sheet-text-button" title="%{selected|CON-Check}" type="roll" name="roll_CON-Check" value="@{PC-whisper} &{template:pf_generic} @{toggle_accessible_flag} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_block-check}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle}} {{name=^{constitution}}} {{check=[[ 1d20 + [[ @{CON-mod} ]]  + [[ @{checks-cond} ]] ]]}}">&nbsp;<span style="vertical-align: middle;" data-i18n="constitution-abbrv">CON</span></button></span>
										<span class="sheet-table-cell sheet-number"><input class="sheet-calc sheet-number" readonly title="@{CON}" type="text" name="attr_CON" value="10" /></span>
										<span class="sheet-table-cell sheet-right-border"><input type="checkbox" class="sheet-warn-show" name="attr_CON-modded" value="1"/><input class="sheet-calc sheet-highlight" readonly title="@{CON-mod}" type="number" name="attr_CON-mod" value="0" /></span>
										<span class="sheet-table-cell sheet-right-border sheet-emphasize-field"><input class="sheet-number" title="@{CON-base}" type="text" name="attr_CON-base" value="10"/></span>
										<span class="sheet-table-cell"><input title="@{CON-inherent}" type="number" name="attr_CON-inherent" value="0" /></span>
										<span class="sheet-table-cell"><input title="@{CON-enhance}" type="number" name="attr_CON-enhance" value="0" /></span>
										<span class="sheet-table-cell"><input title="@{CON-misc}" type="number" name="attr_CON-misc" value="0" min="0" /></span>
										<span class="sheet-table-cell sheet-right-border"><input class="sheet-calc" readonly title="@{buff_CON-total}" type="number" name="attr_buff_CON-total" value="0" /></span>
										<span class="sheet-table-cell"><input title="@{CON-damage}" type="number" name="attr_CON-damage" value="0" max="0" /></span>
										<span class="sheet-table-cell"><input title="@{CON-penalty}" type="number" name="attr_CON-penalty" value="0" max="0" /></span>
										<span class="sheet-table-cell"><input title="@{CON-drain}" type="number" name="attr_CON-drain" value="0" max="0" /></span>
										<span class="sheet-table-cell"><input title="@{buff_CON-total_penalty}" name="attr_buff_CON-total_penalty" type="number" value="0" class="sheet-calc" readonly /></span>
										<span class="sheet-table-cell"><input class="sheet-calc" readonly title="@{CON-cond}" type="number" name="attr_CON-cond" value="0" max="0" /></span>
									</div>
									<div class="sheet-table-row">
										<span class="sheet-table-cell"><button class="sheet-text-button" title="%{selected|INT-Check}" type="roll" name="roll_INT-Check" value="@{PC-whisper} &{template:pf_generic} @{toggle_accessible_flag} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_block-check}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle}} {{name=^{intelligence}}} {{check=[[ 1d20 + [[ @{INT-mod} ]]  + [[ @{checks-cond}  ]] ]]}}">&nbsp;<span style="vertical-align: middle;" data-i18n="intelligence-abbrv">INT</span></button></span>
										<span class="sheet-table-cell sheet-number"><input class="sheet-calc sheet-number" readonly title="@{INT}" type="text" name="attr_INT" value="10" /></span>
										<span class="sheet-table-cell sheet-right-border"><input type="checkbox" class="sheet-warn-show" name="attr_INT-modded" value="1"/><input class="sheet-calc sheet-highlight" readonly title="@{INT-mod}" type="number" name="attr_INT-mod" value="0" /></span>
										<span class="sheet-table-cell sheet-right-border sheet-emphasize-field"><input class="sheet-number" title="@{INT-base}" type="text" name="attr_INT-base" value="10"/></span>
										<span class="sheet-table-cell"><input title="@{INT-inherent}" type="number" name="attr_INT-inherent" value="0" /></span>
										<span class="sheet-table-cell"><input title="@{INT-enhance}" type="number" name="attr_INT-enhance" value="0" /></span>
										<span class="sheet-table-cell"><input title="@{INT-misc}" type="number" name="attr_INT-misc" value="0" min="0" /></span>
										<span class="sheet-table-cell sheet-right-border"><input class="sheet-calc" readonly title="@{buff_INT-total}" type="number" name="attr_buff_INT-total" value="0" /></span>
										<span class="sheet-table-cell"><input title="@{INT-damage}" type="number" name="attr_INT-damage" value="0" max="0" /></span>
										<span class="sheet-table-cell"><input title="@{INT-penalty}" type="number" name="attr_INT-penalty" value="0" max="0" /></span>
										<span class="sheet-table-cell"><input title="@{INT-drain}" type="number" name="attr_INT-drain" value="0" max="0" /></span>
										<span class="sheet-table-cell"><input title="@{buff_INT-total_penalty}" name="attr_buff_INT-total_penalty" type="number" value="0" class="sheet-calc" readonly /></span>
										<span class="sheet-table-cell"><input class="sheet-calc" readonly title="@{INT-cond}" type="number" name="attr_INT-cond" value="0" max="0" /></span>
									</div>
									<div class="sheet-table-row">
										<span class="sheet-table-cell"><button class="sheet-text-button" title="%{selected|WIS-Check}" type="roll" name="roll_WIS-Check" value="@{PC-whisper} &{template:pf_generic} @{toggle_accessible_flag} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_block-check}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle}} {{name=^{wisdom}}} {{check=[[ 1d20 + [[ @{WIS-mod} ]]  + [[ @{checks-cond} ]] ]]}}">&nbsp;<span style="vertical-align: middle;" data-i18n="wisdom-abbrv">WIS</span></button></span>
										<span class="sheet-table-cell sheet-number"><input class="sheet-calc sheet-number" readonly title="@{WIS}" type="text" name="attr_WIS" value="10" /></span>
										<span class="sheet-table-cell sheet-right-border"><input type="checkbox" class="sheet-warn-show" name="attr_WIS-modded" value="1"/><input class="sheet-calc sheet-highlight" readonly title="@{WIS-mod}" type="number" name="attr_WIS-mod" value="0" /></span>
										<span class="sheet-table-cell sheet-right-border sheet-emphasize-field"><input class="sheet-number" title="@{WIS-base}" type="text" name="attr_WIS-base" value="10"/></span>
										<span class="sheet-table-cell"><input title="@{WIS-inherent}" type="number" name="attr_WIS-inherent" value="0" /></span>
										<span class="sheet-table-cell"><input title="@{WIS-enhance}" type="number" name="attr_WIS-enhance" value="0" /></span>
										<span class="sheet-table-cell"><input title="@{WIS-misc}" type="number" name="attr_WIS-misc" value="0" min="0" /></span>
										<span class="sheet-table-cell sheet-right-border"><input class="sheet-calc" readonly title="@{buff_WIS-total}" type="number" name="attr_buff_WIS-total" value="0" /></span>
										<span class="sheet-table-cell"><input title="@{WIS-damage}" type="number" name="attr_WIS-damage" value="0" max="0" /></span>
										<span class="sheet-table-cell"><input title="@{WIS-penalty}" type="number" name="attr_WIS-penalty" value="0" max="0" /></span>
										<span class="sheet-table-cell"><input title="@{WIS-drain}" type="number" name="attr_WIS-drain" value="0" max="0" /></span>
										<span class="sheet-table-cell"><input title="@{buff_WIS-total_penalty}" name="attr_buff_WIS-total_penalty" type="number" value="0" class="sheet-calc" readonly /></span>
										<span class="sheet-table-cell"><input class="sheet-calc" readonly title="@{WIS-cond}" type="number" name="attr_WIS-cond" value="0" max="0" /></span>
									</div>
									<div class="sheet-table-row">
										<span class="sheet-table-cell"><button class="sheet-text-button" title="%{selected|CHA-Check}" type="roll" name="roll_CHA-Check" value="@{PC-whisper} &{template:pf_generic} @{toggle_accessible_flag} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_block-check}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle}} {{name=^{charisma}}} {{check=[[ 1d20 + [[ @{CHA-mod} ]]  + [[ @{checks-cond} ]] ]]}}">&nbsp;<span style="vertical-align: middle;" data-i18n="charisma-abbrv">CHA</span></button></span>
										<span class="sheet-table-cell sheet-number"><input class="sheet-calc sheet-number" readonly title="@{CHA}" type="text" name="attr_CHA" value="10" /></span>
										<span class="sheet-table-cell sheet-right-border"><input type="checkbox" class="sheet-warn-show" name="attr_CHA-modded" value="1"/><input class="sheet-calc sheet-highlight" readonly title="@{CHA-mod}" type="number" name="attr_CHA-mod" value="0" /></span>
										<span class="sheet-table-cell sheet-right-border sheet-emphasize-field"><input class="sheet-number" title="@{CHA-base}" type="text" name="attr_CHA-base" value="10"/></span>
										<span class="sheet-table-cell"><input title="@{CHA-inherent}" type="number" name="attr_CHA-inherent" value="0" /></span>
										<span class="sheet-table-cell"><input title="@{CHA-enhance}" type="number" name="attr_CHA-enhance" value="0" /></span>
										<span class="sheet-table-cell"><input title="@{CHA-misc}" type="number" name="attr_CHA-misc" value="0" min="0" /></span>
										<span class="sheet-table-cell sheet-right-border"><input class="sheet-calc" readonly title="@{buff_CHA-total}" type="number" name="attr_buff_CHA-total" value="0" /></span>
										<span class="sheet-table-cell"><input title="@{CHA-damage}" type="number" name="attr_CHA-damage" value="0" max="0" /></span>
										<span class="sheet-table-cell"><input title="@{CHA-penalty}" type="number" name="attr_CHA-penalty" value="0" max="0" /></span>
										<span class="sheet-table-cell"><input title="@{CHA-drain}" type="number" name="attr_CHA-drain" value="0" max="0" /></span>
										<span class="sheet-table-cell"><input title="@{buff_CHA-total_penalty}" name="attr_buff_CHA-total_penalty" type="number" value="0" class="sheet-calc" readonly /></span>
										<span class="sheet-table-cell"><input class="sheet-calc" readonly title="@{CHA-cond}" type="number" name="attr_CHA-cond" value="0" max="0" /></span>
									</div>
								</div>
							</div>
						</div>
						<div class="sheet-cheat"></div>
						<input class="sheet-sect-show-inverse sheet-noshow" type="checkbox" name="attr_is_npc" value="1" role="presentation" />
						<input type="checkbox" name="attr_multiclassed" value="1" class="sheet-multiclassed-show sheet-noshow" />
						<input class="sheet-showarrow sheet-h2arrow" type="checkbox" name="attr_class-info-show" data-i18n-aria-label="class-information" title="Click to expand" data-i18n-title="showsect-cmd" value="1" checked />
						<h2 class="sheet-clickheader sheet-showsect"><label title="Click to expand" data-i18n-title="showsect-cmd" data-i18n-aria-label="showsect-cmd" data-i18n="class-race-xp">Class, Race, Experience</label></h2>						
							<div class="sheet-h2-section sheet-class-grid">
								<span class="sheet-nontable-name" data-i18n="class-race-information-abbrv">Class and Race Info</span>
								<input class="sheet-sect-show sheet-sect-show-inverse sheet-not-C-show sheet-or-A-show" type="checkbox" name="attr_is_npc" value="1" role="presentation" />
								<label class="sheet-sect sheet-hide-readonly">
									<input class="sheet-sect sheet-or-D-show sheet-hide-readonly sheet-selectedlabel-check" name="attr_add_class" value="1" type="checkbox" />
									<b class="sheet-sect sheet-hide-readonly" data-i18n="add-class-levels">Add Class Levels</b>
								</label>
								<label class="sheet-sect-inverse sheet-hide-readonly">
									<input class="sheet-sect-inverse sheet-or-B-show sheet-hide-readonly sheet-selectedlabel-check" name="attr_add_race" value="1" type="checkbox"/>
									<b class="sheet-sect-inverse sheet-hide-readonly" data-i18n="add-hit-dice">Add Race/Monster HD</b>
								</label>
								<input class="sheet-or-D-show sheet-noshow" name="attr_add_class" value="1" type="checkbox" />
								<input class="sheet-or-B-show sheet-noshow" name="attr_add_race" value="1" type="checkbox"/>
								<div class="sheet-cheat"></div>
								<div class="sheet-table sheet-class-table sheet-wide-numbers sheet-hasexpandrows sheet-narrow-numbers-readonly" role="region" aria-label="Class Information" data-i18n-aria-label="class-information">
									<span class="sheet-table-name sheet-secondary-table-name sheet-not-C-or-D-sect sheet-show-readonly" aria-label="Base Class Levels and Monster HD BAB, hp, skills, and saves" data-i18n="class-and-level">Class(es) and levels</span>
									<div class="sheet-table-group-head sheet-not-C-or-D-sect">
										<div class="sheet-table-row">
											<span class="sheet-table-header sheet-nowrap sheet-left" title="Class number, this number used in dropdowns when selecting class (cannot create select by name)" data-i18n-title="class-number-explanation" data-i18n-aria-label="class-number-explanation" data-i18n="class-number">Class #</span>
											<span class="sheet-table-header sheet-entry-vlong" title="Class Name" data-i18n-title="class-name" data-i18n-aria-label="class-name" data-i18n="class-name">Class Name</span>
											<span class="sheet-table-header" title="Current Class Level" data-i18n-title="level-current" data-i18n-aria-label="level-current" data-i18n="level">Level</span>
											<span class="sheet-table-header" title="Number of Sides of Hit Die" data-i18n-title="hit-die-desc" data-i18n-aria-label="hit-die-desc" data-i18n="d-hit-die">d(hitdie)</span>
											<span class="sheet-table-header" title="Hit Points due to Class Only" data-i18n-title="hit-points-class-title" data-i18n-aria-label="hit-points-class-title" data-i18n="class-hit-points-abbrv">Class hp</span>
											<span class="sheet-table-header" title="Favored Class HP" data-i18n-title="favored-class-hit-points-title" data-i18n-aria-label="favored-class-hit-points-title" data-i18n="favored-class-hit-points-abbrv">FC hp</span>
											<span class="sheet-table-header" title="Base Attack Bonus" data-i18n-title="base-attack-bonus" data-i18n-aria-label="base-attack-bonus" data-i18n="base-attack-bonus-abbrv">BAB</span>
											<span class="sheet-table-header" title="Skill Ranks per level due to Class only" data-i18n-title="skills-per-level" data-i18n-aria-label="skills-per-level" data-i18n="skills-per-level-abbrv">Skills /lvl</span>
											<span class="sheet-table-header" title="Favored Class Skill Ranks." data-i18n-title="favored-class-skill" data-i18n-aria-label="favored-class-skill" data-i18n="favored-class-skill-abbrv">FC Skill</span>
											<span class="sheet-table-header" title="Alternate Favored Class point counter" data-i18n-title="alternate-favored-class" data-i18n-aria-label="alternate-favored-class" data-i18n="alternate-favored-class-abbrv">FC Alt</span>
											<span class="sheet-table-header" title="Fortitude Save" data-i18n-title="fortitude-save" data-i18n-aria-label="fortitude-save" data-i18n="fortitude-abbrv" aria-label="Fortitude Save">Fort</span>
											<span class="sheet-table-header" title="Reflex Save" data-i18n-title="reflex-save" data-i18n-aria-label="reflex-save" data-i18n="reflex-abbrv">Ref</span>
											<span class="sheet-table-header" title="Willpower Save" data-i18n-title="willpower-save" data-i18n-aria-label="willpower-save" data-i18n="willpower-abbrv">Will</span>
										</div>
									</div>
									<div class="sheet-table-group sheet-not-C-or-D-sect">
										<div class="sheet-table-row">
											<span class="sheet-table-cell"><b data-i18n-title="class-0-title" data-i18n="1-ordinal">1st</b></span>
											<span class="sheet-table-cell"><input title="@{class-0-name}" type="text" name="attr_class-0-name" placeholder="Class Name" data-i18n-placeholder="class-name"></span>
											<span class="sheet-table-cell"><input title="@{class-0-level}" type="number" name="attr_class-0-level" value="0" /></span>
											<span class="sheet-table-cell"><input title="@{class-0-hd}" type="text" name="attr_class-0-hd" value="" class="sheet-number" /></span>
											<span class="sheet-table-cell"><input title="@{class-0-hp}" type="number" name="attr_class-0-hp" value="0" /></span>
											<span class="sheet-table-cell"><input title="@{class-0-fchp}" type="number" name="attr_class-0-fchp" value="0" /></span>
											<span class="sheet-table-cell"><input title="@{class-0-bab}" type="number" name="attr_class-0-bab" value="0" /></span>
											<span class="sheet-table-cell"><input title="@{class-0-skill}" type="number" name="attr_class-0-skill" value="0" /></span>
											<span class="sheet-table-cell"><input title="@{class-0-fcskill}" type="number" name="attr_class-0-fcskill" value="0" /></span>
											<span class="sheet-table-cell"><input title="@{class-0-fcalt}" type="number" name="attr_class-0-fcalt" value="0" /></span>
											<span class="sheet-table-cell"><input title="@{class-0-Fort}" type="number" name="attr_class-0-Fort" value="0" /></span>
											<span class="sheet-table-cell"><input title="@{class-0-Ref}" type="number" name="attr_class-0-Ref" value="0" /></span>
											<span class="sheet-table-cell"><input title="@{class-0-Will}" type="number" name="attr_class-0-Will" value="0" /></span>
										</div>
										<input type="checkbox" class="sheet-showarrow sheet-sect-show sheet-expand-arrow sheet-expand1" name="attr_class1_show" value="1" title="Expand to Multiclass" data-i18n-title="expand-multiclass" data-i18n-aria-label="Expand-multiclass"  /><span class="sheet-showsect" data-i18n-title="expand-multiclass" data-i18n-aria-label="Expand-multiclass"></span>
										<div class="sheet-table-row sheet-sect">
											<span class="sheet-table-cell"><b data-i18n-title="class-1-title" data-i18n="2-ordinal">2nd</b></span>
											<span class="sheet-table-cell"><input title="@{class-1-name}" type="text" name="attr_class-1-name" placeholder="Class Name" data-i18n-placeholder="class-name"></span>
											<span class="sheet-table-cell"><input title="@{class-1-level}" type="number" name="attr_class-1-level" value="0" /></span>
											<span class="sheet-table-cell"><input title="@{class-1-hd}" type="text" name="attr_class-1-hd" value="" class="sheet-number" /></span>
											<span class="sheet-table-cell"><input title="@{class-1-hp}" type="number" name="attr_class-1-hp" value="0" /></span>
											<span class="sheet-table-cell"><input title="@{class-1-fchp}" type="number" name="attr_class-1-fchp" value="0" /></span>
											<span class="sheet-table-cell"><input title="@{class-1-bab}" type="number" name="attr_class-1-bab" value="0" /></span>
											<span class="sheet-table-cell"><input title="@{class-1-skill}" type="number" name="attr_class-1-skill" value="0" /></span>
											<span class="sheet-table-cell"><input title="@{class-1-fcskill}" type="number" name="attr_class-1-fcskill" value="0" /></span>
											<span class="sheet-table-cell"><input title="@{class-1-fcalt}" type="number" name="attr_class-1-fcalt" value="0" /></span>
											<span class="sheet-table-cell"><input title="@{class-1-Fort}" type="number" name="attr_class-1-Fort" value="0" /></span>
											<span class="sheet-table-cell"><input title="@{class-1-Ref}" type="number" name="attr_class-1-Ref" value="0" /></span>
											<span class="sheet-table-cell"><input title="@{class-1-Will}" type="number" name="attr_class-1-Will" value="0" /></span>
										</div>
										<input type="checkbox" class="sheet-showarrow sheet-sect2-show sheet-sect sheet-expand-arrow sheet-expand2" name="attr_class2_show" value="1"  data-i18n-title="expand-multiclass" data-i18n-aria-label="Expand-multiclass" /><span class="sheet-showsect sheet-sect" data-i18n-title="expand-multiclass" data-i18n-aria-label="Expand-multiclass"></span>
										<div class="sheet-table-row sheet-sect sheet-sect2">
											<span class="sheet-table-cell"><b data-i18n-title="class-2-title" data-i18n="3-ordinal">3rd</b></span>
											<span class="sheet-table-cell"><input title="@{class-2-name}" type="text" name="attr_class-2-name" placeholder="Class Name" data-i18n-placeholder="class-name"></span>
											<span class="sheet-table-cell"><input title="@{class-2-level}" type="number" name="attr_class-2-level" value="0" /></span>
											<span class="sheet-table-cell"><input title="@{class-2-hd}" type="text" name="attr_class-2-hd" value="" class="sheet-number" /></span>
											<span class="sheet-table-cell"><input title="@{class-2-hp}" type="number" name="attr_class-2-hp" value="0" /></span>
											<span class="sheet-table-cell"><input title="@{class-2-fchp}" type="number" name="attr_class-2-fchp" value="0" /></span>
											<span class="sheet-table-cell"><input title="@{class-2-bab}" type="number" name="attr_class-2-bab" value="0" /></span>
											<span class="sheet-table-cell"><input title="@{class-2-skill}" type="number" name="attr_class-2-skill" value="0" /></span>
											<span class="sheet-table-cell"><input title="@{class-2-fcskill}" type="number" name="attr_class-2-fcskill" value="0" /></span>
											<span class="sheet-table-cell"><input title="@{class-2-fcalt}" type="number" name="attr_class-2-fcalt" value="0" /></span>
											<span class="sheet-table-cell"><input title="@{class-2-Fort}" type="number" name="attr_class-2-Fort" value="0" /></span>
											<span class="sheet-table-cell"><input title="@{class-2-Ref}" type="number" name="attr_class-2-Ref" value="0" /></span>
											<span class="sheet-table-cell"><input title="@{class-2-Will}" type="number" name="attr_class-2-Will" value="0" /></span>
										</div>
										<input type="checkbox" class="sheet-showarrow sheet-sect3-show sheet-sect sheet-sect2 sheet-expand-arrow sheet-expand3" name="attr_class3_show" value="1" data-i18n-title="expand-multiclass" data-i18n-aria-label="Expand-multiclass" /><span class="sheet-showsect sheet-sect sheet-sect2" data-i18n-title="expand-multiclass" data-i18n-aria-label="Expand-multiclass"></span>
										<div class="sheet-table-row sheet-sect sheet-sect2 sheet-sect3">
											<span class="sheet-table-cell"><b data-i18n-title="class-3-title" data-i18n="4-ordinal">4th</b></span>
											<span class="sheet-table-cell"><input title="@{class-3-name}" type="text" name="attr_class-3-name" placeholder="Class Name" data-i18n-placeholder="class-name"></span>
											<span class="sheet-table-cell"><input title="@{class-3-level}" type="number" name="attr_class-3-level" value="0" /></span>
											<span class="sheet-table-cell"><input title="@{class-3-hd}" type="text" name="attr_class-3-hd" value="" class="sheet-number" /></span>
											<span class="sheet-table-cell"><input title="@{class-3-hp}" type="number" name="attr_class-3-hp" value="0" /></span>
											<span class="sheet-table-cell"><input title="@{class-3-fchp}" type="number" name="attr_class-3-fchp" value="0" /></span>
											<span class="sheet-table-cell"><input title="@{class-3-bab}" type="number" name="attr_class-3-bab" value="0" /></span>
											<span class="sheet-table-cell"><input title="@{class-3-skill}" type="number" name="attr_class-3-skill" value="0" /></span>
											<span class="sheet-table-cell"><input title="@{class-3-fcskill}" type="number" name="attr_class-3-fcskill" value="0" /></span>
											<span class="sheet-table-cell"><input title="@{class-3-fcalt}" type="number" name="attr_class-3-fcalt" value="0" /></span>
											<span class="sheet-table-cell"><input title="@{class-3-Fort}" type="number" name="attr_class-3-Fort" value="0" /></span>
											<span class="sheet-table-cell"><input title="@{class-3-Ref}" type="number" name="attr_class-3-Ref" value="0" /></span>
											<span class="sheet-table-cell"><input title="@{class-3-Will}" type="number" name="attr_class-3-Will" value="0" /></span>
										</div>
										<div class="sheet-table-row sheet-sect sheet-sect2 sheet-sect3">
											<span class="sheet-table-cell"><b data-i18n-title="class-4-title" data-i18n="5-ordinal">5th</b></span>
											<span class="sheet-table-cell"><input title="@{class-4-name}" type="text" name="attr_class-4-name" placeholder="Class Name" data-i18n-placeholder="class-name"></span>
											<span class="sheet-table-cell"><input title="@{class-4-level}" type="number" name="attr_class-4-level" value="0" /></span>
											<span class="sheet-table-cell"><input title="@{class-4-hd}" type="text" name="attr_class-4-hd" value="" class="sheet-number" /></span>
											<span class="sheet-table-cell"><input title="@{class-4-hp}" type="number" name="attr_class-4-hp" value="0" /></span>
											<span class="sheet-table-cell"><input title="@{class-4-fchp}" type="number" name="attr_class-4-fchp" value="0" /></span>
											<span class="sheet-table-cell"><input title="@{class-4-bab}" type="number" name="attr_class-4-bab" value="0" /></span>
											<span class="sheet-table-cell"><input title="@{class-4-skill}" type="number" name="attr_class-4-skill" value="0" /></span>
											<span class="sheet-table-cell"><input title="@{class-4-fcskill}" type="number" name="attr_class-4-fcskill" value="0" /></span>
											<span class="sheet-table-cell"><input title="@{class-4-fcalt}" type="number" name="attr_class-4-fcalt" value="0" /></span>
											<span class="sheet-table-cell"><input title="@{class-4-Fort}" type="number" name="attr_class-4-Fort" value="0" /></span>
											<span class="sheet-table-cell"><input title="@{class-4-Ref}" type="number" name="attr_class-4-Ref" value="0" /></span>
											<span class="sheet-table-cell"><input title="@{class-4-Will}" type="number" name="attr_class-4-Will" value="0" /></span>
										</div>
										<div class="sheet-table-row sheet-sect sheet-sect2 sheet-sect3">
											<span class="sheet-table-cell"><b data-i18n-title="class-5-title" data-i18n="6-ordinal">6th</b></span>
											<span class="sheet-table-cell"><input title="@{class-5-name}" type="text" name="attr_class-5-name" placeholder="Class Name" data-i18n-placeholder="class-name"></span>
											<span class="sheet-table-cell"><input title="@{class-5-level}" type="number" name="attr_class-5-level" value="0" /></span>
											<span class="sheet-table-cell"><input title="@{class-5-hd}" type="text" name="attr_class-5-hd" value="" class="sheet-number" /></span>
											<span class="sheet-table-cell"><input title="@{class-5-hp}" type="number" name="attr_class-5-hp" value="0" /></span>
											<span class="sheet-table-cell"><input title="@{class-5-fchp}" type="number" name="attr_class-5-fchp" value="0" /></span>
											<span class="sheet-table-cell"><input title="@{class-5-bab}" type="number" name="attr_class-5-bab" value="0" /></span>
											<span class="sheet-table-cell"><input title="@{class-5-skill}" type="number" name="attr_class-5-skill" value="0" /></span>
											<span class="sheet-table-cell"><input title="@{class-5-fcskill}" type="number" name="attr_class-5-fcskill" value="0" /></span>
											<span class="sheet-table-cell"><input title="@{class-5-fcalt}" type="number" name="attr_class-5-fcalt" value="0" /></span>
											<span class="sheet-table-cell"><input title="@{class-5-Fort}" type="number" name="attr_class-5-Fort" value="0" /></span>
											<span class="sheet-table-cell"><input title="@{class-5-Ref}" type="number" name="attr_class-5-Ref" value="0" /></span>
											<span class="sheet-table-cell"><input title="@{class-5-Will}" type="number" name="attr_class-5-Will" value="0" /></span>
										</div>
									</div>
									<span class="sheet-nontable-name sheet-secondary-table-name sheet-either-or-sect sheet-show-readonly" style="position: absolute;" data-i18n="monster-racial-hit-dice-abbrv">Monster Racial HD</span>
									<div class="sheet-table-group sheet-either-or-sect" style="margin-top:1em";>
										<div class="sheet-table-row sheet-creature-race-header">
											<span class="sheet-table-header sheet-right sheet-nowrap" data-i18n="race">Race</span>
											<span class="sheet-table-header sheet-entry-vlong"  data-i18n="type-or-sub-type">Type (Sub type)</span>
											<span class="sheet-table-header" data-i18n-title="hit-dice-desc" data-i18n="number-hit-dice-abbrv"># HD</span>
											<span class="sheet-table-header" data-i18n-title="hit-die-desc" data-i18n="d-hit-die">d(hitdie)</span>
											<span class="sheet-table-header" data-i18n="hit-points-abbrv">hp</span>
											<span class="sheet-table-header sheet-not-C-or-D-sect"></span>
											<span class="sheet-table-header" title="Base Attack Bonus" data-i18n-title="base-attack-bonus" data-i18n-aria-label="base-attack-bonus" data-i18n="base-attack-bonus-abbrv">BAB</span>
											<span class="sheet-table-header" title="Skill Ranks per hit die due to race" data-i18n-title="skills-per-hit-die" data-i18n-aria-label="skills-per-hit-die" data-i18n="skills-per-hit-die-abbrv">Skills /HD</span>
											<span class="sheet-table-header sheet-not-C-or-D-sect"></span>
											<span class="sheet-table-header sheet-not-C-or-D-sect"></span>
											<span class="sheet-table-header" title="Fortitude Save" data-i18n-title="fortitude-save" data-i18n-aria-label="fortitude-save" data-i18n="fortitude-abbrv">Fort</span>
											<span class="sheet-table-header" title="Reflex Save" data-i18n-title="reflex-save" data-i18n-aria-label="reflex-save" data-i18n="reflex-abbrv">Ref</span>
											<span class="sheet-table-header" title="Willpower Save" data-i18n-title="willpower-save" data-i18n-aria-label="willpower-save" data-i18n="willpower-abbrv">Will</span>
										</div>
										<div class="sheet-table-row">
											<span class="sheet-table-cell" data-i18n-title="type-or-sub-type" title="Type (sub-type)" style="padding-left:.5em;"><b><span data-i18n="type">Type</span></b></span>
											<span class="sheet-table-cell sheet-left" style="padding-left:.5em;"><span title="@{npc-type}" type="text" name="attr_npc-type" placeholder="Type (sub-type)" data-i18n-placeholder="type-or-sub-type" class="sheet-left"></span></span>
											<span class="sheet-table-cell"><input title="@{npc-hd-num}" type="number" name="attr_npc-hd-num" value="0" /></span>
											<span class="sheet-table-cell"><input title="@{npc-hd}" type="text" name="attr_npc-hd" value="" class="sheet-number" /></span>
											<span class="sheet-table-cell"><input title="@{NPC-HP}" type="number" name="attr_NPC-HP" value="0" /></span>
											<span class="sheet-table-cell sheet-not-C-or-D-sect"><input style="display:none;" title="@{npc-fchp}" type="number" name="attr_npc-fchp" value="0" /></span>
											<span class="sheet-table-cell"><input title="@{npc-bab}" type="number" name="attr_npc-bab" value="0" /></span>
											<span class="sheet-table-cell"><input title="@{npc-skill}" type="number" name="attr_npc-skill" value="0" /></span>
											<span class="sheet-table-cell sheet-not-C-or-D-sect"><input style="display:none;" title="@{npc-fcskill}" type="number" name="attr_npc-fcskill" value="0" /></span>
											<span class="sheet-table-cell sheet-not-C-or-D-sect"><input style="display:none;" title="@{npc-fcalt}" type="number" name="attr_npc-fcalt" value="0" /></span>
											<span class="sheet-table-cell"><input title="@{npc-Fort}" type="number" name="attr_npc-Fort" value="0" /></span>
											<span class="sheet-table-cell"><input title="@{npc-Ref}" type="number" name="attr_npc-Ref" value="0" /></span>
											<span class="sheet-table-cell"><input title="@{npc-Will}" type="number" name="attr_npc-Will" value="0" /></span>
										</div>
									</div>
									<div class="sheet-total-row">
										<span class="sheet-table-cell"><b><span data-i18n="total">Total</span></b></span>
										<span class="sheet-table-cell"><input class="sheet-not-C-or-D-sect" title="@{class-favored}" type="text" name="attr_class-favored" placeholder="Favored Class(es)" data-i18n-placeholder="favored-class"/></span>
										<span class="sheet-table-cell"><input title="@{level}" type="number" name="attr_level" value="0" class="sheet-calc" readonly /></span>
										<span class="sheet-table-cell"></span>
										<span class="sheet-table-cell"><input title="@{total-hp}" type="number" name="attr_total-hp" value="0" class="sheet-calc" readonly /></span>
										<span class="sheet-table-cell sheet-label sheet-not-C-or-D-sect" >&nbsp;</span>
										<span class="sheet-table-cell"><input title="@{bab}" type="number" name="attr_bab" value="0" class="sheet-calc" readonly /></span>
										<span class="sheet-table-cell"><input title="@{total-skill}" type="number" name="attr_total-skill" value="0" class="sheet-calc" readonly /></span>
										<span class="sheet-table-cell sheet-not-C-or-D-sect"><input title="@{total-fcskill}" type="number" name="attr_total-fcskill" value="0" class="sheet-calc" readonly /></span>
										<span class="sheet-table-cell sheet-not-C-or-D-sect"><input title="@{total-fcalt}" type="number" name="attr_total-fcalt" value="0" class="sheet-calc" readonly /></span>
										<span class="sheet-table-cell"><input title="@{total-Fort}" type="number" name="attr_total-Fort" value="0" class="sheet-calc" readonly /></span>
										<span class="sheet-table-cell"><input title="@{total-Ref}" type="number" name="attr_total-Ref" value="0" class="sheet-calc" readonly /></span>
										<span class="sheet-table-cell"><input title="@{total-Will}" type="number" name="attr_total-Will" value="0" class="sheet-calc" readonly /></span>
									</div>
								</div>
							</div>
							<div class="sheet-h2-section sheet-experience sheet-sect-inverse">
								<input class="sheet-wider-readonly sheet-noshow" type="checkbox" name="attr_use_prestige_fame" value="1" />
								<input class="sheet-wider-readonly sheet-noshow" type="checkbox" name="attr_use_hero_points" value="1" />
								<div class="sheet-table sheet-sect">
									<span class="sheet-table-name sheet-secondary-table-name" data-i18n="experience-points-abbrv">XP</span>
									<div class="sheet-table-group-head">
										<input class="sheet-sect-show sheet-noshow" type="checkbox" name="attr_use_prestige_fame" value="1" />
										<input class="sheet-sect2-show sheet-noshow" type="checkbox" name="attr_use_hero_points" value="1" />
										<span class="sheet-table-header" data-i18n="current-experience" >Current Experience</span>
										<span class="sheet-table-header sheet-divider-lg">&nbsp;</span>
										<span class="sheet-table-header" data-i18n="next-level">Next Level</span>
										<span class="sheet-table-header sheet-sect sheet-left-border" data-i18n="prestige-points">Prestige Points</span>
										<span class="sheet-table-header sheet-sect sheet-divider-lg">&nbsp;</span>
										<span class="sheet-table-header sheet-sect" data-i18n="fame">Fame</span>
										<span class="sheet-table-header sheet-sect2 sheet-left-border" data-i18n="hero-points">Hero Points</span>
									</div>
									<div class="sheet-table-row">
										<input class="sheet-sect-show sheet-noshow" type="checkbox" name="attr_use_prestige_fame" value="1" />
										<input class="sheet-sect2-show sheet-noshow" type="checkbox" name="attr_use_hero_points" value="1" />
										<span class="sheet-table-cell"><input class="sheet-entry-wide" title="@{experience}" type="number" name="attr_experience" placeholder="Current Experience" data-i18n-placeholder="experience-current-place" /></span>
										<span class="sheet-divider-lg">/</span>
										<span class="sheet-table-cell"><input class="sheet-entry-wide" title="@{experience|max}" type="number" name="attr_experience_max" placeholder="Next Level" data-i18n-placeholder="experience-next" /></span>
										<span class="sheet-table-cell sheet-sect"><input class="sheet-entry-wide" title="@{prestige}" type="number" name="attr_prestige" placeholder="Prestige Points" data-i18n-placeholder="prestige-points" /></span>
										<span class="sheet-divider-lg sheet-sect">/</span>
										<span class="sheet-table-cell sheet-sect"><input class="sheet-entry-wide" title="@{fame}" type="number" name="attr_fame" placeholder="Fame" data-i18n-placeholder="fame" /></span>
										<span class="sheet-table-cell sheet-sect2"><input class="sheet-entry-wide" title="@{hero-points}" type="number" name="attr_hero-points" placeholder="Hero Points" data-i18n-placeholder="hero-points" /></span>
									</div>
								</div>
								<input class="sheet-nextitem-show" type="checkbox" name="attr_use_prestige_fame" value="1" />
								<div class="sheet-faction-notes sheet-nextitem" style="width:99%;margin-top:.5em;">
									<label class="sheet-left sheet-small-label" style="display: block;" data-i18n="faction-notes">Faction Notes</label>
									<textarea class="sheet-inline-textarea" title="@{faction_notes}" name="attr_faction_notes" Placeholder="Fame, Prestige, and Faction Notes" data-i18n-placeholder="faction-notes-place"></textarea>
								</div>
							</div>
					</div>
				</div>
				<div class="sheet-cheat"></div>
				<div class="sheet-row sheet-row2 sheet-flex-col">
					<div class="sheet-flex-row">
						<input type="checkbox" class="sheet-wounds-show" title="Click to expand" data-i18n-title="showsect-cmd" data-i18n-aria-label="showsect-cmd" name="attr_wound_threshold-show" value="1">				
						<input class="sheet-showarrow sheet-h2arrow" type="checkbox" name="attr_health-and-wounds-show" data-i18n-aria-label="health-and-wounds" value="1" checked />
						<h2 class="sheet-clickheader sheet-showsect"><label title="Click to expand" data-i18n-title="showsect-cmd" data-i18n-aria-label="showsect-cmd" data-i18n="health-and-wounds">Health and Wounds</label></h2>
						<div class="sheet-cheat"></div>
						<div class="sheet-h2-section sheet-hit-points">
							<div class="sheet-wide-numbers">
								<div class="sheet-table">
									<span class="sheet-table-name" data-i18n="hit-points">Hit Points</span>
									<div class="sheet-table-group-head">
										<span class="sheet-table-header"></span>
										<span class="sheet-table-header" title="Player adjustable hit tracking of current hit points remaining." data-i18n-title="current-hp-title" data-i18n-aria-label="current-hp-title" data-i18n="current-hit-points-abbrv">Curr HP</span>
										<span class="sheet-table-header">/</span>
										<span class="sheet-table-header" title="Automatically calculated using Class hit points, Favored Class hit points (see Classes tab), Ability bonus/penalty &amp; Level, HP Adj1, Mod2, Drained condition and Mythic Adventures hit points (if enabled)." data-i18n-title="max-hp-title" data-i18n-aria-label="max-hp-title" data-i18n="maximum-abbrv">Max</span>
									</div>
									<div class="sheet-table-row">
										<span class="sheet-icon sheet-pictos">k</span>
										<span class="sheet-table-cell"><input type="number" title="@{HP}" name="attr_HP" value="0"></span>
										<span class="sheet-divider">/</span>
										<span class="sheet-table-cell"><input class="sheet-calc" readonly type="number" title="@{HP|max}" name="attr_HP_max" value="0"></span>
									</div>
								</div>
								<div class="sheet-table" style="margin-top:2px;">
									<div class="sheet-table-group-head">
										<span class="sheet-table-header" style="width:4em;" title="Recalculate HP and Temp HP and set current HP to max." data-i18n-title="recalculate-hit-points-title" data-i18n-aria-label="recalculate-hit-points-title" data-i18n="reset">Reset</span>
										<span class="sheet-table-header" title="Current Temporary hit points." data-i18n-title="temporary-hit-points-title" data-i18n-aria-label="temporary-hit-points-title" data-i18n="temporary-hit-points-abbrv">Temp HP</span>
										<span class="sheet-table-header">&nbsp;</span>
										<span class="sheet-table-header" style="width:4em;" title="Temporary hit points max if using as secondary pool." data-i18n-title="temporary-hit-points-maximum-title" data-i18n-aria-label="temporary-hit-points-maximum-title" data-i18n="maximum-abbrv">Max</span>
										<span class="sheet-table-header" title="Player adjustable tracking of non-lethal damage. Character is staggered if nonlethal damage >= current hp, field will outline in yellow." data-i18n-title="nonlethal-damage-title" data-i18n-aria-label="nonlethal-damage-title" data-i18n="nonlethal-damage">Nonlethal Damage</span>
									</div>
									<div class="sheet-table-row">
										<span class="sheet-table-cell sheet-small-label" style="width:4em;">
											<input type="checkbox" name="attr_HP_reset" value="1" class="sheet-cssbutton sheet-maxhealbutton" title="Recalculate HP and reset to max." data-i18n-title="recalculate-hit-points" data-i18n-aria-label="recalculate-hit-points"><span></span>
											<br/>
											<span data-i18n-title="recalculate-hit-points" data-i18n-aria-label="recalculate-hit-points" data-i18n="maximum-abbrv">Max</span>
										</span>
										<span class="sheet-table-cell"><input type="number" title="@{HP-temp}" name="attr_HP-temp" value="0"></span>
										<span class="sheet-divider">/</span>
										<span class="sheet-table-cell" style="width:4em;"><input class="sheet-calc" readonly type="number" title="@{HP-temp|max}" name="attr_HP-temp_max" value="0"></span>
										<input type="checkbox" class="sheet-warn-show sheet-noshow" name="attr_condition-Staggered" value="1" style="display:none">
										<span class="sheet-table-cell sheet-highlight"><input type="number" title="@{non-lethal-damage}" name="attr_non-lethal-damage" value="0" min="0"></span>
									</div>
								</div>
								<div class="sheet-table">
									<div class="sheet-table-row">
										<span class="sheet-table-cell sheet-small-label" style="padding-left:3px;">
											<input type="text" title="@{npc-heal-conditions}" name="attr_npc-heal-conditions" value="" placeholder="Heal conditions" data-i18n-placeholder="heal-conditions" />
										</span>
									</div>
								</div>
							</div>
						</div>
						<div class="sheet-h2-section sheet-wound-threshold">
							<div class="sheet-table">
								<span class="sheet-table-name sheet-show-readonly" data-i18n="wound-threshold">Wound Threshold</span>
								<div class="sheet-table-row" ><span class="sheet-table-cell sheet-left"><label><input type="radio" title="@{condition-Wounds}" name="attr_condition-Wounds" value="0" checked="checked"><b class="sheet-offCase" style="vertical-align: middle;" data-i18n="healthy">Healthy </b></label></span></div>
								<div class="sheet-table-row" ><span class="sheet-table-cell sheet-left"><label><input type="radio" title="@{condition-Wounds}" class="sheet-boldlabel-check" name="attr_condition-Wounds" value="1"><b title="-1 penalty on all attack rolls, saving throws, skill checks, and ability checks, as well as to AC and caster level" data-i18n-title="grazed-title" data-i18n-aria-label="grazed-title" data-i18n="grazed">Grazed </b></label><input title="@{HP_grazed} 75% or less of max HP" type="number" name="attr_HP_grazed" value="0" class="sheet-calc" readonly/></span></div>
								<div class="sheet-table-row" ><span class="sheet-table-cell sheet-left"><label><input type="radio" title="@{condition-Wounds}" class="sheet-boldlabel-check" name="attr_condition-Wounds" value="2"><b title="-2 penalty on all attack rolls, saving throws, skill checks, and ability checks, as well as to AC and caster level" data-i18n-title="wounded-title" data-i18n-aria-label="wounded-title" data-i18n="wounded">Wounded </b></label><input title="@{HP_wounded} 50% or less of max HP" type="number" name="attr_HP_wounded" value="0" class="sheet-calc" readonly></span></div>
								<div class="sheet-table-row" ><span class="sheet-table-cell sheet-left"><label><input type="radio" title="@{condition-Wounds}" class="sheet-boldlabel-check" name="attr_condition-Wounds" value="3"><b title="-3 penalty on all attack rolls, saving throws, skill checks, and ability checks, as well as to AC and caster level" data-i18n-title="critical-title" data-i18n-aria-label="critical-title" data-i18n="critical">Critical </b></label><input title="@{HP_critical} 25% or less of max HP" type="number" name="attr_HP_critical" value="0" class="sheet-calc" readonly></span></div>
								<div class="sheet-table-row" ><span class="sheet-table-cell sheet-left" style="max-width:8em;"><label title="Not unconscious until HP is under this value." data-i18n-title="disabled-title" data-i18n-aria-label="disabled-title" style="margin-right: 0;"><b data-i18n="disabled">Disabled at </b><input title="@{HP_disabled}" type="text" name="attr_HP_disabled" value="0" class="sheet-calc" readonly></label></span></div>
							</div>
						</div>
						<div class="sheet-h2-section sheet-hit-point-calcs sheet-hide-readonly">
							<div class="sheet-table">
								<span class="sheet-table-name sheet-secondary-table-name">Hit Point Calculations</span>
								<div class="sheet-table-group-head">
									<span class="sheet-table-header sheet-divider-lg">&nbsp;</span>
									<span class="sheet-table-header sheet-ability-column" title="The Ability Score that contributes a bonus/penalty to the overall character hit points by level." data-i18n-title="hit-points-ability-title" data-i18n-aria-label="hit-points-ability-title" data-i18n="ability">Ability</span>
									<span class="sheet-table-header" title="The modifier that comes from the Ability Score chosen to adjust hit points per level." data-i18n-title="hit-points-modifier-title" data-i18n-aria-label="hit-points-modifier-title" data-i18n="modifier-abbrv">Mod</span>
									<span class="sheet-table-header sheet-divider-lg">&nbsp;</span>
									<span class="sheet-table-header" title="Level/Hit Dice" data-i18n-title="level-hit-dice" data-i18n-aria-label="level-hit-dice" data-i18n="level-hit-dice-abbrv">Level/HD</span>
									<span class="sheet-table-header sheet-divider-lg">&nbsp;</span>
									<span class="sheet-table-header" data-i18n="ability-bonus">Ability Bonus</span>
									<span class="sheet-table-header sheet-divider-lg">&nbsp;</span>
									<span class="sheet-table-header" title="Hit points from class levels and hit dice" data-i18n-title="hit-points-due-to-hit-dice-title" data-i18n-aria-label="hit-points-due-to-hit-dice-title" data-i18n="hit-points-due-to-hit-dice-abbrv">Class/HD hp</span>
									<span class="sheet-table-header sheet-divider-lg">&nbsp;</span>
									<span class="sheet-table-header sheet-super sheet-note-a" title="Player configurable adjustment to maximum hit points by way of a formula." data-i18n-title="hit-points-adjustment-title" data-i18n-aria-label="hit-points-adjustment-title" data-i18n="miscellaneous-bonus">Misc Bonus</span>
									<span class="sheet-table-header" title="The value produced by the HP adj2 formula." data-i18n-title="hit-points-modifier-2-title" data-i18n="modifier-abbrv">Mod</span>
								</div>
								<div class="sheet-table-row">
									<span class="sheet-divider-lg">=&nbsp;(</span>
									<span class="sheet-table-cell sheet-ability-column">
										<select title="@{HP-ability}" name="attr_HP-ability" class="sheet-select-small">
											<option value="0" data-i18n="none">None</option>
											<option value="@{STR-mod}" data-i18n="strength-abbrv">STR</option>
											<option value="@{DEX-mod}" data-i18n="dexterity-abbrv">DEX</option>
											<option value="@{CON-mod}" data-i18n="constitution-abbrv-default" selected>&#8226;CON</option>
											<option value="@{INT-mod}" data-i18n="intelligence-abbrv">INT</option>
											<option value="@{WIS-mod}" data-i18n="wisdom-abbrv">WIS</option>
											<option value="@{CHA-mod}" data-i18n="charisma-abbrv">CHA</option>
										</select>
									</span>
									<span class="sheet-table-cell sheet-number"><input type="number" class="sheet-calc sheet-narrow-numbers" title="@{HP-ability-mod}" name="attr_HP-ability-mod" value="0" readonly></span>
									<span class="sheet-divider-lg">*</span>
									<span class="sheet-table-cell sheet-number"><input type="number" class="sheet-calc sheet-narrow-numbers" title="@{level}" name="attr_level" value="0" readonly></span>
									<span class="sheet-divider sheet-divider-lg">)=</span>
									<span class="sheet-table-cell sheet-number"><input type="number" name="attr_hp_ability_bonus" title="@{hp_ability_bonus}" value="0" class="sheet-calc sheet-narrow-numbers" readonly /></span>
									<span class="sheet-divider sheet-divider-lg">+</span>
									<span class="sheet-table-cell sheet-number"><input type="number" class="sheet-calc sheet-entry-wide" title="@{total-hp}" name="attr_total-hp" value="0" readonly></span>
									<span class="sheet-divider sheet-divider-lg">+</span>
									<input type="checkbox" name="attr_HP-formula-mod_error" class="sheet-error-mshow" value="1" />
									<span class="sheet-table-cell sheet-highlight"><input type="text" title="@{HP-formula-macro-text}" name="attr_HP-formula-macro-text" value="" placeholder="#/Equation" data-i18n-placeholder="equation-macro-place"></span>
									<span class="sheet-table-cell sheet-number sheet-highlight"><input type="number" class="sheet-calc sheet-narrow-numbers" title="@{HP-formula-mod}" name="attr_HP-formula-mod" value="0" readonly></span>
								</div>
							</div>
							<div class="sheet-table" style="margin-top: 2px">
								<span class="sheet-table-name sheet-secondary-table-name" data-i18n="temporary-hp-calculations">Temp hp Calculations</span>
								<div class="sheet-table-group-head">
									<span class="sheet-table-header sheet-number" title="Player configurable temporary hit points that add to the total Temp HP value." data-i18n-title="temporary-hit-points-miscellaneous-title" data-i18n-aria-label="temporary-hit-points-miscellaneous-title" data-i18n="miscellaneous-abbrv">Misc</span>
									<span class="sheet-table-header"></span>
									<span class="sheet-table-header" title="Temporary hit points that come from active Buffs (see Core tab)." data-i18n-title="temporary-hit-points-buff-title" data-i18n-aria-label="temporary-hit-points-buff-title" data-i18n="buff">Buff</span>
									<span class="sheet-table-header sheet-table-rightcell"></span>
								</div>
								<div class="sheet-table-row">
									<span class="sheet-table-cell sheet-number"><input type="number" title="@{HP-temp-misc}" name="attr_HP-temp-misc" value="0"></span>
									<span class="sheet-divider">+</span>
									<span class="sheet-table-cell" style="text-align:right;"><input class="sheet-calc" readonly type="number" title="@{buff_HP-temp-total}" name="attr_buff_HP-temp-total" value="0"></span>
									<span class="sheet-table-rightcell"></span>
								</div>
							</div>
						</div>				
						<div class="sheet-cheat"></div>
						<input class="sheet-showarrow sheet-h2arrow" type="checkbox" name="attr_initiative-show" data-i18n-aria-label="initiative" value="1" checked />
						<h2 class="sheet-clickheader sheet-showsect"><label title="Click to expand" data-i18n-title="showsect-cmd" data-i18n-aria-label="showsect-cmd" data-i18n="initiative-and-speeds">Initiative and Speed</label></h2>
						<div class="sheet-h2-section sheet-initiative">
							<div class="sheet-table sheet-narrow-numbers-readonly" style="margin-bottom:.5em;">
								<span class="sheet-table-name" data-i18n="initiative">Initiative</span>
								<div class="sheet-table sheet-init-group">
									<div class="sheet-table-row sheet-hide-readonly">
										<span class="sheet-table-header" data-i18n="roll">Roll</span>
										<span class="sheet-table-header" data-i18n="total">Total</span>
										<span class="sheet-table-header"></span>
										<span class="sheet-table-header" style="max-width: 6em ; min-width: 3em" data-i18n="ability">Ability</span>
										<span class="sheet-table-header" data-i18n="modifier-abbrv">Mod</span>
										<span class="sheet-table-header"></span>
										<span class="sheet-table-header" data-i18n="trait">Trait</span>
										<span class="sheet-table-header"></span>
										<span class="sheet-table-header sheet-super sheet-note-a" style="width:6em;" data-i18n="miscellaneous-abbrv">Misc</span>
										<span class="sheet-table-header"></span>
										<span class="sheet-table-header"></span>
										<span class="sheet-table-header" data-i18n-title="condition-description" data-i18n-aria-label="condition-description" data-i18n="condition-abbrv">Cond</span>
										<span class="sheet-table-header"></span>
										<span class="sheet-table-header" data-i18n-title="condition-description" data-i18n-aria-label="condition-description" data-i18n="condition-abbrv">Cond</span>
										<span class="sheet-table-header" data-i18n="notes">Notes</span>
										<span class="sheet-table-header sheet-table-rightcell"></span>
									</div>									
									<div class="sheet-table-row">
										<span class="sheet-table-cell"><button title="%{selected|Roll-for-initiative}" type="roll" name="roll_Roll-for-initiative" value="@{init-macro-text}" style="height:1.85em;margin-top: 2px;">&nbsp;<span style="vertical-align: middle;" data-i18n="initiative-abbrv">INIT</span>&nbsp;</button><span class="sheet-show-readonly sheet-inverse-readonly"><br>&nbsp;</span></span>
										<span class="sheet-table-cell"><input type="number" title="@{init}" name="attr_init" value="0" class="sheet-calc" readonly>
										<span class="sheet-show-readonly sheet-inverse-readonly"><br><span data-i18n="total">Total</span></span>
										</span>
										<span class="sheet-divider sheet-hide-readonly">=</span>
										<span class="sheet-table-cell">
											<select title="@{init-ability}" name="attr_init-ability" class="sheet-select-small">
												<option value="0" data-i18n="none">None</option>
												<option value="@{STR-mod}" data-i18n="strength-abbrv">STR</option>
												<option value="@{DEX-mod}" data-i18n="dexterity-abbrv-default" selected>&#8226;DEX</option>
												<option value="@{CON-mod}" data-i18n="constitution-abbrv">CON</option>
												<option value="@{INT-mod}" data-i18n="intelligence-abbrv">INT</option>
												<option value="@{WIS-mod}" data-i18n="wisdom-abbrv">WIS</option>
												<option value="@{CHA-mod}" data-i18n="charisma-abbrv">CHA</option>
											</select>
											<span class="sheet-show-readonly sheet-inverse-readonly"><br><span data-i18n="ability">Ability</span></span>
										</span>
										<span class="sheet-table-cell sheet-hide-readonly">
											<input value="1" type="checkbox" name="attr_nodex-toggle" class="sheet-warn-show sheet-sect-show sheet-sect-show-inverse" />
											<input type="number" title="@{init-ability-mod}" name="attr_init-ability-display" value="0" class="sheet-calc sheet-highlight sheet-sect" readonly>
											<input type="number" title="@{init-ability-mod}" name="attr_init-ability-mod" value="0" class="sheet-calc sheet-sect-inverse" readonly>
											<span class="sheet-show-readonly sheet-inverse-readonly"><br><span data-i18n="modifier-abbrv">Mod</span></span>
										</span>
										<span class="sheet-divider sheet-hide-readonly">+</span>
										<span class="sheet-table-cell sheet-hide-readonly"><input type="number" title="@{init-trait}" name="attr_init-trait" value="0"></span>
										<span class="sheet-divider sheet-hide-readonly">+</span>
										<input type="checkbox" name="attr_init-misc-mod_error" class="sheet-error-mshow" value="1" />
										<span class="sheet-table-cell sheet-hide-readonly sheet-entry-20p-shrink sheet-highlight"><input class="sheet-macro-text-inline" type="text" title="@{init-misc}" name="attr_init-misc" value="" placeholder="#/Equation" data-i18n-placeholder="equation-macro-place"></span>
										<span class="sheet-table-cell sheet-hide-readonly sheet-highlight"><input type="number" title="@{init-misc-mod}" name="attr_init-misc-mod" value="0" class="sheet-calc" readonly></span>
										<span class="sheet-divider-lg sheet-hide-readonly">-</span>
										<span class="sheet-table-cell"><input type="number" title="@{condition-Deafened}" name="attr_condition-Deafened" value="0" class="sheet-calc" readonly>
										<span class="sheet-show-readonly sheet-inverse-readonly"><br><span data-i18n-title="condition-description" data-i18n-aria-label="condition-description" data-i18n="condition-abbrv">Cond</span></span>
										</span>
										<span class="sheet-divider sheet-hide-readonly">+</span>
										<span class="sheet-table-cell"><input type="number" title="@{checks-cond}" name="attr_checks-cond" value="0" class="sheet-calc" readonly>
										<span class="sheet-show-readonly sheet-inverse-readonly"><br><span data-i18n-title="condition-description" data-i18n-aria-label="condition-description" data-i18n="condition-abbrv">Cond</span></span>
										</span>
										<span class="sheet-table-cell sheet-nowrap" style="padding-left: 0.25em;vertical-align: top;padding-top: .25em;">
											<input class="sheet-selectedlabel-check" type="checkbox" title="@{toggle_init_notes}" name="attr_toggle_init_notes" value="@{var_init_notes}" checked="checked"><b data-i18n-title="initiative-notes-title" data-i18n-aria-label="initiative-notes-title" data-i18n="include-notes" title="Include initiative notes with roll." aria-label="Include initiative notes with roll.">Include notes in roll</b><br class="sheet-show-readonly sheet-inverse-readonly">
										</span>
										<span class="sheet-table-cell sheet-table-rightcell sheet-hide-readonly"></span>
									</div>									
								</div>
								<div class="sheet-table">
									<div class="sheet-table-row sheet-sect sheet-expand" style="vertical-align:top;">
										<input type="checkbox" class="sheet-showarrow sheet-macro-text-show sheet-hide-readonly" title="Click to expand" data-i18n-title="showsect-cmd" data-i18n-aria-label="showsect-cmd" name="attr_macro-text-show" value="1" style="margin-left:.25em;">
										<label class="sheet-showsect sheet-macro-text-showlabel sheet-hide-readonly" data-i18n="macro-text">Macro Text</label>
										<input type="checkbox" class="sheet-showarrow sheet-init-notes-show" title="Click to expand" data-i18n-title="showsect-cmd" data-i18n-aria-label="showsect-cmd" name="attr_notes-show" value="1" style="margin-left:.25em;">
										<label class="sheet-showsect sheet-init-notes-showlabel" data-i18n="notes">Notes</label>								
										<div class="sheet-macro-text sheet-hide-readonly" style="width:100%; height:auto; clear:both; padding-bottom:.25em; background-color:inherit;">
											<textarea class="sheet-inline-textarea" name="attr_init-macro-text" title="@{init-macro-text}" placeholder="Full Macro" data-i18n-placeholder="full-macro-place">&{template:pf_generic} @{toggle_accessible_flag} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_generic-init}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle}} {{name=^{initiative}}} {{check=[[ (1d20 + [[ @{init} ]][init] + [[ {(0.01 * @{init}),0}kh1 ]][tie-breaker]) &amp;{tracker} ]]}} @{init_options}</textarea>
										</div>
										<div class="sheet-init-notes" style="vertical-align:top; width:100%; height:auto; clear:both;">
											<textarea class="sheet-inline-textarea" name="attr_init_notes" title="@{init_notes}" placeholder="Initiative Notes" data-i18n-placeholder="initiative-notes"></textarea>
											<input type="hidden" name="attr_var_init_notes" value="{{description=@{init_notes}}}" disabled >
											<input type="hidden" name="attr_init_options" value="@{toggle_init_notes}" disabled >
											<br class="sheet-show-readonly sheet-inverse-readonly"/>
											<label class="sheet-center sheet-small-label" style="width: 100%;">
											</label>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
					<input class="sheet-nextitem-show sheet-noshow" type="checkbox" name="attr_initiative-show" value="1" checked role="presentation" />
					<div class="sheet-h2-section sheet-speeds" style="text-align:center;">
						<div class="sheet-table sheet-narrow-numbers-readonly">
							<span class="sheet-secondary-table-name" data-i18n="speeds">Speeds</span>
							<div class="sheet-table-group-head">
								<div class="sheet-table-row">
									<span class="sheet-table-header" data-i18n-title="speed-base-title" data-i18n-aria-label="speed-base-title" title="The base speed for the character">
										<input type="checkbox" name="attr_speed-source" value="3" class="sheet-sect-show sheet-sect-show-inverse sheet-noshow" />
										<span class="sheet-sect-inverse" data-i18n="base">Base</span>
										<span class="sheet-sect" data-i18n="speed">Speed</span>
									</span>
									<input type="checkbox" name="attr_speed-source" value="3" class="sheet-sect-show-inverse sheet-noshow" />
									<span class="sheet-table-header sheet-sect-inverse" title="The modified speed due to armor and/or carry capacity &amp; load" data-i18n-title="speed-title" data-i18n-aria-label="speed-title" data-i18n="speed">Speed</span>
									<span class="sheet-table-header sheet-left-border" data-i18n="fly">Fly</span>
									<span class="sheet-table-header" data-i18n="swim">Swim</span>
									<span class="sheet-table-header" data-i18n="climb">Climb</span>
									<span class="sheet-table-header sheet-entry-short sheet-entry-custom-header"><input class="sheet-entry-custom-header" type="text" value="" data-i18n-placeholder="user-defined" placeholder="User Defined" name="attr_speed-misc-name" title="@{speed-misc-name}"  /></span>
									<span class="sheet-table-header sheet-entry-short sheet-right-border sheet-entry-custom-header"><input class="sheet-entry-custom-header" type="text" value="" data-i18n-placeholder="user-defined" placeholder="User Defined" name="attr_speed-misc2-name" title="@{speed-misc2-name}" /></span>
									<span class="sheet-table-header sheet-hide-readonly" title="Run Multiplier" data-i18n-title="speed-multiplier-title" data-i18n-aria-label="speed-multiplier-title" data-i18n="run-multiplier-abbrv">Run Mult</span>
									<span class="sheet-table-header" title="The maximum distance that the character can run in a straight line during your turn" data-i18n-title="speed-run-title" data-i18n-aria-label="speed-run-title" data-i18n="run">Run</span>
								</div>
							</div>
							<div class="sheet-table-group">
								<div class="sheet-table-row">
									<span class="sheet-table-cell"><input title="@{speed-base}" type="number" name="attr_speed-base" value="0" step="5"></span>
									<input type="checkbox" name="attr_speed-source" value="3" class="sheet-sect-show-inverse sheet-noshow" />
									<span class="sheet-table-cell sheet-sect-inverse"><input title="@{speed-modified}" type="number" name="attr_speed-modified" value="0" data-i18n-aria-label="speed-title" class="sheet-calc" readonly></span>
									<span class="sheet-table-cell sheet-left-border"><input title="@{speed-fly}" type="number" name="attr_speed-fly" value="0" step="5"></span>
									<span class="sheet-table-cell"><input title="@{speed-swim}" type="number" name="attr_speed-swim" value="0" step="5"></span>
									<span class="sheet-table-cell"><input title="@{speed-climb}" type="number" name="attr_speed-climb" value="0" step="5"></span>
									<span class="sheet-table-cell"><input title="@{speed-misc}" type="number" name="attr_speed-misc" value="0" step="5"></span>
									<span class="sheet-table-cell sheet-right-border"><input title="@{speed-misc2}" type="number" name="attr_speed-misc2" value="0" step="5"></span>
									<span class="sheet-table-cell sheet-hide-readonly"><input title="@{run-mult}" type="number" name="attr_run-mult" value="4" step="1"></span>
									<span class="sheet-table-cell"><input title="@{speed-run}" type="number" name="attr_speed-run" value="0" class="sheet-calc" readonly></span>
								</div>
							</div>
						</div>
						<div class="sheet-hide-readonly" style="width: 100%;margin-top: .25em;">
							<textarea class="sheet-inline-textarea" name="attr_speed-notes" title="@{speed-notes}" placeholder="Speed Notes" data-i18n-placeholder="speed-notes" style="margin-top: 0; margin-bottom: 0; height: 28px;"></textarea>
							<label class="sheet-center sheet-small-label"><span data-i18n="speed-notes">Speed Notes</span></label>
						</div>
					</div>
				</div>
			</div>
			<div class="sheet-section2 sheet-section sheet-section-defenses" role="region" aria-label="Defenses" data-i18n-aria-label="defenses">
				<h1 class="sheet-selected-tabtitle" data-i18n="defenses">Defenses</h1>
				<div style="display:none;">
					<button type="roll" name="roll_All-Saves" class="sheet-command-button" value="@{PC-whisper} @{all_saves-macro}" title="%{selected|All-Saves}" data-i18n="all-saves">All Saves</button>
					<button type="roll" name="roll_NPC-All-Saves" class="sheet-command-button" value="@{NPC-whisper} @{all_saves-macro}" title="%{selected|NPC-All-Saves}" data-i18n="all-saves">All Saves</button>
					<button type="roll" name="roll_defense-stats" class="sheet-command-button" value="@{STATS-whisper} @{defense-stats-macro-text}" title="%{selected|defense-stats-macro-text}" data-i18n="defense-statistics-abbrv">Defense Stats</button>
					<button type="roll" name="roll_NPC-defense-stats" class="sheet-command-button" value="@{STATS-whisper} @{defense-stats-macro-text} {{name=^{npc} ^{defense-statistics}}}" title="%{selected|NPC-defense-stats}" data-i18n="defense-statistics-abbrv">Defense Stats</button>
				</div>
				<div class="sheet-cheat"></div>
				<input class="sheet-showarrow sheet-h2arrow" type="checkbox" name="attr_saves-show" data-i18n-aria-label="saving-throws" title="Click to expand" data-i18n-title="showsect-cmd" value="1" checked />
				<h2 class="sheet-clickheader sheet-showsect"><label title="Click to expand" data-i18n-title="showsect-cmd" data-i18n-aria-label="showsect-cmd" data-i18n="saving-throws">Saving Throws</label></h2>
				<div class="sheet-h2-section sheet-saves">
					<div class="sheet-table sheet-saves-table">
						<span class="sheet-table-name" data-i18n="saving-throws">Saving Throws</span>
						<div class="sheet-table-group-head">
							<span class="sheet-table-header" data-i18n="save">Save</span>
							<span class="sheet-table-header" data-i18n="total">Total</span>
							<span class="sheet-table-header sheet-divider"></span>
							<span class="sheet-table-header" data-i18n="base">Base</span>
							<span class="sheet-table-header sheet-divider"></span>
							<span class="sheet-table-header sheet-ability-column" data-i18n="ability">Ability</span>
							<span class="sheet-table-header" data-i18n="modifier-abbrv">Mod</span>
							<span class="sheet-table-header sheet-divider"></span>
							<span class="sheet-table-header" data-i18n="trait">Trait</span>
							<span class="sheet-table-header sheet-divider"></span>
							<span class="sheet-table-header" data-i18n="enhancement-abbrv">Enhan</span>
							<span class="sheet-table-header sheet-divider"></span>
							<span class="sheet-table-header" data-i18n="resistance">Resistance</span>
							<span class="sheet-table-header sheet-divider"></span>
							<span class="sheet-table-header" data-i18n="miscellaneous-abbrv">Misc</span>
							<span class="sheet-table-header sheet-divider"></span>
							<span class="sheet-table-header" data-i18n-title="condition-description" data-i18n-aria-label="condition-description" data-i18n="condition-abbrv">Cond</span>
							<span class="sheet-table-header sheet-divider"></span>
							<span class="sheet-table-header" data-i18n="buff">Buff</span>
						</div>
						<div class="sheet-table-group">
							<div class="sheet-table-row sheet-save">
								<span class="sheet-table-cell"><button class="sheet-text-button" title="%{selected|Fort-Save}" type="roll" name="roll_Fort-Save" value="@{PC-whisper} @{fort-save-macro-text}">&nbsp;<span style="vertical-align: middle;" data-i18n="fortitude-abbrv">Fort</span></button></span>
								<span class="sheet-table-cell"><input title="@{Fort}" type="number" name="attr_Fort" value="0" class="sheet-calc" readonly /></span>
								<span class="sheet-divider">=</span>
								<span class="sheet-table-cell"><input title="@{total-Fort}" type="number" name="attr_total-Fort" value="0" class="sheet-calc" readonly /></span>
								<span class="sheet-divider">+</span>
								<span class="sheet-table-cell sheet-ability-column">
									<select title="@{Fort-ability}" name="attr_Fort-ability">
										<option value="@{STR-mod}" data-i18n="strength-abbrv">STR</option>
										<option value="@{DEX-mod}" data-i18n="dexterity-abbrv">DEX</option>
										<option value="@{CON-mod}" data-i18n="constitution-abbrv-default" selected>&#8226;CON</option>
										<option value="@{INT-mod}" data-i18n="intelligence-abbrv">INT</option>
										<option value="@{WIS-mod}" data-i18n="wisdom-abbrv">WIS</option>
										<option value="@{CHA-mod}" data-i18n="charisma-abbrv">CHA</option>
									</select>
								</span>
								<span class="sheet-table-cell"><input title="@{Fort-ability-mod}" type="number" name="attr_Fort-ability-mod" value="0" class="sheet-calc" readonly /></span>
								<span class="sheet-divider">+</span>
								<span class="sheet-table-cell"><input title="@{Fort-trait}" type="number" name="attr_Fort-trait" value="0" /></span>
								<span class="sheet-divider">+</span>
								<span class="sheet-table-cell"><input title="@{Fort-enhance}" type="number" name="attr_Fort-enhance" value="0" /></span>
								<span class="sheet-divider">+</span>
								<span class="sheet-table-cell"><input title="@{Fort-resist}" type="number" name="attr_Fort-resist" value="0" /></span>
								<span class="sheet-divider">+</span>
								<span class="sheet-table-cell"><input title="@{Fort-misc}" type="number" name="attr_Fort-misc" value="0" /></span>
								<span class="sheet-divider">+</span>
								<span class="sheet-table-cell"><input title="@{saves-cond}" type="number" name="attr_saves-cond" value="0" class="sheet-calc" readonly /></span>
								<span class="sheet-divider">+</span>
								<span class="sheet-table-cell"><input title="@{buff_Fort-total}" type="number" name="attr_buff_Fort-total" value="0" class="sheet-calc" readonly /></span>
							</div>
							<div class="sheet-table-row sheet-save">
								<span class="sheet-table-cell"><button class="sheet-text-button" title="%{selected|Ref-Save}" type="roll" name="roll_Ref-Save" value="@{PC-whisper} @{ref-save-macro-text}">&nbsp;<span style="vertical-align: middle;" data-i18n="reflex-abbrv">Ref</span></button></span>
								<span class="sheet-table-cell"><input title="@{Ref}" type="number" name="attr_Ref" value="0" class="sheet-calc" readonly /></span>
								<span class="sheet-divider">=</span>
								<span class="sheet-table-cell"><input title="@{total-Ref}" type="number" name="attr_total-Ref" value="0" class="sheet-calc" readonly /></span>
								<span class="sheet-divider">+</span>
								<span class="sheet-table-cell sheet-ability-column">
									<select title="@{Ref-ability}" name="attr_Ref-ability">
										<option value="@{STR-mod}" data-i18n="strength-abbrv">STR</option>
										<option value="@{DEX-mod}" data-i18n="dexterity-abbrv-default" selected>&#8226;DEX</option>
										<option value="@{CON-mod}" data-i18n="constitution-abbrv">CON</option>
										<option value="@{INT-mod}" data-i18n="intelligence-abbrv">INT</option>
										<option value="@{WIS-mod}" data-i18n="wisdom-abbrv">WIS</option>
										<option value="@{CHA-mod}" data-i18n="charisma-abbrv">CHA</option>
									</select>
								</span>
								<span class="sheet-table-cell"><input title="@{Ref-ability-mod}" type="number" name="attr_Ref-ability-mod" value="0" class="sheet-calc" readonly /></span>
								<span class="sheet-divider">+</span>
								<span class="sheet-table-cell"><input title="@{Ref-trait}" type="number" name="attr_Ref-trait" value="0" /></span>
								<span class="sheet-divider">+</span>
								<span class="sheet-table-cell"><input title="@{Ref-enhance}" type="number" name="attr_Ref-enhance" value="0" /></span>
								<span class="sheet-divider">+</span>
								<span class="sheet-table-cell"><input title="@{Ref-resist}" type="number" name="attr_Ref-resist" value="0" /></span>
								<span class="sheet-divider">+</span>
								<span class="sheet-table-cell"><input title="@{Ref-misc}" type="number" name="attr_Ref-misc" value="0" /></span>
								<span class="sheet-divider">+</span>
								<span class="sheet-table-cell"><input title="@{saves-cond}" type="number" name="attr_saves-cond" value="0" class="sheet-calc" readonly /></span>
								<span class="sheet-divider">+</span>
								<span class="sheet-table-cell"><input title="@{buff_Ref-total}" type="number" name="attr_buff_Ref-total" value="0" class="sheet-calc" readonly /></span>
							</div>
							<div class="sheet-table-row sheet-save">
								<span class="sheet-table-cell"><button class="sheet-text-button" title="%{selected|Will-Save}" type="roll" name="roll_Will-Save" value="@{PC-whisper} @{will-save-macro-text}">&nbsp;<span style="vertical-align: middle;" data-i18n="willpower-abbrv">Will</span></button></span>
								<span class="sheet-table-cell"><input title="@{Will}" type="number" name="attr_Will" value="0" class="sheet-calc" readonly /></span>
								<span class="sheet-divider">=</span>
								<span class="sheet-table-cell"><input title="@{total-Will}" type="number" name="attr_total-Will" value="0" class="sheet-calc" readonly /></span>
								<span class="sheet-divider">+</span>
								<span class="sheet-table-cell sheet-ability-column">
									<select title="@{Will-ability}" name="attr_Will-ability">
										<option value="@{STR-mod}" data-i18n="strength-abbrv">STR</option>
										<option value="@{DEX-mod}" data-i18n="dexterity-abbrv">DEX</option>
										<option value="@{CON-mod}" data-i18n="constitution-abbrv">CON</option>
										<option value="@{INT-mod}" data-i18n="intelligence-abbrv">INT</option>
										<option value="@{WIS-mod}" data-i18n="wisdom-abbrv-default" selected>&#8226;WIS</option>
										<option value="@{CHA-mod}" data-i18n="charisma-abbrv">CHA</option>
									</select>
								</span>
								<span class="sheet-table-cell"><input title="@{Will-ability-mod}" type="number" name="attr_Will-ability-mod" value="0" class="sheet-calc" readonly /></span>
								<span class="sheet-divider">+</span>
								<span class="sheet-table-cell"><input title="@{Will-trait}" type="number" name="attr_Will-trait" value="0" /></span>
								<span class="sheet-divider">+</span>
								<span class="sheet-table-cell"><input title="@{Will-enhance}" type="number" name="attr_Will-enhance" value="0" /></span>
								<span class="sheet-divider">+</span>
								<span class="sheet-table-cell"><input title="@{Will-resist}" type="number" name="attr_Will-resist" value="0" /></span>
								<span class="sheet-divider">+</span>
								<span class="sheet-table-cell"><input title="@{Will-misc}" type="number" name="attr_Will-misc" value="0" /></span>
								<span class="sheet-divider">+</span>
								<span class="sheet-table-cell"><input title="@{saves-cond}" type="number" name="attr_saves-cond" value="0" class="sheet-calc" readonly /></span>
								<span class="sheet-divider">+</span>
								<span class="sheet-table-cell"><input title="@{buff_Will-total}" type="number" name="attr_buff_Will-total" value="0" class="sheet-calc" readonly /></span>
							</div>
						</div>
					</div>
					<div class="sheet-table sheet-saves-notes-table">
						<div class="sheet-show-readonly sheet-inverse-readonly" style="margin-top: 1em;">&nbsp;</div> <!-- add whitespace in compact mode -->
						<span class="sheet-table-cell" style="width:100%;"><textarea class="sheet-inline-textarea" title="@{Save-notes}" name="attr_Save-notes" placeholder="Put notes about context-sensitive Saving Throw bonuses here." data-i18n-placeholder="save-notes-place"></textarea></span>
						<span class="sheet-table-cell sheet-nowrap"><label><input type="checkbox" class="sheet-selectedlabel-check" name="attr_toggle_save_notes" value="@{var_save_notes}" title="@{toggle_save_notes}"><b title="Show Save Notes" data-i18n-title="options-defenses-save-title" data-i18n-aria-label="options-defenses-save-title" data-i18n="include-save-notes">Include Save Notes in roll</b></label></span>
					</div>
					<input type="hidden" name="attr_var_defensive-abilities_notes" value="{{defensive-abilities_notes=@{npc-defensive-abilities}}}" disabled />
					<input type="hidden" name="attr_var_dr_notes" value="{{dr_notes=@{DR}}}" disabled />
					<input type="hidden" name="attr_var_resistances_notes" value="{{resistances_notes=@{resistances}}}" disabled />
					<input type="hidden" name="attr_var_immunities_notes" value="{{immunities_notes=@{immunities}}}" disabled />
					<input type="hidden" name="attr_var_weaknesses_notes" value="{{weaknesses_notes=@{weaknesses}}}" disabled />
					<input type="hidden" name="attr_var_sr0_notes" value="{{sr0_notes=@{SR}}}" disabled />
					<input type="hidden" name="attr_var_armor_notes" value="{{armor_notes=@{Armor-notes}}}" disabled />
					<input type="hidden" name="attr_var_save_notes" value="{{save_notes=@{Save-notes}}}" disabled />
					<input type="hidden" name="attr_var_cmd_notes" value="{{cmd_notes=@{cmd-notes}}}" disabled />
					<input type="hidden" name="attr_var_defense_notes" value="{{defense_notes=@{defense-notes}}}" disabled />
				</div>
				<div class="sheet-cheat"></div>
				<input class="sheet-showarrow sheet-h2arrow" type="checkbox" name="attr_defense-values-show" data-i18n-aria-label="defense-values-grid" title="Click to expand" data-i18n-title="showsect-cmd" value="1" checked />
				<h2 class="sheet-clickheader sheet-showsect"><label title="Click to expand" data-i18n-title="showsect-cmd" data-i18n-aria-label="showsect-cmd" data-i18n="defense-values-grid">Defense Values</label></h2>
				<div class="sheet-h2-section sheet-defense-grid">
					<div class="sheet-table sheet-defense-table sheet-medium-numbers">
						<span class="sheet-table-name" data-i18n="defense-values-grid">Defense Values</span>
						<div class="sheet-table-group-head">
							<span class="sheet-table-header" style="width:10%;"></span>
							<span class="sheet-table-header" data-i18n="total">Total</span>
							<span class="sheet-table-header" style="width:3.25em;min-width:3.25em;">&nbsp;</span>
							<span class="sheet-table-header" data-i18n="armor">Armor</span>
							<span class="sheet-table-header sheet-ability-column" data-i18n="shield">Shield</span>
							<span class="sheet-table-header" style="width:54px;"></span>
							<span class="sheet-table-header sheet-ability-column" data-i18n="ability">Ability</span>
							<span class="sheet-table-header" data-i18n="modifier-abbrv">Mod</span>
							<span class="sheet-table-header" data-i18n="size">Size</span>
							<span class="sheet-table-header" data-i18n="dodge">Dodge</span>
							<span class="sheet-table-header" data-i18n="natural">Natural</span>
							<span class="sheet-table-header" data-i18n="deflect">Deflect</span>
							<span class="sheet-table-header" data-i18n="miscellaneous-abbrv">Misc</span>
							<span class="sheet-table-header" data-i18n="buff">Buff</span>
							<span class="sheet-table-header" data-i18n-title="condition-description" data-i18n-aria-label="condition-description" data-i18n="condition-abbrv" style="padding-right: 0.5em">Cond</span>
						</div>
						<div class="sheet-table-group">
							<div class="sheet-table-row">
								<span class="sheet-table-row-name"><span class="sheet-show-readonly sheet-inverse-readonly" style="position:absolute; top:.425em; margin-left:-14px; color:white; font-family:pictos custom; font-size:4rem; font-weight:lighter;">e</span><span data-i18n="armor-class-abbrv" title="Armor Class" data-i18n-title="armor-class" data-i18n-aria-label="armor-class">AC</span></span>
								<span class="sheet-table-cell"><input title="@{AC}" type="number" name="attr_AC" value="10" class="sheet-calc" readonly></span>
								<span class="sheet-table-cell">= <span style="font-weight: bold">10</span> +</span>
								<span class="sheet-table-cell"><input title="@{AC-armor}" type="number" name="attr_AC-armor" value="0" class="sheet-calc" readonly></span>
								<span class="sheet-table-cell sheet-ability-column sheet-right"><input title="@{AC-shield}" type="number" name="attr_AC-shield" value="0" class="sheet-calc" readonly></span>
								<span class="sheet-table-cell"></span>
								<span class="sheet-table-cell sheet-ability-column">
									<select title="@{AC-ability}" name="attr_AC-ability" class="sheet-select-small">
										<option value="( ((@{STR-mod} + [[ @{max-dex-source} ]]) - abs(@{STR-mod} - [[ @{max-dex-source} ]])) / 2 )" data-i18n="strength-abbrv">STR</option>
										<option value="( ((@{DEX-mod} + [[ @{max-dex-source} ]]) - abs(@{DEX-mod} - [[ @{max-dex-source} ]])) / 2 )" data-i18n="dexterity-abbrv-default" selected>&#8226;DEX</option>
										<option value="( ((@{CON-mod} + [[ @{max-dex-source} ]]) - abs(@{CON-mod} - [[ @{max-dex-source} ]])) / 2 )" data-i18n="constitution-abbrv">CON</option>
										<option value="( ((@{INT-mod} + [[ @{max-dex-source} ]]) - abs(@{INT-mod} - [[ @{max-dex-source} ]])) / 2 )" data-i18n="intelligence-abbrv">INT</option>
										<option value="( ((@{WIS-mod} + [[ @{max-dex-source} ]]) - abs(@{WIS-mod} - [[ @{max-dex-source} ]])) / 2 )" data-i18n="wisdom-abbrv">WIS</option>
										<option value="( ((@{CHA-mod} + [[ @{max-dex-source} ]]) - abs(@{CHA-mod} - [[ @{max-dex-source} ]])) / 2 )" data-i18n="charisma-abbrv">CHA</option>
									</select>
								</span>
								<input type="hidden" name="attr_AC-ability-mod" value="0">
								<input type="checkbox" name="attr_nodex-toggle" class="sheet-warn-mshow" value="1" />
								<input type="checkbox" name="attr_maxdex-toggle" class="sheet-warn-show" value="1" />
								<span class="sheet-table-cell sheet-highlight"><input title="@{AC-ability-mod}" type="number" name="attr_AC-ability-display" value="0" class="sheet-calc" readonly></span>
								<span class="sheet-table-cell"><input title="@{size}" type="number" name="attr_size" value="0" class="sheet-calc" readonly></span>
								<span class="sheet-table-cell sheet-highlight"><input title="@{AC-dodge}" type="number" name="attr_AC-dodge" value="0"></span>
								<span class="sheet-table-cell"><input title="@{AC-natural}" type="number" name="attr_AC-natural" value="0"></span>
								<span class="sheet-table-cell"><input title="@{AC-deflect}" type="number" name="attr_AC-deflect" value="0"></span>
								<span class="sheet-table-cell"><input title="@{AC-misc}" type="number" name="attr_AC-misc" value="0"></span>
								<span class="sheet-table-cell"><input title="@{buff_AC-total}" type="number" name="attr_buff_AC-total" value="0" class="sheet-calc" readonly></span>
								<span class="sheet-table-cell"><input title="@{AC-penalty}" type="number" name="attr_AC-penalty" value="0" class="sheet-calc" readonly></span>
							</div>
							<div class="sheet-table-row">
								<span class="sheet-table-row-name" title="Touch Armor Class" data-i18n-placeholder="touch-armor-class" data-i18n="touch-armor-class-abbrv">Touch</span>
								<span class="sheet-table-cell"><input title="@{Touch}" type="number" name="attr_Touch" value="10" class="sheet-calc" readonly></span>
								<span class="sheet-table-cell">= <span style="font-weight: bold">10</span> +</span>
								<span class="sheet-table-cell"></span>
								<span class="sheet-table-cell"></span>
								<span class="sheet-table-cell"></span>
								<span class="sheet-table-cell sheet-ability-column">
									<select title="@{AC-ability}" name="attr_AC-ability" class="sheet-select-small">
										<option value="( ((@{STR-mod} + [[ @{max-dex-source} ]]) - abs(@{STR-mod} - [[ @{max-dex-source} ]])) / 2 )" data-i18n="strength-abbrv">STR</option>
										<option value="( ((@{DEX-mod} + [[ @{max-dex-source} ]]) - abs(@{DEX-mod} - [[ @{max-dex-source} ]])) / 2 )" data-i18n="dexterity-abbrv-default" selected>&#8226;DEX</option>
										<option value="( ((@{CON-mod} + [[ @{max-dex-source} ]]) - abs(@{CON-mod} - [[ @{max-dex-source} ]])) / 2 )" data-i18n="constitution-abbrv">CON</option>
										<option value="( ((@{INT-mod} + [[ @{max-dex-source} ]]) - abs(@{INT-mod} - [[ @{max-dex-source} ]])) / 2 )" data-i18n="intelligence-abbrv">INT</option>
										<option value="( ((@{WIS-mod} + [[ @{max-dex-source} ]]) - abs(@{WIS-mod} - [[ @{max-dex-source} ]])) / 2 )" data-i18n="wisdom-abbrv">WIS</option>
										<option value="( ((@{CHA-mod} + [[ @{max-dex-source} ]]) - abs(@{CHA-mod} - [[ @{max-dex-source} ]])) / 2 )" data-i18n="charisma-abbrv">CHA</option>
									</select>
								</span>
								<input type="checkbox" name="attr_nodex-toggle" class="sheet-warn-mshow" value="1" />
								<input type="checkbox" name="attr_maxdex-toggle" class="sheet-warn-show" value="1" />
								<span class="sheet-table-cell sheet-highlight"><input title="@{AC-ability-mod}" type="number" name="attr_AC-ability-display" value="0" class="sheet-calc" readonly></span>
								<span class="sheet-table-cell"><input title="@{size}" type="number" name="attr_size" value="0" class="sheet-calc" readonly></span>
								<span class="sheet-table-cell sheet-highlight"><input title="@{AC-dodge}" type="number" name="attr_AC-dodge" value="0"></span>
								<span class="sheet-table-cell"></span>
								<span class="sheet-table-cell"><input title="@{AC-deflect}" type="number" name="attr_AC-deflect" value="0"></span>
								<span class="sheet-table-cell"><input title="@{AC-misc}" type="number" name="attr_AC-misc" value="0"></span>
								<span class="sheet-table-cell"><input title="@{buff_Touch-total}" type="number" name="attr_buff_Touch-total" value="0" class="sheet-calc" readonly></span>
								<span class="sheet-table-cell"><input title="@{AC-penalty}" type="number" name="attr_AC-penalty" value="0" class="sheet-calc" readonly></span>
							</div>
							<div class="sheet-table-row">
								<span class="sheet-table-row-name" title="Flat-Footed Armor Class" data-i18n-title="flat-footed-armor-class" data-i18n-aria-label="flat-footed-armor-class" data-i18n="flat-footed-armor-class-abbrv">Flat-Footed</span>
								<span class="sheet-table-cell"><input title="@{Flat-Footed}" type="number" name="attr_Flat-Footed" value="10" class="sheet-calc" readonly></span>
								<span class="sheet-table-cell">= <span style="font-weight: bold">10</span> +</span>
								<span class="sheet-table-cell"><input title="@{AC-armor}" type="number" name="attr_AC-armor" value="0" class="sheet-calc" readonly></span>
								<span class="sheet-table-cell sheet-ability-column sheet-right"><input title="@{AC-shield}" type="number" name="attr_AC-shield" value="0" class="sheet-calc" readonly></span>
								<span class="sheet-table-cell"></span>
								<span class="sheet-table-cell sheet-ability-column">
									<input type="checkbox" value="1" name="attr_unlock_def_ability" class="sheet-sect-show sheet-sect-show-inverse" />
									<input type="checkbox" value="1" name="attr_uncanny_dodge" class="sheet-nextitem-show sheet-noshow" />
									<select title="@{AC-ability}" name="attr_AC-ability" class="sheet-select-small sheet-sect-inverse sheet-nextitem">
										<option value="( ((@{STR-mod} + [[ @{max-dex-source} ]]) - abs(@{STR-mod} - [[ @{max-dex-source} ]])) / 2 )" data-i18n="strength-abbrv">STR</option>
										<option value="( ((@{DEX-mod} + [[ @{max-dex-source} ]]) - abs(@{DEX-mod} - [[ @{max-dex-source} ]])) / 2 )" data-i18n="dexterity-abbrv-default" selected>&#8226;DEX</option>
										<option value="( ((@{CON-mod} + [[ @{max-dex-source} ]]) - abs(@{CON-mod} - [[ @{max-dex-source} ]])) / 2 )" data-i18n="constitution-abbrv">CON</option>
										<option value="( ((@{INT-mod} + [[ @{max-dex-source} ]]) - abs(@{INT-mod} - [[ @{max-dex-source} ]])) / 2 )" data-i18n="intelligence-abbrv">INT</option>
										<option value="( ((@{WIS-mod} + [[ @{max-dex-source} ]]) - abs(@{WIS-mod} - [[ @{max-dex-source} ]])) / 2 )" data-i18n="wisdom-abbrv">WIS</option>
										<option value="( ((@{CHA-mod} + [[ @{max-dex-source} ]]) - abs(@{CHA-mod} - [[ @{max-dex-source} ]])) / 2 )" data-i18n="charisma-abbrv">CHA</option>
									</select>
									<select title="@{FF-ability}" name="attr_FF-ability" class="sheet-select-small sheet-sect">
										<option value="0" data-i18n="none-default" selected>&#8226;None</option>
										<option value="( ((@{STR-mod} + [[ @{max-dex-source} ]]) - abs(@{STR-mod} - [[ @{max-dex-source} ]])) / 2 )" data-i18n="strength-abbrv">STR</option>
										<option value="( ((@{DEX-mod} + [[ @{max-dex-source} ]]) - abs(@{DEX-mod} - [[ @{max-dex-source} ]])) / 2 )" data-i18n="dexterity-abbrv">DEX</option>
										<option value="( ((@{CON-mod} + [[ @{max-dex-source} ]]) - abs(@{CON-mod} - [[ @{max-dex-source} ]])) / 2 )" data-i18n="constitution-abbrv">CON</option>
										<option value="( ((@{INT-mod} + [[ @{max-dex-source} ]]) - abs(@{INT-mod} - [[ @{max-dex-source} ]])) / 2 )" data-i18n="intelligence-abbrv">INT</option>
										<option value="( ((@{WIS-mod} + [[ @{max-dex-source} ]]) - abs(@{WIS-mod} - [[ @{max-dex-source} ]])) / 2 )" data-i18n="wisdom-abbrv">WIS</option>
										<option value="( ((@{CHA-mod} + [[ @{max-dex-source} ]]) - abs(@{CHA-mod} - [[ @{max-dex-source} ]])) / 2 )" data-i18n="charisma-abbrv">CHA</option>
									</select>
								</span>
								<input type="hidden" name="attr_FF-DEX" value="0">
								<input type="checkbox" name="attr_nodex-toggle" class="sheet-warn-mshow" value="1" />
								<input type="checkbox" name="attr_maxdex-toggle" class="sheet-warn-show" value="1" />
								<span class="sheet-table-cell sheet-highlight">
									<input type="checkbox" value="1" name="attr_unlock_def_ability" class="sheet-sect-show sheet-sect-show-inverse" />
									<input type="checkbox" value="1" name="attr_uncanny_dodge" class="sheet-nextitem-show sheet-noshow" />
									<input title="@{AC-ability-mod}" type="number" name="attr_AC-ability-display" value="0" class="sheet-calc sheet-sect-inverse sheet-nextitem" readonly>
									<input title="@{FF-DEX}" type="number" name="attr_FF-DEX-display" value="0" class="sheet-calc sheet-sect" readonly />
								</span>
								<span class="sheet-table-cell"><input title="@{size}" type="number" name="attr_size" value="0" class="sheet-calc" readonly /></span>
								<span class="sheet-table-cell sheet-highlight">
									<input name="attr_uncanny_dodge" type="checkbox" value="1" class="sheet-nextitem-show sheet-noshow" />
									<input title="@{AC-dodge}" type="number" name="attr_AC-dodge" value="0" class="sheet-nextitem"  />
								</span>
								<span class="sheet-table-cell"><input title="@{AC-natural}" type="number" name="attr_AC-natural" value="0" /></span>
								<span class="sheet-table-cell"><input title="@{AC-deflect}" type="number" name="attr_AC-deflect" value="0" /></span>
								<span class="sheet-table-cell"><input title="@{AC-misc}" type="number" name="attr_AC-misc" value="0" /></span>
								<span class="sheet-table-cell"><input title="@{buff_AC-total}" type="number" name="attr_buff_AC-total" value="0" class="sheet-calc" readonly /></span>
								<span class="sheet-table-cell"><input title="@{AC-penalty}" type="number" name="attr_AC-penalty" value="0" class="sheet-calc" readonly /></span>
							</div>
						</div>
					</div>
					<div class="sheet-table sheet-defense-table sheet-medium-numbers">
						<div class="sheet-table-group-head">
							<div class="sheet-table-row">
								<span class="sheet-table-header" style="width:10%;" data-i18n="combat-maneuver-defense-abbrv">CMD</span>
								<span class="sheet-table-header" data-i18n="total">Total</span>
								<span class="sheet-table-header" style="width:3.25em;min-width:3.25em;"></span>
								<span class="sheet-table-header"> 
									<input name="attr_hd_not_bab" type="checkbox" value="1" class="sheet-sect-show sheet-sect-show-inverse" role="presentation" data-i18n-aria-label="hd-not-bab-title" aria-label="if checked use total HD not Bab for CMD"/>
									<span class="sheet-sect-inverse" data-i18n="base-attack-bonus-abbrv">BAB</span>
									<span class="sheet-sect" data-i18n="hit-dice-abbrv">HD</span>
								</span>
								<span class="sheet-table-header sheet-ability-column" data-i18n="ability">Ability</span>
								<span class="sheet-table-header" data-i18n="modifier-abbrv">Mod</span>
								<span class="sheet-table-header sheet-ability-column" data-i18n="ability">Ability</span>
								<span class="sheet-table-header" data-i18n="modifier-abbrv">Mod</span>
								<span class="sheet-table-header" data-i18n="size">Size</span>
								<span class="sheet-table-header" data-i18n="dodge">Dodge</span>
								<span class="sheet-table-header" style="width:3.5em;min-width:2%;"></span>
								<span class="sheet-table-header" data-i18n="deflect">Deflect</span>
								<span class="sheet-table-header" data-i18n="miscellaneous-abbrv">Misc</span>
								<span class="sheet-table-header" data-i18n="buff">Buff</span>
								<span class="sheet-table-header" data-i18n="condition-abbrv" style="padding-right: 0.5em">Cond</span>
							</div>
						</div>
						<div class="sheet-table-group">
							<div class="sheet-table-row">
								<span class="sheet-table-row-name" data-i18n="combat-maneuver-defense-abbrv" title="Combat Maneuver Defense" data-i18n-title="combat-maneuver-defense-abbrv" data-i18n-aria-label="combat-maneuver-defense-abbrv">CMD</span>
								<span class="sheet-table-cell"><input title="@{CMD}" type="number" name="attr_CMD" value="10" class="sheet-calc" readonly></span>
								<span class="sheet-table-cell">= <span style="font-weight: bold">10</span> +</span>
								<span class="sheet-table-cell">
									<input name="attr_hd_not_bab" type="checkbox" value="1" class="sheet-sect-show sheet-sect-show-inverse" role="presentation" data-i18n-aria-label="hd-not-bab-title" />
									<input class="sheet-sect-inverse sheet-calc" title="@{bab}" type="number" name="attr_bab" value="0" readonly>
									<input class="sheet-sect sheet-calc" title="@{level}" type="number" name="attr_level" value="0" readonly>
								</span>
								<span class="sheet-table-cell sheet-ability-column">
									<select title="@{CMD-ability1}" name="attr_CMD-ability1" class="sheet-select-small">
										<option value="( ((@{STR-mod} + [[ @{max-dex-source} ]]) - abs(@{STR-mod} - [[ @{max-dex-source} ]])) / 2 )" data-i18n="strength-abbrv-default" selected>&#8226;STR</option>
										<option value="( ((@{DEX-mod} + [[ @{max-dex-source} ]]) - abs(@{DEX-mod} - [[ @{max-dex-source} ]])) / 2 )" data-i18n="dexterity-abbrv">DEX</option>
										<option value="( ((@{CON-mod} + [[ @{max-dex-source} ]]) - abs(@{CON-mod} - [[ @{max-dex-source} ]])) / 2 )" data-i18n="constitution-abbrv">CON</option>
										<option value="( ((@{INT-mod} + [[ @{max-dex-source} ]]) - abs(@{INT-mod} - [[ @{max-dex-source} ]])) / 2 )" data-i18n="intelligence-abbrv">INT</option>
										<option value="( ((@{WIS-mod} + [[ @{max-dex-source} ]]) - abs(@{WIS-mod} - [[ @{max-dex-source} ]])) / 2 )" data-i18n="wisdom-abbrv">WIS</option>
										<option value="( ((@{CHA-mod} + [[ @{max-dex-source} ]]) - abs(@{CHA-mod} - [[ @{max-dex-source} ]])) / 2 )" data-i18n="charisma-abbrv">CHA</option>
									</select>
								</span>
								<span class="sheet-table-cell"><input title="@{CMD-STR}" type="number" name="attr_CMD-STR" value="0" class="sheet-calc" readonly></span>
								<span class="sheet-table-cell sheet-ability-column">
									<input type="checkbox" value="1" name="attr_unlock_def_ability" class="sheet-sect-show sheet-sect-show-inverse" />
									<select title="@{AC-ability}" name="attr_AC-ability" class="sheet-select-small sheet-sect-inverse">
										<option value="( ((@{STR-mod} + [[ @{max-dex-source} ]]) - abs(@{STR-mod} - [[ @{max-dex-source} ]])) / 2 )" data-i18n="strength-abbrv">STR</option>
										<option value="( ((@{DEX-mod} + [[ @{max-dex-source} ]]) - abs(@{DEX-mod} - [[ @{max-dex-source} ]])) / 2 )" data-i18n="dexterity-abbrv-default" selected>&#8226;DEX</option>
										<option value="( ((@{CON-mod} + [[ @{max-dex-source} ]]) - abs(@{CON-mod} - [[ @{max-dex-source} ]])) / 2 )" data-i18n="constitution-abbrv">CON</option>
										<option value="( ((@{INT-mod} + [[ @{max-dex-source} ]]) - abs(@{INT-mod} - [[ @{max-dex-source} ]])) / 2 )" data-i18n="intelligence-abbrv">INT</option>
										<option value="( ((@{WIS-mod} + [[ @{max-dex-source} ]]) - abs(@{WIS-mod} - [[ @{max-dex-source} ]])) / 2 )" data-i18n="wisdom-abbrv">WIS</option>
										<option value="( ((@{CHA-mod} + [[ @{max-dex-source} ]]) - abs(@{CHA-mod} - [[ @{max-dex-source} ]])) / 2 )" data-i18n="charisma-abbrv">CHA</option>
									</select>
									<select title="@{CMD-ability2}" name="attr_CMD-ability2" class="sheet-select-small sheet-sect">
										<option value="( ((@{STR-mod} + [[ @{max-dex-source} ]]) - abs(@{STR-mod} - [[ @{max-dex-source} ]])) / 2 )" data-i18n="strength-abbrv">STR</option>
										<option value="( ((@{DEX-mod} + [[ @{max-dex-source} ]]) - abs(@{DEX-mod} - [[ @{max-dex-source} ]])) / 2 )" data-i18n="dexterity-abbrv-default" selected>&#8226;DEX</option>
										<option value="( ((@{CON-mod} + [[ @{max-dex-source} ]]) - abs(@{CON-mod} - [[ @{max-dex-source} ]])) / 2 )" data-i18n="constitution-abbrv">CON</option>
										<option value="( ((@{INT-mod} + [[ @{max-dex-source} ]]) - abs(@{INT-mod} - [[ @{max-dex-source} ]])) / 2 )" data-i18n="intelligence-abbrv">INT</option>
										<option value="( ((@{WIS-mod} + [[ @{max-dex-source} ]]) - abs(@{WIS-mod} - [[ @{max-dex-source} ]])) / 2 )" data-i18n="wisdom-abbrv">WIS</option>
										<option value="( ((@{CHA-mod} + [[ @{max-dex-source} ]]) - abs(@{CHA-mod} - [[ @{max-dex-source} ]])) / 2 )" data-i18n="charisma-abbrv">CHA</option>
									</select>
								</span>
								<input type="hidden" name="attr_CMD-DEX" value="0">
								<input type="checkbox" name="attr_nodex-toggle" class="sheet-warn-mshow" value="1" />
								<input type="checkbox" name="attr_maxdex-toggle" class="sheet-warn-show" value="1" />
								<span class="sheet-table-cell sheet-highlight">
									<input type="checkbox" value="1" name="attr_unlock_def_ability" class="sheet-sect-show sheet-sect-show-inverse" />
									<input title="@{AC-ability-mod}" type="number" name="attr_AC-ability-display" value="0" class="sheet-calc sheet-sect-inverse" readonly>
									<input title="@{CMD-DEX}" type="number" name="attr_CMD-DEX-display" value="0" class="sheet-calc sheet-sect" readonly>
								</span>
								<span class="sheet-table-cell"><input title="@{CMD-size}" type="number" name="attr_CMD-size" value="0" class="sheet-calc" readonly></span>
								<span class="sheet-table-cell sheet-highlight"><input title="@{AC-dodge}" type="number" name="attr_AC-dodge" value="0"></span>
								<span class="sheet-table-cell"></span>
								<span class="sheet-table-cell"><input title="@{AC-deflect}" type="number" name="attr_AC-deflect" value="0"></span>
								<span class="sheet-table-cell"><input title="@{CMD-misc}" type="number" name="attr_CMD-misc" value="0"></span>
								<span class="sheet-table-cell"><input title="@{buff_CMD-total}" type="number" name="attr_buff_CMD-total" value="0" class="sheet-calc" readonly></span>
								<span class="sheet-table-cell"><input title="@{CMD-penalty}" type="number" name="attr_CMD-penalty" class="sheet-calc" readonly value="0" max="0"></span>
							</div>
							<div class="sheet-table-row">
								<span class="sheet-table-row-name" title="Flat-Footed Combat Maneuver Defense" data-i18n="flat-footed-combat-maneuver-defense-abbrv">FF CMD</span>
								<span class="sheet-table-cell"><input title="@{FF-CMD}" type="number" name="attr_FF-CMD" value="10" class="sheet-calc" readonly></span>
								<span class="sheet-table-cell">= <span style="font-weight: bold">10</span> +</span>
								<span class="sheet-table-cell">
									<input name="attr_hd_not_bab" type="checkbox" value="1" class="sheet-sect-show sheet-sect-show-inverse" role="presentation" data-i18n-aria-label="hd-not-bab-title" />
									<input class="sheet-sect-inverse sheet-calc" title="@{bab}" type="number" name="attr_bab" value="0" readonly>
									<input class="sheet-sect sheet-calc" title="@{level}" type="number" name="attr_level" value="0" readonly>
								</span>
								<span class="sheet-table-cell sheet-ability-column">
									<select title="@{CMD-ability1}" name="attr_CMD-ability1" class="sheet-select-small">
										<option value="( ((@{STR-mod} + [[ @{max-dex-source} ]]) - abs(@{STR-mod} - [[ @{max-dex-source} ]])) / 2 )" data-i18n="strength-abbrv-default" selected>&#8226;STR</option>
										<option value="( ((@{DEX-mod} + [[ @{max-dex-source} ]]) - abs(@{DEX-mod} - [[ @{max-dex-source} ]])) / 2 )" data-i18n="dexterity-abbrv">DEX</option>
										<option value="( ((@{CON-mod} + [[ @{max-dex-source} ]]) - abs(@{CON-mod} - [[ @{max-dex-source} ]])) / 2 )" data-i18n="constitution-abbrv">CON</option>
										<option value="( ((@{INT-mod} + [[ @{max-dex-source} ]]) - abs(@{INT-mod} - [[ @{max-dex-source} ]])) / 2 )" data-i18n="intelligence-abbrv">INT</option>
										<option value="( ((@{WIS-mod} + [[ @{max-dex-source} ]]) - abs(@{WIS-mod} - [[ @{max-dex-source} ]])) / 2 )" data-i18n="wisdom-abbrv">WIS</option>
										<option value="( ((@{CHA-mod} + [[ @{max-dex-source} ]]) - abs(@{CHA-mod} - [[ @{max-dex-source} ]])) / 2 )" data-i18n="charisma-abbrv">CHA</option>
									</select>
								</span>
								<span class="sheet-table-cell"><input title="@{CMD-STR}" type="number" name="attr_CMD-STR" value="0" class="sheet-calc" readonly></span>
								<span class="sheet-table-cell sheet-ability-column">
									<input type="checkbox" value="1" name="attr_unlock_def_ability" class="sheet-sect-show sheet-sect-show-inverse" />
									<input type="checkbox" value="1" name="attr_uncanny_dodge" class="sheet-nextitem-show sheet-noshow" />
									<select title="@{AC-ability}" name="attr_AC-ability" class="sheet-select-small sheet-sect-inverse sheet-nextitem">
										<option value="( ((@{STR-mod} + [[ @{max-dex-source} ]]) - abs(@{STR-mod} - [[ @{max-dex-source} ]])) / 2 )" data-i18n="strength-abbrv">STR</option>
										<option value="( ((@{DEX-mod} + [[ @{max-dex-source} ]]) - abs(@{DEX-mod} - [[ @{max-dex-source} ]])) / 2 )" data-i18n="dexterity-abbrv-default" selected>&#8226;DEX</option>
										<option value="( ((@{CON-mod} + [[ @{max-dex-source} ]]) - abs(@{CON-mod} - [[ @{max-dex-source} ]])) / 2 )" data-i18n="constitution-abbrv">CON</option>
										<option value="( ((@{INT-mod} + [[ @{max-dex-source} ]]) - abs(@{INT-mod} - [[ @{max-dex-source} ]])) / 2 )" data-i18n="intelligence-abbrv">INT</option>
										<option value="( ((@{WIS-mod} + [[ @{max-dex-source} ]]) - abs(@{WIS-mod} - [[ @{max-dex-source} ]])) / 2 )" data-i18n="wisdom-abbrv">WIS</option>
										<option value="( ((@{CHA-mod} + [[ @{max-dex-source} ]]) - abs(@{CHA-mod} - [[ @{max-dex-source} ]])) / 2 )" data-i18n="charisma-abbrv">CHA</option>
									</select>
									<select title="@{CMD-ability}" name="attr_CMD-ability" class="sheet-select-small sheet-sect">
										<option value="0" data-i18n="none-default" selected>&#8226;None</option>
										<option value="( ((@{STR-mod} + [[ @{max-dex-source} ]]) - abs(@{STR-mod} - [[ @{max-dex-source} ]])) / 2 )" data-i18n="strength-abbrv">STR</option>
										<option value="( ((@{DEX-mod} + [[ @{max-dex-source} ]]) - abs(@{DEX-mod} - [[ @{max-dex-source} ]])) / 2 )" data-i18n="dexterity-abbrv">DEX</option>
										<option value="( ((@{CON-mod} + [[ @{max-dex-source} ]]) - abs(@{CON-mod} - [[ @{max-dex-source} ]])) / 2 )" data-i18n="constitution-abbrv">CON</option>
										<option value="( ((@{INT-mod} + [[ @{max-dex-source} ]]) - abs(@{INT-mod} - [[ @{max-dex-source} ]])) / 2 )" data-i18n="intelligence-abbrv">INT</option>
										<option value="( ((@{WIS-mod} + [[ @{max-dex-source} ]]) - abs(@{WIS-mod} - [[ @{max-dex-source} ]])) / 2 )" data-i18n="wisdom-abbrv">WIS</option>
										<option value="( ((@{CHA-mod} + [[ @{max-dex-source} ]]) - abs(@{CHA-mod} - [[ @{max-dex-source} ]])) / 2 )" data-i18n="charisma-abbrv">CHA</option>
									</select>
								</span>
								<input type="hidden" name="attr_FF-CMD-DEX" value="0" />
								<input type="checkbox" name="attr_nodex-toggle" class="sheet-warn-mshow" value="1">
								<input type="checkbox" name="attr_maxdex-toggle" class="sheet-warn-show" value="1">
								<span class="sheet-table-cell sheet-highlight">
									<input type="checkbox" value="1" name="attr_unlock_def_ability" class="sheet-sect-show sheet-sect-show-inverse" />
									<input type="checkbox" value="1" name="attr_uncanny_dodge" class="sheet-nextitem-show sheet-noshow" />
									<input title="@{AC-ability-mod}" type="number" name="attr_AC-ability-display" value="0" class="sheet-calc sheet-sect-inverse sheet-nextitem" readonly>
									<input title="@{FF-CMD-DEX}" type="number" name="attr_FF-CMD-DEX-display" value="0" class="sheet-calc sheet-sect" readonly />
								</span>
								<span class="sheet-table-cell"><input title="@{CMD-size}" type="number" name="attr_CMD-size" value="0" class="sheet-calc" readonly></span>
								<span class="sheet-table-cell sheet-highlight">
									<input name="attr_uncanny_cmd_dodge" type="checkbox" value="1" class="sheet-sect-show sheet-noshow" style="display:none;" />
									<input name="attr_uncanny_dodge" type="checkbox" value="1" class="sheet-sect-show sheet-noshow" style="display:none;" />
									<input class="sheet-sect" title="@{AC-dodge}" type="number" name="attr_AC-dodge" value="0" />
								</span>
								<span class="sheet-table-cell"></span>
								<span class="sheet-table-cell"><input title="@{AC-deflect}" type="number" name="attr_AC-deflect" value="0"></span>
								<span class="sheet-table-cell"><input title="@{CMD-misc}" type="number" name="attr_CMD-misc" value="0"></span>
								<span class="sheet-table-cell"><input title="@{buff_CMD-total}" type="number" name="attr_buff_CMD-total" value="0" class="sheet-calc" readonly></span>
								<span class="sheet-table-cell"><input title="@{CMD-penalty}" type="number" name="attr_CMD-penalty" class="sheet-calc" readonly value="0"></span>
							</div>
						</div>
					</div>
				</div>
				<div class="sheet-cheat"></div>
				<div class="sheet-col sheet-col1 sheet-half-readonly">
					<input class="sheet-showarrow sheet-h2arrow" type="checkbox" name="attr_armor-shield-show" data-i18n-aria-label="armor-shield" title="Click to expand" data-i18n-title="showsect-cmd" value="1" checked />
					<h2 class="sheet-clickheader sheet-showsect"><label title="Click to expand" data-i18n-title="showsect-cmd" data-i18n-aria-label="showsect-cmd" data-i18n="armor-and-shield">Armor and Shield</label></h2>
					<div class="sheet-cheat"></div>
					<div class="sheet-h2-section sheet-table sheet-armor-shield">
						<span class="sheet-secondary-table-name" data-i18n="armor-and-shield">Armor and Shield</span>
						<input type="checkbox" class="sheet-subsect-show sheet-noshow" name="attr_use_spells" value="1"  />
						<div class="sheet-table-group-head">
							<div class="sheet-table-row">
								<span class="sheet-table-header sheet-entry-10p"><span data-i18n="equipment-abbrv" data-i18n-title="equipped-title" data-i18n-aria-label="equipped-title" title="Select which armor and shield are equipped.">Equip</span></span>
								<span class="sheet-table-header sheet-entry-28p" data-i18n="armor-shield-name">Armor or Shield Name</span>
								<span class="sheet-table-header sheet-entry-10p" data-i18n="armor-class-abbrv">AC</span>
								<span class="sheet-table-header sheet-entry-10p" data-i18n="enhancement-abbrv">Enh</span>
								<span class="sheet-table-header sheet-entry-10p" data-i18n="maximum-dexterity-bonus-abbrv">Max Dex</span>
								<span class="sheet-table-header sheet-entry-10p" data-i18n="armor-check-penalty-abbrv">ACP</span>
								<span class="sheet-table-header sheet-entry-10p sheet-nowrap sheet-sect" data-i18n="spell-failure">Spell Fail</span>
								<span class="sheet-table-header sheet-entry-10p sheet-hide-readonly" data-i18n-title="armor-type" data-i18n-aria-label="armor-type" data-i18n="type">Type</span>
								<span class="sheet-table-header sheet-entry-10p sheet-hide-readonly" data-i18n-title="non-proficient-armor-title" data-i18n-aria-label="non-proficient-armor-title" data-i18n="proficiency-abbrv">Prof</span>
							</div>
						</div>
						<div class="sheet-table-group">
							<div class="sheet-table-row">
								<span class="sheet-table-cell"><input title="@{armor3-equipped}" type="checkbox" class="sheet-boldlabel-check" name="attr_armor3-equipped" value="1" checked /></span>
								<span class="sheet-table-cell"><input title="@{armor3}" type="text" name="attr_armor3" value="" placeholder="Set on Inventory" data-i18n-placeholder="set-on-inventory" class="sheet-detail-medium sheet-calc" readonly /></span>
								<span class="sheet-table-cell"><input title="@{armor3-acbonus}" type="number" name="attr_armor3-acbonus" value="0" min="0" class="sheet-calc" readonly /></span>
								<span class="sheet-table-cell"><input title="@{armor3-enhance}" type="number" name="attr_armor3-enhance" value="0" min="0" class="sheet-calc" readonly /></span>
								<span class="sheet-table-cell"><input title="@{armor3-max-dex}" type="text" name="attr_armor3-max-dex" value="-" class="sheet-number sheet-calc" readonly /></span>
								<span class="sheet-table-cell"><input title="@{armor3-acp}" type="number" name="attr_armor3-acp" value="0" max="0" class="sheet-calc" readonly /></span>
								<span class="sheet-table-cell sheet-nowrap sheet-sect"><input title="@{armor3-spell-fail}" type="number" name="attr_armor3-spell-fail" value="0" min="0" max="100" class="sheet-calc" readonly />&#37;</span>
								<span class="sheet-table-cell sheet-hide-readonly">
									<input type="checkbox" name="attr_armor3-type" value="Light" class="sheet-nextitem-show" /><span class="sheet-nextitem" data-i18n="light">Light</span>
									<input type="checkbox" name="attr_armor3-type" value="Medium" class="sheet-nextitem-show" /><span class="sheet-nextitem" data-i18n="medium">Medium</span>
									<input type="checkbox" name="attr_armor3-type" value="Heavy" class="sheet-nextitem-show" /><span class="sheet-nextitem" data-i18n="heavy">Heavy</span>
								</span>
								<span class="sheet-table-cell sheet-hide-readonly">
									<input type="checkbox" value="1" name="attr_armor3-proficiency" class="sheet-sect-show sheet-sect-show-inverse">
									<span class="sheet-sect-inverse" title="@{armor3-proficiency}" data-i18n="yes">Yes</span>
									<span class="sheet-sect" title="@{armor3-proficiency}" data-i18n="no">No</span>
								</span>
							</div>
							<div class="sheet-table-row">
								<span class="sheet-table-cell"><input title="@{shield3-equipped}" type="checkbox" class="sheet-boldlabel-check" name="attr_shield3-equipped" value="1" checked /></span>
								<span class="sheet-table-cell"><input title="@{shield3}" type="text" name="attr_shield3" value="" placeholder="Set on Inventory" data-i18n-placeholder="set-on-inventory" class="sheet-detail-medium sheet-calc" readonly /></span>
								<span class="sheet-table-cell"><input title="@{shield3-acbonus}" type="number" name="attr_shield3-acbonus" value="0" min="0" class="sheet-calc" readonly /></span>
								<span class="sheet-table-cell"><input title="@{shield3-enhance}" type="number" name="attr_shield3-enhance" value="0" min="0" class="sheet-calc" readonly /></span>
								<span class="sheet-table-cell"><input title="@{shield3-max-dex}" type="text" name="attr_shield3-max-dex" value="-" class="sheet-calc sheet-number" readonly /></span>
								<span class="sheet-table-cell"><input title="@{shield3-acp}" type="number" name="attr_shield3-acp" value="0" max="0" class="sheet-calc" readonly /></span>
								<span class="sheet-table-cell sheet-nowrap sheet-sect"><input title="@{shield3-spell-fail}" type="number" name="attr_shield3-spell-fail" value="0" min="0" max="100" class="sheet-calc" readonly />&#37;</span>
								<span class="sheet-table-cell sheet-hide-readonly">
									<input type="checkbox" name="attr_shield3-type" value="Light" class="sheet-nextitem-show" /><span class="sheet-nextitem" title="@{shield3-type}" data-i18n="light">Light</span>
									<input type="checkbox" name="attr_shield3-type" value="Heavy" class="sheet-nextitem-show" /><span class="sheet-nextitem" title="@{shield3-type}" data-i18n="heavy">Heavy</span>
									<input type="checkbox" name="attr_shield3-type" value="Tower Shield" class="sheet-nextitem-show" /><span class="sheet-nextitem" title="@{shield3-type}" data-i18n="tower">Tower</span>
								</span>
								<span class="sheet-table-cell sheet-hide-readonly">
									<input type="checkbox" value="1" name="attr_shield3-proficiency" class="sheet-sect-show sheet-sect-show-inverse">
									<span class="sheet-sect-inverse" title="@{shield3-proficiency}" data-i18n="yes">Yes</span>
									<span class="sheet-sect" title="@{shield3-proficiency}"  data-i18n="no">No</span>
								</span>
							</div>
						</div>
					</div>
					<div class="sheet-h2-section sheet-table sheet-armor-penalties sheet-medium-numbers">
						<input title="@{SpellFailureNote}" name="attr_SpellFailureNote" type="hidden" value="" />
						<input type="checkbox" class="sheet-subsect-show sheet-noshow" name="attr_use_spells" value="1"  />
						<span class="sheet-secondary-table-name" data-i18n="armor-penalties">Armor Penalties</span>
						<div class="sheet-table-row sheet-hide-readonly">
							<span class="sheet-table-header">&nbsp;</span>
							<span class="sheet-table-header">&nbsp;</span>
						</div>						
						<div class="sheet-table-row">
							<span class="sheet-table-cell sheet-right sheet-nowrap"><span data-i18n="armor-check-penalty-abbrv">ACP</span>:&nbsp;<input title="@{acp}" type="number" name="attr_acp" value="0" class="sheet-calc" style="max-width:3em;" readonly></span>
							<span class="sheet-table-cell sheet-right sheet-nowrap" style="padding-left:3px;"><span data-i18n="attack-penalty">Attack penalty</span>:&nbsp;<input title="@{acp-attack-mod}" type="number" name="attr_acp-attack-mod" value="0" class="sheet-calc" readonly /></span>
						</div>
						<div class="sheet-table-row">
							<span class="sheet-table-cell sheet-right sheet-nowrap"><span data-i18n-title="maximum-dexterity-title" data-i18n-aria-label="maximum-dexterity-title" data-i18n="maximum-dexterity-bonus-abbrv">Max Dex</span>:&nbsp;<input title="@{max-dex}" type="number" name="attr_max-dex" value="99" class="sheet-calc" style="max-width:3em;" readonly /></span>
							<label class="sheet-table-rollbuttoncell">
								<button style="width:100%;" class="sheet-nowrap" type="roll" title="%{selected|Spell-Fail-Check)" name="roll_Spell-Fail-Check" value="@{PC-whisper} @{spell-fail-macro}">&nbsp;
									<span style="vertical-align: middle;" data-i18n="spell-failure">Spell Fail</span>&nbsp;
									<span style="vertical-align: middle;" title="@{spell-fail}" name="attr_spell-fail"></span>
									<span>%</span>
								</button>
								<input title="@{spell-fail}" type="hidden" name="attr_spell-fail" value="0" class="sheet-calc" />
								<input type="hidden" name="attr_spell-fail-macro" value="&{template:pf_generic} @{toggle_accessible_flag} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_generic}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle}} {{name=^{spell-failure}}} {{^{spell-failure-chance}=[[ @{spell-fail} ]]&nbsp;%&nbsp;}} {{check=[[ 1d100cf<[[ @{spell-fail} ]]cs>[[ @{spell-fail}+1 ]] ]]&nbsp;%&nbsp;}} {{lefttext_6=@{SpellFailureNote}}}" />
							</label>
						</div>
					</div>
				</div>
				<div class="sheet-cheat"></div>
				<input class="sheet-showarrow sheet-h2arrow" type="checkbox" name="attr_defense-notes-show" data-i18n-aria-label="defense-notes" title="Click to expand" data-i18n-title="showsect-cmd" value="1" checked />
				<h2 class="sheet-clickheader sheet-showsect"><label title="Click to expand" data-i18n-title="showsect-cmd" data-i18n-aria-label="showsect-cmd" data-i18n="special-defense-notes">Special Defenses and Notes</label></h2>
				<span class="sheet-nontable-name" data-i18n="special-defense-notes">Special Defenses and Notes </span>
				<div class="sheet-h2-section sheet-table sheet-defense-notes">
					<div class="sheet-table ">
						<span class="sheet-table-name sheet-secondary-table-name" data-i18n="defense-notes">Defense Notes</span>
						<div class="sheet-table-group-head">
							<span class="sheet-table-header sheet-show-readonly" data-i18n="armor-notes">Armor Notes</span>
							<span class="sheet-table-header sheet-show-readonly" data-i18n="combat-maneuver-defense-notes">CMD Notes</span>
							<span class="sheet-table-header sheet-show-readonly" data-i18n="defense-notes">Defense Notes</span>
						</div>
						<div class="sheet-table-row">
							<div class="sheet-table-cell sheet-notes-cell">
								<div class="sheet-table">								
									<div class="sheet-table-row">
										<span class="sheet-table-cell sheet-left sheet-notes-cell"><textarea class="sheet-notes" title="@{Armor-notes}" name="attr_Armor-notes" placeholder="Put notes about context-sensitive AC bonuses here." data-i18n-placeholder="armor-notes-place"></textarea></span>
									</div>
								</div>
							</div>
							<div class="sheet-table-cell sheet-notes-cell">
								<div class="sheet-table">								
									<div class="sheet-table-row">
										<span class="sheet-table-cell sheet-left sheet-notes-cell"><textarea class="sheet-notes" title="@{cmd-notes}" name="attr_cmd-notes" placeholder="Put notes about context-sensitive CMD bonuses here." data-i18n-placeholder="combat-maneuver-notes-place"></textarea></span>
									</div>
								</div>
							</div>
							<div class="sheet-table-cell sheet-notes-cell">
								<div class="sheet-table">								
									<div class="sheet-table-row">
										<span class="sheet-table-cell sheet-left sheet-notes-cell"><textarea class="sheet-notes" title="@{defense-notes}" name="attr_defense-notes" placeholder="Put notes about context-sensitive defense bonuses here." data-i18n-placeholder="defense-notes-place"></textarea></span>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
				<div class="sheet-h2-section sheet-special-defenses sheet-wide-readonly">
					<div class="sheet-table">
						<span class="sheet-table-name sheet-secondary-table-name sheet-show-readonly" data-i18n="special-defense">Special Defenses</span>
						<div class="sheet-table-group">
							<div class="sheet-table-row">
								<span class="sheet-table-header sheet-entry-12p-shrink" title="Damage Reduction: The amount of damage ignored and the type of weapon that negates the ability. (e.g. 5/silver)" data-i18n-title="damage-resistance-title" data-i18n-aria-label="damage-resistance-title" data-i18n="damage-resistance-abbrv">DR</span>
								<span class="sheet-table-header sheet-macro-text-inline sheet-hide-readonly sheet-super sheet-note-a" title="Spell Resistance: Avoids the effects of spells and spell-like abilities that directly affect it. Caster Level check vs SR to negate resistance." data-i18n-title="spell-resistance-title" data-i18n-aria-label="spell-resistance-title" data-i18n="spell-resistance-abbrv2">Spell Resist</span>
								<span class="sheet-table-header sheet-number sheet-header-expand" title="Spell Resistance Modifier that is the result of the macro formula." data-i18n="spell-resist-bonus-abbrv">SR Bonus</span>
								<span class="sheet-table-header" title="Ignores some damage of the indicated type each time it takes damage of that kind. (e.g. acid 10)" data-i18n-title="resistances-title" data-i18n-aria-label="resistances-title" data-i18n="resistance">Resistances</span>
								<span class="sheet-table-header" title="Takes no damage from listed sources. (e.g. acid, fire, paralysis)" data-i18n-title="immunities-title" data-i18n-aria-label="immunities-title" data-i18n="immunities">Immunities</span>
								<span class="sheet-table-header" title="Adverse conditions may apply if applicable. (e.g. sunlight powerlessness/staggered)" data-i18n-title="weaknesses-title" data-i18n-aria-label="weaknesses-title" data-i18n="weaknesses">Weaknesses</span>
							</div>
							<div class="sheet-table-row">
								<span class="sheet-table-cell"><input title="@{DR}" type="text" name="attr_DR" placeholder="Damage Reduction" data-i18n-placeholder="damage-reduction" value=""/></span>
								<input type="checkbox" name="attr_SR_error" class="sheet-error-mshow" value="1" />
								<span class="sheet-table-cell sheet-hide-readonly sheet-macro-text-inline sheet-highlight"><textarea class="sheet-inline-textarea" title="@{SR-macro-text}" name="attr_SR-macro-text" placeholder="#/Equation" data-i18n-placeholder="equation-macro-place"></textarea></span>
								<span class="sheet-table-cell sheet-number sheet-left sheet-highlight"><input title="@{SR}" type="number" name="attr_SR" value="0" class="sheet-calc" readonly /></span>
								<span class="sheet-table-cell"><textarea title="@{resistances}" name="attr_resistances" class="sheet-inline-textarea" placeholder="Resistances" data-i18n-placeholder="resistances"></textarea></span>
								<span class="sheet-table-cell"><textarea title="@{immunities}" name="attr_immunities" class="sheet-inline-textarea" placeholder="Immunities" data-i18n-placeholder="immunities"></textarea></span>
								<span class="sheet-table-cell"><textarea title="@{weaknesses}" name="attr_weaknesses" class="sheet-inline-textarea" placeholder="Weaknesses" data-i18n-placeholder="weaknesses"></textarea></span>
							</div>
						</div>
					</div>
				</div>
			</div>
			<div class="sheet-section3 sheet-section sheet-section-attacks" role="region" aria-label="Attacks" data-i18n-aria-label="attacks">
				<h1 class="sheet-selected-tabtitle" data-i18n="attacks">Attacks</h1>
				<div class="sheet-cheat sheet-show-readonly"></div>
				<input class="sheet-showarrow sheet-h2arrow" type="checkbox" name="attr_attack-bonuses-show" data-i18n-aria-label="attack-and-combat-maneuver-bonuses" title="Click to expand" data-i18n-title="showsect-cmd" value="1" checked />
				<h2 class="sheet-clickheader sheet-showsect sheet-attack-grid"><label title="Click to expand" data-i18n-title="showsect-cmd" data-i18n-aria-label="showsect-cmd" data-i18n="attack-and-combat-maneuver-bonuses">Attack and Combat Maneuver Bonuses</label></h2>
				<div class="sheet-h2-section sheet-table sheet-attack-grid sheet-hasexpandrows">
					<span class="sheet-table-name" data-i18n="attack-and-combat-maneuver-bonuses">Attack and Combat Maneuver Bonuses</span>
					<div class="sheet-table-group-head">
						<span class="sheet-table-header" style="width:11em;" data-i18n="attack-type">Attack Type</span>
						<span class="sheet-table-header" data-i18n="total">Total</span>
						<span class="sheet-table-header sheet-divider">&nbsp;</span>
						<span class="sheet-table-header" data-i18n="base-attack-bonus-abbrv">BAB</span>
						<span class="sheet-table-header sheet-divider">&nbsp;</span>
						<span class="sheet-table-header sheet-ability-column" style="width:8%;" data-i18n="ability">Ability</span>
						<span class="sheet-table-header" data-i18n="modifier-abbrv">&nbsp;Mod</span>
						<span class="sheet-table-header sheet-divider">&nbsp;</span>
						<span class="sheet-table-header" data-i18n="size" data-i18n-title="size-modifier-attack" data-i18n-aria-label="size-modifier-attack">Size</span>
						<span class="sheet-table-header sheet-divider">&nbsp;</span>
						<span class="sheet-table-header" data-i18n="miscellaneous-abbrv">Misc</span>
						<span class="sheet-table-header sheet-divider">&nbsp;</span>
						<span class="sheet-table-header" data-i18n="buff">Buff</span>
						<span class="sheet-table-header sheet-divider">&nbsp;</span>
						<span class="sheet-table-header" data-i18n-title="condition-description" data-i18n-aria-label="condition-description" data-i18n="condition-abbrv">Cond</span>
						<span class="sheet-table-header sheet-left-border" data-i18n="confirm-critical-bonus-abbrv" data-i18n-title="crit-confirmation-bonus" data-i18n-aria-label="crit-confirmation-bonus">Crit Conf</span>
						<span class="sheet-table-header" style="width:18%" data-i18n="description">Description</span>
					</div>
					<div class="sheet-table-group">
						<div class="sheet-table-row">
							<span class="sheet-table-cell">
								<input type="checkbox" class="sheet-sect-show sheet-sect-show-inverse" name="attr_is_npc" value="1" role="presentation" />
								<button class="sheet-text-button sheet-sect-inverse" type="roll" title="%{selected|Melee-Attack-Roll}" name="roll_Melee-Attack-Roll" value="@{PC-whisper} @{Melee-Attack-macro}">&nbsp;<span style="vertical-align: middle;" data-i18n="melee">Melee</span></button>
								<button class="sheet-text-button sheet-sect" type="roll" title="%{selected|npc-Melee-Attack-Roll}" name="roll_npc-Melee-Attack-Roll" value="@{NPC-whisper} @{Melee-Attack-macro}">&nbsp;<span style="vertical-align: middle;" data-i18n="melee">Melee</span></button>
								<input type="hidden" name="attr_Melee-Attack-macro" value="&{template:pf_attack} @{toggle_attack_accessible} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_attack-melee}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle}} {{name=^{melee-attack}}} {{check=[[ 1d20 + [[ @{attk-melee} + @{global_attack_macro_insert} + @{global_melee_macro_insert} ]] ]]}} {{description=@{attk_melee_desc}}}" />
							</span>
							<span class="sheet-table-cell"><input title="@{attk-melee}" type="number" name="attr_attk-melee" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-divider">=</span>
							<span class="sheet-table-cell"><input title="@{bab}" type="number" name="attr_bab" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-divider">+</span>
							<span class="sheet-table-cell sheet-ability-column">
								<select title="@{melee-ability}" name="attr_melee-ability" class="sheet-select-small">
									<option value="0" data-i18n="none">None</option>
									<option value="@{STR-mod}" data-i18n="strength-abbrv-default" selected>&#8226;STR</option>
									<option value="@{DEX-mod}" data-i18n="dexterity-abbrv">DEX</option>
									<option value="@{CON-mod}" data-i18n="constitution-abbrv">CON</option>
									<option value="@{INT-mod}" data-i18n="intelligence-abbrv">INT</option>
									<option value="@{WIS-mod}" data-i18n="wisdom-abbrv">WIS</option>
									<option value="@{CHA-mod}" data-i18n="charisma-abbrv">CHA</option>
								</select>
							</span>
							<span class="sheet-table-cell sheet-left"><input title="@{melee-ability-mod}" type="number" name="attr_melee-ability-mod" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-divider">+</span>
							<span class="sheet-table-cell"><input title="@{size}" type="number" name="attr_size" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-divider">+</span>
							<span class="sheet-table-cell"><input title="@{attk-melee-misc}" type="number" name="attr_attk-melee-misc" value="0" /></span>
							<span class="sheet-divider">+</span>
							<span class="sheet-table-cell"><input title="@{buff_Melee-total}" name="attr_buff_Melee-total" type="number" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-divider">+</span>
							<span class="sheet-table-cell"><input title="@{attk-penalty}" type="number" name="attr_attk-penalty" value="0" max="0" class="sheet-calc" readonly /></span>
							<span class="sheet-table-cell sheet-left-border"><input title="@{attk_melee_crit_conf}" type="number" name="attr_attk_melee_crit_conf" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{attk_melee_desc} : condition" type="text" name="attr_attk_melee_desc" value="" /></span>
						</div>
						<input type="checkbox" class="sheet-showarrow sheet-sect-show sheet-expand-arrow sheet-expand1" name="attr_atkm2_show" value="1" title="Click to expand" data-i18n-title="showsect-cmd" data-i18n-aria-label="showsect-cmd"><span class="sheet-showsect"></span>
						<div class="sheet-table-row sheet-sect">
							<span class="sheet-table-cell">
								<input type="checkbox" class="sheet-sect-show sheet-sect-show-inverse" name="attr_is_npc" value="1" role="presentation" />
								<button class="sheet-text-button sheet-sect-inverse" type="roll" title="%{selected|Melee2-Attack-Roll} Alternate ability melee attack, for example: Weapon Finesse based attacks" name="roll_Melee2-Attack-Roll" value="@{PC-whisper} @{Melee2-Attack-macro}">&nbsp;<span style="vertical-align: middle;" value="@{attk_melee2_note}">Melee2</span></button>
								<button class="sheet-text-button sheet-sect" type="roll" title="%{selected|npc-Melee2-Attack-Roll} Alternate ability melee attack, for example: Weapon Finesse based attacks" name="roll_npc-Melee2-Attack-Roll" value="@{NPC-whisper} @{Melee2-Attack-macro}">&nbsp;<span style="vertical-align: middle;" value="@{attk_melee2_note}">Melee2</span></button>
								<input type="hidden" name="attr_Melee2-Attack-macro" value="&{template:pf_attack} @{toggle_attack_accessible} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_attack-melee}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle}} {{name=^{melee2-attack}}} {{check=[[ 1d20 + [[ @{attk-melee2} + @{global_attack_macro_insert} + @{global_melee_macro_insert} ]] ]]}} {{description=@{attk_melee2_note}}}" />
							</span>
							<span class="sheet-table-cell"><input title="@{attk-melee2}" type="number" name="attr_attk-melee2" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-divider">=</span>
							<span class="sheet-table-cell"><input title="@{bab}" type="number" name="attr_bab" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-divider">+</span>
							<span class="sheet-table-cell">
								<select title="@{melee2-ability}" name="attr_melee2-ability" class="sheet-select-small">
									<option value="0" data-i18n="none-default">&#8226;None</option>
									<option value="@{STR-mod}" data-i18n="strength-abbrv" selected>STR</option>
									<option value="@{DEX-mod}" data-i18n="dexterity-abbrv" selected>DEX</option>
									<option value="@{CON-mod}" data-i18n="constitution-abbrv">CON</option>
									<option value="@{INT-mod}" data-i18n="intelligence-abbrv">INT</option>
									<option value="@{WIS-mod}" data-i18n="wisdom-abbrv">WIS</option>
									<option value="@{CHA-mod}" data-i18n="charisma-abbrv">CHA</option>
								</select>
							</span>
							<span class="sheet-table-cell sheet-left"><input title="@{melee2-ability-mod}" type="number" name="attr_melee2-ability-mod" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-divider">+</span>
							<span class="sheet-table-cell"><input title="@{size}" type="number" name="attr_size" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-divider">+</span>
							<span class="sheet-table-cell"><input title="@{attk-melee2-misc}" type="number" name="attr_attk-melee2-misc" value="0" /></span>
							<span class="sheet-divider">+</span>
							<span class="sheet-table-cell"><input title="@{buff_Melee-total}" name="attr_buff_Melee-total" type="number" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-divider">+</span>
							<span class="sheet-table-cell"><input title="@{attk-penalty}" type="number" name="attr_attk-penalty" value="0" max="0" class="sheet-calc" readonly /></span>
							<span class="sheet-table-cell sheet-left-border"><input title="@{attk_melee2_crit_conf}" type="number" name="attr_attk_melee2_crit_conf" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{attk_melee2_note}" type="text" name="attr_attk_melee2_note" value="Weapon Finesse" data-i18n-Placeholder="alternate-ability-melee-desc" Placeholder="Alternate ability melee attack" /></span>
						</div>
						<div class="sheet-table-row">
							<span class="sheet-table-cell">
								<input type="checkbox" class="sheet-sect-show sheet-sect-show-inverse" name="attr_is_npc" value="1" role="presentation" />
								<button class="sheet-text-button sheet-sect-inverse" type="roll" title="%{selected|Ranged-Attack-Roll}" name="roll_Ranged-Attack-Roll" value="@{PC-whisper} @{Ranged-Attack-macro}">&nbsp;<span style="vertical-align: middle;" data-i18n="ranged">Ranged</span></button>
								<button class="sheet-text-button sheet-sect" type="roll" title="%{selected|npc-Ranged-Attack-Roll}" name="roll_npc-Ranged-Attack-Roll" value="@{NPC-whisper} @{Ranged-Attack-macro}">&nbsp;<span style="vertical-align: middle;" data-i18n="ranged">Ranged</span></button>
								<input type="hidden" name="attr_Ranged-Attack-macro" value="&{template:pf_attack} @{toggle_attack_accessible} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_attack-ranged}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle}} {{name=^{ranged-attack}}} {{check=[[ 1d20 + [[ @{attk-ranged} + @{global_attack_macro_insert} + @{global_ranged_macro_insert} ]] ]]}} {{description=@{attk_ranged_desc}}}" />
							</span>
							<span class="sheet-table-cell"><input title="@{attk-ranged}" type="number" name="attr_attk-ranged" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-divider">=</span>
							<span class="sheet-table-cell"><input title="@{bab}" type="number" name="attr_bab" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-divider">+</span>
							<span class="sheet-table-cell sheet-ability-column">
								<select title="@{ranged-ability}" name="attr_ranged-ability" class="sheet-select-small">
									<option value="0" data-i18n="none">None</option>
									<option value="@{STR-mod}" data-i18n="strength-abbrv">STR</option>
									<option value="@{DEX-mod}" data-i18n="dexterity-abbrv-default" selected>&#8226;DEX</option>
									<option value="@{CON-mod}" data-i18n="constitution-abbrv">CON</option>
									<option value="@{INT-mod}" data-i18n="intelligence-abbrv">INT</option>
									<option value="@{WIS-mod}" data-i18n="wisdom-abbrv">WIS</option>
									<option value="@{CHA-mod}" data-i18n="charisma-abbrv">CHA</option>
								</select>
							</span>
							<span class="sheet-table-cell sheet-left"><input title="@{ranged-ability-mod}" type="number" name="attr_ranged-ability-mod" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-divider">+</span>
							<span class="sheet-table-cell"><input title="@{size}" type="number" name="attr_size" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-divider">+</span>
							<span class="sheet-table-cell"><input title="@{attk-ranged-misc}" type="number" name="attr_attk-ranged-misc" value="0" /></span>
							<span class="sheet-divider">+</span>
							<span class="sheet-table-cell"><input title="@{buff_Ranged-total}" type="number" name="attr_buff_Ranged-total" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-divider">+</span>
							<span class="sheet-table-cell"><input title="@{attk-penalty}" type="number" name="attr_attk-penalty" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-table-cell sheet-left-border"><input title="@{attk_ranged_crit_conf}" type="number" name="attr_attk_ranged_crit_conf" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{attk_ranged_desc} : condition" type="text" name="attr_attk_ranged_desc" value="" /></span>
						</div>
						<input type="checkbox" class="sheet-nextitem-show" name="attr_ranged_2_show" value="1" role="placeholder" />
						<div class="sheet-table-row sheet-ranged2">
							<span class="sheet-table-cell">
								<input type="checkbox" class="sheet-sect-show sheet-sect-show-inverse" name="attr_is_npc" value="1" role="presentation" />
								<button class="sheet-text-button sheet-sect-inverse" type="roll" title="%{selected|Ranged2-Attack-Roll}" name="roll_Ranged2-Attack-Roll" value="@{PC-whisper} @{Ranged2-Attack-macro}">&nbsp;<span style="vertical-align: middle;" data-i18n="ranged2">Ranged2</span></button>
								<button class="sheet-text-button sheet-sect" type="roll" title="%{selected|npc-Ranged2-Attack-Roll}" name="roll_npc-Ranged2-Attack-Roll" value="@{NPC-whisper} @{Ranged2-Attack-macro}">&nbsp;<span style="vertical-align: middle;" data-i18n="ranged2">Ranged2</span></button>
								<input type="hidden" name="attr_Ranged2-Attack-macro" value="&{template:pf_attack} @{toggle_attack_accessible} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_attack-ranged}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle}} {{name=^{ranged2-attack}}} {{check=[[ 1d20 + [[ @{attk-ranged2} + @{global_attack_macro_insert} + @{global_ranged_macro_insert} ]] ]]}} {{description=@{attk_ranged2_desc}}}" />
							</span>
							<span class="sheet-table-cell"><input title="@{attk-ranged2}" type="number" name="attr_attk-ranged2" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-divider">=</span>
							<span class="sheet-table-cell"><input title="@{bab}" type="number" name="attr_bab" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-divider">+</span>
							<span class="sheet-table-cell sheet-ability-column">
								<select title="@{ranged2-ability}" name="attr_ranged2-ability" class="sheet-select-small">
									<option value="0" data-i18n="none-default" selected>&#8226;None</option>
									<option value="@{STR-mod}" data-i18n="strength-abbrv">STR</option>
									<option value="@{DEX-mod}" data-i18n="dexterity-abbrv">DEX</option>
									<option value="@{CON-mod}" data-i18n="constitution-abbrv">CON</option>
									<option value="@{INT-mod}" data-i18n="intelligence-abbrv">INT</option>
									<option value="@{WIS-mod}" data-i18n="wisdom-abbrv">WIS</option>
									<option value="@{CHA-mod}" data-i18n="charisma-abbrv">CHA</option>
								</select>
							</span>
							<span class="sheet-table-cell sheet-left"><input title="@{ranged2-ability-mod}" type="number" name="attr_ranged2-ability-mod" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-divider">+</span>
							<span class="sheet-table-cell"><input title="@{size}" type="number" name="attr_size" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-divider">+</span>
							<span class="sheet-table-cell"><input title="@{attk-ranged2-misc}" type="number" name="attr_attk-ranged2-misc" value="0" /></span>
							<span class="sheet-divider">+</span>
							<span class="sheet-table-cell"><input title="@{buff_Ranged-total}" type="number" name="attr_buff_Ranged-total" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-divider">+</span>
							<span class="sheet-table-cell"><input title="@{attk-penalty}" type="number" name="attr_attk-penalty" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-table-cell sheet-left-border"><input title="@{attk_ranged2_crit_conf}" type="number" name="attr_attk_ranged2_crit_conf" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{attk_ranged2_desc}" type="text" name="attr_attk_ranged2_desc" value="" data-i18n-Placeholder="alternate-ability-ranged-desc" Placeholder="Alternate ability ranged attack" /></span>
						</div>
						<div class="sheet-table-row">
							<span class="sheet-table-cell">
								<input type="checkbox" class="sheet-sect-show sheet-sect-show-inverse" name="attr_is_npc" value="1" role="presentation" />
								<button class="sheet-text-button sheet-sect-inverse" type="roll" title="%{selected|CMB-Check}" name="roll_CMB-Check" value="@{PC-whisper} @{CMB-Check-macro}">&nbsp;<span  style="vertical-align: middle;" data-i18n="combat-maneuver-bonus-abbrv">CMB</span></button>
								<button class="sheet-text-button sheet-sect" type="roll" title="%{selected|npc-CMB-Check}" name="roll_npc-CMB-Check" value="@{NPC-whisper} @{CMB-Check-macro}">&nbsp;<span  style="vertical-align: middle;" data-i18n="combat-maneuver-bonus-abbrv">CMB</span></button>
								<input type="hidden" name="attr_CMB-Check-macro" value="&{template:pf_attack} @{toggle_attack_accessible} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_attack-cmb}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle}} {{name=^{combat-maneuver-bonus-abbrv}}} {{check=[[ 1d20 + [[ @{CMB} + @{global_attack_macro_insert} + @{global_cmb_macro_insert} ]] ]]}} {{description=@{attk_cmb_desc}}}" />
							</span>
							<span class="sheet-table-cell"><input title="@{CMB}" type="number" name="attr_CMB" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-divider">=</span>
							<span class="sheet-table-cell"><input title="@{bab}" type="number" name="attr_bab" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-divider">+</span>
							<span class="sheet-table-cell sheet-ability-column">
								<select title="@{CMB-ability}" name="attr_CMB-ability" class="sheet-select-small">
									<option value="0" data-i18n="none">None</option>
									<option value="@{STR-mod}" data-i18n="strength-abbrv-default" selected>&#8226;STR</option>
									<option value="@{DEX-mod}" data-i18n="dexterity-abbrv">DEX</option>
									<option value="@{CON-mod}" data-i18n="constitution-abbrv">CON</option>
									<option value="@{INT-mod}" data-i18n="intelligence-abbrv">INT</option>
									<option value="@{WIS-mod}" data-i18n="wisdom-abbrv">WIS</option>
									<option value="@{CHA-mod}" data-i18n="charisma-abbrv">CHA</option>
								</select>
							</span>
							<span class="sheet-table-cell sheet-left"><input title="@{CMB-ability-mod}" type="number" name="attr_CMB-ability-mod" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-divider">+</span>
							<span class="sheet-table-cell"><input title="@{CMD-size}" type="number" name="attr_CMD-size" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-divider">+</span>
							<span class="sheet-table-cell"><input title="@{attk-CMB-misc}" type="number" name="attr_attk-CMB-misc" value="0" /></span>
							<span class="sheet-divider">+</span>
							<span class="sheet-table-cell"><input title="@{buff_Melee-total}" name="attr_buff_Melee-total" type="number" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-divider">+</span>
							<span class="sheet-table-cell"><input title="@{attk-penalty}" type="number" name="attr_attk-penalty" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-table-cell sheet-left-border"><input title="@{attk_cmb_crit_conf}" type="number" name="attr_attk_cmb_crit_conf" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{attk_cmb_desc}" type="text" name="attr_attk_cmb_desc" value="" /></span>
						</div>
						<input type="checkbox" class="sheet-nextitem-show" name="attr_cmb_2_show" value="1" role="placeholder" />
						<div class="sheet-table-row sheet-cmb2">
							<span class="sheet-table-cell">
								<input type="checkbox" class="sheet-sect-show sheet-sect-show-inverse" name="attr_is_npc" value="1" role="presentation" />
								<button class="sheet-text-button sheet-sect-inverse" type="roll" title="%{selected|CMB2-Check}" name="roll_CMB2-Check" value="@{PC-whisper} @{CMB2-Check-macro}">&nbsp;<span style="vertical-align: middle;" data-i18n="combat-maneuver-bonus-abbrv2">Alt CMB</span></button>
								<button class="sheet-text-button sheet-sect" type="roll" title="%{selected|npc-CMB2-Check}" name="roll_npc-CMB2-Check" value="@{NPC-whisper} @{CMB2-Check-macro}">&nbsp;<span style="vertical-align: middle;" data-i18n="combat-maneuver-bonus-abbrv2">Alt CMB</span></button>
								<input type="hidden" name="attr_CMB2-Check-macro" value="&{template:pf_attack} @{toggle_attack_accessible} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_attack-cmb}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle}} {{name=^{combat-maneuver-bonus-abbrv2}}} {{check=[[ 1d20 + [[ @{CMB2} + @{global_attack_macro_insert} + @{global_cmb_macro_insert} ]] ]]}} {{description=@{attk_cmb2_desc}}}" />
							</span>
							<span class="sheet-table-cell"><input title="@{CMB2}" type="number" name="attr_CMB2" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-divider">=</span>
							<span class="sheet-table-cell"><input title="@{bab}" type="number" name="attr_bab" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-divider">+</span>
							<span class="sheet-table-cell sheet-ability-column">
								<select title="@{CMB2-ability}" name="attr_CMB2-ability" class="sheet-select-small">
									<option value="0" data-i18n="none-default" selected>&#8226;None</option>
									<option value="@{STR-mod}" data-i18n="strength-abbrv">STR</option>
									<option value="@{DEX-mod}" data-i18n="dexterity-abbrv">DEX</option>
									<option value="@{CON-mod}" data-i18n="constitution-abbrv">CON</option>
									<option value="@{INT-mod}" data-i18n="intelligence-abbrv">INT</option>
									<option value="@{WIS-mod}" data-i18n="wisdom-abbrv">WIS</option>
									<option value="@{CHA-mod}" data-i18n="charisma-abbrv">CHA</option>
								</select>
							</span>
							<span class="sheet-table-cell sheet-left"><input title="@{CMB2-ability-mod}" type="number" name="attr_CMB2-ability-mod" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-divider">+</span>
							<span class="sheet-table-cell"><input title="@{CMD-size}" type="number" name="attr_CMD-size" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-divider">+</span>
							<span class="sheet-table-cell"><input title="@{attk-CMB2-misc}" type="number" name="attr_attk-CMB2-misc" value="0" /></span>
							<span class="sheet-divider">+</span>
							<span class="sheet-table-cell"><input title="@{buff_Melee-total}" name="attr_buff_Melee-total" type="number" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-divider">+</span>
							<span class="sheet-table-cell"><input title="@{attk-penalty}" type="number" name="attr_attk-penalty" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-table-cell sheet-left-border"><input title="@{attk_cmb2_crit_conf}" type="number" name="attr_attk_cmb2_crit_conf" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{attk_cmb2_desc}" type="text" name="attr_attk_cmb2_desc" value="" data-i18n-Placeholder="alternate-ability-cmb-desc" Placeholder="Alternate ability combat maneuver" /></span>
						</div>
						<div class="sheet-table-row">
							<span class="sheet-table-row-name sheet-center"><span class="sheet-rowname-button" style="font-size:1.3em;font-weight:normal;" data-i18n="damage">Damage</span></span>
							<span class="sheet-table-cell"><input type="number" title="@{DMG-mod}" name="attr_DMG-mod" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-divider">=</span>
							<span class="sheet-table-cell"></span>
							<span class="sheet-divider"></span>
							<span class="sheet-table-cell"></span>
							<span class="sheet-table-cell"></span>
							<span class="sheet-table-cell"></span>
							<span class="sheet-table-cell"></span>
							<span class="sheet-table-cell"></span>
							<span class="sheet-table-cell"></span>
							<span class="sheet-divider"></span>
							<span class="sheet-table-cell"><input title="@{buff_DMG-total}" name="attr_buff_DMG-total" type="number" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-divider">-</span>
							<span class="sheet-table-cell"><input title="@{dmg-penalty}" type="text" name="attr_dmg-penalty" value="@{condition-Sickened}" disabled readonly class="sheet-number sheet-calc" /></span>
							<span class="sheet-table-cell sheet-left-border"></span>
							<span class="sheet-table-cell"></span>
						</div>
					</div>
				</div>
				<div class="sheet-cheat"></div>
				<input class="sheet-showarrow sheet-h2arrow" type="checkbox" name="attr_attack-notes-show" data-i18n-aria-label="attack-notes" title="Click to expand" data-i18n-title="showsect-cmd" value="1" checked />
				<h2 class="sheet-clickheader sheet-showsect"><label title="Click to expand" data-i18n-title="showsect-cmd" data-i18n-aria-label="showsect-cmd" data-i18n="attack-notes">Attack Notes</label></h2>
				<div class="sheet-h2-section sheet-attack-options sheet-hide-readonly">
					<div class="sheet-table sheet-options sheet-named">
						<span class="sheet-table-name" data-i18n="include-attack-notes">Include notes or images in attack rolls? Notes and image will be mapped to attack type.</span>
						<div class="sheet-table-row">
							<span class="sheet-table-cell sheet-small-label sheet-nowrap"><label><input type="checkbox" class="sheet-boldlabel-check" name="attr_toggle_attack_melee_notes" value="1" title="@{toggle_attack_melee_notes}" checked><b title="Include Melee attack notes." data-i18n-title="options-attacks-melee-title" data-i18n-aria-label="options-attacks-melee-title" data-i18n="melee-notes"> Melee Notes</b></label></span>
							<span class="sheet-table-cell sheet-small-label sheet-nowrap"><label><input type="checkbox" class="sheet-boldlabel-check" name="attr_toggle_attack_ranged_notes" value="1" title="@{toggle_attack_ranged_notes}" checked><b title="Include Ranged attack notes." data-i18n-title="options-attacks-ranged-title" data-i18n-aria-label="options-attacks-ranged-title" data-i18n="ranged-notes"> Ranged Notes</b></label></span>
							<span class="sheet-table-cell sheet-small-label sheet-nowrap"><label><input type="checkbox" class="sheet-boldlabel-check" name="attr_toggle_attack_CMB_notes" value="1" title="@{toggle_attack_CMB_notes}" checked><b title="Include CMB notes." data-i18n-title="options-attacks-cmb-title" data-i18n-aria-label="options-attacks-cmb-title" data-i18n="combat-maneuver-bonus-notes"> CMB Notes</b></label></span>
							<span class="sheet-table-cell sheet-small-label sheet-nowrap"><label><input type="checkbox" class="sheet-boldlabel-check" name="attr_toggle_attack_attack_notes" value="1" title="@{toggle_attack_attack_notes}" checked><b title="Include Attack notes." data-i18n-title="options-attacks-attack-title" data-i18n-aria-label="options-attacks-attack-title" data-i18n="attack-notes"> Attack Notes</b></label></span>
							<span class="sheet-table-cell sheet-small-label sheet-nowrap"><label><input type="checkbox" class="sheet-boldlabel-check" name="attr_toggle_attack_header_image" value="1" title="@{toggle_attack_header_image}" checked><b title="Include a header image." data-i18n-title="options-attacks-header-title" data-i18n-aria-label="options-attacks-header-title" data-i18n="header-image">Header Image</b></label></span>
							<span class="sheet-table-cell sheet-small-label sheet-nowrap"><label><input type="checkbox" class="sheet-boldlabel-check" name="attr_toggle_attack_accessible" value="@{var_accessible_flag}" title="@{toggle_attack_accessible}"><b title="Use simple accessible template for attacks." data-i18n-title="options-attacks-accessible-title" data-i18n-aria-label="options-attacks-accessible-title" data-i18n="simple-template">Simple Template</b></label></span>
						</div>
					</div>
				</div>
				<div class="sheet-h2-section sheet-table sheet-attack-notes">
					<div class="sheet-table">
						<div class="sheet-table-group-head">
							<span class="sheet-table-header sheet-show-readonly" data-i18n="melee-attack-notes">Melee Attack Notes</span>						
							<span class="sheet-table-header sheet-show-readonly" data-i18n="ranged-attack-notes">Ranged Attack Notes</span>						
							<span class="sheet-table-header sheet-show-readonly" data-i18n="combat-maneuver-bonus-notes">CMB Notes</span>						
							<span class="sheet-table-header sheet-show-readonly" data-i18n="attack-notes">Attack Notes</span>
						</div>
						<div class="sheet-table-row">
							<div class="sheet-table-cell sheet-notes-cell">
								<textarea class="sheet-notes" title="@{melee-attack-notes}" name="attr_melee-attack-notes" placeholder="Put notes about context-sensitive Melee Attack bonuses here." data-i18n-placeholder="melee-attack-notes-place"></textarea>
							</div>
							<div class="sheet-table-cell sheet-notes-cell">
								<textarea class="sheet-notes" title="@{ranged-attack-notes}" name="attr_ranged-attack-notes" placeholder="Put notes about context-sensitive Ranged Attack bonuses here." data-i18n-placeholder="ranged-attack-notes-place"></textarea>
							</div>
							<div class="sheet-table-cell sheet-notes-cell">
								<textarea class="sheet-notes" title="@{CMB-notes}" name="attr_CMB-notes" placeholder="Put notes about context-sensitive CMB bonuses here." data-i18n-placeholder="combat-maneuver-bonus-notes-place"></textarea>
							</div>
							<div class="sheet-table-cell sheet-notes-cell">
								<textarea class="sheet-notes" title="@{attack-notes}" name="attr_attack-notes" placeholder="Put notes about context-sensitive Attack bonuses here." data-i18n-placeholder="attack-notes-place"></textarea>
							</div>
						</div>
					</div>
				</div>
				<div class="sheet-cheat"></div>
				<input class="sheet-showarrow sheet-h2arrow" type="checkbox" name="attr_attack-options-show" data-i18n-aria-label="macro-options" title="Click to expand" data-i18n-title="showsect-cmd" value="1" checked />
				<h2 class="sheet-clickheader sheet-showsect"><label title="Click to expand" data-i18n-title="showsect-cmd" data-i18n-aria-label="showsect-cmd" data-i18n="macro-options">Macro Options</label></h2>
				<div class="sheet-h2-section sheet-extra-damage-section" style="margin-top:.5em;">
					<div class="sheet-table sheet-extra-damage sheet-options sheet-named" style="width:100%;">
						<div class="sheet-table-name sheet-secondary-table-name sheet-show-readonly" data-i18n="additional-damage">Additional Damage</div>
						<div class="sheet-table-row">
							<span class="sheet-table-cell sheet-small-label" >
								<textarea class="sheet-inline-textarea sheet-both" name="attr_global_precision_dmg_macro" title="@{global_precision_dmg_macro}" value="" placeholder="Query/Macro" data-i18n-placeholder="full-macro-place"></textarea>
								<span class="sheet-super sheet-note-b" data-i18n-title="precision-damage-title" data-i18n-aria-label="precision-damage-title" title="Extra or Precision Damage (not added to critical damage)" data-i18n="extra-damage">Extra Non-Crit Dmg</span>
							</span>
							<span class="sheet-table-cell sheet-small-label" >
								<input style="height:2.15em;" type="text" name="attr_global_precision_dmg_type" title="@{global_precision_dmg_type}" value="" placeholder="Dmg type / Description" data-i18n-placeholder="damage-type-or-description" />
								<span data-i18n-title="precision-damage-type" data-i18n-aria-label="precision-damage-type" title="Extra Damage type" data-i18n="type">Type</span>
							</span>
							<span class="sheet-table-cell sheet-small-label" >
								<textarea class="sheet-inline-textarea sheet-both" name="attr_global_critical_dmg_macro" title="@{global_critical_dmg_macro}" value="" placeholder="Query/Macro" data-i18n-placeholder="full-macro-place"></textarea>
								<span class="sheet-super sheet-note-b" data-i18n-title="extra-critical-damage-title" data-i18n-aria-label="extra-critical-damage-title" title="Extra Critical Damage" data-i18n="extra-critical-damage">Extra Crit Dmg</span>
							</span>
							<span class="sheet-table-cell sheet-small-label" >
								<input style="height:2.15em;" type="text" name="attr_global_critical_dmg_type" title="@{global_critical_dmg_type}" value="" placeholder="Dmg type / Description" data-i18n-placeholder="damage-type-or-description" />
								<span data-i18n-title="precision-damage-type" data-i18n-aria-label="precision-damage-type" title="Extra Damage type" data-i18n="type">Type</span>
							</span>
						</div>
					</div>
				</div>
				<div class="sheet-h2-section sheet-advanced-macros sheet-add-to-macros sheet-wide-readonly" style="margin-top:.5em;">
					<div class="sheet-table sheet-extra-damage sheet-options sheet-named sheet-add-to-macros">
						<div class="sheet-table-name sheet-secondary-table-name sheet-show-readonly" data-i18n="all-attacks-macro-insert-section">Add to Attack Roll macro</div>
						<div class="sheet-table-row">
							<div class="sheet-insertmacrocell sheet-col1">
								<input class="sheet-textarea-gray" type="checkbox" name="attr_toggle_global_melee_macro_insert" value="@{var_global_melee_macro_insert}" title="@{toggle_global_melee_macro_insert}" />
								<label class="sheet-small-label2">
									<span class="sheet-super sheet-note-c" data-i18n="all-attacks-insert-macro-melee">Add to Melee Attack Roll macro</span>
									<input type="hidden" name="attr_var_global_melee_macro_insert" value="[[ @{global_melee_macro_insert} ]] [Type]" />
									<textarea class="sheet-inline-textarea sheet-both" name="attr_global_melee_macro_insert" title="@{global_melee_macro_insert}">0</textarea>
								</label>
							</div>
							<div class="sheet-insertmacrocell sheet-col2">
								<input class="sheet-textarea-gray" type="checkbox" name="attr_toggle_global_ranged_macro_insert" value="@{var_global_ranged_macro_insert}" title="@{toggle_global_ranged_macro_insert}" />
								<label class="sheet-small-label2">
									<span class="sheet-super sheet-note-c" data-i18n="all-attacks-insert-macro-ranged">Add to Ranged Attack Roll macro</span>
									<input type="hidden" name="attr_var_global_ranged_macro_insert" value="[[ @{global_ranged_macro_insert} ]] [Type]" />
									<textarea class="sheet-inline-textarea sheet-both" name="attr_global_ranged_macro_insert" title="@{global_ranged_macro_insert}">0</textarea>
								</label>
							</div>
							<div class="sheet-insertmacrocell sheet-col3">
								<input class="sheet-textarea-gray" type="checkbox" name="attr_toggle_global_cmb_macro_insert" value="@{var_global_cmb_macro_insert}" title="@{toggle_global_cmb_macro_insert}" />
								<label class="sheet-small-label2">
									<span class="sheet-super sheet-note-c" data-i18n="all-attacks-insert-macro-cmb">Add to CMB Roll macro</span>
									<input type="hidden" name="attr_var_global_cmb_macro_insert" value="[[ @{global_cmb_macro_insert} ]] [Type]" />
									<textarea class="sheet-inline-textarea sheet-both" name="attr_global_cmb_macro_insert" title="@{global_cmb_macro_insert}">0</textarea>
								</label>
							</div>
							<div class="sheet-insertmacrocell sheet-col4">
								<input class="sheet-textarea-gray" type="checkbox" name="attr_toggle_global_attack_macro_insert" value="@{var_global_attack_macro_insert}" title="@{toggle_global_attack_macro_insert}" />
								<label class="sheet-small-label2">
									<span class="sheet-super sheet-note-c" data-i18n="all-attacks-insert-macro-attack">Add to Attack Roll macro</span>
									<input type="hidden" name="attr_var_global_attack_macro_insert" value="[[ @{global_attack_macro_insert} ]] [Global]" />
									<textarea class="sheet-inline-textarea sheet-both" name="attr_global_attack_macro_insert" title="@{global_attack_macro_insert}">0</textarea>
								</label>
							</div>
						</div>
						<div class="sheet-table-row">
							<div class="sheet-insertmacrocell sheet-col1">
								<input class="sheet-textarea-gray" type="checkbox" name="attr_toggle_global_melee_damage_macro_insert" value="@{var_global_melee_damage_macro_insert}" title="@{toggle_global_melee_damage_macro_insert}" />
								<label class="sheet-small-label2">
									<span class="sheet-super sheet-note-c" data-i18n="all-attacks-insert-macro-melee-damage">Add to Melee Dmg macro</span>
									<input type="hidden" name="attr_var_global_melee_damage_macro_insert" value="[[ @{global_melee_damage_macro_insert} ]] [Type]" />
									<textarea class="sheet-inline-textarea sheet-both" name="attr_global_melee_damage_macro_insert" title="@{global_melee_damage_macro_insert}">0</textarea>
								</label>
							</div>
							<div class="sheet-insertmacrocell sheet-col2">
								<input class="sheet-textarea-gray" type="checkbox" name="attr_toggle_global_ranged_damage_macro_insert" value="@{var_global_ranged_damage_macro_insert}" title="@{toggle_global_ranged_damage_macro_insert}" />
								<label class="sheet-small-label2">
									<span class="sheet-super sheet-note-c" data-i18n="all-attacks-insert-macro-ranged-damage">Add to Ranged Dmg macro</span>
									<input type="hidden" name="attr_var_global_ranged_damage_macro_insert" value="[[ @{global_ranged_damage_macro_insert} ]] [Type]" />
									<textarea class="sheet-inline-textarea sheet-both" name="attr_global_ranged_damage_macro_insert" title="@{global_ranged_damage_macro_insert}">0</textarea>
								</label>
							</div>
							<div class="sheet-insertmacrocell sheet-col3">
								<input class="sheet-textarea-gray" type="checkbox" name="attr_toggle_global_cmb_damage_macro_insert" value="@{var_global_cmb_damage_macro_insert}" title="@{toggle_global_cmb_damage_macro_insert}" />
								<label class="sheet-small-label2">
									<span class="sheet-super sheet-note-c" data-i18n="all-attacks-insert-macro-cmb-damage">Add to CMB Dmg macro</span>
									<input type="hidden" name="attr_var_global_cmb_damage_macro_insert" value="[[ @{global_cmb_damage_macro_insert} ]] [Type]" />
									<textarea class="sheet-inline-textarea sheet-both" name="attr_global_cmb_damage_macro_insert" title="@{global_cmb_damage_macro_insert}">0</textarea>
								</label>
							</div>
							<div class="sheet-insertmacrocell sheet-col4">
								<input class="sheet-textarea-gray" type="checkbox" name="attr_toggle_global_damage_macro_insert" value="@{var_global_damage_macro_insert}" title="@{toggle_global_damage_macro_insert}" />
								<label class="sheet-small-label2">
									<span class="sheet-super sheet-note-c" data-i18n="all-attacks-insert-macro-damage">Add to Dmg macro</span>
									<input type="hidden" name="attr_var_global_damage_macro_insert" value="[[ @{global_damage_macro_insert} ]] [Global]" />
									<textarea class="sheet-inline-textarea sheet-both" name="attr_global_damage_macro_insert" title="@{global_damage_macro_insert}">0</textarea>
								</label>
							</div>
						</div>
					</div>
				</div>
				<div class="sheet-cheat sheet-show-readonly"></div>
				<input class="sheet-showarrow sheet-h2arrow" type="checkbox" name="attr_attacks-show" data-i18n-aria-label="attacks" title="Click to expand" data-i18n-title="showsect-cmd" value="1" checked />
				<h2 class="sheet-clickheader sheet-showsect"><label title="Click to expand" data-i18n-title="showsect-cmd" data-i18n-aria-label="showsect-cmd" data-i18n="attacks">Attacks</label></h2>
				<div class="sheet-h2-section sheet-repeating-sect sheet-attacks sheet-wide-readonly">
					<span class="sheet-nontable-name sheet-show-readonly" data-i18n="attacks">Attacks</span>
					<input type="checkbox" class="sheet-minimize-show sheet-cssbutton" data-i18n-title="minimize-all-cmd" data-i18n-aria-label="minimize-all-cmd" title="Minimize all rows." name="attr_weapon-min-show" value="1" /><span></span>
					<input type="checkbox" class="sheet-lock-show sheet-cssbutton" data-i18n-title="expand-cmd" data-i18n-aria-label="expand-cmd" title="Collapse or expand all rows." name="attr_weapon-expand-show" value="1" /><span></span>
					<input type="checkbox" class="sheet-split-column-show sheet-cssbutton" data-i18n-title="column-cmd" data-i18n-aria-label="column-cmd" title="Split into two columns" name="attr_weapon-column-show" value="1" /><span></span>
					<input class="sheet-deletebutton sheet-cssbutton sheet-deletesect-show" type="checkbox" name="attr_delete_repeating_weapon_btn" value="1" data-i18n-title="delete-weapon" data-i18n-aria-label="delete-weapon-must-confirm-next-checkbox" /><span></span><label class="sheet-deletesect sheet-allrows-note"><input type="checkbox" class="sheet-selectedlabel-check" name="attr_delete_repeating_weapon" data-i18n-aria-label="confirm-delete-weapon" data-i18n-title="confirm-delete-weapon" value="1" /><b data-i18n="delete-all-rows-are-you-sure">delete all rows are you sure</b></label>
					<input type="checkbox" name="attr_adv_macro_show" class="sheet-repeating-sect-show" value="1" role="presentation" />
					<input name="attr_modify_dmg_by_size" type="checkbox" value="1" class="sheet-use-size-show" />
					<div class="sheet-repeating-fields">
						<fieldset class="repeating_weapon">
							<span class="sheet-error"><span class="sheet-pictos">!</span><span data-i18n="error-msg1">Error! You must delete this row before editing any items in this section.</span></span>
							<div class="sheet-nontable-repeating">
								<input type="checkbox" class="sheet-counted sheet-sect-show" data-i18n-title="minimize-cmd" data-i18n-aria-label="minimize-cmd" title="Minimize Row" name="attr_row-show" value="1" checked /><span></span>
								<span class="sheet-repeating-rollbutton"><button type="roll" name="attr_attack-roll" title="%{selected|repeating_weapon_$X_attack-roll}" value="@{macro-text}"></button></span>
								<span style="display:none;" class="sheet-repeating-rollbutton"><button type="roll" name="attr_attack-npc-roll" title="%{selected|repeating_weapon_$X_attack-npc-roll}" value="@{NPC-macro-text}"></button></span>
								<label class="sheet-small-label2 sheet-narrow-numbers sheet-sect"><input type="number" name="attr_enhance" title="@{repeating_weapon_$X_enhance}" value="0" /><span data-i18n="enhancement-abbrv">Enh</span></label>
								<label class="sheet-small-label2 sheet-sect" style="width:2.5em;"><input type="checkbox" name="attr_masterwork" title="@{repeating_weapon_$X_masterwork}" value="1" style="margin-bottom: .55em;"/><span data-i18n="masterwork-abbrv">Mwk</span></label>
								<label class="sheet-small-label2 sheet-entry-25p-shrink"><input type="text" name="attr_name"  value="" title="@{repeating_weapon_$X_name}" placeholder="Name" data-i18n-placeholder="name" /><span data-i18n="name">Name</span></label>
								<div class="sheet-linked-fields sheet-sect">
									<input type="checkbox" name="attr_attack-mod_error" class="sheet-error-mshow" value="1" />
									<label class="sheet-small-label2 sheet-entry-med sheet-macro-text-inline sheet-highlight"><input type="text" name="attr_attack" title="@{repeating_weapon_$X_attack}" placeholder="#/Equation" value="" data-i18n-placeholder="equation-macro-place" class="sheet-macro-text-inline" /><span class="sheet-super sheet-note-a" data-i18n="attack-modifiers-abbrv">Attack Mods</span></label>
									<label class="sheet-small-label2 sheet-narrow-numbers sheet-highlight"><input type="number" name="attr_attack-mod" title="@{repeating_weapon_$X_attack-mod}" value="0" class="sheet-calc" readonly /><span data-i18n="value-abbrv">val</span></label>
								</div>
								<span class="sheet-divider-db sheet-sect">+</span>
								<label class="sheet-small-label2 sheet-entry-short">
									<select class="sheet-select-small" title="@{repeating_weapon_$X_attack-type}" name="attr_attack-type">
										<option value="0" data-i18n="none-default" selected>&#8226;None</option>
										<option value="@{attk-melee}" data-i18n="melee">Melee</option>
										<option value="@{attk-melee2}" data-i18n="melee2">Melee2</option>
										<option value="@{attk-ranged}" data-i18n="ranged">Ranged</option>
										<option value="@{attk-ranged2}" data-i18n="ranged2">Ranged2</option>
										<option value="@{CMB}" data-i18n="combat-maneuver-bonus-abbrv">CMB</option>
										<option value="@{CMB2}" data-i18n="combat-maneuver-bonus-abbrv2">CMB2</option>
									</select>
									<span data-i18n="attack-type">Attack Type</span>
								</label>
								<span class="sheet-divider-db sheet-sect">=</span>
								<label class="sheet-small-label2 sheet-narrow-numbers sheet-space-right-collapse"><input type="number" name="attr_total-attack" title="@{repeating_weapon_$X_total-attack}" value="0" class="sheet-calc" readonly /><span data-i18n="attack">Attack</span></label>
								<label class="sheet-small-label2 sheet-entry-small sheet-sect">
									<select class="sheet-select-small" name="attr_vs">
										<option value="ac" data-i18n="armor-class-abbrv-default" selected>&#8226;AC</option>
										<option value="touch" data-i18n="touch">Touch</option>
										<option value="ff" data-i18n="flat-footed-armor-class-abbrv">FF</option>
										<option value="fft" data-i18n="flat-footed-touch-abbrv">FF Touch</option>
										<option value="cmd" data-i18n="combat-maneuver-defense-abbrv">CMD</option>
										<option value="cmb" data-i18n="opposed-combat-maneuver-bonus-abbrv">Opposed CMB</option>
										<option value="other" data-i18n="other">Other</option>
									</select>
									<span data-i18n="versus-abbrv">Vs.</span>
								</label>
								<div class="sheet-linked-fields">
									<label class="sheet-small-label2 sheet-narrow-numbers"><input type="number" name="attr_crit-target" title="@{repeating_weapon_$X_crit-target}" value="20" min="0" max="20" /><span data-i18n="critical-abbrv">Crit</span></label>
									<span class="sheet-divider-db-lg" style="width:1em; padding-bottom:10px;">/x</span>
									<label class="sheet-small-label2 sheet-narrow-numbers"><input type="number" name="attr_crit-multiplier" title="@{repeating_weapon_$X_crit-multiplier}" value="2" min="0" /><span data-i18n="multiplier-abbrv">Mult</span></label>
								</div>
								<div class="sheet-linked-fields">
									<label class="sheet-small-label2 sheet-narrow-numbers sheet-sect"><input type="number" name="attr_crit_confirm" title="@{repeating_weapon_$X_crit_confirm}" value="0" /><span data-i18n-title="custom-crit-confirmation-bonus" data-i18n-aria-label="custom-crit-confirmation-bonus" title="Custom critical confirmation bonus for this attack" data-i18n="confirm-critical-bonus-abbrv">+Conf</span></label>
									<label class="sheet-small-label2 sheet-narrow-numbers sheet-space-right-collapse"><input type="number" name="attr_crit_conf_mod" title="@{repeating_weapon_$X_crit_conf_mod}" value="0" class="sheet-calc" readonly /><span data-i18n="confirm-critical-bonus-abbrv">+Conf</span></label>
								</div>
								<input name="attr_size_affects"  type="checkbox" value="1" class="sheet-sect3-show sheet-noshow" />
								<input name="attr_not_default_size" type="checkbox" value="1" class="sheet-sect3-show sheet-size-affects-show sheet-noshow" />
								<div class="sheet-linked-fields sheet-dont-use-size">
									<label class="sheet-small-label2 sheet-narrow-numbers"><input type="number" name="attr_damage-dice-num" title="@{repeating_weapon_$X_damage-dice-num}" value="0"/></label>
									<span class="sheet-divider-db-lg" style="padding-bottom: 10px;margin-right:-.125em;" data-i18n="dice-abbrv">d</span>
									<label class="sheet-small-label2 sheet-narrow-numbers"><input type="number" name="attr_damage-die" title="@{repeating_weapon_$X_damage-die}" value="0" /></label>
									<span style="display: block; text-align: center; font-size: .7rem; font-style: italic; font-weight: bold; color: Black; margin-top: -1.7em;" >dmg dice</span>
								</div>
								<div class="sheet-linked-fields sheet-sect3 sheet-use-size">
									<label class="sheet-small-label2 sheet-narrow-numbers"><input type="number" name="attr_damage-dice-num" title="@{repeating_weapon_$X_damage-dice-num}" value="0" class="sheet-calc" readonly /></label>
									<span class="sheet-divider-db-lg" style="padding-bottom: 10px;margin-right:-.125em;" data-i18n="dice-abbrv">d</span>
									<label class="sheet-small-label2 sheet-narrow-numbers"><input type="number" name="attr_damage-die" title="@{repeating_weapon_$X_damage-die}" value="0" class="sheet-calc" readonly /></label>
									<span style="display: block; text-align: center; font-size: .7rem; font-style: italic; font-weight: bold; color: Black; margin-top: -1.7em;" >adj damage dice</span>
								</div>
								<div class="sheet-linked-fields sheet-use-size">
									<label class="sheet-small-label2 sheet-narrow-numbers"><input type="number" name="attr_default_damage-dice-num" title="@{repeating_weapon_$X_default_damage-dice-num}" value="0" min="0" /></label>
									<span class="sheet-divider-db-lg" style="padding-bottom: 10px;margin-right:-.125em;" data-i18n="dice-abbrv">d</span>
									<label class="sheet-small-label2 sheet-narrow-numbers"><input type="number" name="attr_default_damage-die" title="@{repeating_weapon_$X_default_damage-die}" value="0" min="0" /></label>
									<span style="display: block; text-align: center; font-size: .7rem; font-style: italic; font-weight: bold; color: Black; margin-top: -1.7em;" >dmg dice</span>
								</div>
								<span class="sheet-divider-db sheet-sect">+</span>
								<div class="sheet-linked-fields sheet-sect">
									<input type="checkbox" name="attr_damage-mod_error" class="sheet-error-mshow" value="1" />
									<label class="sheet-small-label2 sheet-entry-short sheet-macro-text-inline sheet-highlight"><input type="text" name="attr_damage" title="@{repeating_weapon_$X_damage}" placeholder="#/Equation" value="" data-i18n-placeholder="equation-macro-place" class="sheet-macro-text-inline" /><span class="sheet-super sheet-note-a" data-i18n="damage-modifier-abbrv">Dmg Mods</span></label>
									<label class="sheet-small-label2 sheet-narrow-numbers sheet-highlight"><input type="number" name="attr_damage-mod" title="@{repeating_weapon_$X_damage-mod}" value="0" class="sheet-calc" readonly /><span data-i18n="value-abbrv">val</span></label>
								</div>
								<span class="sheet-divider-db">+</span>
								<label class="sheet-small-label2 sheet-narrow-numbers sheet-sect"><input type="number" step=".5" name="attr_damage_ability_mult" title="@{repeating_weapon_$X_damage_ability_mult}" value="1"><span data-i18n="multiplier-abbrv" data-i18n-title="damage-multiplier-title" data-i18n-aria-label="damage-multiplier-title" title="Damage ability modifier: .5, 1.5, 2, etc, can leave blank to represent 1.">Mult</span></label>
								<span class="sheet-divider-db-lg sheet-sect">*</span>
								<label class="sheet-small-label2 sheet-entry-small sheet-sect">
									<select class="sheet-select-small" title="@{repeating_weapon_$X_damage-ability}" name="attr_damage-ability">
										<option value="0" data-i18n="none-default" selected>&#8226;None</option>
										<option value="@{STR-mod}" data-i18n="strength-abbrv">STR</option>
										<option value="@{DEX-mod}" data-i18n="dexterity-abbrv">DEX</option>
										<option value="@{CON-mod}" data-i18n="constitution-abbrv">CON</option>
										<option value="@{INT-mod}" data-i18n="intelligence-abbrv">INT</option>
										<option value="@{WIS-mod}" data-i18n="wisdom-abbrv">WIS</option>
										<option value="@{CHA-mod}" data-i18n="charisma-abbrv">CHA</option>
									</select>
									<span style="margin-left:-.75em;" data-i18n="damage-ability">Dmg Ability</span>
								</label>
								<input type="checkbox" class="sheet-noshow sheet-sect2-show sheet-sect-show-inverse" name="attr_isranged" value="1" role="presentation" title="@{repeating_weapon_$X_isranged}" />
								<span class="sheet-divider-db sheet-sect sheet-sect2">(</span>
								<label class="sheet-small-label2 sheet-sect sheet-sect2" style="width:1.75em;">
									<input style="min-width:.5em;" type="text" name="attr_damage-ability-max" title="@{repeating_weapon_$X_damage-ability-max}" value="" placeholder="NA" data-i18n-placeholder="not-applicable" />
									<span data-i18n-title="maximum-damage-ability-title" data-i18n-aria-label="maximum-damage-ability-title" title="Maximum damage ability applied (for strength score, etc.)" data-i18n="maximum-abbrv">Max</span>
								</label>
								<span class="sheet-divider-db sheet-sect sheet-sect2">)</span>
								<span class="sheet-divider-db sheet-sect">=</span>
								<label class="sheet-small-label2 sheet-narrow-numbers sheet-space-right-collapse"><input type="number" name="attr_total-damage" title="@{repeating_weapon_$X_total-damage}" value="0" class="sheet-calc" readonly /><span data-i18n="damage-abbrv">Dmg</span></label>
								<label class="sheet-small-label2 sheet-entry-8p-shrink sheet-sect"><input type="text" name="attr_type" title="@{repeating_weapon_$X_type} Damage Type" data-i18n-placeholder="pierce-blunt-slash-abbrv" placeholder="P B S" /><span data-i18n="type">Type</span></label>
								<label class="sheet-small-label2 sheet-narrow-numbers">
									<input class="sheet-number" type="number" name="attr_range" title="@{repeating_weapon_$X_range}" value="0"  />
									<input type="checkbox" class="sheet-noshow sheet-sect2-show sheet-sect-show-inverse" name="attr_isranged" value="1" role="presentation" title="@{repeating_weapon_$X_isranged}" />
									<span class="sheet-sect2" data-i18n="range-in-feet">Range</span>
									<span class="sheet-sect-inverse" data-i18n="reach-small">Reach</span>
								</label>
								<input type="checkbox" class="sheet-nextitem-show sheet-noshow" name="attr_isranged" value="1" role="presentation" title="@{repeating_weapon_$X_isranged}" />
								<label class="sheet-small-label2 sheet-narrow-numbers sheet-ammo"><input type="number" name="attr_ammo" title="@{repeating_weapon_$X_ammo}" value="0" style="width:2.8em;" /><span data-i18n="ammo">Ammo</span></label>
								<label class="sheet-small-label2 sheet-entry-10p-shrink sheet-sect"><input type="text" name="attr_group" value="" title="@{repeating_weapon_$X_group}" placeholder="Group by name for attackbook buttons" data-i18n-placeholder="group-name" /><span data-i18n="group">Group name</span></label>
								<label class="sheet-small-label2 sheet-entry-small sheet-sect">
									<select title="@{repeating_weapon_$X_proficiency}" name="attr_proficiency">
										<option value="0" data-i18n="yes-default" selected>&#8226;Yes</option>
										<option value="-4" data-i18n="no">No</option>
									</select>
									<span data-i18n-title="proficiency-title" data-i18n-aria-label="proficiency-title" data-i18n="proficiency">Prof</span>
								</label>
								<label class="sheet-small-label2 sheet-sect sheet-use-size-only" style="width:4.5em;"><input type="checkbox" name="attr_size_affects" title="@{repeating_weapon_$X_size_affects}" value="1" checked /><span data-i18n-title="damage-dice-affected-by-size" data-i18n="use-size-abbrv">Use sze</span></label>
								<input type="checkbox" name="attr_size_affects" value="1" class="sheet-nextitem-show sheet-noshow" />
								<label class="sheet-small-label2 sheet-entry-med sheet-sect sheet-nextitem sheet-use-size-only">
									<select title="@{repeating_weapon_$X_default_size}" name="attr_default_size" >
										<option value="-8" data-i18n="size-colossal">Colossal</option>
										<option value="-4" data-i18n="size-gargantuan">Gargantuan</option>
										<option value="-2" data-i18n="size-huge">Huge</option>
										<option value="-1" data-i18n="size-large">Large</option>
										<option value="0" data-i18n="medium-abbrv-default" selected>&#8226;Medium</option>
										<option value="1" data-i18n="size-small">Small</option>
										<option value="2" data-i18n="size-tiny">Tiny</option>
										<option value="4" data-i18n="size-diminutive">Diminutive</option>
										<option value="8" data-i18n="size-fine">Fine</option>
									</select>
									<span data-i18n="default-size">Default Size</span>
								</label>
								<div class="sheet-small-label2 sheet-sect" style="width:60%;height:auto;clear:both;margin-bottom:0;">
									<textarea class="sheet-inline-textarea" name="attr_notes" title="@{repeating_weapon_$X_notes}" placeholder="Weapon Notes"></textarea>
									<span data-i18n="notes">Notes</span>
								</div>
								<div class="sheet-cheat"></div>
								<input type="hidden" name="attr_attack-type_macro_insert" value="@{toggle_global_melee_macro_insert}" />
								<input type="hidden" name="attr_damage-type_macro_insert" value="@{toggle_global_melee_damage_macro_insert}" />
								<input type="hidden" name="attr_macro_options" value="" />
								<input type="hidden" name="attr_iterative_attacks" value="@{toggle_iterative_attack2} @{toggle_iterative_attack3} @{toggle_iterative_attack4} @{toggle_iterative_attack5} @{toggle_iterative_attack6} @{toggle_iterative_attack7} @{toggle_iterative_attack8}" />
								<input type="hidden" name="attr_attack_macro" value="[[ @{total-attack} ]] [Total] + @{toggle_attack_macro_insert} + @{attack-type_macro_insert} + @{toggle_global_attack_macro_insert}" />
								<input type="hidden" name="attr_damage_macro" value="[[ @{total-damage} ]] [Total] + @{toggle_damage_macro_insert} + @{damage-type_macro_insert} + @{toggle_global_damage_macro_insert}" />
								<div class="sheet-sect sheet-expand">
									<input type="checkbox" class="sheet-showarrow sheet-extra-damage-show" name="attr_add-damage-show" value="1" title="Add additional, precision, or extra critical damage" data-i18n-title="additional-damage-title" aria-label="Show Additional Damage" data-i18n-aria-label="additional-damage" />
									<label class="sheet-showsect sheet-extra-damage-showlabel" data-i18n="precision-abbrv">Extra Dmg</label>
									<input type="checkbox" class="sheet-showarrow sheet-iterations-show" title="iterative-attacks-title" data-i18n-title="iterative-attacks-title" data-i18n-aria-label="iterative-attacks-title" aria-label="Show Iterative Attacks" name="attr_iterative-attacks-show" value="1" />
									<label class="sheet-showsect sheet-iterations-showlabel" data-i18n="iterative-attacks-abbrv">Iterative Atks</label>
									<input type="checkbox" class="sheet-showarrow sheet-advmacro-text-show" title="Click to expand" data-i18n-title="showsect-cmd" data-i18n-aria-label="showsect-cmd" aria-label="Show Macro Text" name="attr_advmacro-text-show" value="1" />
									<label class="sheet-showsect sheet-advmacro-text-showlabel" data-i18n="macro-text-advanced">Adv Rolltime Macros</label>
									<input type="checkbox" class="sheet-showarrow sheet-macro-text-show" title="Click to expand" data-i18n-title="showsect-cmd" data-i18n-aria-label="showsect-cmd" aria-label="Show Macro Text" name="attr_macro-text-show" value="1" />
									<label class="sheet-showsect sheet-macro-text-showlabel" data-i18n="macro-text">Macro Text</label>
									<input type="checkbox" class="sheet-showarrow sheet-id-show" title="Click to expand" data-i18n-title="showsect-cmd" data-i18n-aria-label="showsect-cmd" aria-label="Show Row ID" name="attr_ids-show" value="1" />
									<label class="sheet-showsect sheet-id-showlabel" data-i18n="identification-abbrv">ID</label>
									<hr class="sheet-subnav-hr">
									<div class="sheet-cheat"></div>
									<div class="sheet-extra-damage sheet-center">
										<label class="sheet-small-label2" style="width:23.85%;">
											<span class="sheet-super sheet-note-b" data-i18n-title="precision-damage-title" data-i18n-aria-label="precision-damage-title" title="Extra or Precision Damage (not added to critical damage)" data-i18n="extra-damage">Extra Non-Crit Dmg</span>
											<textarea class="sheet-inline-textarea sheet-both" type="text" name="attr_precision_dmg_macro" title="@{repeating_weapon_$X_precision_dmg_macro}" placeholder="Macro/Query" data-i18n-placeholder="full-macro-place"></textarea>
										</label>
										<label class="sheet-small-label2" style="width:23.85%;">
											<span data-i18n-title="precision-damage-type" data-i18n-aria-label="precision-damage-type" title="Extra Damage type" data-i18n="type">Type</span>
											<input style="height:2.15em;" type="text" name="attr_precision_dmg_type" title="@{repeating_weapon_$X_precision_dmg_type}" value="" placeholder="Dmg type / Description" data-i18n-placeholder="damage-type-or-description" />
										</label>
										<label class="sheet-small-label2" style="width:23.85%;">
											<span class="sheet-super sheet-note-b" data-i18n-title="extra-critical-damage-title" data-i18n-aria-label="extra-critical-damage-title" title="Extra Critical Damage" data-i18n="extra-critical-damage">Extra Crit Dmg</span>
											<textarea class="sheet-inline-textarea sheet-both" type="text" name="attr_critical_dmg_macro" title="@{repeating_weapon_$X_critical_dmg_macro}" placeholder="Macro/Query" data-i18n-placeholder="full-macro-place"></textarea>
										</label>
										<label class="sheet-small-label2" style="width:23.85%;">
											<span data-i18n-title="precision-damage-type" data-i18n-aria-label="precision-damage-type" title="Extra Damage type" data-i18n="type">Type</span>
											<input style="height:2.15em;" type="text" name="attr_critical_dmg_type" title="@{repeating_weapon_$X_critical_dmg_type}" value="" placeholder="Dmg type / Description" data-i18n-placeholder="damage-type-or-description" />
										</label>
									</div>
									<div class="sheet-table sheet-iterative_attack_section">
										<span class="sheet-secondary-table-name" data-i18n="iterative-attacks">Iterative Attacks</span>
										<div class="sheet-table-row">
											<span class="sheet-table-header" style="width: 14em;" data-i18n="include-attacks-?">Include Attack?</span>
											<span class="sheet-table-header" style="width: 20%;" data-i18n="custom-name">Custom Name</span>
											<span class="sheet-table-header" style="width: 7em;" data-i18n="attack-modifier-abbrv">Attack Mod</span>
											<span class="sheet-table-header sheet-super sheet-note-d" data-i18n="macro-text">Macro</span>
										</div>										
										<div class="sheet-table-row">
											<span class="sheet-table-cell">
												<label>
													<b data-i18n="primary-attack">Primary attack</b>
												</label>
											</span>
											<span class="sheet-table-cell">
												<input type="text" name="attr_iterative_attack1_name" title="@{repeating_weapon_$X_iterative_attack1_name}" value="" data-i18n-placeholder="attack-1">
											</span>
											<span class="sheet-table-cell">
												<input type="number" name="attr_total-attack" title="@{repeating_weapon_$X_total-attack}" value="0" class="sheet-calc" readonly>
											</span>
											<span class="sheet-table-cell sheet-macro-text-tohide">&nbsp;</span>
										</div>										
										<div class="sheet-table-row">
											<span class="sheet-table-cell">
												<label>
													<input type="checkbox" class="sheet-boldlabel-check" name="attr_toggle_iterative_attack2" title="@{repeating_weapon_$X_toggle_iterative_attack2}" value="@{var_iterative_attack2_macro}" /><b title="Include a second attack to your weapon?" data-i18n="include-second-attack">Include a 2nd attack?</b>
												</label>
											</span>
											<span class="sheet-table-cell">
												<input type="text" name="attr_iterative_attack2_name" title="@{repeating_weapon_$X_iterative_attack2_name}" value="" data-i18n-placeholder="attack-2">
											</span>
											<span class="sheet-table-cell">
												<input type="number" name="attr_iterative_attack2_value" title="@{repeating_weapon_$X_iterative_attack2_value}" value="-5" max="0" />
											</span>
											<span class="sheet-table-cell sheet-macro-text-tohide">
												<textarea class="sheet-inline-textarea" data-i18n-placeholder="full-macro-place" name="attr_var_iterative_attack2_macro" title="@{repeating_weapon_$X_var_iterative_attack2_macro}">{{attack2=[[ 1d20cs>[[ @{crit-target} ]] + [[ @{attack_macro} + @{iterative_attack2_value} ]] [iterative] ]]}} {{damage2=[[ @{damage-dice-num}d@{damage-die} + @{damage_macro} ]]}} {{crit_confirm2=[[ 1d20 + [[ @{attack_macro} + @{iterative_attack2_value} ]] [iterative] + [[ @{crit_conf_mod} ]] ]]}} {{crit_damage2=[[ [[ @{damage-dice-num} * [[ @{crit-multiplier} - 1 ]] ]]d@{damage-die} + ((@{damage_macro}) * [[ @{crit-multiplier} - 1 ]]) ]]}} {{precision_dmg21=@{precision_dmg_macro}}} {{precision_dmg22=@{global_precision_dmg_macro}}} {{critical_dmg21=@{critical_dmg_macro}}} {{critical_dmg22=@{global_critical_dmg_macro}}} {{attack2name=@{iterative_attack2_name}}}</textarea>
											</span>
										</div>
										<div class="sheet-table-row">
											<span class="sheet-table-cell">
												<label>
													<input type="checkbox" class="sheet-boldlabel-check" name="attr_toggle_iterative_attack3" title="@{repeating_weapon_$X_toggle_iterative_attack3}" value="@{var_iterative_attack3_macro}" /><b title="Include a third attack to your weapon?" data-i18n="include-third-attack">Include a 3rd attack?</b>
												</label>
											</span>
											<span class="sheet-table-cell">
												<input type="text" name="attr_iterative_attack3_name" title="@{repeating_weapon_$X_iterative_attack3_name}" value="" data-i18n-placeholder="attack-3">
											</span>
											<span class="sheet-table-cell">
												<input type="number" name="attr_iterative_attack3_value" title="@{repeating_weapon_$X_iterative_attack3_value}" value="-10" max="0" />
											</span>
											<span class="sheet-table-cell sheet-macro-text-tohide">
												<textarea class="sheet-inline-textarea" data-i18n-placeholder="full-macro-place" name="attr_var_iterative_attack3_macro" title="@{repeating_weapon_$X_var_iterative_attack3_macro}">{{attack3=[[ 1d20cs>[[ @{crit-target} ]] + [[ @{attack_macro} + @{iterative_attack3_value} ]] [iterative] ]]}} {{damage3=[[ @{damage-dice-num}d@{damage-die} + @{damage_macro} ]]}} {{crit_confirm3=[[ 1d20 + [[ @{attack_macro} + @{iterative_attack3_value} ]] [iterative] + [[ @{crit_conf_mod} ]] ]]}} {{crit_damage3=[[ [[ @{damage-dice-num} * [[ @{crit-multiplier} - 1 ]] ]]d@{damage-die} + ((@{damage_macro}) * [[ @{crit-multiplier} - 1]]) ]]}} {{precision_dmg31=@{precision_dmg_macro}}} {{precision_dmg32=@{global_precision_dmg_macro}}} {{critical_dmg31=@{critical_dmg_macro}}} {{critical_dmg32=@{global_critical_dmg_macro}}} {{attack3name=@{iterative_attack3_name}}}</textarea>
											</span>
										</div>
										<div class="sheet-table-row">
											<span class="sheet-table-cell">
												<label>
													<input type="checkbox" class="sheet-boldlabel-check" name="attr_toggle_iterative_attack4" title="@{repeating_weapon_$X_toggle_iterative_attack4}" value="@{var_iterative_attack4_macro}" /><b title="Include a fourth attack to your weapon?" data-i18n="include-fourth-attack">Include a 4th attack?</b>
												</label>
											</span>
											<span class="sheet-table-cell">
												<input type="text" name="attr_iterative_attack4_name" title="@{repeating_weapon_$X_iterative_attack4_name}" value="" data-i18n-placeholder="attack-4">
											</span>
											<span class="sheet-table-cell">
												<input type="number" name="attr_iterative_attack4_value" title="@{repeating_weapon_$X_iterative_attack4_value}" value="-15" max="0" />
											</span>
											<span class="sheet-table-cell sheet-macro-text-tohide">
												<textarea class="sheet-inline-textarea" data-i18n-placeholder="full-macro-place" name="attr_var_iterative_attack4_macro" title="@{repeating_weapon_$X_var_iterative_attack4_macro}">{{attack4=[[ 1d20cs>[[ @{crit-target} ]] + [[ @{attack_macro} + @{iterative_attack4_value} ]] [iterative] ]]}} {{damage4=[[ @{damage-dice-num}d@{damage-die} + @{damage_macro} ]]}} {{crit_confirm4=[[ 1d20 + [[ @{attack_macro} + @{iterative_attack4_value} ]] [iterative] + [[ @{crit_conf_mod} ]] ]]}} {{crit_damage4=[[ [[ @{damage-dice-num} * [[ @{crit-multiplier} - 1 ]] ]]d@{damage-die} + ((@{damage_macro}) * [[ @{crit-multiplier} - 1 ]]) ]]}} {{precision_dmg41=@{precision_dmg_macro}}} {{precision_dmg42=@{global_precision_dmg_macro}}} {{critical_dmg41=@{critical_dmg_macro}}} {{critical_dmg42=@{global_critical_dmg_macro}}} {{attack4name=@{iterative_attack4_name}}}</textarea>
											</span>
										</div>
										<div class="sheet-table-row">
											<span class="sheet-table-cell">
												<label>
													<input type="checkbox" class="sheet-boldlabel-check" name="attr_toggle_iterative_attack5" title="@{repeating_weapon_$X_toggle_iterative_attack5}" value="@{var_iterative_attack5_macro}" /><b title="Include a fifth attack to your weapon?" data-i18n="include-fifth-attack">Include a 5th attack?</b>
												</label>
											</span>
											<span class="sheet-table-cell">
												<input type="text" name="attr_iterative_attack5_name" title="@{repeating_weapon_$X_iterative_attack5_name}" value="" data-i18n-placeholder="attack-5">
											</span>
											<span class="sheet-table-cell">
												<input type="number" name="attr_iterative_attack5_value" title="@{repeating_weapon_$X_iterative_attack5_value}" value="-20" max="0" />
											</span>
											<span class="sheet-table-cell sheet-macro-text-tohide">
												<textarea class="sheet-inline-textarea" data-i18n-placeholder="full-macro-place" name="attr_var_iterative_attack5_macro" title="@{repeating_weapon_$X_var_iterative_attack5_macro}">{{attack5=[[ 1d20cs>[[ @{crit-target} ]] + [[ @{attack_macro} + @{iterative_attack5_value} ]] [iterative] ]]}} {{damage5=[[ @{damage-dice-num}d@{damage-die} + @{damage_macro} ]]}} {{crit_confirm5=[[ 1d20 + [[ @{attack_macro} + @{iterative_attack5_value} ]] [iterative] + [[ @{crit_conf_mod} ]] ]]}} {{crit_damage5=[[ [[ @{damage-dice-num} * [[ @{crit-multiplier} - 1 ]] ]]d@{damage-die} + ((@{damage_macro}) * [[ @{crit-multiplier} - 1 ]]) ]]}} {{precision_dmg51=@{precision_dmg_macro}}} {{precision_dmg52=@{global_precision_dmg_macro}}} {{critical_dmg51=@{critical_dmg_macro}}} {{critical_dmg52=@{global_critical_dmg_macro}}} {{attack5name=@{iterative_attack5_name}}}</textarea>
											</span>
										</div>
										<div class="sheet-table-row">
											<span class="sheet-table-cell">
												<label>
													<input type="checkbox" class="sheet-boldlabel-check" name="attr_toggle_iterative_attack6" title="@{repeating_weapon_$X_toggle_iterative_attack6}" value="@{var_iterative_attack6_macro}" /><b title="Include a sixth attack to your weapon?" data-i18n="include-sixth-attack">Include a 6th attack?</b>
												</label>
											</span>
											<span class="sheet-table-cell">
												<input type="text" name="attr_iterative_attack6_name" title="@{repeating_weapon_$X_iterative_attack6_name}" value="" data-i18n-placeholder="attack-6">
											</span>
											<span class="sheet-table-cell">
												<input type="number" name="attr_iterative_attack6_value" title="@{repeating_weapon_$X_iterative_attack6_value}" value="-25" max="0" />
											</span>
											<span class="sheet-table-cell sheet-macro-text-tohide">
												<textarea class="sheet-inline-textarea" data-i18n-placeholder="full-macro-place" name="attr_var_iterative_attack6_macro" title="@{repeating_weapon_$X_var_iterative_attack6_macro}">{{attack6=[[ 1d20cs>[[ @{crit-target} ]] + [[ @{attack_macro} + @{iterative_attack6_value} ]] [iterative] ]]}} {{damage6=[[ @{damage-dice-num}d@{damage-die} + @{damage_macro} ]]}} {{crit_confirm6=[[ 1d20 + [[ @{attack_macro} + @{iterative_attack6_value} ]] [iterative] + [[ @{crit_conf_mod} ]] ]]}} {{crit_damage6=[[ [[ @{damage-dice-num} * [[ @{crit-multiplier} - 1 ]] ]]d@{damage-die} + ((@{damage_macro}) * [[ @{crit-multiplier} - 1 ]]) ]]}} {{precision_dmg61=@{precision_dmg_macro}}} {{precision_dmg62=@{global_precision_dmg_macro}}} {{critical_dmg61=@{critical_dmg_macro}}} {{critical_dmg62=@{global_critical_dmg_macro}}} {{attack6name=@{iterative_attack6_name}}}</textarea>
											</span>
										</div>
										<div class="sheet-table-row">
											<span class="sheet-table-cell">
												<label>
													<input type="checkbox" class="sheet-boldlabel-check" name="attr_toggle_iterative_attack7" title="@{repeating_weapon_$X_toggle_iterative_attack7}" value="@{var_iterative_attack7_macro}" /><b title="Include a seventh attack to your weapon?" data-i18n="include-seventh-attack">Include a 7th attack?</b>
												</label>
											</span>
											<span class="sheet-table-cell">
												<input type="text" name="attr_iterative_attack7_name" title="@{repeating_weapon_$X_iterative_attack7_name}" value="" data-i18n-placeholder="attack-7">
											</span>
											<span class="sheet-table-cell">
												<input type="number" name="attr_iterative_attack7_value" title="@{repeating_weapon_$X_iterative_attack7_value}" value="-30" max="0" />
											</span>
											<span class="sheet-table-cell sheet-macro-text-tohide">
												<textarea class="sheet-inline-textarea" data-i18n-placeholder="full-macro-place" name="attr_var_iterative_attack7_macro" title="@{repeating_weapon_$X_var_iterative_attack7_macro}">{{attack7=[[ 1d20cs>[[ @{crit-target} ]] + [[ @{attack_macro} + @{iterative_attack7_value} ]] [iterative] ]]}} {{damage7=[[ @{damage-dice-num}d@{damage-die} + @{damage_macro} ]]}} {{crit_confirm7=[[ 1d20 + [[ @{attack_macro} + @{iterative_attack7_value} ]] [iterative] + [[ @{crit_conf_mod} ]] ]]}} {{crit_damage7=[[ [[ @{damage-dice-num} * [[ @{crit-multiplier} - 1 ]] ]]d@{damage-die} + ((@{damage_macro}) * [[ @{crit-multiplier} - 1 ]]) ]]}} {{precision_dmg71=@{precision_dmg_macro}}} {{precision_dmg72=@{global_precision_dmg_macro}}} {{critical_dmg71=@{critical_dmg_macro}}} {{critical_dmg72=@{global_critical_dmg_macro}}} {{attack7name=@{iterative_attack7_name}}}</textarea>
											</span>
										</div>
										<div class="sheet-table-row">
											<span class="sheet-table-cell">
												<label>
													<input type="checkbox" class="sheet-boldlabel-check" name="attr_toggle_iterative_attack8" title="@{repeating_weapon_$X_toggle_iterative_attack8}" value="@{var_iterative_attack8_macro}" /><b title="Include an eighth attack to your weapon?" data-i18n="include-eighth-attack">Include an 8th attack?</b>
												</label>
											</span>
											<span class="sheet-table-cell">
												<input type="text" name="attr_iterative_attack8_name" title="@{repeating_weapon_$X_iterative_attack8_name}" value="" data-i18n-placeholder="attack-8">
											</span>
											<span class="sheet-table-cell">
												<input type="number" name="attr_iterative_attack8_value" title="@{repeating_weapon_$X_iterative_attack8_value}" value="-35" max="0" />
											</span>
											<span class="sheet-table-cell sheet-macro-text-tohide">
												<textarea class="sheet-inline-textarea" data-i18n-placeholder="full-macro-place" name="attr_var_iterative_attack8_macro" title="@{repeating_weapon_$X_var_iterative_attack8_macro}">{{attack8=[[ 1d20cs>[[ @{crit-target} ]] + [[ @{attack_macro} + @{iterative_attack8_value} ]] [iterative] ]]}} {{damage8=[[ @{damage-dice-num}d@{damage-die} + @{damage_macro} ]]}} {{crit_confirm8=[[ 1d20 + [[ @{attack_macro} + @{iterative_attack8_value} ]] [iterative] + [[ @{crit_conf_mod} ]] ]]}} {{crit_damage8=[[ [[ @{damage-dice-num} * [[ @{crit-multiplier} - 1 ]] ]]d@{damage-die} + ((@{damage_macro}) * [[ @{crit-multiplier} - 1 ]]) ]]}} {{precision_dmg81=@{precision_dmg_macro}}} {{precision_dmg82=@{global_precision_dmg_macro}}} {{critical_dmg81=@{critical_dmg_macro}}} {{critical_dmg82=@{global_critical_dmg_macro}}} {{attack8name=@{iterative_attack8_name}}}</textarea>
											</span>
										</div>
									</div>
									<div class="sheet-advanced-macros" style="width:100%;height:auto;clear:both;">
										<div class="sheet-center sheet-repeating-hidesect">
											<div class="sheet-insertmacrocell" style="width:48.5%">
												<input class="sheet-textarea-gray" type="checkbox" name="attr_toggle_attack_macro_insert" value="@{var_attack_macro_insert}" title="@{toggle_attack_macro_insert}" checked />
												<label class="sheet-small-label2">
													<span class="sheet-super sheet-note-c" data-i18n="insert-macro-attack" data-i18n-title="additional-attack-macro-query-included-with-crits" data-i18n-aria-label="additional-attack-macro-query-included-with-crits" title="Additional Attack Macro/Query(included with crits)">'Add to Attack' Macro:</span>
													<input type="hidden" name="attr_var_attack_macro_insert" value="[[ @{attack_macro_insert} ]] [Macro]" />
													<textarea class="sheet-inline-textarea sheet-both" name="attr_attack_macro_insert" data-i18n-placeholder="full-macro-place" placeholder="Macro/Query" title="@{repeating_weapon_$X_attack_macro_insert}">0</textarea>
												</label>
											</div>
											<div class="sheet-insertmacrocell" style="width:48.5%">
												<input class="sheet-textarea-gray" type="checkbox" name="attr_toggle_damage_macro_insert" value="@{var_damage_macro_insert}" title="@{toggle_damage_macro_insert}" checked />
												<label class="sheet-small-label2">
													<span class="sheet-super sheet-note-c" data-i18n="insert-macro-damage" data-i18n-title="additional-damage-macro-query-included-with-crits" data-i18n-aria-label="additional-damage-macro-query-included-with-crits" title="Additional Damage Macro/Query(included with crits)">'Add to Damage' Macro:</span>
													<input type="hidden" name="attr_var_damage_macro_insert" value="[[ @{damage_macro_insert} ]] [Macro]" />
													<textarea class="sheet-inline-textarea sheet-both" name="attr_damage_macro_insert" data-i18n-placeholder="full-macro-place" placeholder="Macro/Query" title="@{repeating_weapon_$X_damage_macro_insert}">0</textarea>
												</label>
											</div>
										</div>
									</div>
									<div class="sheet-macro-text" style="width:100%;height:auto;clear:both;">
										<label class="sheet-small-label2" style="width:100%;height:auto;margin-left:0;margin-right:0;padding-left:2px;padding-right:2px;">
											<span class="sheet-super sheet-note-d" data-i18n="full-macro">Full Macro:</span>
											<textarea class="sheet-macro-text" title="@{repeating_weapon_$X_macro-text}" name="attr_macro-text">@{PC-whisper} &{template:pf_attack} @{toggle_attack_accessible} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle}} {{name=@{name}}} {{attack=[[ 1d20cs>[[ @{crit-target} ]] + @{attack_macro} ]]}} {{damage=[[@{damage-dice-num}d@{damage-die} + @{damage_macro}]]}} {{crit_confirm=[[ 1d20 + @{attack_macro} + [[ @{crit_conf_mod} ]] ]]}} {{crit_damage=[[ [[ @{damage-dice-num} * (@{crit-multiplier} - 1) ]]d@{damage-die} + ((@{damage_macro}) * [[ @{crit-multiplier} - 1 ]]) ]]}} {{type=@{type}}} {{weapon_notes=@{notes}}} @{iterative_attacks} @{macro_options} {{vs=@{vs}}} {{vs@{vs}=@{vs}}} {{precision_dmg1=@{precision_dmg_macro}}} {{precision_dmg1_type=@{precision_dmg_type}}} {{precision_dmg2=@{global_precision_dmg_macro}}} {{precision_dmg2_type=@{global_precision_dmg_type}}} {{critical_dmg1=@{critical_dmg_macro}}} {{critical_dmg1_type=@{critical_dmg_type}}} {{critical_dmg2=@{global_critical_dmg_macro}}} {{critical_dmg2_type=@{global_critical_dmg_type}}} {{attack1name=@{iterative_attack1_name}}}</textarea>
											<textarea style="display:none;" class="sheet-macro-text" title="@{repeating_weapon_$X_NPC-macro-text}" name="attr_NPC-macro-text">@{NPC-whisper} &{template:pf_attack} @{toggle_attack_accessible} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle}} {{name=@{name}}} {{attack=[[ 1d20cs>[[ @{crit-target} ]] + @{attack_macro} ]]}} {{damage=[[@{damage-dice-num}d@{damage-die} + @{damage_macro}]]}} {{crit_confirm=[[ 1d20 + @{attack_macro} + [[ @{crit_conf_mod} ]] ]]}} {{crit_damage=[[ [[ @{damage-dice-num} * (@{crit-multiplier} - 1) ]]d@{damage-die} + ((@{damage_macro}) * [[ @{crit-multiplier} - 1 ]]) ]]}} {{type=@{type}}} {{weapon_notes=@{notes}}} @{iterative_attacks} @{macro_options} {{vs=@{vs}}} {{vs@{vs}=@{vs}}} {{precision_dmg1=@{precision_dmg_macro}}} {{precision_dmg1_type=@{precision_dmg_type}}} {{precision_dmg2=@{global_precision_dmg_macro}}} {{precision_dmg2_type=@{global_precision_dmg_type}}} {{critical_dmg1=@{critical_dmg_macro}}} {{critical_dmg1_type=@{critical_dmg_type}}} {{critical_dmg2=@{global_critical_dmg_macro}}} {{critical_dmg2_type=@{global_critical_dmg_type}}} {{attack1name=@{iterative_attack1_name}}}</textarea>
										</label>
									</div>
									<div class="sheet-repeating-id">
										<label class="sheet-small-label2 sheet-left" style="width:32%;"><span data-i18n="row-identification-for-macros">Row ID for macros</span>:&nbsp;<span class="sheet-selectable" name="attr_row_id"></span></label>
										<label class="sheet-small-label2" title="ID of the Item from the Inventory tab that, when changed, updates this attack entry" data-i18n-title="source-item-title" data-i18n-aria-label="source-item-title"><input type="text" name="attr_source-item" title="@{repeating_weapon_$X_source-item}" value="" placeholder="Linked Item ID" data-i18n-placeholder="source-item-placeholder" /><span data-i18n="source-item">Linked Item ID</span>&nbsp;<span name="attr_source-item-name"></span></label>
										<label class="sheet-small-label2" title="ID of the spell from the spells tab that, when changed, updates this attack entry" data-i18n-title="source-spell-title" data-i18n-aria-label="source-spell-title"><input type="text" name="attr_source-spell" title="@{repeating_weapon_$X_source-spell}" value="" placeholder="Linked Spell ID" data-i18n-placeholder="source-spell-placeholder" /><span data-i18n="source-spell">Linked Spell ID</span>&nbsp;<span name="attr_source-spell-name"></span></label>
										<label class="sheet-small-label2" title="ID of the ability from the abilities tab that, when changed, updates this attack entry" data-i18n-title="source-ability-title" data-i18n-aria-label="source-ability-title"><input type="text" name="attr_source-ability" title="@{repeating_weapon_$X_source-ability}" value="" placeholder="Linked ability ID" data-i18n-placeholder="source-ability-placeholder" /><span data-i18n="source-ability">Linked ability ID</span>&nbsp;<span name="attr_source-ability-name"></span></label>
									</div>
								</div>
							</div>
						</fieldset>
					</div>
				</div>
			</div>
			<div class="sheet-section5 sheet-section sheet-section-skills" role="region" aria-label="Skills" data-i18n-aria-label="skills">
				<h1 class="sheet-selected-tabtitle" data-i18n="skills">Skills</h1>
				<div class="sheet-hide-readonly" style="display:none;">
					<input type="hidden" name="attr_adventure_skills-macro" value="" />
					<input type="hidden" name="attr_background_skills-macro" value="" />
					<input type="hidden" name="attr_consolidated_skills-macro" value="" />
					<input type="hidden" name="attr_NPC-adventure_skills-macro" value="" />
					<input type="hidden" name="attr_NPC-background_skills-macro" value="" />
					<input type="hidden" name="attr_NPC-consolidated_skills-macro" value="" />
					<button type="roll" class="sheet-command-button" name="attr_craft_skills_buttons_macro" value="@{CHAR-whisper} @{craft_skills-macro}" title="%{selected|craft_skills_buttons_macro}">craft</button>
					<button type="roll" class="sheet-command-button" name="attr_artistry_skills_buttons_macro" value="@{CHAR-whisper} @{artistry_skills-macro}" title="%{selected|artistry_skills_buttons_macro}">artistry</button>
					<button type="roll" class="sheet-command-button" name="attr_lore_skills_buttons_macro" value="@{CHAR-whisper} @{lore_skills-macro}" title="%{selected|lore_skills_buttons_macro}">lore</button>
					<button type="roll" class="sheet-command-button" name="attr_knowledge_skills_buttons_macro" value="@{CHAR-whisper} @{knowledge_skills-macro}" title="%{selected|knowledge_skills_buttons_macro}">knowledge</button>
					<button type="roll" class="sheet-command-button" name="attr_perform_skills_buttons_macro" value="@{CHAR-whisper} @{perform_skills-macro}" title="%{selected|perform_skills_buttons_macro}">perform</button>
					<button type="roll" class="sheet-command-button" name="attr_profession_skills_buttons_macro" value="@{CHAR-whisper} @{profession_skills-macro}" title="%{selected|profession_skills_buttons_macro}">profession</button>
					<button type="roll" class="sheet-command-button" name="attr_misc-skill_skills_buttons_macro" value="@{CHAR-whisper} @{misc-skill_skills-macro}" title="%{selected|misc-skill_skills_buttons_macro}">misc-skill</button>
					<button type="roll" class="sheet-command-button" name="attr_NPC-craft_skills_buttons_macro" value="@{CHAR-whisper} @{NPC-craft_skills-macro}" title="%{selected|NPC-craft_skills_buttons_macro}">craft</button>
					<button type="roll" class="sheet-command-button" name="attr_NPC-artistry_skills_buttons_macro" value="@{CHAR-whisper} @{NPC-artistry_skills-macro}" title="%{selected|NPC-artistry_skills_buttons_macro}">artistry</button>
					<button type="roll" class="sheet-command-button" name="attr_NPC-lore_skills_buttons_macro" value="@{CHAR-whisper} @{NPC-lore_skills-macro}" title="%{selected|NPC-lore_skills_buttons_macro}">lore</button>
					<button type="roll" class="sheet-command-button" name="attr_NPC-knowledge_skills_buttons_macro" value="@{CHAR-whisper} @{NPC-knowledge_skills-macro}" title="%{selected|NPC-knowledge_skills_buttons_macro}">knowledge</button>
					<button type="roll" class="sheet-command-button" name="attr_NPC-perform_skills_buttons_macro" value="@{CHAR-whisper} @{NPC-perform_skills-macro}" title="%{selected|NPC-perform_skills_buttons_macro}">perform</button>
					<button type="roll" class="sheet-command-button" name="attr_NPC-profession_skills_buttons_macro" value="@{CHAR-whisper} @{NPC-profession_skills-macro}" title="%{selected|NPC-profession_skills_buttons_macro}">profession</button>
					<button type="roll" class="sheet-command-button" name="attr_NPC-misc-skill_skills_buttons_macro" value="@{CHAR-whisper} @{NPC-misc-skill_skills-macro}" title="%{selected|NPC-misc-skill_skills_buttons_macro}">misc-skill</button>
					<input type="hidden" name="attr_craft_skills-macro" value="&{template:pf_generic} @{toggle_accessible_flag} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_generic-skill}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle}} {{name=^{craft} ^{skills} }} {{ ^{no-skills-available} }}" />
					<input type="hidden" name="attr_artistry_skills-macro" value="&{template:pf_generic} @{toggle_accessible_flag} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_generic-skill}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle}} {{name=^{artistry} ^{skills} }} {{ ^{no-skills-available} }}" />
					<input type="hidden" name="attr_lore_skills-macro" value="&{template:pf_generic} @{toggle_accessible_flag} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_generic-skill}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle}} {{name=^{lore} ^{skills} }} {{ ^{no-skills-available} }}" />
					<input type="hidden" name="attr_knowledge_skills-macro" value="&{template:pf_generic} @{toggle_accessible_flag} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_generic-skill}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle}} {{name=^{knowledge} ^{skills} }} {{ [^{arcana}](~@{character_id}|Knowledge-Arcana-check) [^{dungeoneering}](~@{character_id}|Knowledge-Dungeoneering-check) [^{engineering}](~@{character_id}|Knowledge-Engineering-check) [^{geography}](~@{character_id}|Knowledge-Geography-check) [^{history}](~@{character_id}|Knowledge-History-check) [^{local}](~@{character_id}|Knowledge-Local-check) [^{nature}](~@{character_id}|Knowledge-Nature-check) [^{nobility}](~@{character_id}|Knowledge-Nobility-check) [^{planes}](~@{character_id}|Knowledge-Planes-check) [^{religion}](~@{character_id}|Knowledge-Religion-check)  }}" />
					<input type="hidden" name="attr_perform_skills-macro" value="&{template:pf_generic} @{toggle_accessible_flag} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_generic-skill}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle}} {{name=^{perform} ^{skills} }} {{ ^{no-skills-available} }}" />
					<input type="hidden" name="attr_profession_skills-macro" value="&{template:pf_generic} @{toggle_accessible_flag} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_generic-skill}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle}} {{name=^{profession} ^{skills} }} {{ ^{no-skills-available} }}" />
					<input type="hidden" name="attr_misc-skill_skills-macro" value="&{template:pf_generic} @{toggle_accessible_flag} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_generic-skill}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle}} {{name=^{misc-skill} ^{skills} }} {{ ^{no-skills-available} }}" />
					<input type="hidden" name="attr_NPC-craft_skills-macro" value="&{template:pf_generic} @{toggle_accessible_flag} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_generic-skill}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle}} {{name=^{npc} ^{craft} ^{skills} }} {{ ^{no-skills-available} }}" />
					<input type="hidden" name="attr_NPC-artistry_skills-macro" value="&{template:pf_generic} @{toggle_accessible_flag} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_generic-skill}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle}} {{name=^{npc} ^{artistry} ^{skills} }} {{ ^{no-skills-available} }}" />
					<input type="hidden" name="attr_NPC-lore_skills-macro" value="&{template:pf_generic} @{toggle_accessible_flag} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_generic-skill}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle}} {{name=^{npc} ^{lore} ^{skills} }} {{ ^{no-skills-available} }}" />
					<input type="hidden" name="attr_NPC-knowledge_skills-macro" value="&{template:pf_generic} @{toggle_accessible_flag} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_generic-skill}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle}} {{name=^{npc} ^{knowledge} ^{skills} }} {{ [^{arcana}](~@{character_id}|NPC-Knowledge-Arcana-check) [^{dungeoneering}](~@{character_id}|NPC-Knowledge-Dungeoneering-check) [^{engineering}](~@{character_id}|NPC-Knowledge-Engineering-check) [^{geography}](~@{character_id}|NPC-Knowledge-Geography-check) [^{history}](~@{character_id}|NPC-Knowledge-History-check) [^{local}](~@{character_id}|NPC-Knowledge-Local-check) [^{nature}](~@{character_id}|NPC-Knowledge-Nature-check) [^{nobility}](~@{character_id}|NPC-Knowledge-Nobility-check) [^{planes}](~@{character_id}|NPC-Knowledge-Planes-check) [^{religion}](~@{character_id}|NPC-Knowledge-Religion-check) }}" />
					<input type="hidden" name="attr_NPC-perform_skills-macro" value="&{template:pf_generic} @{toggle_accessible_flag} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_generic-skill}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle}} {{name=^{npc} ^{perform} ^{skills} }} {{ ^{no-skills-available} }}" />
					<input type="hidden" name="attr_NPC-profession_skills-macro" value="&{template:pf_generic} @{toggle_accessible_flag} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_generic-skill}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle}} {{name=^{npc} ^{profession} ^{skills} }} {{ ^{no-skills-available} }}" />
					<input type="hidden" name="attr_NPC-misc-skill_skills-macro" value="&{template:pf_generic} @{toggle_accessible_flag} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_generic-skill}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle}} {{name=^{npc} ^{misc-skill} ^{skills} }} {{ ^{no-skills-available} }}" />
				</div>
				<input class="sheet-showarrow sheet-h2arrow" type="checkbox" name="attr_skill-ranks-show" data-i18n-aria-label="skill-rank-totals" title="Click to expand" data-i18n-title="showsect-cmd" value="1" checked />
				<h2 class="sheet-clickheader sheet-showsect"><label title="Click to expand" data-i18n-title="showsect-cmd" data-i18n-aria-label="showsect-cmd" data-i18n="skill-rank-totals">Skill Rank Totals</label></h2>
				<div class="sheet-h2-section sheet-table sheet-skill-totals">
					<input type="text" style="display:none;" name="attr_Core-Skill-Ranks" value="(abs(@{unchained_skills-show}-1) * (@{Acrobatics-ranks} + @{Bluff-ranks} + @{Climb-ranks} + @{Diplomacy-ranks} + @{Disable-Device-ranks} + @{Disguise-ranks} + @{Escape-Artist-ranks} + @{Fly-ranks} + @{Heal-ranks} + @{Intimidate-ranks} + @{Knowledge-Arcana-ranks} + @{Knowledge-Dungeoneering-ranks} + @{Knowledge-Local-ranks} + @{Knowledge-Nature-ranks} + @{Knowledge-Planes-ranks} + @{Knowledge-Religion-ranks} + @{Perception-ranks} + @{Ride-ranks} + @{Sense-Motive-ranks} + @{Spellcraft-ranks} + @{Stealth-ranks} + @{Survival-ranks} + @{Swim-ranks} + @{Use-Magic-Device-ranks} + @{Appraise-ranks} + @{Handle-Animal-ranks} + @{Knowledge-Engineering-ranks} + @{Knowledge-Geography-ranks} + @{Knowledge-History-ranks} + @{Knowledge-Nobility-ranks} + @{Linguistics-ranks} + @{Sleight-of-Hand-ranks} + @{Misc-Adventure-Ranks} + @{Misc-BG-Ranks} + @{Craft-BG-Ranks} + @{Perform-BG-Ranks} + @{Profession-BG-Ranks}  ))" disabled />
					<input type="text" style="display:none;" name="attr_Adventure-Skill-Ranks" value="(@{unchained_skills-show} * @{BG-Skill-Use}*(@{Acrobatics-ranks} + @{Bluff-ranks} + @{Climb-ranks} + @{Diplomacy-ranks} + @{Disable-Device-ranks} + @{Disguise-ranks} + @{Escape-Artist-ranks} + @{Fly-ranks} + @{Heal-ranks} + @{Intimidate-ranks} + @{Knowledge-Arcana-ranks} + @{Knowledge-Dungeoneering-ranks} + @{Knowledge-Local-ranks} + @{Knowledge-Nature-ranks} + @{Knowledge-Planes-ranks} + @{Knowledge-Religion-ranks} + @{Perception-ranks} + @{Ride-ranks} + @{Sense-Motive-ranks} + @{Spellcraft-ranks} + @{Stealth-ranks} + @{Survival-ranks} + @{Swim-ranks} + @{Use-Magic-Device-ranks} + @{Misc-Adventure-Ranks} ))" disabled />
					<input type="text" style="display:none;" name="attr_Consolidated-Skill-Ranks" value="(@{unchained_skills-show} * abs(@{BG-Skill-Use}-1) * (  @{CS-Acrobatics-ranks} + @{CS-Athletics-ranks} + @{CS-Finesse-ranks} + @{CS-Influence-ranks} + @{CS-Nature-ranks} + @{CS-Perception-ranks} + @{CS-Performance-ranks} + @{CS-Religion-ranks} + @{CS-Society-ranks} + @{CS-Spellcraft-ranks} + @{CS-Stealth-ranks} + @{CS-Survival-ranks} ))" disabled />
					<input type="text" style="display:none;" name="attr_Misc-Adventure-Ranks" value="(@{Misc-Skill-0-ranks} + @{Misc-Skill-1-ranks} + @{Misc-Skill-2-ranks} + @{Misc-Skill-3-ranks} + @{Misc-Skill-4-ranks} )" disabled />
					<input type="text" style="display:none;" name="attr_Misc-BG-Ranks" value="(@{Misc-Skill-5-ranks} + @{Misc-Skill-6-ranks} + @{Misc-Skill-7-ranks} + @{Misc-Skill-8-ranks} + @{Misc-Skill-9-ranks})" disabled />
					<input type="text" style="display:none;" name="attr_Profession-BG-Ranks" value="(@{Profession-ranks} + @{Profession2-ranks} + @{Profession3-ranks} + @{Profession4-ranks} + @{Profession5-ranks} + @{Profession6-ranks} + @{Profession7-ranks} + @{Profession8-ranks} + @{Profession9-ranks} + @{Profession10-ranks})" disabled />
					<input type="text" style="display:none;" name="attr_Perform-BG-Ranks" value="(@{Perform-ranks} + @{Perform2-ranks} + @{Perform3-ranks} + @{Perform4-ranks} + @{Perform5-ranks} + @{Perform6-ranks} + @{Perform7-ranks} + @{Perform8-ranks} + @{Perform9-ranks} + @{Perform10-ranks})" disabled />
					<input type="text" style="display:none;" name="attr_Craft-BG-Ranks" value="(@{Craft-ranks} + @{Craft2-ranks} + @{Craft3-ranks} + @{Craft4-ranks} + @{Craft5-ranks} + @{Craft6-ranks} + @{Craft7-ranks} + @{Craft8-ranks} + @{Craft9-ranks} + @{Craft10-ranks})" disabled />
					<input type="text" style="display:none;" name="attr_Artistry-BG-Ranks" value="(@{Artistry-ranks} + @{Artistry2-ranks} + @{Artistry3-ranks} + @{Artistry4-ranks} + @{Artistry5-ranks} + @{Artistry6-ranks} + @{Artistry7-ranks} + @{Artistry8-ranks} + @{Artistry9-ranks} + @{Artistry10-ranks})" disabled />
					<input type="text" style="display:none;" name="attr_Lore-BG-Ranks" value="(@{Lore-ranks} + @{Lore2-ranks} + @{Lore3-ranks} + @{Lore4-ranks} + @{Lore5-ranks} + @{Lore6-ranks} + @{Lore7-ranks} + @{Lore8-ranks} + @{Lore9-ranks} + @{Lore10-ranks})" disabled />
					<input type="checkbox" name="attr_unchained_skills-show" class="sheet-unchained-show" value="1" role="presentation" />
					<input type="checkbox" name="attr_BG-Skill-Use" class="sheet-consolidated-show" value="0" role="presentation" />
					<input type="checkbox" name="attr_BG-Skill-Use" class="sheet-bg-show" value="1" role="presentation" checked />
					<span class="sheet-table-name" data-i18n="skill-ranks">Skill Ranks</span>
					<div class="sheet-table">
						<div class="sheet-table-row">
							<span class="sheet-table-header" style="position: relative;vertical-align: bottom;">
								<span style="position:absolute;display:block;clear:both;top: 0;text-align:left;" data-i18n="extra-ranks">Extra ranks:</span><br>
								<span class="sheet-super sheet-note-a" style="display:block;clear:both;" data-i18n="skill-miscellaneous">Skill Misc</span>
							</span>
							<span class="sheet-table-header sheet-right-border" data-i18n="modifier-abbrv">Mod</span>
							<span class="sheet-table-header sheet-divider"></span>
							<span class="sheet-table-header sheet-show-readonly">
								<span data-i18n="maximum-abbrv">Max</span>
								<span class="sheet-bg" data-i18n="adventure">Adventure </span><span data-i18n="skill-ranks">Skill Ranks</span>
							</span>
							<span class="sheet-table-header"></span>
							<span class="sheet-table-header sheet-show-readonly">
								<span data-i18n="total">Total</span>
								<span class="sheet-bg" data-i18n="adventure">Adventure </span><span data-i18n="skill-ranks">Skill Ranks</span>
							</span>
							<span class="sheet-table-header"></span>
							<span class="sheet-table-header sheet-show-readonly">
								<span class="sheet-bg" data-i18n="adventure">Adventure </span><span data-i18n="ranks-remaining">Ranks Remaining</span>
							</span>
							<span class="sheet-table-header sheet-bg"></span>
							<span class="sheet-table-header sheet-bg" title="Any number of adventure skill ranks can be traded for an equal number of background skill ranks, but not vice versa." data-i18n="move-adventure-to-background">Move Adventure to Background</span>
							<span class="sheet-table-header sheet-bg"></span>
							<span class="sheet-table-header sheet-bg sheet-show-readonly" title="Optional: used for PF Unchained." data-i18n="background-ranks-remaining">Background Ranks Remaining</span>
							<span class="sheet-table-header sheet-bg" data-i18n="total-background-skill-ranks">Total Background Skill Ranks</span>
						</div>
					<div class="sheet-table-row">
						<input type="checkbox" name="attr_Max-Skill-Ranks-mod_error" class="sheet-error-mshow" value="1" />
						<span class="sheet-table-cell sheet-highlight" style="width:10%"><input type="text" title="@{Max-Skill-Ranks-Misc}" name="attr_Max-Skill-Ranks-Misc" placeholder="#/Equation" data-i18n-placeholder="equation-macro-place" /></span>
						<span class="sheet-table-cell sheet-highlight sheet-right-border"><input type="number" title="@{Max-Skill-Ranks-mod}" name="attr_Max-Skill-Ranks-mod" value="0" class="sheet-calc" readonly style="width:4em;" /></span>
						<span class="sheet-divider"></span>
						<span class="sheet-table-cell sheet-show-readonly"><input type="number" title="@{Max-Skill-Ranks}" name="attr_Max-Skill-Ranks" value="0" class="sheet-calc" readonly /></span>
						<span class="sheet-divider">-</span>
						<span class="sheet-table-cell sheet-show-readonly">
							<input type="text" title="@{Total-Skill-Ranks}" name="attr_Total-Skill-Ranks" value="(@{Core-Skill-Ranks}+@{Adventure-Skill-Ranks}+@{Consolidated-Skill-Ranks})" class="sheet-number" disabled />
						</span>
						<span class="sheet-divider">=</span>
						<span class="sheet-table-cell sheet-show-readonly">
							<input type="text" title="@{Skill-Ranks-Remaining}" name="attr_Skill-Ranks-Remaining" value="(@{Max-Skill-Ranks} - @{Total-Skill-Ranks} - @{adventure-skills-traded} )" class="sheet-number" disabled />
						</span>
						<span class="sheet-divider sheet-bg">&rarr;</span>
						<span class="sheet-table-cell sheet-bg"><input type="text" class="sheet-number sheet-calc" title="@{adventure-skills-traded}" name="attr_adventure-skills-traded" value="(@{unchained_skills-show} * @{BG-Skill-Use}* -1*floor(((@{level} * 2)-@{Total-BG-Skill-Ranks}+0.1)/(abs((@{level} * 2)-@{Total-BG-Skill-Ranks}+0.1)+0.001))*(( @{Total-BG-Skill-Ranks} - (@{level} * 2)) ) )" style="width:2.85em" disabled /></span>
						<span class="sheet-divider sheet-bg" title="Use up to Adventure Ranks Remaining as ranks in Background Skills">&rarr;</span>
						<span class="sheet-table-cell sheet-bg sheet-show-readonly"><input type="text" title="@{BG-Skill-Ranks-Remaining}" name="attr_BG-Skill-Ranks-Remaining" value="( ((@{level} * 2) - @{Total-BG-Skill-Ranks} + @{adventure-skills-traded}))" class="sheet-number sheet-calc" disabled /></span>
						<span class="sheet-table-cell sheet-bg">(&nbsp;<input type="text" class="sheet-number sheet-calc" title="@{Total-BG-Skill-Ranks}" name="attr_Total-BG-Skill-Ranks" value="(@{unchained_skills-show} * @{BG-Skill-Use}*(@{Appraise-ranks} + @{Handle-Animal-ranks} + @{Knowledge-Engineering-ranks} + @{Knowledge-Geography-ranks} + @{Knowledge-History-ranks} + @{Knowledge-Nobility-ranks} + @{Linguistics-ranks} + @{Sleight-of-Hand-ranks} + @{Misc-BG-Ranks} + @{Craft-BG-Ranks} + @{Perform-BG-Ranks} + @{Profession-BG-Ranks} + @{Artistry-BG-Ranks} + @{Lore-BG-Ranks} ))" disabled />&nbsp;)</span>
					</div>
				</div>
				</div>
				<div class="sheet-cheat"></div>
				<input class="sheet-showarrow sheet-h2arrow" type="checkbox" name="attr_skill_options-show" data-i18n-aria-label="skill-options" title="Click to expand" data-i18n-title="showsect-cmd" value="1" checked />
				<h2 class="sheet-clickheader sheet-showsect"><label title="Click to expand" data-i18n-title="showsect-cmd" data-i18n-aria-label="showsect-cmd" data-i18n="skill-options">Skill Options</label></h2>
				<div class="sheet-h2-section sheet-skill-options">
					<div class="sheet-table sheet-config-table sheet-options sheet-named">
						<div class="sheet-table-name" data-i18n="skill-options">Skill Options</div>
						<div class="sheet-table-group">
							<div class="sheet-table-row">
								<span class="sheet-table-cell sheet-left">
									<label class="sheet-nowrap">
										<input type="checkbox" class="sheet-boldlabel-check" name="attr_enforce_requires_training" value="1" /><b title="Only affects skillbook buttons" data-i18n="enforce-requires-training">Enforce Requires Training?</b>
									</label>
									<br>
									<label>
										<input type="hidden" name="attr_var_skill-notes" value="{{description=@{Skill-notes}}}" disabled >
										<input type="hidden" name="attr_skill_options" value="@{toggle_skill-notes}" disabled >
										<input type="checkbox" class="sheet-boldlabel-check" name="attr_toggle_skill-notes" value="@{var_skill-notes}" title="@{toggle_skill-notes}" checked><b title="Include Skill notes with roll?" data-i18n-title="include-skill-notes" data-i18n-aria-label="include-skill-notes" data-i18n="skill-notes">Skill notes?</b>
									</label>
									<br>
									<label>
										<input type="checkbox" class="sheet-boldlabel-check" name="attr_include_skill_totals" value="1" checked><b title="Only affects skillbook buttons" data-i18n="include-skill-totals">Include Skill Totals?</b>
									</label>
								</span>
								<span class="sheet-table-cell sheet-left">
									<label>
										<span data-i18n="enable-take-10-or-20-options" data-i18n-title="enable-skill-check-query-title" data-i18n-aria-label="enable-skill-check-query-title" title="Skill Checks will include an option to Roll, Take 10, or Take 20.">Enable Take 10 or 20 options?</span>
										<select name="attr_skill-query" title="@{skill-query}" style="width:4.5em;">
											<option value="1d20+@{skill-invest-query}" data-i18n="no" selected>No</option>
											<option value="?{Roll or Take 10/20?|1d20,1d20+@{skill-invest-query&#125;|10,10+@{skill-invest-query&#125;|20,20+@{skill-invest-query&#125;}" data-i18n="yes">Yes</option>
											<option value="@{skill-invest-query}" data-i18n="custom-roll">Custom Roll</option>
										</select>
									</label>
								</span>
								<input type="checkbox" class="sheet-or-A-show sheet-noshow" name="attr_adv_macro_show" value="1" role="presentation" />
								<input type="checkbox" class="sheet-or-B-show sheet-noshow" name="attr_skill-query" value="@{skill-invest-query}" role="presentation" />
								<span class="sheet-table-cell sheet-left sheet-either-or-sect" style="width:20%;">
									<label>
										<span data-i18n="add-skill-bonus-macro">Add Skill Bonus Macro?</span>
										<select name="attr_skill-invest-query" title="@{skill-invest-query}" style="width:4.5em;">
											<option value="0" data-i18n="no" selected>No</option>
											<option value="@{investigator_dice}" data-i18n="yes-or-custom">Yes or custom</option>
										</select>
									</label>
								</span>
								<input type="checkbox" name="attr_skill-invest-query" class="sheet-nextitem-show sheet-noshow" value="@{investigator_dice}" />
								<span class="sheet-table-cell sheet-left sheet-nextitem sheet-either-or-sect" style="width:20%;">
									<label>
										<span class="sheet-super sheet-note-c" data-i18n="skill-bonus-macro" data-i18n-title="additional-modifier-or-macro" data-i18n-aria-label="additional-modifier-or-macro" title="Additional modifier or macro with brackets, e.g. [[1d6]], [[2d20k1]] etc">Skill Bonus Macro</span>
										<textarea title="@{investigator_dice}" class="sheet-inline-textarea sheet-both" type="text" name="attr_investigator_dice" data-i18n-placeholder="full-macro-place">1d6 [custom bonus]</textarea>
									</label>
								</span>
							</div>
						</div>
						<div class="sheet-table-group sheet-hide-readonly">
							<div class="sheet-table-row">
								<span class="sheet-table-cell sheet-left">
									<label>
										<span data-i18n="number-fill-in-skills-show">Number of craft, perform, profession to show:</span>
										<select name="attr_custom_skill_num_show" title="@{custom_skill_num_show}">
										  <option name="attr_custom_skill_num_show" value="1" selected>•1</option>
										  <option name="attr_custom_skill_num_show" value="2">&nbsp;2</option>
										  <option name="attr_custom_skill_num_show" value="3">&nbsp;3</option>
										  <option name="attr_custom_skill_num_show" value="6">&nbsp;6</option>
										  <option name="attr_custom_skill_num_show" value="10">10</option>
										</select>
									</label>
								</span>
								<span class="sheet-table-cell sheet-left">
									<label>
										<span data-i18n="number-misc-skills-show">Number of Misc skills to show:</span>									
										<select name="attr_misc_skill_num_show" title="@{misc_skill_num_show}">
										  <option name="attr_misc_skill_num_show" value="1" selected >&nbsp;1</option>
										  <option name="attr_misc_skill_num_show" value="2">&nbsp;2</option>
										  <option name="attr_misc_skill_num_show" value="3" >&nbsp;3</option>
										  <option name="attr_misc_skill_num_show" value="6">&nbsp;6</option>
										  <option name="attr_misc_skill_num_show" value="10">10</option>
									  </select>
									</label>
								</span>
							</div>
						</div>
					</div>
				</div>
				<div class="sheet-cheat"></div>
				<input class="sheet-showarrow sheet-h2arrow" type="checkbox" name="attr_skills-show" data-i18n-aria-label="skills" title="Click to expand" data-i18n-title="showsect-cmd" value="1" checked />
				<h2 class="sheet-clickheader sheet-showsect"><label title="Click to expand" data-i18n-title="showsect-cmd" data-i18n-aria-label="showsect-cmd" data-i18n="skills">Skills</label></h2>
				<div class="sheet-h2-section sheet-skilllist sheet-wide-readonly">
					<input type="checkbox" name="attr_adv_macro_show" class="sheet-advanced-macro-show" value="1" role="presentation" />
					<label><input type="checkbox" class="sheet-boldlabel-check" name="attr_skill_onetimecolumns_show" title="@{skill_onetimecolumns_show}" value="1" role="presentation" checked /><b data-i18n-title="show-onetime-columns-title" data-i18n-aria-label="show-onetime-columns-title" title="show feat and race and onetime columns" data-i18n="show-more-fields">Show more fields</b></label>
					<input type="checkbox" class="sheet-skill-onetime-show sheet-noshow" name="attr_skill_onetimecolumns_show" title="@{skill_onetimecolumns_show}" value="1" role="presentation" checked />
					<input type="checkbox" class="sheet-unchained-show" name="attr_unchained_skills-show" value="1" role="presentation" />
					<input type="checkbox" class="sheet-consolidated-show" name="attr_BG-Skill-Use" value="0" role="presentation" />
					<input type="checkbox" class="sheet-bg-show" name="attr_BG-Skill-Use" value="1" checked role="presentation" checked />
					<div role="menubar" class="sheet-skillsnav sheet-tabs" aria-label="Skills" data-i18n-aria-label="skills"></div>
					<input type="radio" class="sheet-bg-only sheet-tabinput sheet-tab1" name="attr_skills_tab" value="1" data-i18n-title="adventure-skills" aria-label="adventure" data-i18n-aria-label="adventure" />
					<label role="menuitem" class="sheet-bg-only sheet-tab sheet-tab1" data-i18n-title="adventure-skills" data-i18n-aria-label="adventure" title="Adventure Skills" data-i18n="adventure">Adventure</label>
					<input type="radio" class="sheet-bg-only sheet-tabinput sheet-tab2" name="attr_skills_tab" value="2" data-i18n-title="background-skills" aria-label="background" data-i18n-aria-label="background" />
					<label role="menuitem" class="sheet-bg-only sheet-tab sheet-tab2" data-i18n-title="background-skills" data-i18n-aria-label="background" title="Background Skills" data-i18n="background">Background</label>
					<input type="radio" class="sheet-tabinput sheet-tab99" name="attr_skills_tab" data-i18n-title="all-skills" aria-label="All Skills" data-i18n-aria-label="all-skills" value="99" checked />
					<label role="menuitem" class="sheet-consolidated sheet-tab sheet-tab99" data-i18n-title="consolidated-skills" data-i18n-aria-label="consolidated" title="Consolidated Skills" data-i18n="consolidated">Consolidated</label>
					<label role="menuitem" class="sheet-core-only sheet-tab sheet-tab99" data-i18n-title="all-skills" data-i18n-aria-label="skills" title="All Skills" data-i18n="skills">Skills</label>
					<label role="menuitem" class="sheet-bg-only sheet-tab sheet-tab99" data-i18n-title="all-skills" data-i18n-aria-label="skills" title="All Skills" data-i18n="all">All</label>
					<span class="sheet-nontable-name">&nbsp;</span>
					<div class="sheet-table sheet-skills sheet-narrow-numbers">
						<input type="checkbox" name="attr_custom_skill_num_show" class="sheet-custom-skill-1-show sheet-noshow" value="1" />
						<input type="checkbox" name="attr_custom_skill_num_show" class="sheet-custom-skill-2-show sheet-noshow" value="2" />
						<input type="checkbox" name="attr_custom_skill_num_show" class="sheet-custom-skill-3-show sheet-noshow" value="3" />
						<input type="checkbox" name="attr_custom_skill_num_show" class="sheet-custom-skill-6-show sheet-noshow" value="6" />
						<input type="checkbox" name="attr_custom_skill_num_show" class="sheet-custom-skill-10-show sheet-noshow" value="10" />
						<input type="checkbox" name="attr_misc_skill_num_show" class="sheet-misc-skill-1-show sheet-noshow" value="1" />
						<input type="checkbox" name="attr_misc_skill_num_show" class="sheet-misc-skill-2-show sheet-noshow" value="2" />
						<input type="checkbox" name="attr_misc_skill_num_show" class="sheet-misc-skill-3-show sheet-noshow" value="3" />
						<input type="checkbox" name="attr_misc_skill_num_show" class="sheet-misc-skill-6-show sheet-noshow" value="6" />
						<input type="checkbox" name="attr_misc_skill_num_show" class="sheet-misc-skill-10-show sheet-noshow" value="10" />
						<div class="sheet-table-row">
							<span class="sheet-table-header"></span>
							<span class="sheet-table-header" title="Class Skill" data-i18n="class-skill-abbrv">CS</span>
							<span class="sheet-table-header sheet-entry-vlong" data-i18n="skill">Skill</span>
							<span class="sheet-table-header" data-i18n="total">Total</span>
							<span class="sheet-table-header" data-i18n="ranks">Ranks</span>
							<span class="sheet-table-header sheet-ability-column" data-i18n="ability">Ability</span>
							<span class="sheet-table-header" data-i18n="modifier-abbrv">Mod</span>
							<span class="sheet-table-header" data-i18n="race">Race</span>
							<span class="sheet-table-header" data-i18n="trait">Trait</span>
							<span class="sheet-table-header" data-i18n="feat">Feat</span>
							<span class="sheet-table-header" data-i18n="item">Item</span>
							<span class="sheet-table-header sheet-entry-15p sheet-super sheet-note-a" data-i18n="miscellaneous-macro-abbrv">Misc Macro</span>
							<span class="sheet-table-header" data-i18n="miscellaneous-abbrv">Misc</span>
							<span class="sheet-table-header sheet-skill-conds-header" title="Class Skill Bonus, Armor Check Penalty, Size modifier, Conditions" data-i18n="class skill-bonus|armor-check-penalty|size-mod|condition-penalty-abbrv">Cl/Ac/Sz/Co&nbsp;</span>
							<span class="sheet-table-header" style="width:2em;" title="Requires Training" data-i18n="requires-training-abbrv">RT</span>
							<span class="sheet-table-header sheet-entry-15p-shrink" data-i18n="notes">Notes</span>
							<span class="sheet-table-header sheet-entry-15p-shrink sheet-super sheet-note-d" data-i18n="macro">Macro</span>
						</div>
						<div class="sheet-table-row sheet-adventure">
							<span class="sheet-table-cell"><button style="font-size:100%;" title="%{selected|Acrobatics-Check}" type="roll" value="@{PC-Whisper} @{Acrobatics-macro}" name="roll_Acrobatics-Check"></button></span>
							<span class="sheet-table-cell"><input title="@{Acrobatics-cs}" type="checkbox" name="attr_Acrobatics-cs" value="3" /></span>
							<span class="sheet-table-cell sheet-left" data-i18n="acrobatics">Acrobatics</span>
							<span class="sheet-table-cell"><input title="@{Acrobatics}" type="number" name="attr_Acrobatics" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Acrobatics-ranks}" type="number" name="attr_Acrobatics-ranks" value="0" /></span>
							<span class="sheet-table-cell">
								<select title="@{Acrobatics-ability}" name="attr_Acrobatics-ability" class="sheet-select-small">
									<option value="@{STR-mod}" data-i18n="strength-abbrv">STR</option>
									<option value="@{DEX-mod}" data-i18n="dexterity-abbrv-default" selected>&#8226;DEX</option>
									<option value="@{CON-mod}" data-i18n="constitution-abbrv">CON</option>
									<option value="@{INT-mod}" data-i18n="intelligence-abbrv">INT</option>
									<option value="@{WIS-mod}" data-i18n="wisdom-abbrv">WIS</option>
									<option value="@{CHA-mod}" data-i18n="charisma-abbrv">CHA</option>
								</select>
							</span>
							<span class="sheet-table-cell"><input title="@{Acrobatics-ability-mod}" type="number" name="attr_Acrobatics-ability-mod" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Acrobatics-racial}" type="number" name="attr_Acrobatics-racial" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Acrobatics-trait}" type="number" name="attr_Acrobatics-trait" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Acrobatics-feat}" type="number" name="attr_Acrobatics-feat" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Acrobatics-item}" type="number" name="attr_Acrobatics-item" value="0" /></span>
							<input class="sheet-error-mshow" type="checkbox" value="1" role="status" aria-live="polite" name="attr_Acrobatics-misc-mod_error" />
							<span class="sheet-table-cell sheet-highlight"><input title="@{Acrobatics-misc}" type="text" name="attr_Acrobatics-misc" value="" placeholder="#/Equation" data-i18n-placeholder="equation-macro-place" /></span>
							<span class="sheet-table-cell sheet-highlight"><input title="@{Acrobatics-misc-mod}" type="number" class="sheet-calc" readonly name="attr_Acrobatics-misc-mod" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Acrobatics-class}" type="text" name="attr_Acrobatics-class" value="0/0/0/0" class="sheet-calc sheet-skill-conds" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Acrobatics-ReqTrain}" type="checkbox" name="attr_Acrobatics-ReqTrain" value="1" /></span>
							<span class="sheet-table-cell"><textarea class="sheet-skill-macro-text" title="@{Acrobatics-note}" name="attr_Acrobatics-note"></textarea></span>
							<span class="sheet-table-cell"><textarea class="sheet-skill-macro-text" title="@{Acrobatics-macro}" name="attr_Acrobatics-macro">&{template:pf_generic} @{toggle_accessible_flag} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_generic-skill}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle}} {{name=^{acrobatics}}} {{Check=[[ @{skill-query} + [[ @{Acrobatics} ]] ]]}} @{Acrobatics-ut} @{skill_options} @{Acrobatics-cond-notes} {{generic_note=@{Acrobatics-note}}}</textarea></span>
						</div>
						<div class="sheet-table-row sheet-bg">
							<span class="sheet-table-cell"><button style="font-size:100%;" title="%{selected|Appraise-Check}" type="roll" value="@{PC-Whisper} @{Appraise-macro}" name="roll_Appraise-Check"></button></span>
							<span class="sheet-table-cell"><input title="@{Appraise-cs}" type="checkbox" name="attr_Appraise-cs" value="3" /></span>
							<span class="sheet-table-cell sheet-left" data-i18n="appraise">Appraise</span>
							<span class="sheet-table-cell"><input title="@{Appraise}" type="number" name="attr_Appraise" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Appraise-ranks}" type="number" name="attr_Appraise-ranks" value="0" /></span>
							<span class="sheet-table-cell">
								<select title="@{Appraise-ability}" name="attr_Appraise-ability" class="sheet-select-small">
									<option value="@{STR-mod}" data-i18n="strength-abbrv">STR</option>
									<option value="@{DEX-mod}" data-i18n="dexterity-abbrv">DEX</option>
									<option value="@{CON-mod}" data-i18n="constitution-abbrv">CON</option>
									<option value="@{INT-mod}" data-i18n="intelligence-abbrv-default" selected>&#8226;INT</option>
									<option value="@{WIS-mod}" data-i18n="wisdom-abbrv">WIS</option>
									<option value="@{CHA-mod}" data-i18n="charisma-abbrv">CHA</option>
								</select>
							</span>
							<span class="sheet-table-cell"><input title="@{Appraise-ability-mod}" type="number" name="attr_Appraise-ability-mod" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Appraise-racial}" type="number" name="attr_Appraise-racial" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Appraise-trait}" type="number" name="attr_Appraise-trait" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Appraise-feat}" type="number" name="attr_Appraise-feat" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Appraise-item}" type="number" name="attr_Appraise-item" value="0" /></span>
							<input class="sheet-error-mshow" type="checkbox" value="1" role="status" aria-live="polite" name="attr_Appraise-misc-mod_error" />
							<span class="sheet-table-cell sheet-highlight"><input title="@{Appraise-misc}" type="text" name="attr_Appraise-misc" value="" placeholder="#/Equation" data-i18n-placeholder="equation-macro-place" /></span>
							<span class="sheet-table-cell sheet-highlight"><input title="@{Appraise-misc-mod}" type="number" class="sheet-calc" readonly name="attr_Appraise-misc-mod" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Appraise-class}" type="text" name="attr_Appraise-class" value="0/0/0/0" class="sheet-calc sheet-skill-conds" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Appraise-ReqTrain}" type="checkbox" name="attr_Appraise-ReqTrain" value="1" /></span>
							<span class="sheet-table-cell"><textarea class="sheet-skill-macro-text" title="@{Appraise-note}" name="attr_Appraise-note"></textarea></span>
							<span class="sheet-table-cell"><textarea class="sheet-skill-macro-text" title="@{Appraise-macro}" name="attr_Appraise-macro">&{template:pf_generic} @{toggle_accessible_flag} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_generic-skill}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle}} {{name=^{appraise}}} {{Check=[[ @{skill-query} + [[ @{Appraise} ]] ]]}} @{Appraise-ut} @{skill_options} @{Appraise-cond-notes} {{generic_note=@{Appraise-note}}}</textarea></span>
						</div>
						<span class="sheet-custom-skill-2 sheet-table-cell sheet-bg-only">&nbsp;</span>
						<span class="sheet-custom-skill-2 sheet-table-cell sheet-bg-only">&nbsp;</span>
						<input class="sheet-custom-skill-2 sheet-showarrow sheet-artistry-show sheet-bg-only" type="checkbox" name="attr_artistry-show" data-i18n-aria-label="artistry" title="Click to expand" data-i18n-title="showsect-cmd" value="1" checked />
						<label class="sheet-custom-skill-2 sheet-showsect sheet-bg-only sheet-skill-minishow" title="Click to expand" data-i18n-title="showsect-cmd" data-i18n-aria-label="showsect-cmd" data-i18n="artistry">Artistry</label>
						<span class="sheet-custom-skill-2 sheet-bg-only"></span>
						<div class="sheet-custom-skill-2 sheet-table-row sheet-bg-only" style="position:relative;"><!--used to keep these sections from collapsing on each other when hidden--></div>
						<div class="sheet-table-row sheet-artistry sheet-bg-only">
							<span class="sheet-table-cell"><button style="font-size:100%;" title="%{selected|Artistry-Check}" type="roll" value="@{PC-Whisper} @{Artistry-macro}" name="roll_Artistry-Check"></button></span>
							<span class="sheet-table-cell"><span title="Optional Ruleset"><input title="@{Artistry-cs}" type="checkbox" name="attr_Artistry-cs" value="3" /></span></span>
							<span class="sheet-table-cell sheet-left"><input title="@{Artistry-name}" style="width:96%;" type="text" name="attr_Artistry-name" placeholder="Artistry" /></span>
							<span class="sheet-table-cell"><input title="@{Artistry}" type="number" name="attr_Artistry" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Artistry-ranks}" type="number" name="attr_Artistry-ranks" value="0" /></span>
							<span class="sheet-table-cell">
								<select title="@{Artistry-ability}" name="attr_Artistry-ability" class="sheet-select-small">
									<option value="@{STR-mod}" data-i18n="strength-abbrv">STR</option>
									<option value="@{DEX-mod}" data-i18n="dexterity-abbrv">DEX</option>
									<option value="@{CON-mod}" data-i18n="constitution-abbrv">CON</option>
									<option value="@{INT-mod}" data-i18n="intelligence-abbrv-default" selected>&#8226;INT</option>
									<option value="@{WIS-mod}" data-i18n="wisdom-abbrv">WIS</option>
									<option value="@{CHA-mod}" data-i18n="charisma-abbrv">CHA</option>
								</select>
							</span>
							<span class="sheet-table-cell"><input title="@{Artistry-ability-mod}" type="number" name="attr_Artistry-ability-mod" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Artistry-racial}" type="number" name="attr_Artistry-racial" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Artistry-trait}" type="number" name="attr_Artistry-trait" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Artistry-feat}" type="number" name="attr_Artistry-feat" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Artistry-item}" type="number" name="attr_Artistry-item" value="0" /></span>
							<input class="sheet-error-mshow" type="checkbox" value="1" role="status" aria-live="polite" name="attr_Artistry-misc-mod_error" />
							<span class="sheet-table-cell sheet-highlight"><input title="@{Artistry-misc}" type="text" name="attr_Artistry-misc" value="" placeholder="#/Equation" data-i18n-placeholder="equation-macro-place" /></span>
							<span class="sheet-table-cell sheet-highlight"><input title="@{Artistry-misc-mod}" type="number" class="sheet-calc" readonly name="attr_Artistry-misc-mod" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Artistry-class}" type="text" name="attr_Artistry-class" value="0/0/0/0" class="sheet-calc sheet-skill-conds" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Artistry-ReqTrain}" type="checkbox" name="attr_Artistry-ReqTrain" value="1" /></span>
							<span class="sheet-table-cell"><textarea class="sheet-skill-macro-text" title="@{Artistry-note}" name="attr_Artistry-note"></textarea></span>
							<span class="sheet-table-cell"><textarea class="sheet-skill-macro-text" title="@{Artistry-macro}" name="attr_Artistry-macro">&{template:pf_generic} @{toggle_accessible_flag} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_generic-skill}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle}} {{name=^{artistry} @{Artistry-name}}} {{Check=[[ @{skill-query} + [[ @{Artistry} ]] ]]}} @{Artistry-ut} @{skill_options} @{Artistry-cond-notes} {{generic_note=@{Artistry-note}}}</textarea></span>
						</div>
						<div class="sheet-table-row sheet-artistry sheet-bg-only sheet-custom-skill-2">
							<span class="sheet-table-cell"><button style="font-size:100%;" title="%{selected|Artistry2-Check}" type="roll" value="@{PC-Whisper} @{Artistry2-macro}" name="roll_Artistry2-Check"></button></span>
							<span class="sheet-table-cell"><span title="Optional Ruleset"><input title="@{Artistry2-cs}" type="checkbox" name="attr_Artistry2-cs" value="3" /></span></span>
							<span class="sheet-table-cell sheet-left"><input title="@{Artistry2-name}" style="width:96%;" type="text" name="attr_Artistry2-name" placeholder="Artistry" data-i18n-placeholder="artistry" /></span>
							<span class="sheet-table-cell"><input title="@{Artistry2}" type="number" name="attr_Artistry2" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Artistry2-ranks}" type="number" name="attr_Artistry2-ranks" value="0" /></span>
							<span class="sheet-table-cell">
								<select title="@{Artistry2-ability}" name="attr_Artistry2-ability" class="sheet-select-small">
									<option value="@{STR-mod}" data-i18n="strength-abbrv">STR</option>
									<option value="@{DEX-mod}" data-i18n="dexterity-abbrv">DEX</option>
									<option value="@{CON-mod}" data-i18n="constitution-abbrv">CON</option>
									<option value="@{INT-mod}" data-i18n="intelligence-abbrv-default" selected>&#8226;INT</option>
									<option value="@{WIS-mod}" data-i18n="wisdom-abbrv">WIS</option>
									<option value="@{CHA-mod}" data-i18n="charisma-abbrv">CHA</option>
								</select>
							</span>
							<span class="sheet-table-cell"><input title="@{Artistry2-ability-mod}" type="number" name="attr_Artistry2-ability-mod" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Artistry2-racial}" type="number" name="attr_Artistry2-racial" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Artistry2-trait}" type="number" name="attr_Artistry2-trait" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Artistry2-feat}" type="number" name="attr_Artistry2-feat" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Artistry2-item}" type="number" name="attr_Artistry2-item" value="0" /></span>
							<input class="sheet-error-mshow" type="checkbox" value="1" role="status" aria-live="polite" name="attr_Artistry2-misc-mod_error" />
							<span class="sheet-table-cell sheet-highlight"><input title="@{Artistry2-misc}" type="text" name="attr_Artistry2-misc" value="" placeholder="#/Equation" data-i18n-placeholder="equation-macro-place" /></span>
							<span class="sheet-table-cell sheet-highlight"><input title="@{Artistry2-misc-mod}" type="number" class="sheet-calc" readonly name="attr_Artistry2-misc-mod" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Artistry2-class}" type="text" name="attr_Artistry2-class" value="0/0/0/0" class="sheet-calc sheet-skill-conds" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Artistry2-ReqTrain}" type="checkbox" name="attr_Artistry2-ReqTrain" value="1" /></span>
							<span class="sheet-table-cell"><textarea class="sheet-skill-macro-text" title="@{Artistry2-note}" name="attr_Artistry2-note"></textarea></span>
							<span class="sheet-table-cell"><textarea class="sheet-skill-macro-text" title="@{Artistry2-macro}" name="attr_Artistry2-macro">&{template:pf_generic} @{toggle_accessible_flag} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_generic-skill}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle}} {{name=^{artistry} @{Artistry2-name}}} {{Check=[[ @{skill-query} + [[ @{Artistry2} ]] ]]}} @{Artistry2-ut} @{skill_options} @{Artistry2-cond-notes} {{generic_note=@{Artistry2-note}}}</textarea></span>
						</div>
						<div class="sheet-table-row sheet-artistry sheet-bg-only sheet-custom-skill-3">
							<span class="sheet-table-cell"><button style="font-size:100%;" title="%{selected|Artistry3-Check}" type="roll" value="@{PC-Whisper} @{Artistry3-macro}" name="roll_Artistry3-Check"></button></span>
							<span class="sheet-table-cell"><span title="Optional Ruleset"><input title="@{Artistry3-cs}" type="checkbox" name="attr_Artistry3-cs" value="3" /></span></span>
							<span class="sheet-table-cell sheet-left"><input title="@{Artistry3-name}" style="width:96%;" type="text" name="attr_Artistry3-name" placeholder="Artistry" data-i18n-placeholder="artistry" /></span>
							<span class="sheet-table-cell"><input title="@{Artistry3}" type="number" name="attr_Artistry3" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Artistry3-ranks}" type="number" name="attr_Artistry3-ranks" value="0" /></span>
							<span class="sheet-table-cell">
								<select title="@{Artistry3-ability}" name="attr_Artistry3-ability" class="sheet-select-small">
									<option value="@{STR-mod}" data-i18n="strength-abbrv">STR</option>
									<option value="@{DEX-mod}" data-i18n="dexterity-abbrv">DEX</option>
									<option value="@{CON-mod}" data-i18n="constitution-abbrv">CON</option>
									<option value="@{INT-mod}" data-i18n="intelligence-abbrv-default" selected>&#8226;INT</option>
									<option value="@{WIS-mod}" data-i18n="wisdom-abbrv">WIS</option>
									<option value="@{CHA-mod}" data-i18n="charisma-abbrv">CHA</option>
								</select>
							</span>
							<span class="sheet-table-cell"><input title="@{Artistry3-ability-mod}" type="number" name="attr_Artistry3-ability-mod" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Artistry3-racial}" type="number" name="attr_Artistry3-racial" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Artistry3-trait}" type="number" name="attr_Artistry3-trait" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Artistry3-feat}" type="number" name="attr_Artistry3-feat" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Artistry3-item}" type="number" name="attr_Artistry3-item" value="0" /></span>
							<input class="sheet-error-mshow" type="checkbox" value="1" role="status" aria-live="polite" name="attr_Artistry3-misc-mod_error" />
							<span class="sheet-table-cell sheet-highlight"><input title="@{Artistry3-misc}" type="text" name="attr_Artistry3-misc" value="" placeholder="#/Equation" data-i18n-placeholder="equation-macro-place" /></span>
							<span class="sheet-table-cell sheet-highlight"><input title="@{Artistry3-misc-mod}" type="number" class="sheet-calc" readonly name="attr_Artistry3-misc-mod" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Artistry3-class}" type="text" name="attr_Artistry3-class" value="0/0/0/0" class="sheet-calc sheet-skill-conds" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Artistry3-ReqTrain}" type="checkbox" name="attr_Artistry3-ReqTrain" value="1" /></span>
							<span class="sheet-table-cell"><textarea class="sheet-skill-macro-text" title="@{Artistry3-note}" name="attr_Artistry3-note"></textarea></span>
							<span class="sheet-table-cell"><textarea class="sheet-skill-macro-text" title="@{Artistry3-macro}" name="attr_Artistry3-macro">&{template:pf_generic} @{toggle_accessible_flag} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_generic-skill}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle}} {{name=^{artistry} @{Artistry3-name}}} {{Check=[[ @{skill-query} + [[ @{Artistry3} ]] ]]}} @{Artistry3-ut} @{skill_options} @{Artistry3-cond-notes} {{generic_note=@{Artistry3-note}}}</textarea></span>
						</div>
						<div class="sheet-table-row sheet-artistry sheet-bg-only sheet-custom-skill-6">
							<span class="sheet-table-cell"><button style="font-size:100%;" title="%{selected|Artistry4-Check}" type="roll" value="@{PC-Whisper} @{Artistry4-macro}" name="roll_Artistry4-Check"></button></span>
							<span class="sheet-table-cell"><span title="Optional Ruleset"><input title="@{Artistry4-cs}" type="checkbox" name="attr_Artistry4-cs" value="3" /></span></span>
							<span class="sheet-table-cell sheet-left"><input title="@{Artistry4-name}" style="width:96%;" type="text" name="attr_Artistry4-name" placeholder="Artistry" data-i18n-placeholder="artistry" /></span>
							<span class="sheet-table-cell"><input title="@{Artistry4}" type="number" name="attr_Artistry4" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Artistry4-ranks}" type="number" name="attr_Artistry4-ranks" value="0" /></span>
							<span class="sheet-table-cell">
								<select title="@{Artistry4-ability}" name="attr_Artistry4-ability" class="sheet-select-small">
									<option value="@{STR-mod}" data-i18n="strength-abbrv">STR</option>
									<option value="@{DEX-mod}" data-i18n="dexterity-abbrv">DEX</option>
									<option value="@{CON-mod}" data-i18n="constitution-abbrv">CON</option>
									<option value="@{INT-mod}" data-i18n="intelligence-abbrv-default" selected>&#8226;INT</option>
									<option value="@{WIS-mod}" data-i18n="wisdom-abbrv">WIS</option>
									<option value="@{CHA-mod}" data-i18n="charisma-abbrv">CHA</option>
								</select>
							</span>
							<span class="sheet-table-cell"><input title="@{Artistry4-ability-mod}" type="number" name="attr_Artistry4-ability-mod" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Artistry4-racial}" type="number" name="attr_Artistry4-racial" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Artistry4-trait}" type="number" name="attr_Artistry4-trait" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Artistry4-feat}" type="number" name="attr_Artistry4-feat" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Artistry4-item}" type="number" name="attr_Artistry4-item" value="0" /></span>
							<input class="sheet-error-mshow" type="checkbox" value="1" role="status" aria-live="polite" name="attr_Artistry4-misc-mod_error" />
							<span class="sheet-table-cell sheet-highlight"><input title="@{Artistry4-misc}" type="text" name="attr_Artistry4-misc" value="" placeholder="#/Equation" data-i18n-placeholder="equation-macro-place" /></span>
							<span class="sheet-table-cell sheet-highlight"><input title="@{Artistry4-misc-mod}" type="number" class="sheet-calc" readonly name="attr_Artistry4-misc-mod" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Artistry4-class}" type="text" name="attr_Artistry4-class" value="0/0/0/0" class="sheet-calc sheet-skill-conds" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Artistry4-ReqTrain}" type="checkbox" name="attr_Artistry4-ReqTrain" value="1" /></span>
							<span class="sheet-table-cell"><textarea class="sheet-skill-macro-text" title="@{Artistry4-note}" name="attr_Artistry4-note"></textarea></span>
							<span class="sheet-table-cell"><textarea class="sheet-skill-macro-text" title="@{Artistry4-macro}" name="attr_Artistry4-macro">&{template:pf_generic} @{toggle_accessible_flag} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_generic-skill}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle}} {{name=^{artistry} @{Artistry4-name}}} {{Check=[[ @{skill-query} + [[ @{Artistry4} ]] ]]}} @{Artistry4-ut} @{skill_options} @{Artistry4-cond-notes} {{generic_note=@{Artistry4-note}}}</textarea></span>
						</div>
						<div class="sheet-table-row sheet-artistry sheet-bg-only sheet-custom-skill-6">
							<span class="sheet-table-cell"><button style="font-size:100%;" title="%{selected|Artistry5-Check}" type="roll" value="@{PC-Whisper} @{Artistry5-macro}" name="roll_Artistry5-Check"></button></span>
							<span class="sheet-table-cell"><span title="Optional Ruleset"><input title="@{Artistry5-cs}" type="checkbox" name="attr_Artistry5-cs" value="3" /></span></span>
							<span class="sheet-table-cell sheet-left"><input title="@{Artistry5-name}" style="width:96%;" type="text" name="attr_Artistry5-name" placeholder="Artistry" data-i18n-placeholder="artistry" /></span>
							<span class="sheet-table-cell"><input title="@{Artistry5}" type="number" name="attr_Artistry5" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Artistry5-ranks}" type="number" name="attr_Artistry5-ranks" value="0" /></span>
							<span class="sheet-table-cell">
								<select title="@{Artistry5-ability}" name="attr_Artistry5-ability" class="sheet-select-small">
									<option value="@{STR-mod}" data-i18n="strength-abbrv">STR</option>
									<option value="@{DEX-mod}" data-i18n="dexterity-abbrv">DEX</option>
									<option value="@{CON-mod}" data-i18n="constitution-abbrv">CON</option>
									<option value="@{INT-mod}" data-i18n="intelligence-abbrv-default" selected>&#8226;INT</option>
									<option value="@{WIS-mod}" data-i18n="wisdom-abbrv">WIS</option>
									<option value="@{CHA-mod}" data-i18n="charisma-abbrv">CHA</option>
								</select>
							</span>
							<span class="sheet-table-cell"><input title="@{Artistry5-ability-mod}" type="number" name="attr_Artistry5-ability-mod" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Artistry5-racial}" type="number" name="attr_Artistry5-racial" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Artistry5-trait}" type="number" name="attr_Artistry5-trait" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Artistry5-feat}" type="number" name="attr_Artistry5-feat" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Artistry5-item}" type="number" name="attr_Artistry5-item" value="0" /></span>
							<input class="sheet-error-mshow" type="checkbox" value="1" role="status" aria-live="polite" name="attr_Artistry5-misc-mod_error" />
							<span class="sheet-table-cell sheet-highlight"><input title="@{Artistry5-misc}" type="text" name="attr_Artistry5-misc" value="" placeholder="#/Equation" data-i18n-placeholder="equation-macro-place" /></span>
							<span class="sheet-table-cell sheet-highlight"><input title="@{Artistry5-misc-mod}" type="number" class="sheet-calc" readonly name="attr_Artistry5-misc-mod" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Artistry5-class}" type="text" name="attr_Artistry5-class" value="0/0/0/0" class="sheet-calc sheet-skill-conds" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Artistry5-ReqTrain}" type="checkbox" name="attr_Artistry5-ReqTrain" value="1" /></span>
							<span class="sheet-table-cell"><textarea class="sheet-skill-macro-text" title="@{Artistry5-note}" name="attr_Artistry5-note"></textarea></span>
							<span class="sheet-table-cell"><textarea class="sheet-skill-macro-text" title="@{Artistry5-macro}" name="attr_Artistry5-macro">&{template:pf_generic} @{toggle_accessible_flag} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_generic-skill}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle}} {{name=^{artistry} @{Artistry5-name}}} {{Check=[[ @{skill-query} + [[ @{Artistry5} ]] ]]}} @{Artistry5-ut} @{skill_options} @{Artistry5-cond-notes} {{generic_note=@{Artistry5-note}}}</textarea></span>
						</div>
						<div class="sheet-table-row sheet-artistry sheet-bg-only sheet-custom-skill-6">
							<span class="sheet-table-cell"><button style="font-size:100%;" title="%{selected|Artistry6-Check}" type="roll" value="@{PC-Whisper} @{Artistry6-macro}" name="roll_Artistry6-Check"></button></span>
							<span class="sheet-table-cell"><span title="Optional Ruleset"><input title="@{Artistry6-cs}" type="checkbox" name="attr_Artistry6-cs" value="3" /></span></span>
							<span class="sheet-table-cell sheet-left"><input title="@{Artistry6-name}" style="width:96%;" type="text" name="attr_Artistry6-name" placeholder="Artistry" data-i18n-placeholder="artistry" /></span>
							<span class="sheet-table-cell"><input title="@{Artistry6}" type="number" name="attr_Artistry6" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Artistry6-ranks}" type="number" name="attr_Artistry6-ranks" value="0" /></span>
							<span class="sheet-table-cell">
								<select title="@{Artistry6-ability}" name="attr_Artistry6-ability" class="sheet-select-small">
									<option value="@{STR-mod}" data-i18n="strength-abbrv">STR</option>
									<option value="@{DEX-mod}" data-i18n="dexterity-abbrv">DEX</option>
									<option value="@{CON-mod}" data-i18n="constitution-abbrv">CON</option>
									<option value="@{INT-mod}" data-i18n="intelligence-abbrv-default" selected>&#8226;INT</option>
									<option value="@{WIS-mod}" data-i18n="wisdom-abbrv">WIS</option>
									<option value="@{CHA-mod}" data-i18n="charisma-abbrv">CHA</option>
								</select>
							</span>
							<span class="sheet-table-cell"><input title="@{Artistry6-ability-mod}" type="number" name="attr_Artistry6-ability-mod" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Artistry6-racial}" type="number" name="attr_Artistry6-racial" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Artistry6-trait}" type="number" name="attr_Artistry6-trait" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Artistry6-feat}" type="number" name="attr_Artistry6-feat" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Artistry6-item}" type="number" name="attr_Artistry6-item" value="0" /></span>
							<input class="sheet-error-mshow" type="checkbox" value="1" role="status" aria-live="polite" name="attr_Artistry6-misc-mod_error" />
							<span class="sheet-table-cell sheet-highlight"><input title="@{Artistry6-misc}" type="text" name="attr_Artistry6-misc" value="" placeholder="#/Equation" data-i18n-placeholder="equation-macro-place" /></span>
							<span class="sheet-table-cell sheet-highlight"><input title="@{Artistry6-misc-mod}" type="number" class="sheet-calc" readonly name="attr_Artistry6-misc-mod" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Artistry6-class}" type="text" name="attr_Artistry6-class" value="0/0/0/0" class="sheet-calc sheet-skill-conds" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Artistry6-ReqTrain}" type="checkbox" name="attr_Artistry6-ReqTrain" value="1" /></span>
							<span class="sheet-table-cell"><textarea class="sheet-skill-macro-text" title="@{Artistry6-note}" name="attr_Artistry6-note"></textarea></span>
							<span class="sheet-table-cell"><textarea class="sheet-skill-macro-text" title="@{Artistry6-macro}" name="attr_Artistry6-macro">&{template:pf_generic} @{toggle_accessible_flag} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_generic-skill}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle}} {{name=^{artistry} @{Artistry6-name}}} {{Check=[[ @{skill-query} + [[ @{Artistry6} ]] ]]}} @{Artistry6-ut} @{skill_options} @{Artistry6-cond-notes} {{generic_note=@{Artistry6-note}}}</textarea></span>
						</div>
						<div class="sheet-table-row sheet-artistry sheet-bg-only sheet-custom-skill-10">
							<span class="sheet-table-cell"><button style="font-size:100%;" title="%{selected|Artistry7-Check}" type="roll" value="@{PC-Whisper} @{Artistry7-macro}" name="roll_Artistry7-Check"></button></span>
							<span class="sheet-table-cell"><span title="Optional Ruleset"><input title="@{Artistry7-cs}" type="checkbox" name="attr_Artistry7-cs" value="3" /></span></span>
							<span class="sheet-table-cell sheet-left"><input title="@{Artistry7-name}" style="width:96%;" type="text" name="attr_Artistry7-name" placeholder="Artistry" data-i18n-placeholder="artistry" /></span>
							<span class="sheet-table-cell"><input title="@{Artistry7}" type="number" name="attr_Artistry7" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Artistry7-ranks}" type="number" name="attr_Artistry7-ranks" value="0" /></span>
							<span class="sheet-table-cell">
								<select title="@{Artistry7-ability}" name="attr_Artistry7-ability" class="sheet-select-small">
									<option value="@{STR-mod}" data-i18n="strength-abbrv">STR</option>
									<option value="@{DEX-mod}" data-i18n="dexterity-abbrv">DEX</option>
									<option value="@{CON-mod}" data-i18n="constitution-abbrv">CON</option>
									<option value="@{INT-mod}" data-i18n="intelligence-abbrv-default" selected>&#8226;INT</option>
									<option value="@{WIS-mod}" data-i18n="wisdom-abbrv">WIS</option>
									<option value="@{CHA-mod}" data-i18n="charisma-abbrv">CHA</option>
								</select>
							</span>
							<span class="sheet-table-cell"><input title="@{Artistry7-ability-mod}" type="number" name="attr_Artistry7-ability-mod" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Artistry7-racial}" type="number" name="attr_Artistry7-racial" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Artistry7-trait}" type="number" name="attr_Artistry7-trait" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Artistry7-feat}" type="number" name="attr_Artistry7-feat" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Artistry7-item}" type="number" name="attr_Artistry7-item" value="0" /></span>
							<input class="sheet-error-mshow" type="checkbox" value="1" role="status" aria-live="polite" name="attr_Artistry7-misc-mod_error" />
							<span class="sheet-table-cell sheet-highlight"><input title="@{Artistry7-misc}" type="text" name="attr_Artistry7-misc" value="" placeholder="#/Equation" data-i18n-placeholder="equation-macro-place" /></span>
							<span class="sheet-table-cell sheet-highlight"><input title="@{Artistry7-misc-mod}" type="number" class="sheet-calc" readonly name="attr_Artistry7-misc-mod" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Artistry7-class}" type="text" name="attr_Artistry7-class" value="0/0/0/0" class="sheet-calc sheet-skill-conds" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Artistry7-ReqTrain}" type="checkbox" name="attr_Artistry7-ReqTrain" value="1" /></span>
							<span class="sheet-table-cell"><textarea class="sheet-skill-macro-text" title="@{Artistry7-note}" name="attr_Artistry7-note"></textarea></span>
							<span class="sheet-table-cell"><textarea class="sheet-skill-macro-text" title="@{Artistry7-macro}" name="attr_Artistry7-macro">&{template:pf_generic} @{toggle_accessible_flag} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_generic-skill}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle}} {{name=^{artistry} @{Artistry7-name}}} {{Check=[[ @{skill-query} + [[ @{Artistry7} ]] ]]}} @{Artistry7-ut} @{skill_options} @{Artistry7-cond-notes} {{generic_note=@{Artistry7-note}}}</textarea></span>
						</div>
						<div class="sheet-table-row sheet-artistry sheet-bg-only sheet-custom-skill-10">
							<span class="sheet-table-cell"><button style="font-size:100%;" title="%{selected|Artistry8-Check}" type="roll" value="@{PC-Whisper} @{Artistry8-macro}" name="roll_Artistry8-Check"></button></span>
							<span class="sheet-table-cell"><span title="Optional Ruleset"><input title="@{Artistry8-cs}" type="checkbox" name="attr_Artistry8-cs" value="3" /></span></span>
							<span class="sheet-table-cell sheet-left"><input title="@{Artistry8-name}" style="width:96%;" type="text" name="attr_Artistry8-name" placeholder="Artistry" data-i18n-placeholder="artistry" /></span>
							<span class="sheet-table-cell"><input title="@{Artistry8}" type="number" name="attr_Artistry8" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Artistry8-ranks}" type="number" name="attr_Artistry8-ranks" value="0" /></span>
							<span class="sheet-table-cell">
								<select title="@{Artistry8-ability}" name="attr_Artistry8-ability" class="sheet-select-small">
									<option value="@{STR-mod}" data-i18n="strength-abbrv">STR</option>
									<option value="@{DEX-mod}" data-i18n="dexterity-abbrv">DEX</option>
									<option value="@{CON-mod}" data-i18n="constitution-abbrv">CON</option>
									<option value="@{INT-mod}" data-i18n="intelligence-abbrv-default" selected>&#8226;INT</option>
									<option value="@{WIS-mod}" data-i18n="wisdom-abbrv">WIS</option>
									<option value="@{CHA-mod}" data-i18n="charisma-abbrv">CHA</option>
								</select>
							</span>
							<span class="sheet-table-cell"><input title="@{Artistry8-ability-mod}" type="number" name="attr_Artistry8-ability-mod" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Artistry8-racial}" type="number" name="attr_Artistry8-racial" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Artistry8-trait}" type="number" name="attr_Artistry8-trait" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Artistry8-feat}" type="number" name="attr_Artistry8-feat" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Artistry8-item}" type="number" name="attr_Artistry8-item" value="0" /></span>
							<input class="sheet-error-mshow" type="checkbox" value="1" role="status" aria-live="polite" name="attr_Artistry8-misc-mod_error" />
							<span class="sheet-table-cell sheet-highlight"><input title="@{Artistry8-misc}" type="text" name="attr_Artistry8-misc" value="" placeholder="#/Equation" data-i18n-placeholder="equation-macro-place" /></span>
							<span class="sheet-table-cell sheet-highlight"><input title="@{Artistry8-misc-mod}" type="number" class="sheet-calc" readonly name="attr_Artistry8-misc-mod" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Artistry8-class}" type="text" name="attr_Artistry8-class" value="0/0/0/0" class="sheet-calc sheet-skill-conds" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Artistry8-ReqTrain}" type="checkbox" name="attr_Artistry8-ReqTrain" value="1" /></span>
							<span class="sheet-table-cell"><textarea class="sheet-skill-macro-text" title="@{Artistry8-note}" name="attr_Artistry8-note"></textarea></span>
							<span class="sheet-table-cell"><textarea class="sheet-skill-macro-text" title="@{Artistry8-macro}" name="attr_Artistry8-macro">&{template:pf_generic} @{toggle_accessible_flag} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_generic-skill}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle}} {{name=^{artistry} @{Artistry8-name}}} {{Check=[[ @{skill-query} + [[ @{Artistry8} ]] ]]}} @{Artistry8-ut} @{skill_options} @{Artistry8-cond-notes} {{generic_note=@{Artistry8-note}}}</textarea></span>
						</div>
						<div class="sheet-table-row sheet-artistry sheet-bg-only sheet-custom-skill-10">
							<span class="sheet-table-cell"><button style="font-size:100%;" title="%{selected|Artistry9-Check}" type="roll" value="@{PC-Whisper} @{Artistry9-macro}" name="roll_Artistry9-Check"></button></span>
							<span class="sheet-table-cell"><span title="Optional Ruleset"><input title="@{Artistry9-cs}" type="checkbox" name="attr_Artistry9-cs" value="3" /></span></span>
							<span class="sheet-table-cell sheet-left"><input title="@{Artistry9-name}" style="width:96%;" type="text" name="attr_Artistry9-name" placeholder="Artistry" data-i18n-placeholder="artistry" /></span>
							<span class="sheet-table-cell"><input title="@{Artistry9}" type="number" name="attr_Artistry9" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Artistry9-ranks}" type="number" name="attr_Artistry9-ranks" value="0" /></span>
							<span class="sheet-table-cell">
								<select title="@{Artistry9-ability}" name="attr_Artistry9-ability" class="sheet-select-small">
									<option value="@{STR-mod}" data-i18n="strength-abbrv">STR</option>
									<option value="@{DEX-mod}" data-i18n="dexterity-abbrv">DEX</option>
									<option value="@{CON-mod}" data-i18n="constitution-abbrv">CON</option>
									<option value="@{INT-mod}" data-i18n="intelligence-abbrv-default" selected>&#8226;INT</option>
									<option value="@{WIS-mod}" data-i18n="wisdom-abbrv">WIS</option>
									<option value="@{CHA-mod}" data-i18n="charisma-abbrv">CHA</option>
								</select>
							</span>
							<span class="sheet-table-cell"><input title="@{Artistry9-ability-mod}" type="number" name="attr_Artistry9-ability-mod" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Artistry9-racial}" type="number" name="attr_Artistry9-racial" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Artistry9-trait}" type="number" name="attr_Artistry9-trait" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Artistry9-feat}" type="number" name="attr_Artistry9-feat" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Artistry9-item}" type="number" name="attr_Artistry9-item" value="0" /></span>
							<input class="sheet-error-mshow" type="checkbox" value="1" role="status" aria-live="polite" name="attr_Artistry9-misc-mod_error" />
							<span class="sheet-table-cell sheet-highlight"><input title="@{Artistry9-misc}" type="text" name="attr_Artistry9-misc" value="" placeholder="#/Equation" data-i18n-placeholder="equation-macro-place" /></span>
							<span class="sheet-table-cell sheet-highlight"><input title="@{Artistry9-misc-mod}" type="number" class="sheet-calc" readonly name="attr_Artistry9-misc-mod" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Artistry9-class}" type="text" name="attr_Artistry9-class" value="0/0/0/0" class="sheet-calc sheet-skill-conds" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Artistry9-ReqTrain}" type="checkbox" name="attr_Artistry9-ReqTrain" value="1" /></span>
							<span class="sheet-table-cell"><textarea class="sheet-skill-macro-text" title="@{Artistry9-note}" name="attr_Artistry9-note"></textarea></span>
							<span class="sheet-table-cell"><textarea class="sheet-skill-macro-text" title="@{Artistry9-macro}" name="attr_Artistry9-macro">&{template:pf_generic} @{toggle_accessible_flag} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_generic-skill}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle}} {{name=^{artistry} @{Artistry9-name}}} {{Check=[[ @{skill-query} + [[ @{Artistry9} ]] ]]}} @{Artistry9-ut} @{skill_options} @{Artistry9-cond-notes} {{generic_note=@{Artistry9-note}}}</textarea></span>
						</div>
						<div class="sheet-table-row sheet-artistry sheet-bg-only sheet-custom-skill-10">
							<span class="sheet-table-cell"><button style="font-size:100%;" title="%{selected|Artistry10-Check}" type="roll" value="@{PC-Whisper} @{Artistry10-macro}" name="roll_Artistry10-Check"></button></span>
							<span class="sheet-table-cell"><span title="Optional Ruleset"><input title="@{Artistry10-cs}" type="checkbox" name="attr_Artistry10-cs" value="3" /></span></span>
							<span class="sheet-table-cell sheet-left"><input title="@{Artistry10-name}" style="width:96%;" type="text" name="attr_Artistry10-name" placeholder="Artistry" data-i18n-placeholder="artistry" /></span>
							<span class="sheet-table-cell"><input title="@{Artistry10}" type="number" name="attr_Artistry10" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Artistry10-ranks}" type="number" name="attr_Artistry10-ranks" value="0" /></span>
							<span class="sheet-table-cell">
								<select title="@{Artistry10-ability}" name="attr_Artistry10-ability" class="sheet-select-small">
									<option value="@{STR-mod}" data-i18n="strength-abbrv">STR</option>
									<option value="@{DEX-mod}" data-i18n="dexterity-abbrv">DEX</option>
									<option value="@{CON-mod}" data-i18n="constitution-abbrv">CON</option>
									<option value="@{INT-mod}" data-i18n="intelligence-abbrv-default" selected>&#8226;INT</option>
									<option value="@{WIS-mod}" data-i18n="wisdom-abbrv">WIS</option>
									<option value="@{CHA-mod}" data-i18n="charisma-abbrv">CHA</option>
								</select>
							</span>
							<span class="sheet-table-cell"><input title="@{Artistry10-ability-mod}" type="number" name="attr_Artistry10-ability-mod" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Artistry10-racial}" type="number" name="attr_Artistry10-racial" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Artistry10-trait}" type="number" name="attr_Artistry10-trait" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Artistry10-feat}" type="number" name="attr_Artistry10-feat" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Artistry10-item}" type="number" name="attr_Artistry10-item" value="0" /></span>
							<input class="sheet-error-mshow" type="checkbox" value="1" role="status" aria-live="polite" name="attr_Artistry10-misc-mod_error" />
							<span class="sheet-table-cell sheet-highlight"><input title="@{Artistry10-misc}" type="text" name="attr_Artistry10-misc" value="" placeholder="#/Equation" data-i18n-placeholder="equation-macro-place" /></span>
							<span class="sheet-table-cell sheet-highlight"><input title="@{Artistry10-misc-mod}" type="number" class="sheet-calc" readonly name="attr_Artistry10-misc-mod" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Artistry10-class}" type="text" name="attr_Artistry10-class" value="0/0/0/0" class="sheet-calc sheet-skill-conds" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Artistry10-ReqTrain}" type="checkbox" name="attr_Artistry10-ReqTrain" value="1" /></span>
							<span class="sheet-table-cell"><textarea class="sheet-skill-macro-text" title="@{Artistry10-note}" name="attr_Artistry10-note"></textarea></span>
							<span class="sheet-table-cell"><textarea class="sheet-skill-macro-text" title="@{Artistry10-macro}" name="attr_Artistry10-macro">&{template:pf_generic} @{toggle_accessible_flag} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_generic-skill}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle}} {{name=^{artistry} @{Artistry10-name}}} {{Check=[[ @{skill-query} + [[ @{Artistry10} ]] ]]}} @{Artistry10-ut} @{skill_options} @{Artistry10-cond-notes} {{generic_note=@{Artistry10-note}}}</textarea></span>
						</div>
						<div class="sheet-table-row sheet-adventure">
							<span class="sheet-table-cell"><button style="font-size:100%;" title="%{selected|Bluff-Check}" type="roll" value="@{PC-Whisper} @{Bluff-macro}" name="roll_Bluff-Check"></button></span>
							<span class="sheet-table-cell"><input title="@{Bluff-cs}" type="checkbox" name="attr_Bluff-cs" value="3" /></span>
							<span class="sheet-table-cell sheet-left" data-i18n="bluff">Bluff</span>
							<span class="sheet-table-cell"><input title="@{Bluff}" type="number" name="attr_Bluff" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Bluff-ranks}" type="number" name="attr_Bluff-ranks" value="0" /></span>
							<span class="sheet-table-cell">
								<select title="@{Bluff-ability}" name="attr_Bluff-ability" class="sheet-select-small">
									<option value="@{STR-mod}" data-i18n="strength-abbrv">STR</option>
									<option value="@{DEX-mod}" data-i18n="dexterity-abbrv">DEX</option>
									<option value="@{CON-mod}" data-i18n="constitution-abbrv">CON</option>
									<option value="@{INT-mod}" data-i18n="intelligence-abbrv">INT</option>
									<option value="@{WIS-mod}" data-i18n="wisdom-abbrv">WIS</option>
									<option value="@{CHA-mod}" data-i18n="charisma-abbrv-default" selected>&#8226;CHA</option>
								</select>
							</span>
							<span class="sheet-table-cell"><input title="@{Bluff-ability-mod}" type="number" name="attr_Bluff-ability-mod" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Bluff-racial}" type="number" name="attr_Bluff-racial" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Bluff-trait}" type="number" name="attr_Bluff-trait" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Bluff-feat}" type="number" name="attr_Bluff-feat" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Bluff-item}" type="number" name="attr_Bluff-item" value="0" /></span>
							<input class="sheet-error-mshow" type="checkbox" value="1" role="status" aria-live="polite" name="attr_Bluff-misc-mod_error" />
							<span class="sheet-table-cell sheet-highlight"><input title="@{Bluff-misc}" type="text" name="attr_Bluff-misc" value="" placeholder="#/Equation" data-i18n-placeholder="equation-macro-place" /></span>
							<span class="sheet-table-cell sheet-highlight"><input title="@{Bluff-misc-mod}" type="number" class="sheet-calc" readonly name="attr_Bluff-misc-mod" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Bluff-class}" type="text" name="attr_Bluff-class" value="0/0/0/0" class="sheet-calc sheet-skill-conds" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Bluff-ReqTrain}" type="checkbox" name="attr_Bluff-ReqTrain" value="1" /></span>
							<span class="sheet-table-cell"><textarea class="sheet-skill-macro-text" title="@{Bluff-note}" name="attr_Bluff-note"></textarea></span>
							<span class="sheet-table-cell"><textarea class="sheet-skill-macro-text" title="@{Bluff-macro}" name="attr_Bluff-macro">&{template:pf_generic} @{toggle_accessible_flag} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_generic-skill}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle}} {{name=^{bluff}}} {{Check=[[ @{skill-query} + [[ @{Bluff} ]] ]]}} @{Bluff-ut} @{skill_options} @{Bluff-cond-notes} {{generic_note=@{Bluff-note}}}</textarea></span>
						</div>
						<div class="sheet-table-row sheet-adventure">
							<span class="sheet-table-cell"><button style="font-size:100%;" title="%{selected|Climb-Check}" type="roll" value="@{PC-Whisper} @{Climb-macro}" name="roll_Climb-Check"></button></span>
							<span class="sheet-table-cell"><input title="@{Climb-cs}" type="checkbox" name="attr_Climb-cs" value="3" /></span>
							<span class="sheet-table-cell sheet-left" data-i18n="climb">Climb</span>
							<span class="sheet-table-cell"><input title="@{Climb}" type="number" name="attr_Climb" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Climb-ranks}" type="number" name="attr_Climb-ranks" value="0" /></span>
							<span class="sheet-table-cell">
								<select title="@{Climb-ability}" name="attr_Climb-ability" class="sheet-select-small">
									<option value="@{STR-mod}" data-i18n="strength-abbrv-default" selected>&#8226;STR</option>
									<option value="@{DEX-mod}" data-i18n="dexterity-abbrv">DEX</option>
									<option value="@{CON-mod}" data-i18n="constitution-abbrv">CON</option>
									<option value="@{INT-mod}" data-i18n="intelligence-abbrv">INT</option>
									<option value="@{WIS-mod}" data-i18n="wisdom-abbrv">WIS</option>
									<option value="@{CHA-mod}" data-i18n="charisma-abbrv">CHA</option>
								</select>
							</span>
							<span class="sheet-table-cell"><input title="@{Climb-ability-mod}" type="number" name="attr_Climb-ability-mod" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Climb-racial}" type="number" name="attr_Climb-racial" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Climb-trait}" type="number" name="attr_Climb-trait" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Climb-feat}" type="number" name="attr_Climb-feat" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Climb-item}" type="number" name="attr_Climb-item" value="0" /></span>
							<input class="sheet-error-mshow" type="checkbox" value="1" role="status" aria-live="polite" name="attr_Climb-misc-mod_error" />
							<span class="sheet-table-cell sheet-highlight"><input title="@{Climb-misc}" type="text" name="attr_Climb-misc" value="" placeholder="#/Equation" data-i18n-placeholder="equation-macro-place" /></span>
							<span class="sheet-table-cell sheet-highlight"><input title="@{Climb-misc-mod}" type="number" class="sheet-calc" readonly name="attr_Climb-misc-mod" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Climb-class}" type="text" name="attr_Climb-class" value="0/0/0/0" class="sheet-calc sheet-skill-conds" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Climb-ReqTrain}" type="checkbox" name="attr_Climb-ReqTrain" value="1" /></span>
							<span class="sheet-table-cell"><textarea class="sheet-skill-macro-text" title="@{Climb-note}" name="attr_Climb-note"></textarea></span>
							<span class="sheet-table-cell"><textarea class="sheet-skill-macro-text" title="@{Climb-macro}" name="attr_Climb-macro">&{template:pf_generic} @{toggle_accessible_flag} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_generic-skill}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle}} {{name=^{climb}}} {{Check=[[ @{skill-query} + [[ @{Climb} ]] ]]}} @{Climb-ut} @{skill_options} @{Climb-cond-notes} {{generic_note=@{Climb-note}}}</textarea></span>
						</div>
						<span class="sheet-custom-skill-2 sheet-table-cell sheet-bg">&nbsp;</span>
						<span class="sheet-custom-skill-2 sheet-table-cell sheet-bg">&nbsp;</span>
						<input class="sheet-custom-skill-2 sheet-showarrow sheet-craft-show sheet-bg" type="checkbox" name="attr_craft-show" data-i18n-aria-label="craft" title="Click to expand" data-i18n-title="showsect-cmd" value="1" checked />
						<label class="sheet-custom-skill-2 sheet-showsect sheet-bg sheet-skill-minishow" title="Click to expand" data-i18n-title="showsect-cmd" data-i18n-aria-label="showsect-cmd" data-i18n="craft">Craft</label>
						<span class="sheet-custom-skill-2 sheet-bg"></span>
						<div class="sheet-custom-skill-2 sheet-table-row sheet-bg"><!--used to keep these sections from collapsing on each other when hidden--></div>
						<div class="sheet-table-row sheet-craft sheet-bg">
							<span class="sheet-table-cell"><button style="font-size:100%;" title="%{selected|Craft-Check}" type="roll" value="@{PC-Whisper} @{Craft-macro}" name="roll_Craft-Check"></button></span>
							<span class="sheet-table-cell"><input title="@{Craft-cs}" type="checkbox" name="attr_Craft-cs" value="3" /></span>
							<span class="sheet-table-cell sheet-left"><input title="@{Craft-name}" style="width:96%;" type="text" name="attr_Craft-name" placeholder="Craft" data-i18n-placeholder="craft" /></span>
							<span class="sheet-table-cell"><input title="@{Craft}" type="number" name="attr_Craft" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Craft-ranks}" type="number" name="attr_Craft-ranks" value="0" /></span>
							<span class="sheet-table-cell">
								<select title="@{Craft-ability}" name="attr_Craft-ability" class="sheet-select-small">
									<option value="@{STR-mod}" data-i18n="strength-abbrv">STR</option>
									<option value="@{DEX-mod}" data-i18n="dexterity-abbrv">DEX</option>
									<option value="@{CON-mod}" data-i18n="constitution-abbrv">CON</option>
									<option value="@{INT-mod}" data-i18n="intelligence-abbrv-default" selected>&#8226;INT</option>
									<option value="@{WIS-mod}" data-i18n="wisdom-abbrv">WIS</option>
									<option value="@{CHA-mod}" data-i18n="charisma-abbrv">CHA</option>
								</select>
							</span>
							<span class="sheet-table-cell"><input title="@{Craft-ability-mod}" type="number" name="attr_Craft-ability-mod" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Craft-racial}" type="number" name="attr_Craft-racial" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Craft-trait}" type="number" name="attr_Craft-trait" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Craft-feat}" type="number" name="attr_Craft-feat" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Craft-item}" type="number" name="attr_Craft-item" value="0" /></span>
							<input class="sheet-error-mshow" type="checkbox" value="1" role="status" aria-live="polite" name="attr_Craft-misc-mod_error" />
							<span class="sheet-table-cell sheet-highlight"><input title="@{Craft-misc}" type="text" name="attr_Craft-misc" value="" placeholder="#/Equation" data-i18n-placeholder="equation-macro-place" /></span>
							<span class="sheet-table-cell sheet-highlight"><input title="@{Craft-misc-mod}" type="number" class="sheet-calc" readonly name="attr_Craft-misc-mod" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Craft-class}" type="text" name="attr_Craft-class" value="0/0/0/0" class="sheet-calc sheet-skill-conds" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Craft-ReqTrain}" type="checkbox" name="attr_Craft-ReqTrain" value="1" /></span>
							<span class="sheet-table-cell"><textarea class="sheet-skill-macro-text" title="@{Craft-note}" name="attr_Craft-note"></textarea></span>
							<span class="sheet-table-cell"><textarea class="sheet-skill-macro-text" title="@{Craft-macro}" name="attr_Craft-macro">&{template:pf_generic} @{toggle_accessible_flag} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_generic-skill}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle}} {{name=^{craft} @{Craft-name}}} {{Check=[[ @{skill-query} + [[ @{Craft} ]] ]]}} @{Craft-ut} @{skill_options} @{Craft-cond-notes} {{generic_note=@{Craft-note}}}</textarea></span>
						</div>
						<div class="sheet-table-row sheet-craft sheet-bg sheet-custom-skill-2">
							<span class="sheet-table-cell"><button style="font-size:100%;" title="%{selected|Craft2-Check}" type="roll" value="@{PC-Whisper} @{Craft2-macro}" name="roll_Craft2-Check"></button></span>
							<span class="sheet-table-cell"><input title="@{Craft2-cs}" type="checkbox" name="attr_Craft2-cs" value="3" /></span>
							<span class="sheet-table-cell sheet-left"><input title="@{Craft2-name}" style="width:96%;" type="text" name="attr_Craft2-name" placeholder="Craft" data-i18n-placeholder="craft" /></span>
							<span class="sheet-table-cell"><input title="@{Craft2}" type="number" name="attr_Craft2" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Craft2-ranks}" type="number" name="attr_Craft2-ranks" value="0" /></span>
							<span class="sheet-table-cell">
								<select title="@{Craft2-ability}" name="attr_Craft2-ability" class="sheet-select-small">
									<option value="@{STR-mod}" data-i18n="strength-abbrv">STR</option>
									<option value="@{DEX-mod}" data-i18n="dexterity-abbrv">DEX</option>
									<option value="@{CON-mod}" data-i18n="constitution-abbrv">CON</option>
									<option value="@{INT-mod}" data-i18n="intelligence-abbrv-default" selected>&#8226;INT</option>
									<option value="@{WIS-mod}" data-i18n="wisdom-abbrv">WIS</option>
									<option value="@{CHA-mod}" data-i18n="charisma-abbrv">CHA</option>
								</select>
							</span>
							<span class="sheet-table-cell"><input title="@{Craft2-ability-mod}" type="number" name="attr_Craft2-ability-mod" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Craft2-racial}" type="number" name="attr_Craft2-racial" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Craft2-trait}" type="number" name="attr_Craft2-trait" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Craft2-feat}" type="number" name="attr_Craft2-feat" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Craft2-item}" type="number" name="attr_Craft2-item" value="0" /></span>
							<input class="sheet-error-mshow" type="checkbox" value="1" role="status" aria-live="polite" name="attr_Craft2-misc-mod_error" />
							<span class="sheet-table-cell sheet-highlight"><input title="@{Craft2-misc}" type="text" name="attr_Craft2-misc" value="" placeholder="#/Equation" data-i18n-placeholder="equation-macro-place" /></span>
							<span class="sheet-table-cell sheet-highlight"><input title="@{Craft2-misc-mod}" type="number" class="sheet-calc" readonly name="attr_Craft2-misc-mod" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Craft2-class}" type="text" name="attr_Craft2-class" value="0/0/0/0" class="sheet-calc sheet-skill-conds" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Craft2-ReqTrain}" type="checkbox" name="attr_Craft2-ReqTrain" value="1" /></span>
							<span class="sheet-table-cell"><textarea class="sheet-skill-macro-text" title="@{Craft2-note}" name="attr_Craft2-note"></textarea></span>
							<span class="sheet-table-cell"><textarea class="sheet-skill-macro-text" title="@{Craft2-macro}" name="attr_Craft2-macro">&{template:pf_generic} @{toggle_accessible_flag} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_generic-skill}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle}} {{name=^{craft} @{Craft2-name}}} {{Check=[[ @{skill-query} + [[ @{Craft2} ]] ]]}} @{Craft2-ut} @{skill_options} @{Craft2-cond-notes} {{generic_note=@{Craft2-note}}}</textarea></span>
						</div>
						<div class="sheet-table-row sheet-craft sheet-bg sheet-custom-skill-3">
							<span class="sheet-table-cell"><button style="font-size:100%;" title="%{selected|Craft3-Check}" type="roll" value="@{PC-Whisper} @{Craft3-macro}" name="roll_Craft3-Check"></button></span>
							<span class="sheet-table-cell"><input title="@{Craft3-cs}" type="checkbox" name="attr_Craft3-cs" value="3" /></span>
							<span class="sheet-table-cell sheet-left"><input title="@{Craft3-name}" style="width:96%;" type="text" name="attr_Craft3-name" placeholder="Craft" data-i18n-placeholder="craft" /></span>
							<span class="sheet-table-cell"><input title="@{Craft3}" type="number" name="attr_Craft3" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Craft3-ranks}" type="number" name="attr_Craft3-ranks" value="0" /></span>
							<span class="sheet-table-cell">
								<select title="@{Craft3-ability}" name="attr_Craft3-ability" class="sheet-select-small">
									<option value="@{STR-mod}" data-i18n="strength-abbrv">STR</option>
									<option value="@{DEX-mod}" data-i18n="dexterity-abbrv">DEX</option>
									<option value="@{CON-mod}" data-i18n="constitution-abbrv">CON</option>
									<option value="@{INT-mod}" data-i18n="intelligence-abbrv-default" selected>&#8226;INT</option>
									<option value="@{WIS-mod}" data-i18n="wisdom-abbrv">WIS</option>
									<option value="@{CHA-mod}" data-i18n="charisma-abbrv">CHA</option>
								</select>
							</span>
							<span class="sheet-table-cell"><input title="@{Craft3-ability-mod}" type="number" name="attr_Craft3-ability-mod" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Craft3-racial}" type="number" name="attr_Craft3-racial" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Craft3-trait}" type="number" name="attr_Craft3-trait" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Craft3-feat}" type="number" name="attr_Craft3-feat" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Craft3-item}" type="number" name="attr_Craft3-item" value="0" /></span>
							<input class="sheet-error-mshow" type="checkbox" value="1" role="status" aria-live="polite" name="attr_Craft3-misc-mod_error" />
							<span class="sheet-table-cell sheet-highlight"><input title="@{Craft3-misc}" type="text" name="attr_Craft3-misc" value="" placeholder="#/Equation" data-i18n-placeholder="equation-macro-place" /></span>
							<span class="sheet-table-cell sheet-highlight"><input title="@{Craft3-misc-mod}" type="number" class="sheet-calc" readonly name="attr_Craft3-misc-mod" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Craft3-class}" type="text" name="attr_Craft3-class" value="0/0/0/0" class="sheet-calc sheet-skill-conds" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Craft3-ReqTrain}" type="checkbox" name="attr_Craft3-ReqTrain" value="1" /></span>
							<span class="sheet-table-cell"><textarea class="sheet-skill-macro-text" title="@{Craft3-note}" name="attr_Craft3-note"></textarea></span>
							<span class="sheet-table-cell"><textarea class="sheet-skill-macro-text" title="@{Craft3-macro}" name="attr_Craft3-macro">&{template:pf_generic} @{toggle_accessible_flag} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_generic-skill}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle}} {{name=^{craft} @{Craft3-name}}} {{Check=[[ @{skill-query} + [[ @{Craft3} ]] ]]}} @{Craft3-ut} @{skill_options} @{Craft3-cond-notes} {{generic_note=@{Craft3-note}}}</textarea></span>
						</div>
						<div class="sheet-table-row sheet-craft sheet-bg sheet-custom-skill-6">
							<span class="sheet-table-cell"><button style="font-size:100%;" title="%{selected|Craft4-Check}" type="roll" value="@{PC-Whisper} @{Craft4-macro}" name="roll_Craft4-Check"></button></span>
							<span class="sheet-table-cell"><input title="@{Craft4-cs}" type="checkbox" name="attr_Craft4-cs" value="3" /></span>
							<span class="sheet-table-cell sheet-left"><input title="@{Craft4-name}" style="width:96%;" type="text" name="attr_Craft4-name" placeholder="Craft" data-i18n-placeholder="craft" /></span>
							<span class="sheet-table-cell"><input title="@{Craft4}" type="number" name="attr_Craft4" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Craft4-ranks}" type="number" name="attr_Craft4-ranks" value="0" /></span>
							<span class="sheet-table-cell">
								<select title="@{Craft4-ability}" name="attr_Craft4-ability" class="sheet-select-small">
									<option value="@{STR-mod}" data-i18n="strength-abbrv">STR</option>
									<option value="@{DEX-mod}" data-i18n="dexterity-abbrv">DEX</option>
									<option value="@{CON-mod}" data-i18n="constitution-abbrv">CON</option>
									<option value="@{INT-mod}" data-i18n="intelligence-abbrv-default" selected>&#8226;INT</option>
									<option value="@{WIS-mod}" data-i18n="wisdom-abbrv">WIS</option>
									<option value="@{CHA-mod}" data-i18n="charisma-abbrv">CHA</option>
								</select>
							</span>
							<span class="sheet-table-cell"><input title="@{Craft4-ability-mod}" type="number" name="attr_Craft4-ability-mod" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Craft4-racial}" type="number" name="attr_Craft4-racial" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Craft4-trait}" type="number" name="attr_Craft4-trait" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Craft4-feat}" type="number" name="attr_Craft4-feat" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Craft4-item}" type="number" name="attr_Craft4-item" value="0" /></span>
							<input class="sheet-error-mshow" type="checkbox" value="1" role="status" aria-live="polite" name="attr_Craft4-misc-mod_error" />
							<span class="sheet-table-cell sheet-highlight"><input title="@{Craft4-misc}" type="text" name="attr_Craft4-misc" value="" placeholder="#/Equation" data-i18n-placeholder="equation-macro-place" /></span>
							<span class="sheet-table-cell sheet-highlight"><input title="@{Craft4-misc-mod}" type="number" class="sheet-calc" readonly name="attr_Craft4-misc-mod" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Craft4-class}" type="text" name="attr_Craft4-class" value="0/0/0/0" class="sheet-calc sheet-skill-conds" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Craft4-ReqTrain}" type="checkbox" name="attr_Craft4-ReqTrain" value="1" /></span>
							<span class="sheet-table-cell"><textarea class="sheet-skill-macro-text" title="@{Craft4-note}" name="attr_Craft4-note"></textarea></span>
							<span class="sheet-table-cell"><textarea class="sheet-skill-macro-text" title="@{Craft4-macro}" name="attr_Craft4-macro">&{template:pf_generic} @{toggle_accessible_flag} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_generic-skill}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle}} {{name=^{craft} @{Craft4-name}}} {{Check=[[ @{skill-query} + [[ @{Craft4} ]] ]]}} @{Craft4-ut} @{skill_options} @{Craft4-cond-notes} {{generic_note=@{Craft4-note}}}</textarea></span>
						</div>
						<div class="sheet-table-row sheet-craft sheet-bg sheet-custom-skill-6">
							<span class="sheet-table-cell"><button style="font-size:100%;" title="%{selected|Craft5-Check}" type="roll" value="@{PC-Whisper} @{Craft5-macro}" name="roll_Craft5-Check"></button></span>
							<span class="sheet-table-cell"><input title="@{Craft5-cs}" type="checkbox" name="attr_Craft5-cs" value="3" /></span>
							<span class="sheet-table-cell sheet-left"><input title="@{Craft5-name}" style="width:96%;" type="text" name="attr_Craft5-name" placeholder="Craft" data-i18n-placeholder="craft" /></span>
							<span class="sheet-table-cell"><input title="@{Craft5}" type="number" name="attr_Craft5" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Craft5-ranks}" type="number" name="attr_Craft5-ranks" value="0" /></span>
							<span class="sheet-table-cell">
								<select title="@{Craft5-ability}" name="attr_Craft5-ability" class="sheet-select-small">
									<option value="@{STR-mod}" data-i18n="strength-abbrv">STR</option>
									<option value="@{DEX-mod}" data-i18n="dexterity-abbrv">DEX</option>
									<option value="@{CON-mod}" data-i18n="constitution-abbrv">CON</option>
									<option value="@{INT-mod}" data-i18n="intelligence-abbrv-default" selected>&#8226;INT</option>
									<option value="@{WIS-mod}" data-i18n="wisdom-abbrv">WIS</option>
									<option value="@{CHA-mod}" data-i18n="charisma-abbrv">CHA</option>
								</select>
							</span>
							<span class="sheet-table-cell"><input title="@{Craft5-ability-mod}" type="number" name="attr_Craft5-ability-mod" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Craft5-racial}" type="number" name="attr_Craft5-racial" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Craft5-trait}" type="number" name="attr_Craft5-trait" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Craft5-feat}" type="number" name="attr_Craft5-feat" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Craft5-item}" type="number" name="attr_Craft5-item" value="0" /></span>
							<input class="sheet-error-mshow" type="checkbox" value="1" role="status" aria-live="polite" name="attr_Craft5-misc-mod_error" />
							<span class="sheet-table-cell sheet-highlight"><input title="@{Craft5-misc}" type="text" name="attr_Craft5-misc" value="" placeholder="#/Equation" data-i18n-placeholder="equation-macro-place" /></span>
							<span class="sheet-table-cell sheet-highlight"><input title="@{Craft5-misc-mod}" type="number" class="sheet-calc" readonly name="attr_Craft5-misc-mod" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Craft5-class}" type="text" name="attr_Craft5-class" value="0/0/0/0" class="sheet-calc sheet-skill-conds" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Craft5-ReqTrain}" type="checkbox" name="attr_Craft5-ReqTrain" value="1" /></span>
							<span class="sheet-table-cell"><textarea class="sheet-skill-macro-text" title="@{Craft5-note}" name="attr_Craft5-note"></textarea></span>
							<span class="sheet-table-cell"><textarea class="sheet-skill-macro-text" title="@{Craft5-macro}" name="attr_Craft5-macro">&{template:pf_generic} @{toggle_accessible_flag} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_generic-skill}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle}} {{name=^{craft} @{Craft5-name}}} {{Check=[[ @{skill-query} + [[ @{Craft5} ]] ]]}} @{Craft5-ut} @{skill_options} @{Craft5-cond-notes} {{generic_note=@{Craft5-note}}}</textarea></span>
						</div>
						<div class="sheet-table-row sheet-craft sheet-bg sheet-custom-skill-6">
							<span class="sheet-table-cell"><button style="font-size:100%;" title="%{selected|Craft6-Check}" type="roll" value="@{PC-Whisper} @{Craft6-macro}" name="roll_Craft6-Check"></button></span>
							<span class="sheet-table-cell"><input title="@{Craft6-cs}" type="checkbox" name="attr_Craft6-cs" value="3" /></span>
							<span class="sheet-table-cell sheet-left"><input title="@{Craft6-name}" style="width:96%;" type="text" name="attr_Craft6-name" placeholder="Craft" data-i18n-placeholder="craft" /></span>
							<span class="sheet-table-cell"><input title="@{Craft6}" type="number" name="attr_Craft6" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Craft6-ranks}" type="number" name="attr_Craft6-ranks" value="0" /></span>
							<span class="sheet-table-cell">
								<select title="@{Craft6-ability}" name="attr_Craft6-ability" class="sheet-select-small">
									<option value="@{STR-mod}" data-i18n="strength-abbrv">STR</option>
									<option value="@{DEX-mod}" data-i18n="dexterity-abbrv">DEX</option>
									<option value="@{CON-mod}" data-i18n="constitution-abbrv">CON</option>
									<option value="@{INT-mod}" data-i18n="intelligence-abbrv-default" selected>&#8226;INT</option>
									<option value="@{WIS-mod}" data-i18n="wisdom-abbrv">WIS</option>
									<option value="@{CHA-mod}" data-i18n="charisma-abbrv">CHA</option>
								</select>
							</span>
							<span class="sheet-table-cell"><input title="@{Craft6-ability-mod}" type="number" name="attr_Craft6-ability-mod" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Craft6-racial}" type="number" name="attr_Craft6-racial" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Craft6-trait}" type="number" name="attr_Craft6-trait" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Craft6-feat}" type="number" name="attr_Craft6-feat" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Craft6-item}" type="number" name="attr_Craft6-item" value="0" /></span>
							<input class="sheet-error-mshow" type="checkbox" value="1" role="status" aria-live="polite" name="attr_Craft6-misc-mod_error" />
							<span class="sheet-table-cell sheet-highlight"><input title="@{Craft6-misc}" type="text" name="attr_Craft6-misc" value="" placeholder="#/Equation" data-i18n-placeholder="equation-macro-place" /></span>
							<span class="sheet-table-cell sheet-highlight"><input title="@{Craft6-misc-mod}" type="number" class="sheet-calc" readonly name="attr_Craft6-misc-mod" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Craft6-class}" type="text" name="attr_Craft6-class" value="0/0/0/0" class="sheet-calc sheet-skill-conds" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Craft6-ReqTrain}" type="checkbox" name="attr_Craft6-ReqTrain" value="1" /></span>
							<span class="sheet-table-cell"><textarea class="sheet-skill-macro-text" title="@{Craft6-note}" name="attr_Craft6-note"></textarea></span>
							<span class="sheet-table-cell"><textarea class="sheet-skill-macro-text" title="@{Craft6-macro}" name="attr_Craft6-macro">&{template:pf_generic} @{toggle_accessible_flag} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_generic-skill}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle}} {{name=^{craft} @{Craft6-name}}} {{Check=[[ @{skill-query} + [[ @{Craft6} ]] ]]}} @{Craft6-ut} @{skill_options} @{Craft6-cond-notes} {{generic_note=@{Craft6-note}}}</textarea></span>
						</div>
						<div class="sheet-table-row sheet-craft sheet-bg sheet-custom-skill-10">
							<span class="sheet-table-cell"><button style="font-size:100%;" title="%{selected|Craft7-Check}" type="roll" value="@{PC-Whisper} @{Craft7-macro}" name="roll_Craft7-Check"></button></span>
							<span class="sheet-table-cell"><input title="@{Craft7-cs}" type="checkbox" name="attr_Craft7-cs" value="3" /></span>
							<span class="sheet-table-cell sheet-left"><input title="@{Craft7-name}" style="width:96%;" type="text" name="attr_Craft7-name" placeholder="Craft" data-i18n-placeholder="craft" /></span>
							<span class="sheet-table-cell"><input title="@{Craft7}" type="number" name="attr_Craft7" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Craft7-ranks}" type="number" name="attr_Craft7-ranks" value="0" /></span>
							<span class="sheet-table-cell">
								<select title="@{Craft7-ability}" name="attr_Craft7-ability" class="sheet-select-small">
									<option value="@{STR-mod}" data-i18n="strength-abbrv">STR</option>
									<option value="@{DEX-mod}" data-i18n="dexterity-abbrv">DEX</option>
									<option value="@{CON-mod}" data-i18n="constitution-abbrv">CON</option>
									<option value="@{INT-mod}" data-i18n="intelligence-abbrv-default" selected>&#8226;INT</option>
									<option value="@{WIS-mod}" data-i18n="wisdom-abbrv">WIS</option>
									<option value="@{CHA-mod}" data-i18n="charisma-abbrv">CHA</option>
								</select>
							</span>
							<span class="sheet-table-cell"><input title="@{Craft7-ability-mod}" type="number" name="attr_Craft7-ability-mod" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Craft7-racial}" type="number" name="attr_Craft7-racial" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Craft7-trait}" type="number" name="attr_Craft7-trait" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Craft7-feat}" type="number" name="attr_Craft7-feat" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Craft7-item}" type="number" name="attr_Craft7-item" value="0" /></span>
							<input class="sheet-error-mshow" type="checkbox" value="1" role="status" aria-live="polite" name="attr_Craft7-misc-mod_error" />
							<span class="sheet-table-cell sheet-highlight"><input title="@{Craft7-misc}" type="text" name="attr_Craft7-misc" value="" placeholder="#/Equation" data-i18n-placeholder="equation-macro-place" /></span>
							<span class="sheet-table-cell sheet-highlight"><input title="@{Craft7-misc-mod}" type="number" class="sheet-calc" readonly name="attr_Craft7-misc-mod" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Craft7-class}" type="text" name="attr_Craft7-class" value="0/0/0/0" class="sheet-calc sheet-skill-conds" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Craft7-ReqTrain}" type="checkbox" name="attr_Craft7-ReqTrain" value="1" /></span>
							<span class="sheet-table-cell"><textarea class="sheet-skill-macro-text" title="@{Craft7-note}" name="attr_Craft7-note"></textarea></span>
							<span class="sheet-table-cell"><textarea class="sheet-skill-macro-text" title="@{Craft7-macro}" name="attr_Craft7-macro">&{template:pf_generic} @{toggle_accessible_flag} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_generic-skill}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle}} {{name=^{craft} @{Craft7-name}}} {{Check=[[ @{skill-query} + [[ @{Craft7} ]] ]]}} @{Craft7-ut} @{skill_options} @{Craft7-cond-notes} {{generic_note=@{Craft7-note}}}</textarea></span>
						</div>
						<div class="sheet-table-row sheet-craft sheet-bg sheet-custom-skill-10">
							<span class="sheet-table-cell"><button style="font-size:100%;" title="%{selected|Craft8-Check}" type="roll" value="@{PC-Whisper} @{Craft8-macro}" name="roll_Craft8-Check"></button></span>
							<span class="sheet-table-cell"><input title="@{Craft8-cs}" type="checkbox" name="attr_Craft8-cs" value="3" /></span>
							<span class="sheet-table-cell sheet-left"><input title="@{Craft8-name}" style="width:96%;" type="text" name="attr_Craft8-name" placeholder="Craft" data-i18n-placeholder="craft" /></span>
							<span class="sheet-table-cell"><input title="@{Craft8}" type="number" name="attr_Craft8" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Craft8-ranks}" type="number" name="attr_Craft8-ranks" value="0" /></span>
							<span class="sheet-table-cell">
								<select title="@{Craft8-ability}" name="attr_Craft8-ability" class="sheet-select-small">
									<option value="@{STR-mod}" data-i18n="strength-abbrv">STR</option>
									<option value="@{DEX-mod}" data-i18n="dexterity-abbrv">DEX</option>
									<option value="@{CON-mod}" data-i18n="constitution-abbrv">CON</option>
									<option value="@{INT-mod}" data-i18n="intelligence-abbrv-default" selected>&#8226;INT</option>
									<option value="@{WIS-mod}" data-i18n="wisdom-abbrv">WIS</option>
									<option value="@{CHA-mod}" data-i18n="charisma-abbrv">CHA</option>
								</select>
							</span>
							<span class="sheet-table-cell"><input title="@{Craft8-ability-mod}" type="number" name="attr_Craft8-ability-mod" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Craft8-racial}" type="number" name="attr_Craft8-racial" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Craft8-trait}" type="number" name="attr_Craft8-trait" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Craft8-feat}" type="number" name="attr_Craft8-feat" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Craft8-item}" type="number" name="attr_Craft8-item" value="0" /></span>
							<input class="sheet-error-mshow" type="checkbox" value="1" role="status" aria-live="polite" name="attr_Craft8-misc-mod_error" />
							<span class="sheet-table-cell sheet-highlight"><input title="@{Craft8-misc}" type="text" name="attr_Craft8-misc" value="" placeholder="#/Equation" data-i18n-placeholder="equation-macro-place" /></span>
							<span class="sheet-table-cell sheet-highlight"><input title="@{Craft8-misc-mod}" type="number" class="sheet-calc" readonly name="attr_Craft8-misc-mod" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Craft8-class}" type="text" name="attr_Craft8-class" value="0/0/0/0" class="sheet-calc sheet-skill-conds" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Craft8-ReqTrain}" type="checkbox" name="attr_Craft8-ReqTrain" value="1" /></span>
							<span class="sheet-table-cell"><textarea class="sheet-skill-macro-text" title="@{Craft8-note}" name="attr_Craft8-note"></textarea></span>
							<span class="sheet-table-cell"><textarea class="sheet-skill-macro-text" title="@{Craft8-macro}" name="attr_Craft8-macro">&{template:pf_generic} @{toggle_accessible_flag} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_generic-skill}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle}} {{name=^{craft} @{Craft8-name}}} {{Check=[[ @{skill-query} + [[ @{Craft8} ]] ]]}} @{Craft8-ut} @{skill_options} @{Craft8-cond-notes} {{generic_note=@{Craft8-note}}}</textarea></span>
						</div>
						<div class="sheet-table-row sheet-craft sheet-bg sheet-custom-skill-10">
							<span class="sheet-table-cell"><button style="font-size:100%;" title="%{selected|Craft9-Check}" type="roll" value="@{PC-Whisper} @{Craft9-macro}" name="roll_Craft9-Check"></button></span>
							<span class="sheet-table-cell"><input title="@{Craft9-cs}" type="checkbox" name="attr_Craft9-cs" value="3" /></span>
							<span class="sheet-table-cell sheet-left"><input title="@{Craft9-name}" style="width:96%;" type="text" name="attr_Craft9-name" placeholder="Craft" data-i18n-placeholder="craft" /></span>
							<span class="sheet-table-cell"><input title="@{Craft9}" type="number" name="attr_Craft9" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Craft9-ranks}" type="number" name="attr_Craft9-ranks" value="0" /></span>
							<span class="sheet-table-cell">
								<select title="@{Craft9-ability}" name="attr_Craft9-ability" class="sheet-select-small">
									<option value="@{STR-mod}" data-i18n="strength-abbrv">STR</option>
									<option value="@{DEX-mod}" data-i18n="dexterity-abbrv">DEX</option>
									<option value="@{CON-mod}" data-i18n="constitution-abbrv">CON</option>
									<option value="@{INT-mod}" data-i18n="intelligence-abbrv-default" selected>&#8226;INT</option>
									<option value="@{WIS-mod}" data-i18n="wisdom-abbrv">WIS</option>
									<option value="@{CHA-mod}" data-i18n="charisma-abbrv">CHA</option>
								</select>
							</span>
							<span class="sheet-table-cell"><input title="@{Craft9-ability-mod}" type="number" name="attr_Craft9-ability-mod" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Craft9-racial}" type="number" name="attr_Craft9-racial" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Craft9-trait}" type="number" name="attr_Craft9-trait" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Craft9-feat}" type="number" name="attr_Craft9-feat" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Craft9-item}" type="number" name="attr_Craft9-item" value="0" /></span>
							<input class="sheet-error-mshow" type="checkbox" value="1" role="status" aria-live="polite" name="attr_Craft9-misc-mod_error" />
							<span class="sheet-table-cell sheet-highlight"><input title="@{Craft9-misc}" type="text" name="attr_Craft9-misc" value="" placeholder="#/Equation" data-i18n-placeholder="equation-macro-place" /></span>
							<span class="sheet-table-cell sheet-highlight"><input title="@{Craft9-misc-mod}" type="number" class="sheet-calc" readonly name="attr_Craft9-misc-mod" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Craft9-class}" type="text" name="attr_Craft9-class" value="0/0/0/0" class="sheet-calc sheet-skill-conds" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Craft9-ReqTrain}" type="checkbox" name="attr_Craft9-ReqTrain" value="1" /></span>
							<span class="sheet-table-cell"><textarea class="sheet-skill-macro-text" title="@{Craft9-note}" name="attr_Craft9-note"></textarea></span>
							<span class="sheet-table-cell"><textarea class="sheet-skill-macro-text" title="@{Craft9-macro}" name="attr_Craft9-macro">&{template:pf_generic} @{toggle_accessible_flag} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_generic-skill}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle}} {{name=^{craft} @{Craft9-name}}} {{Check=[[ @{skill-query} + [[ @{Craft9} ]] ]]}} @{Craft9-ut} @{skill_options} @{Craft9-cond-notes} {{generic_note=@{Craft9-note}}}</textarea></span>
						</div>
						<div class="sheet-table-row sheet-craft sheet-bg sheet-custom-skill-10">
							<span class="sheet-table-cell"><button style="font-size:100%;" title="%{selected|Craft10-Check}" type="roll" value="@{PC-Whisper} @{Craft10-macro}" name="roll_Craft10-Check"></button></span>
							<span class="sheet-table-cell"><input title="@{Craft10-cs}" type="checkbox" name="attr_Craft10-cs" value="3" /></span>
							<span class="sheet-table-cell sheet-left"><input title="@{Craft10-name}" style="width:96%;" type="text" name="attr_Craft10-name" placeholder="Craft" data-i18n-placeholder="craft" /></span>
							<span class="sheet-table-cell"><input title="@{Craft10}" type="number" name="attr_Craft10" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Craft10-ranks}" type="number" name="attr_Craft10-ranks" value="0" /></span>
							<span class="sheet-table-cell">
								<select title="@{Craft10-ability}" name="attr_Craft10-ability" class="sheet-select-small">
									<option value="@{STR-mod}" data-i18n="strength-abbrv">STR</option>
									<option value="@{DEX-mod}" data-i18n="dexterity-abbrv">DEX</option>
									<option value="@{CON-mod}" data-i18n="constitution-abbrv">CON</option>
									<option value="@{INT-mod}" data-i18n="intelligence-abbrv-default" selected>&#8226;INT</option>
									<option value="@{WIS-mod}" data-i18n="wisdom-abbrv">WIS</option>
									<option value="@{CHA-mod}" data-i18n="charisma-abbrv">CHA</option>
								</select>
							</span>
							<span class="sheet-table-cell"><input title="@{Craft10-ability-mod}" type="number" name="attr_Craft10-ability-mod" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Craft10-racial}" type="number" name="attr_Craft10-racial" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Craft10-trait}" type="number" name="attr_Craft10-trait" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Craft10-feat}" type="number" name="attr_Craft10-feat" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Craft10-item}" type="number" name="attr_Craft10-item" value="0" /></span>
							<input class="sheet-error-mshow" type="checkbox" value="1" role="status" aria-live="polite" name="attr_Craft10-misc-mod_error" />
							<span class="sheet-table-cell sheet-highlight"><input title="@{Craft10-misc}" type="text" name="attr_Craft10-misc" value="" placeholder="#/Equation" data-i18n-placeholder="equation-macro-place" /></span>
							<span class="sheet-table-cell sheet-highlight"><input title="@{Craft10-misc-mod}" type="number" class="sheet-calc" readonly name="attr_Craft10-misc-mod" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Craft10-class}" type="text" name="attr_Craft10-class" value="0/0/0/0" class="sheet-calc sheet-skill-conds" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Craft10-ReqTrain}" type="checkbox" name="attr_Craft10-ReqTrain" value="1" /></span>
							<span class="sheet-table-cell"><textarea class="sheet-skill-macro-text" title="@{Craft10-note}" name="attr_Craft10-note"></textarea></span>
							<span class="sheet-table-cell"><textarea class="sheet-skill-macro-text" title="@{Craft10-macro}" name="attr_Craft10-macro">&{template:pf_generic} @{toggle_accessible_flag} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_generic-skill}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle}} {{name=^{craft}-10 @{Craft10-name}}} {{Check=[[ @{skill-query} + [[ @{Craft10} ]] ]]}} @{Craft10-ut} @{skill_options} @{Craft10-cond-notes} {{generic_note=@{Craft10-note}}}</textarea></span>
						</div>
						<div class="sheet-table-row sheet-adventure">
							<span class="sheet-table-cell"><button style="font-size:100%;" title="%{selected|Diplomacy-Check}" type="roll" value="@{PC-Whisper} @{Diplomacy-macro}" name="roll_Diplomacy-Check"></button></span>
							<span class="sheet-table-cell"><input title="@{Diplomacy-cs}" type="checkbox" name="attr_Diplomacy-cs" value="3" /></span>
							<span class="sheet-table-cell sheet-left" data-i18n="diplomacy">Diplomacy</span>
							<span class="sheet-table-cell"><input title="@{Diplomacy}" type="number" name="attr_Diplomacy" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Diplomacy-ranks}" type="number" name="attr_Diplomacy-ranks" value="0" /></span>
							<span class="sheet-table-cell">
								<select title="@{Diplomacy-ability}" name="attr_Diplomacy-ability" class="sheet-select-small">
									<option value="@{STR-mod}" data-i18n="strength-abbrv">STR</option>
									<option value="@{DEX-mod}" data-i18n="dexterity-abbrv">DEX</option>
									<option value="@{CON-mod}" data-i18n="constitution-abbrv">CON</option>
									<option value="@{INT-mod}" data-i18n="intelligence-abbrv">INT</option>
									<option value="@{WIS-mod}" data-i18n="wisdom-abbrv">WIS</option>
									<option value="@{CHA-mod}" data-i18n="charisma-abbrv-default" selected>&#8226;CHA</option>
								</select>
							</span>
							<span class="sheet-table-cell"><input title="@{Diplomacy-ability-mod}" type="number" name="attr_Diplomacy-ability-mod" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Diplomacy-racial}" type="number" name="attr_Diplomacy-racial" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Diplomacy-trait}" type="number" name="attr_Diplomacy-trait" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Diplomacy-feat}" type="number" name="attr_Diplomacy-feat" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Diplomacy-item}" type="number" name="attr_Diplomacy-item" value="0" /></span>
							<input class="sheet-error-mshow" type="checkbox" value="1" role="status" aria-live="polite" name="attr_Diplomacy-misc-mod_error" />
							<span class="sheet-table-cell sheet-highlight"><input title="@{Diplomacy-misc}" type="text" name="attr_Diplomacy-misc" value="" placeholder="#/Equation" data-i18n-placeholder="equation-macro-place" /></span>
							<span class="sheet-table-cell sheet-highlight"><input title="@{Diplomacy-misc-mod}" type="number" class="sheet-calc" readonly name="attr_Diplomacy-misc-mod" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Diplomacy-class}" type="text" name="attr_Diplomacy-class" value="0/0/0/0" class="sheet-calc sheet-skill-conds" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Diplomacy-ReqTrain}" type="checkbox" name="attr_Diplomacy-ReqTrain" value="1" /></span>
							<span class="sheet-table-cell"><textarea class="sheet-skill-macro-text" title="@{Diplomacy-note}" name="attr_Diplomacy-note"></textarea></span>
							<span class="sheet-table-cell"><textarea class="sheet-skill-macro-text" title="@{Diplomacy-macro}" name="attr_Diplomacy-macro">&{template:pf_generic} @{toggle_accessible_flag} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_generic-skill}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle}} {{name=^{diplomacy}}} {{Check=[[ @{skill-query} + [[ @{Diplomacy} ]] ]]}} @{Diplomacy-ut} @{skill_options} @{Diplomacy-cond-notes} {{generic_note=@{Diplomacy-note}}}</textarea></span>
						</div>
						<div class="sheet-table-row sheet-adventure">
							<span class="sheet-table-cell"><button style="font-size:100%;" title="%{selected|Disable-Device-Check}" type="roll" value="@{PC-Whisper} @{Disable-Device-macro}" name="roll_Disable-Device-Check"></button></span>
							<span class="sheet-table-cell"><input title="@{Disable-Device-cs}" type="checkbox" name="attr_Disable-Device-cs" value="3" /></span>
							<span class="sheet-table-cell sheet-left" data-i18n="disable-device">Disable-Device</span>
							<span class="sheet-table-cell"><input title="@{Disable-Device}" type="number" name="attr_Disable-Device" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Disable-Device-ranks}" type="number" name="attr_Disable-Device-ranks" value="0" /></span>
							<span class="sheet-table-cell">
								<select title="@{Disable-Device-ability}" name="attr_Disable-Device-ability" class="sheet-select-small">
									<option value="@{STR-mod}" data-i18n="strength-abbrv">STR</option>
									<option value="@{DEX-mod}" data-i18n="dexterity-abbrv-default" selected>&#8226;DEX</option>
									<option value="@{CON-mod}" data-i18n="constitution-abbrv">CON</option>
									<option value="@{INT-mod}" data-i18n="intelligence-abbrv">INT</option>
									<option value="@{WIS-mod}" data-i18n="wisdom-abbrv">WIS</option>
									<option value="@{CHA-mod}" data-i18n="charisma-abbrv">CHA</option>
								</select>
							</span>
							<span class="sheet-table-cell"><input title="@{Disable-Device-ability-mod}" type="number" name="attr_Disable-Device-ability-mod" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Disable-Device-racial}" type="number" name="attr_Disable-Device-racial" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Disable-Device-trait}" type="number" name="attr_Disable-Device-trait" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Disable-Device-feat}" type="number" name="attr_Disable-Device-feat" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Disable-Device-item}" type="number" name="attr_Disable-Device-item" value="0" /></span>
							<input class="sheet-error-mshow" type="checkbox" value="1" role="status" aria-live="polite" name="attr_Disable-Device-misc-mod_error" />
							<span class="sheet-table-cell sheet-highlight"><input title="@{Disable-Device-misc}" type="text" name="attr_Disable-Device-misc" value="" placeholder="#/Equation" data-i18n-placeholder="equation-macro-place" /></span>
							<span class="sheet-table-cell sheet-highlight"><input title="@{Disable-Device-misc-mod}" type="number" class="sheet-calc" readonly name="attr_Disable-Device-misc-mod" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Disable-Device-class}" type="text" name="attr_Disable-Device-class" value="0/0/0/0" class="sheet-calc sheet-skill-conds" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Disable-Device-ReqTrain}" type="checkbox" name="attr_Disable-Device-ReqTrain" value="1" checked /></span>
							<span class="sheet-table-cell"><textarea class="sheet-skill-macro-text" title="@{Disable-Device-note}" name="attr_Disable-Device-note"></textarea></span>
							<span class="sheet-table-cell"><textarea class="sheet-skill-macro-text" title="@{Disable-Device-macro}" name="attr_Disable-Device-macro">&{template:pf_generic} @{toggle_accessible_flag} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_generic-skill}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle}} {{name=^{disable-device}}} {{Check=[[ @{skill-query} + [[ @{Disable-Device} ]] ]]}} @{Disable-Device-ut} @{skill_options} @{Disable-Device-cond-notes} {{generic_note=@{Disable-Device-note}}}</textarea></span>
						</div>
						<div class="sheet-table-row sheet-adventure">
							<span class="sheet-table-cell"><button style="font-size:100%;" title="%{selected|Disguise-Check}" type="roll" value="@{PC-Whisper} @{Disguise-macro}" name="roll_Disguise-Check"></button></span>
							<span class="sheet-table-cell"><input title="@{Disguise-cs}" type="checkbox" name="attr_Disguise-cs" value="3" /></span>
							<span class="sheet-table-cell sheet-left" data-i18n="disguise">Disguise</span>
							<span class="sheet-table-cell"><input title="@{Disguise}" type="number" name="attr_Disguise" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Disguise-ranks}" type="number" name="attr_Disguise-ranks" value="0" /></span>
							<span class="sheet-table-cell">
								<select title="@{Disguise-ability}" name="attr_Disguise-ability" class="sheet-select-small">
									<option value="@{STR-mod}" data-i18n="strength-abbrv">STR</option>
									<option value="@{DEX-mod}" data-i18n="dexterity-abbrv">DEX</option>
									<option value="@{CON-mod}" data-i18n="constitution-abbrv">CON</option>
									<option value="@{INT-mod}" data-i18n="intelligence-abbrv">INT</option>
									<option value="@{WIS-mod}" data-i18n="wisdom-abbrv">WIS</option>
									<option value="@{CHA-mod}" data-i18n="charisma-abbrv-default" selected>&#8226;CHA</option>
								</select>
							</span>
							<span class="sheet-table-cell"><input title="@{Disguise-ability-mod}" type="number" name="attr_Disguise-ability-mod" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Disguise-racial}" type="number" name="attr_Disguise-racial" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Disguise-trait}" type="number" name="attr_Disguise-trait" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Disguise-feat}" type="number" name="attr_Disguise-feat" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Disguise-item}" type="number" name="attr_Disguise-item" value="0" /></span>
							<input class="sheet-error-mshow" type="checkbox" value="1" role="status" aria-live="polite" name="attr_Disguise-misc-mod_error" />
							<span class="sheet-table-cell sheet-highlight"><input title="@{Disguise-misc}" type="text" name="attr_Disguise-misc" value="" placeholder="#/Equation" data-i18n-placeholder="equation-macro-place" /></span>
							<span class="sheet-table-cell sheet-highlight"><input title="@{Disguise-misc-mod}" type="number" class="sheet-calc" readonly name="attr_Disguise-misc-mod" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Disguise-class}" type="text" name="attr_Disguise-class" value="0/0/0/0" class="sheet-calc sheet-skill-conds" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Disguise-ReqTrain}" type="checkbox" name="attr_Disguise-ReqTrain" value="1" /></span>
							<span class="sheet-table-cell"><textarea class="sheet-skill-macro-text" title="@{Disguise-note}" name="attr_Disguise-note"></textarea></span>
							<span class="sheet-table-cell"><textarea class="sheet-skill-macro-text" title="@{Disguise-macro}" name="attr_Disguise-macro">&{template:pf_generic} @{toggle_accessible_flag} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_generic-skill}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle}} {{name=^{disguise}}} {{Check=[[ @{skill-query} + [[ @{Disguise} ]] ]]}} @{Disguise-ut} @{skill_options} @{Disguise-cond-notes} {{generic_note=@{Disguise-note}}}</textarea></span>
						</div>
						<div class="sheet-table-row sheet-adventure">
							<span class="sheet-table-cell"><button style="font-size:100%;" title="%{selected|Escape-Artist-Check}" type="roll" value="@{PC-Whisper} @{Escape-Artist-macro}" name="roll_Escape-Artist-Check"></button></span>
							<span class="sheet-table-cell"><input title="@{Escape-Artist-cs}" type="checkbox" name="attr_Escape-Artist-cs" value="3" /></span>
							<span class="sheet-table-cell sheet-left" data-i18n="escape-artist">Escape-Artist</span>
							<span class="sheet-table-cell"><input title="@{Escape-Artist}" type="number" name="attr_Escape-Artist" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Escape-Artist-ranks}" type="number" name="attr_Escape-Artist-ranks" value="0" /></span>
							<span class="sheet-table-cell">
								<select title="@{Escape-Artist-ability}" name="attr_Escape-Artist-ability" class="sheet-select-small">
									<option value="@{STR-mod}" data-i18n="strength-abbrv">STR</option>
									<option value="@{DEX-mod}" data-i18n="dexterity-abbrv-default" selected>&#8226;DEX</option>
									<option value="@{CON-mod}" data-i18n="constitution-abbrv">CON</option>
									<option value="@{INT-mod}" data-i18n="intelligence-abbrv">INT</option>
									<option value="@{WIS-mod}" data-i18n="wisdom-abbrv">WIS</option>
									<option value="@{CHA-mod}" data-i18n="charisma-abbrv">CHA</option>
								</select>
							</span>
							<span class="sheet-table-cell"><input title="@{Escape-Artist-ability-mod}" type="number" name="attr_Escape-Artist-ability-mod" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Escape-Artist-racial}" type="number" name="attr_Escape-Artist-racial" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Escape-Artist-trait}" type="number" name="attr_Escape-Artist-trait" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Escape-Artist-feat}" type="number" name="attr_Escape-Artist-feat" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Escape-Artist-item}" type="number" name="attr_Escape-Artist-item" value="0" /></span>
							<input class="sheet-error-mshow" type="checkbox" value="1" role="status" aria-live="polite" name="attr_Escape-Artist-misc-mod_error" />
							<span class="sheet-table-cell sheet-highlight"><input title="@{Escape-Artist-misc}" type="text" name="attr_Escape-Artist-misc" value="" placeholder="#/Equation" data-i18n-placeholder="equation-macro-place" /></span>
							<span class="sheet-table-cell sheet-highlight"><input title="@{Escape-Artist-misc-mod}" type="number" class="sheet-calc" readonly name="attr_Escape-Artist-misc-mod" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Escape-Artist-class}" type="text" name="attr_Escape-Artist-class" value="0/0/0/0" class="sheet-calc sheet-skill-conds" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Escape-Artist-ReqTrain}" type="checkbox" name="attr_Escape-Artist-ReqTrain" value="1" /></span>
							<span class="sheet-table-cell"><textarea class="sheet-skill-macro-text" title="@{Escape-Artist-note}" name="attr_Escape-Artist-note"></textarea></span>
							<span class="sheet-table-cell"><textarea class="sheet-skill-macro-text" title="@{Escape-Artist-macro}" name="attr_Escape-Artist-macro">&{template:pf_generic} @{toggle_accessible_flag} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_generic-skill}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle}} {{name=^{escape-artist}}} {{Check=[[ @{skill-query} + [[ @{Escape-Artist} ]] ]]}} @{Escape-Artist-ut} @{skill_options} @{Escape-Artist-cond-notes} {{generic_note=@{Escape-Artist-note}}}</textarea></span>
						</div>
						<div class="sheet-table-row sheet-adventure">
							<span class="sheet-table-cell"><button style="font-size:100%;" title="%{selected|Fly-Check}" type="roll" value="@{PC-Whisper} @{Fly-macro}" name="roll_Fly-Check"></button></span>
							<span class="sheet-table-cell"><input title="@{Fly-cs}" type="checkbox" name="attr_Fly-cs" value="3" /></span>
							<span class="sheet-table-cell sheet-left" data-i18n="fly">Fly</span>
							<span class="sheet-table-cell"><input title="@{Fly}" type="number" name="attr_Fly" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Fly-ranks}" type="number" name="attr_Fly-ranks" value="0" /></span>
							<span class="sheet-table-cell">
								<select title="@{Fly-ability}" name="attr_Fly-ability" class="sheet-select-small">
									<option value="@{STR-mod}" data-i18n="strength-abbrv">STR</option>
									<option value="@{DEX-mod}" data-i18n="dexterity-abbrv-default" selected>&#8226;DEX</option>
									<option value="@{CON-mod}" data-i18n="constitution-abbrv">CON</option>
									<option value="@{INT-mod}" data-i18n="intelligence-abbrv">INT</option>
									<option value="@{WIS-mod}" data-i18n="wisdom-abbrv">WIS</option>
									<option value="@{CHA-mod}" data-i18n="charisma-abbrv">CHA</option>
								</select>
							</span>
							<span class="sheet-table-cell"><input title="@{Fly-ability-mod}" type="number" name="attr_Fly-ability-mod" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Fly-racial}" type="number" name="attr_Fly-racial" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Fly-trait}" type="number" name="attr_Fly-trait" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Fly-feat}" type="number" name="attr_Fly-feat" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Fly-item}" type="number" name="attr_Fly-item" value="0" /></span>
							<input class="sheet-error-mshow" type="checkbox" value="1" role="status" aria-live="polite" name="attr_Fly-misc-mod_error" />
							<span class="sheet-table-cell sheet-highlight"><input title="@{Fly-misc}" type="text" name="attr_Fly-misc" value="" placeholder="#/Equation" data-i18n-placeholder="equation-macro-place" /></span>
							<span class="sheet-table-cell sheet-highlight"><input title="@{Fly-misc-mod}" type="number" class="sheet-calc" readonly name="attr_Fly-misc-mod" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Fly-class}" type="text" name="attr_Fly-class" value="0/0/0/0" class="sheet-calc sheet-skill-conds" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Fly-ReqTrain}" type="checkbox" name="attr_Fly-ReqTrain" value="1" /></span>
							<span class="sheet-table-cell"><textarea class="sheet-skill-macro-text" title="@{Fly-note}" name="attr_Fly-note"></textarea></span>
							<span class="sheet-table-cell"><textarea class="sheet-skill-macro-text" title="@{Fly-macro}" name="attr_Fly-macro">&{template:pf_generic} @{toggle_accessible_flag} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_generic-skill}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle}} {{name=^{fly}}} {{Check=[[ @{skill-query} + [[ @{Fly} ]] ]]}} @{Fly-ut} @{skill_options} @{Fly-cond-notes} {{generic_note=@{Fly-note}}}</textarea></span>
						</div>
						<div class="sheet-table-row sheet-bg">
							<span class="sheet-table-cell"><button style="font-size:100%;" title="%{selected|Handle-Animal-Check}" type="roll" value="@{PC-Whisper} @{Handle-Animal-macro}" name="roll_Handle-Animal-Check"></button></span>
							<span class="sheet-table-cell"><input title="@{Handle-Animal-cs}" type="checkbox" name="attr_Handle-Animal-cs" value="3" /></span>
							<span class="sheet-table-cell sheet-left" data-i18n="handle-animal">Handle-Animal</span>
							<span class="sheet-table-cell"><input title="@{Handle-Animal}" type="number" name="attr_Handle-Animal" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Handle-Animal-ranks}" type="number" name="attr_Handle-Animal-ranks" value="0" /></span>
							<span class="sheet-table-cell">
								<select title="@{Handle-Animal-ability}" name="attr_Handle-Animal-ability" class="sheet-select-small">
									<option value="@{STR-mod}" data-i18n="strength-abbrv">STR</option>
									<option value="@{DEX-mod}" data-i18n="dexterity-abbrv">DEX</option>
									<option value="@{CON-mod}" data-i18n="constitution-abbrv">CON</option>
									<option value="@{INT-mod}" data-i18n="intelligence-abbrv">INT</option>
									<option value="@{WIS-mod}" data-i18n="wisdom-abbrv">WIS</option>
									<option value="@{CHA-mod}" data-i18n="charisma-abbrv-default" selected>&#8226;CHA</option>
								</select>
							</span>
							<span class="sheet-table-cell"><input title="@{Handle-Animal-ability-mod}" type="number" name="attr_Handle-Animal-ability-mod" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Handle-Animal-racial}" type="number" name="attr_Handle-Animal-racial" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Handle-Animal-trait}" type="number" name="attr_Handle-Animal-trait" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Handle-Animal-feat}" type="number" name="attr_Handle-Animal-feat" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Handle-Animal-item}" type="number" name="attr_Handle-Animal-item" value="0" /></span>
							<input class="sheet-error-mshow" type="checkbox" value="1" role="status" aria-live="polite" name="attr_Handle-Animal-misc-mod_error" />
							<span class="sheet-table-cell sheet-highlight"><input title="@{Handle-Animal-misc}" type="text" name="attr_Handle-Animal-misc" value="" placeholder="#/Equation" data-i18n-placeholder="equation-macro-place" /></span>
							<span class="sheet-table-cell sheet-highlight"><input title="@{Handle-Animal-misc-mod}" type="number" class="sheet-calc" readonly name="attr_Handle-Animal-misc-mod" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Handle-Animal-class}" type="text" name="attr_Handle-Animal-class" value="0/0/0/0" class="sheet-calc sheet-skill-conds" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Handle-Animal-ReqTrain}" type="checkbox" name="attr_Handle-Animal-ReqTrain" value="1" checked /></span>
							<span class="sheet-table-cell"><textarea class="sheet-skill-macro-text" title="@{Handle-Animal-note}" name="attr_Handle-Animal-note"></textarea></span>
							<span class="sheet-table-cell"><textarea class="sheet-skill-macro-text" title="@{Handle-Animal-macro}" name="attr_Handle-Animal-macro">&{template:pf_generic} @{toggle_accessible_flag} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_generic-skill}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle}} {{name=^{handle-animal}}} {{Check=[[ @{skill-query} + [[ @{Handle-Animal} ]] ]]}} @{Handle-Animal-ut} @{skill_options} @{Handle-Animal-cond-notes} {{generic_note=@{Handle-Animal-note}}}</textarea></span>
						</div>
						<div class="sheet-table-row sheet-adventure">
							<span class="sheet-table-cell"><button style="font-size:100%;" title="%{selected|Heal-Check}" type="roll" value="@{PC-Whisper} @{Heal-macro}" name="roll_Heal-Check"></button></span>
							<span class="sheet-table-cell"><input title="@{Heal-cs}" type="checkbox" name="attr_Heal-cs" value="3" /></span>
							<span class="sheet-table-cell sheet-left" data-i18n="heal">Heal</span>
							<span class="sheet-table-cell"><input title="@{Heal}" type="number" name="attr_Heal" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Heal-ranks}" type="number" name="attr_Heal-ranks" value="0" /></span>
							<span class="sheet-table-cell">
								<select title="@{Heal-ability}" name="attr_Heal-ability" class="sheet-select-small">
									<option value="@{STR-mod}" data-i18n="strength-abbrv">STR</option>
									<option value="@{DEX-mod}" data-i18n="dexterity-abbrv">DEX</option>
									<option value="@{CON-mod}" data-i18n="constitution-abbrv">CON</option>
									<option value="@{INT-mod}" data-i18n="intelligence-abbrv">INT</option>
									<option value="@{WIS-mod}" data-i18n="wisdom-abbrv-default" selected>&#8226;WIS</option>
									<option value="@{CHA-mod}" data-i18n="charisma-abbrv">CHA</option>
								</select>
							</span>
							<span class="sheet-table-cell"><input title="@{Heal-ability-mod}" type="number" name="attr_Heal-ability-mod" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Heal-racial}" type="number" name="attr_Heal-racial" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Heal-trait}" type="number" name="attr_Heal-trait" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Heal-feat}" type="number" name="attr_Heal-feat" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Heal-item}" type="number" name="attr_Heal-item" value="0" /></span>
							<input class="sheet-error-mshow" type="checkbox" value="1" role="status" aria-live="polite" name="attr_Heal-misc-mod_error" />
							<span class="sheet-table-cell sheet-highlight"><input title="@{Heal-misc}" type="text" name="attr_Heal-misc" value="" placeholder="#/Equation" data-i18n-placeholder="equation-macro-place" /></span>
							<span class="sheet-table-cell sheet-highlight"><input title="@{Heal-misc-mod}" type="number" class="sheet-calc" readonly name="attr_Heal-misc-mod" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Heal-class}" type="text" name="attr_Heal-class" value="0/0/0/0" class="sheet-calc sheet-skill-conds" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Heal-ReqTrain}" type="checkbox" name="attr_Heal-ReqTrain" value="1" /></span>
							<span class="sheet-table-cell"><textarea class="sheet-skill-macro-text" title="@{Heal-note}" name="attr_Heal-note"></textarea></span>
							<span class="sheet-table-cell"><textarea class="sheet-skill-macro-text" title="@{Heal-macro}" name="attr_Heal-macro">&{template:pf_generic} @{toggle_accessible_flag} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_generic-skill}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle}} {{name=^{heal}}} {{Check=[[ @{skill-query} + [[ @{Heal} ]] ]]}} @{Heal-ut} @{skill_options} @{Heal-cond-notes} {{generic_note=@{Heal-note}}}</textarea></span>
						</div>
						<div class="sheet-table-row sheet-adventure">
							<span class="sheet-table-cell"><button style="font-size:100%;" title="%{selected|Intimidate-Check}" type="roll" value="@{PC-Whisper} @{Intimidate-macro}" name="roll_Intimidate-Check"></button></span>
							<span class="sheet-table-cell"><input title="@{Intimidate-cs}" type="checkbox" name="attr_Intimidate-cs" value="3" /></span>
							<span class="sheet-table-cell sheet-left" data-i18n="intimidate">Intimidate</span>
							<span class="sheet-table-cell"><input title="@{Intimidate}" type="number" name="attr_Intimidate" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Intimidate-ranks}" type="number" name="attr_Intimidate-ranks" value="0" /></span>
							<span class="sheet-table-cell">
								<select title="@{Intimidate-ability}" name="attr_Intimidate-ability" class="sheet-select-small">
									<option value="@{STR-mod}" data-i18n="strength-abbrv">STR</option>
									<option value="@{DEX-mod}" data-i18n="dexterity-abbrv">DEX</option>
									<option value="@{CON-mod}" data-i18n="constitution-abbrv">CON</option>
									<option value="@{INT-mod}" data-i18n="intelligence-abbrv">INT</option>
									<option value="@{WIS-mod}" data-i18n="wisdom-abbrv">WIS</option>
									<option value="@{CHA-mod}" data-i18n="charisma-abbrv-default" selected>&#8226;CHA</option>
								</select>
							</span>
							<span class="sheet-table-cell"><input title="@{Intimidate-ability-mod}" type="number" name="attr_Intimidate-ability-mod" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Intimidate-racial}" type="number" name="attr_Intimidate-racial" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Intimidate-trait}" type="number" name="attr_Intimidate-trait" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Intimidate-feat}" type="number" name="attr_Intimidate-feat" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Intimidate-item}" type="number" name="attr_Intimidate-item" value="0" /></span>
							<input class="sheet-error-mshow" type="checkbox" value="1" role="status" aria-live="polite" name="attr_Intimidate-misc-mod_error" />
							<span class="sheet-table-cell sheet-highlight"><input title="@{Intimidate-misc}" type="text" name="attr_Intimidate-misc" value="" placeholder="#/Equation" data-i18n-placeholder="equation-macro-place" /></span>
							<span class="sheet-table-cell sheet-highlight"><input title="@{Intimidate-misc-mod}" type="number" class="sheet-calc" readonly name="attr_Intimidate-misc-mod" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Intimidate-class}" type="text" name="attr_Intimidate-class" value="0/0/0/0" class="sheet-calc sheet-skill-conds" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Intimidate-ReqTrain}" type="checkbox" name="attr_Intimidate-ReqTrain" value="1" /></span>
							<span class="sheet-table-cell"><textarea class="sheet-skill-macro-text" title="@{Intimidate-note}" name="attr_Intimidate-note"></textarea></span>
							<span class="sheet-table-cell"><textarea class="sheet-skill-macro-text" title="@{Intimidate-macro}" name="attr_Intimidate-macro">&{template:pf_generic} @{toggle_accessible_flag} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_generic-skill}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle}} {{name=^{intimidate}}} {{Check=[[ @{skill-query} + [[ @{Intimidate} ]] ]]}} @{Intimidate-ut} @{skill_options} @{Intimidate-cond-notes} {{generic_note=@{Intimidate-note}}}</textarea></span>
						</div>
						<span class="sheet-table-cell sheet-adventure sheet-bg">&nbsp;</span>
						<span class="sheet-table-cell sheet-adventure sheet-bg">&nbsp;</span>
						<input class="sheet-showarrow sheet-knowledge-show sheet-adventure sheet-bg" type="checkbox" name="attr_knowledge-show" data-i18n-aria-label="knowledge" title="Click to expand" data-i18n-title="showsect-cmd" value="1" checked />
						<label class="sheet-showsect sheet-skill-minishow sheet-adventure sheet-bg" title="Click to expand" data-i18n-title="showsect-cmd" data-i18n-aria-label="showsect-cmd" data-i18n="knowledge">Knowledge</label>
						<span class="sheet-adventure sheet-bg"></span>
						<div class="sheet-table-row sheet-adventure sheet-bg"><!--used to keep these sections from collapsing on each other when hidden--></div>
						<div class="sheet-table-row sheet-knowledge sheet-adventure">
							<span class="sheet-table-cell"><button style="font-size:100%;" title="%{selected|Knowledge-Arcana-Check}" type="roll" value="@{PC-Whisper} @{Knowledge-Arcana-macro}" name="roll_Knowledge-Arcana-Check"></button></span>
							<span class="sheet-table-cell"><input title="@{Knowledge-Arcana-cs}" type="checkbox" name="attr_Knowledge-Arcana-cs" value="3" /></span>
							<span class="sheet-table-cell sheet-left" data-i18n="knowledge-arcana">Knowledge (Arcana)</span>
							<span class="sheet-table-cell"><input title="@{Knowledge-Arcana}" type="number" name="attr_Knowledge-Arcana" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Knowledge-Arcana-ranks}" type="number" name="attr_Knowledge-Arcana-ranks" value="0" /></span>
							<span class="sheet-table-cell">
								<select title="@{Knowledge-Arcana-ability}" name="attr_Knowledge-Arcana-ability" class="sheet-select-small">
									<option value="@{STR-mod}" data-i18n="strength-abbrv">STR</option>
									<option value="@{DEX-mod}" data-i18n="dexterity-abbrv">DEX</option>
									<option value="@{CON-mod}" data-i18n="constitution-abbrv">CON</option>
									<option value="@{INT-mod}" data-i18n="intelligence-abbrv-default" selected>&#8226;INT</option>
									<option value="@{WIS-mod}" data-i18n="wisdom-abbrv">WIS</option>
									<option value="@{CHA-mod}" data-i18n="charisma-abbrv">CHA</option>
								</select>
							</span>
							<span class="sheet-table-cell"><input title="@{Knowledge-Arcana-ability-mod}" type="number" name="attr_Knowledge-Arcana-ability-mod" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Knowledge-Arcana-racial}" type="number" name="attr_Knowledge-Arcana-racial" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Knowledge-Arcana-trait}" type="number" name="attr_Knowledge-Arcana-trait" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Knowledge-Arcana-feat}" type="number" name="attr_Knowledge-Arcana-feat" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Knowledge-Arcana-item}" type="number" name="attr_Knowledge-Arcana-item" value="0" /></span>
							<input class="sheet-error-mshow" type="checkbox" value="1" role="status" aria-live="polite" name="attr_Knowledge-Arcana-misc-mod_error" />
							<span class="sheet-table-cell sheet-highlight"><input title="@{Knowledge-Arcana-misc}" type="text" name="attr_Knowledge-Arcana-misc" value="" placeholder="#/Equation" data-i18n-placeholder="equation-macro-place" /></span>
							<span class="sheet-table-cell sheet-highlight"><input title="@{Knowledge-Arcana-misc-mod}" type="number" class="sheet-calc" readonly name="attr_Knowledge-Arcana-misc-mod" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Knowledge-Arcana-class}" type="text" name="attr_Knowledge-Arcana-class" value="0/0/0/0" class="sheet-calc sheet-skill-conds" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Knowledge-Arcana-ReqTrain}" type="checkbox" name="attr_Knowledge-Arcana-ReqTrain" value="1" checked /></span>
							<span class="sheet-table-cell"><textarea class="sheet-skill-macro-text" title="@{Knowledge-Arcana-note}" name="attr_Knowledge-Arcana-note"></textarea></span>
							<span class="sheet-table-cell"><textarea class="sheet-skill-macro-text" title="@{Knowledge-Arcana-macro}" name="attr_Knowledge-Arcana-macro">&{template:pf_generic} @{toggle_accessible_flag} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_generic-skill}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle}} {{name=^{knowledge-arcana}}} {{Check=[[ @{skill-query} + [[ @{Knowledge-Arcana} ]] ]]}} @{Knowledge-Arcana-ut} @{skill_options} @{Knowledge-Arcana-cond-notes} {{generic_note=@{Knowledge-Arcana-note}}}</textarea></span>
						</div>
						<div class="sheet-table-row sheet-knowledge sheet-adventure">
							<span class="sheet-table-cell"><button style="font-size:100%;" title="%{selected|Knowledge-Dungeoneering-Check}" type="roll" value="@{PC-Whisper} @{Knowledge-Dungeoneering-macro}" name="roll_Knowledge-Dungeoneering-Check"></button></span>
							<span class="sheet-table-cell"><input title="@{Knowledge-Dungeoneering-cs}" type="checkbox" name="attr_Knowledge-Dungeoneering-cs" value="3" /></span>
							<span class="sheet-table-cell sheet-left" data-i18n="knowledge-dungeoneering">Knowledge (Dungeoneering)</span>
							<span class="sheet-table-cell"><input title="@{Knowledge-Dungeoneering}" type="number" name="attr_Knowledge-Dungeoneering" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Knowledge-Dungeoneering-ranks}" type="number" name="attr_Knowledge-Dungeoneering-ranks" value="0" /></span>
							<span class="sheet-table-cell">
								<select title="@{Knowledge-Dungeoneering-ability}" name="attr_Knowledge-Dungeoneering-ability" class="sheet-select-small">
									<option value="@{STR-mod}" data-i18n="strength-abbrv">STR</option>
									<option value="@{DEX-mod}" data-i18n="dexterity-abbrv">DEX</option>
									<option value="@{CON-mod}" data-i18n="constitution-abbrv">CON</option>
									<option value="@{INT-mod}" data-i18n="intelligence-abbrv-default" selected>&#8226;INT</option>
									<option value="@{WIS-mod}" data-i18n="wisdom-abbrv">WIS</option>
									<option value="@{CHA-mod}" data-i18n="charisma-abbrv">CHA</option>
								</select>
							</span>
							<span class="sheet-table-cell"><input title="@{Knowledge-Dungeoneering-ability-mod}" type="number" name="attr_Knowledge-Dungeoneering-ability-mod" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Knowledge-Dungeoneering-racial}" type="number" name="attr_Knowledge-Dungeoneering-racial" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Knowledge-Dungeoneering-trait}" type="number" name="attr_Knowledge-Dungeoneering-trait" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Knowledge-Dungeoneering-feat}" type="number" name="attr_Knowledge-Dungeoneering-feat" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Knowledge-Dungeoneering-item}" type="number" name="attr_Knowledge-Dungeoneering-item" value="0" /></span>
							<input class="sheet-error-mshow" type="checkbox" value="1" role="status" aria-live="polite" name="attr_Knowledge-Dungeoneering-misc-mod_error" />
							<span class="sheet-table-cell sheet-highlight"><input title="@{Knowledge-Dungeoneering-misc}" type="text" name="attr_Knowledge-Dungeoneering-misc" value="" placeholder="#/Equation" data-i18n-placeholder="equation-macro-place" /></span>
							<span class="sheet-table-cell sheet-highlight"><input title="@{Knowledge-Dungeoneering-misc-mod}" type="number" class="sheet-calc" readonly name="attr_Knowledge-Dungeoneering-misc-mod" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Knowledge-Dungeoneering-class}" type="text" name="attr_Knowledge-Dungeoneering-class" value="0/0/0/0" class="sheet-calc sheet-skill-conds" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Knowledge-Dungeoneering-ReqTrain}" type="checkbox" name="attr_Knowledge-Dungeoneering-ReqTrain" value="1" checked /></span>
							<span class="sheet-table-cell"><textarea class="sheet-skill-macro-text" title="@{Knowledge-Dungeoneering-note}" name="attr_Knowledge-Dungeoneering-note"></textarea></span>
							<span class="sheet-table-cell"><textarea class="sheet-skill-macro-text" title="@{Knowledge-Dungeoneering-macro}" name="attr_Knowledge-Dungeoneering-macro">&{template:pf_generic} @{toggle_accessible_flag} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_generic-skill}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle}} {{name=^{knowledge-dungeoneering}}} {{Check=[[ @{skill-query} + [[ @{Knowledge-Dungeoneering} ]] ]]}} @{Knowledge-Dungeoneering-ut} @{skill_options} @{Knowledge-Dungeoneering-cond-notes} {{generic_note=@{Knowledge-Dungeoneering-note}}}</textarea></span>
						</div>
						<div class="sheet-table-row sheet-knowledge sheet-bg">
							<span class="sheet-table-cell"><button style="font-size:100%;" title="%{selected|Knowledge-Engineering-Check}" type="roll" value="@{PC-Whisper} @{Knowledge-Engineering-macro}" name="roll_Knowledge-Engineering-Check"></button></span>
							<span class="sheet-table-cell"><input title="@{Knowledge-Engineering-cs}" type="checkbox" name="attr_Knowledge-Engineering-cs" value="3" /></span>
							<span class="sheet-table-cell sheet-left" data-i18n="knowledge-engineering">Knowledge (Engineering)</span>
							<span class="sheet-table-cell"><input title="@{Knowledge-Engineering}" type="number" name="attr_Knowledge-Engineering" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Knowledge-Engineering-ranks}" type="number" name="attr_Knowledge-Engineering-ranks" value="0" /></span>
							<span class="sheet-table-cell">
								<select title="@{Knowledge-Engineering-ability}" name="attr_Knowledge-Engineering-ability" class="sheet-select-small">
									<option value="@{STR-mod}" data-i18n="strength-abbrv">STR</option>
									<option value="@{DEX-mod}" data-i18n="dexterity-abbrv">DEX</option>
									<option value="@{CON-mod}" data-i18n="constitution-abbrv">CON</option>
									<option value="@{INT-mod}" data-i18n="intelligence-abbrv-default" selected>&#8226;INT</option>
									<option value="@{WIS-mod}" data-i18n="wisdom-abbrv">WIS</option>
									<option value="@{CHA-mod}" data-i18n="charisma-abbrv">CHA</option>
								</select>
							</span>
							<span class="sheet-table-cell"><input title="@{Knowledge-Engineering-ability-mod}" type="number" name="attr_Knowledge-Engineering-ability-mod" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Knowledge-Engineering-racial}" type="number" name="attr_Knowledge-Engineering-racial" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Knowledge-Engineering-trait}" type="number" name="attr_Knowledge-Engineering-trait" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Knowledge-Engineering-feat}" type="number" name="attr_Knowledge-Engineering-feat" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Knowledge-Engineering-item}" type="number" name="attr_Knowledge-Engineering-item" value="0" /></span>
							<input class="sheet-error-mshow" type="checkbox" value="1" role="status" aria-live="polite" name="attr_Knowledge-Engineering-misc-mod_error" />
							<span class="sheet-table-cell sheet-highlight"><input title="@{Knowledge-Engineering-misc}" type="text" name="attr_Knowledge-Engineering-misc" value="" placeholder="#/Equation" data-i18n-placeholder="equation-macro-place" /></span>
							<span class="sheet-table-cell sheet-highlight"><input title="@{Knowledge-Engineering-misc-mod}" type="number" class="sheet-calc" readonly name="attr_Knowledge-Engineering-misc-mod" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Knowledge-Engineering-class}" type="text" name="attr_Knowledge-Engineering-class" value="0/0/0/0" class="sheet-calc sheet-skill-conds" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Knowledge-Engineering-ReqTrain}" type="checkbox" name="attr_Knowledge-Engineering-ReqTrain" value="1" checked /></span>
							<span class="sheet-table-cell"><textarea class="sheet-skill-macro-text" title="@{Knowledge-Engineering-note}" name="attr_Knowledge-Engineering-note"></textarea></span>
							<span class="sheet-table-cell"><textarea class="sheet-skill-macro-text" title="@{Knowledge-Engineering-macro}" name="attr_Knowledge-Engineering-macro">&{template:pf_generic} @{toggle_accessible_flag} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_generic-skill}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle}} {{name=^{knowledge-engineering}}} {{Check=[[ @{skill-query} + [[ @{Knowledge-Engineering} ]] ]]}} @{Knowledge-Engineering-ut} @{skill_options} @{Knowledge-Engineering-cond-notes} {{generic_note=@{Knowledge-Engineering-note}}}</textarea></span>
						</div>
						<div class="sheet-table-row sheet-knowledge sheet-bg">
							<span class="sheet-table-cell"><button style="font-size:100%;" title="%{selected|Knowledge-Geography-Check}" type="roll" value="@{PC-Whisper} @{Knowledge-Geography-macro}" name="roll_Knowledge-Geography-Check"></button></span>
							<span class="sheet-table-cell"><input title="@{Knowledge-Geography-cs}" type="checkbox" name="attr_Knowledge-Geography-cs" value="3" /></span>
							<span class="sheet-table-cell sheet-left" data-i18n="knowledge-geography">Knowledge (Geography)</span>
							<span class="sheet-table-cell"><input title="@{Knowledge-Geography}" type="number" name="attr_Knowledge-Geography" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Knowledge-Geography-ranks}" type="number" name="attr_Knowledge-Geography-ranks" value="0" /></span>
							<span class="sheet-table-cell">
								<select title="@{Knowledge-Geography-ability}" name="attr_Knowledge-Geography-ability" class="sheet-select-small">
									<option value="@{STR-mod}" data-i18n="strength-abbrv">STR</option>
									<option value="@{DEX-mod}" data-i18n="dexterity-abbrv">DEX</option>
									<option value="@{CON-mod}" data-i18n="constitution-abbrv">CON</option>
									<option value="@{INT-mod}" data-i18n="intelligence-abbrv-default" selected>&#8226;INT</option>
									<option value="@{WIS-mod}" data-i18n="wisdom-abbrv">WIS</option>
									<option value="@{CHA-mod}" data-i18n="charisma-abbrv">CHA</option>
								</select>
							</span>
							<span class="sheet-table-cell"><input title="@{Knowledge-Geography-ability-mod}" type="number" name="attr_Knowledge-Geography-ability-mod" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Knowledge-Geography-racial}" type="number" name="attr_Knowledge-Geography-racial" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Knowledge-Geography-trait}" type="number" name="attr_Knowledge-Geography-trait" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Knowledge-Geography-feat}" type="number" name="attr_Knowledge-Geography-feat" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Knowledge-Geography-item}" type="number" name="attr_Knowledge-Geography-item" value="0" /></span>
							<input class="sheet-error-mshow" type="checkbox" value="1" role="status" aria-live="polite" name="attr_Knowledge-Geography-misc-mod_error" />
							<span class="sheet-table-cell sheet-highlight"><input title="@{Knowledge-Geography-misc}" type="text" name="attr_Knowledge-Geography-misc" value="" placeholder="#/Equation" data-i18n-placeholder="equation-macro-place" /></span>
							<span class="sheet-table-cell sheet-highlight"><input title="@{Knowledge-Geography-misc-mod}" type="number" class="sheet-calc" readonly name="attr_Knowledge-Geography-misc-mod" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Knowledge-Geography-class}" type="text" name="attr_Knowledge-Geography-class" value="0/0/0/0" class="sheet-calc sheet-skill-conds" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Knowledge-Geography-ReqTrain}" type="checkbox" name="attr_Knowledge-Geography-ReqTrain" value="1" checked /></span>
							<span class="sheet-table-cell"><textarea class="sheet-skill-macro-text" title="@{Knowledge-Geography-note}" name="attr_Knowledge-Geography-note"></textarea></span>
							<span class="sheet-table-cell"><textarea class="sheet-skill-macro-text" title="@{Knowledge-Geography-macro}" name="attr_Knowledge-Geography-macro">&{template:pf_generic} @{toggle_accessible_flag} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_generic-skill}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle}} {{name=^{knowledge-geography}}} {{Check=[[ @{skill-query} + [[ @{Knowledge-Geography} ]] ]]}} @{Knowledge-Geography-ut} @{skill_options} @{Knowledge-Geography-cond-notes} {{generic_note=@{Knowledge-Geography-note}}}</textarea></span>
						</div>
						<div class="sheet-table-row sheet-knowledge sheet-bg">
							<span class="sheet-table-cell"><button style="font-size:100%;" title="%{selected|Knowledge-History-Check}" type="roll" value="@{PC-Whisper} @{Knowledge-History-macro}" name="roll_Knowledge-History-Check"></button></span>
							<span class="sheet-table-cell"><input title="@{Knowledge-History-cs}" type="checkbox" name="attr_Knowledge-History-cs" value="3" /></span>
							<span class="sheet-table-cell sheet-left" data-i18n="knowledge-history">Knowledge (History)</span>
							<span class="sheet-table-cell"><input title="@{Knowledge-History}" type="number" name="attr_Knowledge-History" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Knowledge-History-ranks}" type="number" name="attr_Knowledge-History-ranks" value="0" /></span>
							<span class="sheet-table-cell">
								<select title="@{Knowledge-History-ability}" name="attr_Knowledge-History-ability" class="sheet-select-small">
									<option value="@{STR-mod}" data-i18n="strength-abbrv">STR</option>
									<option value="@{DEX-mod}" data-i18n="dexterity-abbrv">DEX</option>
									<option value="@{CON-mod}" data-i18n="constitution-abbrv">CON</option>
									<option value="@{INT-mod}" data-i18n="intelligence-abbrv-default" selected>&#8226;INT</option>
									<option value="@{WIS-mod}" data-i18n="wisdom-abbrv">WIS</option>
									<option value="@{CHA-mod}" data-i18n="charisma-abbrv">CHA</option>
								</select>
							</span>
							<span class="sheet-table-cell"><input title="@{Knowledge-History-ability-mod}" type="number" name="attr_Knowledge-History-ability-mod" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Knowledge-History-racial}" type="number" name="attr_Knowledge-History-racial" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Knowledge-History-trait}" type="number" name="attr_Knowledge-History-trait" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Knowledge-History-feat}" type="number" name="attr_Knowledge-History-feat" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Knowledge-History-item}" type="number" name="attr_Knowledge-History-item" value="0" /></span>
							<input class="sheet-error-mshow" type="checkbox" value="1" role="status" aria-live="polite" name="attr_Knowledge-History-misc-mod_error" />
							<span class="sheet-table-cell sheet-highlight"><input title="@{Knowledge-History-misc}" type="text" name="attr_Knowledge-History-misc" value="" placeholder="#/Equation" data-i18n-placeholder="equation-macro-place" /></span>
							<span class="sheet-table-cell sheet-highlight"><input title="@{Knowledge-History-misc-mod}" type="number" class="sheet-calc" readonly name="attr_Knowledge-History-misc-mod" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Knowledge-History-class}" type="text" name="attr_Knowledge-History-class" value="0/0/0/0" class="sheet-calc sheet-skill-conds" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Knowledge-History-ReqTrain}" type="checkbox" name="attr_Knowledge-History-ReqTrain" value="1" checked /></span>
							<span class="sheet-table-cell"><textarea class="sheet-skill-macro-text" title="@{Knowledge-History-note}" name="attr_Knowledge-History-note"></textarea></span>
							<span class="sheet-table-cell"><textarea class="sheet-skill-macro-text" title="@{Knowledge-History-macro}" name="attr_Knowledge-History-macro">&{template:pf_generic} @{toggle_accessible_flag} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_generic-skill}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle}} {{name=^{knowledge-history}}} {{Check=[[ @{skill-query} + [[ @{Knowledge-History} ]] ]]}} @{Knowledge-History-ut} @{skill_options} @{Knowledge-History-cond-notes} {{generic_note=@{Knowledge-History-note}}}</textarea></span>
						</div>
						<div class="sheet-table-row sheet-knowledge sheet-adventure">
							<span class="sheet-table-cell"><button style="font-size:100%;" title="%{selected|Knowledge-Local-Check}" type="roll" value="@{PC-Whisper} @{Knowledge-Local-macro}" name="roll_Knowledge-Local-Check"></button></span>
							<span class="sheet-table-cell"><input title="@{Knowledge-Local-cs}" type="checkbox" name="attr_Knowledge-Local-cs" value="3" /></span>
							<span class="sheet-table-cell sheet-left" data-i18n="knowledge-local">Knowledge (Local)</span>
							<span class="sheet-table-cell"><input title="@{Knowledge-Local}" type="number" name="attr_Knowledge-Local" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Knowledge-Local-ranks}" type="number" name="attr_Knowledge-Local-ranks" value="0" /></span>
							<span class="sheet-table-cell">
								<select title="@{Knowledge-Local-ability}" name="attr_Knowledge-Local-ability" class="sheet-select-small">
									<option value="@{STR-mod}" data-i18n="strength-abbrv">STR</option>
									<option value="@{DEX-mod}" data-i18n="dexterity-abbrv">DEX</option>
									<option value="@{CON-mod}" data-i18n="constitution-abbrv">CON</option>
									<option value="@{INT-mod}" data-i18n="intelligence-abbrv-default" selected>&#8226;INT</option>
									<option value="@{WIS-mod}" data-i18n="wisdom-abbrv">WIS</option>
									<option value="@{CHA-mod}" data-i18n="charisma-abbrv">CHA</option>
								</select>
							</span>
							<span class="sheet-table-cell"><input title="@{Knowledge-Local-ability-mod}" type="number" name="attr_Knowledge-Local-ability-mod" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Knowledge-Local-racial}" type="number" name="attr_Knowledge-Local-racial" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Knowledge-Local-trait}" type="number" name="attr_Knowledge-Local-trait" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Knowledge-Local-feat}" type="number" name="attr_Knowledge-Local-feat" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Knowledge-Local-item}" type="number" name="attr_Knowledge-Local-item" value="0" /></span>
							<input class="sheet-error-mshow" type="checkbox" value="1" role="status" aria-live="polite" name="attr_Knowledge-Local-misc-mod_error" />
							<span class="sheet-table-cell sheet-highlight"><input title="@{Knowledge-Local-misc}" type="text" name="attr_Knowledge-Local-misc" value="" placeholder="#/Equation" data-i18n-placeholder="equation-macro-place" /></span>
							<span class="sheet-table-cell sheet-highlight"><input title="@{Knowledge-Local-misc-mod}" type="number" class="sheet-calc" readonly name="attr_Knowledge-Local-misc-mod" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Knowledge-Local-class}" type="text" name="attr_Knowledge-Local-class" value="0/0/0/0" class="sheet-calc sheet-skill-conds" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Knowledge-Local-ReqTrain}" type="checkbox" name="attr_Knowledge-Local-ReqTrain" value="1" checked /></span>
							<span class="sheet-table-cell"><textarea class="sheet-skill-macro-text" title="@{Knowledge-Local-note}" name="attr_Knowledge-Local-note"></textarea></span>
							<span class="sheet-table-cell"><textarea class="sheet-skill-macro-text" title="@{Knowledge-Local-macro}" name="attr_Knowledge-Local-macro">&{template:pf_generic} @{toggle_accessible_flag} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_generic-skill}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle}} {{name=^{knowledge-local}}} {{Check=[[ @{skill-query} + [[ @{Knowledge-Local} ]] ]]}} @{Knowledge-Local-ut} @{skill_options} @{Knowledge-Local-cond-notes} {{generic_note=@{Knowledge-Local-note}}}</textarea></span>
						</div>
						<div class="sheet-table-row sheet-knowledge sheet-adventure">
							<span class="sheet-table-cell"><button style="font-size:100%;" title="%{selected|Knowledge-Nature-Check}" type="roll" value="@{PC-Whisper} @{Knowledge-Nature-macro}" name="roll_Knowledge-Nature-Check"></button></span>
							<span class="sheet-table-cell"><input title="@{Knowledge-Nature-cs}" type="checkbox" name="attr_Knowledge-Nature-cs" value="3" /></span>
							<span class="sheet-table-cell sheet-left" data-i18n="knowledge-nature">Knowledge (Nature)</span>
							<span class="sheet-table-cell"><input title="@{Knowledge-Nature}" type="number" name="attr_Knowledge-Nature" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Knowledge-Nature-ranks}" type="number" name="attr_Knowledge-Nature-ranks" value="0" /></span>
							<span class="sheet-table-cell">
								<select title="@{Knowledge-Nature-ability}" name="attr_Knowledge-Nature-ability" class="sheet-select-small">
									<option value="@{STR-mod}" data-i18n="strength-abbrv">STR</option>
									<option value="@{DEX-mod}" data-i18n="dexterity-abbrv">DEX</option>
									<option value="@{CON-mod}" data-i18n="constitution-abbrv">CON</option>
									<option value="@{INT-mod}" data-i18n="intelligence-abbrv-default" selected>&#8226;INT</option>
									<option value="@{WIS-mod}" data-i18n="wisdom-abbrv">WIS</option>
									<option value="@{CHA-mod}" data-i18n="charisma-abbrv">CHA</option>
								</select>
							</span>
							<span class="sheet-table-cell"><input title="@{Knowledge-Nature-ability-mod}" type="number" name="attr_Knowledge-Nature-ability-mod" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Knowledge-Nature-racial}" type="number" name="attr_Knowledge-Nature-racial" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Knowledge-Nature-trait}" type="number" name="attr_Knowledge-Nature-trait" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Knowledge-Nature-feat}" type="number" name="attr_Knowledge-Nature-feat" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Knowledge-Nature-item}" type="number" name="attr_Knowledge-Nature-item" value="0" /></span>
							<input class="sheet-error-mshow" type="checkbox" value="1" role="status" aria-live="polite" name="attr_Knowledge-Nature-misc-mod_error" />
							<span class="sheet-table-cell sheet-highlight"><input title="@{Knowledge-Nature-misc}" type="text" name="attr_Knowledge-Nature-misc" value="" placeholder="#/Equation" data-i18n-placeholder="equation-macro-place" /></span>
							<span class="sheet-table-cell sheet-highlight"><input title="@{Knowledge-Nature-misc-mod}" type="number" class="sheet-calc" readonly name="attr_Knowledge-Nature-misc-mod" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Knowledge-Nature-class}" type="text" name="attr_Knowledge-Nature-class" value="0/0/0/0" class="sheet-calc sheet-skill-conds" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Knowledge-Nature-ReqTrain}" type="checkbox" name="attr_Knowledge-Nature-ReqTrain" value="1" checked /></span>
							<span class="sheet-table-cell"><textarea class="sheet-skill-macro-text" title="@{Knowledge-Nature-note}" name="attr_Knowledge-Nature-note"></textarea></span>
							<span class="sheet-table-cell"><textarea class="sheet-skill-macro-text" title="@{Knowledge-Nature-macro}" name="attr_Knowledge-Nature-macro">&{template:pf_generic} @{toggle_accessible_flag} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_generic-skill}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle}} {{name=^{knowledge-nature}}} {{Check=[[ @{skill-query} + [[ @{Knowledge-Nature} ]] ]]}} @{Knowledge-Nature-ut} @{skill_options} @{Knowledge-Nature-cond-notes} {{generic_note=@{Knowledge-Nature-note}}}</textarea></span>
						</div>
						<div class="sheet-table-row sheet-knowledge sheet-bg">
							<span class="sheet-table-cell"><button style="font-size:100%;" title="%{selected|Knowledge-Nobility-Check}" type="roll" value="@{PC-Whisper} @{Knowledge-Nobility-macro}" name="roll_Knowledge-Nobility-Check"></button></span>
							<span class="sheet-table-cell"><input title="@{Knowledge-Nobility-cs}" type="checkbox" name="attr_Knowledge-Nobility-cs" value="3" /></span>
							<span class="sheet-table-cell sheet-left" data-i18n="knowledge-nobility">Knowledge (Nobility)</span>
							<span class="sheet-table-cell"><input title="@{Knowledge-Nobility}" type="number" name="attr_Knowledge-Nobility" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Knowledge-Nobility-ranks}" type="number" name="attr_Knowledge-Nobility-ranks" value="0" /></span>
							<span class="sheet-table-cell">
								<select title="@{Knowledge-Nobility-ability}" name="attr_Knowledge-Nobility-ability" class="sheet-select-small">
									<option value="@{STR-mod}" data-i18n="strength-abbrv">STR</option>
									<option value="@{DEX-mod}" data-i18n="dexterity-abbrv">DEX</option>
									<option value="@{CON-mod}" data-i18n="constitution-abbrv">CON</option>
									<option value="@{INT-mod}" data-i18n="intelligence-abbrv-default" selected>&#8226;INT</option>
									<option value="@{WIS-mod}" data-i18n="wisdom-abbrv">WIS</option>
									<option value="@{CHA-mod}" data-i18n="charisma-abbrv">CHA</option>
								</select>
							</span>
							<span class="sheet-table-cell"><input title="@{Knowledge-Nobility-ability-mod}" type="number" name="attr_Knowledge-Nobility-ability-mod" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Knowledge-Nobility-racial}" type="number" name="attr_Knowledge-Nobility-racial" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Knowledge-Nobility-trait}" type="number" name="attr_Knowledge-Nobility-trait" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Knowledge-Nobility-feat}" type="number" name="attr_Knowledge-Nobility-feat" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Knowledge-Nobility-item}" type="number" name="attr_Knowledge-Nobility-item" value="0" /></span>
							<input class="sheet-error-mshow" type="checkbox" value="1" role="status" aria-live="polite" name="attr_Knowledge-Nobility-misc-mod_error" />
							<span class="sheet-table-cell sheet-highlight"><input title="@{Knowledge-Nobility-misc}" type="text" name="attr_Knowledge-Nobility-misc" value="" placeholder="#/Equation" data-i18n-placeholder="equation-macro-place" /></span>
							<span class="sheet-table-cell sheet-highlight"><input title="@{Knowledge-Nobility-misc-mod}" type="number" class="sheet-calc" readonly name="attr_Knowledge-Nobility-misc-mod" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Knowledge-Nobility-class}" type="text" name="attr_Knowledge-Nobility-class" value="0/0/0/0" class="sheet-calc sheet-skill-conds" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Knowledge-Nobility-ReqTrain}" type="checkbox" name="attr_Knowledge-Nobility-ReqTrain" value="1" checked /></span>
							<span class="sheet-table-cell"><textarea class="sheet-skill-macro-text" title="@{Knowledge-Nobility-note}" name="attr_Knowledge-Nobility-note"></textarea></span>
							<span class="sheet-table-cell"><textarea class="sheet-skill-macro-text" title="@{Knowledge-Nobility-macro}" name="attr_Knowledge-Nobility-macro">&{template:pf_generic} @{toggle_accessible_flag} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_generic-skill}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle}} {{name=^{knowledge-nobility}}} {{Check=[[ @{skill-query} + [[ @{Knowledge-Nobility} ]] ]]}} @{Knowledge-Nobility-ut} @{skill_options} @{Knowledge-Nobility-cond-notes} {{generic_note=@{Knowledge-Nobility-note}}}</textarea></span>
						</div>
						<div class="sheet-table-row sheet-knowledge sheet-adventure">
							<span class="sheet-table-cell"><button style="font-size:100%;" title="%{selected|Knowledge-Planes-Check}" type="roll" value="@{PC-Whisper} @{Knowledge-Planes-macro}" name="roll_Knowledge-Planes-Check"></button></span>
							<span class="sheet-table-cell"><input title="@{Knowledge-Planes-cs}" type="checkbox" name="attr_Knowledge-Planes-cs" value="3" /></span>
							<span class="sheet-table-cell sheet-left" data-i18n="knowledge-planes">Knowledge (Planes)</span>
							<span class="sheet-table-cell"><input title="@{Knowledge-Planes}" type="number" name="attr_Knowledge-Planes" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Knowledge-Planes-ranks}" type="number" name="attr_Knowledge-Planes-ranks" value="0" /></span>
							<span class="sheet-table-cell">
								<select title="@{Knowledge-Planes-ability}" name="attr_Knowledge-Planes-ability" class="sheet-select-small">
									<option value="@{STR-mod}" data-i18n="strength-abbrv">STR</option>
									<option value="@{DEX-mod}" data-i18n="dexterity-abbrv">DEX</option>
									<option value="@{CON-mod}" data-i18n="constitution-abbrv">CON</option>
									<option value="@{INT-mod}" data-i18n="intelligence-abbrv-default" selected>&#8226;INT</option>
									<option value="@{WIS-mod}" data-i18n="wisdom-abbrv">WIS</option>
									<option value="@{CHA-mod}" data-i18n="charisma-abbrv">CHA</option>
								</select>
							</span>
							<span class="sheet-table-cell"><input title="@{Knowledge-Planes-ability-mod}" type="number" name="attr_Knowledge-Planes-ability-mod" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Knowledge-Planes-racial}" type="number" name="attr_Knowledge-Planes-racial" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Knowledge-Planes-trait}" type="number" name="attr_Knowledge-Planes-trait" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Knowledge-Planes-feat}" type="number" name="attr_Knowledge-Planes-feat" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Knowledge-Planes-item}" type="number" name="attr_Knowledge-Planes-item" value="0" /></span>
							<input class="sheet-error-mshow" type="checkbox" value="1" role="status" aria-live="polite" name="attr_Knowledge-Planes-misc-mod_error" />
							<span class="sheet-table-cell sheet-highlight"><input title="@{Knowledge-Planes-misc}" type="text" name="attr_Knowledge-Planes-misc" value="" placeholder="#/Equation" data-i18n-placeholder="equation-macro-place" /></span>
							<span class="sheet-table-cell sheet-highlight"><input title="@{Knowledge-Planes-misc-mod}" type="number" class="sheet-calc" readonly name="attr_Knowledge-Planes-misc-mod" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Knowledge-Planes-class}" type="text" name="attr_Knowledge-Planes-class" value="0/0/0/0" class="sheet-calc sheet-skill-conds" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Knowledge-Planes-ReqTrain}" type="checkbox" name="attr_Knowledge-Planes-ReqTrain" value="1" checked /></span>
							<span class="sheet-table-cell"><textarea class="sheet-skill-macro-text" title="@{Knowledge-Planes-note}" name="attr_Knowledge-Planes-note"></textarea></span>
							<span class="sheet-table-cell"><textarea class="sheet-skill-macro-text" title="@{Knowledge-Planes-macro}" name="attr_Knowledge-Planes-macro">&{template:pf_generic} @{toggle_accessible_flag} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_generic-skill}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle}} {{name=^{knowledge-planes}}} {{Check=[[ @{skill-query} + [[ @{Knowledge-Planes} ]] ]]}} @{Knowledge-Planes-ut} @{skill_options} @{Knowledge-Planes-cond-notes} {{generic_note=@{Knowledge-Planes-note}}}</textarea></span>
						</div>
						<div class="sheet-table-row sheet-knowledge sheet-adventure">
							<span class="sheet-table-cell"><button style="font-size:100%;" title="%{selected|Knowledge-Religion-Check}" type="roll" value="@{PC-Whisper} @{Knowledge-Religion-macro}" name="roll_Knowledge-Religion-Check"></button></span>
							<span class="sheet-table-cell"><input title="@{Knowledge-Religion-cs}" type="checkbox" name="attr_Knowledge-Religion-cs" value="3" /></span>
							<span class="sheet-table-cell sheet-left" data-i18n="knowledge-religion">Knowledge (Religion)</span>
							<span class="sheet-table-cell"><input title="@{Knowledge-Religion}" type="number" name="attr_Knowledge-Religion" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Knowledge-Religion-ranks}" type="number" name="attr_Knowledge-Religion-ranks" value="0" /></span>
							<span class="sheet-table-cell">
								<select title="@{Knowledge-Religion-ability}" name="attr_Knowledge-Religion-ability" class="sheet-select-small">
									<option value="@{STR-mod}" data-i18n="strength-abbrv">STR</option>
									<option value="@{DEX-mod}" data-i18n="dexterity-abbrv">DEX</option>
									<option value="@{CON-mod}" data-i18n="constitution-abbrv">CON</option>
									<option value="@{INT-mod}" data-i18n="intelligence-abbrv-default" selected>&#8226;INT</option>
									<option value="@{WIS-mod}" data-i18n="wisdom-abbrv">WIS</option>
									<option value="@{CHA-mod}" data-i18n="charisma-abbrv">CHA</option>
								</select>
							</span>
							<span class="sheet-table-cell"><input title="@{Knowledge-Religion-ability-mod}" type="number" name="attr_Knowledge-Religion-ability-mod" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Knowledge-Religion-racial}" type="number" name="attr_Knowledge-Religion-racial" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Knowledge-Religion-trait}" type="number" name="attr_Knowledge-Religion-trait" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Knowledge-Religion-feat}" type="number" name="attr_Knowledge-Religion-feat" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Knowledge-Religion-item}" type="number" name="attr_Knowledge-Religion-item" value="0" /></span>
							<input class="sheet-error-mshow" type="checkbox" value="1" role="status" aria-live="polite" name="attr_Knowledge-Religion-misc-mod_error" />
							<span class="sheet-table-cell sheet-highlight"><input title="@{Knowledge-Religion-misc}" type="text" name="attr_Knowledge-Religion-misc" value="" placeholder="#/Equation" data-i18n-placeholder="equation-macro-place" /></span>
							<span class="sheet-table-cell sheet-highlight"><input title="@{Knowledge-Religion-misc-mod}" type="number" class="sheet-calc" readonly name="attr_Knowledge-Religion-misc-mod" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Knowledge-Religion-class}" type="text" name="attr_Knowledge-Religion-class" value="0/0/0/0" class="sheet-calc sheet-skill-conds" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Knowledge-Religion-ReqTrain}" type="checkbox" name="attr_Knowledge-Religion-ReqTrain" value="1" checked /></span>
							<span class="sheet-table-cell"><textarea class="sheet-skill-macro-text" title="@{Knowledge-Religion-note}" name="attr_Knowledge-Religion-note"></textarea></span>
							<span class="sheet-table-cell"><textarea class="sheet-skill-macro-text" title="@{Knowledge-Religion-macro}" name="attr_Knowledge-Religion-macro">&{template:pf_generic} @{toggle_accessible_flag} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_generic-skill}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle}} {{name=^{knowledge-religion}}} {{Check=[[ @{skill-query} + [[ @{Knowledge-Religion} ]] ]]}} @{Knowledge-Religion-ut} @{skill_options} @{Knowledge-Religion-cond-notes} {{generic_note=@{Knowledge-Religion-note}}}</textarea></span>
						</div>
						<div class="sheet-table-row sheet-bg">
							<span class="sheet-table-cell"><button style="font-size:100%;" title="%{selected|Linguistics-Check}" type="roll" value="@{PC-Whisper} @{Linguistics-macro}" name="roll_Linguistics-Check"></button></span>
							<span class="sheet-table-cell"><input title="@{Linguistics-cs}" type="checkbox" name="attr_Linguistics-cs" value="3" /></span>
							<span class="sheet-table-cell sheet-left" data-i18n="linguistics">Linguistics</span>
							<span class="sheet-table-cell"><input title="@{Linguistics}" type="number" name="attr_Linguistics" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Linguistics-ranks}" type="number" name="attr_Linguistics-ranks" value="0" /></span>
							<span class="sheet-table-cell">
								<select title="@{Linguistics-ability}" name="attr_Linguistics-ability" class="sheet-select-small">
									<option value="@{STR-mod}" data-i18n="strength-abbrv">STR</option>
									<option value="@{DEX-mod}" data-i18n="dexterity-abbrv">DEX</option>
									<option value="@{CON-mod}" data-i18n="constitution-abbrv">CON</option>
									<option value="@{INT-mod}" data-i18n="intelligence-abbrv-default" selected>&#8226;INT</option>
									<option value="@{WIS-mod}" data-i18n="wisdom-abbrv">WIS</option>
									<option value="@{CHA-mod}" data-i18n="charisma-abbrv">CHA</option>
								</select>
							</span>
							<span class="sheet-table-cell"><input title="@{Linguistics-ability-mod}" type="number" name="attr_Linguistics-ability-mod" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Linguistics-racial}" type="number" name="attr_Linguistics-racial" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Linguistics-trait}" type="number" name="attr_Linguistics-trait" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Linguistics-feat}" type="number" name="attr_Linguistics-feat" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Linguistics-item}" type="number" name="attr_Linguistics-item" value="0" /></span>
							<input class="sheet-error-mshow" type="checkbox" value="1" role="status" aria-live="polite" name="attr_Linguistics-misc-mod_error" />
							<span class="sheet-table-cell sheet-highlight"><input title="@{Linguistics-misc}" type="text" name="attr_Linguistics-misc" value="" placeholder="#/Equation" data-i18n-placeholder="equation-macro-place" /></span>
							<span class="sheet-table-cell sheet-highlight"><input title="@{Linguistics-misc-mod}" type="number" class="sheet-calc" readonly name="attr_Linguistics-misc-mod" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Linguistics-class}" type="text" name="attr_Linguistics-class" value="0/0/0/0" class="sheet-calc sheet-skill-conds" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Linguistics-ReqTrain}" type="checkbox" name="attr_Linguistics-ReqTrain" value="1" checked /></span>
							<span class="sheet-table-cell"><textarea class="sheet-skill-macro-text" title="@{Linguistics-note}" name="attr_Linguistics-note"></textarea></span>
							<span class="sheet-table-cell"><textarea class="sheet-skill-macro-text" title="@{Linguistics-macro}" name="attr_Linguistics-macro">&{template:pf_generic} @{toggle_accessible_flag} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_generic-skill}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle}} {{name=^{linguistics}}} {{Check=[[ @{skill-query} + [[ @{Linguistics} ]] ]]}} @{Linguistics-ut} @{skill_options} @{Linguistics-cond-notes} {{generic_note=@{Linguistics-note}}}</textarea></span>
						</div>
						<span class="sheet-custom-skill-2 sheet-table-cell sheet-bg-only">&nbsp;</span>
						<span class="sheet-custom-skill-2 sheet-table-cell sheet-bg-only">&nbsp;</span>
						<input class="sheet-custom-skill-2 sheet-showarrow sheet-lore-show sheet-bg-only" type="checkbox" name="attr_lore-show" data-i18n-aria-label="lore" title="Click to expand" data-i18n-title="showsect-cmd" value="1" checked />
						<label class="sheet-custom-skill-2 sheet-showsect sheet-bg-only sheet-skill-minishow" title="Click to expand" data-i18n-title="showsect-cmd" data-i18n-aria-label="showsect-cmd" data-i18n="lore">Lore</label>
						<span class="sheet-custom-skill-2 sheet-bg-only"></span>
						<div class="sheet-custom-skill-2 sheet-table-row sheet-bg-only"><!--used to keep these sections from collapsing on each other when hidden--></div>
						<div class="sheet-table-row sheet-lore sheet-bg-only">
							<span class="sheet-table-cell"><button style="font-size:100%;" title="%{selected|Lore-Check}" type="roll" value="@{PC-Whisper} @{Lore-macro}" name="roll_Lore-Check"></button></span>
							<span class="sheet-table-cell"><input title="@{Lore-cs}" type="checkbox" name="attr_Lore-cs" value="3" /></span>
							<span class="sheet-table-cell sheet-left"><input title="@{Lore-name} Optional Ruleset." style="width:96%;" type="text" name="attr_Lore-name" placeholder="Lore" data-i18n-placeholder="lore" /></span>
							<span class="sheet-table-cell"><input title="@{Lore}" type="number" name="attr_Lore" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Lore-ranks}" type="number" name="attr_Lore-ranks" value="0" /></span>
							<span class="sheet-table-cell">
								<select title="@{Lore-ability}" name="attr_Lore-ability" class="sheet-select-small">
									<option value="@{STR-mod}" data-i18n="strength-abbrv">STR</option>
									<option value="@{DEX-mod}" data-i18n="dexterity-abbrv">DEX</option>
									<option value="@{CON-mod}" data-i18n="constitution-abbrv">CON</option>
									<option value="@{INT-mod}" data-i18n="intelligence-abbrv-default" selected>&#8226;INT</option>
									<option value="@{WIS-mod}" data-i18n="wisdom-abbrv">WIS</option>
									<option value="@{CHA-mod}" data-i18n="charisma-abbrv">CHA</option>
								</select>
							</span>
							<span class="sheet-table-cell"><input title="@{Lore-ability-mod}" type="number" name="attr_Lore-ability-mod" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Lore-racial}" type="number" name="attr_Lore-racial" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Lore-trait}" type="number" name="attr_Lore-trait" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Lore-feat}" type="number" name="attr_Lore-feat" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Lore-item}" type="number" name="attr_Lore-item" value="0" /></span>
							<input class="sheet-error-mshow" type="checkbox" value="1" role="status" aria-live="polite" name="attr_Lore-misc-mod_error" />
							<span class="sheet-table-cell sheet-highlight"><input title="@{Lore-misc}" type="text" name="attr_Lore-misc" value="" placeholder="#/Equation" data-i18n-placeholder="equation-macro-place" /></span>
							<span class="sheet-table-cell sheet-highlight"><input title="@{Lore-misc-mod}" type="number" class="sheet-calc" readonly name="attr_Lore-misc-mod" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Lore-class}" type="text" name="attr_Lore-class" value="0/0/0/0" class="sheet-calc sheet-skill-conds" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Lore-ReqTrain}" type="checkbox" name="attr_Lore-ReqTrain" value="1" checked /></span>
							<span class="sheet-table-cell"><textarea class="sheet-skill-macro-text" title="@{Lore-note}" name="attr_Lore-note"></textarea></span>
							<span class="sheet-table-cell"><textarea class="sheet-skill-macro-text" title="@{Lore-macro}" name="attr_Lore-macro">&{template:pf_generic} @{toggle_accessible_flag} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_generic-skill}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle}} {{name=^{lore}}} {{Check=[[ @{skill-query} + [[ @{Lore} ]] ]]}} @{Lore-ut} @{skill_options} @{Lore-cond-notes} {{generic_note=@{Lore-note}}}</textarea></span>
						</div>
						<div class="sheet-table-row sheet-lore sheet-bg-only sheet-custom-skill-2">
							<span class="sheet-table-cell"><button style="font-size:100%;" title="%{selected|Lore2-Check}" type="roll" value="@{PC-Whisper} @{Lore2-macro}" name="roll_Lore2-Check"></button></span>
							<span class="sheet-table-cell"><input title="@{Lore2-cs}" type="checkbox" name="attr_Lore2-cs" value="3" /></span>
							<span class="sheet-table-cell sheet-left"><input title="@{Lore2-name} Optional Ruleset." style="width:96%;" type="text" name="attr_Lore2-name" placeholder="Lore" data-i18n-placeholder="lore" /></span>
							<span class="sheet-table-cell"><input title="@{Lore2}" type="number" name="attr_Lore2" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Lore2-ranks}" type="number" name="attr_Lore2-ranks" value="0" /></span>
							<span class="sheet-table-cell">
								<select title="@{Lore2-ability}" name="attr_Lore2-ability" class="sheet-select-small">
									<option value="@{STR-mod}" data-i18n="strength-abbrv">STR</option>
									<option value="@{DEX-mod}" data-i18n="dexterity-abbrv">DEX</option>
									<option value="@{CON-mod}" data-i18n="constitution-abbrv">CON</option>
									<option value="@{INT-mod}" data-i18n="intelligence-abbrv-default" selected>&#8226;INT</option>
									<option value="@{WIS-mod}" data-i18n="wisdom-abbrv">WIS</option>
									<option value="@{CHA-mod}" data-i18n="charisma-abbrv">CHA</option>
								</select>
							</span>
							<span class="sheet-table-cell"><input title="@{Lore2-ability-mod}" type="number" name="attr_Lore2-ability-mod" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Lore2-racial}" type="number" name="attr_Lore2-racial" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Lore2-trait}" type="number" name="attr_Lore2-trait" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Lore2-feat}" type="number" name="attr_Lore2-feat" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Lore2-item}" type="number" name="attr_Lore2-item" value="0" /></span>
							<input class="sheet-error-mshow" type="checkbox" value="1" role="status" aria-live="polite" name="attr_Lore2-misc-mod_error" />
							<span class="sheet-table-cell sheet-highlight"><input title="@{Lore2-misc}" type="text" name="attr_Lore2-misc" value="" placeholder="#/Equation" data-i18n-placeholder="equation-macro-place" /></span>
							<span class="sheet-table-cell sheet-highlight"><input title="@{Lore2-misc-mod}" type="number" class="sheet-calc" readonly name="attr_Lore2-misc-mod" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Lore2-class}" type="text" name="attr_Lore2-class" value="0/0/0/0" class="sheet-calc sheet-skill-conds" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Lore2-ReqTrain}" type="checkbox" name="attr_Lore2-ReqTrain" value="1" checked /></span>
							<span class="sheet-table-cell"><textarea class="sheet-skill-macro-text" title="@{Lore2-note}" name="attr_Lore2-note"></textarea></span>
							<span class="sheet-table-cell"><textarea class="sheet-skill-macro-text" title="@{Lore2-macro}" name="attr_Lore2-macro">&{template:pf_generic} @{toggle_accessible_flag} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_generic-skill}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle}} {{name=^{lore} @{lore2-name}}} {{Check=[[ @{skill-query} + [[ @{Lore2} ]] ]]}} @{Lore2-ut} @{skill_options} @{Lore2-cond-notes} {{generic_note=@{Lore2-note}}}</textarea></span>
						</div>
						<div class="sheet-table-row sheet-lore sheet-bg-only sheet-custom-skill-3">
							<span class="sheet-table-cell"><button style="font-size:100%;" title="%{selected|Lore3-Check}" type="roll" value="@{PC-Whisper} @{Lore3-macro}" name="roll_Lore3-Check"></button></span>
							<span class="sheet-table-cell"><input title="@{Lore3-cs}" type="checkbox" name="attr_Lore3-cs" value="3" /></span>
							<span class="sheet-table-cell sheet-left"><input title="@{Lore3-name} Optional Ruleset." style="width:96%;" type="text" name="attr_Lore3-name" placeholder="Lore" data-i18n-placeholder="lore" /></span>
							<span class="sheet-table-cell"><input title="@{Lore3}" type="number" name="attr_Lore3" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Lore3-ranks}" type="number" name="attr_Lore3-ranks" value="0" /></span>
							<span class="sheet-table-cell">
								<select title="@{Lore3-ability}" name="attr_Lore3-ability" class="sheet-select-small">
									<option value="@{STR-mod}" data-i18n="strength-abbrv">STR</option>
									<option value="@{DEX-mod}" data-i18n="dexterity-abbrv">DEX</option>
									<option value="@{CON-mod}" data-i18n="constitution-abbrv">CON</option>
									<option value="@{INT-mod}" data-i18n="intelligence-abbrv-default" selected>&#8226;INT</option>
									<option value="@{WIS-mod}" data-i18n="wisdom-abbrv">WIS</option>
									<option value="@{CHA-mod}" data-i18n="charisma-abbrv">CHA</option>
								</select>
							</span>
							<span class="sheet-table-cell"><input title="@{Lore3-ability-mod}" type="number" name="attr_Lore3-ability-mod" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Lore3-racial}" type="number" name="attr_Lore3-racial" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Lore3-trait}" type="number" name="attr_Lore3-trait" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Lore3-feat}" type="number" name="attr_Lore3-feat" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Lore3-item}" type="number" name="attr_Lore3-item" value="0" /></span>
							<input class="sheet-error-mshow" type="checkbox" value="1" role="status" aria-live="polite" name="attr_Lore3-misc-mod_error" />
							<span class="sheet-table-cell sheet-highlight"><input title="@{Lore3-misc}" type="text" name="attr_Lore3-misc" value="" placeholder="#/Equation" data-i18n-placeholder="equation-macro-place" /></span>
							<span class="sheet-table-cell sheet-highlight"><input title="@{Lore3-misc-mod}" type="number" class="sheet-calc" readonly name="attr_Lore3-misc-mod" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Lore3-class}" type="text" name="attr_Lore3-class" value="0/0/0/0" class="sheet-calc sheet-skill-conds" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Lore3-ReqTrain}" type="checkbox" name="attr_Lore3-ReqTrain" value="1" checked /></span>
							<span class="sheet-table-cell"><textarea class="sheet-skill-macro-text" title="@{Lore3-note}" name="attr_Lore3-note"></textarea></span>
							<span class="sheet-table-cell"><textarea class="sheet-skill-macro-text" title="@{Lore3-macro}" name="attr_Lore3-macro">&{template:pf_generic} @{toggle_accessible_flag} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_generic-skill}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle}} {{name=^{lore} @{lore3-name}}} {{Check=[[ @{skill-query} + [[ @{Lore3} ]] ]]}} @{Lore3-ut} @{skill_options} @{Lore3-cond-notes} {{generic_note=@{Lore3-note}}}</textarea></span>
						</div>
						<div class="sheet-table-row sheet-lore sheet-bg-only sheet-custom-skill-6">
							<span class="sheet-table-cell"><button style="font-size:100%;" title="%{selected|Lore4-Check}" type="roll" value="@{PC-Whisper} @{Lore4-macro}" name="roll_Lore4-Check"></button></span>
							<span class="sheet-table-cell"><input title="@{Lore4-cs}" type="checkbox" name="attr_Lore4-cs" value="3" /></span>
							<span class="sheet-table-cell sheet-left"><input title="@{Lore4-name} Optional Ruleset." style="width:96%;" type="text" name="attr_Lore4-name" placeholder="Lore" data-i18n-placeholder="lore" /></span>
							<span class="sheet-table-cell"><input title="@{Lore4}" type="number" name="attr_Lore4" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Lore4-ranks}" type="number" name="attr_Lore4-ranks" value="0" /></span>
							<span class="sheet-table-cell">
								<select title="@{Lore4-ability}" name="attr_Lore4-ability" class="sheet-select-small">
									<option value="@{STR-mod}" data-i18n="strength-abbrv">STR</option>
									<option value="@{DEX-mod}" data-i18n="dexterity-abbrv">DEX</option>
									<option value="@{CON-mod}" data-i18n="constitution-abbrv">CON</option>
									<option value="@{INT-mod}" data-i18n="intelligence-abbrv-default" selected>&#8226;INT</option>
									<option value="@{WIS-mod}" data-i18n="wisdom-abbrv">WIS</option>
									<option value="@{CHA-mod}" data-i18n="charisma-abbrv">CHA</option>
								</select>
							</span>
							<span class="sheet-table-cell"><input title="@{Lore4-ability-mod}" type="number" name="attr_Lore4-ability-mod" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Lore4-racial}" type="number" name="attr_Lore4-racial" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Lore4-trait}" type="number" name="attr_Lore4-trait" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Lore4-feat}" type="number" name="attr_Lore4-feat" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Lore4-item}" type="number" name="attr_Lore4-item" value="0" /></span>
							<input class="sheet-error-mshow" type="checkbox" value="1" role="status" aria-live="polite" name="attr_Lore4-misc-mod_error" />
							<span class="sheet-table-cell sheet-highlight"><input title="@{Lore4-misc}" type="text" name="attr_Lore4-misc" value="" placeholder="#/Equation" data-i18n-placeholder="equation-macro-place" /></span>
							<span class="sheet-table-cell sheet-highlight"><input title="@{Lore4-misc-mod}" type="number" class="sheet-calc" readonly name="attr_Lore4-misc-mod" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Lore4-class}" type="text" name="attr_Lore4-class" value="0/0/0/0" class="sheet-calc sheet-skill-conds" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Lore4-ReqTrain}" type="checkbox" name="attr_Lore4-ReqTrain" value="1" checked /></span>
							<span class="sheet-table-cell"><textarea class="sheet-skill-macro-text" title="@{Lore4-note}" name="attr_Lore4-note"></textarea></span>
							<span class="sheet-table-cell"><textarea class="sheet-skill-macro-text" title="@{Lore4-macro}" name="attr_Lore4-macro">&{template:pf_generic} @{toggle_accessible_flag} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_generic-skill}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle}} {{name=^{lore} @{lore4-name}}} {{Check=[[ @{skill-query} + [[ @{Lore4} ]] ]]}} @{Lore4-ut} @{skill_options} @{Lore4-cond-notes} {{generic_note=@{Lore4-note}}}</textarea></span>
						</div>
						<div class="sheet-table-row sheet-lore sheet-bg-only sheet-custom-skill-6">
							<span class="sheet-table-cell"><button style="font-size:100%;" title="%{selected|Lore5-Check}" type="roll" value="@{PC-Whisper} @{Lore5-macro}" name="roll_Lore5-Check"></button></span>
							<span class="sheet-table-cell"><input title="@{Lore5-cs}" type="checkbox" name="attr_Lore5-cs" value="3" /></span>
							<span class="sheet-table-cell sheet-left"><input title="@{Lore5-name} Optional Ruleset." style="width:96%;" type="text" name="attr_Lore5-name" placeholder="Lore" data-i18n-placeholder="lore" /></span>
							<span class="sheet-table-cell"><input title="@{Lore5}" type="number" name="attr_Lore5" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Lore5-ranks}" type="number" name="attr_Lore5-ranks" value="0" /></span>
							<span class="sheet-table-cell">
								<select title="@{Lore5-ability}" name="attr_Lore5-ability" class="sheet-select-small">
									<option value="@{STR-mod}" data-i18n="strength-abbrv">STR</option>
									<option value="@{DEX-mod}" data-i18n="dexterity-abbrv">DEX</option>
									<option value="@{CON-mod}" data-i18n="constitution-abbrv">CON</option>
									<option value="@{INT-mod}" data-i18n="intelligence-abbrv-default" selected>&#8226;INT</option>
									<option value="@{WIS-mod}" data-i18n="wisdom-abbrv">WIS</option>
									<option value="@{CHA-mod}" data-i18n="charisma-abbrv">CHA</option>
								</select>
							</span>
							<span class="sheet-table-cell"><input title="@{Lore5-ability-mod}" type="number" name="attr_Lore5-ability-mod" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Lore5-racial}" type="number" name="attr_Lore5-racial" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Lore5-trait}" type="number" name="attr_Lore5-trait" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Lore5-feat}" type="number" name="attr_Lore5-feat" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Lore5-item}" type="number" name="attr_Lore5-item" value="0" /></span>
							<input class="sheet-error-mshow" type="checkbox" value="1" role="status" aria-live="polite" name="attr_Lore5-misc-mod_error" />
							<span class="sheet-table-cell sheet-highlight"><input title="@{Lore5-misc}" type="text" name="attr_Lore5-misc" value="" placeholder="#/Equation" data-i18n-placeholder="equation-macro-place" /></span>
							<span class="sheet-table-cell sheet-highlight"><input title="@{Lore5-misc-mod}" type="number" class="sheet-calc" readonly name="attr_Lore5-misc-mod" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Lore5-class}" type="text" name="attr_Lore5-class" value="0/0/0/0" class="sheet-calc sheet-skill-conds" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Lore5-ReqTrain}" type="checkbox" name="attr_Lore5-ReqTrain" value="1" checked /></span>
							<span class="sheet-table-cell"><textarea class="sheet-skill-macro-text" title="@{Lore5-note}" name="attr_Lore5-note"></textarea></span>
							<span class="sheet-table-cell"><textarea class="sheet-skill-macro-text" title="@{Lore5-macro}" name="attr_Lore5-macro">&{template:pf_generic} @{toggle_accessible_flag} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_generic-skill}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle}} {{name=^{lore} @{lore5-name}}} {{Check=[[ @{skill-query} + [[ @{Lore5} ]] ]]}} @{Lore5-ut} @{skill_options} @{Lore5-cond-notes} {{generic_note=@{Lore5-note}}}</textarea></span>
						</div>
						<div class="sheet-table-row sheet-lore sheet-bg-only sheet-custom-skill-6">
							<span class="sheet-table-cell"><button style="font-size:100%;" title="%{selected|Lore6-Check}" type="roll" value="@{PC-Whisper} @{Lore6-macro}" name="roll_Lore6-Check"></button></span>
							<span class="sheet-table-cell"><input title="@{Lore6-cs}" type="checkbox" name="attr_Lore6-cs" value="3" /></span>
							<span class="sheet-table-cell sheet-left"><input title="@{Lore6-name} Optional Ruleset." style="width:96%;" type="text" name="attr_Lore6-name" placeholder="Lore" data-i18n-placeholder="lore" /></span>
							<span class="sheet-table-cell"><input title="@{Lore6}" type="number" name="attr_Lore6" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Lore6-ranks}" type="number" name="attr_Lore6-ranks" value="0" /></span>
							<span class="sheet-table-cell">
								<select title="@{Lore6-ability}" name="attr_Lore6-ability" class="sheet-select-small">
									<option value="@{STR-mod}" data-i18n="strength-abbrv">STR</option>
									<option value="@{DEX-mod}" data-i18n="dexterity-abbrv">DEX</option>
									<option value="@{CON-mod}" data-i18n="constitution-abbrv">CON</option>
									<option value="@{INT-mod}" data-i18n="intelligence-abbrv-default" selected>&#8226;INT</option>
									<option value="@{WIS-mod}" data-i18n="wisdom-abbrv">WIS</option>
									<option value="@{CHA-mod}" data-i18n="charisma-abbrv">CHA</option>
								</select>
							</span>
							<span class="sheet-table-cell"><input title="@{Lore6-ability-mod}" type="number" name="attr_Lore6-ability-mod" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Lore6-racial}" type="number" name="attr_Lore6-racial" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Lore6-trait}" type="number" name="attr_Lore6-trait" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Lore6-feat}" type="number" name="attr_Lore6-feat" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Lore6-item}" type="number" name="attr_Lore6-item" value="0" /></span>
							<input class="sheet-error-mshow" type="checkbox" value="1" role="status" aria-live="polite" name="attr_Lore6-misc-mod_error" />
							<span class="sheet-table-cell sheet-highlight"><input title="@{Lore6-misc}" type="text" name="attr_Lore6-misc" value="" placeholder="#/Equation" data-i18n-placeholder="equation-macro-place" /></span>
							<span class="sheet-table-cell sheet-highlight"><input title="@{Lore6-misc-mod}" type="number" class="sheet-calc" readonly name="attr_Lore6-misc-mod" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Lore6-class}" type="text" name="attr_Lore6-class" value="0/0/0/0" class="sheet-calc sheet-skill-conds" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Lore6-ReqTrain}" type="checkbox" name="attr_Lore6-ReqTrain" value="1" checked /></span>
							<span class="sheet-table-cell"><textarea class="sheet-skill-macro-text" title="@{Lore6-note}" name="attr_Lore6-note"></textarea></span>
							<span class="sheet-table-cell"><textarea class="sheet-skill-macro-text" title="@{Lore6-macro}" name="attr_Lore6-macro">&{template:pf_generic} @{toggle_accessible_flag} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_generic-skill}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle}} {{name=^{lore} @{lore6-name}}} {{Check=[[ @{skill-query} + [[ @{Lore6} ]] ]]}} @{Lore6-ut} @{skill_options} @{Lore6-cond-notes} {{generic_note=@{Lore6-note}}}</textarea></span>
						</div>
						<div class="sheet-table-row sheet-lore sheet-bg-only sheet-custom-skill-10">
							<span class="sheet-table-cell"><button style="font-size:100%;" title="%{selected|Lore7-Check}" type="roll" value="@{PC-Whisper} @{Lore7-macro}" name="roll_Lore7-Check"></button></span>
							<span class="sheet-table-cell"><input title="@{Lore7-cs}" type="checkbox" name="attr_Lore7-cs" value="3" /></span>
							<span class="sheet-table-cell sheet-left"><input title="@{Lore7-name} Optional Ruleset." style="width:96%;" type="text" name="attr_Lore7-name" placeholder="Lore" data-i18n-placeholder="lore" /></span>
							<span class="sheet-table-cell"><input title="@{Lore7}" type="number" name="attr_Lore7" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Lore7-ranks}" type="number" name="attr_Lore7-ranks" value="0" /></span>
							<span class="sheet-table-cell">
								<select title="@{Lore7-ability}" name="attr_Lore7-ability" class="sheet-select-small">
									<option value="@{STR-mod}" data-i18n="strength-abbrv">STR</option>
									<option value="@{DEX-mod}" data-i18n="dexterity-abbrv">DEX</option>
									<option value="@{CON-mod}" data-i18n="constitution-abbrv">CON</option>
									<option value="@{INT-mod}" data-i18n="intelligence-abbrv-default" selected>&#8226;INT</option>
									<option value="@{WIS-mod}" data-i18n="wisdom-abbrv">WIS</option>
									<option value="@{CHA-mod}" data-i18n="charisma-abbrv">CHA</option>
								</select>
							</span>
							<span class="sheet-table-cell"><input title="@{Lore7-ability-mod}" type="number" name="attr_Lore7-ability-mod" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Lore7-racial}" type="number" name="attr_Lore7-racial" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Lore7-trait}" type="number" name="attr_Lore7-trait" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Lore7-feat}" type="number" name="attr_Lore7-feat" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Lore7-item}" type="number" name="attr_Lore7-item" value="0" /></span>
							<input class="sheet-error-mshow" type="checkbox" value="1" role="status" aria-live="polite" name="attr_Lore7-misc-mod_error" />
							<span class="sheet-table-cell sheet-highlight"><input title="@{Lore7-misc}" type="text" name="attr_Lore7-misc" value="" placeholder="#/Equation" data-i18n-placeholder="equation-macro-place" /></span>
							<span class="sheet-table-cell sheet-highlight"><input title="@{Lore7-misc-mod}" type="number" class="sheet-calc" readonly name="attr_Lore7-misc-mod" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Lore7-class}" type="text" name="attr_Lore7-class" value="0/0/0/0" class="sheet-calc sheet-skill-conds" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Lore7-ReqTrain}" type="checkbox" name="attr_Lore7-ReqTrain" value="1" checked /></span>
							<span class="sheet-table-cell"><textarea class="sheet-skill-macro-text" title="@{Lore7-note}" name="attr_Lore7-note"></textarea></span>
							<span class="sheet-table-cell"><textarea class="sheet-skill-macro-text" title="@{Lore7-macro}" name="attr_Lore7-macro">&{template:pf_generic} @{toggle_accessible_flag} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_generic-skill}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle}} {{name=^{lore} @{lore7-name}}} {{Check=[[ @{skill-query} + [[ @{Lore7} ]] ]]}} @{Lore7-ut} @{skill_options} @{Lore7-cond-notes} {{generic_note=@{Lore7-note}}}</textarea></span>
						</div>
						<div class="sheet-table-row sheet-lore sheet-bg-only sheet-custom-skill-10">
							<span class="sheet-table-cell"><button style="font-size:100%;" title="%{selected|Lore8-Check}" type="roll" value="@{PC-Whisper} @{Lore8-macro}" name="roll_Lore8-Check"></button></span>
							<span class="sheet-table-cell"><input title="@{Lore8-cs}" type="checkbox" name="attr_Lore8-cs" value="3" /></span>
							<span class="sheet-table-cell sheet-left"><input title="@{Lore8-name} Optional Ruleset." style="width:96%;" type="text" name="attr_Lore8-name" placeholder="Lore" data-i18n-placeholder="lore" /></span>
							<span class="sheet-table-cell"><input title="@{Lore8}" type="number" name="attr_Lore8" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Lore8-ranks}" type="number" name="attr_Lore8-ranks" value="0" /></span>
							<span class="sheet-table-cell">
								<select title="@{Lore8-ability}" name="attr_Lore8-ability" class="sheet-select-small">
									<option value="@{STR-mod}" data-i18n="strength-abbrv">STR</option>
									<option value="@{DEX-mod}" data-i18n="dexterity-abbrv">DEX</option>
									<option value="@{CON-mod}" data-i18n="constitution-abbrv">CON</option>
									<option value="@{INT-mod}" data-i18n="intelligence-abbrv-default" selected>&#8226;INT</option>
									<option value="@{WIS-mod}" data-i18n="wisdom-abbrv">WIS</option>
									<option value="@{CHA-mod}" data-i18n="charisma-abbrv">CHA</option>
								</select>
							</span>
							<span class="sheet-table-cell"><input title="@{Lore8-ability-mod}" type="number" name="attr_Lore8-ability-mod" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Lore8-racial}" type="number" name="attr_Lore8-racial" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Lore8-trait}" type="number" name="attr_Lore8-trait" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Lore8-feat}" type="number" name="attr_Lore8-feat" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Lore8-item}" type="number" name="attr_Lore8-item" value="0" /></span>
							<input class="sheet-error-mshow" type="checkbox" value="1" role="status" aria-live="polite" name="attr_Lore8-misc-mod_error" />
							<span class="sheet-table-cell sheet-highlight"><input title="@{Lore8-misc}" type="text" name="attr_Lore8-misc" value="" placeholder="#/Equation" data-i18n-placeholder="equation-macro-place" /></span>
							<span class="sheet-table-cell sheet-highlight"><input title="@{Lore8-misc-mod}" type="number" class="sheet-calc" readonly name="attr_Lore8-misc-mod" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Lore8-class}" type="text" name="attr_Lore8-class" value="0/0/0/0" class="sheet-calc sheet-skill-conds" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Lore8-ReqTrain}" type="checkbox" name="attr_Lore8-ReqTrain" value="1" checked /></span>
							<span class="sheet-table-cell"><textarea class="sheet-skill-macro-text" title="@{Lore8-note}" name="attr_Lore8-note"></textarea></span>
							<span class="sheet-table-cell"><textarea class="sheet-skill-macro-text" title="@{Lore8-macro}" name="attr_Lore8-macro">&{template:pf_generic} @{toggle_accessible_flag} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_generic-skill}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle}} {{name=^{lore} @{lore8-name}}} {{Check=[[ @{skill-query} + [[ @{Lore8} ]] ]]}} @{Lore8-ut} @{skill_options} @{Lore8-cond-notes} {{generic_note=@{Lore8-note}}}</textarea></span>
						</div>
						<div class="sheet-table-row sheet-lore sheet-bg-only sheet-custom-skill-10">
							<span class="sheet-table-cell"><button style="font-size:100%;" title="%{selected|Lore9-Check}" type="roll" value="@{PC-Whisper} @{Lore9-macro}" name="roll_Lore9-Check"></button></span>
							<span class="sheet-table-cell"><input title="@{Lore9-cs}" type="checkbox" name="attr_Lore9-cs" value="3" /></span>
							<span class="sheet-table-cell sheet-left"><input title="@{Lore9-name} Optional Ruleset." style="width:96%;" type="text" name="attr_Lore9-name" placeholder="Lore" data-i18n-placeholder="lore" /></span>
							<span class="sheet-table-cell"><input title="@{Lore9}" type="number" name="attr_Lore9" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Lore9-ranks}" type="number" name="attr_Lore9-ranks" value="0" /></span>
							<span class="sheet-table-cell">
								<select title="@{Lore9-ability}" name="attr_Lore9-ability" class="sheet-select-small">
									<option value="@{STR-mod}" data-i18n="strength-abbrv">STR</option>
									<option value="@{DEX-mod}" data-i18n="dexterity-abbrv">DEX</option>
									<option value="@{CON-mod}" data-i18n="constitution-abbrv">CON</option>
									<option value="@{INT-mod}" data-i18n="intelligence-abbrv-default" selected>&#8226;INT</option>
									<option value="@{WIS-mod}" data-i18n="wisdom-abbrv">WIS</option>
									<option value="@{CHA-mod}" data-i18n="charisma-abbrv">CHA</option>
								</select>
							</span>
							<span class="sheet-table-cell"><input title="@{Lore9-ability-mod}" type="number" name="attr_Lore9-ability-mod" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Lore9-racial}" type="number" name="attr_Lore9-racial" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Lore9-trait}" type="number" name="attr_Lore9-trait" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Lore9-feat}" type="number" name="attr_Lore9-feat" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Lore9-item}" type="number" name="attr_Lore9-item" value="0" /></span>
							<input class="sheet-error-mshow" type="checkbox" value="1" role="status" aria-live="polite" name="attr_Lore9-misc-mod_error" />
							<span class="sheet-table-cell sheet-highlight"><input title="@{Lore9-misc}" type="text" name="attr_Lore9-misc" value="" placeholder="#/Equation" data-i18n-placeholder="equation-macro-place" /></span>
							<span class="sheet-table-cell sheet-highlight"><input title="@{Lore9-misc-mod}" type="number" class="sheet-calc" readonly name="attr_Lore9-misc-mod" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Lore9-class}" type="text" name="attr_Lore9-class" value="0/0/0/0" class="sheet-calc sheet-skill-conds" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Lore9-ReqTrain}" type="checkbox" name="attr_Lore9-ReqTrain" value="1" checked /></span>
							<span class="sheet-table-cell"><textarea class="sheet-skill-macro-text" title="@{Lore9-note}" name="attr_Lore9-note"></textarea></span>
							<span class="sheet-table-cell"><textarea class="sheet-skill-macro-text" title="@{Lore9-macro}" name="attr_Lore9-macro">&{template:pf_generic} @{toggle_accessible_flag} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_generic-skill}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle}} {{name=^{lore} @{lore9-name}}} {{Check=[[ @{skill-query} + [[ @{Lore9} ]] ]]}} @{Lore9-ut} @{skill_options} @{Lore9-cond-notes} {{generic_note=@{Lore9-note}}}</textarea></span>
						</div>
						<div class="sheet-table-row sheet-lore sheet-bg-only sheet-custom-skill-10">
							<span class="sheet-table-cell"><button style="font-size:100%;" title="%{selected|Lore10-Check}" type="roll" value="@{PC-Whisper} @{Lore10-macro}" name="roll_Lore10-Check"></button></span>
							<span class="sheet-table-cell"><input title="@{Lore10-cs}" type="checkbox" name="attr_Lore10-cs" value="3" /></span>
							<span class="sheet-table-cell sheet-left"><input title="@{Lore10-name} Optional Ruleset." style="width:96%;" type="text" name="attr_Lore10-name" placeholder="Lore" data-i18n-placeholder="lore" /></span>
							<span class="sheet-table-cell"><input title="@{Lore10}" type="number" name="attr_Lore10" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Lore10-ranks}" type="number" name="attr_Lore10-ranks" value="0" /></span>
							<span class="sheet-table-cell">
								<select title="@{Lore10-ability}" name="attr_Lore10-ability" class="sheet-select-small">
									<option value="@{STR-mod}" data-i18n="strength-abbrv">STR</option>
									<option value="@{DEX-mod}" data-i18n="dexterity-abbrv">DEX</option>
									<option value="@{CON-mod}" data-i18n="constitution-abbrv">CON</option>
									<option value="@{INT-mod}" data-i18n="intelligence-abbrv-default" selected>&#8226;INT</option>
									<option value="@{WIS-mod}" data-i18n="wisdom-abbrv">WIS</option>
									<option value="@{CHA-mod}" data-i18n="charisma-abbrv">CHA</option>
								</select>
							</span>
							<span class="sheet-table-cell"><input title="@{Lore10-ability-mod}" type="number" name="attr_Lore10-ability-mod" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Lore10-racial}" type="number" name="attr_Lore10-racial" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Lore10-trait}" type="number" name="attr_Lore10-trait" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Lore10-feat}" type="number" name="attr_Lore10-feat" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Lore10-item}" type="number" name="attr_Lore10-item" value="0" /></span>
							<input class="sheet-error-mshow" type="checkbox" value="1" role="status" aria-live="polite" name="attr_Lore10-misc-mod_error" />
							<span class="sheet-table-cell sheet-highlight"><input title="@{Lore10-misc}" type="text" name="attr_Lore10-misc" value="" placeholder="#/Equation" data-i18n-placeholder="equation-macro-place" /></span>
							<span class="sheet-table-cell sheet-highlight"><input title="@{Lore10-misc-mod}" type="number" class="sheet-calc" readonly name="attr_Lore10-misc-mod" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Lore10-class}" type="text" name="attr_Lore10-class" value="0/0/0/0" class="sheet-calc sheet-skill-conds" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Lore10-ReqTrain}" type="checkbox" name="attr_Lore10-ReqTrain" value="1" checked /></span>
							<span class="sheet-table-cell"><textarea class="sheet-skill-macro-text" title="@{Lore10-note}" name="attr_Lore10-note"></textarea></span>
							<span class="sheet-table-cell"><textarea class="sheet-skill-macro-text" title="@{Lore10-macro}" name="attr_Lore10-macro">&{template:pf_generic} @{toggle_accessible_flag} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_generic-skill}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle}} {{name=^{lore} @{lore10-name}}} {{Check=[[ @{skill-query} + [[ @{Lore10} ]] ]]}} @{Lore10-ut} @{skill_options} @{Lore10-cond-notes} {{generic_note=@{Lore10-note}}}</textarea></span>
						</div>
						<div class="sheet-table-row sheet-adventure">
							<span class="sheet-table-cell"><button style="font-size:100%;" title="%{selected|Perception-Check}" type="roll" value="@{PC-Whisper} @{Perception-macro}" name="roll_Perception-Check"></button></span>
							<span class="sheet-table-cell"><input title="@{Perception-cs}" type="checkbox" name="attr_Perception-cs" value="3" /></span>
							<span class="sheet-table-cell sheet-left" data-i18n="perception">Perception</span>
							<span class="sheet-table-cell"><input title="@{Perception}" type="number" name="attr_Perception" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Perception-ranks}" type="number" name="attr_Perception-ranks" value="0" /></span>
							<span class="sheet-table-cell">
								<select title="@{Perception-ability}" name="attr_Perception-ability" class="sheet-select-small">
									<option value="@{STR-mod}" data-i18n="strength-abbrv">STR</option>
									<option value="@{DEX-mod}" data-i18n="dexterity-abbrv">DEX</option>
									<option value="@{CON-mod}" data-i18n="constitution-abbrv">CON</option>
									<option value="@{INT-mod}" data-i18n="intelligence-abbrv">INT</option>
									<option value="@{WIS-mod}" data-i18n="wisdom-abbrv-default" selected>&#8226;WIS</option>
									<option value="@{CHA-mod}" data-i18n="charisma-abbrv">CHA</option>
								</select>
							</span>
							<span class="sheet-table-cell"><input title="@{Perception-ability-mod}" type="number" name="attr_Perception-ability-mod" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Perception-racial}" type="number" name="attr_Perception-racial" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Perception-trait}" type="number" name="attr_Perception-trait" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Perception-feat}" type="number" name="attr_Perception-feat" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Perception-item}" type="number" name="attr_Perception-item" value="0" /></span>
							<input class="sheet-error-mshow" type="checkbox" value="1" role="status" aria-live="polite" name="attr_Perception-misc-mod_error" />
							<span class="sheet-table-cell sheet-highlight"><input title="@{Perception-misc}" type="text" name="attr_Perception-misc" value="" placeholder="#/Equation" data-i18n-placeholder="equation-macro-place" /></span>
							<span class="sheet-table-cell sheet-highlight"><input title="@{Perception-misc-mod}" type="number" class="sheet-calc" readonly name="attr_Perception-misc-mod" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Perception-class}" type="text" name="attr_Perception-class" value="0/0/0/0" class="sheet-calc sheet-skill-conds" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Perception-ReqTrain}" type="checkbox" name="attr_Perception-ReqTrain" value="1" /></span>
							<span class="sheet-table-cell"><textarea class="sheet-skill-macro-text" title="@{Perception-note}" name="attr_Perception-note"></textarea></span>
							<span class="sheet-table-cell"><textarea class="sheet-skill-macro-text" title="@{Perception-macro}" name="attr_Perception-macro">&{template:pf_generic} @{toggle_accessible_flag} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_generic-skill}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle}} {{name=^{perception}}} {{Check=[[ @{skill-query} + [[ @{Perception} ]] ]]}} @{Perception-ut} @{skill_options} @{Perception-cond-notes} {{generic_note=@{Perception-note}}}</textarea></span>
						</div>
						<span class="sheet-custom-skill-2 sheet-table-cell sheet-bg">&nbsp;</span>
						<span class="sheet-custom-skill-2 sheet-table-cell sheet-bg">&nbsp;</span>
						<input class="sheet-custom-skill-2 sheet-showarrow sheet-perform-show sheet-bg" type="checkbox" name="attr_perform-show" data-i18n-aria-label="perform" title="Click to expand" data-i18n-title="showsect-cmd" value="1" checked />
						<label class="sheet-custom-skill-2 sheet-showsect sheet-bg sheet-skill-minishow" title="Click to expand" data-i18n-title="showsect-cmd" data-i18n-aria-label="showsect-cmd" data-i18n="perform">Perform</label>
						<span class="sheet-custom-skill-2 sheet-bg"></span>
						<div class="sheet-custom-skill-2 sheet-table-row sheet-bg"><!--used to keep these sections from collapsing on each other when hidden--></div>
						<div class="sheet-table-row sheet-perform sheet-bg">
							<span class="sheet-table-cell"><button style="font-size:100%;" title="%{selected|Perform-Check}" type="roll" value="@{PC-Whisper} @{Perform-macro}" name="roll_Perform-Check"></button></span>
							<span class="sheet-table-cell"><input title="@{Perform-cs}" type="checkbox" name="attr_Perform-cs" value="3" /></span>
							<span class="sheet-table-cell sheet-left"><input title="@{Perform-name}" style="width:96%;" type="text" name="attr_Perform-name" placeholder="Perform" data-i18n-placeholder="perform" /></span>
							<span class="sheet-table-cell"><input title="@{Perform}" type="number" name="attr_Perform" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Perform-ranks}" type="number" name="attr_Perform-ranks" value="0" /></span>
							<span class="sheet-table-cell">
								<select title="@{Perform-ability}" name="attr_Perform-ability" class="sheet-select-small">
									<option value="@{STR-mod}" data-i18n="strength-abbrv">STR</option>
									<option value="@{DEX-mod}" data-i18n="dexterity-abbrv">DEX</option>
									<option value="@{CON-mod}" data-i18n="constitution-abbrv">CON</option>
									<option value="@{INT-mod}" data-i18n="intelligence-abbrv">INT</option>
									<option value="@{WIS-mod}" data-i18n="wisdom-abbrv">WIS</option>
									<option value="@{CHA-mod}" data-i18n="charisma-abbrv-default" selected>&#8226;CHA</option>
								</select>
							</span>
							<span class="sheet-table-cell"><input title="@{Perform-ability-mod}" type="number" name="attr_Perform-ability-mod" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Perform-racial}" type="number" name="attr_Perform-racial" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Perform-trait}" type="number" name="attr_Perform-trait" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Perform-feat}" type="number" name="attr_Perform-feat" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Perform-item}" type="number" name="attr_Perform-item" value="0" /></span>
							<input class="sheet-error-mshow" type="checkbox" value="1" role="status" aria-live="polite" name="attr_Perform-misc-mod_error" />
							<span class="sheet-table-cell sheet-highlight"><input title="@{Perform-misc}" type="text" name="attr_Perform-misc" value="" placeholder="#/Equation" data-i18n-placeholder="equation-macro-place" /></span>
							<span class="sheet-table-cell sheet-highlight"><input title="@{Perform-misc-mod}" type="number" class="sheet-calc" readonly name="attr_Perform-misc-mod" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Perform-class}" type="text" name="attr_Perform-class" value="0/0/0/0" class="sheet-calc sheet-skill-conds" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Perform-ReqTrain}" type="checkbox" name="attr_Perform-ReqTrain" value="1" /></span>
							<span class="sheet-table-cell"><textarea class="sheet-skill-macro-text" title="@{Perform-note}" name="attr_Perform-note"></textarea></span>
							<span class="sheet-table-cell"><textarea class="sheet-skill-macro-text" title="@{Perform-macro}" name="attr_Perform-macro">&{template:pf_generic} @{toggle_accessible_flag} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_generic-skill}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle}} {{name=^{perform} @{Perform-name}}} {{Check=[[ @{skill-query} + [[ @{Perform} ]] ]]}} @{Perform-ut} @{skill_options} @{Perform-cond-notes} {{generic_note=@{Perform-note}}}</textarea></span>
						</div>
						<div class="sheet-table-row sheet-perform sheet-bg sheet-custom-skill-2">
							<span class="sheet-table-cell"><button style="font-size:100%;" title="%{selected|Perform2-Check}" type="roll" value="@{PC-Whisper} @{Perform2-macro}" name="roll_Perform2-Check"></button></span>
							<span class="sheet-table-cell"><input title="@{Perform2-cs}" type="checkbox" name="attr_Perform2-cs" value="3" /></span>
							<span class="sheet-table-cell sheet-left"><input title="@{Perform2-name}" style="width:96%;" type="text" name="attr_Perform2-name" placeholder="Perform" data-i18n-placeholder="perform" /></span>
							<span class="sheet-table-cell"><input title="@{Perform2}" type="number" name="attr_Perform2" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Perform2-ranks}" type="number" name="attr_Perform2-ranks" value="0" /></span>
							<span class="sheet-table-cell">
								<select title="@{Perform2-ability}" name="attr_Perform2-ability" class="sheet-select-small">
									<option value="@{STR-mod}" data-i18n="strength-abbrv">STR</option>
									<option value="@{DEX-mod}" data-i18n="dexterity-abbrv">DEX</option>
									<option value="@{CON-mod}" data-i18n="constitution-abbrv">CON</option>
									<option value="@{INT-mod}" data-i18n="intelligence-abbrv">INT</option>
									<option value="@{WIS-mod}" data-i18n="wisdom-abbrv">WIS</option>
									<option value="@{CHA-mod}" data-i18n="charisma-abbrv-default" selected>&#8226;CHA</option>
								</select>
							</span>
							<span class="sheet-table-cell"><input title="@{Perform2-ability-mod}" type="number" name="attr_Perform2-ability-mod" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Perform2-racial}" type="number" name="attr_Perform2-racial" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Perform2-trait}" type="number" name="attr_Perform2-trait" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Perform2-feat}" type="number" name="attr_Perform2-feat" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Perform2-item}" type="number" name="attr_Perform2-item" value="0" /></span>
							<input class="sheet-error-mshow" type="checkbox" value="1" role="status" aria-live="polite" name="attr_Perform2-misc-mod_error" />
							<span class="sheet-table-cell sheet-highlight"><input title="@{Perform2-misc}" type="text" name="attr_Perform2-misc" value="" placeholder="#/Equation" data-i18n-placeholder="equation-macro-place" /></span>
							<span class="sheet-table-cell sheet-highlight"><input title="@{Perform2-misc-mod}" type="number" class="sheet-calc" readonly name="attr_Perform2-misc-mod" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Perform2-class}" type="text" name="attr_Perform2-class" value="0/0/0/0" class="sheet-calc sheet-skill-conds" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Perform2-ReqTrain}" type="checkbox" name="attr_Perform2-ReqTrain" value="1" /></span>
							<span class="sheet-table-cell"><textarea class="sheet-skill-macro-text" title="@{Perform2-note}" name="attr_Perform2-note"></textarea></span>
							<span class="sheet-table-cell"><textarea class="sheet-skill-macro-text" title="@{Perform2-macro}" name="attr_Perform2-macro">&{template:pf_generic} @{toggle_accessible_flag} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_generic-skill}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle}} {{name=^{perform} @{Perform2-name}}} {{Check=[[ @{skill-query} + [[ @{Perform2} ]] ]]}} @{Perform2-ut} @{skill_options} @{Perform2-cond-notes} {{generic_note=@{Perform2-note}}}</textarea></span>
						</div>
						<div class="sheet-table-row sheet-perform sheet-bg sheet-custom-skill-3">
							<span class="sheet-table-cell"><button style="font-size:100%;" title="%{selected|Perform3-Check}" type="roll" value="@{PC-Whisper} @{Perform3-macro}" name="roll_Perform3-Check"></button></span>
							<span class="sheet-table-cell"><input title="@{Perform3-cs}" type="checkbox" name="attr_Perform3-cs" value="3" /></span>
							<span class="sheet-table-cell sheet-left"><input title="@{Perform3-name}" style="width:96%;" type="text" name="attr_Perform3-name" placeholder="Perform" data-i18n-placeholder="perform" /></span>
							<span class="sheet-table-cell"><input title="@{Perform3}" type="number" name="attr_Perform3" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Perform3-ranks}" type="number" name="attr_Perform3-ranks" value="0" /></span>
							<span class="sheet-table-cell">
								<select title="@{Perform3-ability}" name="attr_Perform3-ability" class="sheet-select-small">
									<option value="@{STR-mod}" data-i18n="strength-abbrv">STR</option>
									<option value="@{DEX-mod}" data-i18n="dexterity-abbrv">DEX</option>
									<option value="@{CON-mod}" data-i18n="constitution-abbrv">CON</option>
									<option value="@{INT-mod}" data-i18n="intelligence-abbrv">INT</option>
									<option value="@{WIS-mod}" data-i18n="wisdom-abbrv">WIS</option>
									<option value="@{CHA-mod}" data-i18n="charisma-abbrv-default" selected>&#8226;CHA</option>
								</select>
							</span>
							<span class="sheet-table-cell"><input title="@{Perform3-ability-mod}" type="number" name="attr_Perform3-ability-mod" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Perform3-racial}" type="number" name="attr_Perform3-racial" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Perform3-trait}" type="number" name="attr_Perform3-trait" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Perform3-feat}" type="number" name="attr_Perform3-feat" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Perform3-item}" type="number" name="attr_Perform3-item" value="0" /></span>
							<input class="sheet-error-mshow" type="checkbox" value="1" role="status" aria-live="polite" name="attr_Perform3-misc-mod_error" />
							<span class="sheet-table-cell sheet-highlight"><input title="@{Perform3-misc}" type="text" name="attr_Perform3-misc" value="" placeholder="#/Equation" data-i18n-placeholder="equation-macro-place" /></span>
							<span class="sheet-table-cell sheet-highlight"><input title="@{Perform3-misc-mod}" type="number" class="sheet-calc" readonly name="attr_Perform3-misc-mod" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Perform3-class}" type="text" name="attr_Perform3-class" value="0/0/0/0" class="sheet-calc sheet-skill-conds" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Perform3-ReqTrain}" type="checkbox" name="attr_Perform3-ReqTrain" value="1" /></span>
							<span class="sheet-table-cell"><textarea class="sheet-skill-macro-text" title="@{Perform3-note}" name="attr_Perform3-note"></textarea></span>
							<span class="sheet-table-cell"><textarea class="sheet-skill-macro-text" title="@{Perform3-macro}" name="attr_Perform3-macro">&{template:pf_generic} @{toggle_accessible_flag} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_generic-skill}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle}} {{name=^{perform} @{Perform3-name}}} {{Check=[[ @{skill-query} + [[ @{Perform3} ]] ]]}} @{Perform3-ut} @{skill_options} @{Perform3-cond-notes} {{generic_note=@{Perform3-note}}}</textarea></span>
						</div>
						<div class="sheet-table-row sheet-perform sheet-bg sheet-custom-skill-6">
							<span class="sheet-table-cell"><button style="font-size:100%;" title="%{selected|Perform4-Check}" type="roll" value="@{PC-Whisper} @{Perform4-macro}" name="roll_Perform4-Check"></button></span>
							<span class="sheet-table-cell"><input title="@{Perform4-cs}" type="checkbox" name="attr_Perform4-cs" value="3" /></span>
							<span class="sheet-table-cell sheet-left"><input title="@{Perform4-name}" style="width:96%;" type="text" name="attr_Perform4-name" placeholder="Perform" data-i18n-placeholder="perform" /></span>
							<span class="sheet-table-cell"><input title="@{Perform4}" type="number" name="attr_Perform4" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Perform4-ranks}" type="number" name="attr_Perform4-ranks" value="0" /></span>
							<span class="sheet-table-cell">
								<select title="@{Perform4-ability}" name="attr_Perform4-ability" class="sheet-select-small">
									<option value="@{STR-mod}" data-i18n="strength-abbrv">STR</option>
									<option value="@{DEX-mod}" data-i18n="dexterity-abbrv">DEX</option>
									<option value="@{CON-mod}" data-i18n="constitution-abbrv">CON</option>
									<option value="@{INT-mod}" data-i18n="intelligence-abbrv">INT</option>
									<option value="@{WIS-mod}" data-i18n="wisdom-abbrv">WIS</option>
									<option value="@{CHA-mod}" data-i18n="charisma-abbrv-default" selected>&#8226;CHA</option>
								</select>
							</span>
							<span class="sheet-table-cell"><input title="@{Perform4-ability-mod}" type="number" name="attr_Perform4-ability-mod" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Perform4-racial}" type="number" name="attr_Perform4-racial" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Perform4-trait}" type="number" name="attr_Perform4-trait" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Perform4-feat}" type="number" name="attr_Perform4-feat" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Perform4-item}" type="number" name="attr_Perform4-item" value="0" /></span>
							<input class="sheet-error-mshow" type="checkbox" value="1" role="status" aria-live="polite" name="attr_Perform4-misc-mod_error" />
							<span class="sheet-table-cell sheet-highlight"><input title="@{Perform4-misc}" type="text" name="attr_Perform4-misc" value="" placeholder="#/Equation" data-i18n-placeholder="equation-macro-place" /></span>
							<span class="sheet-table-cell sheet-highlight"><input title="@{Perform4-misc-mod}" type="number" class="sheet-calc" readonly name="attr_Perform4-misc-mod" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Perform4-class}" type="text" name="attr_Perform4-class" value="0/0/0/0" class="sheet-calc sheet-skill-conds" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Perform4-ReqTrain}" type="checkbox" name="attr_Perform4-ReqTrain" value="1" /></span>
							<span class="sheet-table-cell"><textarea class="sheet-skill-macro-text" title="@{Perform4-note}" name="attr_Perform4-note"></textarea></span>
							<span class="sheet-table-cell"><textarea class="sheet-skill-macro-text" title="@{Perform4-macro}" name="attr_Perform4-macro">&{template:pf_generic} @{toggle_accessible_flag} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_generic-skill}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle}} {{name=^{perform} @{Perform4-name}}} {{Check=[[ @{skill-query} + [[ @{Perform4} ]] ]]}} @{Perform4-ut} @{skill_options} @{Perform4-cond-notes} {{generic_note=@{Perform4-note}}}</textarea></span>
						</div>
						<div class="sheet-table-row sheet-perform sheet-bg sheet-custom-skill-6">
							<span class="sheet-table-cell"><button style="font-size:100%;" title="%{selected|Perform5-Check}" type="roll" value="@{PC-Whisper} @{Perform5-macro}" name="roll_Perform5-Check"></button></span>
							<span class="sheet-table-cell"><input title="@{Perform5-cs}" type="checkbox" name="attr_Perform5-cs" value="3" /></span>
							<span class="sheet-table-cell sheet-left"><input title="@{Perform5-name}" style="width:96%;" type="text" name="attr_Perform5-name" placeholder="Perform" data-i18n-placeholder="perform" /></span>
							<span class="sheet-table-cell"><input title="@{Perform5}" type="number" name="attr_Perform5" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Perform5-ranks}" type="number" name="attr_Perform5-ranks" value="0" /></span>
							<span class="sheet-table-cell">
								<select title="@{Perform5-ability}" name="attr_Perform5-ability" class="sheet-select-small">
									<option value="@{STR-mod}" data-i18n="strength-abbrv">STR</option>
									<option value="@{DEX-mod}" data-i18n="dexterity-abbrv">DEX</option>
									<option value="@{CON-mod}" data-i18n="constitution-abbrv">CON</option>
									<option value="@{INT-mod}" data-i18n="intelligence-abbrv">INT</option>
									<option value="@{WIS-mod}" data-i18n="wisdom-abbrv">WIS</option>
									<option value="@{CHA-mod}" data-i18n="charisma-abbrv-default" selected>&#8226;CHA</option>
								</select>
							</span>
							<span class="sheet-table-cell"><input title="@{Perform5-ability-mod}" type="number" name="attr_Perform5-ability-mod" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Perform5-racial}" type="number" name="attr_Perform5-racial" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Perform5-trait}" type="number" name="attr_Perform5-trait" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Perform5-feat}" type="number" name="attr_Perform5-feat" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Perform5-item}" type="number" name="attr_Perform5-item" value="0" /></span>
							<input class="sheet-error-mshow" type="checkbox" value="1" role="status" aria-live="polite" name="attr_Perform5-misc-mod_error" />
							<span class="sheet-table-cell sheet-highlight"><input title="@{Perform5-misc}" type="text" name="attr_Perform5-misc" value="" placeholder="#/Equation" data-i18n-placeholder="equation-macro-place" /></span>
							<span class="sheet-table-cell sheet-highlight"><input title="@{Perform5-misc-mod}" type="number" class="sheet-calc" readonly name="attr_Perform5-misc-mod" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Perform5-class}" type="text" name="attr_Perform5-class" value="0/0/0/0" class="sheet-calc sheet-skill-conds" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Perform5-ReqTrain}" type="checkbox" name="attr_Perform5-ReqTrain" value="1" /></span>
							<span class="sheet-table-cell"><textarea class="sheet-skill-macro-text" title="@{Perform5-note}" name="attr_Perform5-note"></textarea></span>
							<span class="sheet-table-cell"><textarea class="sheet-skill-macro-text" title="@{Perform5-macro}" name="attr_Perform5-macro">&{template:pf_generic} @{toggle_accessible_flag} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_generic-skill}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle}} {{name=^{perform} @{Perform5-name}}} {{Check=[[ @{skill-query} + [[ @{Perform5} ]] ]]}} @{Perform5-ut} @{skill_options} @{Perform5-cond-notes} {{generic_note=@{Perform5-note}}}</textarea></span>
						</div>
						<div class="sheet-table-row sheet-perform sheet-bg sheet-custom-skill-6">
							<span class="sheet-table-cell"><button style="font-size:100%;" title="%{selected|Perform6-Check}" type="roll" value="@{PC-Whisper} @{Perform6-macro}" name="roll_Perform6-Check"></button></span>
							<span class="sheet-table-cell"><input title="@{Perform6-cs}" type="checkbox" name="attr_Perform6-cs" value="3" /></span>
							<span class="sheet-table-cell sheet-left"><input title="@{Perform6-name}" style="width:96%;" type="text" name="attr_Perform6-name" placeholder="Perform" data-i18n-placeholder="perform" /></span>
							<span class="sheet-table-cell"><input title="@{Perform6}" type="number" name="attr_Perform6" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Perform6-ranks}" type="number" name="attr_Perform6-ranks" value="0" /></span>
							<span class="sheet-table-cell">
								<select title="@{Perform6-ability}" name="attr_Perform6-ability" class="sheet-select-small">
									<option value="@{STR-mod}" data-i18n="strength-abbrv">STR</option>
									<option value="@{DEX-mod}" data-i18n="dexterity-abbrv">DEX</option>
									<option value="@{CON-mod}" data-i18n="constitution-abbrv">CON</option>
									<option value="@{INT-mod}" data-i18n="intelligence-abbrv">INT</option>
									<option value="@{WIS-mod}" data-i18n="wisdom-abbrv">WIS</option>
									<option value="@{CHA-mod}" data-i18n="charisma-abbrv-default" selected>&#8226;CHA</option>
								</select>
							</span>
							<span class="sheet-table-cell"><input title="@{Perform6-ability-mod}" type="number" name="attr_Perform6-ability-mod" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Perform6-racial}" type="number" name="attr_Perform6-racial" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Perform6-trait}" type="number" name="attr_Perform6-trait" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Perform6-feat}" type="number" name="attr_Perform6-feat" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Perform6-item}" type="number" name="attr_Perform6-item" value="0" /></span>
							<input class="sheet-error-mshow" type="checkbox" value="1" role="status" aria-live="polite" name="attr_Perform6-misc-mod_error" />
							<span class="sheet-table-cell sheet-highlight"><input title="@{Perform6-misc}" type="text" name="attr_Perform6-misc" value="" placeholder="#/Equation" data-i18n-placeholder="equation-macro-place" /></span>
							<span class="sheet-table-cell sheet-highlight"><input title="@{Perform6-misc-mod}" type="number" class="sheet-calc" readonly name="attr_Perform6-misc-mod" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Perform6-class}" type="text" name="attr_Perform6-class" value="0/0/0/0" class="sheet-calc sheet-skill-conds" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Perform6-ReqTrain}" type="checkbox" name="attr_Perform6-ReqTrain" value="1" /></span>
							<span class="sheet-table-cell"><textarea class="sheet-skill-macro-text" title="@{Perform6-note}" name="attr_Perform6-note"></textarea></span>
							<span class="sheet-table-cell"><textarea class="sheet-skill-macro-text" title="@{Perform6-macro}" name="attr_Perform6-macro">&{template:pf_generic} @{toggle_accessible_flag} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_generic-skill}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle}} {{name=^{perform} @{Perform6-name}}} {{Check=[[ @{skill-query} + [[ @{Perform6} ]] ]]}} @{Perform6-ut} @{skill_options} @{Perform6-cond-notes} {{generic_note=@{Perform6-note}}}</textarea></span>
						</div>
						<div class="sheet-table-row sheet-perform sheet-bg sheet-custom-skill-10">
							<span class="sheet-table-cell"><button style="font-size:100%;" title="%{selected|Perform7-Check}" type="roll" value="@{PC-Whisper} @{Perform7-macro}" name="roll_Perform7-Check"></button></span>
							<span class="sheet-table-cell"><input title="@{Perform7-cs}" type="checkbox" name="attr_Perform7-cs" value="3" /></span>
							<span class="sheet-table-cell sheet-left"><input title="@{Perform7-name}" style="width:96%;" type="text" name="attr_Perform7-name" placeholder="Perform" data-i18n-placeholder="perform" /></span>
							<span class="sheet-table-cell"><input title="@{Perform7}" type="number" name="attr_Perform7" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Perform7-ranks}" type="number" name="attr_Perform7-ranks" value="0" /></span>
							<span class="sheet-table-cell">
								<select title="@{Perform7-ability}" name="attr_Perform7-ability" class="sheet-select-small">
									<option value="@{STR-mod}" data-i18n="strength-abbrv">STR</option>
									<option value="@{DEX-mod}" data-i18n="dexterity-abbrv">DEX</option>
									<option value="@{CON-mod}" data-i18n="constitution-abbrv">CON</option>
									<option value="@{INT-mod}" data-i18n="intelligence-abbrv">INT</option>
									<option value="@{WIS-mod}" data-i18n="wisdom-abbrv">WIS</option>
									<option value="@{CHA-mod}" data-i18n="charisma-abbrv-default" selected>&#8226;CHA</option>
								</select>
							</span>
							<span class="sheet-table-cell"><input title="@{Perform7-ability-mod}" type="number" name="attr_Perform7-ability-mod" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Perform7-racial}" type="number" name="attr_Perform7-racial" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Perform7-trait}" type="number" name="attr_Perform7-trait" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Perform7-feat}" type="number" name="attr_Perform7-feat" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Perform7-item}" type="number" name="attr_Perform7-item" value="0" /></span>
							<input class="sheet-error-mshow" type="checkbox" value="1" role="status" aria-live="polite" name="attr_Perform7-misc-mod_error" />
							<span class="sheet-table-cell sheet-highlight"><input title="@{Perform7-misc}" type="text" name="attr_Perform7-misc" value="" placeholder="#/Equation" data-i18n-placeholder="equation-macro-place" /></span>
							<span class="sheet-table-cell sheet-highlight"><input title="@{Perform7-misc-mod}" type="number" class="sheet-calc" readonly name="attr_Perform7-misc-mod" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Perform7-class}" type="text" name="attr_Perform7-class" value="0/0/0/0" class="sheet-calc sheet-skill-conds" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Perform7-ReqTrain}" type="checkbox" name="attr_Perform7-ReqTrain" value="1" /></span>
							<span class="sheet-table-cell"><textarea class="sheet-skill-macro-text" title="@{Perform7-note}" name="attr_Perform7-note"></textarea></span>
							<span class="sheet-table-cell"><textarea class="sheet-skill-macro-text" title="@{Perform7-macro}" name="attr_Perform7-macro">&{template:pf_generic} @{toggle_accessible_flag} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_generic-skill}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle}} {{name=^{perform} @{Perform7-name}}} {{Check=[[ @{skill-query} + [[ @{Perform7} ]] ]]}} @{Perform7-ut} @{skill_options} @{Perform7-cond-notes} {{generic_note=@{Perform7-note}}}</textarea></span>
						</div>
						<div class="sheet-table-row sheet-perform sheet-bg sheet-custom-skill-10">
							<span class="sheet-table-cell"><button style="font-size:100%;" title="%{selected|Perform8-Check}" type="roll" value="@{PC-Whisper} @{Perform8-macro}" name="roll_Perform8-Check"></button></span>
							<span class="sheet-table-cell"><input title="@{Perform8-cs}" type="checkbox" name="attr_Perform8-cs" value="3" /></span>
							<span class="sheet-table-cell sheet-left"><input title="@{Perform8-name}" style="width:96%;" type="text" name="attr_Perform8-name" placeholder="Perform" data-i18n-placeholder="perform" /></span>
							<span class="sheet-table-cell"><input title="@{Perform8}" type="number" name="attr_Perform8" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Perform8-ranks}" type="number" name="attr_Perform8-ranks" value="0" /></span>
							<span class="sheet-table-cell">
								<select title="@{Perform8-ability}" name="attr_Perform8-ability" class="sheet-select-small">
									<option value="@{STR-mod}" data-i18n="strength-abbrv">STR</option>
									<option value="@{DEX-mod}" data-i18n="dexterity-abbrv">DEX</option>
									<option value="@{CON-mod}" data-i18n="constitution-abbrv">CON</option>
									<option value="@{INT-mod}" data-i18n="intelligence-abbrv">INT</option>
									<option value="@{WIS-mod}" data-i18n="wisdom-abbrv">WIS</option>
									<option value="@{CHA-mod}" data-i18n="charisma-abbrv-default" selected>&#8226;CHA</option>
								</select>
							</span>
							<span class="sheet-table-cell"><input title="@{Perform8-ability-mod}" type="number" name="attr_Perform8-ability-mod" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Perform8-racial}" type="number" name="attr_Perform8-racial" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Perform8-trait}" type="number" name="attr_Perform8-trait" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Perform8-feat}" type="number" name="attr_Perform8-feat" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Perform8-item}" type="number" name="attr_Perform8-item" value="0" /></span>
							<input class="sheet-error-mshow" type="checkbox" value="1" role="status" aria-live="polite" name="attr_Perform8-misc-mod_error" />
							<span class="sheet-table-cell sheet-highlight"><input title="@{Perform8-misc}" type="text" name="attr_Perform8-misc" value="" placeholder="#/Equation" data-i18n-placeholder="equation-macro-place" /></span>
							<span class="sheet-table-cell sheet-highlight"><input title="@{Perform8-misc-mod}" type="number" class="sheet-calc" readonly name="attr_Perform8-misc-mod" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Perform8-class}" type="text" name="attr_Perform8-class" value="0/0/0/0" class="sheet-calc sheet-skill-conds" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Perform8-ReqTrain}" type="checkbox" name="attr_Perform8-ReqTrain" value="1" /></span>
							<span class="sheet-table-cell"><textarea class="sheet-skill-macro-text" title="@{Perform8-note}" name="attr_Perform8-note"></textarea></span>
							<span class="sheet-table-cell"><textarea class="sheet-skill-macro-text" title="@{Perform8-macro}" name="attr_Perform8-macro">&{template:pf_generic} @{toggle_accessible_flag} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_generic-skill}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle}} {{name=^{perform} @{Perform8-name}}} {{Check=[[ @{skill-query} + [[ @{Perform8} ]] ]]}} @{Perform8-ut} @{skill_options} @{Perform8-cond-notes} {{generic_note=@{Perform8-note}}}</textarea></span>
						</div>
						<div class="sheet-table-row sheet-perform sheet-bg sheet-custom-skill-10">
							<span class="sheet-table-cell"><button style="font-size:100%;" title="%{selected|Perform9-Check}" type="roll" value="@{PC-Whisper} @{Perform9-macro}" name="roll_Perform9-Check"></button></span>
							<span class="sheet-table-cell"><input title="@{Perform9-cs}" type="checkbox" name="attr_Perform9-cs" value="3" /></span>
							<span class="sheet-table-cell sheet-left"><input title="@{Perform9-name}" style="width:96%;" type="text" name="attr_Perform9-name" placeholder="Perform" data-i18n-placeholder="perform" /></span>
							<span class="sheet-table-cell"><input title="@{Perform9}" type="number" name="attr_Perform9" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Perform9-ranks}" type="number" name="attr_Perform9-ranks" value="0" /></span>
							<span class="sheet-table-cell">
								<select title="@{Perform9-ability}" name="attr_Perform9-ability" class="sheet-select-small">
									<option value="@{STR-mod}" data-i18n="strength-abbrv">STR</option>
									<option value="@{DEX-mod}" data-i18n="dexterity-abbrv">DEX</option>
									<option value="@{CON-mod}" data-i18n="constitution-abbrv">CON</option>
									<option value="@{INT-mod}" data-i18n="intelligence-abbrv">INT</option>
									<option value="@{WIS-mod}" data-i18n="wisdom-abbrv">WIS</option>
									<option value="@{CHA-mod}" data-i18n="charisma-abbrv-default" selected>&#8226;CHA</option>
								</select>
							</span>
							<span class="sheet-table-cell"><input title="@{Perform9-ability-mod}" type="number" name="attr_Perform9-ability-mod" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Perform9-racial}" type="number" name="attr_Perform9-racial" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Perform9-trait}" type="number" name="attr_Perform9-trait" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Perform9-feat}" type="number" name="attr_Perform9-feat" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Perform9-item}" type="number" name="attr_Perform9-item" value="0" /></span>
							<input class="sheet-error-mshow" type="checkbox" value="1" role="status" aria-live="polite" name="attr_Perform9-misc-mod_error" />
							<span class="sheet-table-cell sheet-highlight"><input title="@{Perform9-misc}" type="text" name="attr_Perform9-misc" value="" placeholder="#/Equation" data-i18n-placeholder="equation-macro-place" /></span>
							<span class="sheet-table-cell sheet-highlight"><input title="@{Perform9-misc-mod}" type="number" class="sheet-calc" readonly name="attr_Perform9-misc-mod" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Perform9-class}" type="text" name="attr_Perform9-class" value="0/0/0/0" class="sheet-calc sheet-skill-conds" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Perform9-ReqTrain}" type="checkbox" name="attr_Perform9-ReqTrain" value="1" /></span>
							<span class="sheet-table-cell"><textarea class="sheet-skill-macro-text" title="@{Perform9-note}" name="attr_Perform9-note"></textarea></span>
							<span class="sheet-table-cell"><textarea class="sheet-skill-macro-text" title="@{Perform9-macro}" name="attr_Perform9-macro">&{template:pf_generic} @{toggle_accessible_flag} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_generic-skill}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle}} {{name=^{perform} @{Perform9-name}}} {{Check=[[ @{skill-query} + [[ @{Perform9} ]] ]]}} @{Perform9-ut} @{skill_options} @{Perform9-cond-notes} {{generic_note=@{Perform9-note}}}</textarea></span>
						</div>
						<div class="sheet-table-row sheet-perform sheet-bg sheet-custom-skill-10">
							<span class="sheet-table-cell"><button style="font-size:100%;" title="%{selected|Perform10-Check}" type="roll" value="@{PC-Whisper} @{Perform10-macro}" name="roll_Perform10-Check"></button></span>
							<span class="sheet-table-cell"><input title="@{Perform10-cs}" type="checkbox" name="attr_Perform10-cs" value="3" /></span>
							<span class="sheet-table-cell sheet-left"><input title="@{Perform10-name}" style="width:96%;" type="text" name="attr_Perform10-name" placeholder="Perform" data-i18n-placeholder="perform" /></span>
							<span class="sheet-table-cell"><input title="@{Perform10}" type="number" name="attr_Perform10" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Perform10-ranks}" type="number" name="attr_Perform10-ranks" value="0" /></span>
							<span class="sheet-table-cell">
								<select title="@{Perform10-ability}" name="attr_Perform10-ability" class="sheet-select-small">
									<option value="@{STR-mod}" data-i18n="strength-abbrv">STR</option>
									<option value="@{DEX-mod}" data-i18n="dexterity-abbrv">DEX</option>
									<option value="@{CON-mod}" data-i18n="constitution-abbrv">CON</option>
									<option value="@{INT-mod}" data-i18n="intelligence-abbrv">INT</option>
									<option value="@{WIS-mod}" data-i18n="wisdom-abbrv">WIS</option>
									<option value="@{CHA-mod}" data-i18n="charisma-abbrv-default" selected>&#8226;CHA</option>
								</select>
							</span>
							<span class="sheet-table-cell"><input title="@{Perform10-ability-mod}" type="number" name="attr_Perform10-ability-mod" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Perform10-racial}" type="number" name="attr_Perform10-racial" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Perform10-trait}" type="number" name="attr_Perform10-trait" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Perform10-feat}" type="number" name="attr_Perform10-feat" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Perform10-item}" type="number" name="attr_Perform10-item" value="0" /></span>
							<input class="sheet-error-mshow" type="checkbox" value="1" role="status" aria-live="polite" name="attr_Perform10-misc-mod_error" />
							<span class="sheet-table-cell sheet-highlight"><input title="@{Perform10-misc}" type="text" name="attr_Perform10-misc" value="" placeholder="#/Equation" data-i18n-placeholder="equation-macro-place" /></span>
							<span class="sheet-table-cell sheet-highlight"><input title="@{Perform10-misc-mod}" type="number" class="sheet-calc" readonly name="attr_Perform10-misc-mod" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Perform10-class}" type="text" name="attr_Perform10-class" value="0/0/0/0" class="sheet-calc sheet-skill-conds" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Perform10-ReqTrain}" type="checkbox" name="attr_Perform10-ReqTrain" value="1" /></span>
							<span class="sheet-table-cell"><textarea class="sheet-skill-macro-text" title="@{Perform10-note}" name="attr_Perform10-note"></textarea></span>
							<span class="sheet-table-cell"><textarea class="sheet-skill-macro-text" title="@{Perform10-macro}" name="attr_Perform10-macro">&{template:pf_generic} @{toggle_accessible_flag} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_generic-skill}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle}} {{name=^{perform} @{Perform10-name}}} {{Check=[[ @{skill-query} + [[ @{Perform10} ]] ]]}} @{Perform10-ut} @{skill_options} @{Perform10-cond-notes} {{generic_note=@{Perform10-note}}}</textarea></span>
						</div>
						<span class="sheet-custom-skill-2 sheet-table-cell sheet-bg">&nbsp;</span>
						<span class="sheet-custom-skill-2 sheet-table-cell sheet-bg">&nbsp;</span>
						<input class="sheet-custom-skill-2 sheet-showarrow sheet-profession-show sheet-bg" type="checkbox" name="attr_profession-show" data-i18n-aria-label="profession" title="Click to expand" data-i18n-title="showsect-cmd" value="1" checked />
						<label class="sheet-custom-skill-2 sheet-showsect sheet-skill-minishow sheet-bg" title="Click to expand" data-i18n-title="showsect-cmd" data-i18n-aria-label="showsect-cmd" data-i18n="profession">Profession</label>
						<span class="sheet-custom-skill-2 sheet-bg"></span>
						<div class="sheet-custom-skill-2 sheet-table-row sheet-bg"><!--used to keep these sections from collapsing on each other when hidden--></div>
						<div class="sheet-table-row sheet-profession sheet-bg">
							<span class="sheet-table-cell"><button style="font-size:100%;" title="%{selected|Profession-Check}" type="roll" value="@{PC-Whisper} @{Profession-macro}" name="roll_Profession-Check"></button></span>
							<span class="sheet-table-cell"><input title="@{Profession-cs}" type="checkbox" name="attr_Profession-cs" value="3" /></span>
							<span class="sheet-table-cell sheet-left"><input title="@{Profession-name}" style="width:96%;" type="text" name="attr_Profession-name" placeholder="Profession" data-i18n-placeholder="profession" /></span>
							<span class="sheet-table-cell"><input title="@{Profession}" type="number" name="attr_Profession" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Profession-ranks}" type="number" name="attr_Profession-ranks" value="0" /></span>
							<span class="sheet-table-cell">
								<select title="@{Profession-ability}" name="attr_Profession-ability" class="sheet-select-small">
									<option value="@{STR-mod}" data-i18n="strength-abbrv">STR</option>
									<option value="@{DEX-mod}" data-i18n="dexterity-abbrv">DEX</option>
									<option value="@{CON-mod}" data-i18n="constitution-abbrv">CON</option>
									<option value="@{INT-mod}" data-i18n="intelligence-abbrv">INT</option>
									<option value="@{WIS-mod}" data-i18n="wisdom-abbrv-default" selected>&#8226;WIS</option>
									<option value="@{CHA-mod}" data-i18n="charisma-abbrv">CHA</option>
								</select>
							</span>
							<span class="sheet-table-cell"><input title="@{Profession-ability-mod}" type="number" name="attr_Profession-ability-mod" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Profession-racial}" type="number" name="attr_Profession-racial" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Profession-trait}" type="number" name="attr_Profession-trait" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Profession-feat}" type="number" name="attr_Profession-feat" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Profession-item}" type="number" name="attr_Profession-item" value="0" /></span>
							<input class="sheet-error-mshow" type="checkbox" value="1" role="status" aria-live="polite" name="attr_Profession-misc-mod_error" />
							<span class="sheet-table-cell sheet-highlight"><input title="@{Profession-misc}" type="text" name="attr_Profession-misc" value="" placeholder="#/Equation" data-i18n-placeholder="equation-macro-place" /></span>
							<span class="sheet-table-cell sheet-highlight"><input title="@{Profession-misc-mod}" type="number" class="sheet-calc" readonly name="attr_Profession-misc-mod" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Profession-class}" type="text" name="attr_Profession-class" value="0/0/0/0" class="sheet-calc sheet-skill-conds" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Profession-ReqTrain}" type="checkbox" name="attr_Profession-ReqTrain" value="1" checked /></span>
							<span class="sheet-table-cell"><textarea class="sheet-skill-macro-text" title="@{Profession-note}" name="attr_Profession-note"></textarea></span>
							<span class="sheet-table-cell"><textarea class="sheet-skill-macro-text" title="@{Profession-macro}" name="attr_Profession-macro">&{template:pf_generic} @{toggle_accessible_flag} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_generic-skill}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle}} {{name=^{profession} @{Profession-name}}} {{Check=[[ @{skill-query} + [[ @{Profession} ]] ]]}} @{Profession-ut} @{skill_options} @{Profession-cond-notes} {{generic_note=@{Profession-note}}}</textarea></span>
						</div>
						<div class="sheet-table-row sheet-profession sheet-bg sheet-custom-skill-2">
							<span class="sheet-table-cell"><button style="font-size:100%;" title="%{selected|Profession2-Check}" type="roll" value="@{PC-Whisper} @{Profession2-macro}" name="roll_Profession2-Check"></button></span>
							<span class="sheet-table-cell"><input title="@{Profession2-cs}" type="checkbox" name="attr_Profession2-cs" value="3" /></span>
							<span class="sheet-table-cell sheet-left"><input title="@{Profession2-name}" style="width:96%;" type="text" name="attr_Profession2-name" placeholder="Profession" data-i18n-placeholder="profession" /></span>
							<span class="sheet-table-cell"><input title="@{Profession2}" type="number" name="attr_Profession2" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Profession2-ranks}" type="number" name="attr_Profession2-ranks" value="0" /></span>
							<span class="sheet-table-cell">
								<select title="@{Profession2-ability}" name="attr_Profession2-ability" class="sheet-select-small">
									<option value="@{STR-mod}" data-i18n="strength-abbrv">STR</option>
									<option value="@{DEX-mod}" data-i18n="dexterity-abbrv">DEX</option>
									<option value="@{CON-mod}" data-i18n="constitution-abbrv">CON</option>
									<option value="@{INT-mod}" data-i18n="intelligence-abbrv">INT</option>
									<option value="@{WIS-mod}" data-i18n="wisdom-abbrv-default" selected>&#8226;WIS</option>
									<option value="@{CHA-mod}" data-i18n="charisma-abbrv">CHA</option>
								</select>
							</span>
							<span class="sheet-table-cell"><input title="@{Profession2-ability-mod}" type="number" name="attr_Profession2-ability-mod" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Profession2-racial}" type="number" name="attr_Profession2-racial" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Profession2-trait}" type="number" name="attr_Profession2-trait" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Profession2-feat}" type="number" name="attr_Profession2-feat" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Profession2-item}" type="number" name="attr_Profession2-item" value="0" /></span>
							<input class="sheet-error-mshow" type="checkbox" value="1" role="status" aria-live="polite" name="attr_Profession2-misc-mod_error" />
							<span class="sheet-table-cell sheet-highlight"><input title="@{Profession2-misc}" type="text" name="attr_Profession2-misc" value="" placeholder="#/Equation" data-i18n-placeholder="equation-macro-place" /></span>
							<span class="sheet-table-cell sheet-highlight"><input title="@{Profession2-misc-mod}" type="number" class="sheet-calc" readonly name="attr_Profession2-misc-mod" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Profession2-class}" type="text" name="attr_Profession2-class" value="0/0/0/0" class="sheet-calc sheet-skill-conds" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Profession2-ReqTrain}" type="checkbox" name="attr_Profession2-ReqTrain" value="1" checked /></span>
							<span class="sheet-table-cell"><textarea class="sheet-skill-macro-text" title="@{Profession2-note}" name="attr_Profession2-note"></textarea></span>
							<span class="sheet-table-cell"><textarea class="sheet-skill-macro-text" title="@{Profession2-macro}" name="attr_Profession2-macro">&{template:pf_generic} @{toggle_accessible_flag} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_generic-skill}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle}} {{name=^{profession} @{Profession2-name}}} {{Check=[[ @{skill-query} + [[ @{Profession2} ]] ]]}} @{Profession2-ut} @{skill_options} @{Profession2-cond-notes} {{generic_note=@{Profession2-note}}}</textarea></span>
						</div>
						<div class="sheet-table-row sheet-profession sheet-bg sheet-custom-skill-3">
							<span class="sheet-table-cell"><button style="font-size:100%;" title="%{selected|Profession3-Check}" type="roll" value="@{PC-Whisper} @{Profession3-macro}" name="roll_Profession3-Check"></button></span>
							<span class="sheet-table-cell"><input title="@{Profession3-cs}" type="checkbox" name="attr_Profession3-cs" value="3" /></span>
							<span class="sheet-table-cell sheet-left"><input title="@{Profession3-name}" style="width:96%;" type="text" name="attr_Profession3-name" placeholder="Profession" data-i18n-placeholder="profession" /></span>
							<span class="sheet-table-cell"><input title="@{Profession3}" type="number" name="attr_Profession3" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Profession3-ranks}" type="number" name="attr_Profession3-ranks" value="0" /></span>
							<span class="sheet-table-cell">
								<select title="@{Profession3-ability}" name="attr_Profession3-ability" class="sheet-select-small">
									<option value="@{STR-mod}" data-i18n="strength-abbrv">STR</option>
									<option value="@{DEX-mod}" data-i18n="dexterity-abbrv">DEX</option>
									<option value="@{CON-mod}" data-i18n="constitution-abbrv">CON</option>
									<option value="@{INT-mod}" data-i18n="intelligence-abbrv">INT</option>
									<option value="@{WIS-mod}" data-i18n="wisdom-abbrv-default" selected>&#8226;WIS</option>
									<option value="@{CHA-mod}" data-i18n="charisma-abbrv">CHA</option>
								</select>
							</span>
							<span class="sheet-table-cell"><input title="@{Profession3-ability-mod}" type="number" name="attr_Profession3-ability-mod" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Profession3-racial}" type="number" name="attr_Profession3-racial" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Profession3-trait}" type="number" name="attr_Profession3-trait" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Profession3-feat}" type="number" name="attr_Profession3-feat" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Profession3-item}" type="number" name="attr_Profession3-item" value="0" /></span>
							<input class="sheet-error-mshow" type="checkbox" value="1" role="status" aria-live="polite" name="attr_Profession3-misc-mod_error" />
							<span class="sheet-table-cell sheet-highlight"><input title="@{Profession3-misc}" type="text" name="attr_Profession3-misc" value="" placeholder="#/Equation" data-i18n-placeholder="equation-macro-place" /></span>
							<span class="sheet-table-cell sheet-highlight"><input title="@{Profession3-misc-mod}" type="number" class="sheet-calc" readonly name="attr_Profession3-misc-mod" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Profession3-class}" type="text" name="attr_Profession3-class" value="0/0/0/0" class="sheet-calc sheet-skill-conds" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Profession3-ReqTrain}" type="checkbox" name="attr_Profession3-ReqTrain" value="1" checked /></span>
							<span class="sheet-table-cell"><textarea class="sheet-skill-macro-text" title="@{Profession3-note}" name="attr_Profession3-note"></textarea></span>
							<span class="sheet-table-cell"><textarea class="sheet-skill-macro-text" title="@{Profession3-macro}" name="attr_Profession3-macro">&{template:pf_generic} @{toggle_accessible_flag} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_generic-skill}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle}} {{name=^{profession} @{Profession3-name}}} {{Check=[[ @{skill-query} + [[ @{Profession3} ]] ]]}} @{Profession3-ut} @{skill_options} @{Profession3-cond-notes} {{generic_note=@{Profession3-note}}}</textarea></span>
						</div>
						<div class="sheet-table-row sheet-profession sheet-bg sheet-custom-skill-6">
							<span class="sheet-table-cell"><button style="font-size:100%;" title="%{selected|Profession4-Check}" type="roll" value="@{PC-Whisper} @{Profession4-macro}" name="roll_Profession4-Check"></button></span>
							<span class="sheet-table-cell"><input title="@{Profession4-cs}" type="checkbox" name="attr_Profession4-cs" value="3" /></span>
							<span class="sheet-table-cell sheet-left"><input title="@{Profession4-name}" style="width:96%;" type="text" name="attr_Profession4-name" placeholder="Profession" data-i18n-placeholder="profession" /></span>
							<span class="sheet-table-cell"><input title="@{Profession4}" type="number" name="attr_Profession4" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Profession4-ranks}" type="number" name="attr_Profession4-ranks" value="0" /></span>
							<span class="sheet-table-cell">
								<select title="@{Profession4-ability}" name="attr_Profession4-ability" class="sheet-select-small">
									<option value="@{STR-mod}" data-i18n="strength-abbrv">STR</option>
									<option value="@{DEX-mod}" data-i18n="dexterity-abbrv">DEX</option>
									<option value="@{CON-mod}" data-i18n="constitution-abbrv">CON</option>
									<option value="@{INT-mod}" data-i18n="intelligence-abbrv">INT</option>
									<option value="@{WIS-mod}" data-i18n="wisdom-abbrv-default" selected>&#8226;WIS</option>
									<option value="@{CHA-mod}" data-i18n="charisma-abbrv">CHA</option>
								</select>
							</span>
							<span class="sheet-table-cell"><input title="@{Profession4-ability-mod}" type="number" name="attr_Profession4-ability-mod" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Profession4-racial}" type="number" name="attr_Profession4-racial" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Profession4-trait}" type="number" name="attr_Profession4-trait" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Profession4-feat}" type="number" name="attr_Profession4-feat" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Profession4-item}" type="number" name="attr_Profession4-item" value="0" /></span>
							<input class="sheet-error-mshow" type="checkbox" value="1" role="status" aria-live="polite" name="attr_Profession4-misc-mod_error" />
							<span class="sheet-table-cell sheet-highlight"><input title="@{Profession4-misc}" type="text" name="attr_Profession4-misc" value="" placeholder="#/Equation" data-i18n-placeholder="equation-macro-place" /></span>
							<span class="sheet-table-cell sheet-highlight"><input title="@{Profession4-misc-mod}" type="number" class="sheet-calc" readonly name="attr_Profession4-misc-mod" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Profession4-class}" type="text" name="attr_Profession4-class" value="0/0/0/0" class="sheet-calc sheet-skill-conds" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Profession4-ReqTrain}" type="checkbox" name="attr_Profession4-ReqTrain" value="1" checked /></span>
							<span class="sheet-table-cell"><textarea class="sheet-skill-macro-text" title="@{Profession4-note}" name="attr_Profession4-note"></textarea></span>
							<span class="sheet-table-cell"><textarea class="sheet-skill-macro-text" title="@{Profession4-macro}" name="attr_Profession4-macro">&{template:pf_generic} @{toggle_accessible_flag} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_generic-skill}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle}} {{name=^{profession} @{Profession4-name}}} {{Check=[[ @{skill-query} + [[ @{Profession4} ]] ]]}} @{Profession4-ut} @{skill_options} @{Profession4-cond-notes} {{generic_note=@{Profession4-note}}}</textarea></span>
						</div>
						<div class="sheet-table-row sheet-profession sheet-bg sheet-custom-skill-6">
							<span class="sheet-table-cell"><button style="font-size:100%;" title="%{selected|Profession5-Check}" type="roll" value="@{PC-Whisper} @{Profession5-macro}" name="roll_Profession5-Check"></button></span>
							<span class="sheet-table-cell"><input title="@{Profession5-cs}" type="checkbox" name="attr_Profession5-cs" value="3" /></span>
							<span class="sheet-table-cell sheet-left"><input title="@{Profession5-name}" style="width:96%;" type="text" name="attr_Profession5-name" placeholder="Profession" data-i18n-placeholder="profession" /></span>
							<span class="sheet-table-cell"><input title="@{Profession5}" type="number" name="attr_Profession5" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Profession5-ranks}" type="number" name="attr_Profession5-ranks" value="0" /></span>
							<span class="sheet-table-cell">
								<select title="@{Profession5-ability}" name="attr_Profession5-ability" class="sheet-select-small">
									<option value="@{STR-mod}" data-i18n="strength-abbrv">STR</option>
									<option value="@{DEX-mod}" data-i18n="dexterity-abbrv">DEX</option>
									<option value="@{CON-mod}" data-i18n="constitution-abbrv">CON</option>
									<option value="@{INT-mod}" data-i18n="intelligence-abbrv">INT</option>
									<option value="@{WIS-mod}" data-i18n="wisdom-abbrv-default" selected>&#8226;WIS</option>
									<option value="@{CHA-mod}" data-i18n="charisma-abbrv">CHA</option>
								</select>
							</span>
							<span class="sheet-table-cell"><input title="@{Profession5-ability-mod}" type="number" name="attr_Profession5-ability-mod" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Profession5-racial}" type="number" name="attr_Profession5-racial" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Profession5-trait}" type="number" name="attr_Profession5-trait" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Profession5-feat}" type="number" name="attr_Profession5-feat" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Profession5-item}" type="number" name="attr_Profession5-item" value="0" /></span>
							<input class="sheet-error-mshow" type="checkbox" value="1" role="status" aria-live="polite" name="attr_Profession5-misc-mod_error" />
							<span class="sheet-table-cell sheet-highlight"><input title="@{Profession5-misc}" type="text" name="attr_Profession5-misc" value="" placeholder="#/Equation" data-i18n-placeholder="equation-macro-place" /></span>
							<span class="sheet-table-cell sheet-highlight"><input title="@{Profession5-misc-mod}" type="number" class="sheet-calc" readonly name="attr_Profession5-misc-mod" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Profession5-class}" type="text" name="attr_Profession5-class" value="0/0/0/0" class="sheet-calc sheet-skill-conds" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Profession5-ReqTrain}" type="checkbox" name="attr_Profession5-ReqTrain" value="1" checked /></span>
							<span class="sheet-table-cell"><textarea class="sheet-skill-macro-text" title="@{Profession5-note}" name="attr_Profession5-note"></textarea></span>
							<span class="sheet-table-cell"><textarea class="sheet-skill-macro-text" title="@{Profession5-macro}" name="attr_Profession5-macro">&{template:pf_generic} @{toggle_accessible_flag} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_generic-skill}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle}} {{name=^{profession} @{Profession5-name}}} {{Check=[[ @{skill-query} + [[ @{Profession5} ]] ]]}} @{Profession5-ut} @{skill_options} @{Profession5-cond-notes} {{generic_note=@{Profession5-note}}}</textarea></span>
						</div>
						<div class="sheet-table-row sheet-profession sheet-bg sheet-custom-skill-6">
							<span class="sheet-table-cell"><button style="font-size:100%;" title="%{selected|Profession6-Check}" type="roll" value="@{PC-Whisper} @{Profession6-macro}" name="roll_Profession6-Check"></button></span>
							<span class="sheet-table-cell"><input title="@{Profession6-cs}" type="checkbox" name="attr_Profession6-cs" value="3" /></span>
							<span class="sheet-table-cell sheet-left"><input title="@{Profession6-name}" style="width:96%;" type="text" name="attr_Profession6-name" placeholder="Profession" data-i18n-placeholder="profession" /></span>
							<span class="sheet-table-cell"><input title="@{Profession6}" type="number" name="attr_Profession6" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Profession6-ranks}" type="number" name="attr_Profession6-ranks" value="0" /></span>
							<span class="sheet-table-cell">
								<select title="@{Profession6-ability}" name="attr_Profession6-ability" class="sheet-select-small">
									<option value="@{STR-mod}" data-i18n="strength-abbrv">STR</option>
									<option value="@{DEX-mod}" data-i18n="dexterity-abbrv">DEX</option>
									<option value="@{CON-mod}" data-i18n="constitution-abbrv">CON</option>
									<option value="@{INT-mod}" data-i18n="intelligence-abbrv">INT</option>
									<option value="@{WIS-mod}" data-i18n="wisdom-abbrv-default" selected>&#8226;WIS</option>
									<option value="@{CHA-mod}" data-i18n="charisma-abbrv">CHA</option>
								</select>
							</span>
							<span class="sheet-table-cell"><input title="@{Profession6-ability-mod}" type="number" name="attr_Profession6-ability-mod" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Profession6-racial}" type="number" name="attr_Profession6-racial" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Profession6-trait}" type="number" name="attr_Profession6-trait" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Profession6-feat}" type="number" name="attr_Profession6-feat" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Profession6-item}" type="number" name="attr_Profession6-item" value="0" /></span>
							<input class="sheet-error-mshow" type="checkbox" value="1" role="status" aria-live="polite" name="attr_Profession6-misc-mod_error" />
							<span class="sheet-table-cell sheet-highlight"><input title="@{Profession6-misc}" type="text" name="attr_Profession6-misc" value="" placeholder="#/Equation" data-i18n-placeholder="equation-macro-place" /></span>
							<span class="sheet-table-cell sheet-highlight"><input title="@{Profession6-misc-mod}" type="number" class="sheet-calc" readonly name="attr_Profession6-misc-mod" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Profession6-class}" type="text" name="attr_Profession6-class" value="0/0/0/0" class="sheet-calc sheet-skill-conds" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Profession6-ReqTrain}" type="checkbox" name="attr_Profession6-ReqTrain" value="1" checked /></span>
							<span class="sheet-table-cell"><textarea class="sheet-skill-macro-text" title="@{Profession6-note}" name="attr_Profession6-note"></textarea></span>
							<span class="sheet-table-cell"><textarea class="sheet-skill-macro-text" title="@{Profession6-macro}" name="attr_Profession6-macro">&{template:pf_generic} @{toggle_accessible_flag} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_generic-skill}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle}} {{name=^{profession} @{Profession6-name}}} {{Check=[[ @{skill-query} + [[ @{Profession6} ]] ]]}} @{Profession6-ut} @{skill_options} @{Profession6-cond-notes} {{generic_note=@{Profession6-note}}}</textarea></span>
						</div>
						<div class="sheet-table-row sheet-profession sheet-bg sheet-custom-skill-10">
							<span class="sheet-table-cell"><button style="font-size:100%;" title="%{selected|Profession7-Check}" type="roll" value="@{PC-Whisper} @{Profession7-macro}" name="roll_Profession7-Check"></button></span>
							<span class="sheet-table-cell"><input title="@{Profession7-cs}" type="checkbox" name="attr_Profession7-cs" value="3" /></span>
							<span class="sheet-table-cell sheet-left"><input title="@{Profession7-name}" style="width:96%;" type="text" name="attr_Profession7-name" placeholder="Profession" data-i18n-placeholder="profession" /></span>
							<span class="sheet-table-cell"><input title="@{Profession7}" type="number" name="attr_Profession7" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Profession7-ranks}" type="number" name="attr_Profession7-ranks" value="0" /></span>
							<span class="sheet-table-cell">
								<select title="@{Profession7-ability}" name="attr_Profession7-ability" class="sheet-select-small">
									<option value="@{STR-mod}" data-i18n="strength-abbrv">STR</option>
									<option value="@{DEX-mod}" data-i18n="dexterity-abbrv">DEX</option>
									<option value="@{CON-mod}" data-i18n="constitution-abbrv">CON</option>
									<option value="@{INT-mod}" data-i18n="intelligence-abbrv">INT</option>
									<option value="@{WIS-mod}" data-i18n="wisdom-abbrv-default" selected>&#8226;WIS</option>
									<option value="@{CHA-mod}" data-i18n="charisma-abbrv">CHA</option>
								</select>
							</span>
							<span class="sheet-table-cell"><input title="@{Profession7-ability-mod}" type="number" name="attr_Profession7-ability-mod" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Profession7-racial}" type="number" name="attr_Profession7-racial" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Profession7-trait}" type="number" name="attr_Profession7-trait" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Profession7-feat}" type="number" name="attr_Profession7-feat" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Profession7-item}" type="number" name="attr_Profession7-item" value="0" /></span>
							<input class="sheet-error-mshow" type="checkbox" value="1" role="status" aria-live="polite" name="attr_Profession7-misc-mod_error" />
							<span class="sheet-table-cell sheet-highlight"><input title="@{Profession7-misc}" type="text" name="attr_Profession7-misc" value="" placeholder="#/Equation" data-i18n-placeholder="equation-macro-place" /></span>
							<span class="sheet-table-cell sheet-highlight"><input title="@{Profession7-misc-mod}" type="number" class="sheet-calc" readonly name="attr_Profession7-misc-mod" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Profession7-class}" type="text" name="attr_Profession7-class" value="0/0/0/0" class="sheet-calc sheet-skill-conds" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Profession7-ReqTrain}" type="checkbox" name="attr_Profession7-ReqTrain" value="1" checked /></span>
							<span class="sheet-table-cell"><textarea class="sheet-skill-macro-text" title="@{Profession7-note}" name="attr_Profession7-note"></textarea></span>
							<span class="sheet-table-cell"><textarea class="sheet-skill-macro-text" title="@{Profession7-macro}" name="attr_Profession7-macro">&{template:pf_generic} @{toggle_accessible_flag} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_generic-skill}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle}} {{name=^{profession} @{Profession7-name}}} {{Check=[[ @{skill-query} + [[ @{Profession7} ]] ]]}} @{Profession7-ut} @{skill_options} @{Profession7-cond-notes} {{generic_note=@{Profession7-note}}}</textarea></span>
						</div>
						<div class="sheet-table-row sheet-profession sheet-bg sheet-custom-skill-10">
							<span class="sheet-table-cell"><button style="font-size:100%;" title="%{selected|Profession8-Check}" type="roll" value="@{PC-Whisper} @{Profession8-macro}" name="roll_Profession8-Check"></button></span>
							<span class="sheet-table-cell"><input title="@{Profession8-cs}" type="checkbox" name="attr_Profession8-cs" value="3" /></span>
							<span class="sheet-table-cell sheet-left"><input title="@{Profession8-name}" style="width:96%;" type="text" name="attr_Profession8-name" placeholder="Profession" data-i18n-placeholder="profession" /></span>
							<span class="sheet-table-cell"><input title="@{Profession8}" type="number" name="attr_Profession8" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Profession8-ranks}" type="number" name="attr_Profession8-ranks" value="0" /></span>
							<span class="sheet-table-cell">
								<select title="@{Profession8-ability}" name="attr_Profession8-ability" class="sheet-select-small">
									<option value="@{STR-mod}" data-i18n="strength-abbrv">STR</option>
									<option value="@{DEX-mod}" data-i18n="dexterity-abbrv">DEX</option>
									<option value="@{CON-mod}" data-i18n="constitution-abbrv">CON</option>
									<option value="@{INT-mod}" data-i18n="intelligence-abbrv">INT</option>
									<option value="@{WIS-mod}" data-i18n="wisdom-abbrv-default" selected>&#8226;WIS</option>
									<option value="@{CHA-mod}" data-i18n="charisma-abbrv">CHA</option>
								</select>
							</span>
							<span class="sheet-table-cell"><input title="@{Profession8-ability-mod}" type="number" name="attr_Profession8-ability-mod" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Profession8-racial}" type="number" name="attr_Profession8-racial" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Profession8-trait}" type="number" name="attr_Profession8-trait" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Profession8-feat}" type="number" name="attr_Profession8-feat" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Profession8-item}" type="number" name="attr_Profession8-item" value="0" /></span>
							<input class="sheet-error-mshow" type="checkbox" value="1" role="status" aria-live="polite" name="attr_Profession8-misc-mod_error" />
							<span class="sheet-table-cell sheet-highlight"><input title="@{Profession8-misc}" type="text" name="attr_Profession8-misc" value="" placeholder="#/Equation" data-i18n-placeholder="equation-macro-place" /></span>
							<span class="sheet-table-cell sheet-highlight"><input title="@{Profession8-misc-mod}" type="number" class="sheet-calc" readonly name="attr_Profession8-misc-mod" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Profession8-class}" type="text" name="attr_Profession8-class" value="0/0/0/0" class="sheet-calc sheet-skill-conds" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Profession8-ReqTrain}" type="checkbox" name="attr_Profession8-ReqTrain" value="1" checked /></span>
							<span class="sheet-table-cell"><textarea class="sheet-skill-macro-text" title="@{Profession8-note}" name="attr_Profession8-note"></textarea></span>
							<span class="sheet-table-cell"><textarea class="sheet-skill-macro-text" title="@{Profession8-macro}" name="attr_Profession8-macro">&{template:pf_generic} @{toggle_accessible_flag} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_generic-skill}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle}} {{name=^{profession} @{Profession8-name}}} {{Check=[[ @{skill-query} + [[ @{Profession8} ]] ]]}} @{Profession8-ut} @{skill_options} @{Profession8-cond-notes} {{generic_note=@{Profession8-note}}}</textarea></span>
						</div>
						<div class="sheet-table-row sheet-profession sheet-bg sheet-custom-skill-10">
							<span class="sheet-table-cell"><button style="font-size:100%;" title="%{selected|Profession9-Check}" type="roll" value="@{PC-Whisper} @{Profession9-macro}" name="roll_Profession9-Check"></button></span>
							<span class="sheet-table-cell"><input title="@{Profession9-cs}" type="checkbox" name="attr_Profession9-cs" value="3" /></span>
							<span class="sheet-table-cell sheet-left"><input title="@{Profession9-name}" style="width:96%;" type="text" name="attr_Profession9-name" placeholder="Profession" data-i18n-placeholder="profession" /></span>
							<span class="sheet-table-cell"><input title="@{Profession9}" type="number" name="attr_Profession9" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Profession9-ranks}" type="number" name="attr_Profession9-ranks" value="0" /></span>
							<span class="sheet-table-cell">
								<select title="@{Profession9-ability}" name="attr_Profession9-ability" class="sheet-select-small">
									<option value="@{STR-mod}" data-i18n="strength-abbrv">STR</option>
									<option value="@{DEX-mod}" data-i18n="dexterity-abbrv">DEX</option>
									<option value="@{CON-mod}" data-i18n="constitution-abbrv">CON</option>
									<option value="@{INT-mod}" data-i18n="intelligence-abbrv">INT</option>
									<option value="@{WIS-mod}" data-i18n="wisdom-abbrv-default" selected>&#8226;WIS</option>
									<option value="@{CHA-mod}" data-i18n="charisma-abbrv">CHA</option>
								</select>
							</span>
							<span class="sheet-table-cell"><input title="@{Profession9-ability-mod}" type="number" name="attr_Profession9-ability-mod" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Profession9-racial}" type="number" name="attr_Profession9-racial" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Profession9-trait}" type="number" name="attr_Profession9-trait" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Profession9-feat}" type="number" name="attr_Profession9-feat" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Profession9-item}" type="number" name="attr_Profession9-item" value="0" /></span>
							<input class="sheet-error-mshow" type="checkbox" value="1" role="status" aria-live="polite" name="attr_Profession9-misc-mod_error" />
							<span class="sheet-table-cell sheet-highlight"><input title="@{Profession9-misc}" type="text" name="attr_Profession9-misc" value="" placeholder="#/Equation" data-i18n-placeholder="equation-macro-place" /></span>
							<span class="sheet-table-cell sheet-highlight"><input title="@{Profession9-misc-mod}" type="number" class="sheet-calc" readonly name="attr_Profession9-misc-mod" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Profession9-class}" type="text" name="attr_Profession9-class" value="0/0/0/0" class="sheet-calc sheet-skill-conds" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Profession9-ReqTrain}" type="checkbox" name="attr_Profession9-ReqTrain" value="1" checked /></span>
							<span class="sheet-table-cell"><textarea class="sheet-skill-macro-text" title="@{Profession9-note}" name="attr_Profession9-note"></textarea></span>
							<span class="sheet-table-cell"><textarea class="sheet-skill-macro-text" title="@{Profession9-macro}" name="attr_Profession9-macro">&{template:pf_generic} @{toggle_accessible_flag} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_generic-skill}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle}} {{name=^{profession} @{Profession9-name}}} {{Check=[[ @{skill-query} + [[ @{Profession9} ]] ]]}} @{Profession9-ut} @{skill_options} @{Profession9-cond-notes} {{generic_note=@{Profession9-note}}}</textarea></span>
						</div>
						<div class="sheet-table-row sheet-profession sheet-bg sheet-custom-skill-10">
							<span class="sheet-table-cell"><button style="font-size:100%;" title="%{selected|Profession10-Check}" type="roll" value="@{PC-Whisper} @{Profession10-macro}" name="roll_Profession10-Check"></button></span>
							<span class="sheet-table-cell"><input title="@{Profession10-cs}" type="checkbox" name="attr_Profession10-cs" value="3" /></span>
							<span class="sheet-table-cell sheet-left"><input title="@{Profession10-name}" style="width:96%;" type="text" name="attr_Profession10-name" placeholder="Profession" data-i18n-placeholder="profession" /></span>
							<span class="sheet-table-cell"><input title="@{Profession10}" type="number" name="attr_Profession10" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Profession10-ranks}" type="number" name="attr_Profession10-ranks" value="0" /></span>
							<span class="sheet-table-cell">
								<select title="@{Profession10-ability}" name="attr_Profession10-ability" class="sheet-select-small">
									<option value="@{STR-mod}" data-i18n="strength-abbrv">STR</option>
									<option value="@{DEX-mod}" data-i18n="dexterity-abbrv">DEX</option>
									<option value="@{CON-mod}" data-i18n="constitution-abbrv">CON</option>
									<option value="@{INT-mod}" data-i18n="intelligence-abbrv">INT</option>
									<option value="@{WIS-mod}" data-i18n="wisdom-abbrv-default" selected>&#8226;WIS</option>
									<option value="@{CHA-mod}" data-i18n="charisma-abbrv">CHA</option>
								</select>
							</span>
							<span class="sheet-table-cell"><input title="@{Profession10-ability-mod}" type="number" name="attr_Profession10-ability-mod" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Profession10-racial}" type="number" name="attr_Profession10-racial" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Profession10-trait}" type="number" name="attr_Profession10-trait" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Profession10-feat}" type="number" name="attr_Profession10-feat" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Profession10-item}" type="number" name="attr_Profession10-item" value="0" /></span>
							<input class="sheet-error-mshow" type="checkbox" value="1" role="status" aria-live="polite" name="attr_Profession10-misc-mod_error" />
							<span class="sheet-table-cell sheet-highlight"><input title="@{Profession10-misc}" type="text" name="attr_Profession10-misc" value="" placeholder="#/Equation" data-i18n-placeholder="equation-macro-place" /></span>
							<span class="sheet-table-cell sheet-highlight"><input title="@{Profession10-misc-mod}" type="number" class="sheet-calc" readonly name="attr_Profession10-misc-mod" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Profession10-class}" type="text" name="attr_Profession10-class" value="0/0/0/0" class="sheet-calc sheet-skill-conds" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Profession10-ReqTrain}" type="checkbox" name="attr_Profession10-ReqTrain" value="1" checked /></span>
							<span class="sheet-table-cell"><textarea class="sheet-skill-macro-text" title="@{Profession10-note}" name="attr_Profession10-note"></textarea></span>
							<span class="sheet-table-cell"><textarea class="sheet-skill-macro-text" title="@{Profession10-macro}" name="attr_Profession10-macro">&{template:pf_generic} @{toggle_accessible_flag} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_generic-skill}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle}} {{name=^{profession} @{Profession10-name}}} {{Check=[[ @{skill-query} + [[ @{Profession10} ]] ]]}} @{Profession10-ut} @{skill_options} @{Profession10-cond-notes} {{generic_note=@{Profession10-note}}}</textarea></span>
						</div>
						<div class="sheet-table-row sheet-adventure">
							<span class="sheet-table-cell"><button style="font-size:100%;" title="%{selected|Ride-Check}" type="roll" value="@{PC-Whisper} @{Ride-macro}" name="roll_Ride-Check"></button></span>
							<span class="sheet-table-cell"><input title="@{Ride-cs}" type="checkbox" name="attr_Ride-cs" value="3" /></span>
							<span class="sheet-table-cell sheet-left" data-i18n="ride">Ride</span>
							<span class="sheet-table-cell"><input title="@{Ride}" type="number" name="attr_Ride" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Ride-ranks}" type="number" name="attr_Ride-ranks" value="0" /></span>
							<span class="sheet-table-cell">
								<select title="@{Ride-ability}" name="attr_Ride-ability" class="sheet-select-small">
									<option value="@{STR-mod}" data-i18n="strength-abbrv">STR</option>
									<option value="@{DEX-mod}" data-i18n="dexterity-abbrv-default" selected>&#8226;DEX</option>
									<option value="@{CON-mod}" data-i18n="constitution-abbrv">CON</option>
									<option value="@{INT-mod}" data-i18n="intelligence-abbrv">INT</option>
									<option value="@{WIS-mod}" data-i18n="wisdom-abbrv">WIS</option>
									<option value="@{CHA-mod}" data-i18n="charisma-abbrv">CHA</option>
								</select>
							</span>
							<span class="sheet-table-cell"><input title="@{Ride-ability-mod}" type="number" name="attr_Ride-ability-mod" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Ride-racial}" type="number" name="attr_Ride-racial" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Ride-trait}" type="number" name="attr_Ride-trait" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Ride-feat}" type="number" name="attr_Ride-feat" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Ride-item}" type="number" name="attr_Ride-item" value="0" /></span>
							<input class="sheet-error-mshow" type="checkbox" value="1" role="status" aria-live="polite" name="attr_Ride-misc-mod_error" />
							<span class="sheet-table-cell sheet-highlight"><input title="@{Ride-misc}" type="text" name="attr_Ride-misc" value="" placeholder="#/Equation" data-i18n-placeholder="equation-macro-place" /></span>
							<span class="sheet-table-cell sheet-highlight"><input title="@{Ride-misc-mod}" type="number" class="sheet-calc" readonly name="attr_Ride-misc-mod" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Ride-class}" type="text" name="attr_Ride-class" value="0/0/0/0" class="sheet-calc sheet-skill-conds" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Ride-ReqTrain}" type="checkbox" name="attr_Ride-ReqTrain" value="1" /></span>
							<span class="sheet-table-cell"><textarea class="sheet-skill-macro-text" title="@{Ride-note}" name="attr_Ride-note"></textarea></span>
							<span class="sheet-table-cell"><textarea class="sheet-skill-macro-text" title="@{Ride-macro}" name="attr_Ride-macro">&{template:pf_generic} @{toggle_accessible_flag} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_generic-skill}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle}} {{name=^{ride}}} {{Check=[[ @{skill-query} + [[ @{Ride} ]] ]]}} @{Ride-ut} @{skill_options} @{Ride-cond-notes} {{generic_note=@{Ride-note}}}</textarea></span>
						</div>
						<div class="sheet-table-row sheet-adventure">
							<span class="sheet-table-cell"><button style="font-size:100%;" title="%{selected|Sense-Motive-Check}" type="roll" value="@{PC-Whisper} @{Sense-Motive-macro}" name="roll_Sense-Motive-Check"></button></span>
							<span class="sheet-table-cell"><input title="@{Sense-Motive-cs}" type="checkbox" name="attr_Sense-Motive-cs" value="3" /></span>
							<span class="sheet-table-cell sheet-left" data-i18n="sense-motive">Sense-Motive</span>
							<span class="sheet-table-cell"><input title="@{Sense-Motive}" type="number" name="attr_Sense-Motive" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Sense-Motive-ranks}" type="number" name="attr_Sense-Motive-ranks" value="0" /></span>
							<span class="sheet-table-cell">
								<select title="@{Sense-Motive-ability}" name="attr_Sense-Motive-ability" class="sheet-select-small">
									<option value="@{STR-mod}" data-i18n="strength-abbrv">STR</option>
									<option value="@{DEX-mod}" data-i18n="dexterity-abbrv">DEX</option>
									<option value="@{CON-mod}" data-i18n="constitution-abbrv">CON</option>
									<option value="@{INT-mod}" data-i18n="intelligence-abbrv">INT</option>
									<option value="@{WIS-mod}" data-i18n="wisdom-abbrv-default" selected>&#8226;WIS</option>
									<option value="@{CHA-mod}" data-i18n="charisma-abbrv">CHA</option>
								</select>
							</span>
							<span class="sheet-table-cell"><input title="@{Sense-Motive-ability-mod}" type="number" name="attr_Sense-Motive-ability-mod" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Sense-Motive-racial}" type="number" name="attr_Sense-Motive-racial" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Sense-Motive-trait}" type="number" name="attr_Sense-Motive-trait" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Sense-Motive-feat}" type="number" name="attr_Sense-Motive-feat" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Sense-Motive-item}" type="number" name="attr_Sense-Motive-item" value="0" /></span>
							<input class="sheet-error-mshow" type="checkbox" value="1" role="status" aria-live="polite" name="attr_Sense-Motive-misc-mod_error" />
							<span class="sheet-table-cell sheet-highlight"><input title="@{Sense-Motive-misc}" type="text" name="attr_Sense-Motive-misc" value="" placeholder="#/Equation" data-i18n-placeholder="equation-macro-place" /></span>
							<span class="sheet-table-cell sheet-highlight"><input title="@{Sense-Motive-misc-mod}" type="number" class="sheet-calc" readonly name="attr_Sense-Motive-misc-mod" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Sense-Motive-class}" type="text" name="attr_Sense-Motive-class" value="0/0/0/0" class="sheet-calc sheet-skill-conds" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Sense-Motive-ReqTrain}" type="checkbox" name="attr_Sense-Motive-ReqTrain" value="1" /></span>
							<span class="sheet-table-cell"><textarea class="sheet-skill-macro-text" title="@{Sense-Motive-note}" name="attr_Sense-Motive-note"></textarea></span>
							<span class="sheet-table-cell"><textarea class="sheet-skill-macro-text" title="@{Sense-Motive-macro}" name="attr_Sense-Motive-macro">&{template:pf_generic} @{toggle_accessible_flag} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_generic-skill}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle}} {{name=^{sense-motive}}} {{Check=[[ @{skill-query} + [[ @{Sense-Motive} ]] ]]}} @{Sense-Motive-ut} @{skill_options} @{Sense-Motive-cond-notes} {{generic_note=@{Sense-Motive-note}}}</textarea></span>
						</div>
						<div class="sheet-table-row sheet-bg">
							<span class="sheet-table-cell"><button style="font-size:100%;" title="%{selected|Sleight-of-Hand-Check}" type="roll" value="@{PC-Whisper} @{Sleight-of-Hand-macro}" name="roll_Sleight-of-Hand-Check"></button></span>
							<span class="sheet-table-cell"><input title="@{Sleight-of-Hand-cs}" type="checkbox" name="attr_Sleight-of-Hand-cs" value="3" /></span>
							<span class="sheet-table-cell sheet-left" data-i18n="sleight-of-hand">Sleight-of-Hand</span>
							<span class="sheet-table-cell"><input title="@{Sleight-of-Hand}" type="number" name="attr_Sleight-of-Hand" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Sleight-of-Hand-ranks}" type="number" name="attr_Sleight-of-Hand-ranks" value="0" /></span>
							<span class="sheet-table-cell">
								<select title="@{Sleight-of-Hand-ability}" name="attr_Sleight-of-Hand-ability" class="sheet-select-small">
									<option value="@{STR-mod}" data-i18n="strength-abbrv">STR</option>
									<option value="@{DEX-mod}" data-i18n="dexterity-abbrv-default" selected>&#8226;DEX</option>
									<option value="@{CON-mod}" data-i18n="constitution-abbrv">CON</option>
									<option value="@{INT-mod}" data-i18n="intelligence-abbrv">INT</option>
									<option value="@{WIS-mod}" data-i18n="wisdom-abbrv">WIS</option>
									<option value="@{CHA-mod}" data-i18n="charisma-abbrv">CHA</option>
								</select>
							</span>
							<span class="sheet-table-cell"><input title="@{Sleight-of-Hand-ability-mod}" type="number" name="attr_Sleight-of-Hand-ability-mod" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Sleight-of-Hand-racial}" type="number" name="attr_Sleight-of-Hand-racial" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Sleight-of-Hand-trait}" type="number" name="attr_Sleight-of-Hand-trait" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Sleight-of-Hand-feat}" type="number" name="attr_Sleight-of-Hand-feat" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Sleight-of-Hand-item}" type="number" name="attr_Sleight-of-Hand-item" value="0" /></span>
							<input class="sheet-error-mshow" type="checkbox" value="1" role="status" aria-live="polite" name="attr_Sleight-of-Hand-misc-mod_error" />
							<span class="sheet-table-cell sheet-highlight"><input title="@{Sleight-of-Hand-misc}" type="text" name="attr_Sleight-of-Hand-misc" value="" placeholder="#/Equation" data-i18n-placeholder="equation-macro-place" /></span>
							<span class="sheet-table-cell sheet-highlight"><input title="@{Sleight-of-Hand-misc-mod}" type="number" class="sheet-calc" readonly name="attr_Sleight-of-Hand-misc-mod" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Sleight-of-Hand-class}" type="text" name="attr_Sleight-of-Hand-class" value="0/0/0/0" class="sheet-calc sheet-skill-conds" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Sleight-of-Hand-ReqTrain}" type="checkbox" name="attr_Sleight-of-Hand-ReqTrain" value="1" checked /></span>
							<span class="sheet-table-cell"><textarea class="sheet-skill-macro-text" title="@{Sleight-of-Hand-note}" name="attr_Sleight-of-Hand-note"></textarea></span>
							<span class="sheet-table-cell"><textarea class="sheet-skill-macro-text" title="@{Sleight-of-Hand-macro}" name="attr_Sleight-of-Hand-macro">&{template:pf_generic} @{toggle_accessible_flag} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_generic-skill}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle}} {{name=^{sleight-of-hand}}} {{Check=[[ @{skill-query} + [[ @{Sleight-of-Hand} ]] ]]}} @{Sleight-of-Hand-ut} @{skill_options} @{Sleight-of-Hand-cond-notes} {{generic_note=@{Sleight-of-Hand-note}}}</textarea></span>
						</div>
						<div class="sheet-table-row sheet-adventure">
							<span class="sheet-table-cell"><button style="font-size:100%;" title="%{selected|Spellcraft-Check}" type="roll" value="@{PC-Whisper} @{Spellcraft-macro}" name="roll_Spellcraft-Check"></button></span>
							<span class="sheet-table-cell"><input title="@{Spellcraft-cs}" type="checkbox" name="attr_Spellcraft-cs" value="3" /></span>
							<span class="sheet-table-cell sheet-left" data-i18n="spellcraft">Spellcraft</span>
							<span class="sheet-table-cell"><input title="@{Spellcraft}" type="number" name="attr_Spellcraft" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Spellcraft-ranks}" type="number" name="attr_Spellcraft-ranks" value="0" /></span>
							<span class="sheet-table-cell">
								<select title="@{Spellcraft-ability}" name="attr_Spellcraft-ability" class="sheet-select-small">
									<option value="@{STR-mod}" data-i18n="strength-abbrv">STR</option>
									<option value="@{DEX-mod}" data-i18n="dexterity-abbrv">DEX</option>
									<option value="@{CON-mod}" data-i18n="constitution-abbrv">CON</option>
									<option value="@{INT-mod}" data-i18n="intelligence-abbrv-default" selected>&#8226;INT</option>
									<option value="@{WIS-mod}" data-i18n="wisdom-abbrv">WIS</option>
									<option value="@{CHA-mod}" data-i18n="charisma-abbrv">CHA</option>
								</select>
							</span>
							<span class="sheet-table-cell"><input title="@{Spellcraft-ability-mod}" type="number" name="attr_Spellcraft-ability-mod" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Spellcraft-racial}" type="number" name="attr_Spellcraft-racial" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Spellcraft-trait}" type="number" name="attr_Spellcraft-trait" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Spellcraft-feat}" type="number" name="attr_Spellcraft-feat" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Spellcraft-item}" type="number" name="attr_Spellcraft-item" value="0" /></span>
							<input class="sheet-error-mshow" type="checkbox" value="1" role="status" aria-live="polite" name="attr_Spellcraft-misc-mod_error" />
							<span class="sheet-table-cell sheet-highlight"><input title="@{Spellcraft-misc}" type="text" name="attr_Spellcraft-misc" value="" placeholder="#/Equation" data-i18n-placeholder="equation-macro-place" /></span>
							<span class="sheet-table-cell sheet-highlight"><input title="@{Spellcraft-misc-mod}" type="number" class="sheet-calc" readonly name="attr_Spellcraft-misc-mod" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Spellcraft-class}" type="text" name="attr_Spellcraft-class" value="0/0/0/0" class="sheet-calc sheet-skill-conds" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Spellcraft-ReqTrain}" type="checkbox" name="attr_Spellcraft-ReqTrain" value="1" checked /></span>
							<span class="sheet-table-cell"><textarea class="sheet-skill-macro-text" title="@{Spellcraft-note}" name="attr_Spellcraft-note"></textarea></span>
							<span class="sheet-table-cell"><textarea class="sheet-skill-macro-text" title="@{Spellcraft-macro}" name="attr_Spellcraft-macro">&{template:pf_generic} @{toggle_accessible_flag} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_generic-skill}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle}} {{name=^{spellcraft}}} {{Check=[[ @{skill-query} + [[ @{Spellcraft} ]] ]]}} @{Spellcraft-ut} @{skill_options} @{Spellcraft-cond-notes} {{generic_note=@{Spellcraft-note}}}</textarea></span>
						</div>
						<div class="sheet-table-row sheet-adventure">
							<span class="sheet-table-cell"><button style="font-size:100%;" title="%{selected|Stealth-Check}" type="roll" value="@{PC-Whisper} @{Stealth-macro}" name="roll_Stealth-Check"></button></span>
							<span class="sheet-table-cell"><input title="@{Stealth-cs}" type="checkbox" name="attr_Stealth-cs" value="3" /></span>
							<span class="sheet-table-cell sheet-left" data-i18n="stealth">Stealth</span>
							<span class="sheet-table-cell"><input title="@{Stealth}" type="number" name="attr_Stealth" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Stealth-ranks}" type="number" name="attr_Stealth-ranks" value="0" /></span>
							<span class="sheet-table-cell">
								<select title="@{Stealth-ability}" name="attr_Stealth-ability" class="sheet-select-small">
									<option value="@{STR-mod}" data-i18n="strength-abbrv">STR</option>
									<option value="@{DEX-mod}" data-i18n="dexterity-abbrv-default" selected>&#8226;DEX</option>
									<option value="@{CON-mod}" data-i18n="constitution-abbrv">CON</option>
									<option value="@{INT-mod}" data-i18n="intelligence-abbrv">INT</option>
									<option value="@{WIS-mod}" data-i18n="wisdom-abbrv">WIS</option>
									<option value="@{CHA-mod}" data-i18n="charisma-abbrv">CHA</option>
								</select>
							</span>
							<span class="sheet-table-cell"><input title="@{Stealth-ability-mod}" type="number" name="attr_Stealth-ability-mod" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Stealth-racial}" type="number" name="attr_Stealth-racial" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Stealth-trait}" type="number" name="attr_Stealth-trait" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Stealth-feat}" type="number" name="attr_Stealth-feat" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Stealth-item}" type="number" name="attr_Stealth-item" value="0" /></span>
							<input class="sheet-error-mshow" type="checkbox" value="1" role="status" aria-live="polite" name="attr_Stealth-misc-mod_error" />
							<span class="sheet-table-cell sheet-highlight"><input title="@{Stealth-misc}" type="text" name="attr_Stealth-misc" value="" placeholder="#/Equation" data-i18n-placeholder="equation-macro-place" /></span>
							<span class="sheet-table-cell sheet-highlight"><input title="@{Stealth-misc-mod}" type="number" class="sheet-calc" readonly name="attr_Stealth-misc-mod" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Stealth-class}" type="text" name="attr_Stealth-class" value="0/0/0/0" class="sheet-calc sheet-skill-conds" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Stealth-ReqTrain}" type="checkbox" name="attr_Stealth-ReqTrain" value="1" /></span>
							<span class="sheet-table-cell"><textarea class="sheet-skill-macro-text" title="@{Stealth-note}" name="attr_Stealth-note"></textarea></span>
							<span class="sheet-table-cell"><textarea class="sheet-skill-macro-text" title="@{Stealth-macro}" name="attr_Stealth-macro">&{template:pf_generic} @{toggle_accessible_flag} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_generic-skill}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle}} {{name=^{stealth}}} {{Check=[[ @{skill-query} + [[ @{Stealth} ]] ]]}} @{Stealth-ut} @{skill_options} @{Stealth-cond-notes} {{generic_note=@{Stealth-note}}}</textarea></span>
						</div>
						<div class="sheet-table-row sheet-adventure">
							<span class="sheet-table-cell"><button style="font-size:100%;" title="%{selected|Survival-Check}" type="roll" value="@{PC-Whisper} @{Survival-macro}" name="roll_Survival-Check"></button></span>
							<span class="sheet-table-cell"><input title="@{Survival-cs}" type="checkbox" name="attr_Survival-cs" value="3" /></span>
							<span class="sheet-table-cell sheet-left" data-i18n="survival">Survival</span>
							<span class="sheet-table-cell"><input title="@{Survival}" type="number" name="attr_Survival" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Survival-ranks}" type="number" name="attr_Survival-ranks" value="0" /></span>
							<span class="sheet-table-cell">
								<select title="@{Survival-ability}" name="attr_Survival-ability" class="sheet-select-small">
									<option value="@{STR-mod}" data-i18n="strength-abbrv">STR</option>
									<option value="@{DEX-mod}" data-i18n="dexterity-abbrv">DEX</option>
									<option value="@{CON-mod}" data-i18n="constitution-abbrv">CON</option>
									<option value="@{INT-mod}" data-i18n="intelligence-abbrv">INT</option>
									<option value="@{WIS-mod}" data-i18n="wisdom-abbrv-default" selected>&#8226;WIS</option>
									<option value="@{CHA-mod}" data-i18n="charisma-abbrv">CHA</option>
								</select>
							</span>
							<span class="sheet-table-cell"><input title="@{Survival-ability-mod}" type="number" name="attr_Survival-ability-mod" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Survival-racial}" type="number" name="attr_Survival-racial" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Survival-trait}" type="number" name="attr_Survival-trait" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Survival-feat}" type="number" name="attr_Survival-feat" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Survival-item}" type="number" name="attr_Survival-item" value="0" /></span>
							<input class="sheet-error-mshow" type="checkbox" value="1" role="status" aria-live="polite" name="attr_Survival-misc-mod_error" />
							<span class="sheet-table-cell sheet-highlight"><input title="@{Survival-misc}" type="text" name="attr_Survival-misc" value="" placeholder="#/Equation" data-i18n-placeholder="equation-macro-place" /></span>
							<span class="sheet-table-cell sheet-highlight"><input title="@{Survival-misc-mod}" type="number" class="sheet-calc" readonly name="attr_Survival-misc-mod" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Survival-class}" type="text" name="attr_Survival-class" value="0/0/0/0" class="sheet-calc sheet-skill-conds" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Survival-ReqTrain}" type="checkbox" name="attr_Survival-ReqTrain" value="1" /></span>
							<span class="sheet-table-cell"><textarea class="sheet-skill-macro-text" title="@{Survival-note}" name="attr_Survival-note"></textarea></span>
							<span class="sheet-table-cell"><textarea class="sheet-skill-macro-text" title="@{Survival-macro}" name="attr_Survival-macro">&{template:pf_generic} @{toggle_accessible_flag} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_generic-skill}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle}} {{name=^{survival}}} {{Check=[[ @{skill-query} + [[ @{Survival} ]] ]]}} @{Survival-ut} @{skill_options} @{Survival-cond-notes} {{generic_note=@{Survival-note}}}</textarea></span>
						</div>
						<div class="sheet-table-row sheet-adventure">
							<span class="sheet-table-cell"><button style="font-size:100%;" title="%{selected|Swim-Check}" type="roll" value="@{PC-Whisper} @{Swim-macro}" name="roll_Swim-Check"></button></span>
							<span class="sheet-table-cell"><input title="@{Swim-cs}" type="checkbox" name="attr_Swim-cs" value="3" /></span>
							<span class="sheet-table-cell sheet-left" data-i18n="swim">Swim</span>
							<span class="sheet-table-cell"><input title="@{Swim}" type="number" name="attr_Swim" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Swim-ranks}" type="number" name="attr_Swim-ranks" value="0" /></span>
							<span class="sheet-table-cell">
								<select title="@{Swim-ability}" name="attr_Swim-ability" class="sheet-select-small">
									<option value="@{STR-mod}" data-i18n="strength-abbrv-default" selected>&#8226;STR</option>
									<option value="@{DEX-mod}" data-i18n="dexterity-abbrv">DEX</option>
									<option value="@{CON-mod}" data-i18n="constitution-abbrv">CON</option>
									<option value="@{INT-mod}" data-i18n="intelligence-abbrv">INT</option>
									<option value="@{WIS-mod}" data-i18n="wisdom-abbrv">WIS</option>
									<option value="@{CHA-mod}" data-i18n="charisma-abbrv">CHA</option>
								</select>
							</span>
							<span class="sheet-table-cell"><input title="@{Swim-ability-mod}" type="number" name="attr_Swim-ability-mod" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Swim-racial}" type="number" name="attr_Swim-racial" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Swim-trait}" type="number" name="attr_Swim-trait" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Swim-feat}" type="number" name="attr_Swim-feat" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Swim-item}" type="number" name="attr_Swim-item" value="0" /></span>
							<input class="sheet-error-mshow" type="checkbox" value="1" role="status" aria-live="polite" name="attr_Swim-misc-mod_error" />
							<span class="sheet-table-cell sheet-highlight"><input title="@{Swim-misc}" type="text" name="attr_Swim-misc" value="" placeholder="#/Equation" data-i18n-placeholder="equation-macro-place" /></span>
							<span class="sheet-table-cell sheet-highlight"><input title="@{Swim-misc-mod}" type="number" class="sheet-calc" readonly name="attr_Swim-misc-mod" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Swim-class}" type="text" name="attr_Swim-class" value="0/0/0/0" class="sheet-calc sheet-skill-conds" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Swim-ReqTrain}" type="checkbox" name="attr_Swim-ReqTrain" value="1" /></span>
							<span class="sheet-table-cell"><textarea class="sheet-skill-macro-text" title="@{Swim-note}" name="attr_Swim-note"></textarea></span>
							<span class="sheet-table-cell"><textarea class="sheet-skill-macro-text" title="@{Swim-macro}" name="attr_Swim-macro">&{template:pf_generic} @{toggle_accessible_flag} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_generic-skill}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle}} {{name=^{swim}}} {{Check=[[ @{skill-query} + [[ @{Swim} ]] ]]}} @{Swim-ut} @{skill_options} @{Swim-cond-notes} {{generic_note=@{Swim-note}}}</textarea></span>
						</div>
						<div class="sheet-table-row sheet-adventure">
							<span class="sheet-table-cell"><button style="font-size:100%;" title="%{selected|Use-Magic-Device-Check}" type="roll" value="@{PC-Whisper} @{Use-Magic-Device-macro}" name="roll_Use-Magic-Device-Check"></button></span>
							<span class="sheet-table-cell"><input title="@{Use-Magic-Device-cs}" type="checkbox" name="attr_Use-Magic-Device-cs" value="3" /></span>
							<span class="sheet-table-cell sheet-left" data-i18n="use-magic-device">Use Magic Device</span>
							<span class="sheet-table-cell"><input title="@{Use-Magic-Device}" type="number" name="attr_Use-Magic-Device" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Use-Magic-Device-ranks}" type="number" name="attr_Use-Magic-Device-ranks" value="0" /></span>
							<span class="sheet-table-cell">
								<select title="@{Use-Magic-Device-ability}" name="attr_Use-Magic-Device-ability" class="sheet-select-small">
									<option value="@{STR-mod}" data-i18n="strength-abbrv">STR</option>
									<option value="@{DEX-mod}" data-i18n="dexterity-abbrv">DEX</option>
									<option value="@{CON-mod}" data-i18n="constitution-abbrv">CON</option>
									<option value="@{INT-mod}" data-i18n="intelligence-abbrv">INT</option>
									<option value="@{WIS-mod}" data-i18n="wisdom-abbrv">WIS</option>
									<option value="@{CHA-mod}" data-i18n="charisma-abbrv-default" selected>&#8226;CHA</option>
								</select>
							</span>
							<span class="sheet-table-cell"><input title="@{Use-Magic-Device-ability-mod}" type="number" name="attr_Use-Magic-Device-ability-mod" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Use-Magic-Device-racial}" type="number" name="attr_Use-Magic-Device-racial" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Use-Magic-Device-trait}" type="number" name="attr_Use-Magic-Device-trait" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Use-Magic-Device-feat}" type="number" name="attr_Use-Magic-Device-feat" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Use-Magic-Device-item}" type="number" name="attr_Use-Magic-Device-item" value="0" /></span>
							<input class="sheet-error-mshow" type="checkbox" value="1" role="status" aria-live="polite" name="attr_Use-Magic-Device-misc-mod_error" />
							<span class="sheet-table-cell sheet-highlight"><input title="@{Use-Magic-Device-misc}" type="text" name="attr_Use-Magic-Device-misc" value="" placeholder="#/Equation" data-i18n-placeholder="equation-macro-place" /></span>
							<span class="sheet-table-cell sheet-highlight"><input title="@{Use-Magic-Device-misc-mod}" type="number" class="sheet-calc" readonly name="attr_Use-Magic-Device-misc-mod" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Use-Magic-Device-class}" type="text" name="attr_Use-Magic-Device-class" value="0/0/0/0" class="sheet-calc sheet-skill-conds" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Use-Magic-Device-ReqTrain}" type="checkbox" name="attr_Use-Magic-Device-ReqTrain" value="1" checked /></span>
							<span class="sheet-table-cell"><textarea class="sheet-skill-macro-text" title="@{Use-Magic-Device-note}" name="attr_Use-Magic-Device-note"></textarea></span>
							<span class="sheet-table-cell"><textarea class="sheet-skill-macro-text" title="@{Use-Magic-Device-macro}" name="attr_Use-Magic-Device-macro">&{template:pf_generic} @{toggle_accessible_flag} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_generic-skill}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle}} {{name=^{use-magic-device}}} {{Check=[[ @{skill-query} + [[ @{Use-Magic-Device} ]] ]]}} @{Use-Magic-Device-ut} @{skill_options} @{Use-Magic-Device-cond-notes} {{generic_note=@{Use-Magic-Device-note}}}</textarea></span>
						</div>
						<span class="sheet-misc-skill-2 sheet-table-cell sheet-adventure sheet-bg">&nbsp;</span>
						<span class="sheet-misc-skill-2 sheet-table-cell sheet-adventure sheet-bg">&nbsp;</span>
						<input class="sheet-misc-skill-2 sheet-showarrow sheet-misc-show sheet-adventure sheet-bg" type="checkbox" name="attr_misc-show" data-i18n-aria-label="miscellaneous-abbrv" title="Click to expand" data-i18n-title="showsect-cmd" value="1" checked />
						<label class="sheet-misc-skill-2 sheet-showsect sheet-skill-minishow sheet-adventure sheet-bg" title="Click to expand" data-i18n-title="showsect-cmd" data-i18n-aria-label="showsect-cmd" data-i18n="miscellaneous-abbrv">Misc</label>
						<span class="sheet-misc-skill-2 sheet-adventure sheet-bg"></span>
						<div class="sheet-misc-skill-2 sheet-table-row sheet-adventure sheet-bg"><!--used to keep these sections from collapsing on each other when hidden--></div>
						<div class="sheet-table-row sheet-misc sheet-adventure">
							<span class="sheet-table-cell"><button style="font-size:100%;" title="%{selected|Misc-Skill-0-Check}" type="roll" value="@{PC-Whisper} @{Misc-Skill-0-macro}" name="roll_Misc-Skill-0-Check"></button></span>
							<span class="sheet-table-cell"><input title="@{Misc-Skill-0-cs}" type="checkbox" name="attr_Misc-Skill-0-cs" value="3" /></span>
							<span class="sheet-table-cell sheet-left"><input type="text" title="@{Misc-Skill-0-name}" name="attr_Misc-Skill-0-name" placeholder="Misc. Skill" data-i18n-placeholder="miscellaneous-skill-abbrv" style="width:96%;"></span>
							<span class="sheet-table-cell"><input title="@{Misc-Skill-0}" type="number" name="attr_Misc-Skill-0" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Misc-Skill-0-ranks}" type="number" name="attr_Misc-Skill-0-ranks" value="0" /></span>
							<span class="sheet-table-cell">
								<select title="@{Misc-Skill-0-ability}" name="attr_Misc-Skill-0-ability" class="sheet-select-small">
									<option value="0" data-i18n="none" selected>None</option>
									<option value="@{STR-mod}" data-i18n="strength-abbrv">STR</option>
									<option value="@{DEX-mod}" data-i18n="dexterity-abbrv">DEX</option>
									<option value="@{CON-mod}" data-i18n="constitution-abbrv">CON</option>
									<option value="@{INT-mod}" data-i18n="intelligence-abbrv">INT</option>
									<option value="@{WIS-mod}" data-i18n="wisdom-abbrv">WIS</option>
									<option value="@{CHA-mod}" data-i18n="charisma-abbrv">CHA</option>
								</select>
							</span>
							<span class="sheet-table-cell"><input title="@{Misc-Skill-0-ability-mod}" type="number" name="attr_Misc-Skill-0-ability-mod" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Misc-Skill-0-racial}" type="number" name="attr_Misc-Skill-0-racial" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Misc-Skill-0-trait}" type="number" name="attr_Misc-Skill-0-trait" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Misc-Skill-0-feat}" type="number" name="attr_Misc-Skill-0-feat" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Misc-Skill-0-item}" type="number" name="attr_Misc-Skill-0-item" value="0" /></span>
							<input class="sheet-error-mshow" type="checkbox" value="1" role="status" aria-live="polite" name="attr_Misc-Skill-0-misc-mod_error" />
							<span class="sheet-table-cell sheet-highlight"><input title="@{Misc-Skill-0-misc}" type="text" name="attr_Misc-Skill-0-misc" value="" placeholder="#/Equation" data-i18n-placeholder="equation-macro-place" /></span>
							<span class="sheet-table-cell sheet-highlight"><input title="@{Misc-Skill-0-misc-mod}" type="number" class="sheet-calc" readonly name="attr_Misc-Skill-0-misc-mod" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Misc-Skill-0-class}" type="text" name="attr_Misc-Skill-0-class" value="0/0/0/0" class="sheet-calc sheet-skill-conds" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Misc-Skill-0-ReqTrain}" type="checkbox" name="attr_Misc-Skill-0-ReqTrain" value="1" /></span>
							<span class="sheet-table-cell"><textarea class="sheet-skill-macro-text" title="@{Misc-Skill-0-note}" name="attr_Misc-Skill-0-note"></textarea></span>
							<span class="sheet-table-cell"><textarea class="sheet-skill-macro-text" title="@{Misc-Skill-0-macro}" name="attr_Misc-Skill-0-macro">&{template:pf_generic} @{toggle_accessible_flag} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_generic-skill}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle}} {{name=@{Misc-Skill-0-name}}} {{Check=[[ @{skill-query} + [[ @{Misc-Skill-0} ]] ]]}} @{Misc-Skill-0-ut} @{skill_options} @{Misc-Skill-0-cond-notes} {{generic_note=@{Misc-Skill-0-note}}}</textarea></span>
						</div>
						<div class="sheet-table-row sheet-misc sheet-adventure sheet-misc-skill-2">
							<span class="sheet-table-cell"><button style="font-size:100%;" title="%{selected|Misc-Skill-1-Check}" type="roll" value="@{PC-Whisper} @{Misc-Skill-1-macro}" name="roll_Misc-Skill-1-Check"></button></span>
							<span class="sheet-table-cell"><input title="@{Misc-Skill-1-cs}" type="checkbox" name="attr_Misc-Skill-1-cs" value="3" /></span>
							<span class="sheet-table-cell sheet-left"><input type="text" title="@{Misc-Skill-1-name}" name="attr_Misc-Skill-1-name" placeholder="Misc. Skill" data-i18n-placeholder="miscellaneous-skill-abbrv" style="width:96%;"></span>
							<span class="sheet-table-cell"><input title="@{Misc-Skill-1}" type="number" name="attr_Misc-Skill-1" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Misc-Skill-1-ranks}" type="number" name="attr_Misc-Skill-1-ranks" value="0" /></span>
							<span class="sheet-table-cell">
								<select title="@{Misc-Skill-1-ability}" name="attr_Misc-Skill-1-ability" class="sheet-select-small">
									<option value="0" data-i18n="none" selected>None</option>
									<option value="@{STR-mod}" data-i18n="strength-abbrv">STR</option>
									<option value="@{DEX-mod}" data-i18n="dexterity-abbrv">DEX</option>
									<option value="@{CON-mod}" data-i18n="constitution-abbrv">CON</option>
									<option value="@{INT-mod}" data-i18n="intelligence-abbrv">INT</option>
									<option value="@{WIS-mod}" data-i18n="wisdom-abbrv">WIS</option>
									<option value="@{CHA-mod}" data-i18n="charisma-abbrv">CHA</option>
								</select>
							</span>
							<span class="sheet-table-cell"><input title="@{Misc-Skill-1-ability-mod}" type="number" name="attr_Misc-Skill-1-ability-mod" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Misc-Skill-1-racial}" type="number" name="attr_Misc-Skill-1-racial" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Misc-Skill-1-trait}" type="number" name="attr_Misc-Skill-1-trait" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Misc-Skill-1-feat}" type="number" name="attr_Misc-Skill-1-feat" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Misc-Skill-1-item}" type="number" name="attr_Misc-Skill-1-item" value="0" /></span>
							<input class="sheet-error-mshow" type="checkbox" value="1" role="status" aria-live="polite" name="attr_Misc-Skill-1-misc-mod_error" />
							<span class="sheet-table-cell sheet-highlight"><input title="@{Misc-Skill-1-misc}" type="text" name="attr_Misc-Skill-1-misc" value="" placeholder="#/Equation" data-i18n-placeholder="equation-macro-place" /></span>
							<span class="sheet-table-cell sheet-highlight"><input title="@{Misc-Skill-1-misc-mod}" type="number" class="sheet-calc" readonly name="attr_Misc-Skill-1-misc-mod" value="0" /></span>
							<span class="sheet-table-cell sheet-highlight"><input title="@{Misc-Skill-1-class}" type="text" name="attr_Misc-Skill-1-class" value="0/0/0/0" class="sheet-calc sheet-skill-conds" readonly /></span>
							<span class="sheet-table-cell sheet-highlight"><input title="@{Misc-Skill-1-ReqTrain}" type="checkbox" name="attr_Misc-Skill-1-ReqTrain" value="1" /></span>
							<span class="sheet-table-cell"><textarea class="sheet-skill-macro-text" title="@{Misc-Skill-1-note}" name="attr_Misc-Skill-1-note"></textarea></span>
							<span class="sheet-table-cell"><textarea class="sheet-skill-macro-text" title="@{Misc-Skill-1-macro}" name="attr_Misc-Skill-1-macro">&{template:pf_generic} @{toggle_accessible_flag} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_generic-skill}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle}} {{name=@{Misc-Skill-1-name}}} {{Check=[[ @{skill-query} + [[ @{Misc-Skill-1} ]] ]]}} @{Misc-Skill-1-ut} @{skill_options} @{Misc-Skill-1-cond-notes} {{generic_note=@{Misc-Skill-1-note}}}</textarea></span>
						</div>
						<div class="sheet-table-row sheet-misc sheet-adventure sheet-misc-skill-3">
							<span class="sheet-table-cell"><button style="font-size:100%;" title="%{selected|Misc-Skill-2-Check}" type="roll" value="@{PC-Whisper} @{Misc-Skill-2-macro}" name="roll_Misc-Skill-2-Check"></button></span>
							<span class="sheet-table-cell"><input title="@{Misc-Skill-2-cs}" type="checkbox" name="attr_Misc-Skill-2-cs" value="3" /></span>
							<span class="sheet-table-cell sheet-left"><input type="text" title="@{Misc-Skill-2-name}" name="attr_Misc-Skill-2-name" placeholder="Misc. Skill" data-i18n-placeholder="miscellaneous-skill-abbrv" style="width:96%;"></span>
							<span class="sheet-table-cell"><input title="@{Misc-Skill-2}" type="number" name="attr_Misc-Skill-2" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Misc-Skill-2-ranks}" type="number" name="attr_Misc-Skill-2-ranks" value="0" /></span>
							<span class="sheet-table-cell">
								<select title="@{Misc-Skill-2-ability}" name="attr_Misc-Skill-2-ability" class="sheet-select-small">
									<option value="0" data-i18n="none" selected>None</option>
									<option value="@{STR-mod}" data-i18n="strength-abbrv">STR</option>
									<option value="@{DEX-mod}" data-i18n="dexterity-abbrv">DEX</option>
									<option value="@{CON-mod}" data-i18n="constitution-abbrv">CON</option>
									<option value="@{INT-mod}" data-i18n="intelligence-abbrv">INT</option>
									<option value="@{WIS-mod}" data-i18n="wisdom-abbrv">WIS</option>
									<option value="@{CHA-mod}" data-i18n="charisma-abbrv">CHA</option>
								</select>
							</span>
							<span class="sheet-table-cell"><input title="@{Misc-Skill-2-ability-mod}" type="number" name="attr_Misc-Skill-2-ability-mod" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Misc-Skill-2-racial}" type="number" name="attr_Misc-Skill-2-racial" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Misc-Skill-2-trait}" type="number" name="attr_Misc-Skill-2-trait" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Misc-Skill-2-feat}" type="number" name="attr_Misc-Skill-2-feat" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Misc-Skill-2-item}" type="number" name="attr_Misc-Skill-2-item" value="0" /></span>
							<input class="sheet-error-mshow" type="checkbox" value="1" role="status" aria-live="polite" name="attr_Misc-Skill-2-misc-mod_error" />
							<span class="sheet-table-cell sheet-highlight"><input title="@{Misc-Skill-2-misc}" type="text" name="attr_Misc-Skill-2-misc" value="" placeholder="#/Equation" data-i18n-placeholder="equation-macro-place" /></span>
							<span class="sheet-table-cell sheet-highlight"><input title="@{Misc-Skill-2-misc-mod}" type="number" class="sheet-calc" readonly name="attr_Misc-Skill-2-misc-mod" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Misc-Skill-2-class}" type="text" name="attr_Misc-Skill-2-class" value="0/0/0/0" class="sheet-calc sheet-skill-conds" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Misc-Skill-2-ReqTrain}" type="checkbox" name="attr_Misc-Skill-2-ReqTrain" value="1" /></span>
							<span class="sheet-table-cell"><textarea class="sheet-skill-macro-text" title="@{Misc-Skill-2-note}" name="attr_Misc-Skill-2-note"></textarea></span>
							<span class="sheet-table-cell"><textarea class="sheet-skill-macro-text" title="@{Misc-Skill-2-macro}" name="attr_Misc-Skill-2-macro">&{template:pf_generic} @{toggle_accessible_flag} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_generic-skill}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle}} {{name=@{Misc-Skill-2-name}}} {{Check=[[ @{skill-query} + [[ @{Misc-Skill-2} ]] ]]}} @{Misc-Skill-2-ut} @{skill_options} @{Misc-Skill-2-cond-notes} {{generic_note=@{Misc-Skill-2-note}}}</textarea></span>
						</div>
						<div class="sheet-table-row sheet-misc sheet-adventure sheet-misc-skill-6">
							<span class="sheet-table-cell"><button style="font-size:100%;" title="%{selected|Misc-Skill-3-Check}" type="roll" value="@{PC-Whisper} @{Misc-Skill-3-macro}" name="roll_Misc-Skill-3-Check"></button></span>
							<span class="sheet-table-cell"><input title="@{Misc-Skill-3-cs}" type="checkbox" name="attr_Misc-Skill-3-cs" value="3" /></span>
							<span class="sheet-table-cell sheet-left"><input title="@{Misc-Skill-3-name}" type="text" name="attr_Misc-Skill-3-name" placeholder="Misc. Skill" data-i18n-placeholder="miscellaneous-skill-abbrv" style="width:96%;" /></span>
							<span class="sheet-table-cell"><input title="@{Misc-Skill-3}" type="number" name="attr_Misc-Skill-3" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Misc-Skill-3-ranks}" type="number" name="attr_Misc-Skill-3-ranks" value="0" /></span>
							<span class="sheet-table-cell">
								<select title="@{Misc-Skill-3-ability}" name="attr_Misc-Skill-3-ability" class="sheet-select-small">
									<option value="0" data-i18n="none" selected>None</option>
									<option value="@{STR-mod}" data-i18n="strength-abbrv">STR</option>
									<option value="@{DEX-mod}" data-i18n="dexterity-abbrv">DEX</option>
									<option value="@{CON-mod}" data-i18n="constitution-abbrv">CON</option>
									<option value="@{INT-mod}" data-i18n="intelligence-abbrv">INT</option>
									<option value="@{WIS-mod}" data-i18n="wisdom-abbrv">WIS</option>
									<option value="@{CHA-mod}" data-i18n="charisma-abbrv">CHA</option>
								</select>
							</span>
							<span class="sheet-table-cell"><input title="@{Misc-Skill-3-ability-mod}" type="number" name="attr_Misc-Skill-3-ability-mod" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Misc-Skill-3-racial}" type="number" name="attr_Misc-Skill-3-racial" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Misc-Skill-3-trait}" type="number" name="attr_Misc-Skill-3-trait" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Misc-Skill-3-feat}" type="number" name="attr_Misc-Skill-3-feat" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Misc-Skill-3-item}" type="number" name="attr_Misc-Skill-3-item" value="0" /></span>
							<input class="sheet-error-mshow" type="checkbox" value="1" role="status" aria-live="polite" name="attr_Misc-Skill-3-misc-mod_error" />
							<span class="sheet-table-cell sheet-highlight"><input title="@{Misc-Skill-3-misc}" type="text" name="attr_Misc-Skill-3-misc" value="" placeholder="#/Equation" data-i18n-placeholder="equation-macro-place" /></span>
							<span class="sheet-table-cell sheet-highlight"><input title="@{Misc-Skill-3-misc-mod}" type="number" class="sheet-calc" readonly name="attr_Misc-Skill-3-misc-mod" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Misc-Skill-3-class}" type="text" name="attr_Misc-Skill-3-class" value="0/0/0/0" class="sheet-calc sheet-skill-conds" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Misc-Skill-3-ReqTrain}" type="checkbox" name="attr_Misc-Skill-3-ReqTrain" value="1" /></span>
							<span class="sheet-table-cell"><textarea class="sheet-skill-macro-text" title="@{Misc-Skill-3-note}" name="attr_Misc-Skill-3-note"></textarea></span>
							<span class="sheet-table-cell"><textarea class="sheet-skill-macro-text" title="@{Misc-Skill-3-macro}" name="attr_Misc-Skill-3-macro">&{template:pf_generic} @{toggle_accessible_flag} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_generic-skill}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle}} {{name=@{Misc-Skill-3-name}}} {{Check=[[ @{skill-query} + [[ @{Misc-Skill-3} ]] ]]}} @{Misc-Skill-3-ut} @{skill_options} @{Misc-Skill-3-cond-notes} {{generic_note=@{Misc-Skill-3-note}}}</textarea></span>
						</div>
						<div class="sheet-table-row sheet-misc sheet-adventure sheet-misc-skill-6">
							<span class="sheet-table-cell"><button style="font-size:100%;" title="%{selected|Misc-Skill-4-Check}" type="roll" value="@{PC-Whisper} @{Misc-Skill-4-macro}" name="roll_Misc-Skill-4-Check"></button></span>
							<span class="sheet-table-cell"><input title="@{Misc-Skill-4-cs}" type="checkbox" name="attr_Misc-Skill-4-cs" value="3" /></span>
							<span class="sheet-table-cell sheet-left"><input title="@{Misc-Skill-4-name}" type="text" name="attr_Misc-Skill-4-name" placeholder="Misc. Skill" data-i18n-placeholder="miscellaneous-skill-abbrv" style="width:96%;" /></span>
							<span class="sheet-table-cell"><input title="@{Misc-Skill-4}" type="number" name="attr_Misc-Skill-4" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Misc-Skill-4-ranks}" type="number" name="attr_Misc-Skill-4-ranks" value="0" /></span>
							<span class="sheet-table-cell">
								<select title="@{Misc-Skill-4-ability}" name="attr_Misc-Skill-4-ability" class="sheet-select-small">
									<option value="0" data-i18n="none" selected>None</option>
									<option value="@{STR-mod}" data-i18n="strength-abbrv">STR</option>
									<option value="@{DEX-mod}" data-i18n="dexterity-abbrv">DEX</option>
									<option value="@{CON-mod}" data-i18n="constitution-abbrv">CON</option>
									<option value="@{INT-mod}" data-i18n="intelligence-abbrv">INT</option>
									<option value="@{WIS-mod}" data-i18n="wisdom-abbrv">WIS</option>
									<option value="@{CHA-mod}" data-i18n="charisma-abbrv">CHA</option>
								</select>
							</span>
							<span class="sheet-table-cell"><input title="@{Misc-Skill-4-ability-mod}" type="number" name="attr_Misc-Skill-4-ability-mod" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Misc-Skill-4-racial}" type="number" name="attr_Misc-Skill-4-racial" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Misc-Skill-4-trait}" type="number" name="attr_Misc-Skill-4-trait" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Misc-Skill-4-feat}" type="number" name="attr_Misc-Skill-4-feat" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Misc-Skill-4-item}" type="number" name="attr_Misc-Skill-4-item" value="0" /></span>
							<input class="sheet-error-mshow" type="checkbox" value="1" role="status" aria-live="polite" name="attr_Misc-Skill-4-misc-mod_error" />
							<span class="sheet-table-cell sheet-highlight"><input title="@{Misc-Skill-4-misc}" type="text" name="attr_Misc-Skill-4-misc" value="" placeholder="#/Equation" data-i18n-placeholder="equation-macro-place" /></span>
							<span class="sheet-table-cell sheet-highlight"><input title="@{Misc-Skill-4-misc-mod}" type="number" class="sheet-calc" readonly name="attr_Misc-Skill-4-misc-mod" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Misc-Skill-4-class}" type="text" name="attr_Misc-Skill-4-class" value="0/0/0/0" class="sheet-calc sheet-skill-conds" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Misc-Skill-4-ReqTrain}" type="checkbox" name="attr_Misc-Skill-4-ReqTrain" value="1" /></span>
							<span class="sheet-table-cell"><textarea class="sheet-skill-macro-text" title="@{Misc-Skill-4-note}" name="attr_Misc-Skill-4-note"></textarea></span>
							<span class="sheet-table-cell"><textarea class="sheet-skill-macro-text" title="@{Misc-Skill-4-macro}" name="attr_Misc-Skill-4-macro">&{template:pf_generic} @{toggle_accessible_flag} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_generic-skill}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle}} {{name=@{Misc-Skill-4-name}}} {{Check=[[ @{skill-query} + [[ @{Misc-Skill-4} ]] ]]}} @{Misc-Skill-4-ut} @{skill_options} @{Misc-Skill-4-cond-notes} {{generic_note=@{Misc-Skill-4-note}}}</textarea></span>
						</div>
						<div class="sheet-table-row sheet-misc sheet-bg sheet-misc-skill-6">
							<span class="sheet-table-cell"><button style="font-size:100%;" title="%{selected|Misc-Skill-5-Check}" type="roll" value="@{PC-Whisper} @{Misc-Skill-5-macro}" name="roll_Misc-Skill-5-Check"></button></span>
							<span class="sheet-table-cell"><input title="@{Misc-Skill-5-cs}" type="checkbox" name="attr_Misc-Skill-5-cs" value="3" /></span>
							<span class="sheet-table-cell sheet-left"><input title="@{Misc-Skill-5-name}" type="text" name="attr_Misc-Skill-5-name" placeholder="Misc. Skill" data-i18n-placeholder="miscellaneous-skill-abbrv" style="width:96%;" /></span>
							<span class="sheet-table-cell"><input title="@{Misc-Skill-5}" type="number" name="attr_Misc-Skill-5" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Misc-Skill-5-ranks}" type="number" name="attr_Misc-Skill-5-ranks" value="0" /></span>
							<span class="sheet-table-cell">
								<select title="@{Misc-Skill-5-ability}" name="attr_Misc-Skill-5-ability" class="sheet-select-small">
									<option value="0" data-i18n="none" selected>None</option>
									<option value="@{STR-mod}" data-i18n="strength-abbrv">STR</option>
									<option value="@{DEX-mod}" data-i18n="dexterity-abbrv">DEX</option>
									<option value="@{CON-mod}" data-i18n="constitution-abbrv">CON</option>
									<option value="@{INT-mod}" data-i18n="intelligence-abbrv">INT</option>
									<option value="@{WIS-mod}" data-i18n="wisdom-abbrv">WIS</option>
									<option value="@{CHA-mod}" data-i18n="charisma-abbrv">CHA</option>
								</select>
							</span>
							<span class="sheet-table-cell"><input title="@{Misc-Skill-5-ability-mod}" type="number" name="attr_Misc-Skill-5-ability-mod" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Misc-Skill-5-racial}" type="number" name="attr_Misc-Skill-5-racial" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Misc-Skill-5-trait}" type="number" name="attr_Misc-Skill-5-trait" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Misc-Skill-5-feat}" type="number" name="attr_Misc-Skill-5-feat" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Misc-Skill-5-item}" type="number" name="attr_Misc-Skill-5-item" value="0" /></span>
							<input class="sheet-error-mshow" type="checkbox" value="1" role="status" aria-live="polite" name="attr_Misc-Skill-5-misc-mod_error" />
							<span class="sheet-table-cell sheet-highlight"><input title="@{Misc-Skill-5-misc}" type="text" name="attr_Misc-Skill-5-misc" value="" placeholder="#/Equation" data-i18n-placeholder="equation-macro-place" /></span>
							<span class="sheet-table-cell sheet-highlight"><input title="@{Misc-Skill-5-misc-mod}" type="number" class="sheet-calc" readonly name="attr_Misc-Skill-5-misc-mod" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Misc-Skill-5-class}" type="text" name="attr_Misc-Skill-5-class" value="0/0/0/0" class="sheet-calc sheet-skill-conds" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Misc-Skill-5-ReqTrain}" type="checkbox" name="attr_Misc-Skill-5-ReqTrain" value="1" /></span>
							<span class="sheet-table-cell"><textarea class="sheet-skill-macro-text" title="@{Misc-Skill-5-note}" name="attr_Misc-Skill-5-note"></textarea></span>
							<span class="sheet-table-cell"><textarea class="sheet-skill-macro-text" title="@{Misc-Skill-5-macro}" name="attr_Misc-Skill-5-macro">&{template:pf_generic} @{toggle_accessible_flag} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_generic-skill}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle}} {{name=@{Misc-Skill-5-name}}} {{Check=[[ @{skill-query} + [[ @{Misc-Skill-5} ]] ]]}} @{Misc-Skill-5-ut} @{skill_options} @{Misc-Skill-5-cond-notes} {{generic_note=@{Misc-Skill-5-note}}}</textarea></span>
						</div>
						<div class="sheet-table-row sheet-misc sheet-bg sheet-misc-skill-10">
							<span class="sheet-table-cell"><button style="font-size:100%;" title="%{selected|Misc-Skill-6-Check}" type="roll" value="@{PC-Whisper} @{Misc-Skill-6-macro}" name="roll_Misc-Skill-6-Check"></button></span>
							<span class="sheet-table-cell"><input title="@{Misc-Skill-6-cs}" type="checkbox" name="attr_Misc-Skill-6-cs" value="3" /></span>
							<span class="sheet-table-cell sheet-left"><input title="@{Misc-Skill-6-name}" type="text" name="attr_Misc-Skill-6-name" placeholder="Misc. Skill" data-i18n-placeholder="miscellaneous-skill-abbrv" style="width:96%;" /></span>
							<span class="sheet-table-cell"><input title="@{Misc-Skill-6}" type="number" name="attr_Misc-Skill-6" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Misc-Skill-6-ranks}" type="number" name="attr_Misc-Skill-6-ranks" value="0" /></span>
							<span class="sheet-table-cell">
								<select title="@{Misc-Skill-6-ability}" name="attr_Misc-Skill-6-ability" class="sheet-select-small">
									<option value="0" data-i18n="none" selected>None</option>
									<option value="@{STR-mod}" data-i18n="strength-abbrv">STR</option>
									<option value="@{DEX-mod}" data-i18n="dexterity-abbrv">DEX</option>
									<option value="@{CON-mod}" data-i18n="constitution-abbrv">CON</option>
									<option value="@{INT-mod}" data-i18n="intelligence-abbrv">INT</option>
									<option value="@{WIS-mod}" data-i18n="wisdom-abbrv">WIS</option>
									<option value="@{CHA-mod}" data-i18n="charisma-abbrv">CHA</option>
								</select>
							</span>
							<span class="sheet-table-cell"><input title="@{Misc-Skill-6-ability-mod}" type="number" name="attr_Misc-Skill-6-ability-mod" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Misc-Skill-6-racial}" type="number" name="attr_Misc-Skill-6-racial" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Misc-Skill-6-trait}" type="number" name="attr_Misc-Skill-6-trait" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Misc-Skill-6-feat}" type="number" name="attr_Misc-Skill-6-feat" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Misc-Skill-6-item}" type="number" name="attr_Misc-Skill-6-item" value="0" /></span>
							<input class="sheet-error-mshow" type="checkbox" value="1" role="status" aria-live="polite" name="attr_Misc-Skill-6-misc-mod_error" />
							<span class="sheet-table-cell sheet-highlight"><input title="@{Misc-Skill-6-misc}" type="text" name="attr_Misc-Skill-6-misc" value="" placeholder="#/Equation" data-i18n-placeholder="equation-macro-place" /></span>
							<span class="sheet-table-cell sheet-highlight"><input title="@{Misc-Skill-6-misc-mod}" type="number" class="sheet-calc" readonly name="attr_Misc-Skill-6-misc-mod" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Misc-Skill-6-class}" type="text" name="attr_Misc-Skill-6-class" value="0/0/0/0" class="sheet-calc sheet-skill-conds" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Misc-Skill-6-ReqTrain}" type="checkbox" name="attr_Misc-Skill-6-ReqTrain" value="1" /></span>
							<span class="sheet-table-cell"><textarea class="sheet-skill-macro-text" title="@{Misc-Skill-6-note}" name="attr_Misc-Skill-6-note"></textarea></span>
							<span class="sheet-table-cell"><textarea class="sheet-skill-macro-text" title="@{Misc-Skill-6-macro}" name="attr_Misc-Skill-6-macro">&{template:pf_generic} @{toggle_accessible_flag} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_generic-skill}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle}} {{name=@{Misc-Skill-6-name}}} {{Check=[[ @{skill-query} + [[ @{Misc-Skill-6} ]] ]]}} @{Misc-Skill-6-ut} @{skill_options} @{Misc-Skill-6-cond-notes} {{generic_note=@{Misc-Skill-6-note}}}</textarea></span>
						</div>
						<div class="sheet-table-row sheet-misc sheet-bg sheet-misc-skill-10">
							<span class="sheet-table-cell"><button style="font-size:100%;" title="%{selected|Misc-Skill-7-Check}" type="roll" value="@{PC-Whisper} @{Misc-Skill-7-macro}" name="roll_Misc-Skill-7-Check"></button></span>
							<span class="sheet-table-cell"><input title="@{Misc-Skill-7-cs}" type="checkbox" name="attr_Misc-Skill-7-cs" value="3" /></span>
							<span class="sheet-table-cell sheet-left"><input title="@{Misc-Skill-7-name}" type="text" name="attr_Misc-Skill-7-name" placeholder="Misc. Skill" data-i18n-placeholder="miscellaneous-skill-abbrv" style="width:96%;" /></span>
							<span class="sheet-table-cell"><input title="@{Misc-Skill-7}" type="number" name="attr_Misc-Skill-7" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Misc-Skill-7-ranks}" type="number" name="attr_Misc-Skill-7-ranks" value="0" /></span>
							<span class="sheet-table-cell">
								<select title="@{Misc-Skill-7-ability}" name="attr_Misc-Skill-7-ability" class="sheet-select-small">
									<option value="0" data-i18n="none" selected>None</option>
									<option value="@{STR-mod}" data-i18n="strength-abbrv">STR</option>
									<option value="@{DEX-mod}" data-i18n="dexterity-abbrv">DEX</option>
									<option value="@{CON-mod}" data-i18n="constitution-abbrv">CON</option>
									<option value="@{INT-mod}" data-i18n="intelligence-abbrv">INT</option>
									<option value="@{WIS-mod}" data-i18n="wisdom-abbrv">WIS</option>
									<option value="@{CHA-mod}" data-i18n="charisma-abbrv">CHA</option>
								</select>
							</span>
							<span class="sheet-table-cell"><input title="@{Misc-Skill-7-ability-mod}" type="number" name="attr_Misc-Skill-7-ability-mod" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Misc-Skill-7-racial}" type="number" name="attr_Misc-Skill-7-racial" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Misc-Skill-7-trait}" type="number" name="attr_Misc-Skill-7-trait" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Misc-Skill-7-feat}" type="number" name="attr_Misc-Skill-7-feat" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Misc-Skill-7-item}" type="number" name="attr_Misc-Skill-7-item" value="0" /></span>
							<input class="sheet-error-mshow" type="checkbox" value="1" role="status" aria-live="polite" name="attr_Misc-Skill-7-misc-mod_error" />
							<span class="sheet-table-cell sheet-highlight"><input title="@{Misc-Skill-7-misc}" type="text" name="attr_Misc-Skill-7-misc" value="" placeholder="#/Equation" data-i18n-placeholder="equation-macro-place" /></span>
							<span class="sheet-table-cell sheet-highlight"><input title="@{Misc-Skill-7-misc-mod}" type="number" class="sheet-calc" readonly name="attr_Misc-Skill-7-misc-mod" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Misc-Skill-7-class}" type="text" name="attr_Misc-Skill-7-class" value="0/0/0/0" class="sheet-calc sheet-skill-conds" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Misc-Skill-7-ReqTrain}" type="checkbox" name="attr_Misc-Skill-7-ReqTrain" value="1" /></span>
							<span class="sheet-table-cell"><textarea class="sheet-skill-macro-text" title="@{Misc-Skill-7-note}" name="attr_Misc-Skill-7-note"></textarea></span>
							<span class="sheet-table-cell"><textarea class="sheet-skill-macro-text" title="@{Misc-Skill-7-macro}" name="attr_Misc-Skill-7-macro">&{template:pf_generic} @{toggle_accessible_flag} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_generic-skill}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle}} {{name=@{Misc-Skill-7-name}}} {{Check=[[ @{skill-query} + [[ @{Misc-Skill-7} ]] ]]}} @{Misc-Skill-7-ut} @{skill_options} @{Misc-Skill-7-cond-notes} {{generic_note=@{Misc-Skill-7-note}}}</textarea></span>
						</div>
						<div class="sheet-table-row sheet-misc sheet-bg sheet-misc-skill-10">
							<span class="sheet-table-cell"><button style="font-size:100%;" title="%{selected|Misc-Skill-8-Check}" type="roll" value="@{PC-Whisper} @{Misc-Skill-8-macro}" name="roll_Misc-Skill-8-Check"></button></span>
							<span class="sheet-table-cell"><input title="@{Misc-Skill-8-cs}" type="checkbox" name="attr_Misc-Skill-8-cs" value="3" /></span>
							<span class="sheet-table-cell sheet-left"><input title="@{Misc-Skill-8-name}" type="text" name="attr_Misc-Skill-8-name" placeholder="Misc. Skill" data-i18n-placeholder="miscellaneous-skill-abbrv" style="width:96%;" /></span>
							<span class="sheet-table-cell"><input title="@{Misc-Skill-8}" type="number" name="attr_Misc-Skill-8" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Misc-Skill-8-ranks}" type="number" name="attr_Misc-Skill-8-ranks" value="0" /></span>
							<span class="sheet-table-cell">
								<select title="@{Misc-Skill-8-ability}" name="attr_Misc-Skill-8-ability" class="sheet-select-small">
									<option value="0" data-i18n="none" selected>None</option>
									<option value="@{STR-mod}" data-i18n="strength-abbrv">STR</option>
									<option value="@{DEX-mod}" data-i18n="dexterity-abbrv">DEX</option>
									<option value="@{CON-mod}" data-i18n="constitution-abbrv">CON</option>
									<option value="@{INT-mod}" data-i18n="intelligence-abbrv">INT</option>
									<option value="@{WIS-mod}" data-i18n="wisdom-abbrv">WIS</option>
									<option value="@{CHA-mod}" data-i18n="charisma-abbrv">CHA</option>
								</select>
							</span>
							<span class="sheet-table-cell"><input title="@{Misc-Skill-8-ability-mod}" type="number" name="attr_Misc-Skill-8-ability-mod" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Misc-Skill-8-racial}" type="number" name="attr_Misc-Skill-8-racial" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Misc-Skill-8-trait}" type="number" name="attr_Misc-Skill-8-trait" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Misc-Skill-8-feat}" type="number" name="attr_Misc-Skill-8-feat" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Misc-Skill-8-item}" type="number" name="attr_Misc-Skill-8-item" value="0" /></span>
							<input class="sheet-error-mshow" type="checkbox" value="1" role="status" aria-live="polite" name="attr_Misc-Skill-8-misc-mod_error" />
							<span class="sheet-table-cell sheet-highlight"><input title="@{Misc-Skill-8-misc}" type="text" name="attr_Misc-Skill-8-misc" value="" placeholder="#/Equation" data-i18n-placeholder="equation-macro-place" /></span>
							<span class="sheet-table-cell sheet-highlight"><input title="@{Misc-Skill-8-misc-mod}" type="number" class="sheet-calc" readonly name="attr_Misc-Skill-8-misc-mod" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Misc-Skill-8-class}" type="text" name="attr_Misc-Skill-8-class" value="0/0/0/0" class="sheet-calc sheet-skill-conds" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Misc-Skill-8-ReqTrain}" type="checkbox" name="attr_Misc-Skill-8-ReqTrain" value="1" /></span>
							<span class="sheet-table-cell"><textarea class="sheet-skill-macro-text" title="@{Misc-Skill-8-note}" name="attr_Misc-Skill-8-note"></textarea></span>
							<span class="sheet-table-cell"><textarea class="sheet-skill-macro-text" title="@{Misc-Skill-8-macro}" name="attr_Misc-Skill-8-macro">&{template:pf_generic} @{toggle_accessible_flag} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_generic-skill}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle}} {{name=@{Misc-Skill-8-name}}} {{Check=[[ @{skill-query} + [[ @{Misc-Skill-8} ]] ]]}} @{Misc-Skill-8-ut} @{skill_options} @{Misc-Skill-8-cond-notes} {{generic_note=@{Misc-Skill-8-note}}}</textarea></span>
						</div>
						<div class="sheet-table-row sheet-misc sheet-bg sheet-misc-skill-10">
							<span class="sheet-table-cell"><button style="font-size:100%;" title="%{selected|Misc-Skill-9-Check}" type="roll" value="@{PC-Whisper} @{Misc-Skill-9-macro}" name="roll_Misc-Skill-9-Check"></button></span>
							<span class="sheet-table-cell"><input title="@{Misc-Skill-9-cs}" type="checkbox" name="attr_Misc-Skill-9-cs" value="3" /></span>
							<span class="sheet-table-cell sheet-left"><input title="@{Misc-Skill-9-name}" type="text" name="attr_Misc-Skill-9-name" placeholder="Misc. Skill" data-i18n-placeholder="miscellaneous-skill-abbrv" style="width:96%;" /></span>
							<span class="sheet-table-cell"><input title="@{Misc-Skill-9}" type="number" name="attr_Misc-Skill-9" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Misc-Skill-9-ranks}" type="number" name="attr_Misc-Skill-9-ranks" value="0" /></span>
							<span class="sheet-table-cell">
								<select title="@{Misc-Skill-9-ability}" name="attr_Misc-Skill-9-ability" class="sheet-select-small">
									<option value="0" data-i18n="none" selected>None</option>
									<option value="@{STR-mod}" data-i18n="strength-abbrv">STR</option>
									<option value="@{DEX-mod}" data-i18n="dexterity-abbrv">DEX</option>
									<option value="@{CON-mod}" data-i18n="constitution-abbrv">CON</option>
									<option value="@{INT-mod}" data-i18n="intelligence-abbrv">INT</option>
									<option value="@{WIS-mod}" data-i18n="wisdom-abbrv">WIS</option>
									<option value="@{CHA-mod}" data-i18n="charisma-abbrv">CHA</option>
								</select>
							</span>
							<span class="sheet-table-cell"><input title="@{Misc-Skill-9-ability-mod}" type="number" name="attr_Misc-Skill-9-ability-mod" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Misc-Skill-9-racial}" type="number" name="attr_Misc-Skill-9-racial" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Misc-Skill-9-trait}" type="number" name="attr_Misc-Skill-9-trait" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Misc-Skill-9-feat}" type="number" name="attr_Misc-Skill-9-feat" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Misc-Skill-9-item}" type="number" name="attr_Misc-Skill-9-item" value="0" /></span>
							<input class="sheet-error-mshow" type="checkbox" value="1" role="status" aria-live="polite" name="attr_Misc-Skill-9-misc-mod_error" />
							<span class="sheet-table-cell sheet-highlight"><input title="@{Misc-Skill-9-misc}" type="text" name="attr_Misc-Skill-9-misc" value="" placeholder="#/Equation" data-i18n-placeholder="equation-macro-place" /></span>
							<span class="sheet-table-cell sheet-highlight"><input title="@{Misc-Skill-9-misc-mod}" type="number" class="sheet-calc" readonly name="attr_Misc-Skill-9-misc-mod" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{Misc-Skill-9-class}" type="text" name="attr_Misc-Skill-9-class" value="0/0/0/0" class="sheet-calc sheet-skill-conds" readonly /></span>
							<span class="sheet-table-cell"><input title="@{Misc-Skill-9-ReqTrain}" type="checkbox" name="attr_Misc-Skill-9-ReqTrain" value="1" /></span>
							<span class="sheet-table-cell"><textarea class="sheet-skill-macro-text" title="@{Misc-Skill-9-note}" name="attr_Misc-Skill-9-note"></textarea></span>
							<span class="sheet-table-cell"><textarea class="sheet-skill-macro-text" title="@{Misc-Skill-9-macro}" name="attr_Misc-Skill-9-macro">&{template:pf_generic} @{toggle_accessible_flag} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_generic-skill}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle}} {{name=@{Misc-Skill-9-name}}} {{Check=[[ @{skill-query} + [[ @{Misc-Skill-9} ]] ]]}} @{Misc-Skill-9-ut} @{skill_options} @{Misc-Skill-9-cond-notes} {{generic_note=@{Misc-Skill-9-note}}}</textarea></span>
						</div>
						<div class="sheet-table-row sheet-consolidated">
							<span class="sheet-table-cell"><button style="font-size:100%;" title="%{selected|CS-Acrobatics-Check}" type="roll" value="@{PC-Whisper} @{CS-Acrobatics-macro}" name="roll_CS-Acrobatics-Check"></button></span>
							<span class="sheet-table-cell"><input title="@{CS-Acrobatics-cs}" type="checkbox" name="attr_CS-Acrobatics-cs" value="3" /></span>
							<span class="sheet-table-cell sheet-left"><span title="Covers Acrobatics (except jumping), Escape Artist, Fly, Ride" data-i18n="acrobatics">Acrobatics</span></span>
							<span class="sheet-table-cell"><input title="@{CS-Acrobatics}" type="number" name="attr_CS-Acrobatics" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-table-cell"><input title="@{CS-Acrobatics-ranks}" type="number" name="attr_CS-Acrobatics-ranks" value="0" /></span>
							<span class="sheet-table-cell">
								<select title="@{CS-Acrobatics-ability}" name="attr_CS-Acrobatics-ability" class="sheet-select-small">
									<option value="@{STR-mod}" data-i18n="strength-abbrv">STR</option>
									<option value="@{DEX-mod}" data-i18n="dexterity-abbrv-default" selected>&#8226;DEX</option>
									<option value="@{CON-mod}" data-i18n="constitution-abbrv">CON</option>
									<option value="@{INT-mod}" data-i18n="intelligence-abbrv">INT</option>
									<option value="@{WIS-mod}" data-i18n="wisdom-abbrv">WIS</option>
									<option value="@{CHA-mod}" data-i18n="charisma-abbrv">CHA</option>
								</select>
							</span>
							<span class="sheet-table-cell"><input title="@{CS-Acrobatics-ability-mod}" type="number" name="attr_CS-Acrobatics-ability-mod" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-table-cell"><input title="@{CS-Acrobatics-racial}" type="number" name="attr_CS-Acrobatics-racial" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{CS-Acrobatics-trait}" type="number" name="attr_CS-Acrobatics-trait" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{CS-Acrobatics-feat}" type="number" name="attr_CS-Acrobatics-feat" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{CS-Acrobatics-item}" type="number" name="attr_CS-Acrobatics-item" value="0" /></span>
							<input class="sheet-error-mshow" type="checkbox" value="1" role="status" aria-live="polite" name="attr_CS-Acrobatics-misc-mod_error" />
							<span class="sheet-table-cell sheet-highlight"><input title="@{CS-Acrobatics-misc}" type="text" name="attr_CS-Acrobatics-misc" value="" placeholder="#/Equation" data-i18n-placeholder="equation-macro-place" /></span>
							<span class="sheet-table-cell sheet-highlight"><input title="@{CS-Acrobatics-misc-mod}" type="number" class="sheet-calc" readonly name="attr_CS-Acrobatics-misc-mod" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{CS-Acrobatics-class}" type="text" name="attr_CS-Acrobatics-class" value="0/0/0/0" class="sheet-calc sheet-skill-conds" readonly /></span>
							<span class="sheet-table-cell"><input title="@{CS-Acrobatics-ReqTrain}" type="checkbox" name="attr_CS-Acrobatics-ReqTrain" value="1" /></span>
							<span class="sheet-table-cell"><textarea class="sheet-skill-macro-text" title="@{CS-Acrobatics-note}" name="attr_CS-Acrobatics-note"></textarea></span>
							<span class="sheet-table-cell"><textarea class="sheet-skill-macro-text" title="@{CS-Acrobatics-macro}" name="attr_CS-Acrobatics-macro">&{template:pf_generic} @{toggle_accessible_flag} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_generic-skill}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle}} {{name=^{cs-acrobatics}}} {{Check=[[ @{skill-query} + [[ @{CS-Acrobatics} ]] ]]}} @{CS-Acrobatics-ut} @{skill_options} @{CS-Acrobatics-cond-notes} {{generic_note=@{CS-Acrobatics-note}}}</textarea></span>
						</div>
						<div class="sheet-table-row sheet-consolidated">
							<span class="sheet-table-cell"><button style="font-size:100%;" title="%{selected|CS-Athletics-Check}" type="roll" value="@{PC-Whisper} @{CS-Athletics-macro}" name="roll_CS-Athletics-Check"></button></span>
							<span class="sheet-table-cell"><input title="@{CS-Athletics-cs}" type="checkbox" name="attr_CS-Athletics-cs" value="3" /></span>
							<span class="sheet-table-cell sheet-left"><span title="Covers Acrobatics (jumping), Climb, Swim" data-i18n="athletics">Athletics</span></span>
							<span class="sheet-table-cell"><input title="@{CS-Athletics}" type="number" name="attr_CS-Athletics" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-table-cell"><input title="@{CS-Athletics-ranks}" type="number" name="attr_CS-Athletics-ranks" value="0" /></span>
							<span class="sheet-table-cell">
								<select title="@{CS-Athletics-ability}" name="attr_CS-Athletics-ability" class="sheet-select-small">
									<option value="@{STR-mod}" data-i18n="strength-abbrv-default" selected>&#8226;STR</option>
									<option value="@{DEX-mod}" data-i18n="dexterity-abbrv">DEX</option>
									<option value="@{CON-mod}" data-i18n="constitution-abbrv">CON</option>
									<option value="@{INT-mod}" data-i18n="intelligence-abbrv">INT</option>
									<option value="@{WIS-mod}" data-i18n="wisdom-abbrv">WIS</option>
									<option value="@{CHA-mod}" data-i18n="charisma-abbrv">CHA</option>
								</select>
							</span>
							<span class="sheet-table-cell"><input title="@{CS-Athletics-ability-mod}" type="number" name="attr_CS-Athletics-ability-mod" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-table-cell"><input title="@{CS-Athletics-racial}" type="number" name="attr_CS-Athletics-racial" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{CS-Athletics-trait}" type="number" name="attr_CS-Athletics-trait" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{CS-Athletics-feat}" type="number" name="attr_CS-Athletics-feat" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{CS-Athletics-item}" type="number" name="attr_CS-Athletics-item" value="0" /></span>
							<input class="sheet-error-mshow" type="checkbox" value="1" role="status" aria-live="polite" name="attr_CS-Athletics-misc-mod_error" />
							<span class="sheet-table-cell sheet-highlight"><input title="@{CS-Athletics-misc}" type="text" name="attr_CS-Athletics-misc" value="" placeholder="#/Equation" data-i18n-placeholder="equation-macro-place" /></span>
							<span class="sheet-table-cell sheet-highlight"><input title="@{CS-Athletics-misc-mod}" type="number" class="sheet-calc" readonly name="attr_CS-Athletics-misc-mod" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{CS-Athletics-class}" type="text" name="attr_CS-Athletics-class" value="0/0/0/0" class="sheet-calc sheet-skill-conds" readonly /></span>
							<span class="sheet-table-cell"><input title="@{CS-Athletics-ReqTrain}" type="checkbox" name="attr_CS-Athletics-ReqTrain" value="1" /></span>
							<span class="sheet-table-cell"><textarea class="sheet-skill-macro-text" title="@{CS-Athletics-note}" name="attr_CS-Athletics-note"></textarea></span>
							<span class="sheet-table-cell"><textarea class="sheet-skill-macro-text" title="@{CS-Athletics-macro}" name="attr_CS-Athletics-macro">&{template:pf_generic} @{toggle_accessible_flag} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_generic-skill}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle}} {{name=^{cs-athletics}}} {{Check=[[ @{skill-query} + [[ @{CS-Athletics} ]] ]]}} @{CS-Athletics-ut} @{skill_options} @{CS-Athletics-cond-notes} {{generic_note=@{CS-Athletics-note}}}</textarea></span>
						</div>
						<div class="sheet-table-row sheet-consolidated">
							<span class="sheet-table-cell"><button style="font-size:100%;" title="%{selected|CS-Finesse-Check}" type="roll" value="@{PC-Whisper} @{CS-Finesse-macro}" name="roll_CS-Finesse-Check"></button></span>
							<span class="sheet-table-cell"><input title="@{CS-Finesse-cs}" type="checkbox" name="attr_CS-Finesse-cs" value="3" /></span>
							<span class="sheet-table-cell sheet-left"><span title="Covers Disable Device, Sleight of Hand" data-i18n="finesse">Finesse</span></span>
							<span class="sheet-table-cell"><input title="@{CS-Finesse}" type="number" name="attr_CS-Finesse" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-table-cell"><input title="@{CS-Finesse-ranks}" type="number" name="attr_CS-Finesse-ranks" value="0" /></span>
							<span class="sheet-table-cell">
								<select title="@{CS-Finesse-ability}" name="attr_CS-Finesse-ability" class="sheet-select-small">
									<option value="@{STR-mod}" data-i18n="strength-abbrv">STR</option>
									<option value="@{DEX-mod}" data-i18n="dexterity-abbrv-default" selected>&#8226;DEX</option>
									<option value="@{CON-mod}" data-i18n="constitution-abbrv">CON</option>
									<option value="@{INT-mod}" data-i18n="intelligence-abbrv">INT</option>
									<option value="@{WIS-mod}" data-i18n="wisdom-abbrv">WIS</option>
									<option value="@{CHA-mod}" data-i18n="charisma-abbrv">CHA</option>
								</select>
							</span>
							<span class="sheet-table-cell"><input title="@{CS-Finesse-ability-mod}" type="number" name="attr_CS-Finesse-ability-mod" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-table-cell"><input title="@{CS-Finesse-racial}" type="number" name="attr_CS-Finesse-racial" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{CS-Finesse-trait}" type="number" name="attr_CS-Finesse-trait" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{CS-Finesse-feat}" type="number" name="attr_CS-Finesse-feat" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{CS-Finesse-item}" type="number" name="attr_CS-Finesse-item" value="0" /></span>
							<input class="sheet-error-mshow" type="checkbox" value="1" role="status" aria-live="polite" name="attr_CS-Finesse-misc-mod_error" />
							<span class="sheet-table-cell sheet-highlight"><input title="@{CS-Finesse-misc}" type="text" name="attr_CS-Finesse-misc" value="" placeholder="#/Equation" data-i18n-placeholder="equation-macro-place" /></span>
							<span class="sheet-table-cell sheet-highlight"><input title="@{CS-Finesse-misc-mod}" type="number" class="sheet-calc" readonly name="attr_CS-Finesse-misc-mod" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{CS-Finesse-class}" type="text" name="attr_CS-Finesse-class" value="0/0/0/0" class="sheet-calc sheet-skill-conds" readonly /></span>
							<span class="sheet-table-cell"><input title="@{CS-Finesse-ReqTrain}" type="checkbox" name="attr_CS-Finesse-ReqTrain" value="1" checked /></span>
							<span class="sheet-table-cell"><textarea class="sheet-skill-macro-text" title="@{CS-Finesse-note}" name="attr_CS-Finesse-note"></textarea></span>
							<span class="sheet-table-cell"><textarea class="sheet-skill-macro-text" title="@{CS-Finesse-macro}" name="attr_CS-Finesse-macro">&{template:pf_generic} @{toggle_accessible_flag} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_generic-skill}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle}} {{name=^{cs-finesse}}} {{Check=[[ @{skill-query} + [[ @{CS-Finesse} ]] ]]}} @{CS-Finesse-ut} @{skill_options} @{CS-Finesse-cond-notes} {{generic_note=@{CS-Finesse-note}}}</textarea></span>
						</div>
						<div class="sheet-table-row sheet-consolidated">
							<span class="sheet-table-cell"><button style="font-size:100%;" title="%{selected|CS-Influence-Check}" type="roll" value="@{PC-Whisper} @{CS-Influence-macro}" name="roll_CS-Influence-Check"></button></span>
							<span class="sheet-table-cell"><input title="@{CS-Influence-cs}" type="checkbox" name="attr_CS-Influence-cs" value="3" /></span>
							<span class="sheet-table-cell sheet-left"><span title="Covers Bluff, Diplomacy, Intimidate" data-i18n="influence">Influence</span></span>
							<span class="sheet-table-cell"><input title="@{CS-Influence}" type="number" name="attr_CS-Influence" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-table-cell"><input title="@{CS-Influence-ranks}" type="number" name="attr_CS-Influence-ranks" value="0" /></span>
							<span class="sheet-table-cell">
								<select title="@{CS-Influence-ability}" name="attr_CS-Influence-ability" class="sheet-select-small">
									<option value="@{STR-mod}" data-i18n="strength-abbrv">STR</option>
									<option value="@{DEX-mod}" data-i18n="dexterity-abbrv">DEX</option>
									<option value="@{CON-mod}" data-i18n="constitution-abbrv">CON</option>
									<option value="@{INT-mod}" data-i18n="intelligence-abbrv">INT</option>
									<option value="@{WIS-mod}" data-i18n="wisdom-abbrv">WIS</option>
									<option value="@{CHA-mod}" data-i18n="charisma-abbrv-default" selected>&#8226;CHA</option>
								</select>
							</span>
							<span class="sheet-table-cell"><input title="@{CS-Influence-ability-mod}" type="number" name="attr_CS-Influence-ability-mod" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-table-cell"><input title="@{CS-Influence-racial}" type="number" name="attr_CS-Influence-racial" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{CS-Influence-trait}" type="number" name="attr_CS-Influence-trait" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{CS-Influence-feat}" type="number" name="attr_CS-Influence-feat" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{CS-Influence-item}" type="number" name="attr_CS-Influence-item" value="0" /></span>
							<input class="sheet-error-mshow" type="checkbox" value="1" role="status" aria-live="polite" name="attr_CS-Influence-misc-mod_error" />
							<span class="sheet-table-cell sheet-highlight"><input title="@{CS-Influence-misc}" type="text" name="attr_CS-Influence-misc" value="" placeholder="#/Equation" data-i18n-placeholder="equation-macro-place" /></span>
							<span class="sheet-table-cell sheet-highlight"><input title="@{CS-Influence-misc-mod}" type="number" class="sheet-calc" readonly name="attr_CS-Influence-misc-mod" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{CS-Influence-class}" type="text" name="attr_CS-Influence-class" value="0/0/0/0" class="sheet-calc sheet-skill-conds" readonly /></span>
							<span class="sheet-table-cell"><input title="@{CS-Influence-ReqTrain}" type="checkbox" name="attr_CS-Influence-ReqTrain" value="1" /></span>
							<span class="sheet-table-cell"><textarea class="sheet-skill-macro-text" title="@{CS-Influence-note}" name="attr_CS-Influence-note"></textarea></span>
							<span class="sheet-table-cell"><textarea class="sheet-skill-macro-text" title="@{CS-Influence-macro}" name="attr_CS-Influence-macro">&{template:pf_generic} @{toggle_accessible_flag} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_generic-skill}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle}} {{name=^{cs-influence}}} {{Check=[[ @{skill-query} + [[ @{CS-Influence} ]] ]]}} @{CS-Influence-ut} @{skill_options} @{CS-Influence-cond-notes} {{generic_note=@{CS-Influence-note}}}</textarea></span>
						</div>
						<div class="sheet-table-row sheet-consolidated">
							<span class="sheet-table-cell"><button style="font-size:100%;" title="%{selected|CS-Nature-Check}" type="roll" value="@{PC-Whisper} @{CS-Nature-macro}" name="roll_CS-Nature-Check"></button></span>
							<span class="sheet-table-cell"><input title="@{CS-Nature-cs}" type="checkbox" name="attr_CS-Nature-cs" value="3" /></span>
							<span class="sheet-table-cell sheet-left"><span title="Covers Handle Animal, Knowledge (dungeoneering, geography, nature)" data-i18n="nature">Nature</span></span>
							<span class="sheet-table-cell"><input title="@{CS-Nature}" type="number" name="attr_CS-Nature" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-table-cell"><input title="@{CS-Nature-ranks}" type="number" name="attr_CS-Nature-ranks" value="0" /></span>
							<span class="sheet-table-cell">
								<select title="@{CS-Nature-ability}" name="attr_CS-Nature-ability" class="sheet-select-small">
									<option value="@{STR-mod}" data-i18n="strength-abbrv">STR</option>
									<option value="@{DEX-mod}" data-i18n="dexterity-abbrv">DEX</option>
									<option value="@{CON-mod}" data-i18n="constitution-abbrv">CON</option>
									<option value="@{INT-mod}" data-i18n="intelligence-abbrv-default" selected>&#8226;INT</option>
									<option value="@{WIS-mod}" data-i18n="wisdom-abbrv">WIS</option>
									<option value="@{CHA-mod}" data-i18n="charisma-abbrv">CHA</option>
								</select>
							</span>
							<span class="sheet-table-cell"><input title="@{CS-Nature-ability-mod}" type="number" name="attr_CS-Nature-ability-mod" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-table-cell"><input title="@{CS-Nature-racial}" type="number" name="attr_CS-Nature-racial" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{CS-Nature-trait}" type="number" name="attr_CS-Nature-trait" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{CS-Nature-feat}" type="number" name="attr_CS-Nature-feat" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{CS-Nature-item}" type="number" name="attr_CS-Nature-item" value="0" /></span>
							<input class="sheet-error-mshow" type="checkbox" value="1" role="status" aria-live="polite" name="attr_CS-Nature-misc-mod_error" />
							<span class="sheet-table-cell sheet-highlight"><input title="@{CS-Nature-misc}" type="text" name="attr_CS-Nature-misc" value="" placeholder="#/Equation" data-i18n-placeholder="equation-macro-place" /></span>
							<span class="sheet-table-cell sheet-highlight"><input title="@{CS-Nature-misc-mod}" type="number" class="sheet-calc" readonly name="attr_CS-Nature-misc-mod" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{CS-Nature-class}" type="text" name="attr_CS-Nature-class" value="0/0/0/0" class="sheet-calc sheet-skill-conds" readonly /></span>
							<span class="sheet-table-cell"><input title="@{CS-Nature-ReqTrain}" type="checkbox" name="attr_CS-Nature-ReqTrain" value="1" checked /></span>
							<span class="sheet-table-cell"><textarea class="sheet-skill-macro-text" title="@{CS-Nature-note}" name="attr_CS-Nature-note"></textarea></span>
							<span class="sheet-table-cell"><textarea class="sheet-skill-macro-text" title="@{CS-Nature-macro}" name="attr_CS-Nature-macro">&{template:pf_generic} @{toggle_accessible_flag} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_generic-skill}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle}} {{name=^{cs-nature}}} {{Check=[[ @{skill-query} + [[ @{CS-Nature} ]] ]]}} @{CS-Nature-ut} @{skill_options} @{CS-Nature-cond-notes} {{generic_note=@{CS-Nature-note}}}</textarea></span>
						</div>
						<div class="sheet-table-row sheet-consolidated">
							<span class="sheet-table-cell"><button style="font-size:100%;" title="%{selected|CS-Perception-Check}" type="roll" value="@{PC-Whisper} @{CS-Perception-macro}" name="roll_CS-Perception-Check"></button></span>
							<span class="sheet-table-cell"><input title="@{CS-Perception-cs}" type="checkbox" name="attr_CS-Perception-cs" value="3" /></span>
							<span class="sheet-table-cell sheet-left"><span title="Covers Perception, Sense Motive" data-i18n="perception">Perception</span></span>
							<span class="sheet-table-cell"><input title="@{CS-Perception}" type="number" name="attr_CS-Perception" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-table-cell"><input title="@{CS-Perception-ranks}" type="number" name="attr_CS-Perception-ranks" value="0" /></span>
							<span class="sheet-table-cell">
								<select title="@{CS-Perception-ability}" name="attr_CS-Perception-ability" class="sheet-select-small">
									<option value="@{STR-mod}" data-i18n="strength-abbrv">STR</option>
									<option value="@{DEX-mod}" data-i18n="dexterity-abbrv">DEX</option>
									<option value="@{CON-mod}" data-i18n="constitution-abbrv">CON</option>
									<option value="@{INT-mod}" data-i18n="intelligence-abbrv">INT</option>
									<option value="@{WIS-mod}" data-i18n="wisdom-abbrv-default" selected>&#8226;WIS</option>
									<option value="@{CHA-mod}" data-i18n="charisma-abbrv">CHA</option>
								</select>
							</span>
							<span class="sheet-table-cell"><input title="@{CS-Perception-ability-mod}" type="number" name="attr_CS-Perception-ability-mod" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-table-cell"><input title="@{CS-Perception-racial}" type="number" name="attr_CS-Perception-racial" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{CS-Perception-trait}" type="number" name="attr_CS-Perception-trait" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{CS-Perception-feat}" type="number" name="attr_CS-Perception-feat" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{CS-Perception-item}" type="number" name="attr_CS-Perception-item" value="0" /></span>
							<input class="sheet-error-mshow" type="checkbox" value="1" role="status" aria-live="polite" name="attr_CS-Perception-misc-mod_error" />
							<span class="sheet-table-cell sheet-highlight"><input title="@{CS-Perception-misc}" type="text" name="attr_CS-Perception-misc" value="" placeholder="#/Equation" data-i18n-placeholder="equation-macro-place" /></span>
							<span class="sheet-table-cell sheet-highlight"><input title="@{CS-Perception-misc-mod}" type="number" class="sheet-calc" readonly name="attr_CS-Perception-misc-mod" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{CS-Perception-class}" type="text" name="attr_CS-Perception-class" value="0/0/0/0" class="sheet-calc sheet-skill-conds" readonly /></span>
							<span class="sheet-table-cell"><input title="@{CS-Perception-ReqTrain}" type="checkbox" name="attr_CS-Perception-ReqTrain" value="1" /></span>
							<span class="sheet-table-cell"><textarea class="sheet-skill-macro-text" title="@{CS-Perception-note}" name="attr_CS-Perception-note"></textarea></span>
							<span class="sheet-table-cell"><textarea class="sheet-skill-macro-text" title="@{CS-Perception-macro}" name="attr_CS-Perception-macro">&{template:pf_generic} @{toggle_accessible_flag} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_generic-skill}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle}} {{name=^{cs-perception}}} {{Check=[[ @{skill-query} + [[ @{CS-Perception} ]] ]]}} @{CS-Perception-ut} @{skill_options} @{CS-Perception-cond-notes} {{generic_note=@{CS-Perception-note}}}</textarea></span>
						</div>
						<div class="sheet-table-row sheet-consolidated">
							<span class="sheet-table-cell"><button style="font-size:100%;" title="%{selected|CS-Performance-Check}" type="roll" value="@{PC-Whisper} @{CS-Performance-macro}" name="roll_CS-Performance-Check"></button></span>
							<span class="sheet-table-cell"><input title="@{CS-Performance-cs}" type="checkbox" name="attr_CS-Performance-cs" value="3" /></span>
							<span class="sheet-table-cell sheet-left"><span title="Covers Disguise, Perform" data-i18n="performance">Performance</span></span>
							<span class="sheet-table-cell"><input title="@{CS-Performance}" type="number" name="attr_CS-Performance" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-table-cell"><input title="@{CS-Performance-ranks}" type="number" name="attr_CS-Performance-ranks" value="0" /></span>
							<span class="sheet-table-cell">
								<select title="@{CS-Performance-ability}" name="attr_CS-Performance-ability" class="sheet-select-small">
									<option value="@{STR-mod}" data-i18n="strength-abbrv">STR</option>
									<option value="@{DEX-mod}" data-i18n="dexterity-abbrv">DEX</option>
									<option value="@{CON-mod}" data-i18n="constitution-abbrv">CON</option>
									<option value="@{INT-mod}" data-i18n="intelligence-abbrv">INT</option>
									<option value="@{WIS-mod}" data-i18n="wisdom-abbrv">WIS</option>
									<option value="@{CHA-mod}" data-i18n="charisma-abbrv-default" selected>&#8226;CHA</option>
								</select>
							</span>
							<span class="sheet-table-cell"><input title="@{CS-Performance-ability-mod}" type="number" name="attr_CS-Performance-ability-mod" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-table-cell"><input title="@{CS-Performance-racial}" type="number" name="attr_CS-Performance-racial" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{CS-Performance-trait}" type="number" name="attr_CS-Performance-trait" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{CS-Performance-feat}" type="number" name="attr_CS-Performance-feat" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{CS-Performance-item}" type="number" name="attr_CS-Performance-item" value="0" /></span>
							<input class="sheet-error-mshow" type="checkbox" value="1" role="status" aria-live="polite" name="attr_CS-Performance-misc-mod_error" />
							<span class="sheet-table-cell sheet-highlight"><input title="@{CS-Performance-misc}" type="text" name="attr_CS-Performance-misc" value="" placeholder="#/Equation" data-i18n-placeholder="equation-macro-place" /></span>
							<span class="sheet-table-cell sheet-highlight"><input title="@{CS-Performance-misc-mod}" type="number" class="sheet-calc" readonly name="attr_CS-Performance-misc-mod" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{CS-Performance-class}" type="text" name="attr_CS-Performance-class" value="0/0/0/0" class="sheet-calc sheet-skill-conds" readonly /></span>
							<span class="sheet-table-cell"><input title="@{CS-Performance-ReqTrain}" type="checkbox" name="attr_CS-Performance-ReqTrain" value="1" /></span>
							<span class="sheet-table-cell"><textarea class="sheet-skill-macro-text" title="@{CS-Performance-note}" name="attr_CS-Performance-note"></textarea></span>
							<span class="sheet-table-cell"><textarea class="sheet-skill-macro-text" title="@{CS-Performance-macro}" name="attr_CS-Performance-macro">&{template:pf_generic} @{toggle_accessible_flag} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_generic-skill}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle}} {{name=^{cs-performance}}} {{Check=[[ @{skill-query} + [[ @{CS-Performance} ]] ]]}} @{CS-Performance-ut} @{skill_options} @{CS-Performance-cond-notes} {{generic_note=@{CS-Performance-note}}}</textarea></span>
						</div>
						<div class="sheet-table-row sheet-consolidated">
							<span class="sheet-table-cell"><button style="font-size:100%;" title="%{selected|CS-Religion-Check}" type="roll" value="@{PC-Whisper} @{CS-Religion-macro}" name="roll_CS-Religion-Check"></button></span>
							<span class="sheet-table-cell"><input title="@{CS-Religion-cs}" type="checkbox" name="attr_CS-Religion-cs" value="3" /></span>
							<span class="sheet-table-cell sheet-left"><span title="Covers Knowledge (planes, religion)" data-i18n="religion">Religion</span></span>
							<span class="sheet-table-cell"><input title="@{CS-Religion}" type="number" name="attr_CS-Religion" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-table-cell"><input title="@{CS-Religion-ranks}" type="number" name="attr_CS-Religion-ranks" value="0" /></span>
							<span class="sheet-table-cell">
								<select title="@{CS-Religion-ability}" name="attr_CS-Religion-ability" class="sheet-select-small">
									<option value="@{STR-mod}" data-i18n="strength-abbrv">STR</option>
									<option value="@{DEX-mod}" data-i18n="dexterity-abbrv">DEX</option>
									<option value="@{CON-mod}" data-i18n="constitution-abbrv">CON</option>
									<option value="@{INT-mod}" data-i18n="intelligence-abbrv-default" selected>&#8226;INT</option>
									<option value="@{WIS-mod}" data-i18n="wisdom-abbrv">WIS</option>
									<option value="@{CHA-mod}" data-i18n="charisma-abbrv">CHA</option>
								</select>
							</span>
							<span class="sheet-table-cell"><input title="@{CS-Religion-ability-mod}" type="number" name="attr_CS-Religion-ability-mod" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-table-cell"><input title="@{CS-Religion-racial}" type="number" name="attr_CS-Religion-racial" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{CS-Religion-trait}" type="number" name="attr_CS-Religion-trait" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{CS-Religion-feat}" type="number" name="attr_CS-Religion-feat" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{CS-Religion-item}" type="number" name="attr_CS-Religion-item" value="0" /></span>
							<input class="sheet-error-mshow" type="checkbox" value="1" role="status" aria-live="polite" name="attr_CS-Religion-misc-mod_error" />
							<span class="sheet-table-cell sheet-highlight"><input title="@{CS-Religion-misc}" type="text" name="attr_CS-Religion-misc" value="" placeholder="#/Equation" data-i18n-placeholder="equation-macro-place" /></span>
							<span class="sheet-table-cell sheet-highlight"><input title="@{CS-Religion-misc-mod}" type="number" class="sheet-calc" readonly name="attr_CS-Religion-misc-mod" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{CS-Religion-class}" type="text" name="attr_CS-Religion-class" value="0/0/0/0" class="sheet-calc sheet-skill-conds" readonly /></span>
							<span class="sheet-table-cell"><input title="@{CS-Religion-ReqTrain}" type="checkbox" name="attr_CS-Religion-ReqTrain" value="1" checked /></span>
							<span class="sheet-table-cell"><textarea class="sheet-skill-macro-text" title="@{CS-Religion-note}" name="attr_CS-Religion-note"></textarea></span>
							<span class="sheet-table-cell"><textarea class="sheet-skill-macro-text" title="@{CS-Religion-macro}" name="attr_CS-Religion-macro">&{template:pf_generic} @{toggle_accessible_flag} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_generic-skill}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle}} {{name=^{cs-religion}}} {{Check=[[ @{skill-query} + [[ @{CS-Religion} ]] ]]}} @{CS-Religion-ut} @{skill_options} @{CS-Religion-cond-notes} {{generic_note=@{CS-Religion-note}}}</textarea></span>
						</div>
						<div class="sheet-table-row sheet-consolidated">
							<span class="sheet-table-cell"><button style="font-size:100%;" title="%{selected|CS-Society-Check}" type="roll" value="@{PC-Whisper} @{CS-Society-macro}" name="roll_CS-Society-Check"></button></span>
							<span class="sheet-table-cell"><input title="@{CS-Society-cs}" type="checkbox" name="attr_CS-Society-cs" value="3" /></span>
							<span class="sheet-table-cell sheet-left"><span title="Covers Knowledge (history, local, nobility), Linguistics" data-i18n="society">Society</span></span>
							<span class="sheet-table-cell"><input title="@{CS-Society}" type="number" name="attr_CS-Society" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-table-cell"><input title="@{CS-Society-ranks}" type="number" name="attr_CS-Society-ranks" value="0" /></span>
							<span class="sheet-table-cell">
								<select title="@{CS-Society-ability}" name="attr_CS-Society-ability" class="sheet-select-small">
									<option value="@{STR-mod}" data-i18n="strength-abbrv">STR</option>
									<option value="@{DEX-mod}" data-i18n="dexterity-abbrv">DEX</option>
									<option value="@{CON-mod}" data-i18n="constitution-abbrv">CON</option>
									<option value="@{INT-mod}" data-i18n="intelligence-abbrv-default" selected>&#8226;INT</option>
									<option value="@{WIS-mod}" data-i18n="wisdom-abbrv">WIS</option>
									<option value="@{CHA-mod}" data-i18n="charisma-abbrv">CHA</option>
								</select>
							</span>
							<span class="sheet-table-cell"><input title="@{CS-Society-ability-mod}" type="number" name="attr_CS-Society-ability-mod" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-table-cell"><input title="@{CS-Society-racial}" type="number" name="attr_CS-Society-racial" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{CS-Society-trait}" type="number" name="attr_CS-Society-trait" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{CS-Society-feat}" type="number" name="attr_CS-Society-feat" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{CS-Society-item}" type="number" name="attr_CS-Society-item" value="0" /></span>
							<input class="sheet-error-mshow" type="checkbox" value="1" role="status" aria-live="polite" name="attr_CS-Society-misc-mod_error" />
							<span class="sheet-table-cell sheet-highlight"><input title="@{CS-Society-misc}" type="text" name="attr_CS-Society-misc" value="" placeholder="#/Equation" data-i18n-placeholder="equation-macro-place" /></span>
							<span class="sheet-table-cell sheet-highlight"><input title="@{CS-Society-misc-mod}" type="number" class="sheet-calc" readonly name="attr_CS-Society-misc-mod" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{CS-Society-class}" type="text" name="attr_CS-Society-class" value="0/0/0/0" class="sheet-calc sheet-skill-conds" readonly /></span>
							<span class="sheet-table-cell"><input title="@{CS-Society-ReqTrain}" type="checkbox" name="attr_CS-Society-ReqTrain" value="1" checked /></span>
							<span class="sheet-table-cell"><textarea class="sheet-skill-macro-text" title="@{CS-Society-note}" name="attr_CS-Society-note"></textarea></span>
							<span class="sheet-table-cell"><textarea class="sheet-skill-macro-text" title="@{CS-Society-macro}" name="attr_CS-Society-macro">&{template:pf_generic} @{toggle_accessible_flag} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_generic-skill}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle}} {{name=^{cs-society}}} {{Check=[[ @{skill-query} + [[ @{CS-Society} ]] ]]}} @{CS-Society-ut} @{skill_options} @{CS-Society-cond-notes} {{generic_note=@{CS-Society-note}}}</textarea></span>
						</div>
						<div class="sheet-table-row sheet-consolidated">
							<span class="sheet-table-cell"><button style="font-size:100%;" title="%{selected|CS-Spellcraft-Check}" type="roll" value="@{PC-Whisper} @{CS-Spellcraft-macro}" name="roll_CS-Spellcraft-Check"></button></span>
							<span class="sheet-table-cell"><input title="@{CS-Spellcraft-cs}" type="checkbox" name="attr_CS-Spellcraft-cs" value="3" /></span>
							<span class="sheet-table-cell sheet-left"><span title="Covers Knowledge (arcana), Spellcraft, Use Magic Device" data-i18n="spellcraft">Spellcraft</span></span>
							<span class="sheet-table-cell"><input title="@{CS-Spellcraft}" type="number" name="attr_CS-Spellcraft" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-table-cell"><input title="@{CS-Spellcraft-ranks}" type="number" name="attr_CS-Spellcraft-ranks" value="0" /></span>
							<span class="sheet-table-cell">
								<select title="@{CS-Spellcraft-ability}" name="attr_CS-Spellcraft-ability" class="sheet-select-small">
									<option value="@{STR-mod}" data-i18n="strength-abbrv">STR</option>
									<option value="@{DEX-mod}" data-i18n="dexterity-abbrv">DEX</option>
									<option value="@{CON-mod}" data-i18n="constitution-abbrv">CON</option>
									<option value="@{INT-mod}" data-i18n="intelligence-abbrv-default" selected>&#8226;INT</option>
									<option value="@{WIS-mod}" data-i18n="wisdom-abbrv">WIS</option>
									<option value="@{CHA-mod}" data-i18n="charisma-abbrv">CHA</option>
								</select>
							</span>
							<span class="sheet-table-cell"><input title="@{CS-Spellcraft-ability-mod}" type="number" name="attr_CS-Spellcraft-ability-mod" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-table-cell"><input title="@{CS-Spellcraft-racial}" type="number" name="attr_CS-Spellcraft-racial" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{CS-Spellcraft-trait}" type="number" name="attr_CS-Spellcraft-trait" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{CS-Spellcraft-feat}" type="number" name="attr_CS-Spellcraft-feat" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{CS-Spellcraft-item}" type="number" name="attr_CS-Spellcraft-item" value="0" /></span>
							<input class="sheet-error-mshow" type="checkbox" value="1" role="status" aria-live="polite" name="attr_CS-Spellcraft-misc-mod_error" />
							<span class="sheet-table-cell sheet-highlight"><input title="@{CS-Spellcraft-misc}" type="text" name="attr_CS-Spellcraft-misc" value="" placeholder="#/Equation" data-i18n-placeholder="equation-macro-place" /></span>
							<span class="sheet-table-cell sheet-highlight"><input title="@{CS-Spellcraft-misc-mod}" type="number" class="sheet-calc" readonly name="attr_CS-Spellcraft-misc-mod" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{CS-Spellcraft-class}" type="text" name="attr_CS-Spellcraft-class" value="0/0/0/0" class="sheet-calc sheet-skill-conds" readonly /></span>
							<span class="sheet-table-cell"><input title="@{CS-Spellcraft-ReqTrain}" type="checkbox" name="attr_CS-Spellcraft-ReqTrain" value="1" checked /></span>
							<span class="sheet-table-cell"><textarea class="sheet-skill-macro-text" title="@{CS-Spellcraft-note}" name="attr_CS-Spellcraft-note"></textarea></span>
							<span class="sheet-table-cell"><textarea class="sheet-skill-macro-text" title="@{CS-Spellcraft-macro}" name="attr_CS-Spellcraft-macro">&{template:pf_generic} @{toggle_accessible_flag} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_generic-skill}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle}} {{name=^{cs-spellcraft}}} {{Check=[[ @{skill-query} + [[ @{CS-Spellcraft} ]] ]]}} @{CS-Spellcraft-ut} @{skill_options} @{CS-Spellcraft-cond-notes} {{generic_note=@{CS-Spellcraft-note}}}</textarea></span>
						</div>
						<div class="sheet-table-row sheet-consolidated">
							<span class="sheet-table-cell"><button style="font-size:100%;" title="%{selected|CS-Stealth-Check}" type="roll" value="@{PC-Whisper} @{CS-Stealth-macro}" name="roll_CS-Stealth-Check"></button></span>
							<span class="sheet-table-cell"><input title="@{CS-Stealth-cs}" type="checkbox" name="attr_CS-Stealth-cs" value="3" /></span>
							<span class="sheet-table-cell sheet-left"><span title="Covers Stealth" data-i18n="stealth">Stealth</span></span>
							<span class="sheet-table-cell"><input title="@{CS-Stealth}" type="number" name="attr_CS-Stealth" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-table-cell"><input title="@{CS-Stealth-ranks}" type="number" name="attr_CS-Stealth-ranks" value="0" /></span>
							<span class="sheet-table-cell">
								<select title="@{CS-Stealth-ability}" name="attr_CS-Stealth-ability" class="sheet-select-small">
									<option value="@{STR-mod}" data-i18n="strength-abbrv">STR</option>
									<option value="@{DEX-mod}" data-i18n="dexterity-abbrv-default" selected>&#8226;DEX</option>
									<option value="@{CON-mod}" data-i18n="constitution-abbrv">CON</option>
									<option value="@{INT-mod}" data-i18n="intelligence-abbrv">INT</option>
									<option value="@{WIS-mod}" data-i18n="wisdom-abbrv">WIS</option>
									<option value="@{CHA-mod}" data-i18n="charisma-abbrv">CHA</option>
								</select>
							</span>
							<span class="sheet-table-cell"><input title="@{CS-Stealth-ability-mod}" type="number" name="attr_CS-Stealth-ability-mod" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-table-cell"><input title="@{CS-Stealth-racial}" type="number" name="attr_CS-Stealth-racial" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{CS-Stealth-trait}" type="number" name="attr_CS-Stealth-trait" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{CS-Stealth-feat}" type="number" name="attr_CS-Stealth-feat" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{CS-Stealth-item}" type="number" name="attr_CS-Stealth-item" value="0" /></span>
							<input class="sheet-error-mshow" type="checkbox" value="1" role="status" aria-live="polite" name="attr_CS-Stealth-misc-mod_error" />
							<span class="sheet-table-cell sheet-highlight"><input title="@{CS-Stealth-misc}" type="text" name="attr_CS-Stealth-misc" value="" placeholder="#/Equation" data-i18n-placeholder="equation-macro-place" /></span>
							<span class="sheet-table-cell sheet-highlight"><input title="@{CS-Stealth-misc-mod}" type="number" class="sheet-calc" readonly name="attr_CS-Stealth-misc-mod" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{CS-Stealth-class}" type="text" name="attr_CS-Stealth-class" value="0/0/0/0" class="sheet-calc sheet-skill-conds" readonly /></span>
							<span class="sheet-table-cell"><input title="@{CS-Stealth-ReqTrain}" type="checkbox" name="attr_CS-Stealth-ReqTrain" value="1" /></span>
							<span class="sheet-table-cell"><textarea class="sheet-skill-macro-text" title="@{CS-Stealth-note}" name="attr_CS-Stealth-note"></textarea></span>
							<span class="sheet-table-cell"><textarea class="sheet-skill-macro-text" title="@{CS-Stealth-macro}" name="attr_CS-Stealth-macro">&{template:pf_generic} @{toggle_accessible_flag} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_generic-skill}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle}} {{name=^{cs-stealth}}} {{Check=[[ @{skill-query} + [[ @{CS-Stealth} ]] ]]}} @{CS-Stealth-ut} @{skill_options} @{CS-Stealth-cond-notes} {{generic_note=@{CS-Stealth-note}}}</textarea></span>
						</div>
						<div class="sheet-table-row sheet-consolidated">
							<span class="sheet-table-cell"><button style="font-size:100%;" title="%{selected|CS-Survival-Check}" type="roll" value="@{PC-Whisper} @{CS-Survival-macro}" name="roll_CS-Survival-Check"></button></span>
							<span class="sheet-table-cell"><input title="@{CS-Survival-cs}" type="checkbox" name="attr_CS-Survival-cs" value="3" /></span>
							<span class="sheet-table-cell sheet-left"><span title="Covers Heal, Survival" data-i18n="survival">Survival</span></span>
							<span class="sheet-table-cell"><input title="@{CS-Survival}" type="number" name="attr_CS-Survival" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-table-cell"><input title="@{CS-Survival-ranks}" type="number" name="attr_CS-Survival-ranks" value="0" /></span>
							<span class="sheet-table-cell">
								<select title="@{CS-Survival-ability}" name="attr_CS-Survival-ability" class="sheet-select-small">
									<option value="@{STR-mod}" data-i18n="strength-abbrv">STR</option>
									<option value="@{DEX-mod}" data-i18n="dexterity-abbrv">DEX</option>
									<option value="@{CON-mod}" data-i18n="constitution-abbrv">CON</option>
									<option value="@{INT-mod}" data-i18n="intelligence-abbrv">INT</option>
									<option value="@{WIS-mod}" data-i18n="wisdom-abbrv-default" selected>&#8226;WIS</option>
									<option value="@{CHA-mod}" data-i18n="charisma-abbrv">CHA</option>
								</select>
							</span>
							<span class="sheet-table-cell"><input title="@{CS-Survival-ability-mod}" type="number" name="attr_CS-Survival-ability-mod" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-table-cell"><input title="@{CS-Survival-racial}" type="number" name="attr_CS-Survival-racial" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{CS-Survival-trait}" type="number" name="attr_CS-Survival-trait" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{CS-Survival-feat}" type="number" name="attr_CS-Survival-feat" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{CS-Survival-item}" type="number" name="attr_CS-Survival-item" value="0" /></span>
							<input class="sheet-error-mshow" type="checkbox" value="1" role="status" aria-live="polite" name="attr_CS-Survival-misc-mod_error" />
							<span class="sheet-table-cell sheet-highlight"><input title="@{CS-Survival-misc}" type="text" name="attr_CS-Survival-misc" value="" placeholder="#/Equation" data-i18n-placeholder="equation-macro-place" /></span>
							<span class="sheet-table-cell sheet-highlight"><input title="@{CS-Survival-misc-mod}" type="number" class="sheet-calc" readonly name="attr_CS-Survival-misc-mod" value="0" /></span>
							<span class="sheet-table-cell"><input title="@{CS-Survival-class}" type="text" name="attr_CS-Survival-class" value="0/0/0/0" class="sheet-calc sheet-skill-conds" readonly /></span>
							<span class="sheet-table-cell"><input title="@{CS-Survival-ReqTrain}" type="checkbox" name="attr_CS-Survival-ReqTrain" value="1" /></span>
							<span class="sheet-table-cell"><textarea class="sheet-skill-macro-text" title="@{CS-Survival-note}" name="attr_CS-Survival-note"></textarea></span>
							<span class="sheet-table-cell"><textarea class="sheet-skill-macro-text" title="@{CS-Survival-macro}" name="attr_CS-Survival-macro">&{template:pf_generic} @{toggle_accessible_flag} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_generic-skill}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle}} {{name=^{cs-survival}}} {{Check=[[ @{skill-query} + [[ @{CS-Survival} ]] ]]}} @{CS-Survival-ut} @{skill_options} @{CS-Survival-cond-notes} {{generic_note=@{CS-Survival-note}}}</textarea></span>
						</div>
					</div>
					<div class="sheet-table sheet-center sheet-skills-key">
						<b><span data-i18n="class-skill-abbrv">CS</span></b> = <span data-i18n="class-skill">Class Skill</span><br>
						<b><span data-i18n="requires-training-abbrv">RT</span></b> = <span data-i18n="requires-training">Requires Training</span><br>
						<b><span data-i18n="class skill-bonus|armor-check-penalty|size-mod|condition-penalty-abbrv">Cl/Ac/Sz/Co</span></b> = <span data-i18n="class skill-bonus|armor-check-penalty|size-mod|condition-penalty">Class Skill Bonus / Armor check penalty / Size mod / Condition penalty</span>
					</div>
				</div>
				<div style="display:none;">
					<input name="attr_Acrobatics-ut" type="hidden" value="{{untrained=}}" /><input name="attr_Appraise-ut" type="hidden" value="{{untrained=}}" /><input name="attr_Bluff-ut" type="hidden" value="{{untrained=}}" /><input name="attr_Climb-ut" type="hidden" value="{{untrained=}}" />
					<input name="attr_Craft-ut" type="hidden" value="{{untrained=}}" /><input name="attr_Craft10-ut" type="hidden" value="{{untrained=}}" /><input name="attr_Craft2-ut" type="hidden" value="{{untrained=}}" /><input name="attr_Craft3-ut" type="hidden" value="{{untrained=}}" /><input name="attr_Craft4-ut" type="hidden" value="{{untrained=}}" /><input name="attr_Craft5-ut" type="hidden" value="{{untrained=}}" /><input name="attr_Craft6-ut" type="hidden" value="{{untrained=}}" /><input name="attr_Craft7-ut" type="hidden" value="{{untrained=}}" /><input name="attr_Craft8-ut" type="hidden" value="{{untrained=}}" /><input name="attr_Craft9-ut" type="hidden" value="{{untrained=}}" />
					<input name="attr_Diplomacy-ut" type="hidden" value="{{untrained=}}" /><input name="attr_Disable-Device-ut" type="hidden" value="{{untrained=1}}" /><input name="attr_Disguise-ut" type="hidden" value="{{untrained=}}" /><input name="attr_Escape-Artist-ut" type="hidden" value="{{untrained=}}" /><input name="attr_Fly-ut" type="hidden" value="{{untrained=}}" />
					<input name="attr_Handle-Animal-ut" type="hidden" value="{{untrained=1}}" /><input name="attr_Heal-ut" type="hidden" value="{{untrained=}}" /><input name="attr_Intimidate-ut" type="hidden" value="{{untrained=}}" />
					<input name="attr_Knowledge-Arcana-ut" type="hidden" value="{{untrained=1}}" /><input name="attr_Knowledge-Dungeoneering-ut" type="hidden" value="{{untrained=1}}" /><input name="attr_Knowledge-Engineering-ut" type="hidden" value="{{untrained=1}}" /><input name="attr_Knowledge-Geography-ut" type="hidden" value="{{untrained=1}}" /><input name="attr_Knowledge-History-ut" type="hidden" value="{{untrained=1}}" /><input name="attr_Knowledge-Local-ut" type="hidden" value="{{untrained=1}}" /><input name="attr_Knowledge-Nature-ut" type="hidden" value="{{untrained=1}}" /><input name="attr_Knowledge-Nobility-ut" type="hidden" value="{{untrained=1}}" /><input name="attr_Knowledge-Planes-ut" type="hidden" value="{{untrained=1}}" /><input name="attr_Knowledge-Religion-ut" type="hidden" value="{{untrained=1}}" />
					<input name="attr_Linguistics-ut" type="hidden" value="{{untrained=1}}" />
					<input name="attr_Misc-Skill-0-ut" type="hidden" value="{{untrained=}}" /><input name="attr_Misc-Skill-1-ut" type="hidden" value="{{untrained=}}" /><input name="attr_Misc-Skill-2-ut" type="hidden" value="{{untrained=}}" /><input name="attr_Misc-Skill-3-ut" type="hidden" value="{{untrained=}}" />
					<input name="attr_Misc-Skill-4-ut" type="hidden" value="{{untrained=}}" /><input name="attr_Misc-Skill-5-ut" type="hidden" value="{{untrained=}}" /><input name="attr_Misc-Skill-6-ut" type="hidden" value="{{untrained=}}" /><input name="attr_Misc-Skill-7-ut" type="hidden" value="{{untrained=}}" /><input name="attr_Misc-Skill-8-ut" type="hidden" value="{{untrained=}}" /><input name="attr_Misc-Skill-9-ut" type="hidden" value="{{untrained=}}" /><input name="attr_Perception-ut" type="hidden" value="{{untrained=}}" />
					<input name="attr_Perform-ut" type="hidden" value="{{untrained=}}" /><input name="attr_Perform10-ut" type="hidden" value="{{untrained=}}" /><input name="attr_Perform2-ut" type="hidden" value="{{untrained=}}" /><input name="attr_Perform3-ut" type="hidden" value="{{untrained=}}" /><input name="attr_Perform4-ut" type="hidden" value="{{untrained=}}" /><input name="attr_Perform5-ut" type="hidden" value="{{untrained=}}" /><input name="attr_Perform6-ut" type="hidden" value="{{untrained=}}" /><input name="attr_Perform7-ut" type="hidden" value="{{untrained=}}" />
					<input name="attr_Perform8-ut" type="hidden" value="{{untrained=}}" /><input name="attr_Perform9-ut" type="hidden" value="{{untrained=}}" />
					<input name="attr_Profession-ut" type="hidden" value="{{untrained=1}}" /><input name="attr_Profession10-ut" type="hidden" value="{{untrained=1}}" /><input name="attr_Profession2-ut" type="hidden" value="{{untrained=1}}" /><input name="attr_Profession3-ut" type="hidden" value="{{untrained=1}}" /><input name="attr_Profession4-ut" type="hidden" value="{{untrained=1}}" />
					<input name="attr_Profession5-ut" type="hidden" value="{{untrained=1}}" /><input name="attr_Profession6-ut" type="hidden" value="{{untrained=1}}" /><input name="attr_Profession7-ut" type="hidden" value="{{untrained=1}}" /><input name="attr_Profession8-ut" type="hidden" value="{{untrained=1}}" /><input name="attr_Profession9-ut" type="hidden" value="{{untrained=1}}" />
					<input name="attr_Ride-ut" type="hidden" value="{{untrained=}}" /><input name="attr_Sense-Motive-ut" type="hidden" value="{{untrained=}}" />
					<input name="attr_Sleight-of-Hand-ut" type="hidden" value="{{untrained=1}}" /><input name="attr_Spellcraft-ut" type="hidden" value="{{untrained=1}}" /><input name="attr_Stealth-ut" type="hidden" value="{{untrained=}}" /><input name="attr_Survival-ut" type="hidden" value="{{untrained=}}" /><input name="attr_Swim-ut" type="hidden" value="{{untrained=}}" /><input name="attr_Use-Magic-Device-ut" type="hidden" value="{{untrained=1}}" />
					<input name="attr_Artistry-ut" type="hidden" value="{{untrained=}}" /><input name="attr_Artistry2-ut" type="hidden" value="{{untrained=}}" /><input name="attr_Artistry3-ut" type="hidden" value="{{untrained=}}" /><input name="attr_Artistry4-ut" type="hidden" value="{{untrained=}}" /><input name="attr_Artistry5-ut" type="hidden" value="{{untrained=}}" /><input name="attr_Artistry6-ut" type="hidden" value="{{untrained=}}" /><input name="attr_Artistry7-ut" type="hidden" value="{{untrained=}}" />
					<input name="attr_Artistry8-ut" type="hidden" value="{{untrained=}}" /><input name="attr_Artistry9-ut" type="hidden" value="{{untrained=}}" /><input name="attr_Artistry10-ut" type="hidden" value="{{untrained=}}" />
					<input name="attr_Lore-ut" type="hidden" value="{{untrained=1}}" /><input name="attr_Lore2-ut" type="hidden" value="{{untrained=1}}" /><input name="attr_Lore3-ut" type="hidden" value="{{untrained=1}}" /><input name="attr_Lore4-ut" type="hidden" value="{{untrained=1}}" /><input name="attr_Lore5-ut" type="hidden" value="{{untrained=1}}" />
					<input name="attr_Lore6-ut" type="hidden" value="{{untrained=1}}" /><input name="attr_Lore7-ut" type="hidden" value="{{untrained=1}}" /><input name="attr_Lore8-ut" type="hidden" value="{{untrained=1}}" /><input name="attr_Lore9-ut" type="hidden" value="{{untrained=1}}" /><input name="attr_Lore10-ut" type="hidden" value="{{untrained=1}}" />
					<input name="attr_CS-Acrobatics-ut" type="hidden" value="{{untrained=}}" /><input name="attr_CS-Athletics-ut" type="hidden" value="{{untrained=}}" /><input name="attr_CS-Finesse-ut" type="hidden" value="{{untrained=1}}" />
					<input name="attr_CS-Influence-ut" type="hidden" value="{{untrained=}}" /><input name="attr_CS-Nature-ut" type="hidden" value="{{untrained=1}}" /><input name="attr_CS-Perception-ut" type="hidden" value="{{untrained=}}" /><input name="attr_CS-Performance-ut" type="hidden" value="{{untrained=}}" /><input name="attr_CS-Religion-ut" type="hidden" value="{{untrained=1}}" /><input name="attr_CS-Society-ut" type="hidden" value="{{untrained=1}}" /><input name="attr_CS-Spellcraft-ut" type="hidden" value="{{untrained=1}}" />
					<input name="attr_CS-Stealth-ut" type="hidden" value="{{untrained=}}" /><input name="attr_CS-Survival-ut" type="hidden" value="{{untrained=}}" />
					<input name="attr_Acrobatics-cond-notes" type="hidden" value="" /><input name="attr_Appraise-cond-notes" type="hidden" value="" /><input name="attr_Bluff-cond-notes" type="hidden" value="" /><input name="attr_Climb-cond-notes" type="hidden" value="" />
					<input name="attr_Craft-cond-notes" type="hidden" value="" /><input name="attr_Craft10-cond-notes" type="hidden" value="" /><input name="attr_Craft2-cond-notes" type="hidden" value="" /><input name="attr_Craft3-cond-notes" type="hidden" value="" /><input name="attr_Craft4-cond-notes" type="hidden" value="" /><input name="attr_Craft5-cond-notes" type="hidden" value="" /><input name="attr_Craft6-cond-notes" type="hidden" value="" /><input name="attr_Craft7-cond-notes" type="hidden" value="" /><input name="attr_Craft8-cond-notes" type="hidden" value="" /><input name="attr_Craft9-cond-notes" type="hidden" value="" />
					<input name="attr_Diplomacy-cond-notes" type="hidden" value="" /><input name="attr_Disable-Device-cond-notes" type="hidden" value="" /><input name="attr_Disguise-cond-notes" type="hidden" value="" /><input name="attr_Escape-Artist-cond-notes" type="hidden" value="" /><input name="attr_Fly-cond-notes" type="hidden" value="" />
					<input name="attr_Handle-Animal-cond-notes" type="hidden" value="" /><input name="attr_Heal-cond-notes" type="hidden" value="" /><input name="attr_Intimidate-cond-notes" type="hidden" value="" />
					<input name="attr_Knowledge-Arcana-cond-notes" type="hidden" value="" /><input name="attr_Knowledge-Dungeoneering-cond-notes" type="hidden" value="" /><input name="attr_Knowledge-Engineering-cond-notes" type="hidden" value="" /><input name="attr_Knowledge-Geography-cond-notes" type="hidden" value="" /><input name="attr_Knowledge-History-cond-notes" type="hidden" value="" /><input name="attr_Knowledge-Local-cond-notes" type="hidden" value="" /><input name="attr_Knowledge-Nature-cond-notes" type="hidden" value="" /><input name="attr_Knowledge-Nobility-cond-notes" type="hidden" value="" /><input name="attr_Knowledge-Planes-cond-notes" type="hidden" value="" /><input name="attr_Knowledge-Religion-cond-notes" type="hidden" value="" />
					<input name="attr_Linguistics-cond-notes" type="hidden" value="" />
					<input name="attr_Misc-Skill-0-cond-notes" type="hidden" value="" /><input name="attr_Misc-Skill-1-cond-notes" type="hidden" value="" /><input name="attr_Misc-Skill-2-cond-notes" type="hidden" value="" /><input name="attr_Misc-Skill-3-cond-notes" type="hidden" value="" />
					<input name="attr_Misc-Skill-4-cond-notes" type="hidden" value="" /><input name="attr_Misc-Skill-5-cond-notes" type="hidden" value="" /><input name="attr_Misc-Skill-6-cond-notes" type="hidden" value="" /><input name="attr_Misc-Skill-7-cond-notes" type="hidden" value="" /><input name="attr_Misc-Skill-8-cond-notes" type="hidden" value="" /><input name="attr_Misc-Skill-9-cond-notes" type="hidden" value="" /><input name="attr_Perception-cond-notes" type="hidden" value="" />
					<input name="attr_Perform-cond-notes" type="hidden" value="" /><input name="attr_Perform10-cond-notes" type="hidden" value="" /><input name="attr_Perform2-cond-notes" type="hidden" value="" /><input name="attr_Perform3-cond-notes" type="hidden" value="" /><input name="attr_Perform4-cond-notes" type="hidden" value="" /><input name="attr_Perform5-cond-notes" type="hidden" value="" /><input name="attr_Perform6-cond-notes" type="hidden" value="" /><input name="attr_Perform7-cond-notes" type="hidden" value="" />
					<input name="attr_Perform8-cond-notes" type="hidden" value="" /><input name="attr_Perform9-cond-notes" type="hidden" value="" />
					<input name="attr_Profession-cond-notes" type="hidden" value="" /><input name="attr_Profession10-cond-notes" type="hidden" value="" /><input name="attr_Profession2-cond-notes" type="hidden" value="" /><input name="attr_Profession3-cond-notes" type="hidden" value="" /><input name="attr_Profession4-cond-notes" type="hidden" value="" />
					<input name="attr_Profession5-cond-notes" type="hidden" value="" /><input name="attr_Profession6-cond-notes" type="hidden" value="" /><input name="attr_Profession7-cond-notes" type="hidden" value="" /><input name="attr_Profession8-cond-notes" type="hidden" value="" /><input name="attr_Profession9-cond-notes" type="hidden" value="" />
					<input name="attr_Ride-cond-notes" type="hidden" value="" /><input name="attr_Sense-Motive-cond-notes" type="hidden" value="" />
					<input name="attr_Sleight-of-Hand-cond-notes" type="hidden" value="" /><input name="attr_Spellcraft-cond-notes" type="hidden" value="" /><input name="attr_Stealth-cond-notes" type="hidden" value="" /><input name="attr_Survival-cond-notes" type="hidden" value="" /><input name="attr_Swim-cond-notes" type="hidden" value="" /><input name="attr_Use-Magic-Device-cond-notes" type="hidden" value="" />
					<input name="attr_Artistry-cond-notes" type="hidden" value="" /><input name="attr_Artistry2-cond-notes" type="hidden" value="" /><input name="attr_Artistry3-cond-notes" type="hidden" value="" /><input name="attr_Artistry4-cond-notes" type="hidden" value="" /><input name="attr_Artistry5-cond-notes" type="hidden" value="" /><input name="attr_Artistry6-cond-notes" type="hidden" value="" /><input name="attr_Artistry7-cond-notes" type="hidden" value="" />
					<input name="attr_Artistry8-cond-notes" type="hidden" value="" /><input name="attr_Artistry9-cond-notes" type="hidden" value="" /><input name="attr_Artistry10-cond-notes" type="hidden" value="" />
					<input name="attr_Lore-cond-notes" type="hidden" value="" /><input name="attr_Lore2-cond-notes" type="hidden" value="" /><input name="attr_Lore3-cond-notes" type="hidden" value="" /><input name="attr_Lore4-cond-notes" type="hidden" value="" /><input name="attr_Lore5-cond-notes" type="hidden" value="" />
					<input name="attr_Lore6-cond-notes" type="hidden" value="" /><input name="attr_Lore7-cond-notes" type="hidden" value="" /><input name="attr_Lore8-cond-notes" type="hidden" value="" /><input name="attr_Lore9-cond-notes" type="hidden" value="" /><input name="attr_Lore10-cond-notes" type="hidden" value="" />
					<input name="attr_CS-Acrobatics-cond-notes" type="hidden" value="" /><input name="attr_CS-Athletics-cond-notes" type="hidden" value="" /><input name="attr_CS-Finesse-cond-notes" type="hidden" value="" />
					<input name="attr_CS-Influence-cond-notes" type="hidden" value="" /><input name="attr_CS-Nature-cond-notes" type="hidden" value="" /><input name="attr_CS-Perception-cond-notes" type="hidden" value="" /><input name="attr_CS-Performance-cond-notes" type="hidden" value="" /><input name="attr_CS-Religion-cond-notes" type="hidden" value="" /><input name="attr_CS-Society-cond-notes" type="hidden" value="" /><input name="attr_CS-Spellcraft-cond-notes" type="hidden" value="" />
					<input name="attr_CS-Stealth-cond-notes" type="hidden" value="" /><input name="attr_CS-Survival-cond-notes" type="hidden" value="" />
				</div>
				<div class="sheet-cheat"></div>
				<input class="sheet-showarrow sheet-h2arrow" type="checkbox" name="attr_skill-notes-show" data-i18n-aria-label="skill-notes" title="Click to expand" data-i18n-title="showsect-cmd" value="1" checked />
				<h2 class="sheet-clickheader sheet-showsect"><label title="Click to expand" data-i18n-title="showsect-cmd" data-i18n-aria-label="showsect-cmd" data-i18n="skill-notes">Skill Notes</label></h2>
				<div class="sheet-h2-section sheet-skill-notes">
					<div class="sheet-table sheet-center sheet-notes-cell">
						<span class="sheet-table-name sheet-show-readonly" data-i18n="skill-notes">Skill Notes</span>
					<div class="sheet-table-row">
						<span class="sheet-table-cell sheet-left"><textarea class="sheet-notes" title="@{Skill-notes}" name="attr_Skill-notes" placeholder="Put notes about context-sensitive Skill bonuses here." data-i18n-placeholder="skill-notes-place"></textarea></span>
					</div>
				</div>
			</div>
		</div>
			<div class="sheet-section4 sheet-section sheet-section-abilities" role="region" aria-label="Abilities" data-i18n-aria-label="abilities">
				<h1 class="sheet-selected-tabtitle" data-i18n="abilities">Abilities</h1>
				<div class="sheet-col sheet-col1">
					<div class="sheet-h2-section sheet-inline sheet-ability-buttons">
						<input type="checkbox" class="sheet-npc-show sheet-noshow" name="attr_is_npc" value="1" role="presentation" />
						<div role="contentinfo" aria-label="Command buttons for chat -displays ability buttons in chat to press there" class="sheet-top-buttons sheet-inline sheet-sect-pc">
							<input class="sheet-showarrow sheet-h2arrow" style="width:6em;margin-right:-6em;" type="checkbox" name="attr_ability-command-buttons-show" aria-label="check to reveal command buttons" value="1" checked />
							<h2 class="sheet-clickheader sheet-showsect"><label title="Show chat ability command buttons" data-i18n-title="buttons-showsect-cmd" data-i18n-aria-label="buttons-showsect-cmd" data-i18n="buttons">Buttons</label></h2>
							<span class="sheet-h2-section sheet-inline" style="border:none;">
								<span class="sheet-hide-readonly" style="margin-left: 2em;"></span>
								<input type="checkbox" class="sheet-mythic-show" name="attr_mythic-adventures-show" value="1" role="presentation" />
								<input type="checkbox" class="sheet-traits-show" name="attr_use_traits" value="1" role="presentation" />
								<input type="checkbox" class="sheet-racial-traits-show" name="attr_use_racial_traits" value="1" role="presentation" />
								<input type="checkbox" class="sheet-featlist-show" name="attr_use_feats" value="1" role="presentation" />
								<input type="checkbox" class="sheet-classfeatures-show" name="attr_use_class_features" value="1" role="presentation" />
								<input type="checkbox" class="sheet-oldslas-show" name="attr_use_spell-like-abilities" value="1" role="presentation" />
								<button type="roll" name="roll_abilities" class="sheet-command-button" value="@{CHAR-whisper} @{ability_buttons_macro} {{whisper=@{PC-whisper}}} {{switch=~@{character_id}|NPC-abilities}}" title="%{selected|abilities}"><span data-i18n="abilities">Abilities</span></button>
								<button type="roll" name="roll_ex_button" class="sheet-command-button" value="@{CHAR-whisper} @{ex_buttons_macro} {{whisper=@{PC-whisper}}} {{switch=~@{character_id}|NPC-ex_button}}" title="%{selected|ex_button}"><span data-i18n="extraordinary-abilities-menu">Ex</span></button>
								<button type="roll" name="roll_sp_button" class="sheet-command-button" value="@{CHAR-whisper} @{sp_buttons_macro} {{whisper=@{PC-whisper}}} {{switch=~@{character_id}|NPC-sp_button}}" title="%{selected|sp_button}"><span data-i18n="spell-like-abilities-menu">Sp</span></button>
								<button type="roll" name="roll_su_button" class="sheet-command-button" value="@{CHAR-whisper} @{su_buttons_macro} {{whisper=@{PC-whisper}}} {{switch=~@{character_id}|NPC-su_button}}" title="%{selected|su_button}"><span data-i18n="supernatural-abilities-menu">Su</span></button>
								<button type="roll" name="roll_class-ability_button" class="sheet-command-button sheet-section-classfeatureslist" value="@{CHAR-whisper} @{class-ability_buttons_macro}" title="%{selected|class-ability_button}"><span data-i18n="original-class-features-list">Orig Class Features</span></button>
								<button type="roll" name="roll_feat_button" class="sheet-command-button sheet-section-featlist" value="@{CHAR-whisper} @{feat_buttons_macro} {{whisper=@{PC-whisper}}} {{switch=~@{character_id}|NPC-feat_button}}" title="%{selected|feat_button}"><span data-i18n="original-feats-list">Orig Feats</span></button>
								<button type="roll" name="roll_trait_button" class="sheet-command-button sheet-section-traits" value="@{CHAR-whisper} @{trait_buttons_macro}" title="%{selected|trait_button}"><span data-i18n="original-traits-list">Orig Traits</span></button>
								<button type="roll" name="roll_racial-trait_button" class="sheet-command-button sheet-section-racial-traits" value="@{CHAR-whisper} @{racial-trait_buttons_macro} {{whisper=@{PC-whisper}}} {{switch=~@{character_id}|NPC-racial-trait_button}}" title="%{selected|racial-trait_button}"><span data-i18n="original-racial-traits-list">Orig Racial Traits</span></button>
								<button type="roll" name="roll_mythic-feat_button" class="sheet-command-button sheet-section-mythic" value="@{CHAR-whisper} @{mythic-feat_buttons_macro}" title="%{selected|mythic-feat_button}"><span data-i18n="mythic-feats">Orig Mythic Feats</span></button>
								<button type="roll" name="roll_mythic-ability_button" class="sheet-command-button sheet-section-mythic" value="@{CHAR-whisper} @{mythic-ability_buttons_macro}" title="%{selected|mythic-ability_button}"><span data-i18n="mythic-abilities">Orig Mythic Abilities</span></button>
								<button type="roll" name="roll_spell-like-abilities_button" class="sheet-command-button sheet-section-oldslas" value="@{CHAR-whisper} @{npc-spell-like-abilities_buttons_macro}" title="%{selected|spell-like-abilities_button}"><span data-i18n="original-spell-like-abilities-list">Orig spell-like abilities</span></button>
								<input type="hidden" name="attr_ability_buttons_macro" value="&{template:pf_block} @{toggle_attack_accessible} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_spell}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle}} {{name=^{abilities}}} @{orig_ability_header_macro} {{description=^{none-available} }}" />
								<input type="hidden" name="attr_ex_buttons_macro" value="&{template:pf_block} @{toggle_attack_accessible} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_spell}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle=^{extraordinary-abilities-menu}}} {{name=^{abilities}}} {{description=^{none-available} }}" />
								<input type="hidden" name="attr_sp_buttons_macro" value="&{template:pf_block} @{toggle_attack_accessible} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_spell}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle=^{spell-like-abilities-menu}}} {{name=^{abilities}}} {{description=^{none-available} }}" />
								<input type="hidden" name="attr_su_buttons_macro" value="&{template:pf_block} @{toggle_attack_accessible} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_spell}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle=^{supernatural-abilities-menu}}} {{name=^{abilities}}} {{description=^{none-available} }}" />
								<input type="hidden" name="attr_orig_ability_header_macro" value="" />
								<input type="hidden" name="attr_class-ability_buttons_macro" value="&{template:pf_block} @{toggle_attack_accessible} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_attack-melee}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle}} {{name=^{original-class-features-list}}} {{description=^{none-available} }}" />
								<input type="hidden" name="attr_feat_buttons_macro" value="&{template:pf_block} @{toggle_attack_accessible} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_attack-melee}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle}} {{name=^{original-feats-list}}} {{description=^{none-available} }}" />
								<input type="hidden" name="attr_trait_buttons_macro" value="&{template:pf_block} @{toggle_attack_accessible} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_attack-melee}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle}} {{name=^{original-traits-list}}} {{description=^{none-available} }}" />
								<input type="hidden" name="attr_racial-trait_buttons_macro" value="&{template:pf_block} @{toggle_attack_accessible} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_attack-melee}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle}} {{name=^{original-racial-traits-list}}} {{description=^{none-available} }}" />
								<input type="hidden" name="attr_mythic-feat_buttons_macro" value="&{template:pf_block} @{toggle_attack_accessible} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_attack-melee}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle}} {{name=^{mythic-feats}}} {{description=^{none-available} }}" />
								<input type="hidden" name="attr_mythic-ability_buttons_macro" value="&{template:pf_block} @{toggle_attack_accessible} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_attack-melee}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle}} {{name=^{mythic-abilities}}} {{description=^{none-available} }}" />
							</span>
						</div>
						<div class="sheet-cheat"></div>
						<div role="contentinfo" aria-label="Command buttons for chat -displays ability buttons in chat to press there" class="sheet-top-buttons sheet-inline sheet-sect-npc">
							<input class="sheet-showarrow sheet-h2arrow" style="width:6em;margin-right:-6em;" type="checkbox" name="attr_NPC-ability-command-buttons-show" aria-label="check to reveal command buttons" value="1" checked />
							<h2 class="sheet-clickheader sheet-showsect"><label title="Show chat ability command buttons" data-i18n-title="buttons-showsect-cmd" data-i18n-aria-label="buttons-showsect-cmd" data-i18n="npc-buttons">NPC Buttons</label></h2>												
							<span class="sheet-h2-section sheet-inline" style="border:none;">
								<span class="sheet-hide-readonly" style="margin-left: 2em;"></span>
								<input type="checkbox" class="sheet-mythic-show" name="attr_mythic-adventures-show" value="1" role="presentation" />
								<input type="checkbox" class="sheet-traits-show" name="attr_use_traits" value="1" role="presentation" />
								<input type="checkbox" class="sheet-racial-traits-show" name="attr_use_racial_traits" value="1" role="presentation" />
								<input type="checkbox" class="sheet-featlist-show" name="attr_use_feats" value="1" role="presentation" />
								<input type="checkbox" class="sheet-classfeatures-show" name="attr_use_class_features" value="1" role="presentation" />
								<input type="checkbox" class="sheet-oldslas-show" name="attr_use_spell-like-abilities" value="1" role="presentation" />
								<button type="roll" name="roll_NPC-abilities" class="sheet-command-button" value="@{NPC-ability_buttons_macro} {{whisper=@{NPC-whisper}}} {{switch=~@{character_id}|abilities}}" title="%{selected|NPC-abilities}"><span data-i18n="abilities">Abilities</span></button>
								<button type="roll" name="roll_NPC-ex_button" class="sheet-command-button" value="@{NPC-ex_buttons_macro} {{whisper=@{NPC-whisper}}} {{switch=~@{character_id}|ex_button}}" title="%{selected|NPC-ex_button}"><span data-i18n="extraordinary-abilities-menu">Ex</span></button>
								<button type="roll" name="roll_NPC-sp_button" class="sheet-command-button" value="@{NPC-sp_buttons_macro} {{whisper=@{NPC-whisper}}} {{switch=~@{character_id}|sp_button}}" title="%{selected|NPC-sp_button}"><span data-i18n="spell-like-abilities-menu">Sp</span></button>
								<button type="roll" name="roll_NPC-su_button" class="sheet-command-button" value="@{NPC-su_buttons_macro} {{whisper=@{NPC-whisper}}} {{switch=~@{character_id}|su_button}}" title="%{selected|NPC-su_button}"><span data-i18n="supernatural-abilities-menu">Su</span></button>
								<button type="roll" name="roll_class-ability_button" class="sheet-command-button sheet-section-classfeatureslist" value="@{class-ability_button}" title="%{selected|class-ability_buttons_macro}"><span data-i18n="original-class-features-list">Class Features</span></button>
								<button type="roll" name="roll_NPC-feat_button" class="sheet-command-button sheet-section-featlist" value="@{NPC-feat_buttons_macro} {{whisper=@{NPC-whisper}}} {{switch=~@{character_id}|feat_button}}" title="%{selected|NPC-feat_button}"><span data-i18n="original-feats-list">Orig Feats</span></button>
								<button type="roll" name="roll_trait_button" class="sheet-command-button sheet-section-traits" value="@{trait_buttons_macro}" title="%{selected|trait_button}"><span data-i18n="original-traits-list">Orig Traits</span></button>
								<button type="roll" name="roll_NPC-racial-trait_button" class="sheet-command-button sheet-section-racial-traits" value="@{NPC-racial-trait_buttons_macro} {{whisper=@{NPC-whisper}}} {{switch=~@{character_id}|racial-trait_button}}" title="%{selected|NPC-racial-trait_button}"><span data-i18n="original-racial-traits-list">Orig Racial Traits</span></button>
								<button type="roll" name="roll_mythic-feat_button" class="sheet-command-button sheet-section-mythic" value="@{mythic-feat_buttons_macro}" title="%{selected|mythic-feat_button}"><span data-i18n="mythic-feats">Orig Mythic Feats</span></button>
								<button type="roll" name="roll_mythic-ability_button" class="sheet-command-button sheet-section-mythic" value="@{mythic-ability_buttons_macro}" title="%{selected|mythic-ability_button}"><span data-i18n="mythic-abilities">Orig Mythic Abilities</span></button>
								<button type="roll" name="roll_npc-spell-like-abilities_button" class="sheet-command-button sheet-section-oldslas" value="@{npc-spell-like-abilities_buttons_macro}" title="%{selected|npc-spell-like-abilities_button}"><span data-i18n="original-spell-like-abilities-list">Orig spell-like abilities</span></button>
								<input type="hidden" name="attr_NPC-ability_buttons_macro" value="/w &quot;@{character_name}&quot; &{template:pf_block} @{toggle_attack_accessible} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_spell}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle}} {{name=^{npc} ^{abilities}}} @{orig_ability_header_macro} {{description=^{none-available} }}" />				
								<input type="hidden" name="attr_NPC-ex_buttons_macro" value="/w &quot;@{character_name}&quot; &{template:pf_block} @{toggle_attack_accessible} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_spell}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle=^{extraordinary-abilities-menu}}} {{name=^{npc} ^{abilities}}} {{description=^{none-available} }}" />
								<input type="hidden" name="attr_NPC-sp_buttons_macro" value="/w &quot;@{character_name}&quot; &{template:pf_block} @{toggle_attack_accessible} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_spell}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle=^{spell-like-abilities-menu}}} {{name=^{npc} ^{abilities}}} {{description=^{none-available} }}" />
								<input type="hidden" name="attr_NPC-su_buttons_macro" value="/w &quot;@{character_name}&quot; &{template:pf_block} @{toggle_attack_accessible} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_spell}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle=^{supernatural-abilities-menu}}} {{name=^{npc} ^{abilities}}} {{description=^{none-available} }}" />
								<input type="hidden" name="attr_NPC-orig_ability_header_macro" value="" />
								<input type="hidden" name="attr_NPC-feat_buttons_macro" value="/w &quot;@{character_name}&quot; &{template:pf_block} @{toggle_attack_accessible} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_attack-melee}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle}} {{name=^{npc} ^{original-feats-list}}} {{description=^{none-available} }}" />
								<input type="hidden" name="attr_NPC-racial-trait_buttons_macro" value="/w &quot;@{character_name}&quot; &{template:pf_block} @{toggle_attack_accessible} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_attack-melee}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle}} {{name=^{npc} ^{original-racial-traits-list}}} {{description=^{none-available} }}" />
								<input type="hidden" name="attr_npc-spell-like-abilities_buttons_macro" value="/w &quot;@{character_name}&quot; &{template:pf_block} @{toggle_attack_accessible} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_spell}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle}} {{name=^{npc} ^{original-spell-like-abilities-list}}} {{description=^{none-available} }}" />								
		<!-- not used yet:
								<input type="hidden" name="attr_NPC-class-ability_buttons_macro" value="/w &quot;@{character_name}&quot; &{template:pf_block} @{toggle_attack_accessible} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_attack-melee}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle}} {{name=^{npc} ^{original-class-features-list}}} {{description=^{none-available} }}" />
								<input type="hidden" name="attr_NPC-trait_buttons_macro" value="/w &quot;@{character_name}&quot; &{template:pf_block} @{toggle_attack_accessible} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_attack-melee}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle}} {{name=^{npc} ^{original-traits-list}}} {{description=^{none-available} }}" />
								<input type="hidden" name="attr_NPC-mythic-feat_buttons_macro" value="/w &quot;@{character_name}&quot; &{template:pf_block} @{toggle_attack_accessible} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_attack-melee}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle}} {{name=^{npc} ^{mythic-feats}}} {{description=^{none-available} }}" />
								<input type="hidden" name="attr_NPC-mythic-ability_buttons_macro" value="/w &quot;@{character_name}&quot; &{template:pf_block} @{toggle_attack_accessible} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_attack-melee}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle}} {{name=^{npc} ^{mythic-abilities}}} {{description=^{none-available} }}" />
								-->
							</span>
						</div>
					</div>
					<input type="checkbox" class="sheet-mythic-show" name="attr_mythic-adventures-show" value="1" role="presentation" />
					<input type="checkbox" class="sheet-psionic-show" name="attr_psionics-show" value="1" role="presentation" />
					<div class="sheet-cheat"></div>
					<input class="sheet-showarrow sheet-h2arrow" type="checkbox" name="attr_feats-show" data-i18n-aria-label="feats" title="Click to expand" data-i18n-title="showsect-cmd" value="1" checked />
					<h2 class="sheet-clickheader sheet-showsect"><label title="Click to expand" data-i18n-title="showsect-cmd" data-i18n-aria-label="showsect-cmd" data-i18n="feats-calculation">Feat calculations</label></h2>
					<div class="sheet-h2-section sheet-table sheet-feats">
						<span class="sheet-secondary-table-name sheet-show-readonly" data-i18n="feats-available">Feats Available</span>
						<div class="sheet-table-row">
							<span class="sheet-table-header" data-i18n="feats-by-level">Feats by Level</span>
							<span class="sheet-table-header sheet-divider"></span>
							<span class="sheet-table-header" data-i18n="racial-bonus">Racial Bonus</span>
							<span class="sheet-table-header sheet-divider"></span>
							<span class="sheet-table-header" data-i18n="class-bonus">Class Bonus</span>
							<span class="sheet-table-header sheet-divider"></span>
							<span class="sheet-table-header" data-i18n="miscellaneous-bonus">Misc Bonus</span>
							<span class="sheet-table-header sheet-divider"></span>
							<span class="sheet-table-header" data-i18n="total-feats">Total Feats</span>
							<span class="sheet-table-header sheet-table-rightcell"></span>
						</div>
						<div class="sheet-table-row">
							<span class="sheet-table-cell"><input type="text" title="@{feats-level}" name="attr_feats-level" value="(floor((@{level} + 1)/2))" class="sheet-number" disabled /></span>
							<span class="sheet-divider">+</span>
							<span class="sheet-table-cell"><input type="number" title="@{feats-race}" name="attr_feats-race" value="0" /></span>
							<span class="sheet-divider">+</span>
							<span class="sheet-table-cell"><input type="number" title="@{feats-class}" name="attr_feats-class" value="0" /></span>
							<span class="sheet-divider">+</span>
							<span class="sheet-table-cell"><input type="number" title="@{feats-misc}" name="attr_feats-misc" value="0" /></span>
							<span class="sheet-divider">=</span>
							<span class="sheet-table-cell"><input type="text" title="@{feats-total}" name="attr_feats-total" value="(@{feats-level} + [[ @{feats-race} ]] + [[ @{feats-class} ]] + [[ @{feats-misc} ]])" class="sheet-number" disabled /></span>
							<span class="sheet-table-rightcell"></span>
						</div>
					</div>			
					<div class="sheet-cheat"></div>
					<input class="sheet-showarrow sheet-h2arrow sheet-section-mythic" type="checkbox" name="attr_mythic-info-show" data-i18n-aria-label="mythic-hero-power" title="Click to expand" data-i18n-title="showsect-cmd" value="1" checked />
					<h2 class="sheet-clickheader sheet-showsect sheet-section-mythic"><label title="Click to expand" data-i18n-title="showsect-cmd" data-i18n-aria-label="showsect-cmd" data-i18n="mythic-hero-power">Mythic Hero Information and Mythic Power</label></h2>
					<div class="sheet-h2-section sheet-section-mythic sheet-wide-readonly sheet-noborder-readonly sheet-mythic">
						<div class="sheet-cheat"></div>
						<div class="sheet-h2-section sheet-section-mythic">	
							<div class="sheet-h2-section sheet-section-mythic" style="display:inline-block; width:60%;" role="region" data-i18n-aria-label="mythic-information">
								<div class="sheet-table sheet-wide-numbers" >
									<span class="sheet-table-name sheet-show-readonly" data-i18n="mythic-information">Mythic Information</span>
									<div class="sheet-table-row">
										<span class="sheet-table-header" style="width:1.5em;">#</span>
										<span class="sheet-table-header" style="width:50%;" data-i18n-title="mythic-path-title" data-i18n-aria-label="mythic-path-title" title="Mythic Path: archmage, champion, guardian, hierophant, marshal, or trickster" data-i18n="mythic-path">Mythic Path</span>
										<span class="sheet-table-header" data-i18n-title="mythic-tier-title" data-i18n-aria-label="mythic-tier-title" title="Mythic tier or rank. Mythic tiers range from 1 to 10" data-i18n="mythic-tier">Tier</span>
										<span class="sheet-table-header" data-i18n-title="mythic-bonus-hit-points-title" data-i18n-aria-label="mythic-bonus-hit-points-title" title="Bonus hit points that are gained from each tier advancement: archmage: 3, champion: 5, guardian: 5, hierophant: 4, marshal: 4, or trickster: 4" data-i18n="mythic-bonus-hit-points-abbrv">Bonus HP</span>
									</div>
									<div class="sheet-table-row">
										<span class="sheet-table-cell"><b>0.</b></span>
										<span class="sheet-table-cell"><input title="@{mythic-0-path}" type="text" name="attr_mythic-0-path" placeholder="Path Name" data-i18n-placeholder="mythic-path-name" /></span>
										<span class="sheet-table-cell"><input title="@{mythic-tier}" type="number" name="attr_mythic-tier" value="0"></span>
										<span class="sheet-table-cell"><input title="@{mythic-hp}" type="number" name="attr_mythic-hp" value="0" /></span>
									</div>
									<div class="sheet-table-row">
										<span class="sheet-table-cell"><b>1.</b></span>
										<span class="sheet-table-cell"><input title="@{mythic-1-path}" type="text" name="attr_mythic-1-path" placeholder="Path Name" data-i18n-placeholder="mythic-path-name" /></span>
										<span class="sheet-table-cell"><b data-i18n-title="mythic-hit-points-title" data-i18n-aria-label="mythic-hit-points-title" title="Bonus HP x Tier. This is automatically added to Max HP"><span data-i18n="mythic-hit-points">Total Mythic HP</span>:</b></span>
										<span class="sheet-table-cell"><input title="@{total-mythic-hp}" type="number" name="attr_total-mythic-hp" value="0" class="sheet-calc" readonly /></span>
									</div>
								</div>
							</div>
							<div class="sheet-h2-section sheet-section-mythic" style="display:inline-block;width:39%;" role="region" data-i18n-aria-label="mythic-information">
								<div class="sheet-table sheet-wide-numbers" >
									<span class="sheet-table-name sheet-show-readonly" data-i18n="mythic-power">Mythic Power</span>
									<div class="sheet-table-row">
										<span class="sheet-table-header" data-i18n-title="mythic-power-avail-title" data-i18n-aria-label="mythic-power-avail-title" title="How much mythic power you have available to use" data-i18n="mythic-power-current">Current MP</span>
										<span class="sheet-table-header">/</span>
										<span class="sheet-table-header" data-i18n-title="mythic-power-max-title" data-i18n-aria-label="mythic-power-max-title" title="The maximum amount of mythic power you have" data-i18n="mythic-power-maximum">Max MP</span>
										<span class="sheet-table-header"></span>
										<span class="sheet-table-header" data-i18n-title="mythic-power-tiers-title" data-i18n-aria-label="mythic-power-tiers-title" title="The amount of mythic power you gain from tiers" data-i18n="mythic-power-tier">Tier MP</span>
										<span class="sheet-table-header"></span>
										<span class="sheet-table-header" data-i18n-title="mythic-power-miscellaneous-title" data-i18n-aria-label="mythic-power-miscellaneous-title" title="Any additional mythic power you gain from abilities or feats" data-i18n="miscellaneous-abbrv">Misc</span>
									</div>
									<div class="sheet-table-row">
										<span class="sheet-table-cell"><input type="number" title="@{mythic-power}" name="attr_mythic-power" value="0" min="0" /></span>
										<span class="sheet-divider">/</span>
										<span class="sheet-table-cell"><input type="number" title="@{mythic-power|max}" name="attr_mythic-power_max" value="0" class="sheet-calc" readonly /></span>
										<span class="sheet-divider">=</span>
										<span class="sheet-table-cell"><input type="number" title="@{tier-mythic-power}" name="attr_tier-mythic-power" value="0" class="sheet-calc" readonly /></span>
										<span class="sheet-divider">+</span>
										<span class="sheet-table-cell"><input type="number" title="@{misc-mythic-power}" name="attr_misc-mythic-power" value="0" /></span>
									</div>
									<div class="sheet-table-row">
										<span class="sheet-table-cell sheet-nowrap"><label ><input type="checkbox" title="@{mythic-paragon}" name="attr_mythic-paragon" value="2" /><b data-i18n-title="mythic-paragon-title" data-i18n-aria-label="mythic-paragon-title" title="Has Mythic Paragon feat"><span data-i18n="mythic-paragon"> Mythic Paragon</span></b></label></span>
									</div>
								</div>
							</div>
						</div>
					</div>
					<div class="sheet-cheat"></div>
					<input class="sheet-showarrow sheet-h2arrow sheet-section-psionic" type="checkbox" name="attr_psionic-info-show" data-i18n-aria-label="psionic-information" title="Click to expand" data-i18n-title="showsect-cmd" value="1" checked />
					<h2 class="sheet-clickheader sheet-showsect sheet-section-psionic"><label title="Click to expand" data-i18n-title="showsect-cmd" data-i18n-aria-label="showsect-cmd" data-i18n="psionic-information">Psionic Information</label></h2>
					<div class="sheet-h2-section sheet-section-psionic sheet-table sheet-wide-readonly sheet-wide-numbers sheet-psionic">
						<span class="sheet-table-name sheet-show-readonly" data-i18n="psionic-manifester-level-and-power-points">Psionic Manifester Level and Power Points</span>
						<div class="sheet-table-group-head">
							<div class="sheet-table-row">
								<span class="sheet-table-header" data-i18n-title="psionic-manifester-lvls-title" data-i18n-aria-label="psionic-manifester-lvls-title" title="The sum of the levels of psionic classes that have a key ability score selected on the right." data-i18n="manifester-levels">Manifester Levels</span>
								<span class="sheet-table-header"></span>
								<span class="sheet-table-header" data-i18n-title="psionic-manifester-miscellaneous-title" data-i18n-aria-label="psionic-manifester-miscellaneous-title" title="Any miscellaneous modifiers to the manifester level." data-i18n="miscellaneous-abbrv">Misc</span>
								<span class="sheet-table-header"></span>
								<span class="sheet-table-header" data-i18n-title="psionic-manifester-levels-title" data-i18n-aria-label="psionic-manifester-levels-title" title="The total adjusted manifester level." data-i18n="total">Total</span>
								<span class="sheet-table-header">|</span>
								<span class="sheet-table-header" data-i18n-title="psionic-power-points-available-title" data-i18n-aria-label="psionic-power-points-available-title" title="How many power points you have available to use." data-i18n="current-power-points-abbrv">Current PP</span>
								<span class="sheet-table-header">/</span>
								<span class="sheet-table-header" data-i18n-title="psionic-power-points-reserve-title" data-i18n-aria-label="psionic-power-points-reserve-title" title="Your power point reserve is equal to your base power points gained from your class, bonus power points from a high key ability score, and any additional bonus power points from sources such as your character race and feat selections." data-i18n="power-point-reserve-abbrv">PP Reserve</span>
								<span class="sheet-table-header"></span>
								<span class="sheet-table-header" data-i18n-title="psionic-power-points-class-title" data-i18n-aria-label="psionic-power-points-class-title" title="The amount of base bonus power points you gain from you class(es)." data-i18n="class-power-points-abbrv">Class PP</span>
								<span class="sheet-table-header"></span>
								<span class="sheet-table-header" data-i18n-title="psionic-ability-title" data-i18n-aria-label="psionic-ability-title" title="The psionic class key ability modifier source." data-i18n="key-ability">Key Ability</span>
								<span class="sheet-table-header" data-i18n-title="psionic-power-points-bonus-title" data-i18n-aria-label="psionic-power-points-bonus-title" title="The amount of bonus power points you gain from manifester level and key ability modifier." data-i18n="bonus-power-points-abbrv">Bonus PP</span>
								<span class="sheet-table-header"></span>
								<span class="sheet-table-header" data-i18n-title="psionic-power-points-miscellaneous-title" data-i18n-aria-label="psionic-power-points-miscellaneous-title" title="Any additional power points you gain from race, traits or feats." data-i18n="miscellaneous-abbrv">Misc</span>
							</div>
						</div>
						<div class="sheet-table-row">
							<span class="sheet-table-cell"><input type="number" title="@{psionic-level}" name="attr_psionic-level" value="0" min="0" /></span>
							<span class="sheet-divider">+</span>
							<span class="sheet-table-cell"><input type="number" title="@{psionic-level-misc}" name="attr_psionic-level-misc" value="0" /></span>
							<span class="sheet-divider">=</span>
							<span class="sheet-table-cell"><input type="number" title="@{psionic-level-total}" name="attr_psionic-level-total" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-divider">|</span>
							<span class="sheet-table-cell"><input type="number" title="@{psionic-power}" name="attr_psionic-power" value="0" min="0" /></span>
							<span class="sheet-divider">/</span>
							<span class="sheet-table-cell"><input type="number" title="@{psionic-power|max}" name="attr_psionic-power_max" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-divider">=</span>
							<span class="sheet-table-cell"><input type="number" title="@{class-psionic-power}" name="attr_class-psionic-power" value="0" /></span>
							<span class="sheet-divider">+</span>
							<span class="sheet-table-cell" style="width:8%;">
								<select title="@{selected-ability-psionic-power}" name="attr_selected-ability-psionic-power" style="font-size:1em;">
									<option value="0 - [[ @{condition-sickened} ]]" data-i18n="none-default" selected>&#8226;None</option>
									<option value="@{STR-mod} - [[ @{condition-sickened} ]]" data-i18n="strength-abbrv">STR</option>
									<option value="@{DEX-mod} - [[ @{condition-sickened} ]]" data-i18n="dexterity-abbrv">DEX</option>
									<option value="@{CON-mod} - [[ @{condition-sickened} ]]" data-i18n="constitution-abbrv">CON</option>
									<option value="@{INT-mod} - [[ @{condition-sickened} ]]" data-i18n="intelligence-abbrv">INT</option>
									<option value="@{WIS-mod} - [[ @{condition-sickened} ]]" data-i18n="wisdom-abbrv">WIS</option>
									<option value="@{CHA-mod} - [[ @{condition-sickened} ]]" data-i18n="charisma-abbrv">CHA</option>
								</select>
							</span>
							<span class="sheet-table-cell"><input type="number" title="@{ability-psionic-power}" name="attr_ability-psionic-power" value="0" class="sheet-calc" readonly /></span>
							<span class="sheet-divider">+</span>
							<span class="sheet-table-cell"><input type="number" title="@{misc-psionic-power}" name="attr_misc-psionic-power" value="0" /></span>
						</div>
						<div class="sheet-table-row" style="height:2em;">
							<span class="sheet-table-cell sheet-nowrap"><label ><input type="checkbox" title="@{psionic-focus}" name="attr_psionic-focus" value="1" /><b data-i18n-title="psionic-focus-title" data-i18n-aria-label="psionic-focus-title" title="Is maintaining psionic focus."><span data-i18n="psionic-focus"> Psionic Focus</span></b></label></span>
						</div>
					</div>
				</div>
				<div class="sheet-cheat"></div>
				<input class="sheet-showarrow sheet-h2arrow" type="checkbox" name="attr_abilities-show" data-i18n-aria-label="abilities" title="Click to expand" data-i18n-title="showsect-cmd" value="1" checked  />
				<h2 class="sheet-clickheader sheet-showsect"><label title="Click to expand" data-i18n-title="showsect-cmd" data-i18n="abilities">Abilities</label></h2>
				<div class="sheet-h2-section sheet-abilities sheet-repeating-sect sheet-wide-readonly">
					<input type="checkbox" class="sheet-mythic-show" name="attr_mythic-adventures-show" value="1" role="presentation" />
					<div role="menubar" class="sheet-abilitiesnav sheet-tabs sheet-custbordernav" aria-label="Abilities" data-i18n-aria-label="abilities"></div>
					<input type="checkbox" class="sheet-mythic-show" name="attr_mythic-adventures-show" value="1" role="presentation" />
					<input type="radio" class="sheet-tabinput sheet-tab0 sheet-wider-tab" name="attr_abilities_tab" value="0" data-i18n-title="original-class-features-list" data-i18n-aria-label="class-features" />
					<label role="menuitem" class="sheet-tab sheet-tab0 sheet-wider-tab" data-i18n="class-features">Features</label>
					<input type="radio" class="sheet-tabinput sheet-tab1 sheet-med-tab" name="attr_abilities_tab" value="1" data-i18n-title="original-feats-list" data-i18n-aria-label="feats" />
					<label role="menuitem" class="sheet-tab sheet-tab1 sheet-med-tab" data-i18n="feats">Feats</label>
					<input type="radio" class="sheet-tabinput sheet-tab2 sheet-med-tab" name="attr_abilities_tab" value="2" data-i18n-title="traits-and-racial-traits" data-i18n-aria-label="traits-and-racial-traits" />
					<label role="menuitem" class="sheet-tab sheet-tab2 sheet-med-tab" data-i18n="traits">Traits</label>
					<input type="radio" class="sheet-tabinput sheet-tab3 sheet-section-mythic sheet-wider-tab" name="attr_abilities_tab" value="3" data-i18n-title="mythic-abilities" data-i18n-aria-label="mythic-abilities" />
					<label role="menuitem" class="sheet-tab sheet-tab3 sheet-section-mythic sheet-wider-tab" data-i18n="mythic-abilities">Mythic Abilities</label>
					<input type="radio" class="sheet-tabinput sheet-tab4" name="attr_abilities_tab" value="4" data-i18n-title="special-attacks" data-i18n-aria-label="special-attacks" />
					<label role="menuitem" class="sheet-tab sheet-tab4" data-i18n="special-attacks-abbrv">Spec Atk</label>
					<input type="radio" class="sheet-tabinput sheet-tab5" name="attr_abilities_tab" value="5" data-i18n-title="special-abilities" data-i18n-aria-label="special-abilities" />
					<label role="menuitem" class="sheet-tab sheet-tab5" data-i18n="special-abilities-abbrv">Spec Abil</label>
					<input type="radio" class="sheet-tabinput sheet-tab6" name="attr_abilities_tab" value="6" data-i18n-title="spell-like-abilities" data-i18n-aria-label="spell-like-abilities" />
					<label role="menuitem" class="sheet-tab sheet-tab6" data-i18n="spell-like-abilities-abbrv">Spell-like</label>
					<input type="radio" class="sheet-tabinput sheet-tab7 sheet-narrow-tab" name="attr_abilities_tab" value="7" data-i18n-title="special-qualities" data-i18n-aria-label="special-qualities" />
					<label role="menuitem" class="sheet-tab sheet-tab7 sheet-narrow-tab" data-i18n="special-qualities-abbrv">SQ</label>
					<input type="radio" class="sheet-tabinput sheet-tab8 sheet-med-tab" name="attr_abilities_tab" value="8" data-i18n-title="all-other-desc" data-i18n-aria-label="all-other-desc"  />
					<label role="menuitem" class="sheet-tab sheet-tab8 sheet-med-tab" data-i18n="miscellaneous-abbrv">Misc</label>
					<input type="radio" class="sheet-tabinput sheet-tab99 sheet-narrow-tab" name="attr_abilities_tab" value="99" data-i18n-title="all" data-i18n-aria-label="all" checked />
					<label role="menuitem" class="sheet-tab sheet-tab99 sheet-narrow-tab" data-i18n="all">All</label>
					<span class="sheet-divider-db-lg">&nbsp;</span>
					<input type="radio" class="sheet-tabinput sheet-tab9 sheet-narrow-tab" name="attr_abilities_tab" value="9" data-i18n-title="extraordinary-abilities" data-i18n-aria-label="extraordinary-abilities" />
					<label role="menuitem" class="sheet-tab sheet-tab9 sheet-narrow-tab" data-i18n="extraordinary-abbrv">Ex</label>
					<input type="radio" class="sheet-tabinput sheet-tab10 sheet-narrow-tab" name="attr_abilities_tab" value="10" data-i18n-title="spell-like-abilities" data-i18n-aria-label="spell-like-abilities" />
					<label role="menuitem" class="sheet-tab sheet-tab10 sheet-narrow-tab" data-i18n="spell-like-abbrv">Sp</label>
					<input type="radio" class="sheet-tabinput sheet-tab11 sheet-narrow-tab" name="attr_abilities_tab" value="11" data-i18n-title="supernatural-abilities" data-i18n-aria-label="supernatural-abilities" />
					<label role="menuitem" class="sheet-tab sheet-tab11 sheet-narrow-tab" data-i18n="supernatural-abbrv">Su</label>
					<div class="sheet-cheat"></div>
					<span class="sheet-nontable-name sheet-selected-tabtitle" data-i18n="all-abilities">All Abilities</span>
					<div></div> <!--prevents the repeating buttons(expand/collapse, split-view) from changing position when sheet is in collapsed mode-->
					<input type="checkbox" class="sheet-minimize-show sheet-cssbutton" data-i18n-title="minimize-all-cmd" data-i18n-aria-label="minimize-all-cmd" title="Minimize all rows." name="attr_abilities-min-show" value="1" /><span></span>
					<input type="checkbox" class="sheet-lock-show sheet-cssbutton" data-i18n-title="expand-cmd" data-i18n-aria-label="expand-cmd" title="Collapse or expand all rows." name="attr_abilities-expand-show" value="1" /><span></span>
					<input type="checkbox" class="sheet-split-column-show sheet-cssbutton" data-i18n-title="column-cmd" data-i18n-aria-label="column-cmd" title="Split into two columns" name="attr_abilities-column-show" value="1" /><span></span>
					<input class="sheet-deletebutton sheet-cssbutton sheet-deletesect-show" type="checkbox" name="attr_delete_repeating_ability_btn" value="1" data-i18n-title="delete-ability" data-i18n-aria-label="delete-ability-must-confirm-next-checkbox" /><span></span><label class="sheet-deletesect sheet-allrows-note"><input type="checkbox" class="sheet-selectedlabel-check" name="attr_delete_repeating_ability" data-i18n-aria-label="confirm-delete-ability" data-i18n-title="confirm-delete-ability" value="1" /><b data-i18n="delete-all-rows-are-you-sure">delete all rows are you sure</b></label>
					<span class="sheet-compendium-note sheet-hide-readonly" >
						<span class="sheet-compendium-icon">i</span>
						<span class="sheet-vertical-middle" data-i18n-title="compendium-drag-n-drop-desc" data-i18n-aria-label="compendium-drag-n-drop-desc" data-i18n="compendium-drag-drop-compatible"> Compendium drag-n-drop compatible </span>
						<span class="sheet-drag-icon">&#9111;</span>
					</span>
					<div class="sheet-repeating-fields sheet-table sheet-hiderepborder sheet-section-ability-list">
						<fieldset class="repeating_ability">
							<span class="sheet-error"><span class="sheet-pictos">!</span><span data-i18n="error-msg1">Error! You must delete this row before editing any items in this section.</span></span>
							<input type="checkbox" name="attr_tabcat-1" value="1" class="sheet-tabcopy custnavsection-new" checked role="presentation" />
							<input type="checkbox" name="attr_tabcat0" value="1" class="sheet-tabcopy custnavsection-0" role="presentation" />
							<input type="checkbox" name="attr_tabcat1" value="1" class="sheet-tabcopy custnavsection-1" role="presentation" />
							<input type="checkbox" name="attr_tabcat2" value="1" class="sheet-tabcopy custnavsection-2" role="presentation" />
							<input type="checkbox" name="attr_tabcat3" value="1" class="sheet-tabcopy custnavsection-3" role="presentation" />
							<input type="checkbox" name="attr_tabcat4" value="1" class="sheet-tabcopy custnavsection-4" role="presentation" />
							<input type="checkbox" name="attr_tabcat5" value="1" class="sheet-tabcopy custnavsection-5" role="presentation" />
							<input type="checkbox" name="attr_tabcat6" value="1" class="sheet-tabcopy custnavsection-6" role="presentation" />
							<input type="checkbox" name="attr_tabcat7" value="1" class="sheet-tabcopy custnavsection-7" role="presentation" />
							<input type="checkbox" name="attr_tabcat8" value="1" class="sheet-tabcopy custnavsection-8" role="presentation" />
							<input type="checkbox" name="attr_tabcat9" value="1" class="sheet-tabcopy custnavsection-9" role="presentation" />
							<input type="checkbox" name="attr_tabcat10" value="1" class="sheet-tabcopy custnavsection-10" role="presentation" />
							<input type="checkbox" name="attr_tabcat11" value="1" class="sheet-tabcopy custnavsection-11" role="presentation" />
							<div class="sheet-custrepeating-border sheet-nontable-repeating compendium-drop-target">
								<input type="checkbox" class="sheet-counted sheet-sect-show" data-i18n-title="minimize-cmd" data-i18n-aria-label="minimize-cmd" title="Minimize Row" name="attr_row-show" value="1" checked /><span></span>
								<span style="display:none;" class="sheet-small-label2 sheet-repeating-rollbutton"><button type="roll" name="attr_npc-roll" title="%{selected|repeating_ability_$X_npc-roll}" value="@{NPC-Whisper} @{macro-text}"></button></span>
								<span class="sheet-small-label2 sheet-repeating-rollbutton"><button type="roll" name="attr_roll" title="%{selected|repeating_ability_$X_roll}" value="@{PC-Whisper} @{macro-text}"></button></span>
								<label class="sheet-small-label2 sheet-hide-readonly" style="width:2.5em;"><input type="checkbox" name="attr_showinmenu" title="@{repeating_ability_$X_showinmenu}" value="1" /><span data-i18n="show-in-menu" data-i18n-title="show-in-menu-title" data-i18n-aria-label="show-in-menu-title">Show</span></label>
								<label class="sheet-small-label2 sheet-entry-10p-shrink">
									<select class="sheet-select-small" title="@{repeating_ability_$X_rule_category}" name="attr_rule_category" data-i18n-aria-label="rule-category" >
										<option value="" data-i18n="select-one-default" selected>&#8226;Select One</option>
										<option value="class-features" data-i18n="class-features">Class Features</option>
										<!-- confusing since defensive abilities already a textbox<option value="defensive-abilities" data-i18n="defensive-abilities">Defensive Abilities</option>-->
										<option value="feats" data-i18n="feats">Feats</option>
										<option value="monster-rule" data-i18n="monster-rule">Monster Rule</option>
										<option value="special-abilities" data-i18n="special-abilities">Special Abilities</option>
										<option value="special-attacks" data-i18n="special-attacks">Special Attacks</option>
										<option value="special-qualities" data-i18n="special-qualities">Special Qualities</option>
										<option value="spell-like-abilities" data-i18n="spell-like-abilities" >Spell-like Abilities</option>
										<option value="racial-traits" data-i18n="racial-traits">Racial Traits</option>
										<option value="traits" data-i18n="traits">Traits</option>
										<option value="other" data-i18n="other">Other</option>
									</select>
									<span data-i18n-title="rule-category" data-i18n-aria-label="rule-category" data-i18n="rule">Rule</span>
								</label>
								<label class="sheet-small-label2 sheet-entry-vshort sheet-sect">
									<select class="sheet-select-small sheet-select-class" title="@{repeating_ability_$X_CL-basis}" name="attr_CL-basis" >
										<option value="0" data-i18n="custom" >Custom</option>
										<option value="@{class-0-level}" data-i18n="1-ordinal-class">1st Class</option>
										<option value="@{class-1-level}" data-i18n="2-ordinal-class">2nd Class</option>
										<option value="@{class-2-level}" data-i18n="3-ordinal-class">3rd Class</option>
										<option value="@{class-3-level}" data-i18n="4-ordinal-class">4th Class</option>
										<option value="@{class-4-level}" data-i18n="5-ordinal-class">5th Class</option>
										<option value="@{class-5-level}" data-i18n="6-ordinal-class">6th Class</option>
										<option value="@{npc-hd-num}" data-i18n="race-hd-default" selected>Race only</option>
										<option value="@{level}" data-i18n="character-level" >Character Level</option>
									</select>
									<span data-i18n-title="caster-level-basis-explanation" data-i18n-aria-label="caster-level-basis-explanation" data-i18n="source" >Source</span>
								</label>
								<input type="checkbox" name="attr_CL-basis" value="0" class="sheet-sect2-show-inverse sheet-noshow" />
								<label class="sheet-small-label2 sheet-entry-10p-shrink sheet-sect2-inverse sheet-sect">
									<input type="text" value="" name="attr_class-name" title="@{repeating_ability_$X_class-name}" class="sheet-calc" readonly />
									<span class="sheet-nowrap" data-i18n="source-name">Source Name</span>
								</label>
								<label class="sheet-small-label2 sheet-entry-20p-shrink"><input title="@{repeating_ability_$X_name}" type="text" name="attr_name" placeholder="Name" data-i18n-placeholder="name" accept="Name" /><span data-i18n="name">Name</span></label>
								<label class="sheet-small-label2 sheet-exspsu-dropdown">
									<select title="@{repeating_ability_$X_ability_type}" name="attr_ability_type">
										<option value="" data-i18n="not-applicable-abbrv-default" selected>&#8226;N/A</option>
										<option value="Ex" data-i18n="extraordinary-abbrv">Ex</option>
										<option value="Sp" data-i18n="spell-like-abbrv" >Sp</option>
										<option value="Su" data-i18n="supernatural-abbrv">Su</option>
									</select>
									<span data-i18n-title="ability-type-title" data-i18n-aria-label="ability-type-title" data-i18n="type">Type</span>
								</label>
								<label class="sheet-small-label2 sheet-entry-20p-shrink" style="height:auto;"><textarea class="sheet-inline-textarea sheet-both" title="@{repeating_ability_$X_short-description}" name="attr_short-description" placeholder="Short Description" data-i18n-placeholder="short-description" ></textarea><span data-i18n="short-description-abbrv">Short Desc</span></label>
								<label class="sheet-small-label2" style="width:6em;">
									<select class="sheet-select-small" name="attr_frequency" style="width:100%;">
										<option value="not-applicable" data-i18n="not-applicable-abbrv-default" selected>&#8226; N/A</option>
										<option value="constant" data-i18n="constant">Constant</constant>
										<option value="atwill" data-i18n="at-will">At Will</option>
										<option value="perday" data-i18n="per-day-abbrv">/day</option>
										<option value="hexfreq" data-i18n="24-per-target-abbrv">/24/target</option>
										<option value="everyrounds" data-i18n="every-rounds-abbrv">Every n rnds</option>
										<option value="permonth" data-i18n="per-month-abbrv">/month</option>
										<option value="other" data-i18n="other">Other</option>
									</select>
									<span data-i18n-title="frequency-title" data-i18n-aria-label="frequency-title" data-i18n="frequency-abbrv">Freq</span>
								</label>
								<input type="checkbox" value="everyrounds" name="attr_frequency" class="sheet-nextitem-show sheet-or-C-show sheet-noshow" />
								<label class="sheet-small-label2 sheet-sect sheet-nextitem sheet-entry-10p-shrink"><textarea class="sheet-inline-textarea sheet-both" title="@{repeating_ability_$X_rounds_between}" name="attr_rounds_between" placeholder="Query/Macro" data-i18n-placeholder="full-macro-place" ></textarea><span data-i18n="rounds">Rounds</span></label>
								<input type="checkbox" value="not-applicable" name="attr_frequency" class="sheet-or-D-show sheet-noshow" />
								<input type="checkbox" value="constant" name="attr_frequency" class="sheet-or-A-show sheet-noshow" />
								<input type="checkbox" value="atwill" name="attr_frequency" class="sheet-or-B-show sheet-noshow" />
								<label class="sheet-small-label2 sheet-nor-sect" ><input class="sheet-narrow-numbers" title="@{repeating_ability_$X_used}" type="number" name="attr_used" value="0" /><span class="sheet-nowrap-over" data-i18n="number-prepared-abbrv"># Left</span></label>
								<label class="sheet-divider-db-lg sheet-nor-sect sheet-sect-inverse">/</label>
								<input type="checkbox" name="attr_used_max_error" class="sheet-error-mshow" value="1" />
								<label class="sheet-small-label2 sheet-highlight sheet-nor-sect sheet-sect-inverse" ><input class="sheet-narrow-numbers sheet-calc" title="@{repeating_ability_$X_used|max}" type="number" name="attr_used_max" value="0" readonly /><span class="sheet-nowrap-over" data-i18n="maximum-abbrv">Max</span></label>
								<label class="sheet-small-label2 sheet-sect sheet-highlight sheet-hide-readonly sheet-nor-sect sheet-sect-inverse sheet-entry-10p-shrink"><textarea class="sheet-inline-textarea sheet-both" title="@{repeating_ability_$X_max-calculation}" name="attr_max-calculation" placeholder="#/Equation" data-i18n-placeholder="equation-macro-place" ></textarea><span class="sheet-super sheet-note-a" data-i18n="maximum-calculation-abbrv">Max Calc</span></label>
								<div style="display:none;">
									<input type="text" name="attr_compendium_category" accept="Category" value="" />
									<input type="text" name="attr_ability_type_compendium" accept="Ability Type" value="" />
									<!--spells -->
									<input type="text" name="attr_range_from_compendium" accept="Range" value="" />
									<input type="text" name="attr_target_from_compendium" accept="Target" value="" />
									<input type="text" name="attr_area_from_compendium" accept="Area" value="" />
									<input type="text" name="attr_effect_from_compendium" accept="Effect" value="" />
								</div>
								<div class="sheet-sect sheet-expand"> 
									<input type="checkbox" class="sheet-showarrow sheet-desc-show" title="Click to expand" data-i18n-title="showsect-cmd" data-i18n-aria-label="showsect-cmd" aria-label="Show Description" name="attr_description-show" value="1" />
									<label class="sheet-showsect sheet-desc-showlabel" data-i18n="description">Description</label>
									<input type="checkbox" class="sheet-showarrow sheet-misc-show" title="Click to expand" data-i18n-title="showsect-cmd" data-i18n-aria-label="showsect-cmd" aria-label="Show Miscellaneous" name="attr_misc-show" value="1" />
									<label class="sheet-showsect sheet-misc-showlabel" data-i18n="level-basis">Level basis</label>
									<input type="checkbox" class="sheet-showarrow sheet-range-show" title="Click to expand" data-i18n-title="showsect-cmd" data-i18n-aria-label="showsect-cmd" aria-label="Show Miscellaneous" name="attr_range-show" value="1" />
									<label class="sheet-showsect sheet-range-showlabel" data-i18n="range">Range</label>
									<input type="checkbox" class="sheet-showarrow sheet-weapon-attributes-show" title="Click to expand" data-i18n-title="showsect-cmd" data-i18n-aria-label="showsect-cmd" aria-label="Show attack and damage fields" name="attr_attack-show" value="1" />
									<label class="sheet-showsect sheet-weapon-attributes-showlabel" data-i18n="attack-and-damage">Attack and Damage</label>
									<input type="checkbox" class="sheet-showarrow sheet-macro-text-show" title="Click to expand" data-i18n-title="showsect-cmd" data-i18n-aria-label="showsect-cmd" aria-label="Show Macro Text" name="attr_macro-text-show" value="1" />
									<label class="sheet-showsect sheet-macro-text-showlabel sheet-super sheet-note-d" data-i18n="macro-text">Macro Text</label>
									<input type="checkbox" class="sheet-showarrow sheet-id-show" title="Click to expand" data-i18n-title="showsect-cmd" data-i18n-aria-label="showsect-cmd" aria-label="Show Row ID" name="attr_ids-show" value="1" />
									<label class="sheet-showsect sheet-id-showlabel" data-i18n="identification-abbrv">ID</label>
									<hr class="sheet-subnav-hr">
									<div class="sheet-cheat"></div>
									<div class="sheet-misc">										
										<input type="checkbox" value="1" name="attr_showextrafields" class="sheet-extra-show sheet-or-A-show sheet-noshow"/>
										<input type="checkbox" value="Sp" name="attr_ability_type" class="sheet-sp-show sheet-noshow" />
										<label class="sheet-small-label2">
											<input type="checkbox" value="1" name="attr_showextrafields" />
											<span data-i18n-title="display-advanced-options-title" data-i18n="custom">Custom</span>
										</label>											
										<label class="sheet-small-label2 sheet-section-extra">
											<input class="sheet-number sheet-calc" type="number" name="attr_CL-basis-mod" title="@{CL-basis}" value="0" readonly />
											<span data-i18n-title="caster-level-basis-explanation" data-i18n-aria-label="caster-level-basis-explanation" data-i18n="caster-level-basis-abbreviation" >CL basis</span>
										</label>
										<label class="sheet-divider-db-lg sheet-nowrap sheet-section-extra">+(</label>											
										<label class="sheet-small-label2 sheet-linked-tablecell sheet-section-extra sheet-nowrap sheet-entry-15p-shrink">
											<input type="checkbox" value="1" name="attr_CL-misc-mod_error" class="sheet-error-mshow" />
											<textarea class="sheet-inline-textarea sheet-linked-cellfield sheet-highlight" title="@{repeating_ability_$X_CL-misc}" name="attr_CL-misc" data-i18n-placeholder="equation-macro-place" style="display:inline-block;"></textarea>
											<input type="number" value="0" name="attr_CL-misc-mod" title="@{repeating_ability_$X_CL-misc-mod}" class="sheet-narrow-numbers sheet-calc sheet-linked-cellfield sheet-highlight" style="display:inline-block;" readonly />
											<br>
											<span class="sheet-super sheet-note-a" data-i18n-title="buff-spell-caster-level-title" data-i18n-aria-label="buff-spell-caster-level-title" data-i18n="miscellaneous-abbrv" style="display:inline-block;">Misc</span>
										</label>						
										<label class="sheet-divider-db-lg sheet-nowrap sheet-section-extra" style="margin-left:-.5em;">)=</label>
										<label class="sheet-small-label2 sheet-number">
											<input type="number" value="0" title="@{repeating_ability_$X_casterlevel}" name="attr_casterlevel" class="sheet-calc" />
											<span title="@{CL-basis} + @{CL-misc-mod} + @{buff_CasterLevel-total} + @{CasterLevel-Penalty}" data-i18n-title="effective-caster-level" data-i18n-aria-label="effective-caster-level" data-i18n="caster-level-abbrv" >CL</span>
										</label>
										<label class="sheet-divider-db-lg sheet-section-extra">|</label>
										<label class="sheet-small-label2">
											<select class="sheet-select-small" title="@{repeating_ability_$X_ability-basis}" name="attr_ability-basis">
												<option value="0" data-i18n="none-default" selected>None</option>
												<option value="@{STR-mod}" data-i18n="strength-abbrv">STR</option>
												<option value="@{DEX-mod}" data-i18n="dexterity-abbrv">DEX</option>
												<option value="@{CON-mod}" data-i18n="constitution-abbrv">CON</option>
												<option value="@{INT-mod}" data-i18n="intelligence-abbrv">INT</option>
												<option value="@{WIS-mod}" data-i18n="wisdom-abbrv">WIS</option>
												<option value="@{CHA-mod}" data-i18n="charisma-abbrv" >CHA</option>
											</select>
											<span data-i18n-title="ability-basis-desc" data-i18n-aria-label="ability-basis-desc" data-i18n="ability" >Ability</span>
										</label>
										<label class="sheet-divider-db-lg sheet-section-extra">|</label>
										<label class="sheet-small-label2">
											<select style="width:100%;" class="sheet-select-small sheet-select-spelllvl" title="@{repeating_ability_$X_spell_level-basis}" name="attr_spell_level-basis" >
												<option value="floor(@{casterlevel}/2)" data-i18n="half-caster-level-abbrv-selected" selected>&#8226;&#189; Lvl/HD</option>
												<option value="@{casterlevel}" data-i18n="full-caster-level-abbrv" >Lvl/HD</option>
												<option value="0" data-i18n="custom-level-abbrv">Custom Lvl</option>
											</select>
											<span data-i18n-title="difficulty-class-effect-basis-desc" data-i18n-aria-label="difficulty-class-effect-basis-desc" data-i18n="difficulty-class-effect-basis" >DC/Effect Basis</span>
										</label>
										<input type="checkbox" value="0" class="sheet-noshow sheet-or-B-show" name="attr_spell_level-basis" role="presentation"/>
										<label class="sheet-divider-db-lg sheet-nowrap sheet-either-or-sect">+(</label>
										<label class="sheet-small-label2 sheet-linked-tablecell sheet-either-or-sect sheet-nowrap sheet-entry-15p-shrink">
											<input type="checkbox" value="1" name="attr_spell_level-misc-mod_error" class="sheet-error-mshow" />
											<textarea class="sheet-inline-textarea sheet-linked-cellfield sheet-highlight" title="@{repeating_ability_$X_spell_level-misc}" name="attr_spell_level-misc" data-i18n-placeholder="equation-macro-place" style="display:inline-block;"></textarea>
											<input type="number" value="0" name="attr_spell_level-misc-mod" title="@{repeating_ability_$X_spell_level-misc-mod}" class="sheet-narrow-numbers sheet-calc sheet-linked-cellfield sheet-highlight" style="display:inline-block;" readonly />
											<br>
											<span class="sheet-super sheet-note-a" data-i18n-aria-label="spell-level-miscellaneous-desc" data-i18n-title="spell-level-miscellaneous-desc" data-i18n="miscellaneous-abbrv" style="display:inline-block;">Misc</span>
										</label>
										<label class="sheet-divider-db-lg sheet-nowrap sheet-either-or-sect" style="margin-left:-.5em;">)=</label>
										<label class="sheet-small-label2 sheet-section-extra sheet-number">
											<input type="text" value="(@{spell_level-basis}+@{spell_level-misc-mod})" title="@{repeating_ability_$X_spell_level}" name="attr_spell_level" disabled />
											<span data-i18n-title="effective-spell-level" data-i18n-aria-label="effective-spell-level" data-i18n="spell-level-abbrv" >Spell lvl</span>
										</label>
										<label class="sheet-divider-db-lg">|</label>
										<label class="sheet-small-label2 sheet-entry-10p-shrink"><input title="@{repeating_ability_$X_save}" type="text" name="attr_save" value="" placeholder="Save" data-i18n-placeholder="save" accept="Saving Throw" /><span data-i18n="save">Save</span></label>
										<label class="sheet-small-label2 sheet-number">
											<input type="text" value="(10+@{ability-basis} + @{spell_level})" name="attr_savedc" title="@{repeating_ability_$X_savedc}" class="sheet-number" disabled />												
											<span data-i18n-title="difficulty-class-calculation-desc" data-i18n-aria-label="difficulty-class-calculation-desc" data-i18n="difficulty-class-abbrv" >DC</span>
										</label>
										<label class="sheet-small-label2 sheet-sect-sp">
											<input type="text" value="(@{ability-basis} + @{casterlevel})" name="attr_Concentration-mod" title="@{repeating_ability_$X_Concentration-mod}" class="sheet-number" disabled />
											<span data-i18n-aria-label="concentration-bonus-desc" data-i18n-title="concentration-bonus-desc" data-i18n="concentration-abbrv">Conc</span>
										</label>
										<label class="sheet-small-label2 sheet-sect-sp">
											<select class="sheet-select-small" title="@{repeating_ability_$X_abil-sr}" name="attr_abil-sr" accept="Spell Resistance" >
												<option value="" data-i18n="select-spell-resistance-default">&#8226;Select SR</option>
												<option value="Yes" data-i18n="yes" selected>Yes</option>
												<option value="No" data-i18n="no">No</option>
												<option value="Yes (Harmless)" data-i18n="yes-harmless">Yes (Harmless)</option>
												<option value="No (Harmless)" data-i18n="no-harmless">No (Harmless)</option>
											</select>
											<span data-i18n-title="spell-resistance" data-i18n-aria-label="spell-resistance" data-i18n="spell-resistance-abbrv">SR</span>
										</label>
									</div>
									<div class="sheet-range">
										<input type="checkbox" value="Sp" name="attr_ability_type" class="sheet-sp-show sheet-noshow" />
										<label class="sheet-small-label2 sheet-number">
											<input type="number" value="0" title="@{repeating_ability_$X_casterlevel}" name="attr_casterlevel" class="sheet-calc" />
											<span data-i18n-title="level-hit-dice-abbrv" data-i18n-aria-label="level-hit-dice-abbrv" data-i18n="caster-level-abbrv" >CL</span>
										</label>
										<label class="sheet-small-label2 sheet-sect-sp-inverse">
											<select class="sheet-select-small" title="@{repeating_ability_$X_range_pick}" name="attr_range_pick">
												<option value="" data-i18n="not-applicable-abbrv-default" selected>na</option>
												<option value="number" data-i18n="number">Number</option>
												<option value="perlevel" data-i18n="perlevel">Per Level</option>
												<option value="see_text" data-i18n="see_text">See text</option>
											</select>
											<span data-i18n="range">Range</span>
										</label>										
										<label class="sheet-small-label2 sheet-sect-sp">
											<select class="sheet-select-small" title="@{repeating_ability_$X_range_pick}" name="attr_range_pick">
												<option value="" data-i18n="blank" selected>Blank</option>
												<option value="close" data-i18n="close">Close</option>
												<option value="medium" data-i18n="medium">Medium</option>
												<option value="long" data-i18n="long">Long</option>
												<option value="touch" data-i18n="touch">Touch</option>
												<option value="personal" data-i18n="personal">Personal</option>
												<option value="see_text" data-i18n="see_text">See text</option>
												<option value="number" data-i18n="number">Number</option>
												<option value="perlevel" data-i18n="perlevel">Per Level</option>
												<option value="unknownrange" data-i18n="unknownrange">Unknown Range</option>
											</select>
											<span data-i18n="range">Range</span>
										</label>										
										<input type="checkbox" value="number" name="attr_range_pick" class="sheet-or-A-show sheet-noshow" />
										<input type="checkbox" value="perlevel" name="attr_range_pick" class="sheet-or-B-show sheet-noshow" />
										<label class="sheet-small-label2 sheet-entry-8p-shrink sheet-either-or-sect"><input title="@{repeating_ability_$X_range}" type="text" name="attr_range" placeholder="Flat # or # /level" data-i18n-placeholder="range-custom-place" /><span data-i18n-title="range-per-level-desc" data-i18n-aria-label="range-per-level-desc" data-i18n="range-custom">Custom Range</span></label>
										<label class="sheet-small-label2">
											<input title="@{repeating_ability_$X_range_numeric}" type="number" value="0" name="attr_range_numeric" class="sheet-calc" readonly ><span data-i18n="range-in-feet">Range</span>
										</label>
										<label class="sheet-small-label2 sheet-sect sheet-entry-15p-shrink"><input title="@{repeating_ability_$X_duration}" type="text" name="attr_duration" value="" placeholder="Duration" data-i18n-placeholder="spell-duration" accept="Duration" /><span data-i18n="duration">Duration</span></label>
										<label class="sheet-small-label2 sheet-entry-15p-shrink"><input title="@{repeating_ability_$X_cust-category}" type="text" name="attr_cust-category" value="" placeholder="School etc" data-i18n-placeholder="school-etc"  accept="School" /><span data-i18n-title="custom-category-desc" data-i18n-aria-label="custom-category-desc" data-i18n="category">Category</span></label>
									</div>
									<div class="sheet-weapon-attributes sheet-non-table">
										<label class="sheet-small-label2 sheet-entry-short">
											<input type="checkbox" name="attr_create-attack-entry" value="1" class="sheet-cssbutton sheet-createattackbutton" title="Create a new attack based on this weapon." data-i18n-title="create-attack-entry" data-i18n-aria-label="create-attack-entry"><span></span>
											<span data-i18n-title="create-attack-entry" data-i18n-aria-label="create-attack-entry" data-i18n="create-attack" >Create Attack</span>
										</label>
										<label class="sheet-small-label2 sheet-entry-short">
											<select class="sheet-select-small" title="@{repeating_ability_$X_abil-attack-type}" name="attr_abil-attack-type">
												<option value="0" data-i18n="none-default" selected>&#8226;None</option>
												<option value="@{attk-melee}" data-i18n="touch">Touch</option>
												<option value="@{attk-melee2}" data-i18n="touch-melee2">Alt Touch (alt melee)</option>
												<option value="@{attk-ranged}" data-i18n="ranged-touch-ray">Ranged touch/Ray</option>
												<option value="@{attk-ranged2}" data-i18n="ranged-touch-ray2">Alt Ranged Touch/Ray</option>
												<option value="@{CMB}" data-i18n="combat-maneuver-bonus-abbrv">CMB</option>
											</select>
											<span data-i18n="attack-type">Attack Type</span>
										</label>
										<label class="sheet-small-label2 sheet-sect sheet-entry-15p-shrink">
											<input title="@{repeating_ability_$X_targets}" type="text" value="" name="attr_targets" placeholder="Targets/Area/Effect" data-i18n-placeholder="spell-targets-area-effect" />
											<span data-i18n="spell-targets-area-effect">Targets/Area/Effect</span>
										</label>
										<label class="sheet-small-label2 sheet-entry-15p-shrink">
											<textarea class="sheet-inline-textarea" name="attr_damage-macro-text" title="@{repeating_ability_$X_damage-macro-text}" placeholder="Macro/Query" data-i18n-placeholder="full-macro-place" ></textarea>
											<span class="sheet-super sheet-note-b" data-i18n-title="damage-macro-desc" data-i18n-aria-label="damage-macro-desc" data-i18n="damage">Damage</span>
										</label>
										<label class="sheet-small-label2 sheet-entry-15p-shrink">
											<input type="text" name="attr_damage-type" title="@{repeating_ability_$X_damage-type}" placeholder="Damage Type" data-i18n-placeholder="damage-type" />
											<span data-i18n="damage-type">Damage Type</span>
										</label>
									</div>
									<input type="text" name="attr_is_sp" value="" class="sheet-noshow" />
									<input type="text" name="attr_hasposrange" value="" class="sheet-noshow" />
									<input type="text" name="attr_hasfrequency" value="" class="sheet-noshow" />
									<input type="text" name="attr_hasuses" value="" class="sheet-noshow" />
									<input type="text" name="attr_hasattack" value="" class="sheet-noshow" />
									<input type="text" name="attr_abil-attacktypestr" value="" class="sheet-noshow" />
									<textarea class="sheet-desc" title="@{repeating_ability_$X_description}" name="attr_description" accept="Content"></textarea>
									<textarea class="sheet-macro-text" title="@{repeating_ability_$X_macro-text}" name="attr_macro-text">&{template:pf_ability} @{toggle_accessible_flag} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_ability}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle=^{@{rule_category}}}} {{name=@{name}}} {{rule_category=@{rule_category}}} {{source=@{class-name}}} {{is_sp=@{is_sp}}} {{hasspellrange=@{range_pick}}} {{spell_range=^{@{range_pick}}}} {{casterlevel=[[@{casterlevel}]]}} {{spell_level=[[@{spell_level}]]}} {{hasposrange=@{hasposrange}}} {{custrange=@{range}}} {{range=[[@{range_numeric}]]}} {{save=@{save}}} {{savedc=[[@{savedc}]]}} {{hassr=@{abil-sr}}} {{sr=^{@{abil-sr}}}} {{hasfrequency=@{hasfrequency}}} {{frequency=^{@{frequency}}}} {{next_cast=@{rounds_between}}} {{hasuses=@{hasuses}}} {{uses=@{used}}} {{uses_max=@{used|max}}} {{cust_category=@{cust-category}}} {{concentration=[[@{Concentration-mod}]]}} {{damage=@{damage-macro-text}}} {{damagetype=@{damage-type}}} {{hasattack=@{hasattack}}} {{attacktype=^{@{abil-attacktypestr}}}} {{targetarea=@{targets}}} {{duration=@{duration}}} {{shortdesc=@{short-description}}} {{description=@{description}}} {{deafened_note=@{SpellFailureNote}}}</textarea>
									<div class="sheet-repeating-id">
										<span data-i18n="row-identification-for-macros">Row ID for macros</span>: <span class="sheet-selectable" name="attr_row_id" />
									</div>
								</div>
							</div>
						</fieldset>
					</div>
					<input type="checkbox" class="sheet-classfeatures-show" name="attr_use_class_features" value="1" role="presentation" />
					<div class="sheet-repeating-sect sheet-section0 sheet-section-classfeatureslist">
						<span class="sheet-nontable-name sheet-selected-tabtitle sheet-secondary-table-name" data-i18n="original-class-features-list">Original Class Features List</span>
						<input type="checkbox" class="sheet-minimize-show sheet-cssbutton" data-i18n-title="minimize-all-cmd" data-i18n-aria-label="minimize-all-cmd" title="Minimize all rows." name="attr_class-ability-min-show" value="1" /><span></span>
						<input type="checkbox" class="sheet-lock-show sheet-cssbutton" data-i18n-title="expand-cmd" data-i18n-aria-label="expand-cmd" title="Collapse or expand all rows." name="attr_class-ability-expand-show" value="1" /><span></span>
						<input type="checkbox" class="sheet-split-column-show sheet-cssbutton" data-i18n-title="column-cmd" data-i18n-aria-label="column-cmd" title="Split into two columns" name="attr_class-ability-column-show" value="1" /><span></span>
 						<input class="sheet-deletebutton sheet-cssbutton sheet-deletesect-show" type="checkbox" name="attr_delete_repeating_class-ability_btn" value="1" data-i18n-title="delete-class-ability" data-i18n-aria-label="delete-class-ability-must-confirm-next-checkbox" /><span></span><label class="sheet-deletesect sheet-allrows-note"><input type="checkbox" class="sheet-selectedlabel-check" name="attr_delete_repeating_class-ability" data-i18n-aria-label="confirm-delete-class-ability" data-i18n-title="confirm-delete-class-ability" value="1" /><b data-i18n="delete-all-rows-are-you-sure">delete all rows are you sure</b></label>
						<div class="sheet-repeating-fields sheet-table">
							<fieldset class="repeating_class-ability">
								<span class="sheet-error"><span class="sheet-pictos">!</span><span data-i18n="error-msg1">Error! You must delete this row before editing any items in this section.</span></span>
								<div class="sheet-table-repeating sheet-narrow-numbers">
									<input type="checkbox" class="sheet-counted sheet-sect-show" data-i18n-title="minimize-cmd" data-i18n-aria-label="minimize-cmd" title="Minimize Row" name="attr_row-show" value="1" checked /><span class="sheet-table-cell"></span>
									<span class="sheet-table-cell sheet-repeating-rollbutton"><button type="roll" name="attr_roll" title="%{selected|repeating_class-ability_$X_roll}" value="@{macro-text}"></button></span>
									<span class="sheet-table-cell sheet-small-label sheet-hide-readonly" style="width:2.5em;"><input type="checkbox" name="attr_showinmenu" title="@{repeating_class-ability_$X_showinmenu}" value="1"  /><span data-i18n="show-in-menu" data-i18n-title="show-in-menu-title" data-i18n-aria-label="show-in-menu-title">Show</span></span>
									<span style="display:none;" class="sheet-table-cell sheet-small-label sheet-sect" >
										<input name="attr_rule_category" type="text" value="class-features" title="@{repeating_class-ability_$X_rule_category}" data-i18n-aria-label="rule-category" readonly />
									</span>
									<span class="sheet-table-cell sheet-small-label sheet-sect sheet-sect sheet-hide-readonly sheet-entry-vshort" >
										<select title="@{repeating_class-ability_$X_class-number}" name="attr_class-number" class="sheet-select-small sheet-select-class">
											<option value="@{class-0-name}" data-i18n="class-0-default" selected>•0 class</option>
											<option value="@{class-1-name}" data-i18n="class-1">1st</option>
											<option value="@{class-2-name}" data-i18n="class-2">2nd</option>
											<option value="@{class-3-name}" data-i18n="class-3">3rd</option>
											<option value="@{class-4-name}" data-i18n="class-4">4th</option>
											<option value="@{class-5-name}" data-i18n="class-5">5th</option>
											<option value="@{race}">Race</option>
										</select>
										<br><span class="sheet-nowrap" data-i18n-title="class-number-explanation" data-i18n-aria-label="class-number-explanation" data-i18n="class-number">Class #</span>
									</span>
									<span class="sheet-table-cell sheet-small-label sheet-sect" style="width:10%"><input title="@{repeating_class-ability_$X_class-name}" type="text" name="attr_class-name" value="@{class-number}" disabled /><span data-i18n-title="source-title" data-i18n-aria-label="source-title" title="Ability Source - class or race" data-i18n="source">Source</span><br></span>
									<span class="sheet-table-cell sheet-small-label"><input title="@{repeating_class-ability_$X_name}" type="text" name="attr_name" placeholder="Ability Name" data-i18n-placeholder="ability-name"><br><span data-i18n="name">Name</span></span>
									<span class="sheet-table-cell sheet-small-label"><textarea class="sheet-inline-textarea" title="@{repeating_class-ability_$X_short-description}" name="attr_short-description" placeholder="Short Description" data-i18n-placeholder="short-description"></textarea><br><span data-i18n="short-description-abbrv">Short Desc</span></span>
									<span class="sheet-table-cell sheet-small-label sheet-number" ><input title="@{repeating_class-ability_$X_used}" type="number" name="attr_used" value="0" /><br><span class="sheet-nowrap-over" data-i18n="number-prepared-abbrv"># Left</span></span>
									<span class="sheet-divider-lg">/</span>
									<input type="checkbox" name="attr_used_max_error" class="sheet-error-mshow" value="1" />
									<span class="sheet-table-cell sheet-small-label sheet-highlight sheet-number" ><input title="@{repeating_class-ability_$X_used|max}" type="number" name="attr_used_max" value="0" class="sheet-calc" readonly /><br><span data-i18n="maximum-abbrv">Max</span></span>
									<span class="sheet-table-cell sheet-small-label sheet-sect sheet-highlight sheet-hide-readonly" style="width:7%;"><textarea class="sheet-inline-textarea sheet-both" title="@{repeating_class-ability_$X_max-calculation}" name="attr_max-calculation" placeholder="#/Equation" data-i18n-placeholder="equation-macro-place" ></textarea><br><span data-i18n="maximum-calculation-abbrv">Max Calc</span></span>
									<div style="display:none;">
										<input type="text" name="attr_compendium_category" accept="Category" value="" />
										<input type="text" name="attr_ability_type_compendium" accept="Ability Type" value="" />
									</div>	
									<div class="sheet-sect sheet-expand sheet-hide-readonly">
										<input type="checkbox" class="sheet-showarrow sheet-desc-show" title="Click to expand" data-i18n-title="showsect-cmd" data-i18n-aria-label="showsect-cmd" aria-label="Show Description" name="attr_description-show" value="1" />
										<label class="sheet-showsect sheet-desc-showlabel" data-i18n="description">Description</label>
										<input type="checkbox" class="sheet-showarrow sheet-macro-text-show" title="Click to expand" data-i18n-title="showsect-cmd" data-i18n-aria-label="showsect-cmd" aria-label="Show Macro Text" name="attr_macro-text-show" value="1" />
										<label class="sheet-showsect sheet-macro-text-showlabel" data-i18n="macro-text">Macro Text</label>
										<input type="checkbox" class="sheet-showarrow sheet-id-show" title="Click to expand" data-i18n-title="showsect-cmd" data-i18n-aria-label="showsect-cmd" aria-label="Show Row ID" name="attr_ids-show" value="1" />
										<label class="sheet-showsect sheet-id-showlabel" data-i18n="identification-abbrv">ID</label>
										<hr class="sheet-subnav-hr">
										<div class="sheet-cheat"></div>
										<textarea class="sheet-desc" title="@{repeating_class-ability_$X_description}" name="attr_description" accept="Content"></textarea>
										<textarea class="sheet-macro-text" title="@{repeating_class-ability_$X_macro-text}" name="attr_macro-text">&{template:pf_generic} @{toggle_accessible_flag} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_block}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle=^{@{rule_category}}}} {{class=**^{class}**: @{class-number}}} {{name=@{name}}} {{description=@{short-description}}}</textarea>
										<div class="sheet-repeating-id">
											<span data-i18n="row-identification-for-macros">Row ID for macros</span>: <span class="sheet-selectable" name="attr_row_id" />
										</div>
									</div>
								</div>
							</fieldset>
						</div>
					</div>
					<input type="checkbox" class="sheet-featlist-show" name="attr_use_feats" value="1" role="presentation" />
					<div class="sheet-repeating-sect sheet-section1 sheet-section-featlist">
						<span class="sheet-nontable-name sheet-selected-tabtitle sheet-secondary-table-name" data-i18n="original-feats-list">Feats</span>
						<input type="checkbox" class="sheet-minimize-show sheet-cssbutton" data-i18n-title="minimize-all-cmd" data-i18n-aria-label="minimize-all-cmd" title="Minimize all rows." name="attr_feat-min-show" value="1" /><span></span>
						<input type="checkbox" class="sheet-lock-show sheet-cssbutton" data-i18n-title="expand-cmd" data-i18n-aria-label="expand-cmd" title="Collapse or expand all rows." name="attr_feat-expand-show" value="1" /><span></span>
						<input type="checkbox" class="sheet-split-column-show sheet-cssbutton" data-i18n-title="column-cmd" data-i18n-aria-label="column-cmd" title="Split into two columns" name="attr_feat-column-show" value="1" /><span></span>
 						<input class="sheet-deletebutton sheet-cssbutton sheet-deletesect-show" type="checkbox" name="attr_delete_repeating_feat_btn" value="1" data-i18n-title="delete-feat" data-i18n-aria-label="delete-feat-must-confirm-next-checkbox" /><span></span><label class="sheet-deletesect sheet-allrows-note"><input type="checkbox" class="sheet-selectedlabel-check" name="attr_delete_repeating_feat" data-i18n-aria-label="confirm-delete-feat" data-i18n-title="confirm-delete-feat" value="1" /><b data-i18n="delete-all-rows-are-you-sure">delete all rows are you sure</b></label>
						<div class="sheet-repeating-fields sheet-table">
							<fieldset class="repeating_feat">
								<span class="sheet-error"><span class="sheet-pictos">!</span><span data-i18n="error-msg1">Error! You must delete this row before editing any items in this section.</span></span>
								<div class="sheet-table-repeating">
									<input type="checkbox" class="sheet-counted sheet-sect-show" data-i18n-title="minimize-cmd" data-i18n-aria-label="minimize-cmd" title="Minimize Row" name="attr_row-show" value="1" checked /><span class="sheet-table-cell"></span>
									<span class="sheet-table-cell sheet-repeating-rollbutton"><button type="roll" name="attr_roll" title="%{selected|repeating_feat_$X_roll}" value="@{macro-text}"></button></span>
									<span style="display:none;" class="sheet-table-cell sheet-repeating-rollbutton"><button type="roll" name="attr_npc-roll" title="%{selected|repeating_feat_$X_npc-roll" value="@{npc-macro-text}"></button></span>
									<span class="sheet-table-cell sheet-small-label sheet-hide-readonly" style="width:2.5em;"><input type="checkbox" name="attr_showinmenu" title="@{repeating_feat_$X_showinmenu}" value="1"  /><span data-i18n="show-in-menu" data-i18n-title="show-in-menu-title" data-i18n-aria-label="show-in-menu-title">Show</span></span>
									<input type="hidden" value="" name="attr_ability_type" />
									<input type="hidden" value="feats" name="attr_rule_category" />
									<span class="sheet-table-cell sheet-small-label"><input title="@{repeating_feat_$X_name}" type="text" name="attr_name" placeholder="Feat Name" data-i18n-placeholder="feat-name" accept="Name"><br><span data-i18n="name">Name</span></span>
									<span class="sheet-table-cell sheet-small-label sheet-entry-30p-shrink" ><textarea class="sheet-inline-textarea" title="@{repeating_feat_$X_short-description}" name="attr_short-description" placeholder="Short Desc" data-i18n-placeholder="short-description"></textarea><br><span data-i18n="short-description-abbrv">Short Desc</span></span>
									<span class="sheet-table-cell sheet-small-label" style="width:.1%;"><input title="@{repeating_feat_$X_used}" type="number" name="attr_used" value="0" /><br><span data-i18n="used">Used</span></span>
									<span class="sheet-divider-lg" style="width:.1%;">/</span>
									<input type="checkbox" name="attr_used_max_error" class="sheet-error-mshow" value="1" />
									<span class="sheet-table-cell sheet-small-label sheet-highlight" style="width:.1%;"><input title="@{repeating_feat_$X_used|max}" type="text" name="attr_used_max" value="0" class="sheet-calc" readonly /><br><span data-i18n="maximum-abbrv">Max</span></span>
									<span class="sheet-table-cell sheet-small-label sheet-sect sheet-highlight sheet-hide-readonly" style="width:7%;"><textarea class="sheet-inline-textarea sheet-both" title="@{repeating_feat_$X_max-calculation}" name="attr_max-calculation" placeholder="#/Equation" data-i18n-placeholder="equation-macro-place" ></textarea><br><span data-i18n="calculation-abbrv">Calc</span></span>
									<div class="sheet-sect sheet-expand sheet-hide-readonly">
										<input type="checkbox" class="sheet-showarrow sheet-desc-show" title="Click to expand" data-i18n-title="showsect-cmd" data-i18n-aria-label="showsect-cmd" aria-label="Show Description" name="attr_description-show" value="1" />
										<label class="sheet-showsect sheet-desc-showlabel" data-i18n="description">Description</label>
										<input type="checkbox" class="sheet-showarrow sheet-macro-text-show" title="Click to expand" data-i18n-title="showsect-cmd" data-i18n-aria-label="showsect-cmd" aria-label="Show Macro Text" name="attr_macro-text-show" value="1" />
										<label class="sheet-showsect sheet-macro-text-showlabel" data-i18n="macro-text">Macro Text</label>
										<input type="checkbox" class="sheet-showarrow sheet-id-show" title="Click to expand" data-i18n-title="showsect-cmd" data-i18n-aria-label="showsect-cmd" aria-label="Show Row ID" name="attr_ids-show" value="1" />
										<label class="sheet-showsect sheet-id-showlabel" data-i18n="identification-abbrv">ID</label>
										<hr class="sheet-subnav-hr">
										<div class="sheet-cheat"></div>
										<textarea class="sheet-desc" title="@{repeating_feat_$X_description}" name="attr_description" accept="Content"></textarea>
										<textarea class="sheet-macro-text" title="@{repeating_feat_$X_macro-text}" name="attr_macro-text">@{PC-whisper} &{template:pf_block} @{toggle_accessible_flag} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_block}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle}} {{name=@{name}}} {{description=@{short-description}}}</textarea>
										<textarea style="display:none;" class="sheet-macro-text" title="@{repeating_feat_$X_npc-macro-text}" name="attr_npc-macro-text">@{NPC-whisper} &{template:pf_block} @{toggle_accessible_flag} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_block}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle}} {{name=@{name}}} {{description=@{short-description}}}</textarea>
										<div class="sheet-repeating-id">
											<span data-i18n="row-identification-for-macros">Row ID for macros</span>: <span class="sheet-selectable" name="attr_row_id" />
										</div>
									</div>
								</div>
							</fieldset>
						</div>
					</div>
					<!-- Mythic Adventures display option toggled from Config -->
					<div class="sheet-repeating-sect sheet-section1 sheet-section-mythic">
						<span class="sheet-nontable-name sheet-selected-tabtitle sheet-secondary-table-name" data-i18n="mythic-feats">Mythic Feats</span>
						<input type="checkbox" class="sheet-minimize-show sheet-cssbutton" data-i18n-title="minimize-all-cmd" data-i18n-aria-label="minimize-all-cmd" title="Minimize all rows." name="attr_mythic-feats-min-show" value="1" /><span></span>
						<input type="checkbox" class="sheet-lock-show sheet-cssbutton" data-i18n-title="expand-cmd" data-i18n-aria-label="expand-cmd" title="Collapse or expand all rows." name="attr_mythic-feats-expand-show" value="1" /><span></span>
						<input type="checkbox" class="sheet-split-column-show sheet-cssbutton" data-i18n-title="column-cmd" data-i18n-aria-label="column-cmd" title="Split into two columns" name="attr_mythic-feats-column-show" value="1" /><span></span>
						<input class="sheet-deletebutton sheet-cssbutton sheet-deletesect-show" type="checkbox" name="attr_delete_repeating_mythic-feat_btn" value="1" data-i18n-title="delete-mythic-feat" data-i18n-aria-label="delete-mythic-feat-must-confirm-next-checkbox" /><span></span><label class="sheet-deletesect sheet-allrows-note"><input type="checkbox" class="sheet-selectedlabel-check" name="attr_delete_repeating_mythic-feat" data-i18n-aria-label="confirm-delete-mythic-feat" data-i18n-title="confirm-delete-mythic-feat" value="1" /><b data-i18n="delete-all-rows-are-you-sure">delete all rows are you sure</b></label>
						<div class="sheet-repeating-fields sheet-table">
							<fieldset class="repeating_mythic-feat">
								<div class="sheet-table-repeating">
									<span class="sheet-error"><span class="sheet-pictos">!</span><span data-i18n="error-msg1">Error! You must delete this row before editing any items in this section.</span></span>
									<input type="checkbox" class="sheet-counted sheet-sect-show" data-i18n-title="minimize-cmd" data-i18n-aria-label="minimize-cmd" title="Minimize Row" name="attr_row-show" value="1" checked /><span class="sheet-table-cell"></span>
									<span class="sheet-table-cell sheet-repeating-rollbutton"><button type="roll" name="attr_roll" title="%{selected|repeating_mythic-feat_$X_roll}" value="@{macro-text}"></button></span>
									<span class="sheet-table-cell sheet-small-label sheet-hide-readonly" style="width:2.5em;"><input type="checkbox" name="attr_showinmenu" title="@{repeating_mythic-feat_$X_showinmenu}" value="1"  /><span data-i18n="show-in-menu" data-i18n-title="show-in-menu-title" data-i18n-aria-label="show-in-menu-title">Show</span></span>
									<input type="hidden" value="mythic-feats" name="attr_rule_category" />
									<input type="hidden" value="" name="attr_ability_type" />
									<span class="sheet-table-cell sheet-small-label"><input title="@{repeating_mythic-feat_$X_name}" type="text" name="attr_name" placeholder="Mythic Feat Name" data-i18n-placeholder="mythic-feat-name"><br><span data-i18n="name">Name</span></span>
									<span class="sheet-table-cell sheet-small-label sheet-entry-30p-shrink"><textarea class="sheet-inline-textarea" title="@{repeating_mythic-feat_$X_short-description}" name="attr_short-description" placeholder="Short Description" data-i18n-placeholder="short-description"></textarea><br><span data-i18n="short-description-abbrv">Short Desc</span></span>
									<span class="sheet-table-cell sheet-small-label" style="width:.1%;"><input title="@{repeating_mythic-feat_$X_used}" type="number" name="attr_used" value="0" /><br><span data-i18n="uses">Uses</span></span>
									<span class="sheet-divider-lg" style="width:.1%;">/</span>
									<input type="checkbox" name="attr_used_max_error" class="sheet-error-mshow" value="1" />
									<span class="sheet-table-cell sheet-small-label sheet-highlight" style="width:.1%;"><input title="@{repeating_mythic-feat_$X_used|max}" type="number" name="attr_used_max" value="0" class="sheet-calc" readonly /><br><span data-i18n="maximum-abbrv">Max</span></span>
									<span class="sheet-table-cell sheet-small-label sheet-sect sheet-hide-readonly sheet-highlight" style="width:7%;"><textarea class="sheet-inline-textarea sheet-both" title="@{repeating_mythic-feat_$X_max-calculation}" name="attr_max-calculation" placeholder="#/Equation" data-i18n-placeholder="equation-macro-place" ></textarea><br><span data-i18n="maximum-calculation-abbrv">Max Calc</span></span>
									<div class="sheet-sect sheet-expand sheet-hide-readonly">
										<input type="checkbox" class="sheet-showarrow sheet-desc-show" title="Click to expand" data-i18n-title="showsect-cmd" data-i18n-aria-label="showsect-cmd" aria-label="Show Description" name="attr_description-show" value="1" />
										<label class="sheet-showsect sheet-desc-showlabel" data-i18n="description">Description</label>
										<input type="checkbox" class="sheet-showarrow sheet-macro-text-show" title="Click to expand" data-i18n-title="showsect-cmd" data-i18n-aria-label="showsect-cmd" aria-label="Show Macro Text" name="attr_macro-text-show" value="1" />
										<label class="sheet-showsect sheet-macro-text-showlabel" data-i18n="macro-text">Macro Text</label>
										<input type="checkbox" class="sheet-showarrow sheet-id-show" title="Click to expand" data-i18n-title="showsect-cmd" data-i18n-aria-label="showsect-cmd" aria-label="Show Row ID" name="attr_ids-show" value="1" />
										<label class="sheet-showsect sheet-id-showlabel" data-i18n="identification-abbrv">ID</label>
										<hr class="sheet-subnav-hr">
										<div class="sheet-cheat"></div>
										<textarea class="sheet-desc" title="@{repeating_mythic-feat_$X_description}" name="attr_description"></textarea>
										<textarea class="sheet-macro-text" title="@{repeating_mythic-feat_$X_macro-text}" name="attr_macro-text">@{PC-whisper} &{template:pf_block} @{toggle_accessible_flag} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_block}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle}} {{name=@{name}}} {{description=@{short-description}}}</textarea>
										<div class="sheet-repeating-id">
											<span data-i18n="row-identification-for-macros">Row ID for macros</span>: <span class="sheet-selectable" name="attr_row_id" />
										</div>
									</div>
								</div>
							</fieldset>
						</div>
					</div>
					<input type="checkbox" class="sheet-racial-traits-show" name="attr_use_racial_traits" value="1" role="presentation" />
					<div class="sheet-repeating-sect sheet-section2 sheet-section-racial-traits">
						<span class="sheet-nontable-name sheet-selected-tabtitle sheet-secondary-table-name" data-i18n="original-racial-traits-list">Racial Traits</span>
						<input type="checkbox" class="sheet-minimize-show sheet-cssbutton" data-i18n-title="minimize-all-cmd" data-i18n-aria-label="minimize-all-cmd" title="Minimize all rows." name="attr_racial-trait-min-show" value="1" /><span></span>
						<input type="checkbox" class="sheet-lock-show sheet-cssbutton" data-i18n-title="expand-cmd" data-i18n-aria-label="expand-cmd" title="Collapse or expand all rows." name="attr_racial-trait-expand-show" value="1" /><span></span>
						<input type="checkbox" class="sheet-split-column-show sheet-cssbutton" data-i18n-title="column-cmd" data-i18n-aria-label="column-cmd" title="Split into two columns" name="attr_racial-trait-column-show" value="1" /><span></span>
 						<input class="sheet-deletebutton sheet-cssbutton sheet-deletesect-show" type="checkbox" name="attr_delete_repeating_racial-trait_btn" value="1" data-i18n-title="delete-racial-trait" data-i18n-aria-label="delete-racial-trait-must-confirm-next-checkbox" /><span></span><label class="sheet-deletesect sheet-allrows-note"><input type="checkbox" class="sheet-selectedlabel-check" name="attr_delete_repeating_racial-trait" data-i18n-aria-label="confirm-delete-racial-trait" data-i18n-title="confirm-delete-racial-trait" value="1" /><b data-i18n="delete-all-rows-are-you-sure">delete all rows are you sure</b></label>
						<div class="sheet-repeating-fields sheet-table">
							<fieldset class="repeating_racial-trait">
								<span class="sheet-error"><span class="sheet-pictos">!</span><span data-i18n="error-msg1">Error! You must delete this row before editing any items in this section.</span></span>
								<div class="sheet-table-repeating">
									<input type="checkbox" class="sheet-counted sheet-sect-show" data-i18n-title="minimize-cmd" data-i18n-aria-label="minimize-cmd" title="Minimize Row" name="attr_row-show" value="1" checked /><span class="sheet-table-cell"></span>
									<span class="sheet-table-cell sheet-repeating-rollbutton"><button type="roll" name="attr_roll" title="%{selected|repeating_racial-trait_$X_roll}" value="@{macro-text}"></button></span>
									<span style="display:none;" class="sheet-table-cell sheet-repeating-rollbutton"><button type="roll" name="attr_npc-roll" title="%{selected|repeating_racial-trait_$X_npc-roll}" value="@{npc-macro-text}"></button></span>
									<span class="sheet-table-cell sheet-small-label sheet-hide-readonly" style="width:2.5em;"><input type="checkbox" name="attr_showinmenu" title="@{repeating_racial-trait_$X_showinmenu}" value="1"  /><span data-i18n="show-in-menu" data-i18n-title="show-in-menu-title" data-i18n-aria-label="show-in-menu-title">Show</span></span>
									<input type="hidden" value="racial-traits" name="attr_rule_category" />
									<span class="sheet-table-cell sheet-small-label"><input title="@{repeating_racial-trait_$X_name}" type="text" name="attr_name" placeholder="Racial Trait Name" data-i18n-placeholder="racial-trait-name" accept="Name"><br><span data-i18n="name">Name</span></span>
									<span class="sheet-table-cell sheet-small-label sheet-entry-30p-shrink"><textarea class="sheet-inline-textarea" title="@{repeating_racial-trait_$X_short-description}" name="attr_short-description" placeholder="Short Description" data-i18n-placeholder="short-description"></textarea><br><span data-i18n="short-description-abbrv">Short Desc</span></span>
									<span class="sheet-table-cell sheet-small-label sheet-exspsu-dropdown">
										<select title="@{repeating_racial-trait_$X_ability_type}" name="attr_ability_type">
											<option value="not-applicable" data-i18n="not-applicable-abbrv-default" selected>&#8226;N/A</option>
											<option value="Ex" data-i18n="extraordinary-abbrv">Ex</option>
											<option value="Sp" data-i18n="spell-like-abbrv" >Sp</option>
											<option value="Su" data-i18n="supernatural-abbrv">Su</option>
										</select>
										<br>
										<span data-i18n="type">Type</span>
									</span>
									<span class="sheet-table-cell sheet-small-label" style="width:.1%;"><input title="@{repeating_racial-trait_$X_used}" type="number" name="attr_used" value="0" /><br><span data-i18n="uses">Uses</span></span>
									<span class="sheet-divider-lg" style="width:.1%;">/</span>
									<input type="checkbox" name="attr_used_max_error" class="sheet-error-mshow" value="1" />
									<span class="sheet-table-cell sheet-small-label sheet-highlight" style="width:.1%;"><input title="@{repeating_racial-trait_$X_used|max}" type="number" name="attr_used_max" value="" class="sheet-calc" readonly /><br><span data-i18n="maximum-abbrv">Max</span></span>
									<span class="sheet-table-cell sheet-small-label sheet-sect sheet-highlight sheet-hide-readonly" style="width:7%;"><textarea class="sheet-inline-textarea sheet-both" title="@{repeating_racial-trait_$X_max-calculation}" name="attr_max-calculation" placeholder="#/Equation" data-i18n-placeholder="equation-macro-place" ></textarea><br><span data-i18n="maximum-calculation-abbrv">Max Calc</span></span>
									<div class="sheet-sect sheet-expand sheet-hide-readonly">
										<input type="checkbox" class="sheet-showarrow sheet-desc-show" title="Click to expand" data-i18n-title="showsect-cmd" data-i18n-aria-label="showsect-cmd" aria-label="Show Description" name="attr_description-show" value="1" />
										<label class="sheet-showsect sheet-desc-showlabel" data-i18n="description">Description</label>
										<input type="checkbox" class="sheet-showarrow sheet-macro-text-show" title="Click to expand" data-i18n-title="showsect-cmd" data-i18n-aria-label="showsect-cmd" aria-label="Show Macro Text" name="attr_macro-text-show" value="1" />
										<label class="sheet-showsect sheet-macro-text-showlabel" data-i18n="macro-text">Macro Text</label>
										<input type="checkbox" class="sheet-showarrow sheet-id-show" title="Click to expand" data-i18n-title="showsect-cmd" data-i18n-aria-label="showsect-cmd" aria-label="Show Row ID" name="attr_ids-show" value="1" />
										<label class="sheet-showsect sheet-id-showlabel" data-i18n="identification-abbrv">ID</label>
										<hr class="sheet-subnav-hr">
										<div class="sheet-cheat"></div>
										<textarea class="sheet-desc" title="@{repeating_racial-trait_$X_description}" name="attr_description" accept="Content"></textarea>
										<textarea class="sheet-macro-text" title="@{repeating_racial-trait_$X_macro-text}" name="attr_macro-text">@{PC-whisper} &{template:pf_block} @{toggle_accessible_flag} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_block}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle}} {{name=@{name}}} {{description=@{short-description}}}</textarea>
										<textarea style="display:none;" class="sheet-macro-text" title="@{repeating_racial-trait_$X_npc-macro-text}" name="attr_npc-macro-text">@{NPC-whisper} &{template:pf_block} @{toggle_accessible_flag} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_block}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle}} {{name=@{name}}} {{description=@{short-description}}}</textarea>
										<div class="sheet-repeating-id">
											<span data-i18n="row-identification-for-macros">Row ID for macros</span>: <span class="sheet-selectable" name="attr_row_id" />
										</div>
									</div>
								</div>
							</fieldset>
						</div>
					</div>
					<input type="checkbox" class="sheet-traits-show" name="attr_use_traits" value="1" role="presentation" />
					<div class="sheet-repeating-sect sheet-section2 sheet-section-traits">
						<span class="sheet-nontable-name sheet-selected-tabtitle sheet-secondary-table-name" data-i18n="original-traits-list">Traits</span>
						<input type="checkbox" class="sheet-minimize-show sheet-cssbutton" data-i18n-title="minimize-all-cmd" data-i18n-aria-label="minimize-all-cmd" title="Minimize all rows." name="attr_traits-min-show" value="1" /><span></span>
						<input type="checkbox" class="sheet-lock-show sheet-cssbutton" data-i18n-title="expand-cmd" data-i18n-aria-label="expand-cmd" title="Collapse or expand all rows." name="attr_traits-expand-show" value="1" /><span></span>
						<input type="checkbox" class="sheet-split-column-show sheet-cssbutton" data-i18n-title="column-cmd" data-i18n-aria-label="column-cmd" title="Split into two columns" name="attr_traits-column-show" value="1" /><span></span>
 						<input class="sheet-deletebutton sheet-cssbutton sheet-deletesect-show" type="checkbox" name="attr_delete_repeating_trait_btn" value="1" data-i18n-title="delete-trait" data-i18n-aria-label="delete-trait-must-confirm-next-checkbox" /><span></span><label class="sheet-deletesect sheet-allrows-note"><input type="checkbox" class="sheet-selectedlabel-check" name="attr_delete_repeating_trait" data-i18n-aria-label="confirm-delete-trait" data-i18n-title="confirm-delete-trait" value="1" /><b data-i18n="delete-all-rows-are-you-sure">delete all rows are you sure</b></label>	
						<div class="sheet-repeating-fields sheet-table">
							<fieldset class="repeating_trait">
								<span class="sheet-error"><span class="sheet-pictos">!</span><span data-i18n="error-msg1">Error! You must delete this row before editing any items in this section.</span></span>
								<div class="sheet-table-repeating ">
									<input type="checkbox" class="sheet-counted sheet-sect-show" data-i18n-title="minimize-cmd" data-i18n-aria-label="minimize-cmd" title="Minimize Row" name="attr_row-show" value="1" checked /><span class="sheet-table-cell"></span>
									<span class="sheet-table-cell sheet-repeating-rollbutton"><button type="roll" name="attr_roll" title="%{selected|repeating_trait_$X_roll}" value="@{macro-text}"></button></span>
									<span class="sheet-table-cell sheet-small-label sheet-hide-readonly" style="width:2.5em;"><input type="checkbox" name="attr_showinmenu" title="@{repeating_trait_$X_showinmenu}" value="1"  /><span data-i18n="show-in-menu" data-i18n-title="show-in-menu-title" data-i18n-aria-label="show-in-menu-title">Show</span></span>
									<input type="hidden" value="traits" name="attr_rule_category" />
									<input type="hidden" value="" name="attr_ability_type" />
									<span class="sheet-table-cell sheet-small-label"><input title="@{repeating_trait_$X_name}" type="text" name="attr_name" placeholder="Trait Name" data-i18n-placeholder="trait-name" accept="Name"><br><span data-i18n="name">Name</span></span>
									<span class="sheet-table-cell sheet-small-label sheet-entry-30p-shrink"><textarea class="sheet-inline-textarea" title="@{repeating_trait_$X_short-description}" name="attr_short-description" placeholder="Short Description" data-i18n-placeholder="short-description"></textarea><br><span data-i18n="short-description-abbrv">Short Desc</span></span>
									<span class="sheet-table-cell sheet-small-label" style="width:.1%;"><input title="@{repeating_trait_$X_used}" type="number" name="attr_used" value="0" /><br><span data-i18n="uses">Uses</span></span>
									<span class="sheet-divider-lg" style="width:.1%;">/</span>
									<input type="checkbox" name="attr_used_max_error" class="sheet-error-mshow" value="1" />
									<span class="sheet-table-cell sheet-small-label sheet-highlight" style="width:.1%;"><input title="@{repeating_trait_$X_used|max}" type="number" name="attr_used_max" value="0" class="sheet-calc" readonly /><br><span data-i18n="maximum-abbrv">Max</span></span>
									<span class="sheet-table-cell sheet-small-label sheet-sect sheet-highlight sheet-hide-readonly" style="width:7%;"><textarea class="sheet-inline-textarea sheet-both" title="@{repeating_trait_$X_max-calculation}" name="attr_max-calculation" placeholder="#/Equation" data-i18n-placeholder="equation-macro-place" ></textarea><br><span data-i18n="maximum-calculation-abbrv">Max Calc</span></span>
									<div class="sheet-sect sheet-expand sheet-hide-readonly">
										<input type="checkbox" class="sheet-showarrow sheet-desc-show" title="Click to expand" data-i18n-title="showsect-cmd" data-i18n-aria-label="showsect-cmd" aria-label="Show Description" name="attr_description-show" value="1" />
										<label class="sheet-showsect sheet-desc-showlabel" data-i18n="description">Description</label>
										<input type="checkbox" class="sheet-showarrow sheet-macro-text-show" title="Click to expand" data-i18n-title="showsect-cmd" data-i18n-aria-label="showsect-cmd" aria-label="Show Macro Text" name="attr_macro-text-show" value="1" />
										<label class="sheet-showsect sheet-macro-text-showlabel" data-i18n="macro-text">Macro Text</label>
										<input type="checkbox" class="sheet-showarrow sheet-id-show" title="Click to expand" data-i18n-title="showsect-cmd" data-i18n-aria-label="showsect-cmd" aria-label="Show Row ID" name="attr_ids-show" value="1" />
										<label class="sheet-showsect sheet-id-showlabel" data-i18n="identification-abbrv">ID</label>
										<hr class="sheet-subnav-hr">
										<div class="sheet-cheat"></div>
										<textarea class="sheet-desc" title="@{repeating_trait_$X_description}" name="attr_description" accept="Content"></textarea>
										<textarea class="sheet-macro-text" title="@{repeating_trait_$X_macro-text}" name="attr_macro-text">@{PC-whisper} &{template:pf_block} @{toggle_accessible_flag} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_block}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle}} {{name=@{name}}} {{description=@{short-description}}}</textarea>
										<div class="sheet-repeating-id">
											<span data-i18n="row-identification-for-macros">Row ID for macros</span>: <span class="sheet-selectable" name="attr_row_id" />
										</div>
									</div>
								</div>
							</fieldset>
						</div>
					</div>
					<input type="checkbox" class="sheet-oldslas-show" name="attr_use_spell-like-abilities" value="1" role="presentation" />
					<div class="sheet-repeating-sect sheet-section6 sheet-section-oldslas">
						<span class="sheet-nontable-name sheet-selected-tabtitle sheet-secondary-table-name" data-i18n="original-spell-like-abilities-list">Spell Like Abilities</span>
						<input type="checkbox" class="sheet-minimize-show sheet-cssbutton" data-i18n-title="minimize-all-cmd" title="Minimize all rows." name="attr_npc-spell-like-abilities-min-show" value="1" /><span></span>
						<input type="checkbox" class="sheet-lock-show sheet-cssbutton" data-i18n-title="expand-cmd" title="Collapse or expand all rows." name="attr_npc-spell-like-abilities-expand-show" value="1" /><span></span>
						<input type="checkbox" class="sheet-split-column-show sheet-cssbutton" data-i18n-title="column-cmd" title="Split into two columns" name="attr_npc-spell-like-abilities-column-show" value="1" /><span></span>
 						<input class="sheet-deletebutton sheet-cssbutton sheet-deletesect-show" type="checkbox" name="attr_delete_repeating_npc-spell-like-abilities_btn" value="1" data-i18n-title="delete-spell-like-abilities" data-i18n-aria-label="delete-spell-like-abilities-must-confirm-next-checkbox" /><span></span><label class="sheet-deletesect sheet-allrows-note"><input type="checkbox" class="sheet-selectedlabel-check" name="attr_delete_repeating_npc-spell-like-abilities" data-i18n-aria-label="confirm-delete-spell-like-abilities" data-i18n-title="confirm-delete-spell-like-abilities" value="1" /><b data-i18n="delete-all-rows-are-you-sure">delete all rows are you sure</b></label>
						<div class="sheet-repeating-fields">
							<fieldset class="repeating_npc-spell-like-abilities">
								<span class="sheet-error"><span class="sheet-pictos">!</span><span data-i18n="error-msg1">Error! You must delete this row before editing any items in this section.</span></span>
								<input type="checkbox" class="sheet-counted sheet-sect-show" data-i18n-title="minimize-cmd" title="Minimize Row" name="attr_row-show" value="1" checked /><span class="sheet-table-cell"></span>
								<span class="sheet-table-cell sheet-repeating-rollbutton"><button type="roll" name="attr_roll" title="%{selected|repeating_npc-spell-like-abilities_$X_roll}" value="@{NPC-whisper} @{macro-text}"></button></span>
								<span class="sheet-table-cell sheet-small-label"><input title="@{repeating_npc-spell-like-abilities_$X_used}" type="number" name="attr_used" value="0" /><br><span data-i18n="uses-per-day">Uses/Day</span></span>
								<input type="hidden" value="spell-like-abilities" name="attr_rule_category" />
								<span class="sheet-table-cell sheet-small-label" style="width:25%;"><input title="@{repeating_npc-spell-like-abilities_$X_name}" type="text" name="attr_name" placeholder="Name" data-i18n-placeholder="name" /><br><span data-i18n="name">Name</span></span>
								<span class="sheet-table-cell sheet-small-label sheet-sect" style="width:25%;"><input title="@{repeating_npc-spell-like-abilities_$X_short-description}" type="text" name="attr_short-description" placeholder="Short Description" data-i18n-placeholder="short-description" /><br><span data-i18n="short-description-abbrv">Short Desc</span></span>
								<span class="sheet-table-cell sheet-small-label sheet-sect"><input title="@{repeating_npc-spell-like-abilities_$X_level}" type="text" name="attr_level" value="0" placeholder="Spell Level" data-i18n-placeholder="spell-level" /><br><span data-i18n="level">Level</span></span>
								<span class="sheet-table-cell sheet-small-label"><input title="@{repeating_npc-spell-like-abilities_$X_range}" type="text" name="attr_range" value="" placeholder="Range" data-i18n-placeholder="range" /><br><span data-i18n="range">Range</span></span>
								<span class="sheet-table-cell sheet-small-label sheet-sect"><input title="@{repeating_npc-spell-like-abilities_$X_duration}" type="text" name="attr_duration" value="" placeholder="Duration" data-i18n-placeholder="spell-duration" /><br><span data-i18n="duration">Duration</span></span>
								<span class="sheet-table-cell sheet-small-label"><input title="@{repeating_npc-spell-like-abilities_$X_save}" type="text" name="attr_save" value="" placeholder="Save" data-i18n-placeholder="save" /><br><span data-i18n="save">Save</span></span>
								<span class="sheet-table-cell sheet-small-label sheet-sect" style="width:5.5em;">
									<select title="@{repeating_npc-spell-like-abilities_$X_sr}" name="attr_sr">
										<option value="" data-i18n="not-applicable-abbrv-default" selected>&#8226;N/A</option>
										<option value="Yes" data-i18n="yes">Yes</option>
										<option value="No" data-i18n="no">No</option>
										<option value="Yes (Harmless)" data-i18n="yes-harmless">Yes (Harmless)</option>
										<option value="No (Harmless)" data-i18n="no-harmless">No (Harmless)</option>
									</select>
									<br><span data-i18n="spell-resistance-abbrv">SR</span>
								</span>
								<div class="sheet-sect sheet-expand sheet-hide-readonly">
									<input type="checkbox" class="sheet-showarrow sheet-macro-text-show" title="Click to expand" data-i18n-title="showsect-cmd" aria-label="Show Macro Text" name="attr_macro-text-show" value="1" checked />
									<label class="sheet-showsect sheet-macro-text-showlabel" data-i18n="macro-text">Macro Text</label>
									<input type="checkbox" class="sheet-showarrow sheet-id-show" title="Click to expand" data-i18n-title="showsect-cmd" aria-label="Show Row ID" name="attr_ids-show" value="1"  />
									<label class="sheet-showsect sheet-id-showlabel" data-i18n="identification-abbrv">ID</label>
									<hr class="sheet-subnav-hr">
									<div class="sheet-cheat"></div>
									<textarea class="sheet-macro-text" title="@{repeating_npc-spell-like-abilities_$X_macro-text}" name="attr_macro-text">&{template:pf_generic} @{toggle_accessible_flag} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_generic}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle}} {{name=@{name}}} {{^{level}=[[@{level}]]}} {{^{range}=@{range}}} {{^{duration}=@{duration}}} {{^{save}=@{save}}} {{^{spell-resistance-abbrv}=@{sr}}} {{description=@{short-description}}}</textarea>
									<div class="sheet-repeating-id">
										<span data-i18n="identification-abbrv">ID</span>: <span class="sheet-selectable" name="attr_row_id" />
									</div>
								</div>
							</fieldset>
						</div>
					</div>
					<!-- Mythic Adventures display option toggled from Config -->
					<div class="sheet-repeating-sect sheet-section3 sheet-section-mythic">
						<span class="sheet-nontable-name sheet-selected-tabtitle sheet-secondary-table-name" data-i18n="mythic-path-features-and-abilities">Mythic Path Features and Abilities</span>
						<input type="checkbox" class="sheet-minimize-show sheet-cssbutton" data-i18n-title="minimize-all-cmd" data-i18n-aria-label="minimize-all-cmd" title="Minimize all rows." name="attr_mythic-min-show" value="1" /><span></span>
						<input type="checkbox" class="sheet-lock-show sheet-cssbutton" data-i18n-title="expand-cmd" data-i18n-aria-label="expand-cmd" title="Collapse or expand all rows." name="attr_mythic-expand-show" value="1" /><span></span>
						<input type="checkbox" class="sheet-split-column-show sheet-cssbutton" data-i18n-title="column-cmd" data-i18n-aria-label="column-cmd" title="Split into two columns" name="attr_mythic-column-show" value="1" /><span></span>
						<input class="sheet-deletebutton sheet-cssbutton sheet-deletesect-show" type="checkbox" name="attr_delete_repeating_mythic-ability_btn" value="1" data-i18n-title="delete-mythic-ability" data-i18n-aria-label="delete-mythic-ability-must-confirm-next-checkbox" /><span></span><label class="sheet-deletesect sheet-allrows-note"><input type="checkbox" class="sheet-selectedlabel-check" name="attr_delete_repeating_mythic-ability" data-i18n-aria-label="confirm-delete-mythic-ability" data-i18n-title="confirm-delete-mythic-ability" value="1" /><b data-i18n="delete-all-rows-are-you-sure">delete all rows are you sure</b></label>
						<div class="sheet-repeating-fields sheet-table">
							<fieldset class="repeating_mythic-ability">
								<span class="sheet-error"><span class="sheet-pictos">!</span><span data-i18n="error-msg1">Error! You must delete this row before editing any items in this section.</span></span>
								<div class="sheet-table-repeating">
									<input type="checkbox" class="sheet-counted sheet-sect-show" data-i18n-title="minimize-cmd" data-i18n-aria-label="minimize-cmd" title="Minimize Row" name="attr_row-show" value="1" checked /><span class="sheet-table-cell"></span>
									<span class="sheet-table-cell sheet-repeating-rollbutton"><button type="roll" name="attr_roll" title="%{selected|repeating_mythic-ability_$X_roll}" value="@{macro-text}"></button></span>
									<span class="sheet-table-cell sheet-small-label sheet-hide-readonly" style="width:2.5em;"><input type="checkbox" name="attr_showinmenu" title="@{repeating_mythic-ability_$X_showinmenu}" value="1"  /><span data-i18n="show-in-menu" data-i18n-title="show-in-menu-title" data-i18n-aria-label="show-in-menu-title">Show</span></span>
									<span class="sheet-table-cell sheet-small-label sheet-sect">
										<select title="@{repeating_mythic-ability_$X_mythic-number}" name="attr_mythic-number" style="min-width:3.5em;">
											<option value="@{mythic-0-path}" selected>0</option>
											<option value="@{mythic-1-path}">1</option>
										</select>
										<br><span data-i18n="path-number">Path #</span>
									</span>
									<span class="sheet-table-cell sheet-small-label" style="width:13%;"><input title="@{repeating_mythic-ability_$X_mythic-path}" type="text" name="attr_mythic-path" value="@{mythic-number}" disabled /><br><span data-i18n="path">Path</span></span>
									<input type="hidden" value="mythic-abilities" name="attr_rule_category" />
									<span class="sheet-table-cell sheet-small-label"><input title="@{repeating_mythic-ability_$X_name}" type="text" name="attr_name" placeholder="Mythic Feature/Ability Name" data-i18n-placeholder="mythic-ability-name" accept="Name"><br><span data-i18n="name">Name</span></span>
									<span class="sheet-table-cell sheet-small-labe sheet-entry-30p-shrink"><textarea class="sheet-inline-textarea" title="@{repeating_mythic-ability_$X_short-description}" name="attr_short-description" placeholder="Short Description" data-i18n-placeholder="short-description"></textarea><br><span data-i18n="short-description-abbrv">Short Desc</span></span>
									<span class="sheet-table-cell sheet-small-label sheet-exspsu-dropdown">
										<select title="@{repeating_mythic-ability_$X_ability_type}" name="attr_ability_type">
											<option value="not-applicable" data-i18n="not-applicable-abbrv-default" selected>&#8226;N/A</option>
											<option value="Ex" data-i18n="extraordinary-abbrv">Ex</option>
											<option value="Sp" data-i18n="spell-like-abbrv" >Sp</option>
											<option value="Su" data-i18n="supernatural-abbrv">Su</option>
										</select>
										<br>
										<span data-i18n="type">Type</span>
									</span>
									<span class="sheet-table-cell sheet-small-label" style="width:.1%;"><input title="@{repeating_mythic-ability_$X_used}" type="number" name="attr_used" value="0" /><br><span data-i18n="uses">Uses</span></span>
									<span class="sheet-divider-lg" style="width:.1%;">/</span>
									<input type="checkbox" name="attr_used_max_error" class="sheet-error-mshow" value="1" />
									<span class="sheet-table-cell sheet-small-label sheet-highlight" style="width:.1%;"><input title="@{repeating_mythic-ability_$X_used|max}" type="number" name="attr_used_max" value="0" class="sheet-calc" readonly /><br><span data-i18n="maximum-abbrv">Max</span></span>
									<span class="sheet-table-cell sheet-small-label sheet-sect sheet-hide-readonly sheet-highlight" style="width:7%;"><textarea class="sheet-inline-textarea sheet-both" title="@{repeating_mythic-ability_$X_max-calculation}" name="attr_max-calculation" placeholder="#/Equation" data-i18n-placeholder="equation-macro-place" ></textarea><br><span data-i18n="maximum-calculation-abbrv">Max Calc</span></span>
									<div class="sheet-sect sheet-expand sheet-hide-readonly">
										<input type="checkbox" class="sheet-showarrow sheet-desc-show" title="Click to expand" data-i18n-title="showsect-cmd" data-i18n-aria-label="showsect-cmd" aria-label="Show Description" name="attr_description-show" value="1" />
										<label class="sheet-showsect sheet-desc-showlabel" data-i18n="description">Description</label>
										<input type="checkbox" class="sheet-showarrow sheet-macro-text-show" title="Click to expand" data-i18n-title="showsect-cmd" data-i18n-aria-label="showsect-cmd" aria-label="Show Macro Text" name="attr_macro-text-show" value="1" />
										<label class="sheet-showsect sheet-macro-text-showlabel" data-i18n="macro-text">Macro Text</label>
										<input type="checkbox" class="sheet-showarrow sheet-id-show" title="Click to expand" data-i18n-title="showsect-cmd" data-i18n-aria-label="showsect-cmd" aria-label="Show Row ID" name="attr_ids-show" value="1" />
										<label class="sheet-showsect sheet-id-showlabel" data-i18n="identification-abbrv">ID</label>
										<hr class="sheet-subnav-hr">
										<div class="sheet-cheat"></div>
										<textarea class="sheet-desc" title="@{repeating_mythic-ability_$X_description}" name="attr_description" accept="Content"></textarea>
										<textarea class="sheet-macro-text" title="@{repeating_mythic-ability_$X_macro-text}" name="attr_macro-text">@{PC-whisper} &{template:pf_block} @{toggle_accessible_flag} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_block}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle}} {{class=**^{path}**: @{mythic-number}}} {{name=@{name}}} {{description=@{short-description}}}</textarea>
										<div class="sheet-repeating-id">
											<span data-i18n="row-identification-for-macros">Row ID for macros</span>: <span class="sheet-selectable" name="attr_row_id" />
										</div>
									</div>
								</div>
							</fieldset>
						</div>
					</div>
				</div>
			</div>
			<div class="sheet-section7 sheet-section sheet-section-spells" role="region" aria-label="Spells" data-i18n-aria-label="spells">
				<h1 class="sheet-selected-tabtitle" data-i18n="spells">Spells</h1>
				<div class="sheet-cheat sheet-show-readonly sheet-inverse-readonly"></div>
				<input type="checkbox" class="sheet-advanced-spell-option-show sheet-noshow" name="attr_use_advanced_options" value="1" role="presentation" />
				<input type="checkbox" class="sheet-advanced-spell-macro-show sheet-noshow" name="attr_adv_macro_show" value="1" role="presentation" />
				<input type="checkbox" class="sheet-spell-multiclassed-show sheet-firsttab-inverse-show" name="attr_spellclasses_multiclassed" title="True if more than one spellcasting class" value="1" role="presentation" /><span data-i18n="multiple-spellclasses"> Has multiple spellcasting classes</span>
				<!-- Spell Classes 0,1,2 -->
				<div class="sheet-cheat sheet-show-readonly"></div>
				<input class="sheet-showarrow sheet-h2arrow" type="checkbox" name="attr_spellclasses-show" data-i18n-aria-label="spellcasting-classes" title="Click to expand" data-i18n-title="showsect-cmd" value="1" checked />
				<label class="sheet-clickheader sheet-showsect" title="Click to expand" data-i18n-title="showsect-cmd" data-i18n-aria-label="showsect-cmd" data-i18n="spellcasting-classes">Spellcasting Classes</label>
				<div class="sheet-h2-section sheet-spellcasting-classes sheet-noborder-readonly sheet-wide-readonly">
					<div role="menubar" class="sheet-spellclassnav sheet-tabs sheet-spell-multiclassed" aria-label="spellcasting classes" data-i18n-aria-label="spellcasting-classes"></div>
					<input type="radio" class="sheet-tabinput sheet-tab0 sheet-spell-multiclassed" name="attr_spellclass_tab" value="0" data-i18n-title="spell-class-zero" data-i18n-aria-label="spell-class-zero" checked />
					<label role="menuitem" class="sheet-tab sheet-tab0 sheet-spell-multiclassed" data-i18n-title="spell-class-zero" data-i18n-aria-label="spell-class-zero" title="Spell Class 0" data-i18n="spell-class-zero">Spell Class 0</label>
					<input type="radio" class="sheet-tabinput sheet-tab1 sheet-spell-multiclassed" name="attr_spellclass_tab" value="1" data-i18n-title="spell-class-one" data-i18n-aria-label="spell-class-one" />
					<label role="menuitem" class="sheet-tab sheet-tab1 sheet-spell-multiclassed" data-i18n-title="spell-class-one" data-i18n-aria-label="spell-class-one" title="Spell Class 1" data-i18n="spell-class-one">Spell Class 1</label>
					<input type="radio" class="sheet-tabinput sheet-tab2 sheet-spell-multiclassed" name="attr_spellclass_tab" value="2" data-i18n-title="spell-class-two" data-i18n-aria-label="spell-class-two" />
					<label role="menuitem" class="sheet-tab sheet-tab2 sheet-spell-multiclassed" data-i18n-title="spell-class-two" data-i18n-aria-label="spell-class-two" title="Spell Class 2" data-i18n="spell-class-two">Spell Class 2</label>
					<input type="radio" class="sheet-tabinput sheet-tab99 sheet-spell-multiclassed" name="attr_spellclass_tab" value="99" data-i18n-title="all" data-i18n-aria-label="all" />
					<label role="menuitem" class="sheet-tab sheet-tab99 sheet-spell-multiclassed" data-i18n-title="all" data-i18n-aria-label="all" title="All" data-i18n="all">All</label>
					<input type="checkbox" class="sheet-noshow sheet-spellpoints-show" name="attr_use_spell_points" value="1" />
					<!-- Spell Class 0 -->
					<h2 class="sheet-section0 sheet-nontable-name"><span name="attr_spellclass-0-name"></span></h2>
					<div class="sheet-section0 sheet-section-spellclass sheet-spellclass-0">
						<div class="sheet-col sheet-col1">
							<input class="sheet-showarrow sheet-h3arrow" type="checkbox" name="attr_spellclass-0-show" data-i18n-aria-label="spellclass-level-base" title="Click to expand" data-i18n-title="showsect-cmd" value="1" checked />
							<h3 class="sheet-clickheader sheet-showsect"><label title="Click to expand" data-i18n-title="showsect-cmd" data-i18n-aria-label="showsect-cmd" data-i18n="level-and-ability">Level and Caster Ability</label></h3>
							<div class="sheet-cheat"></div>
							<div class="sheet-h3-section sheet-table sheet-spellclass-level sheet-narrow-numbers">
								<span class="sheet-table-name" data-i18n="caster-class-level">Caster Class and Level</span>
								<div class="sheet-table-group-head">
									<div class="sheet-table-row">
										<span class="sheet-table-header" data-i18n="check">Check</span>
										<span class="sheet-table-header" data-i18n-title="effective-caster-level" data-i18n-aria-label="effective-caster-level" data-i18n="caster-level">Caster Level</span>
										<span class="sheet-table-header sheet-divider"></span>
										<span class="sheet-table-header sheet-hide-readonly" data-i18n-title="class-number-explanation" data-i18n-aria-label="class-number-explanation" data-i18n="synchronize-class">Sync Class</span>
										<span class="sheet-table-header sheet-entry-long" style="min-width:10em;" data-i18n="class-name">Class Name</span>
										<span class="sheet-table-header sheet-hide-readonly" data-i18n="base-level">Base Level</span>
										<span class="sheet-divider sheet-table-header sheet-advanced-spell-option"></span>
										<span class="sheet-table-header sheet-advanced-spell-option" data-i18n="miscellaneous-abbrv">Misc</span>
										<span class="sheet-divider sheet-table-header sheet-hide-readonly"></span>
										<span class="sheet-table-header" data-i18n="buff">Buff</span>
										<span class="sheet-divider sheet-table-header sheet-hide-readonly"></span>
										<span class="sheet-table-header" data-i18n-title="condition-description" data-i18n-aria-label="condition-description" data-i18n="condition-abbrv">Cond</span>
									</div>
								</div>
								<div class="sheet-table-group">
									<div class="sheet-table-row">
										<span class="sheet-table-cell sheet-spellcaster-button">
											<button class="sheet-spellcaster-button" title="%{selected|Spell-Class-0-CL-Check}" type="roll" name="roll_Spell-Class-0-CL-Check" value="@{PC-whisper} &{template:pf_generic} @{toggle_spell_accessible} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_generic}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle}} {{name=^{caster-level-check}}} {{class=**@{spellclass-0-name} @{spellclass-0-level}**}} {{check=[[ 1d20 + [[ @{spellclass-0-level-total} ]] ]]}} {{^{spell-penetration-bonus-abbrv}=@{spellclass-0-SP-mod}}} {{lefttext_6=@{CasterLevel-0-note}}}">&nbsp;<span style="vertical-align: middle;" data-i18n="caster-level-check">Casterlevel Check</span>&nbsp;
											</button>
										</span>
										<span class="sheet-table-cell sheet-left sheet-number"><input title="@{spellclass-0-level-total}" type="number" name="attr_spellclass-0-level-total" value="0" class="sheet-calc" readonly /></span>
										<span class="sheet-divider sheet-hide-readonly">=</span>
										<span class="sheet-table-cell sheet-entry-vshort sheet-hide-readonly">
											<select title="@{spellclass-0} Choose or enter manually" name="attr_spellclass-0" class="sheet-select-small sheet-select-class">
												<option value="-1" data-i18n="select-class-or-manual-default" selected>&#8226;Select Class or enter other manually</option>
												<option value="0" data-i18n="1-ordinal-class" >1st Class</option>
												<option value="1" data-i18n="2-ordinal-class" >2nd Class</option>
												<option value="2" data-i18n="3-ordinal-class" >3rd Class</option>
												<option value="3" data-i18n="4-ordinal-class" >4th Class</option>
												<option value="4" data-i18n="5-ordinal-class" >5th Class</option>
												<option value="5" data-i18n="6-ordinal-class" >6th Class</option>
												<option value="6" data-i18n="race-hd">Race (use HD for level)</option>
											</select>
										</span>
										<span class="sheet-table-cell sheet-entry_long">
											<input class="sheet-calc-advanced-spell-option" title="@{spellclass-0-name}" type="text" name="attr_spellclass-0-name" placeholder="Class Name" data-i18n-placeholder="class-name">
										</span>
										<span class="sheet-table-cell sheet-hide-readonly sheet-number sheet-left"><input title="@{spellclass-0-level}" type="number" name="attr_spellclass-0-level" value="0" /></span>
										<span class="sheet-divider sheet-advanced-spell-option">+</span>
										<span class="sheet-table-cell sheet-advanced-spell-option sheet-number"><input title="@{spellclass-0-level-misc}" type="number" name="attr_spellclass-0-level-misc" value="0" /></span>
										<span class="sheet-divider">+</span>
										<span class="sheet-table-cell sheet-number"><input title="@{buff_CasterLevel-total}" name="attr_buff_CasterLevel-total" type="number" value="0" class="sheet-calc" readonly /></span>
										<span class="sheet-divider">+</span>
										<span class="sheet-table-cell sheet-number"><input title="@{CasterLevel-Penalty}" name="attr_CasterLevel-Penalty" type="number" value="0" class="sheet-calc" readonly /></span>
									</div>
								</div>
							</div>
							<div class="sheet-h3-section sheet-spellclass-ranges" role="presentation" >
								<div class="sheet-table sheet-show-readonly sheet-inverse-readonly" >
									<div class="sheet-table-row">
										<span class="sheet-table-row-name sheet-spellrange-header" data-i18n="close">Close</span>
										<span class="sheet-table-cell"><input class="sheet-spellrange-data sheet-calc sheet-entry-wide" title="@{spellclass-0-close} 25 + 5/2 levels" type="number" name="attr_spellclass-0-close" value="0" readonly /></span>
										<span class="sheet-table-row-name sheet-spellrange-header" data-i18n="medium">Medium</span>
										<span class="sheet-table-cell"><input class="sheet-spellrange-data sheet-calc sheet-entry-wide" title="@{spellclass-0-medium} 100 + 10/level" type="number" name="attr_spellclass-0-medium" value="0" readonly /></span>
										<span class="sheet-table-row-name sheet-spellrange-header" data-i18n="long">Long</span>
										<span class="sheet-table-cell"><input class="sheet-spellrange-data sheet-calc sheet-entry-wide" title="@{spellclass-0-long} 400 + 40/level" type="number" name="attr_spellclass-0-long" value="0" readonly /></span>
									</div>
								</div>
								<div class="sheet-table sheet-hide-readonly" >
									<span class="sheet-table-name" data-i18n="spells-ranges">Spell Ranges</span>
									<div class="sheet-table-group-head">
										<span class="sheet-table-header" data-i18n="close">Close</span>
										<span class="sheet-table-header" data-i18n="medium">Medium</span>
										<span class="sheet-table-header" data-i18n="long">Long</span>
									</div>
									<div class="sheet-table-row">
										<span class="sheet-table-cell"><input class="sheet-spellrange-data sheet-calc sheet-entry-wide" title="@{spellclass-0-close} 25 + 5/2 levels" type="number" name="attr_spellclass-0-close" value="0" readonly /></span>
										<span class="sheet-table-cell"><input class="sheet-spellrange-data sheet-calc sheet-entry-wide" title="@{spellclass-0-medium} 100 + 10/level" type="number" name="attr_spellclass-0-medium" value="0" readonly /></span>
										<span class="sheet-table-cell"><input class="sheet-spellrange-data sheet-calc sheet-entry-wide" title="@{spellclass-0-long} 400 + 40/level" type="number" name="attr_spellclass-0-long" value="0" readonly /></span>
									</div>
								</div>
							</div>
							<div class="sheet-h3-section sheet-table sheet-spellclass-concentration" >
								<span class="sheet-table-name" data-i18n="spellcasting-ability">Spellcasting Ability</span>
								<div class="sheet-table-group-head">
									<span class="sheet-table-header" data-i18n="check">Check</span>
									<span class="sheet-table-header" data-i18n="total">Total</span>
									<span class="sheet-divider sheet-table-header"></span>
									<span class="sheet-table-header sheet-ability-column" style="width:6em;" data-i18n="ability">Ability</span>
									<span class="sheet-table-header" data-i18n="modifier-abbrv">Mod</span>
									<span class="sheet-divider sheet-table-header"></span>
									<span class="sheet-table-header sheet-hide-readonly" data-i18n-title="effective-caster-level" data-i18n-aria-label="effective-caster-level" data-i18n="caster-level">Caster Level</span>
									<span class="sheet-divider sheet-table-header sheet-advanced-spell-option"></span>
									<span class="sheet-table-header sheet-advanced-spell-option" data-i18n="miscellaneous-abbrv">Misc</span>
									<span class="sheet-table-header sheet-table-rightcell" aria-label="empty spacer cell" role="presentation"></span>
								</div>
								<div class="sheet-table-row">
									<span class="sheet-table-cell sheet-spellcaster-button" style="min-width:9rem;"><button class="sheet-spellcaster-button" style="min-width:9rem;" title="%{selected|Concentration-Check-0}" type="roll" name="roll_Concentration-Check-0" value="@{PC-whisper} &{template:pf_generic} @{toggle_spell_accessible} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_generic}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle}} {{name=^{concentration-check}}} {{class=**@{spellclass-0-name} @{spellclass-0-level}**}} {{check=[[ 1d20 + [[ @{Concentration-0} ]] ]]}} {{^{defensive-casting-bonus-abbrv}=@{Concentration-0-def}}} {{lefttext_6=@{Concentration-0-miscnote}}}">&nbsp;<span style="vertical-align: middle;" data-i18n="concentration-check">Concentration</span>&nbsp;</button></span>
									<span class="sheet-table-cell sheet-left sheet-number"><input title="@{Concentration-0}" type="number" name="attr_Concentration-0" value="0" class="sheet-calc" readonly /></span>
									<span class="sheet-divider">=</span>
									<span class="sheet-table-cell sheet-ability-column" >
										<select class="sheet-select-small" title="@{Concentration-0-ability}" name="attr_Concentration-0-ability">
											<option value="0" data-i18n="select-one-default" selected>&#8226;Select One</option>
											<option value="@{STR-mod}" data-i18n="strength-abbrv">STR</option>
											<option value="@{DEX-mod}" data-i18n="dexterity-abbrv">DEX</option>
											<option value="@{CON-mod}" data-i18n="constitution-abbrv">CON</option>
											<option value="@{INT-mod}" data-i18n="intelligence-abbrv">INT</option>
											<option value="@{WIS-mod}" data-i18n="wisdom-abbrv">WIS</option>
											<option value="@{CHA-mod}" data-i18n="charisma-abbrv">CHA</option>
										</select>
									</span>
									<span class="sheet-table-cell sheet-number sheet-left"><input title="@{Concentration-0-mod}" type="number" name="attr_Concentration-0-mod" value="0" class="sheet-calc" readonly /></span>
									<span class="sheet-divider">+</span>
									<span class="sheet-table-cell sheet-number sheet-hide-readonly"><input title="@{spellclass-0-level-total}" type="number" name="attr_spellclass-0-level-total" value="0" class="sheet-calc" readonly /></span>
									<span class="sheet-divider sheet-advanced-spell-option">+</span>
									<span class="sheet-table-cell sheet-advanced-spell-option sheet-number"><input title="@{Concentration-0-misc}" type="number" name="attr_Concentration-0-misc" value="0" /></span>
									<span class="sheet-table-cell"></span>
								</div>
							</div>
							<div class="sheet-h3-section sheet-table sheet-spellclass-roll-adj">
								<span class="sheet-table-name">Roll adjustments</span>
								<div class="sheet-table-row">
									<span class="sheet-table-header sheet-nowrap sheet-entry-30p-shrink sheet-super sheet-note-a" style="min-width:9em;" data-i18n-aria-label="spell-penetration-bonus-label"  data-i18n="spell-penetration-bonus-abbrv">Spell Pen Bonus</span>
									<span class="sheet-table-header"></span>
									<span class="sheet-table-header sheet-nowrap-readonly" title="Concentration Bonus when casting defensively" data-i18n-title="cast-defensive-bonus" data-i18n-aria-label="cast-defensive-bonus" style="word-wrap:normal;" data-i18n="cast-defensive-bonus-abbrv">Cast Def. Bonus</span>
									<span class="sheet-table-header sheet-table-rightcell sheet-show-readonly sheet-inverse-readonly"aria-label="empty spacer cell" role="presentation"></span>
								</div>
								<div class="sheet-table-row">
									<input type="checkbox" name="attr_spellclass-0-SP-mod_error" class="sheet-error-mshow" value="1" />
									<span class="sheet-table-cell sheet-highlight" ><textarea class="sheet-inline-textarea" title="@{spellclass-0-SP_misc}" name="attr_spellclass-0-SP_misc" data-i18n-placeholder="equation-macro-place"></textarea></span>
									<span class="sheet-table-cell sheet-number sheet-highlight"><input type="number" title="@{spellclass-0-SP-mod}" name="attr_spellclass-0-SP-mod" value="0" class="sheet-calc" readonly></span>
									<span class="sheet-table-cell sheet-nowrap-readonly"><input title="@{Concentration-0-def}" type="number" name="attr_Concentration-0-def" value="0" /></span>
									<span class="sheet-table-cell sheet-show-readonly sheet-inverse-readonly"></span>
								</div>
							</div>
							<div class="sheet-cheat"></div>
							<input class="sheet-showarrow sheet-h3arrow sheet-spellpoints-sect" type="checkbox" name="attr_spellclass-0-spellpoints-show" data-i18n-aria-label="spellspoints" title="Click to expand" data-i18n-title="showsect-cmd" value="1" />
							<h3 class="sheet-clickheader sheet-showsect sheet-spellpoints-sect"><label title="Click to expand" data-i18n-title="showsect-cmd" data-i18n-aria-label="showsect-cmd" data-i18n="spell-points">Spell Points</label></h3>
							<div class="sheet-h3-section sheet-spellpoints sheet-table sheet-spellpoints-sect">
								<div class="sheet-table-group">
									<div class="sheet-table-row">
										<span class="sheet-table-header" data-i18n="spell-points">Spell Points</span>
										<span class="sheet-table-header sheet-divider"></span>
										<span class="sheet-table-header" data-i18n="points-per-day">Points/Day</span>
										<span class="sheet-table-header sheet-divider"></span>
										<span class="sheet-table-header" data-i18n="base-points-per-day">Base points/day</span>
										<span class="sheet-table-header" data-i18n="bonus-points">Ability Bonus</span>
										<span class="sheet-table-header" data-i18n="miscellaneous-abbrv">misc</span>
									</div>
								</div>
								<div class="sheet-table-group">
									<div class="sheet-table-row">
										<span class="sheet-table-cell"><input title="@{spellclass-0-spell-points-per-day}" type="number" name="attr_spellclass-0-spell-points-per-day" value="0" /></span>
										<span class="sheet-divider">/</span>
										<span class="sheet-table-cell"><input title="@{spellclass-0-spell-points-per-day|max}" type="text" class="sheet-number" name="attr_spellclass-0-spell-points-per-day_max" value="(@{spellclass-0-spell-points-class} + [[ @{spellclass-0-spell-points-bonus} ]] + [[ @{spellclass-0-spell-points-misc} ]])" disabled /></span>
										<span class="sheet-divider">=</span>
										<span class="sheet-table-cell"><input title="@{spellclass-0-spell-points-class}" type="number" name="attr_spellclass-0-spell-points-class" value="0" /></span>
										<span class="sheet-table-cell"><input title="@{spellclass-0-spell-points-bonus}" type="number" name="attr_spellclass-0-spell-points-bonus" value="0" /></span>
										<span class="sheet-table-cell"><input title="@{spellclass-0-spell-points-misc}" type="number" name="attr_spellclass-0-spell-points-misc" value="0" /></span>
									</div>
								</div>
							</div>
							<div class="sheet-cheat"></div>
							<input class="sheet-showarrow sheet-h3arrow" type="checkbox" name="attr_spellclass-0-spells-notes-show" data-i18n-aria-label="spells-notes" title="Click to expand" data-i18n-title="showsect-cmd" value="1" />
							<h3 class="sheet-clickheader sheet-showsect"><label title="Click to expand" data-i18n-title="showsect-cmd" data-i18n-aria-label="showsect-cmd" data-i18n="spells-notes">Spells Notes</label></h3>
							<div class="sheet-h3-section sheet-table sheet-spellclass-spellnotes">
								<span class="sheet-table-name" data-i18n="notes">Notes</span>
								<div class="sheet-table-group-head">
									<span class="sheet-table-header" data-i18n="spells-notes" data-i18n-title="spells-notes" data-i18n-aria-label="spells-notes" >Spells Notes</span>					
									<span class="sheet-table-header" data-i18n="caster-level" data-i18n-title="caster-level-check-notes" data-i18n-aria-label="caster-level-check-notes" >Caster Level</span>						
									<span class="sheet-table-header" data-i18n="concentration" data-i18n-title="concentration-check-notes" data-i18n-aria-label="concentration-check-notes" >Concentration</span>						
								</div>
								<div class="sheet-table-row">
									<div class="sheet-table-cell sheet-notes-cell">
										<textarea class="sheet-half" title="@{spell-class-0-spells-notes}" name="attr_spell-class-0-spells-notes" placeholder="Spells notes" data-i18n-placeholder="spells-notes" data-i18n-aria-label="spells-notes"></textarea>
									</div>
									<div class="sheet-table-cell sheet-notes-cell">
										<textarea class="sheet-half" title="@{CasterLevel-0-note}" name="attr_CasterLevel-0-note"  placeholder="notes" data-i18n-placeholder="caster-level-check-notes" data-i18n-aria-label="caster-level-check-notes"></textarea>
									</div>
									<div class="sheet-table-cell sheet-notes-cell">
										<textarea class="sheet-half" title="@{Concentration-0-miscnote}" name="attr_Concentration-0-miscnote" placeholder="notes" data-i18n-placeholder="concentration-check-notes" data-i18n-aria-label="concentration-check-notes"></textarea>
									</div>
								</div>
							</div>
						</div>
						<div class="sheet-col sheet-col2">
							<div class="sheet-cheat"></div>
							<input class="sheet-showarrow sheet-h3arrow" type="checkbox" name="attr_spellclass-0-perday-show" data-i18n-aria-label="spells-per-day" title="Click to expand" data-i18n-title="showsect-cmd" value="1" checked />
							<h3 class="sheet-clickheader sheet-showsect"><label title="Click to expand" data-i18n-title="showsect-cmd" data-i18n-aria-label="showsect-cmd" data-i18n="spells-per-day">Spells Per Day</label></h3>
							<div class="sheet-h3-section sheet-spells-per-day">
								<div style="display:inline;margin-left:.5em;margin-right:.5em;" role="radiogroup" >
									<span data-i18n="casting-type" data-i18n-title="future-use" data-i18n-aria-label="future-use">Casting Type:</span>
									<label><input class="sheet-boldlabel-check" type="radio" name="attr_spellclass-0-casting_type" value="1" title="@{spellclass-0-casting_type}" checked /><b><span data-i18n-title="display-spells-known" data-i18n-aria-label="display-spells-known" data-i18n="spontaneous"> Spontaneous</span></b></label>
									<label><input class="sheet-boldlabel-check" type="radio" name="attr_spellclass-0-casting_type" value="2" title="@{spellclass-0-casting_type}" /><b><span data-i18n="prepared"> Prepared</span></b></label>
								</div>
								<input type="checkbox" value="1" class="sheet-subsect2-show sheet-sect2-show sheet-noshow" name="attr_spellclass-0-casting_type" role="presentation" aria-label="spontaneous" />
								<input type="checkbox" value="2" class="sheet-subsect3-show sheet-sect3-show sheet-noshow" name="attr_spellclass-0-casting_type" role="presentation" aria-label="prepared" />
								<label style="margin-left:.5em;" class="sheet-sect3"><input class="sheet-selectedlabel-check" type="checkbox" name="attr_spellclass-0-hide_unprepared" value="1" title="@{spellclass-0-hide_unprepared}" /><b data-i18n-title="prepared-spells-explanation" data-i18n-aria-label="prepared-spells-explanation" data-i18n="spellbook-only-prepared-spells"> Show only spells with 'uses' in spellbook</b></label>
								<label style="margin-left:.5em;" class="sheet-sect3"><input class="sheet-selectedlabel-check" type="checkbox" name="attr_spellclass-0-show_domain_spells" value="1" title="@{spellclass-0-show_domain_spells}" /><b data-i18n-title="domain-spells-explanation" data-i18n-aria-label="domain-spells-explanation" data-i18n="always-show-domain-spells"> Always show spells marked 'domain' in spellbook menu</b></label>
								<label style="margin-left:.5em;"><input class="sheet-selectedlabel-check" type="checkbox" name="attr_total_spells_manually" value="1" title="@{total_spells_manually}" /><b data-i18n-title="add-custom-column" data-i18n-aria-label="total-spells-manually" data-i18n="total-spells-manually">Total Spells Manually</b></label>
								<input type="checkbox" value="1" class="sheet-noshow sheet-subsect-show sheet-subsect-show-inverse" name="attr_total_spells_manually" role="presentation" />
								<div class="sheet-table" role="grid">
									<span class="sheet-table-name" data-i18n="spells-per-day">Spells Per Day</span>
									<div class="sheet-table-group-head">
										<div class="sheet-table-row">
											<span class="sheet-table-header" data-i18n="save-difficulty-class">Save DC</span>
											<span class="sheet-table-header sheet-right-border" data-i18n="level-abbrv">Lvl</span>
											<span class="sheet-table-header sheet-sect">#</span>											
											<span class="sheet-table-header sheet-sect3 sheet-sect-inverse" data-i18n-title="sum-prepared-from-spells" data-i18n-aria-label="sum-prepared-from-spells" data-i18n="number-prepared-abbrv"># Prep'd</span>
											<span class="sheet-table-header sheet-sect2 sheet-sect-inverse" data-i18n-title="sum-uses-spells" data-i18n-aria-label="sum-uses-spells" data-i18n="number-used"># Used</span>
											<span class="sheet-table-header sheet-divider"></span>
											<span class="sheet-table-header" data-i18n="spells-per-day">Spells/Day</span>
											<span class="sheet-table-header sheet-divider"></span>
											<span class="sheet-table-header" data-i18n="base-spells-per-day">Base<br/>Spells/Day</span>
											<span class="sheet-table-header sheet-divider"></span>
											<span class="sheet-table-header" data-i18n="bonus-spells">Bonus Spells</span>
											<span class="sheet-table-header sheet-advanced-spell-option sheet-divider"></span>
											<span class="sheet-table-header sheet-advanced-spell-option sheet-entry-med sheet-entry-custom-header"><input class="sheet-entry-custom-header sheet-entry-med" name="attr_spellclass-0-user_defined_column" title="@{spellclass-0-user_defined_column}" type="text" value="" data-i18n-placeholder="user-defined" placeholder="User Defined" /></span>
											<span class="sheet-table-header sheet-sect2 sheet-left-border" data-i18n="spells-known">Spells Known</span>
											<span class="sheet-table-header sheet-sect2" data-i18n="total-listed">Total spells in list</span>
											<span class="sheet-table-header sheet-advanced-spell-option sheet-entry-med sheet-entry-custom-header sheet-left-border"><input class="sheet-entry-custom-header sheet-entry-med" name="attr_spellclass-0-user_defined_column2" title="@{spellclass-0-user_defined_column2}" type="text" value="" data-i18n-placeholder="user-defined" placeholder="User Defined" /></span>											
										</div>
									</div>
									<div class="sheet-table-group">
										<div class="sheet-table-row">
											<span class="sheet-table-cell"><input title="@{spellclass-0-level-0-savedc}" type="number" name="attr_spellclass-0-level-0-savedc" value="10" class="sheet-calc" readonly /></span>
											<span class="sheet-table-cell sheet-right-border">0</span>
											<span class="sheet-table-cell sheet-sect"><input title="@{spellclass-0-level-0-spells-per-day}" type="number" name="attr_spellclass-0-level-0-spells-per-day" value="0"  /></span>
											<span class="sheet-table-cell sheet-sect3 sheet-sect-inverse"><input title="@{spellclass-0-level-0-spells-prepared}" type="number" name="attr_spellclass-0-level-0-spells-prepared" value="0" class="sheet-calc" readonly /></span>
											<span class="sheet-table-cell sheet-sect2 sheet-sect-inverse"><input title="@{spellclass-0-level-0-spells-per-day}" type="number" name="attr_spellclass-0-level-0-spells-per-day" value="0" readonly /></span>
											<span class="sheet-divider">/</span>
											<span class="sheet-table-cell"><input title="@{spellclass-0-level-0-spells-per-day|max}" type="number" name="attr_spellclass-0-level-0-spells-per-day_max" value="0" class="sheet-calc" readonly /></span>
											<span class="sheet-divider">=</span>
											<span class="sheet-table-cell"><input title="@{spellclass-0-level-0-class}" type="text" name="attr_spellclass-0-level-0-class" value="" placeholder="-" class="sheet-number" /></span>
											<span class="sheet-divider">+</span>
											<span class="sheet-table-cell sheet-ability-column">
												<select class="sheet-select-small" title="@{Concentration-0-ability}" name="attr_Concentration-0-ability" >
													<option value="0" data-i18n="select-one-default" selected>&#8226;Select One</option>
													<option value="@{STR-mod}" data-i18n="strength-abbrv">STR</option>
													<option value="@{DEX-mod}" data-i18n="dexterity-abbrv">DEX</option>
													<option value="@{CON-mod}" data-i18n="constitution-abbrv">CON</option>
													<option value="@{INT-mod}" data-i18n="intelligence-abbrv">INT</option>
													<option value="@{WIS-mod}" data-i18n="wisdom-abbrv">WIS</option>
													<option value="@{CHA-mod}" data-i18n="charisma-abbrv">CHA</option>
												</select>
											</span>
											<span class="sheet-dividerl sheet-advanced-spell-option">+</span>
											<span class="sheet-table-cell sheet-advanced-spell-option"><input title="@{spellclass-0-level-0-misc}" type="number" name="attr_spellclass-0-level-0-misc" value="0" /></span>
											<span class="sheet-table-cell sheet-sect2 sheet-left-border"><input title="@{spellclass-0-level-0-spells-known}" type="number" name="attr_spellclass-0-level-0-spells-known" value="0" /></span>
											<span class="sheet-table-cell sheet-sect2"><input title="@{spellclass-0-level-0-total-listed}" type="number" name="attr_spellclass-0-level-0-total-listed" value="0" class="sheet-calc" readonly /></span>
											<span class="sheet-table-cell sheet-advanced-spell-option sheet-left-border"><input title="@{spellclass-0-level-0-user}" type="number" name="attr_spellclass-0-level-0-user" value="0" /></span>
										</div>
										<div class="sheet-table-row">
											<span class="sheet-table-cell"><input title="@{spellclass-0-level-1-savedc}" type="number" name="attr_spellclass-0-level-1-savedc" value="11" class="sheet-calc" readonly /></span>
											<span class="sheet-table-cell sheet-right-border" data-i18n="1-ordinal" >1st</span>
											<span class="sheet-table-cell sheet-sect"><input title="@{spellclass-0-level-1-spells-per-day}" type="number" name="attr_spellclass-0-level-1-spells-per-day" value="0" /></span>
											<span class="sheet-table-cell sheet-sect3 sheet-sect-inverse"><input title="@{spellclass-0-level-1-spells-prepared}" type="number" name="attr_spellclass-0-level-1-spells-prepared" value="0" class="sheet-calc" readonly /></span>
											<span class="sheet-table-cell sheet-sect2 sheet-sect-inverse"><input title="@{spellclass-0-level-1-spells-per-day}" type="number" name="attr_spellclass-0-level-1-spells-per-day" value="0" class="sheet-calc" readonly /></span>
											<span class="sheet-divider">/</span>
											<span class="sheet-table-cell"><input title="@{spellclass-0-level-1-spells-per-day|max}" type="number" name="attr_spellclass-0-level-1-spells-per-day_max" value="0" class="sheet-calc" readonly /></span>
											<span class="sheet-divider">=</span>
											<span class="sheet-table-cell"><input title="@{spellclass-0-level-1-class}" type="text" name="attr_spellclass-0-level-1-class" value="" placeholder="-" class="sheet-number" /></span>
											<span class="sheet-divider">+</span>
											<span class="sheet-table-cell"><input title="@{spellclass-0-level-1-bonus}" type="number" name="attr_spellclass-0-level-1-bonus" value="0" class="sheet-calc" readonly /></span>
											<span class="sheet-dividerl sheet-advanced-spell-option">+</span>
											<span class="sheet-table-cell sheet-advanced-spell-option"><input title="@{spellclass-0-level-1-misc}" type="number" name="attr_spellclass-0-level-1-misc" value="0" /></span>
											<span class="sheet-table-cell sheet-sect2 sheet-left-border"><input title="@{spellclass-0-level-1-spells-known}" type="number" name="attr_spellclass-0-level-1-spells-known" value="0" /></span>
											<span class="sheet-table-cell sheet-sect2"><input title="@{spellclass-0-level-1-total-listed}" type="number" name="attr_spellclass-0-level-1-total-listed" value="0" class="sheet-calc" readonly /></span>
											<span class="sheet-table-cell sheet-advanced-spell-option sheet-left-border"><input title="@{spellclass-0-level-1-user}" type="number" name="attr_spellclass-0-level-1-user" value="0" /></span>
										</div>
										<div class="sheet-table-row">
											<span class="sheet-table-cell"><input title="@{spellclass-0-level-2-savedc}" type="number" name="attr_spellclass-0-level-2-savedc" value="22" class="sheet-calc" readonly /></span>
											<span class="sheet-table-cell sheet-right-border" data-i18n="2-ordinal">2nd</span>
											<span class="sheet-table-cell sheet-sect"><input title="@{spellclass-0-level-2-spells-per-day}" type="number" name="attr_spellclass-0-level-2-spells-per-day" value="0" /></span>
											<span class="sheet-table-cell sheet-sect3 sheet-sect-inverse"><input title="@{spellclass-0-level-2-spells-prepared}" type="number" name="attr_spellclass-0-level-2-spells-prepared" value="0" class="sheet-calc" readonly /></span>
											<span class="sheet-table-cell sheet-sect2 sheet-sect-inverse"><input title="@{spellclass-0-level-2-spells-per-day}" type="number" name="attr_spellclass-0-level-2-spells-per-day" value="0" class="sheet-calc" readonly /></span>
											<span class="sheet-divider">/</span>
											<span class="sheet-table-cell"><input title="@{spellclass-0-level-2-spells-per-day|max}" type="number" name="attr_spellclass-0-level-2-spells-per-day_max" value="0" class="sheet-calc" readonly /></span>
											<span class="sheet-divider">=</span>
											<span class="sheet-table-cell"><input title="@{spellclass-0-level-2-class}" type="text" name="attr_spellclass-0-level-2-class" value="" placeholder="-" class="sheet-number" /></span>
											<span class="sheet-divider">+</span>
											<span class="sheet-table-cell"><input title="@{spellclass-0-level-2-bonus}" type="number" name="attr_spellclass-0-level-2-bonus" value="0" class="sheet-calc" readonly /></span>
											<span class="sheet-dividerl sheet-advanced-spell-option">+</span>
											<span class="sheet-table-cell sheet-advanced-spell-option"><input title="@{spellclass-0-level-2-misc}" type="number" name="attr_spellclass-0-level-2-misc" value="0" /></span>
											<span class="sheet-table-cell sheet-sect2 sheet-left-border"><input title="@{spellclass-0-level-2-spells-known}" type="number" name="attr_spellclass-0-level-2-spells-known" value="0" /></span>
											<span class="sheet-table-cell sheet-sect2"><input title="@{spellclass-0-level-2-total-listed}" type="number" name="attr_spellclass-0-level-2-total-listed" value="0" class="sheet-calc" readonly /></span>
											<span class="sheet-table-cell sheet-advanced-spell-option sheet-left-border"><input title="@{spellclass-0-level-2-user}" type="number" name="attr_spellclass-0-level-2-user" value="0" /></span>
										</div>
										<div class="sheet-table-row">
											<span class="sheet-table-cell"><input title="@{spellclass-0-level-3-savedc}" type="number" name="attr_spellclass-0-level-3-savedc" value="33" class="sheet-calc" readonly /></span>
											<span class="sheet-table-cell sheet-right-border" data-i18n="3-ordinal">3rd</span>
											<span class="sheet-table-cell sheet-sect"><input title="@{spellclass-0-level-3-spells-per-day}" type="number" name="attr_spellclass-0-level-3-spells-per-day" value="0" /></span>
											<span class="sheet-table-cell sheet-sect3 sheet-sect-inverse"><input title="@{spellclass-0-level-3-spells-prepared}" type="number" name="attr_spellclass-0-level-3-spells-prepared" value="0" class="sheet-calc" readonly /></span>
											<span class="sheet-table-cell sheet-sect2 sheet-sect-inverse"><input title="@{spellclass-0-level-3-spells-per-day}" type="number" name="attr_spellclass-0-level-3-spells-per-day" value="0" class="sheet-calc" readonly /></span>
											<span class="sheet-divider">/</span>
											<span class="sheet-table-cell"><input title="@{spellclass-0-level-3-spells-per-day|max}" type="number" name="attr_spellclass-0-level-3-spells-per-day_max" value="0" class="sheet-calc" readonly /></span>
											<span class="sheet-divider">=</span>
											<span class="sheet-table-cell"><input title="@{spellclass-0-level-3-class}" type="text" name="attr_spellclass-0-level-3-class" value="" placeholder="-" class="sheet-number" /></span>
											<span class="sheet-divider">+</span>
											<span class="sheet-table-cell"><input title="@{spellclass-0-level-3-bonus}" type="number" name="attr_spellclass-0-level-3-bonus" value="0" class="sheet-calc" readonly /></span>
											<span class="sheet-dividerl sheet-advanced-spell-option">+</span>
											<span class="sheet-table-cell sheet-advanced-spell-option"><input title="@{spellclass-0-level-3-misc}" type="number" name="attr_spellclass-0-level-3-misc" value="0" /></span>
											<span class="sheet-table-cell sheet-sect2 sheet-left-border"><input title="@{spellclass-0-level-3-spells-known}" type="number" name="attr_spellclass-0-level-3-spells-known" value="0" /></span>
											<span class="sheet-table-cell sheet-sect2"><input title="@{spellclass-0-level-3-total-listed}" type="number" name="attr_spellclass-0-level-3-total-listed" value="0" class="sheet-calc" readonly /></span>
											<span class="sheet-table-cell sheet-advanced-spell-option sheet-left-border"><input title="@{spellclass-0-level-3-user}" type="number" name="attr_spellclass-0-level-3-user" value="0" /></span>
										</div>
										<div class="sheet-table-row">
											<span class="sheet-table-cell"><input title="@{spellclass-0-level-4-savedc}" type="number" name="attr_spellclass-0-level-4-savedc" value="44" class="sheet-calc" readonly /></span>
											<span class="sheet-table-cell sheet-right-border" data-i18n="4-ordinal">4th</span>
											<span class="sheet-table-cell sheet-sect"><input title="@{spellclass-0-level-4-spells-per-day}" type="number" name="attr_spellclass-0-level-4-spells-per-day" value="0" /></span>
											<span class="sheet-table-cell sheet-sect3 sheet-sect-inverse"><input title="@{spellclass-0-level-4-spells-prepared}" type="number" name="attr_spellclass-0-level-4-spells-prepared" value="0" class="sheet-calc" readonly /></span>
											<span class="sheet-table-cell sheet-sect2 sheet-sect-inverse"><input title="@{spellclass-0-level-4-spells-per-day}" type="number" name="attr_spellclass-0-level-4-spells-per-day" value="0" class="sheet-calc" readonly /></span>
											<span class="sheet-divider">/</span>
											<span class="sheet-table-cell"><input title="@{spellclass-0-level-4-spells-per-day|max}" type="number" name="attr_spellclass-0-level-4-spells-per-day_max" value="0" class="sheet-calc" readonly /></span>
											<span class="sheet-divider">=</span>
											<span class="sheet-table-cell"><input title="@{spellclass-0-level-4-class}" type="text" name="attr_spellclass-0-level-4-class" value="" placeholder="-" class="sheet-number" /></span>
											<span class="sheet-divider">+</span>
											<span class="sheet-table-cell"><input title="@{spellclass-0-level-4-bonus}" type="number" name="attr_spellclass-0-level-4-bonus" value="0" class="sheet-calc" readonly /></span>
											<span class="sheet-dividerl sheet-advanced-spell-option">+</span>
											<span class="sheet-table-cell sheet-advanced-spell-option"><input title="@{spellclass-0-level-4-misc}" type="number" name="attr_spellclass-0-level-4-misc" value="0" /></span>
											<span class="sheet-table-cell sheet-sect2 sheet-left-border"><input title="@{spellclass-0-level-4-spells-known}" type="number" name="attr_spellclass-0-level-4-spells-known" value="0" /></span>
											<span class="sheet-table-cell sheet-sect2"><input title="@{spellclass-0-level-4-total-listed}" type="number" name="attr_spellclass-0-level-4-total-listed" value="0" class="sheet-calc" readonly /></span>
											<span class="sheet-table-cell sheet-advanced-spell-option sheet-left-border"><input title="@{spellclass-0-level-4-user}" type="number" name="attr_spellclass-0-level-4-user" value="0" /></span>
										</div>
										<div class="sheet-table-row">
											<span class="sheet-table-cell"><input title="@{spellclass-0-level-5-savedc}" type="number" name="attr_spellclass-0-level-5-savedc" value="55" class="sheet-calc" readonly /></span>
											<span class="sheet-table-cell sheet-right-border" data-i18n="5-ordinal">5th</span>
											<span class="sheet-table-cell sheet-sect"><input title="@{spellclass-0-level-5-spells-per-day}" type="number" name="attr_spellclass-0-level-5-spells-per-day" value="0" /></span>
											<span class="sheet-table-cell sheet-sect3 sheet-sect-inverse"><input title="@{spellclass-0-level-5-spells-prepared}" type="number" name="attr_spellclass-0-level-5-spells-prepared" value="0" class="sheet-calc" readonly /></span>
											<span class="sheet-table-cell sheet-sect2 sheet-sect-inverse"><input title="@{spellclass-0-level-5-spells-per-day}" type="number" name="attr_spellclass-0-level-5-spells-per-day" value="0" class="sheet-calc" readonly /></span>
											<span class="sheet-divider">/</span>
											<span class="sheet-table-cell"><input title="@{spellclass-0-level-5-spells-per-day|max}" type="number" name="attr_spellclass-0-level-5-spells-per-day_max" value="0" class="sheet-calc" readonly /></span>
											<span class="sheet-divider">=</span>
											<span class="sheet-table-cell"><input title="@{spellclass-0-level-5-class}" type="text" name="attr_spellclass-0-level-5-class" value="" placeholder="-" class="sheet-number" /></span>
											<span class="sheet-divider">+</span>
											<span class="sheet-table-cell"><input title="@{spellclass-0-level-5-bonus}" type="number" name="attr_spellclass-0-level-5-bonus" value="0" class="sheet-calc" readonly /></span>
											<span class="sheet-dividerl sheet-advanced-spell-option">+</span>
											<span class="sheet-table-cell sheet-advanced-spell-option"><input title="@{spellclass-0-level-5-misc}" type="number" name="attr_spellclass-0-level-5-misc" value="0" /></span>
											<span class="sheet-table-cell sheet-sect2 sheet-left-border"><input title="@{spellclass-0-level-5-spells-known}" type="number" name="attr_spellclass-0-level-5-spells-known" value="0" /></span>
											<span class="sheet-table-cell sheet-sect2"><input title="@{spellclass-0-level-5-total-listed}" type="number" name="attr_spellclass-0-level-5-total-listed" value="0" class="sheet-calc" readonly /></span>
											<span class="sheet-table-cell sheet-advanced-spell-option sheet-left-border"><input title="@{spellclass-0-level-5-user}" type="number" name="attr_spellclass-0-level-5-user" value="0" /></span>
										</div>
										<div class="sheet-table-row">
											<span class="sheet-table-cell"><input title="@{spellclass-0-level-6-savedc}" type="number" name="attr_spellclass-0-level-6-savedc" value="66" class="sheet-calc" readonly /></span>
											<span class="sheet-table-cell sheet-right-border" data-i18n="6-ordinal">6th</span>
											<span class="sheet-table-cell sheet-sect"><input title="@{spellclass-0-level-6-spells-per-day}" type="number" name="attr_spellclass-0-level-6-spells-per-day" value="0" /></span>
											<span class="sheet-table-cell sheet-sect3 sheet-sect-inverse"><input title="@{spellclass-0-level-6-spells-prepared}" type="number" name="attr_spellclass-0-level-6-spells-prepared" value="0" class="sheet-calc" readonly /></span>
											<span class="sheet-table-cell sheet-sect2 sheet-sect-inverse"><input title="@{spellclass-0-level-6-spells-per-day}" type="number" name="attr_spellclass-0-level-6-spells-per-day" value="0" class="sheet-calc" readonly /></span>
											<span class="sheet-divider">/</span>
											<span class="sheet-table-cell"><input title="@{spellclass-0-level-6-spells-per-day|max}" type="number" name="attr_spellclass-0-level-6-spells-per-day_max" value="0" class="sheet-calc" readonly /></span>
											<span class="sheet-divider">=</span>
											<span class="sheet-table-cell"><input title="@{spellclass-0-level-6-class}" type="text" name="attr_spellclass-0-level-6-class" value="" placeholder="-" class="sheet-number" /></span>
											<span class="sheet-divider">+</span>
											<span class="sheet-table-cell"><input title="@{spellclass-0-level-6-bonus}" type="number" name="attr_spellclass-0-level-6-bonus" value="0" class="sheet-calc" readonly /></span>
											<span class="sheet-dividerl sheet-advanced-spell-option">+</span>
											<span class="sheet-table-cell sheet-advanced-spell-option"><input title="@{spellclass-0-level-6-misc}" type="number" name="attr_spellclass-0-level-6-misc" value="0" /></span>
											<span class="sheet-table-cell sheet-sect2 sheet-left-border"><input title="@{spellclass-0-level-6-spells-known}" type="number" name="attr_spellclass-0-level-6-spells-known" value="0" /></span>
											<span class="sheet-table-cell sheet-sect2"><input title="@{spellclass-0-level-6-total-listed}" type="number" name="attr_spellclass-0-level-6-total-listed" value="0" class="sheet-calc" readonly /></span>
											<span class="sheet-table-cell sheet-advanced-spell-option sheet-left-border"><input title="@{spellclass-0-level-6-user}" type="number" name="attr_spellclass-0-level-6-user" value="0" /></span>
										</div>
										<div class="sheet-table-row">
											<span class="sheet-table-cell"><input title="@{spellclass-0-level-7-savedc}" type="number" name="attr_spellclass-0-level-7-savedc" value="77" class="sheet-calc" readonly /></span>
											<span class="sheet-table-cell sheet-right-border" data-i18n="7-ordinal">7th</span>
											<span class="sheet-table-cell sheet-sect"><input title="@{spellclass-0-level-7-spells-per-day}" type="number" name="attr_spellclass-0-level-7-spells-per-day" value="0" /></span>
											<span class="sheet-table-cell sheet-sect3 sheet-sect-inverse"><input title="@{spellclass-0-level-7-spells-prepared}" type="number" name="attr_spellclass-0-level-7-spells-prepared" value="0" class="sheet-calc" readonly /></span>
											<span class="sheet-table-cell sheet-sect2 sheet-sect-inverse"><input title="@{spellclass-0-level-7-spells-per-day}" type="number" name="attr_spellclass-0-level-7-spells-per-day" value="0" class="sheet-calc" readonly /></span>
											<span class="sheet-divider">/</span>
											<span class="sheet-table-cell"><input title="@{spellclass-0-level-7-spells-per-day|max}" type="number" name="attr_spellclass-0-level-7-spells-per-day_max" value="0" class="sheet-calc" readonly /></span>
											<span class="sheet-divider">=</span>
											<span class="sheet-table-cell"><input title="@{spellclass-0-level-7-class}" type="text" name="attr_spellclass-0-level-7-class" value="" placeholder="-" class="sheet-number" /></span>
											<span class="sheet-divider">+</span>
											<span class="sheet-table-cell"><input title="@{spellclass-0-level-7-bonus}" type="number" name="attr_spellclass-0-level-7-bonus" value="0" class="sheet-calc" readonly /></span>
											<span class="sheet-dividerl sheet-advanced-spell-option">+</span>
											<span class="sheet-table-cell sheet-advanced-spell-option"><input title="@{spellclass-0-level-7-misc}" type="number" name="attr_spellclass-0-level-7-misc" value="0" /></span>
											<span class="sheet-table-cell sheet-sect2 sheet-left-border"><input title="@{spellclass-0-level-7-spells-known}" type="number" name="attr_spellclass-0-level-7-spells-known" value="0" /></span>
											<span class="sheet-table-cell sheet-sect2"><input title="@{spellclass-0-level-7-total-listed}" type="number" name="attr_spellclass-0-level-7-total-listed" value="0" class="sheet-calc" readonly /></span>
											<span class="sheet-table-cell sheet-advanced-spell-option sheet-left-border"><input title="@{spellclass-0-level-7-user}" type="number" name="attr_spellclass-0-level-7-user" value="0" /></span>
										</div>
										<div class="sheet-table-row">
											<span class="sheet-table-cell"><input title="@{spellclass-0-level-8-savedc}" type="number" name="attr_spellclass-0-level-8-savedc" value="88" class="sheet-calc" readonly /></span>
											<span class="sheet-table-cell sheet-right-border" data-i18n="8-ordinal">8th</span>
											<span class="sheet-table-cell sheet-sect"><input title="@{spellclass-0-level-8-spells-per-day}" type="number" name="attr_spellclass-0-level-8-spells-per-day" value="0" /></span>
											<span class="sheet-table-cell sheet-sect3 sheet-sect-inverse"><input title="@{spellclass-0-level-8-spells-prepared}" type="number" name="attr_spellclass-0-level-8-spells-prepared" value="0" class="sheet-calc" readonly /></span>
											<span class="sheet-table-cell sheet-sect2 sheet-sect-inverse"><input title="@{spellclass-0-level-8-spells-per-day}" type="number" name="attr_spellclass-0-level-8-spells-per-day" value="0" class="sheet-calc" readonly /></span>
											<span class="sheet-divider">/</span>
											<span class="sheet-table-cell"><input title="@{spellclass-0-level-8-spells-per-day|max}" type="number" name="attr_spellclass-0-level-8-spells-per-day_max" value="0" class="sheet-calc" readonly /></span>
											<span class="sheet-divider">=</span>
											<span class="sheet-table-cell"><input title="@{spellclass-0-level-8-class}" type="text" name="attr_spellclass-0-level-8-class" value="" placeholder="-" class="sheet-number" /></span>
											<span class="sheet-divider">+</span>
											<span class="sheet-table-cell"><input title="@{spellclass-0-level-8-bonus}" type="number" name="attr_spellclass-0-level-8-bonus" value="0" class="sheet-calc" readonly /></span>
											<span class="sheet-dividerl sheet-advanced-spell-option">+</span>
											<span class="sheet-table-cell sheet-advanced-spell-option"><input title="@{spellclass-0-level-8-misc}" type="number" name="attr_spellclass-0-level-8-misc" value="0" /></span>
											<span class="sheet-table-cell sheet-sect2 sheet-left-border"><input title="@{spellclass-0-level-8-spells-known}" type="number" name="attr_spellclass-0-level-8-spells-known" value="0" /></span>
											<span class="sheet-table-cell sheet-sect2"><input title="@{spellclass-0-level-8-total-listed}" type="number" name="attr_spellclass-0-level-8-total-listed" value="0" class="sheet-calc" readonly /></span>
											<span class="sheet-table-cell sheet-advanced-spell-option sheet-left-border"><input title="@{spellclass-0-level-8-user}" type="number" name="attr_spellclass-0-level-8-user" value="0" /></span>
										</div>
										<div class="sheet-table-row">
											<span class="sheet-table-cell"><input title="@{spellclass-0-level-9-savedc}" type="number" name="attr_spellclass-0-level-9-savedc" value="99" class="sheet-calc" readonly /></span>
											<span class="sheet-table-cell sheet-right-border" data-i18n="9-ordinal">9th</span>
											<span class="sheet-table-cell sheet-sect"><input title="@{spellclass-0-level-9-spells-per-day}" type="number" name="attr_spellclass-0-level-9-spells-per-day" value="0" /></span>
											<span class="sheet-table-cell sheet-sect3 sheet-sect-inverse"><input title="@{spellclass-0-level-9-spells-prepared}" type="number" name="attr_spellclass-0-level-9-spells-prepared" value="0" class="sheet-calc" readonly /></span>
											<span class="sheet-table-cell sheet-sect2 sheet-sect-inverse"><input title="@{spellclass-0-level-9-spells-per-day}" type="number" name="attr_spellclass-0-level-9-spells-per-day" value="0" class="sheet-calc" readonly /></span>
											<span class="sheet-divider">/</span>
											<span class="sheet-table-cell"><input title="@{spellclass-0-level-9-spells-per-day|max}" type="number" name="attr_spellclass-0-level-9-spells-per-day_max" value="0" class="sheet-calc" readonly /></span>
											<span class="sheet-divider">=</span>
											<span class="sheet-table-cell"><input title="@{spellclass-0-level-9-class}" type="text" name="attr_spellclass-0-level-9-class" value="" placeholder="-" class="sheet-number" /></span>
											<span class="sheet-divider">+</span>
											<span class="sheet-table-cell"><input title="@{spellclass-0-level-9-bonus}" type="number" name="attr_spellclass-0-level-9-bonus" value="0" class="sheet-calc" readonly /></span>
											<span class="sheet-dividerl sheet-advanced-spell-option">+</span>
											<span class="sheet-table-cell sheet-advanced-spell-option"><input title="@{spellclass-0-level-9-misc}" type="number" name="attr_spellclass-0-level-9-misc" value="0" /></span>
											<span class="sheet-table-cell sheet-sect2 sheet-left-border"><input title="@{spellclass-0-level-9-spells-known}" type="number" name="attr_spellclass-0-level-9-spells-known" value="0" /></span>
											<span class="sheet-table-cell sheet-sect2"><input title="@{spellclass-0-level-9-total-listed}" type="number" name="attr_spellclass-0-level-9-total-listed" value="0" class="sheet-calc" readonly /></span>
											<span class="sheet-table-cell sheet-advanced-spell-option sheet-left-border"><input title="@{spellclass-0-level-9-user}" type="number" name="attr_spellclass-0-level-9-user" value="0" /></span>
										</div>
									</div>
								</div>
							</div>
						</div>
						<div class="sheet-cheat"></div>
						<input class="sheet-showarrow sheet-h3arrow" type="checkbox" name="attr_spellclass-0-domains-show" data-i18n-aria-label="domains" title="Click to expand" data-i18n-title="showsect-cmd" value="1" checked />
						<h3 class="sheet-clickheader sheet-showsect"><label title="Click to expand" data-i18n-title="showsect-cmd" data-i18n-aria-label="showsect-cmd" data-i18n="domains">Domains</label></h3>
						<div class="sheet-h3-section sheet-domains sheet-wide-readonly">
							<div class="sheet-table sheet-hasexpandrows">
								<span class="sheet-table-name sheet-secondary-table-name sheet-show-readonly" data-i18n="known-or-special">Known / Specialties</span>
								<div class="sheet-table-row">
									<span class="sheet-table-header" data-i18n="name">Name</span>
									<span class="sheet-table-header" data-i18n="type">Type</span>
									<span class="sheet-table-header" data-i18n="bonus">Bonus</span>
									<span class="sheet-table-header" data-i18n="opposition">Opposition</span>
									<span class="sheet-table-header" data-i18n="effect">Effect</span>
								</div>
								<div class="sheet-table-row">
									<span class="sheet-table-cell"><input title="@{spellclass-0-domain-0}" type="text" name="attr_spellclass-0-domain-0" value="" placeholder="Name" data-i18n-placeholder="name" /></span>
									<span class="sheet-table-cell"><input title="@{spellclass-0-domaintype-0}" type="text" name="attr_spellclass-0-domaintype-0" value="" placeholder="(Sub)Domain/School/Bloodline/Patron" data-i18n-placeholder="domain-etc-type-example" /></span>
									<span class="sheet-table-cell"><input title="@{spellclass-0-domainbonus-0}" type="text" name="attr_spellclass-0-domainbonus-0" value="" placeholder="Bonus" data-i18n-placeholder="bonus" /></span>
									<span class="sheet-table-cell"><input title="@{spellclass-0-oppositionschool-0}" type="text" name="attr_spellclass-0-oppositionschool-0" value="" placeholder="Name" data-i18n-placeholder="name" /></span>
									<span class="sheet-table-cell"><input title="@{spellclass-0-oppositioneffect-0}" type="text" name="attr_spellclass-0-oppositioneffect-0" value="" placeholder="Cost double or prohibited" data-i18n-placeholder="opposition-school-example" /></span>
								</div>
								<input type="checkbox" class="sheet-showarrow sheet-sect-show sheet-expand-arrow sheet-expand1" name="attr_domain02_show" value="1" title="Show more domains/schools" aria-label="Show more domains/schools" /><span class="sheet-showsect"></span>
								<div class="sheet-table-row sheet-sect">
									<span class="sheet-table-cell"><input title="@{spellclass-0-domain-1}" type="text" name="attr_spellclass-0-domain-1" value="" placeholder="Name" data-i18n-placeholder="name" /></span>
									<span class="sheet-table-cell"><input title="@{spellclass-0-domaintype-1}" type="text" name="attr_spellclass-0-domaintype-1" value="" placeholder="(Sub)Domain/School/Bloodline/Patron" data-i18n-placeholder="domain-etc-type-example" /></span>
									<span class="sheet-table-cell"><input title="@{spellclass-0-domainbonus-1}" type="text" name="attr_spellclass-0-domainbonus-1" value="" placeholder="Bonus" data-i18n-placeholder="bonus" /></span>
									<span class="sheet-table-cell"><input title="@{spellclass-0-oppositionschool-1}" type="text" name="attr_spellclass-0-oppositionschool-1" value="" placeholder="Name" data-i18n-placeholder="name" /></span>
									<span class="sheet-table-cell"><input title="@{spellclass-0-oppositioneffect-1}" type="text" name="attr_spellclass-0-oppositioneffect-1" value="" placeholder="Cost double or prohibited" data-i18n-placeholder="opposition-school-example" /></span>
								</div>
								<input type="checkbox" class="sheet-showarrow sheet-sect2-show sheet-sect sheet-expand-arrow sheet-expand2" name="attr_domain03_show" value="1" title="Show more domains/schools" aria-label="Show more domains/schools" /><span class="sheet-showsect sheet-sect"></span>
								<div class="sheet-table-row sheet-sect sheet-sect2">
									<span class="sheet-table-cell"><input title="@{spellclass-0-domain-2}" type="text" name="attr_spellclass-0-domain-2" value="" placeholder="Name" data-i18n-placeholder="name" /></span>
									<span class="sheet-table-cell"><input title="@{spellclass-0-domaintype-2}" type="text" name="attr_spellclass-0-domaintype-2" value="" placeholder="(Sub)Domain/School/Bloodline/Patron" data-i18n-placeholder="domain-etc-type-example" /></span>
									<span class="sheet-table-cell"><input title="@{spellclass-0-domainbonus-2}" type="text" name="attr_spellclass-0-domainbonus-2" value="" placeholder="Bonus" data-i18n-placeholder="bonus" /></span>
									<span class="sheet-table-cell"><input title="@{spellclass-0-oppositionschool-2}" type="text" name="attr_spellclass-0-oppositionschool-2" value="" placeholder="Name" data-i18n-placeholder="name" /></span>
									<span class="sheet-table-cell"><input title="@{spellclass-0-oppositioneffect-2}" type="text" name="attr_spellclass-0-oppositioneffect-2" value="" placeholder="Cost double or prohibited" data-i18n-placeholder="opposition-school-example" /></span>
								</div>
							</div>
						</div>
					</div>
					<!-- Spell Class 1 -->
					<h2 class="sheet-section1 sheet-nontable-name sheet-spell-multiclassed"><span name="attr_spellclass-1-name"></span></h2>
					<div class="sheet-section1 sheet-section-spellclass sheet-spellclass-1 sheet-spell-multiclassed">
						<div class="sheet-col sheet-col1">
							<input class="sheet-showarrow sheet-h3arrow" type="checkbox" name="attr_spellclass-1-show" data-i18n-aria-label="spellclass-level-base" title="Click to expand" data-i18n-title="showsect-cmd" value="1" checked />
							<h3 class="sheet-clickheader sheet-showsect"><label title="Click to expand" data-i18n-title="showsect-cmd" data-i18n-aria-label="showsect-cmd" data-i18n="level-and-ability">Level and Caster Ability</label></h3>
							<div class="sheet-cheat"></div>
							<div class="sheet-h3-section sheet-table sheet-spellclass-level sheet-narrow-numbers">
								<span class="sheet-table-name" data-i18n="caster-class-level">Caster Class and Level</span>
								<div class="sheet-table-group-head">
									<div class="sheet-table-row">
										<span class="sheet-table-header" data-i18n="check">Check</span>
										<span class="sheet-table-header" data-i18n-title="effective-caster-level" data-i18n-aria-label="effective-caster-level" data-i18n="caster-level">Caster Level</span>
										<span class="sheet-table-header sheet-divider"></span>
										<span class="sheet-table-header sheet-hide-readonly" data-i18n-title="class-number-explanation" data-i18n-aria-label="class-number-explanation" data-i18n="synchronize-class">Sync Class</span>
										<span class="sheet-table-header sheet-entry-long" style="min-width:10em;" data-i18n="class-name">Class Name</span>
										<span class="sheet-table-header sheet-hide-readonly" data-i18n="base-level">Base Level</span>
										<span class="sheet-divider sheet-table-header sheet-advanced-spell-option"></span>
										<span class="sheet-table-header sheet-advanced-spell-option" data-i18n="miscellaneous-abbrv">Misc</span>
										<span class="sheet-divider sheet-table-header sheet-hide-readonly"></span>
										<span class="sheet-table-header" data-i18n="buff">Buff</span>
										<span class="sheet-divider sheet-table-header sheet-hide-readonly"></span>
										<span class="sheet-table-header" data-i18n-title="condition-description" data-i18n-aria-label="condition-description" data-i18n="condition-abbrv">Cond</span>
								</div>
								</div>
								<div class="sheet-table-group">
									<div class="sheet-table-row">
										<span class="sheet-table-cell sheet-spellcaster-button">
											<button class="sheet-spellcaster-button" title="%{selected|Spell-Class-1-CL-Check}" type="roll" name="roll_Spell-Class-1-CL-Check" value="@{PC-whisper} &{template:pf_generic} @{toggle_spell_accessible} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_generic}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle}} {{name=^{caster-level-check}}} {{class=**@{spellclass-1-name} @{spellclass-1-level}**}} {{check=[[ 1d20 + [[ @{spellclass-1-level-total} ]] ]]}} {{^{spell-penetration-bonus-abbrv}=@{spellclass-1-SP-mod}}} {{lefttext_6=@{CasterLevel-1-note}}}">&nbsp;<span style="vertical-align: middle;" data-i18n="caster-level-check">Casterlevel Check</span>&nbsp;
											</button>
										</span>
										<span class="sheet-table-cell sheet-left sheet-number"><input title="@{spellclass-1-level-total}" type="number" name="attr_spellclass-1-level-total" value="0" class="sheet-calc" readonly /></span>
										<span class="sheet-divider sheet-hide-readonly">=</span>
										<span class="sheet-table-cell sheet-entry-vshort sheet-hide-readonly">
											<select title="@{spellclass-1} Choose or enter manually" name="attr_spellclass-1" class="sheet-select-small spellclass-1">
												<option value="-1" data-i18n="select-class-or-manual-default" selected>&#8226;Select Class or enter other manually</option>
												<option value="0" data-i18n="1-ordinal-class" >1st Class</option>
												<option value="1" data-i18n="2-ordinal-class" >2nd Class</option>
												<option value="2" data-i18n="3-ordinal-class" >3rd Class</option>
												<option value="3" data-i18n="4-ordinal-class" >4th Class</option>
												<option value="4" data-i18n="5-ordinal-class" >5th Class</option>
												<option value="5" data-i18n="6-ordinal-class" >6th Class</option>
												<option value="6" data-i18n="race-hd">Race (use HD for level)</option>
											</select>
										</span>
										<span class="sheet-table-cell sheet-entry_long">
											<input class="sheet-calc-advanced-spell-option" title="@{spellclass-1-name}" type="text" name="attr_spellclass-1-name" placeholder="Class Name" data-i18n-placeholder="class-name">
										</span>
										<span class="sheet-table-cell sheet-hide-readonly sheet-number sheet-left"><input title="@{spellclass-1-level}" type="number" name="attr_spellclass-1-level" value="0" /></span>
										<span class="sheet-divider sheet-advanced-spell-option">+</span>
										<span class="sheet-table-cell sheet-advanced-spell-option sheet-number"><input title="@{spellclass-1-level-misc}" type="number" name="attr_spellclass-1-level-misc" value="0" /></span>
										<span class="sheet-divider">+</span>
										<span class="sheet-table-cell sheet-number"><input title="@{buff_CasterLevel-total}" name="attr_buff_CasterLevel-total" type="number" value="0" class="sheet-calc" readonly /></span>
										<span class="sheet-divider">+</span>
										<span class="sheet-table-cell sheet-number"><input title="@{CasterLevel-Penalty}" name="attr_CasterLevel-Penalty" type="number" value="0" class="sheet-calc" readonly /></span>
									</div>
								</div>
							</div>
							<div class="sheet-h3-section sheet-spellclass-ranges" role="presentation" >
								<div class="sheet-table sheet-show-readonly sheet-inverse-readonly">
									<div class="sheet-table-row">
										<span class="sheet-table-row-name sheet-spellrange-header" data-i18n="close">Close</span>
										<span class="sheet-table-cell"><input class="sheet-spellrange-data sheet-calc sheet-entry-wide" title="@{spellclass-1-close} 25 + 5/2 levels" type="number" name="attr_spellclass-1-close" value="0" readonly /></span>
										<span class="sheet-table-row-name sheet-spellrange-header" data-i18n="medium">Medium</span>
										<span class="sheet-table-cell"><input class="sheet-spellrange-data sheet-calc sheet-entry-wide" title="@{spellclass-1-medium} 100 + 10/level" type="number" name="attr_spellclass-1-medium" value="0" readonly /></span>
										<span class="sheet-table-row-name sheet-spellrange-header" data-i18n="long">Long</span>
										<span class="sheet-table-cell"><input class="sheet-spellrange-data sheet-calc sheet-entry-wide" title="@{spellclass-1-long} 400 + 40/level" type="number" name="attr_spellclass-1-long" value="0" readonly /></span>
									</div>
								</div>
								<div class="sheet-table sheet-hide-readonly" role="presentation">
									<span class="sheet-table-name" data-i18n="spells-ranges">Spell Ranges</span>
									<div class="sheet-table-group-head">
										<span class="sheet-table-header" data-i18n="close">Close</span>
										<span class="sheet-table-header" data-i18n="medium">Medium</span>
										<span class="sheet-table-header" data-i18n="long">Long</span>
									</div>
									<div class="sheet-table-row">
										<span class="sheet-table-cell"><input class="sheet-spellrange-data sheet-calc sheet-entry-wide" title="@{spellclass-1-close} 25 + 5/2 levels" type="number" name="attr_spellclass-1-close" value="0" readonly /></span>
										<span class="sheet-table-cell"><input class="sheet-spellrange-data sheet-calc sheet-entry-wide" title="@{spellclass-1-medium} 100 + 10/level" type="number" name="attr_spellclass-1-medium" value="0" readonly /></span>
										<span class="sheet-table-cell"><input class="sheet-spellrange-data sheet-calc sheet-entry-wide" title="@{spellclass-1-long} 400 + 40/level" type="number" name="attr_spellclass-1-long" value="0" readonly /></span>
									</div>
								</div>
							</div>
							<div class="sheet-h3-section sheet-table sheet-spellclass-concentration" >
								<span class="sheet-table-name" data-i18n="spellcasting-ability">Spellcasting Ability</span>
								<div class="sheet-table-group-head">
									<span class="sheet-table-header" data-i18n="check">Check</span>
									<span class="sheet-table-header" data-i18n="total">Total</span>
									<span class="sheet-divider sheet-table-header"></span>
									<span class="sheet-table-header sheet-ability-column" style="width:6em;" data-i18n="ability">Ability</span>
									<span class="sheet-table-header" data-i18n="modifier-abbrv">Mod</span>
									<span class="sheet-divider sheet-table-header"></span>
									<span class="sheet-table-header sheet-hide-readonly" data-i18n-title="effective-caster-level" data-i18n-aria-label="effective-caster-level" data-i18n="caster-level">Caster Level</span>
									<span class="sheet-divider sheet-table-header sheet-advanced-spell-option"></span>
									<span class="sheet-table-header sheet-advanced-spell-option" data-i18n="miscellaneous-abbrv">Misc</span>
									<span class="sheet-table-header sheet-table-rightcell"aria-label="empty spacer cell" role="presentation"></span>
								</div>
								<div class="sheet-table-row">
									<span class="sheet-table-cell sheet-spellcaster-button"><button class="sheet-spellcaster-button" title="%{selected|Concentration-Check-1}" type="roll" name="roll_Concentration-Check-1" value="@{PC-whisper} &{template:pf_generic} @{toggle_spell_accessible} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_generic}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle}} {{name=^{concentration-check}}} {{class=**@{spellclass-1-name} @{spellclass-1-level}**}} {{check=[[ 1d20 + [[ @{Concentration-1} ]] ]]}} {{^{defensive-casting-bonus-abbrv}=@{Concentration-1-def}}} {{lefttext_6=@{Concentration-1-miscnote}}}">&nbsp;<span style="vertical-align: middle;" data-i18n="concentration-check">Concentration</span>&nbsp;</button></span>
									<span class="sheet-table-cell sheet-left sheet-number"><input title="@{Concentration-1}" type="number" name="attr_Concentration-1" value="0" class="sheet-calc" readonly /></span>
									<span class="sheet-divider">=</span>
									<span class="sheet-table-cell sheet-ability-column" >
										<select class="sheet-select-small" title="@{Concentration-1-ability}" name="attr_Concentration-1-ability">
											<option value="0" data-i18n="select-one-default" selected>&#8226;Select One</option>
											<option value="@{STR-mod}" data-i18n="strength-abbrv">STR</option>
											<option value="@{DEX-mod}" data-i18n="dexterity-abbrv">DEX</option>
											<option value="@{CON-mod}" data-i18n="constitution-abbrv">CON</option>
											<option value="@{INT-mod}" data-i18n="intelligence-abbrv">INT</option>
											<option value="@{WIS-mod}" data-i18n="wisdom-abbrv">WIS</option>
											<option value="@{CHA-mod}" data-i18n="charisma-abbrv">CHA</option>
										</select>
									</span>
									<span class="sheet-table-cell sheet-number sheet-left"><input title="@{Concentration-1-mod}" type="number" name="attr_Concentration-1-mod" value="0" class="sheet-calc" readonly /></span>
									<span class="sheet-divider">+</span>
									<span class="sheet-table-cell sheet-number sheet-hide-readonly"><input title="@{spellclass-1-level-total}" type="number" name="attr_spellclass-1-level-total" value="0" class="sheet-calc" readonly /></span>
									<span class="sheet-divider sheet-advanced-spell-option">+</span>
									<span class="sheet-table-cell sheet-advanced-spell-option sheet-number"><input title="@{Concentration-1-misc}" type="number" name="attr_Concentration-1-misc" value="0" /></span>
									<span class="sheet-table-cell"></span>
								</div>
							</div>
							<div class="sheet-h3-section sheet-table sheet-spellclass-roll-adj">
								<span class="sheet-table-name">Roll adjustments</span>
								<div class="sheet-table-row">
									<span class="sheet-table-header sheet-nowrap sheet-entry-30p-shrink sheet-super sheet-note-a" style="min-width:9em;" data-i18n-aria-label="spell-penetration-bonus-label"  data-i18n="spell-penetration-bonus-abbrv">Spell Pen Bonus</span>
									<span class="sheet-table-header"></span>
									<span class="sheet-table-header sheet-nowrap-readonly" title="Concentration Bonus when casting defensively" data-i18n-title="cast-defensive-bonus" data-i18n-aria-label="cast-defensive-bonus" style="word-wrap:normal;" data-i18n="cast-defensive-bonus-abbrv">Cast Def. Bonus</span>
									<span class="sheet-table-header sheet-table-rightcell sheet-show-readonly sheet-inverse-readonly"aria-label="empty spacer cell" role="presentation"></span>
								</div>
								<div class="sheet-table-row">
									<input type="checkbox" name="attr_spellclass-1-SP-mod_error" class="sheet-error-mshow" value="1" />
									<span class="sheet-table-cell sheet-highlight" ><textarea class="sheet-inline-textarea" title="@{spellclass-1-SP_misc}" name="attr_spellclass-1-SP_misc" data-i18n-placeholder="equation-macro-place"></textarea></span>
									<span class="sheet-table-cell sheet-number sheet-highlight"><input type="number" title="@{spellclass-1-SP-mod}" name="attr_spellclass-1-SP-mod" value="0" class="sheet-calc" readonly></span>
									<span class="sheet-table-cell sheet-nowrap-readonly"><input title="@{Concentration-1-def}" type="number" name="attr_Concentration-1-def" value="0" /></span>
									<span class="sheet-table-cell sheet-show-readonly sheet-inverse-readonly"></span>
								</div>
							</div>
							<div class="sheet-cheat"></div>
							<input class="sheet-showarrow sheet-h3arrow sheet-spellpoints-sect" type="checkbox" name="attr_spellclass-1-spellpoints-show" data-i18n-aria-label="spellspoints" title="Click to expand" data-i18n-title="showsect-cmd" value="1" />
							<h3 class="sheet-clickheader sheet-showsect sheet-spellpoints-sect"><label title="Click to expand" data-i18n-title="showsect-cmd" data-i18n-aria-label="showsect-cmd"  data-i18n="spell-points">Spell Points</label></h3>
							<div class="sheet-h3-section sheet-spellpoints sheet-table sheet-spellpoints-sect">
								<div class="sheet-table-group">
									<div class="sheet-table-row">
										<span class="sheet-table-header" data-i18n="spell-points">Spell Points</span>
										<span class="sheet-table-header sheet-divider"></span>
										<span class="sheet-table-header" data-i18n="points-per-day">Points/Day</span>
										<span class="sheet-table-header sheet-divider"></span>
										<span class="sheet-table-header" data-i18n="base-points-per-day">Base points per day</span>
										<span class="sheet-table-header" data-i18n="bonus-points">Ability Bonus</span>
										<span class="sheet-table-header" data-i18n="miscellaneous-abbrv">misc</span>
									</div>
								</div>
								<div class="sheet-table-group">
									<div class="sheet-table-row">
										<span class="sheet-table-cell"><input title="@{spellclass-1-spell-points-per-day}" type="number" name="attr_spellclass-1-spell-points-per-day" value="0" /></span>
										<span class="sheet-divider">/</span>
										<span class="sheet-table-cell"><input title="@{spellclass-1-spell-points-per-day|max}" type="text" class="sheet-number" name="attr_spellclass-1-spell-points-per-day_max" value="(@{spellclass-1-spell-points-class} + [[ @{spellclass-1-spell-points-bonus} ]] + [[ @{spellclass-1-spell-points-misc} ]])" disabled /></span>
										<span class="sheet-divider">=</span>
										<span class="sheet-table-cell"><input title="@{spellclass-1-spell-points-class}" type="number" name="attr_spellclass-1-spell-points-class" value="0" /></span>
										<span class="sheet-table-cell"><input title="@{spellclass-1-spell-points-bonus}" type="number" name="attr_spellclass-1-spell-points-bonus" value="0" /></span>
										<span class="sheet-table-cell"><input title="@{spellclass-1-spell-points-misc}" type="number" name="attr_spellclass-1-spell-points-misc" value="0" /></span>
									</div>
								</div>
							</div>
							<div class="sheet-cheat"></div>
							<input class="sheet-showarrow sheet-h3arrow" type="checkbox" name="attr_spellclass-1-spells-notes-show" data-i18n-aria-label="spells-notes" title="Click to expand" data-i18n-title="showsect-cmd" value="1" />
							<h3 class="sheet-clickheader sheet-showsect"><label title="Click to expand" data-i18n-title="showsect-cmd" data-i18n-aria-label="showsect-cmd" data-i18n="spells-notes">Spells Notes</label></h3>
							<div class="sheet-h3-section sheet-table sheet-spellclass-spellnotes">
								<span class="sheet-table-name" data-i18n="notes">Notes</span>
								<div class="sheet-table-group-head">
									<span class="sheet-table-header" data-i18n="spells-notes" data-i18n-title="spells-notes" data-i18n-aria-label="spells-notes" >Spells Notes</span>					
									<span class="sheet-table-header" data-i18n="caster-level" data-i18n-title="caster-level-check-notes" data-i18n-aria-label="caster-level-check-notes" >Caster Level</span>						
									<span class="sheet-table-header" data-i18n="concentration" data-i18n-title="concentration-check-notes" data-i18n-aria-label="concentration-check-notes" >Concentration</span>						
								</div>
								<div class="sheet-table-row">
									<div class="sheet-table-cell sheet-notes-cell">
										<textarea class="sheet-half" title="@{spell-class-1-spells-notes}" name="attr_spell-class-1-spells-notes" placeholder="Spells notes" data-i18n-placeholder="spells-notes" data-i18n-aria-label="spells-notes"></textarea>
									</div>
									<div class="sheet-table-cell sheet-notes-cell">
										<textarea class="sheet-half" title="@{CasterLevel-1-note}" name="attr_CasterLevel-1-note"  placeholder="notes" data-i18n-placeholder="caster-level-check-notes" data-i18n-aria-label="caster-level-check-notes"></textarea>
									</div>
									<div class="sheet-table-cell sheet-notes-cell">
										<textarea class="sheet-half" title="@{Concentration-1-miscnote}" name="attr_Concentration-1-miscnote" placeholder="notes" data-i18n-placeholder="concentration-check-notes" data-i18n-aria-label="concentration-check-notes"></textarea>
									</div>
								</div>
							</div>
						</div>
						<div class="sheet-col sheet-col2">
							<div class="sheet-cheat"></div>
							<input class="sheet-showarrow sheet-h3arrow" type="checkbox" name="attr_spellclass-1-perday-show" data-i18n-aria-label="spells-per-day" title="Click to expand" data-i18n-title="showsect-cmd" value="1" checked />
							<h3 class="sheet-clickheader sheet-showsect"><label title="Click to expand" data-i18n-title="showsect-cmd" data-i18n-aria-label="showsect-cmd" data-i18n="spells-per-day">Spells Per Day</label></h3>
							<div class="sheet-h3-section sheet-spells-per-day">
								<div style="display:inline;margin-left:.5em;margin-right:.5em;" role="radiogroup" >
									<span data-i18n="casting-type" data-i18n-title="future-use" data-i18n-aria-label="future-use">Casting Type:</span>
									<label><input class="sheet-boldlabel-check" type="radio" name="attr_spellclass-1-casting_type" value="1" title="@{spellclass-1-casting_type}" /><b><span data-i18n-title="display-spells-known" data-i18n-aria-label="display-spells-known" data-i18n="spontaneous"> Spontaneous</span></b></label>
									<label><input class="sheet-boldlabel-check" type="radio" name="attr_spellclass-1-casting_type" value="2" title="@{spellclass-1-casting_type}" checked /><b><span data-i18n="prepared"> Prepared</span></b></label>
								</div>
								<input type="checkbox" value="1" class="sheet-subsect2-show sheet-sect2-show sheet-noshow" name="attr_spellclass-1-casting_type" role="presentation" aria-label="spontaneous" />
								<input type="checkbox" value="2" class="sheet-subsect3-show sheet-sect3-show sheet-noshow" name="attr_spellclass-1-casting_type" role="presentation" aria-label="prepared" />
								<label style="margin-left:.5em;" class="sheet-sect3"><input class="sheet-selectedlabel-check" type="checkbox" name="attr_spellclass-1-hide_unprepared" value="1" title="@{spellclass-1-hide_unprepared}" /><b data-i18n-title="prepared-spells-explanation" data-i18n-aria-label="prepared-spells-explanation" data-i18n="spellbook-only-prepared-spells"> Show only prepared spells in spellbook menu</b></label>
								<label style="margin-left:.5em;" class="sheet-sect3"><input class="sheet-selectedlabel-check" type="checkbox" name="attr_spellclass-1-show_domain_spells" value="1" title="@{spellclass-1-show_domain_spells}" /><b data-i18n-title="domain-spells-explanation" data-i18n-aria-label="domain-spells-explanation" data-i18n="always-show-domain-spells"> Always show spells marked 'domain' in spellbook menu</b></label>
								<label style="margin-left:.5em;"><input class="sheet-selectedlabel-check" type="checkbox" name="attr_total_spells_manually" value="1" title="@{total_spells_manually}" /><b data-i18n-title="add-custom-column" data-i18n-aria-label="total-spells-manually" data-i18n="total-spells-manually">Total Spells Manually</b></label>
								<input type="checkbox" value="1" class="sheet-noshow sheet-subsect-show sheet-subsect-show-inverse" name="attr_total_spells_manually" role="presentation" />
								<div class="sheet-table">
									<span class="sheet-table-name" data-i18n="spells-per-day">Spells Per Day</span>
									<div class="sheet-table-group-head">
										<div class="sheet-table-row">
											<span class="sheet-table-header" data-i18n="save-difficulty-class">Save DC</span>
											<span class="sheet-table-header sheet-right-border" data-i18n="level-abbrv">Lvl</span>
											<span class="sheet-table-header sheet-sect">#</span>											
											<span class="sheet-table-header sheet-sect3 sheet-sect-inverse" data-i18n-title="sum-prepared-from-spells" data-i18n-aria-label="sum-prepared-from-spells" data-i18n="number-prepared-abbrv"># Prep'd</span>
											<span class="sheet-table-header sheet-sect2 sheet-sect-inverse" data-i18n-title="sum-uses-spells" data-i18n-aria-label="sum-uses-spells" data-i18n="number-used"># Used</span>
											<span class="sheet-table-header sheet-divider"></span>
											<span class="sheet-table-header" data-i18n="spells-per-day">Spells/Day</span>
											<span class="sheet-table-header sheet-divider"></span>
											<span class="sheet-table-header" data-i18n="base-spells-per-day">Base Spells/Day</span>
											<span class="sheet-table-header sheet-divider"></span>
											<span class="sheet-table-header" data-i18n="bonus-spells">Bonus Spells</span>
											<span class="sheet-table-header sheet-divider sheet-advanced-spell-option"></span>
											<span class="sheet-table-header sheet-advanced-spell-option sheet-entry-med sheet-entry-custom-header"><input class="sheet-entry-custom-header sheet-entry-med" name="attr_spellclass-1-user_defined_column" title="@{spellclass-1-user_defined_column}" type="text" value="" data-i18n-placeholder="user-defined" placeholder="User Defined" /></span>
											<span class="sheet-table-header sheet-sect2 sheet-left-border" data-i18n="spells-known">Spells Known</span>
											<span class="sheet-table-header sheet-sect2" data-i18n="total-listed">Total spells in list</span>
											<span class="sheet-table-header sheet-advanced-spell-option sheet-entry-med sheet-entry-custom-header sheet-left-border"><input class="sheet-entry-custom-header sheet-entry-med" name="attr_spellclass-1-user_defined_column2" title="@{spellclass-1-user_defined_column2}" type="text" value="" data-i18n-placeholder="user-defined" placeholder="User Defined" /></span>											
										</div>
									</div>
									<div class="sheet-table-group">
										<div class="sheet-table-row">
											<span class="sheet-table-cell"><input title="@{spellclass-1-level-0-savedc}" type="number" name="attr_spellclass-1-level-0-savedc" value="10" class="sheet-calc" readonly /></span>
											<span class="sheet-table-cell sheet-right-border">0</span>
											<span class="sheet-table-cell sheet-sect"><input title="@{spellclass-1-level-0-spells-per-day}" type="number" name="attr_spellclass-1-level-0-spells-per-day" value="0" /></span>
											<span class="sheet-table-cell sheet-sect3 sheet-sect-inverse"><input title="@{spellclass-1-level-0-spells-prepared}" type="number" name="attr_spellclass-1-level-0-spells-prepared" value="0" class="sheet-calc" readonly /></span>
											<span class="sheet-table-cell sheet-sect2 sheet-sect-inverse"><input title="@{spellclass-1-level-0-spells-per-day}" type="number" name="attr_spellclass-1-level-0-spells-per-day" value="0" class="sheet-calc" readonly /></span>
											<span class="sheet-divider">/</span>
											<span class="sheet-table-cell"><input title="@{spellclass-1-level-0-spells-per-day|max}" type="number" name="attr_spellclass-1-level-0-spells-per-day_max" value="0" class="sheet-calc" readonly /></span>
											<span class="sheet-divider">=</span>
											<span class="sheet-table-cell"><input title="@{spellclass-1-level-0-class}" type="text" name="attr_spellclass-1-level-0-class" value="" placeholder="-" class="sheet-number" /></span>
											<span class="sheet-divider">+</span>
											<span class="sheet-table-cell sheet-ability-column">
												<select class="sheet-select-small" title="@{Concentration-1-ability}" name="attr_Concentration-1-ability" >
													<option value="0" data-i18n="select-one-default" selected>&#8226;Select One</option>
													<option value="@{STR-mod}" data-i18n="strength-abbrv">STR</option>
													<option value="@{DEX-mod}" data-i18n="dexterity-abbrv">DEX</option>
													<option value="@{CON-mod}" data-i18n="constitution-abbrv">CON</option>
													<option value="@{INT-mod}" data-i18n="intelligence-abbrv">INT</option>
													<option value="@{WIS-mod}" data-i18n="wisdom-abbrv">WIS</option>
													<option value="@{CHA-mod}" data-i18n="charisma-abbrv">CHA</option>
												</select>
											</span>
											<span class="sheet-divider sheet-advanced-spell-option">+</span>
											<span class="sheet-table-cell sheet-advanced-spell-option"><input title="@{spellclass-1-level-0-misc}" type="number" name="attr_spellclass-1-level-0-misc" value="0" /></span>
											<span class="sheet-table-cell sheet-sect2 sheet-left-border"><input title="@{spellclass-1-level-0-spells-known}" type="number" name="attr_spellclass-1-level-0-spells-known" value="0" /></span>
											<span class="sheet-table-cell sheet-sect2"><input title="@{spellclass-1-level-0-total-listed}" type="number" name="attr_spellclass-1-level-0-total-listed" value="0" class="sheet-calc" readonly /></span>
											<span class="sheet-table-cell sheet-advanced-spell-option sheet-left-border"><input title="@{spellclass-1-level-0-user}" type="number" name="attr_spellclass-1-level-0-user" value="0" /></span>
										</div>
										<div class="sheet-table-row">
											<span class="sheet-table-cell"><input title="@{spellclass-1-level-1-savedc}" type="number" name="attr_spellclass-1-level-1-savedc" value="11" class="sheet-calc" readonly /></span>
											<span class="sheet-table-cell sheet-right-border" data-i18n="1-ordinal" >1st</span>
											<span class="sheet-table-cell sheet-sect"><input title="@{spellclass-1-level-1-spells-per-day}" type="number" name="attr_spellclass-1-level-1-spells-per-day" value="0" /></span>
											<span class="sheet-table-cell sheet-sect3 sheet-sect-inverse"><input title="@{spellclass-1-level-1-spells-prepared}" type="number" name="attr_spellclass-1-level-1-spells-prepared" value="0" class="sheet-calc" readonly /></span>
											<span class="sheet-table-cell sheet-sect2 sheet-sect-inverse"><input title="@{spellclass-1-level-1-spells-per-day}" type="number" name="attr_spellclass-1-level-1-spells-per-day" value="0" class="sheet-calc" readonly /></span>
											<span class="sheet-divider">/</span>
											<span class="sheet-table-cell"><input title="@{spellclass-1-level-1-spells-per-day|max}" type="number" name="attr_spellclass-1-level-1-spells-per-day_max" value="0" class="sheet-calc" readonly /></span>
											<span class="sheet-divider">=</span>
											<span class="sheet-table-cell"><input title="@{spellclass-1-level-1-class}" type="text" name="attr_spellclass-1-level-1-class" value="" placeholder="-" class="sheet-number" /></span>
											<span class="sheet-divider">+</span>
											<span class="sheet-table-cell"><input title="@{spellclass-1-level-1-bonus}" type="number" name="attr_spellclass-1-level-1-bonus" value="0" class="sheet-calc" readonly /></span>
											<span class="sheet-divider sheet-advanced-spell-option">+</span>
											<span class="sheet-table-cell sheet-advanced-spell-option"><input title="@{spellclass-1-level-1-misc}" type="number" name="attr_spellclass-1-level-1-misc" value="0" /></span>
											<span class="sheet-table-cell sheet-sect2 sheet-left-border"><input title="@{spellclass-1-level-1-spells-known}" type="number" name="attr_spellclass-1-level-1-spells-known" value="0" /></span>
											<span class="sheet-table-cell sheet-sect2"><input title="@{spellclass-1-level-1-total-listed}" type="number" name="attr_spellclass-1-level-1-total-listed" value="0" class="sheet-calc" readonly /></span>
											<span class="sheet-table-cell sheet-advanced-spell-option sheet-left-border"><input title="@{spellclass-1-level-1-user}" type="number" name="attr_spellclass-1-level-1-user" value="0" /></span>
										</div>
										<div class="sheet-table-row">
											<span class="sheet-table-cell"><input title="@{spellclass-1-level-2-savedc}" type="number" name="attr_spellclass-1-level-2-savedc" value="22" class="sheet-calc" readonly /></span>
											<span class="sheet-table-cell sheet-right-border" data-i18n="2-ordinal">2nd</span>
											<span class="sheet-table-cell sheet-sect"><input title="@{spellclass-1-level-2-spells-per-day}" type="number" name="attr_spellclass-1-level-2-spells-per-day" value="0" /></span>
											<span class="sheet-table-cell sheet-sect3 sheet-sect-inverse"><input title="@{spellclass-1-level-2-spells-prepared}" type="number" name="attr_spellclass-1-level-2-spells-prepared" value="0" class="sheet-calc" readonly /></span>
											<span class="sheet-table-cell sheet-sect2 sheet-sect-inverse"><input title="@{spellclass-1-level-2-spells-per-day}" type="number" name="attr_spellclass-1-level-2-spells-per-day" value="0" class="sheet-calc" readonly /></span>
											<span class="sheet-divider">/</span>
											<span class="sheet-table-cell"><input title="@{spellclass-1-level-2-spells-per-day|max}" type="number" name="attr_spellclass-1-level-2-spells-per-day_max" value="0" class="sheet-calc" readonly /></span>
											<span class="sheet-divider">=</span>
											<span class="sheet-table-cell"><input title="@{spellclass-1-level-2-class}" type="text" name="attr_spellclass-1-level-2-class" value="" placeholder="-" class="sheet-number" /></span>
											<span class="sheet-divider">+</span>
											<span class="sheet-table-cell"><input title="@{spellclass-1-level-2-bonus}" type="number" name="attr_spellclass-1-level-2-bonus" value="0" class="sheet-calc" readonly /></span>
											<span class="sheet-table-cell sheet-advanced-spell-option"><input title="@{spellclass-1-level-2-misc}" type="number" name="attr_spellclass-1-level-2-misc" value="0" /></span>
											<span class="sheet-table-cell sheet-sect2 sheet-left-border"><input title="@{spellclass-1-level-2-spells-known}" type="number" name="attr_spellclass-1-level-2-spells-known" value="0" /></span>
											<span class="sheet-table-cell sheet-sect2"><input title="@{spellclass-1-level-2-total-listed}" type="number" name="attr_spellclass-1-level-2-total-listed" value="0" class="sheet-calc" readonly /></span>
											<span class="sheet-table-cell sheet-advanced-spell-option sheet-left-border"><input title="@{spellclass-1-level-2-user}" type="number" name="attr_spellclass-1-level-2-user" value="0" /></span>
										</div>
										<div class="sheet-table-row">
											<span class="sheet-table-cell"><input title="@{spellclass-1-level-3-savedc}" type="number" name="attr_spellclass-1-level-3-savedc" value="33" class="sheet-calc" readonly /></span>
											<span class="sheet-table-cell sheet-right-border" data-i18n="3-ordinal">3rd</span>
											<span class="sheet-table-cell sheet-sect"><input title="@{spellclass-1-level-3-spells-per-day}" type="number" name="attr_spellclass-1-level-3-spells-per-day" value="0" /></span>
											<span class="sheet-table-cell sheet-sect3 sheet-sect-inverse"><input title="@{spellclass-1-level-3-spells-prepared}" type="number" name="attr_spellclass-1-level-3-spells-prepared" value="0" class="sheet-calc" readonly /></span>
											<span class="sheet-table-cell sheet-sect2 sheet-sect-inverse"><input title="@{spellclass-1-level-3-spells-per-day}" type="number" name="attr_spellclass-1-level-3-spells-per-day" value="0" class="sheet-calc" readonly /></span>
											<span class="sheet-divider">/</span>
											<span class="sheet-table-cell"><input title="@{spellclass-1-level-3-spells-per-day|max}" type="number" name="attr_spellclass-1-level-3-spells-per-day_max" value="0" class="sheet-calc" readonly /></span>
											<span class="sheet-divider">=</span>
											<span class="sheet-table-cell"><input title="@{spellclass-1-level-3-class}" type="text" name="attr_spellclass-1-level-3-class" value="" placeholder="-" class="sheet-number" /></span>
											<span class="sheet-divider">+</span>
											<span class="sheet-table-cell"><input title="@{spellclass-1-level-3-bonus}" type="number" name="attr_spellclass-1-level-3-bonus" value="0" class="sheet-calc" readonly /></span>
											<span class="sheet-divider sheet-advanced-spell-option">+</span>
											<span class="sheet-table-cell sheet-advanced-spell-option"><input title="@{spellclass-1-level-3-misc}" type="number" name="attr_spellclass-1-level-3-misc" value="0" /></span>
											<span class="sheet-table-cell sheet-sect2 sheet-left-border"><input title="@{spellclass-1-level-3-spells-known}" type="number" name="attr_spellclass-1-level-3-spells-known" value="0" /></span>
											<span class="sheet-table-cell sheet-sect2"><input title="@{spellclass-1-level-3-total-listed}" type="number" name="attr_spellclass-1-level-3-total-listed" value="0" class="sheet-calc" readonly /></span>
											<span class="sheet-table-cell sheet-advanced-spell-option sheet-left-border"><input title="@{spellclass-1-level-3-user}" type="number" name="attr_spellclass-1-level-3-user" value="0" /></span>
										</div>
										<div class="sheet-table-row">
											<span class="sheet-table-cell"><input title="@{spellclass-1-level-4-savedc}" type="number" name="attr_spellclass-1-level-4-savedc" value="44" class="sheet-calc" readonly /></span>
											<span class="sheet-table-cell sheet-right-border" data-i18n="4-ordinal">4th</span>
											<span class="sheet-table-cell sheet-sect"><input title="@{spellclass-1-level-4-spells-per-day}" type="number" name="attr_spellclass-1-level-4-spells-per-day" value="0" /></span>
											<span class="sheet-table-cell sheet-sect3 sheet-sect-inverse"><input title="@{spellclass-1-level-4-spells-prepared}" type="number" name="attr_spellclass-1-level-4-spells-prepared" value="0" class="sheet-calc" readonly /></span>
											<span class="sheet-table-cell sheet-sect2 sheet-sect-inverse"><input title="@{spellclass-1-level-4-spells-per-day}" type="number" name="attr_spellclass-1-level-4-spells-per-day" value="0" class="sheet-calc" readonly /></span>
											<span class="sheet-divider">/</span>
											<span class="sheet-table-cell"><input title="@{spellclass-1-level-4-spells-per-day|max}" type="number" name="attr_spellclass-1-level-4-spells-per-day_max" value="0" class="sheet-calc" readonly /></span>
											<span class="sheet-divider">=</span>
											<span class="sheet-table-cell"><input title="@{spellclass-1-level-4-class}" type="text" name="attr_spellclass-1-level-4-class" value="" placeholder="-" class="sheet-number" /></span>
											<span class="sheet-divider">+</span>
											<span class="sheet-table-cell"><input title="@{spellclass-1-level-4-bonus}" type="number" name="attr_spellclass-1-level-4-bonus" value="0" class="sheet-calc" readonly /></span>
											<span class="sheet-table-cell sheet-advanced-spell-option"><input title="@{spellclass-1-level-4-misc}" type="number" name="attr_spellclass-1-level-4-misc" value="0" /></span>
											<span class="sheet-divider sheet-advanced-spell-option">+</span>
											<span class="sheet-table-cell sheet-sect2 sheet-left-border"><input title="@{spellclass-1-level-4-spells-known}" type="number" name="attr_spellclass-1-level-4-spells-known" value="0" /></span>
											<span class="sheet-table-cell sheet-sect2"><input title="@{spellclass-1-level-4-total-listed}" type="number" name="attr_spellclass-1-level-4-total-listed" value="0" class="sheet-calc" readonly /></span>
											<span class="sheet-table-cell sheet-advanced-spell-option sheet-left-border"><input title="@{spellclass-1-level-4-user}" type="number" name="attr_spellclass-1-level-4-user" value="0" /></span>
										</div>
										<div class="sheet-table-row">
											<span class="sheet-table-cell"><input title="@{spellclass-1-level-5-savedc}" type="number" name="attr_spellclass-1-level-5-savedc" value="55" class="sheet-calc" readonly /></span>
											<span class="sheet-table-cell sheet-right-border" data-i18n="5-ordinal">5th</span>
											<span class="sheet-table-cell sheet-sect"><input title="@{spellclass-1-level-5-spells-per-day}" type="number" name="attr_spellclass-1-level-5-spells-per-day" value="0" /></span>
											<span class="sheet-table-cell sheet-sect3 sheet-sect-inverse"><input title="@{spellclass-1-level-5-spells-prepared}" type="number" name="attr_spellclass-1-level-5-spells-prepared" value="0" class="sheet-calc" readonly /></span>
											<span class="sheet-table-cell sheet-sect2 sheet-sect-inverse"><input title="@{spellclass-1-level-5-spells-per-day}" type="number" name="attr_spellclass-1-level-5-spells-per-day" value="0" class="sheet-calc" readonly /></span>
											<span class="sheet-divider">/</span>
											<span class="sheet-table-cell"><input title="@{spellclass-1-level-5-spells-per-day|max}" type="number" name="attr_spellclass-1-level-5-spells-per-day_max" value="0" class="sheet-calc" readonly /></span>
											<span class="sheet-divider">=</span>
											<span class="sheet-table-cell"><input title="@{spellclass-1-level-5-class}" type="text" name="attr_spellclass-1-level-5-class" value="" placeholder="-" class="sheet-number" /></span>
											<span class="sheet-divider">+</span>
											<span class="sheet-table-cell"><input title="@{spellclass-1-level-5-bonus}" type="number" name="attr_spellclass-1-level-5-bonus" value="0" class="sheet-calc" readonly /></span>
											<span class="sheet-table-cell sheet-advanced-spell-option"><input title="@{spellclass-1-level-5-misc}" type="number" name="attr_spellclass-1-level-5-misc" value="0" /></span>
											<span class="sheet-table-cell sheet-sect2 sheet-left-border"><input title="@{spellclass-1-level-5-spells-known}" type="number" name="attr_spellclass-1-level-5-spells-known" value="0" /></span>
											<span class="sheet-table-cell sheet-sect2"><input title="@{spellclass-1-level-5-total-listed}" type="number" name="attr_spellclass-1-level-5-total-listed" value="0" class="sheet-calc" readonly /></span>
											<span class="sheet-table-cell sheet-advanced-spell-option sheet-left-border"><input title="@{spellclass-1-level-5-user}" type="number" name="attr_spellclass-1-level-5-user" value="0" /></span>
										</div>
										<div class="sheet-table-row">
											<span class="sheet-table-cell"><input title="@{spellclass-1-level-6-savedc}" type="number" name="attr_spellclass-1-level-6-savedc" value="66" class="sheet-calc" readonly /></span>
											<span class="sheet-table-cell sheet-right-border" data-i18n="6-ordinal">6th</span>
											<span class="sheet-table-cell sheet-sect"><input title="@{spellclass-1-level-6-spells-per-day}" type="number" name="attr_spellclass-1-level-6-spells-per-day" value="0" /></span>
											<span class="sheet-table-cell sheet-sect3 sheet-sect-inverse"><input title="@{spellclass-1-level-6-spells-prepared}" type="number" name="attr_spellclass-1-level-6-spells-prepared" value="0" class="sheet-calc" readonly /></span>
											<span class="sheet-table-cell sheet-sect2 sheet-sect-inverse"><input title="@{spellclass-1-level-6-spells-per-day}" type="number" name="attr_spellclass-1-level-6-spells-per-day" value="0" class="sheet-calc" readonly /></span>
											<span class="sheet-divider">/</span>
											<span class="sheet-table-cell"><input title="@{spellclass-1-level-6-spells-per-day|max}" type="number" name="attr_spellclass-1-level-6-spells-per-day_max" value="0" class="sheet-calc" readonly /></span>
											<span class="sheet-divider">=</span>
											<span class="sheet-table-cell"><input title="@{spellclass-1-level-6-class}" type="text" name="attr_spellclass-1-level-6-class" value="" placeholder="-" class="sheet-number" /></span>
											<span class="sheet-divider">+</span>
											<span class="sheet-table-cell"><input title="@{spellclass-1-level-6-bonus}" type="number" name="attr_spellclass-1-level-6-bonus" value="0" class="sheet-calc" readonly /></span>
											<span class="sheet-table-cell sheet-advanced-spell-option"><input title="@{spellclass-1-level-6-misc}" type="number" name="attr_spellclass-1-level-6-misc" value="0" /></span>
											<span class="sheet-divider sheet-advanced-spell-option">+</span>
											<span class="sheet-table-cell sheet-sect2 sheet-left-border"><input title="@{spellclass-1-level-6-spells-known}" type="number" name="attr_spellclass-1-level-6-spells-known" value="0" /></span>
											<span class="sheet-table-cell sheet-sect2"><input title="@{spellclass-1-level-6-total-listed}" type="number" name="attr_spellclass-1-level-6-total-listed" value="0" class="sheet-calc" readonly /></span>
											<span class="sheet-table-cell sheet-advanced-spell-option sheet-left-border"><input title="@{spellclass-1-level-6-user}" type="number" name="attr_spellclass-1-level-6-user" value="0" /></span>
										</div>
										<div class="sheet-table-row">
											<span class="sheet-table-cell"><input title="@{spellclass-1-level-7-savedc}" type="number" name="attr_spellclass-1-level-7-savedc" value="77" class="sheet-calc" readonly /></span>
											<span class="sheet-table-cell sheet-right-border" data-i18n="7-ordinal">7th</span>
											<span class="sheet-table-cell sheet-sect"><input title="@{spellclass-1-level-7-spells-per-day}" type="number" name="attr_spellclass-1-level-7-spells-per-day" value="0" /></span>
											<span class="sheet-table-cell sheet-sect3 sheet-sect-inverse"><input title="@{spellclass-1-level-7-spells-prepared}" type="number" name="attr_spellclass-1-level-7-spells-prepared" value="0" class="sheet-calc" readonly /></span>
											<span class="sheet-table-cell sheet-sect2 sheet-sect-inverse"><input title="@{spellclass-1-level-7-spells-per-day}" type="number" name="attr_spellclass-1-level-7-spells-per-day" value="0" class="sheet-calc" readonly /></span>
											<span class="sheet-divider">/</span>
											<span class="sheet-table-cell"><input title="@{spellclass-1-level-7-spells-per-day|max}" type="number" name="attr_spellclass-1-level-7-spells-per-day_max" value="0" class="sheet-calc" readonly /></span>
											<span class="sheet-divider">=</span>
											<span class="sheet-table-cell"><input title="@{spellclass-1-level-7-class}" type="text" name="attr_spellclass-1-level-7-class" value="" placeholder="-" class="sheet-number" /></span>
											<span class="sheet-divider">+</span>
											<span class="sheet-table-cell"><input title="@{spellclass-1-level-7-bonus}" type="number" name="attr_spellclass-1-level-7-bonus" value="0" class="sheet-calc" readonly /></span>
											<span class="sheet-table-cell sheet-advanced-spell-option"><input title="@{spellclass-1-level-7-misc}" type="number" name="attr_spellclass-1-level-7-misc" value="0" /></span>
											<span class="sheet-divider sheet-advanced-spell-option">+</span>
											<span class="sheet-table-cell sheet-sect2 sheet-left-border"><input title="@{spellclass-1-level-7-spells-known}" type="number" name="attr_spellclass-1-level-7-spells-known" value="0" /></span>
											<span class="sheet-table-cell sheet-sect2"><input title="@{spellclass-1-level-7-total-listed}" type="number" name="attr_spellclass-1-level-7-total-listed" value="0" class="sheet-calc" readonly /></span>
											<span class="sheet-table-cell sheet-advanced-spell-option sheet-left-border"><input title="@{spellclass-1-level-7-user}" type="number" name="attr_spellclass-1-level-7-user" value="0" /></span>
										</div>
										<div class="sheet-table-row">
											<span class="sheet-table-cell"><input title="@{spellclass-1-level-8-savedc}" type="number" name="attr_spellclass-1-level-8-savedc" value="88" class="sheet-calc" readonly /></span>
											<span class="sheet-table-cell sheet-right-border" data-i18n="8-ordinal">8th</span>
											<span class="sheet-table-cell sheet-sect"><input title="@{spellclass-1-level-8-spells-per-day}" type="number" name="attr_spellclass-1-level-8-spells-per-day" value="0" /></span>
											<span class="sheet-table-cell sheet-sect3 sheet-sect-inverse"><input title="@{spellclass-1-level-8-spells-prepared}" type="number" name="attr_spellclass-1-level-8-spells-prepared" value="0" class="sheet-calc" readonly /></span>
											<span class="sheet-table-cell sheet-sect2 sheet-sect-inverse"><input title="@{spellclass-1-level-8-spells-per-day}" type="number" name="attr_spellclass-1-level-8-spells-per-day" value="0" class="sheet-calc" readonly /></span>
											<span class="sheet-divider">/</span>
											<span class="sheet-table-cell"><input title="@{spellclass-1-level-8-spells-per-day|max}" type="number" name="attr_spellclass-1-level-8-spells-per-day_max" value="0" class="sheet-calc" readonly /></span>
											<span class="sheet-divider">=</span>
											<span class="sheet-table-cell"><input title="@{spellclass-1-level-8-class}" type="text" name="attr_spellclass-1-level-8-class" value="" placeholder="-" class="sheet-number" /></span>
											<span class="sheet-divider">+</span>
											<span class="sheet-table-cell"><input title="@{spellclass-1-level-8-bonus}" type="number" name="attr_spellclass-1-level-8-bonus" value="0" class="sheet-calc" readonly /></span>
											<span class="sheet-table-cell sheet-advanced-spell-option"><input title="@{spellclass-1-level-8-misc}" type="number" name="attr_spellclass-1-level-8-misc" value="0" /></span>
											<span class="sheet-table-cell sheet-sect2 sheet-left-border"><input title="@{spellclass-1-level-8-spells-known}" type="number" name="attr_spellclass-1-level-8-spells-known" value="0" /></span>
											<span class="sheet-table-cell sheet-sect2"><input title="@{spellclass-1-level-8-total-listed}" type="number" name="attr_spellclass-1-level-8-total-listed" value="0" class="sheet-calc" readonly /></span>
											<span class="sheet-table-cell sheet-advanced-spell-option sheet-left-border"><input title="@{spellclass-1-level-8-user}" type="number" name="attr_spellclass-1-level-8-user" value="0" /></span>
										</div>
										<div class="sheet-table-row">
											<span class="sheet-table-cell"><input title="@{spellclass-1-level-9-savedc}" type="number" name="attr_spellclass-1-level-9-savedc" value="99" class="sheet-calc" readonly /></span>
											<span class="sheet-table-cell sheet-right-border" data-i18n="9-ordinal">9th</span>
											<span class="sheet-table-cell sheet-sect"><input title="@{spellclass-1-level-9-spells-per-day}" type="number" name="attr_spellclass-1-level-9-spells-per-day" value="0" /></span>
											<span class="sheet-table-cell sheet-sect3 sheet-sect-inverse"><input title="@{spellclass-1-level-9-spells-prepared}" type="number" name="attr_spellclass-1-level-9-spells-prepared" value="0" class="sheet-calc" readonly /></span>
											<span class="sheet-table-cell sheet-sect2 sheet-sect-inverse"><input title="@{spellclass-1-level-9-spells-per-day}" type="number" name="attr_spellclass-1-level-9-spells-per-day" value="0" class="sheet-calc" readonly /></span>
											<span class="sheet-divider">/</span>
											<span class="sheet-table-cell"><input title="@{spellclass-1-level-9-spells-per-day|max}" type="number" name="attr_spellclass-1-level-9-spells-per-day_max" value="0" class="sheet-calc" readonly /></span>
											<span class="sheet-divider">=</span>
											<span class="sheet-table-cell"><input title="@{spellclass-1-level-9-class}" type="text" name="attr_spellclass-1-level-9-class" value="" placeholder="-" class="sheet-number" /></span>
											<span class="sheet-divider">+</span>
											<span class="sheet-table-cell"><input title="@{spellclass-1-level-9-bonus}" type="number" name="attr_spellclass-1-level-9-bonus" value="0" class="sheet-calc" readonly /></span>
											<span class="sheet-table-cell sheet-advanced-spell-option"><input title="@{spellclass-1-level-9-misc}" type="number" name="attr_spellclass-1-level-9-misc" value="0" /></span>
											<span class="sheet-divider sheet-advanced-spell-option">+</span>
											<span class="sheet-table-cell sheet-sect2 sheet-left-border"><input title="@{spellclass-1-level-9-spells-known}" type="number" name="attr_spellclass-1-level-9-spells-known" value="0" /></span>
											<span class="sheet-table-cell sheet-sect2"><input title="@{spellclass-1-level-9-total-listed}" type="number" name="attr_spellclass-1-level-9-total-listed" value="0" class="sheet-calc" readonly /></span>
											<span class="sheet-table-cell sheet-advanced-spell-option sheet-left-border"><input title="@{spellclass-1-level-9-user}" type="number" name="attr_spellclass-1-level-9-user" value="0" /></span>
										</div>
									</div>
								</div>
							</div>
						</div>
						<div class="sheet-cheat"></div>
						<input class="sheet-showarrow sheet-h3arrow" type="checkbox" name="attr_spellclass-1-domains-show" data-i18n-aria-label="domains" title="Click to expand" data-i18n-title="showsect-cmd" value="1" checked />
						<h3 class="sheet-clickheader sheet-showsect"><label title="Click to expand" data-i18n-title="showsect-cmd" data-i18n-aria-label="showsect-cmd" data-i18n="domains">Domains</label></h3>
						<div class="sheet-h3-section sheet-domains sheet-wide-readonly">
							<div class="sheet-table sheet-hasexpandrows">
								<span class="sheet-table-name sheet-secondary-table-name sheet-show-readonly" data-i18n="known-or-special">Known / Specialties</span>
								<div class="sheet-table-row">
									<span class="sheet-table-header" data-i18n="name">Name</span>
									<span class="sheet-table-header" data-i18n="type">Type</span>
									<span class="sheet-table-header" data-i18n="bonus">Bonus</span>
									<span class="sheet-table-header" data-i18n="opposition">Opposition</span>
									<span class="sheet-table-header" data-i18n="effect">Effect</span>
								</div>
								<div class="sheet-table-row">
									<span class="sheet-table-cell"><input title="@{spellclass-1-domain-0}" type="text" name="attr_spellclass-1-domain-0" value="" placeholder="Name" data-i18n-placeholder="name" /></span>
									<span class="sheet-table-cell"><input title="@{spellclass-1-domaintype-0}" type="text" name="attr_spellclass-1-domaintype-0" value="" placeholder="(Sub)Domain/School/Bloodline/Patron" data-i18n-placeholder="domain-etc-type-example" /></span>
									<span class="sheet-table-cell"><input title="@{spellclass-1-domainbonus-0}" type="text" name="attr_spellclass-1-domainbonus-0" value="" placeholder="Bonus" data-i18n-placeholder="bonus" /></span>
									<span class="sheet-table-cell"><input title="@{spellclass-1-oppositionschool-0}" type="text" name="attr_spellclass-1-oppositionschool-0" value="" placeholder="Name" data-i18n-placeholder="name" /></span>
									<span class="sheet-table-cell"><input title="@{spellclass-1-oppositioneffect-0}" type="text" name="attr_spellclass-1-oppositioneffect-0" value="" placeholder="Cost double or prohibited" data-i18n-placeholder="opposition-school-example" /></span>
								</div>
								<input type="checkbox" class="sheet-showarrow sheet-sect-show sheet-expand-arrow sheet-expand1" name="attr_domain02_show" value="1" title="Show more domains/schools" aria-label="Show more domains/schools" /><span class="sheet-showsect"></span>
								<div class="sheet-table-row sheet-sect">
									<span class="sheet-table-cell"><input title="@{spellclass-1-domain-1}" type="text" name="attr_spellclass-1-domain-1" value="" placeholder="Name" data-i18n-placeholder="name" /></span>
									<span class="sheet-table-cell"><input title="@{spellclass-1-domaintype-1}" type="text" name="attr_spellclass-1-domaintype-1" value="" placeholder="(Sub)Domain/School/Bloodline/Patron" data-i18n-placeholder="domain-etc-type-example" /></span>
									<span class="sheet-table-cell"><input title="@{spellclass-1-domainbonus-1}" type="text" name="attr_spellclass-1-domainbonus-1" value="" placeholder="Bonus" data-i18n-placeholder="bonus" /></span>
									<span class="sheet-table-cell"><input title="@{spellclass-1-oppositionschool-1}" type="text" name="attr_spellclass-1-oppositionschool-1" value="" placeholder="Name" data-i18n-placeholder="name" /></span>
									<span class="sheet-table-cell"><input title="@{spellclass-1-oppositioneffect-1}" type="text" name="attr_spellclass-1-oppositioneffect-1" value="" placeholder="Cost double or prohibited" data-i18n-placeholder="opposition-school-example" /></span>
								</div>
								<input type="checkbox" class="sheet-showarrow sheet-sect2-show sheet-sect sheet-expand-arrow sheet-expand2" name="attr_domain03_show" value="1" title="Show more domains/schools" aria-label="Show more domains/schools" /><span class="sheet-showsect sheet-sect"></span>
								<div class="sheet-table-row sheet-sect sheet-sect2">
									<span class="sheet-table-cell"><input title="@{spellclass-1-domain-2}" type="text" name="attr_spellclass-1-domain-2" value="" placeholder="Name" data-i18n-placeholder="name" /></span>
									<span class="sheet-table-cell"><input title="@{spellclass-1-domaintype-2}" type="text" name="attr_spellclass-1-domaintype-2" value="" placeholder="(Sub)Domain/School/Bloodline/Patron" data-i18n-placeholder="domain-etc-type-example" /></span>
									<span class="sheet-table-cell"><input title="@{spellclass-1-domainbonus-2}" type="text" name="attr_spellclass-1-domainbonus-2" value="" placeholder="Bonus" data-i18n-placeholder="bonus" /></span>
									<span class="sheet-table-cell"><input title="@{spellclass-1-oppositionschool-2}" type="text" name="attr_spellclass-1-oppositionschool-2" value="" placeholder="Name" data-i18n-placeholder="name" /></span>
									<span class="sheet-table-cell"><input title="@{spellclass-1-oppositioneffect-2}" type="text" name="attr_spellclass-1-oppositioneffect-2" value="" placeholder="Cost double or prohibited" data-i18n-placeholder="opposition-school-example" /></span>
								</div>
							</div>
						</div>
					</div>
					<!-- Spell Class 2 -->
					<h2 class="sheet-section2 sheet-nontable-name sheet-spell-multiclassed"><span name="attr_spellclass-2-name"></span></h2>
					<div class="sheet-section2 sheet-section-spellclass sheet-spellclass-2 sheet-spell-multiclassed">
						<div class="sheet-col sheet-col1">
							<input class="sheet-showarrow sheet-h3arrow" type="checkbox" name="attr_spellclass-2-show" data-i18n-aria-label="spellclass-level-base" title="Click to expand" data-i18n-title="showsect-cmd" value="1" checked />
							<h3 class="sheet-clickheader sheet-showsect"><label title="Click to expand" data-i18n-title="showsect-cmd" data-i18n-aria-label="showsect-cmd" data-i18n="level-and-ability">Level and Caster Ability</label></h3>
							<div class="sheet-cheat"></div>
							<div class="sheet-h3-section sheet-table sheet-spellclass-level sheet-narrow-numbers">
								<span class="sheet-table-name" data-i18n="caster-class-level">Caster Class and Level</span>
								<div class="sheet-table-group-head">
									<div class="sheet-table-row">
										<span class="sheet-table-header" data-i18n="check">Check</span>
										<span class="sheet-table-header" data-i18n-title="effective-caster-level" data-i18n-aria-label="effective-caster-level" data-i18n="caster-level">Caster Level</span>
										<span class="sheet-table-header sheet-divider"></span>
										<span class="sheet-table-header sheet-hide-readonly" data-i18n-title="class-number-explanation" data-i18n-aria-label="class-number-explanation" data-i18n="synchronize-class">Sync Class</span>
										<span class="sheet-table-header sheet-entry-long" style="min-width:10em;" data-i18n="class-name">Class Name</span>
										<span class="sheet-table-header sheet-hide-readonly" data-i18n="base-level">Base Level</span>
										<span class="sheet-divider sheet-table-header sheet-advanced-spell-option"></span>
										<span class="sheet-table-header sheet-advanced-spell-option" data-i18n="miscellaneous-abbrv">Misc</span>
										<span class="sheet-divider sheet-table-header sheet-hide-readonly"></span>
										<span class="sheet-table-header" data-i18n="buff">Buff</span>
										<span class="sheet-divider sheet-table-header sheet-hide-readonly"></span>
										<span class="sheet-table-header" data-i18n-title="condition-description" data-i18n-aria-label="condition-description" data-i18n="condition-abbrv">Cond</span>
								</div>
								</div>
								<div class="sheet-table-group">
									<div class="sheet-table-row">
										<span class="sheet-table-cell sheet-spellcaster-button">
											<button class="sheet-spellcaster-button" title="%{selected|Spell-Class-2-CL-Check}" type="roll" name="roll_Spell-Class-2-CL-Check" value="@{PC-whisper} &{template:pf_generic} @{toggle_spell_accessible} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_generic}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle}} {{name=^{caster-level-check}}} {{class=**@{spellclass-2-name} @{spellclass-2-level}**}} {{check=[[ 1d20 + [[ @{spellclass-2-level-total} ]] ]]}} {{^{spell-penetration-bonus-abbrv}=@{spellclass-2-SP-mod}}} {{lefttext_6=@{CasterLevel-2-note}}}">&nbsp;<span style="vertical-align: middle;" data-i18n="caster-level-check">Casterlevel Check</span>&nbsp;
											</button>
										</span>
										<span class="sheet-table-cell sheet-left sheet-number"><input title="@{spellclass-2-level-total}" type="number" name="attr_spellclass-2-level-total" value="0" class="sheet-calc" readonly /></span>
										<span class="sheet-divider sheet-hide-readonly">=</span>
										<span class="sheet-table-cell sheet-entry-vshort sheet-hide-readonly">
											<select title="@{spellclass-2} Choose or enter manually" name="attr_spellclass-2" class="sheet-select-small spellclass-2">
												<option value="-1" data-i18n="select-class-or-manual-default" selected>&#8226;Select Class or enter other manually</option>
												<option value="0" data-i18n="1-ordinal-class" >1st Class</option>
												<option value="1" data-i18n="2-ordinal-class" >2nd Class</option>
												<option value="2" data-i18n="3-ordinal-class" >3rd Class</option>
												<option value="3" data-i18n="4-ordinal-class" >4th Class</option>
												<option value="4" data-i18n="5-ordinal-class" >5th Class</option>
												<option value="5" data-i18n="6-ordinal-class" >6th Class</option>
												<option value="6" data-i18n="race-hd">Race (use HD for level)</option>
											</select>
										</span>
										<span class="sheet-table-cell sheet-entry_long">
											<input class="sheet-calc-advanced-spell-option" title="@{spellclass-2-name}" type="text" name="attr_spellclass-2-name" placeholder="Class Name" data-i18n-placeholder="class-name">
										</span>
										<span class="sheet-table-cell sheet-hide-readonly sheet-number sheet-left"><input title="@{spellclass-2-level}" type="number" name="attr_spellclass-2-level" value="0" /></span>
										<span class="sheet-divider sheet-advanced-spell-option">+</span>
										<span class="sheet-table-cell sheet-advanced-spell-option sheet-number"><input title="@{spellclass-2-level-misc}" type="number" name="attr_spellclass-2-level-misc" value="0" /></span>
										<span class="sheet-divider">+</span>
										<span class="sheet-table-cell sheet-number"><input title="@{buff_CasterLevel-total}" name="attr_buff_CasterLevel-total" type="number" value="0" class="sheet-calc" readonly /></span>
										<span class="sheet-divider">+</span>
										<span class="sheet-table-cell sheet-number"><input title="@{CasterLevel-Penalty}" name="attr_CasterLevel-Penalty" type="number" value="0" class="sheet-calc" readonly /></span>
									</div>
								</div>
							</div>
							<div class="sheet-h3-section sheet-spellclass-ranges" role="presentation" >
								<div class="sheet-table sheet-show-readonly sheet-inverse-readonly">
									<div class="sheet-table-row">
										<span class="sheet-table-row-name sheet-spellrange-header" data-i18n="close">Close</span>
										<span class="sheet-table-cell"><input class="sheet-spellrange-data sheet-calc sheet-entry-wide" title="@{spellclass-2-close} 25 + 5/2 levels" type="number" name="attr_spellclass-2-close" value="0" readonly /></span>
										<span class="sheet-table-row-name sheet-spellrange-header" data-i18n="medium">Medium</span>
										<span class="sheet-table-cell"><input class="sheet-spellrange-data sheet-calc sheet-entry-wide" title="@{spellclass-2-medium} 100 + 10/level" type="number" name="attr_spellclass-2-medium" value="0" readonly /></span>
										<span class="sheet-table-row-name sheet-spellrange-header" data-i18n="long">Long</span>
										<span class="sheet-table-cell"><input class="sheet-spellrange-data sheet-calc sheet-entry-wide" title="@{spellclass-2-long} 400 + 40/level" type="number" name="attr_spellclass-2-long" value="0" readonly /></span>
									</div>
								</div>
								<div class="sheet-table sheet-hide-readonly">
									<span class="sheet-table-name" data-i18n="spells-ranges">Spell Ranges</span>
									<div class="sheet-table-group-head">
										<span class="sheet-table-header" data-i18n="close">Close</span>
										<span class="sheet-table-header" data-i18n="medium">Medium</span>
										<span class="sheet-table-header" data-i18n="long">Long</span>
									</div>
									<div class="sheet-table-row">
										<span class="sheet-table-cell"><input class="sheet-spellrange-data sheet-calc sheet-entry-wide" title="@{spellclass-2-close} 25 + 5/2 levels" type="number" name="attr_spellclass-2-close" value="0" readonly /></span>
										<span class="sheet-table-cell"><input class="sheet-spellrange-data sheet-calc sheet-entry-wide" title="@{spellclass-2-medium} 100 + 10/level" type="number" name="attr_spellclass-2-medium" value="0" readonly /></span>
										<span class="sheet-table-cell"><input class="sheet-spellrange-data sheet-calc sheet-entry-wide" title="@{spellclass-2-long} 400 + 40/level" type="number" name="attr_spellclass-2-long" value="0" readonly /></span>
									</div>
								</div>
							</div>
							<div class="sheet-h3-section sheet-table sheet-spellclass-concentration" >
								<span class="sheet-table-name" data-i18n="spellcasting-ability">Spellcasting Ability</span>
								<div class="sheet-table-group-head">
									<span class="sheet-table-header" data-i18n="check">Check</span>
									<span class="sheet-table-header" data-i18n="total">Total</span>
									<span class="sheet-divider sheet-table-header"></span>
									<span class="sheet-table-header sheet-ability-column" style="width:6em;" data-i18n="ability">Ability</span>
									<span class="sheet-table-header" data-i18n="modifier-abbrv">Mod</span>
									<span class="sheet-divider sheet-table-header"></span>
									<span class="sheet-table-header sheet-hide-readonly" data-i18n-title="effective-caster-level" data-i18n-aria-label="effective-caster-level" data-i18n="caster-level">Caster Level</span>
									<span class="sheet-divider sheet-table-header sheet-advanced-spell-option"></span>
									<span class="sheet-table-header sheet-advanced-spell-option" data-i18n="miscellaneous-abbrv">Misc</span>
									<span class="sheet-table-header sheet-table-rightcell"aria-label="empty spacer cell" role="presentation"></span>
								</div>
								<div class="sheet-table-row">
									<span class="sheet-table-cell sheet-spellcaster-button"><button class="sheet-spellcaster-button" title="%{selected|Concentration-Check-2}" type="roll" name="roll_Concentration-Check-2" value="@{PC-whisper} &{template:pf_generic} @{toggle_spell_accessible} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_generic}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle}} {{name=^{concentration-check}}} {{class=**@{spellclass-2-name} @{spellclass-2-level}**}} {{check=[[ 1d20 + [[ @{Concentration-2} ]] ]]}} {{^{defensive-casting-bonus-abbrv}=@{Concentration-2-def}}} {{lefttext_6=@{Concentration-2-miscnote}}}">&nbsp;<span style="vertical-align: middle;" data-i18n="concentration-check">Concentration</span>&nbsp;</button></span>
									<span class="sheet-table-cell sheet-left sheet-number"><input title="@{Concentration-2}" type="number" name="attr_Concentration-2" value="0" class="sheet-calc" readonly /></span>
									<span class="sheet-divider">=</span>
									<span class="sheet-table-cell sheet-ability-column" >
										<select class="sheet-select-small" title="@{Concentration-2-ability}" name="attr_Concentration-2-ability">
											<option value="0" data-i18n="select-one-default" selected>&#8226;Select One</option>
											<option value="@{STR-mod}" data-i18n="strength-abbrv">STR</option>
											<option value="@{DEX-mod}" data-i18n="dexterity-abbrv">DEX</option>
											<option value="@{CON-mod}" data-i18n="constitution-abbrv">CON</option>
											<option value="@{INT-mod}" data-i18n="intelligence-abbrv">INT</option>
											<option value="@{WIS-mod}" data-i18n="wisdom-abbrv">WIS</option>
											<option value="@{CHA-mod}" data-i18n="charisma-abbrv">CHA</option>
										</select>
									</span>
									<span class="sheet-table-cell sheet-number sheet-left"><input title="@{Concentration-2-mod}" type="number" name="attr_Concentration-2-mod" value="0" class="sheet-calc" readonly /></span>
									<span class="sheet-divider">+</span>
									<span class="sheet-table-cell sheet-number sheet-hide-readonly"><input title="@{spellclass-2-level-total}" type="number" name="attr_spellclass-2-level-total" value="0" class="sheet-calc" readonly /></span>
									<span class="sheet-divider sheet-advanced-spell-option">+</span>
									<span class="sheet-table-cell sheet-advanced-spell-option sheet-number"><input title="@{Concentration-2-misc}" type="number" name="attr_Concentration-2-misc" value="0" /></span>
									<span class="sheet-table-cell"></span>
								</div>
							</div>
							<div class="sheet-h3-section sheet-table sheet-spellclass-roll-adj">
								<span class="sheet-table-name">Roll adjustments</span>
								<div class="sheet-table-row">
									<span class="sheet-table-header sheet-nowrap sheet-entry-30p-shrink sheet-super sheet-note-a" style="min-width:9em;" data-i18n-aria-label="spell-penetration-bonus-label"  data-i18n="spell-penetration-bonus-abbrv">Spell Pen Bonus</span>
									<span class="sheet-table-header"></span>
									<span class="sheet-table-header sheet-nowrap-readonly" title="Concentration Bonus when casting defensively" data-i18n-title="cast-defensive-bonus" data-i18n-aria-label="cast-defensive-bonus" style="word-wrap:normal;" data-i18n="cast-defensive-bonus-abbrv">Cast Def. Bonus</span>
									<span class="sheet-table-header sheet-table-rightcell sheet-show-readonly sheet-inverse-readonly"aria-label="empty spacer cell" role="presentation"></span>
								</div>
								<div class="sheet-table-row">
									<input type="checkbox" name="attr_spellclass-2-SP-mod_error" class="sheet-error-mshow" value="1" />								
									<span class="sheet-table-cell sheet-highlight" ><textarea class="sheet-inline-textarea" title="@{spellclass-2-SP_misc}" name="attr_spellclass-2-SP_misc" data-i18n-placeholder="equation-macro-place"></textarea></span>
									<span class="sheet-table-cell sheet-number sheet-highlight"><input type="number" title="@{spellclass-2-SP-mod}" name="attr_spellclass-2-SP-mod" value="0" class="sheet-calc" readonly></span>
									<span class="sheet-table-cell sheet-nowrap-readonly"><input title="@{Concentration-2-def}" type="number" name="attr_Concentration-2-def" value="0" /></span>
									<span class="sheet-table-cell sheet-show-readonly sheet-inverse-readonly"></span>
								</div>
							</div>
							<div class="sheet-cheat"></div>
							<input class="sheet-showarrow sheet-h3arrow sheet-spellpoints-sect" type="checkbox" name="attr_spellclass-2-spellpoints-show" data-i18n-aria-label="spellspoints" title="Click to expand" data-i18n-title="showsect-cmd" value="1" />
							<h3 class="sheet-clickheader sheet-showsect sheet-spellpoints-sect"><label title="Click to expand" data-i18n-title="showsect-cmd" data-i18n-aria-label="showsect-cmd"  data-i18n="spell-points">Spell Points</label></h3>
							<div class="sheet-h3-section sheet-spellpoints sheet-table sheet-spellpoints-sect">
								<div class="sheet-table-group">
									<div class="sheet-table-row">
										<span class="sheet-table-header" data-i18n="spell-points">Spell Points</span>
										<span class="sheet-table-header sheet-divider"></span>
										<span class="sheet-table-header" data-i18n="points-per-day">Points/Day</span>
										<span class="sheet-table-header sheet-divider"></span>
										<span class="sheet-table-header" data-i18n="base-points-per-day">Base points per day</span>
										<span class="sheet-table-header" data-i18n="bonus-points">Ability Bonus</span>
										<span class="sheet-table-header" data-i18n="miscellaneous-abbrv">misc</span>
									</div>
								</div>
								<div class="sheet-table-group">
									<div class="sheet-table-row">
										<span class="sheet-table-cell"><input title="@{spellclass-2-spell-points-per-day}" type="number" name="attr_spellclass-2-spell-points-per-day" value="0" /></span>
										<span class="sheet-divider">/</span>
										<span class="sheet-table-cell"><input title="@{spellclass-2-spell-points-per-day|max}" type="text" class="sheet-number" name="attr_spellclass-2-spell-points-per-day_max" value="(@{spellclass-2-spell-points-class} + [[ @{spellclass-2-spell-points-bonus} ]] + [[ @{spellclass-2-spell-points-misc} ]])" disabled /></span>
										<span class="sheet-divider">=</span>
										<span class="sheet-table-cell"><input title="@{spellclass-2-spell-points-class}" type="number" name="attr_spellclass-2-spell-points-class" value="0" /></span>
										<span class="sheet-table-cell"><input title="@{spellclass-2-spell-points-bonus}" type="number" name="attr_spellclass-2-spell-points-bonus" value="0" /></span>
										<span class="sheet-table-cell"><input title="@{spellclass-2-spell-points-misc}" type="number" name="attr_spellclass-2-spell-points-misc" value="0" /></span>
									</div>
								</div>
							</div>
							<div class="sheet-cheat"></div>
							<input class="sheet-showarrow sheet-h3arrow" type="checkbox" name="attr_spellclass-2-spells-notes-show" data-i18n-aria-label="spells-notes" title="Click to expand" data-i18n-title="showsect-cmd" value="1" />
							<h3 class="sheet-clickheader sheet-showsect"><label title="Click to expand" data-i18n-title="showsect-cmd" data-i18n-aria-label="showsect-cmd" data-i18n="spells-notes">Spells Notes</label></h3>
							<div class="sheet-h3-section sheet-table sheet-spellclass-spellnotes">
								<span class="sheet-table-name" data-i18n="notes">Notes</span>
								<div class="sheet-table-group-head">
									<span class="sheet-table-header" data-i18n="spells-notes" data-i18n-title="spells-notes" data-i18n-aria-label="spells-notes" >Spells Notes</span>					
									<span class="sheet-table-header" data-i18n="caster-level" data-i18n-title="caster-level-check-notes" data-i18n-aria-label="caster-level-check-notes" >Caster Level</span>						
									<span class="sheet-table-header" data-i18n="concentration" data-i18n-title="concentration-check-notes" data-i18n-aria-label="concentration-check-notes" >Concentration</span>						
								</div>
								<div class="sheet-table-row">
									<div class="sheet-table-cell sheet-notes-cell">
										<textarea class="sheet-half" title="@{spell-class-2-spells-notes}" name="attr_spell-class-2-spells-notes" placeholder="Spells notes" data-i18n-placeholder="spells-notes" data-i18n-aria-label="spells-notes"></textarea>
									</div>
									<div class="sheet-table-cell sheet-notes-cell">
										<textarea class="sheet-half" title="@{CasterLevel-2-note}" name="attr_CasterLevel-2-note"  placeholder="notes" data-i18n-placeholder="caster-level-check-notes" data-i18n-aria-label="caster-level-check-notes"></textarea>
									</div>
									<div class="sheet-table-cell sheet-notes-cell">
										<textarea class="sheet-half" title="@{Concentration-2-miscnote}" name="attr_Concentration-2-miscnote" placeholder="notes" data-i18n-placeholder="concentration-check-notes" data-i18n-aria-label="concentration-check-notes"></textarea>
									</div>
								</div>
							</div>
						</div>
						<div class="sheet-col sheet-col2">
							<div class="sheet-cheat"></div>
							<input class="sheet-showarrow sheet-h3arrow" type="checkbox" name="attr_spellclass-2-perday-show" data-i18n-aria-label="spells-per-day" title="Click to expand" data-i18n-title="showsect-cmd" value="1" checked />
							<h3 class="sheet-clickheader sheet-showsect"><label title="Click to expand" data-i18n-title="showsect-cmd" data-i18n-aria-label="showsect-cmd" data-i18n="spells-per-day">Spells Per Day</label></h3>
							<div class="sheet-h3-section sheet-spells-per-day">
								<div style="display:inline;margin-left:.5em;margin-right:.5em;" role="radiogroup" >
									<span data-i18n="casting-type" data-i18n-title="future-use" data-i18n-aria-label="future-use">Casting Type:</span>
									<label><input class="sheet-boldlabel-check" type="radio" name="attr_spellclass-2-casting_type" value="1" title="@{spellclass-2-casting_type}" /><b><span data-i18n-title="display-spells-known" data-i18n-aria-label="display-spells-known" data-i18n="spontaneous"> Spontaneous</span></b></label>
									<label><input class="sheet-boldlabel-check" type="radio" name="attr_spellclass-2-casting_type" value="2" title="@{spellclass-2-casting_type}" checked /><b><span data-i18n="prepared"> Prepared</span></b></label>
								</div>
								<input type="checkbox" value="1" class="sheet-subsect2-show sheet-sect3-show sheet-noshow" name="attr_spellclass-2-casting_type" role="presentation" aria-label="spontaneous" />
								<input type="checkbox" value="2" class="sheet-subsect3-show sheet-sect3-show sheet-noshow" name="attr_spellclass-2-casting_type" role="presentation" aria-label="prepared" />
								<label style="margin-left:.5em;" class="sheet-sect3"><input class="sheet-selectedlabel-check" type="checkbox" name="attr_spellclass-2-hide_unprepared" value="1" title="@{spellclass-2-hide_unprepared}" /><b data-i18n-title="prepared-spells-explanation" data-i18n-aria-label="prepared-spells-explanation" data-i18n="spellbook-only-prepared-spells"> Show only spells with 'uses' in spellbook</b></label>
								<label style="margin-left:.5em;" class="sheet-sect3"><input class="sheet-selectedlabel-check" type="checkbox" name="attr_spellclass-2-show_domain_spells" value="1" title="@{spellclass-2-show_domain_spells}" /><b data-i18n-title="domain-spells-explanation" data-i18n-aria-label="domain-spells-explanation" data-i18n="always-show-domain-spells"> Always show spells marked 'domain' in spellbook menu</b></label>
								<label style="margin-left:.5em;"><input class="sheet-selectedlabel-check" type="checkbox" name="attr_total_spells_manually" value="1" title="@{total_spells_manually}" /><b data-i18n-title="add-custom-column" data-i18n-aria-label="total-spells-manually" data-i18n="total-spells-manually">Total Spells Manually</b></label>
								<input type="checkbox" value="1" class="sheet-noshow sheet-subsect-show sheet-subsect-show-inverse" name="attr_total_spells_manually" role="presentation" />
								<div class="sheet-table">
									<span class="sheet-table-name" data-i18n="spells-per-day">Spells Per Day</span>
									<div class="sheet-table-group-head">
										<div class="sheet-table-row">
											<span class="sheet-table-header" data-i18n="save-difficulty-class">Save DC</span>
											<span class="sheet-table-header sheet-right-border" data-i18n="level-abbrv">Lvl</span>
											<span class="sheet-table-header sheet-sect">#</span>											
											<span class="sheet-table-header sheet-sect3 sheet-sect-inverse" data-i18n-title="sum-prepared-from-spells" data-i18n-aria-label="sum-prepared-from-spells" data-i18n="number-prepared-abbrv"># Prep'd</span>
											<span class="sheet-table-header sheet-sect2 sheet-sect-inverse" data-i18n-title="sum-uses-spells" data-i18n-aria-label="sum-uses-spells" data-i18n="number-used"># Used</span>
											<span class="sheet-table-header sheet-divider"></span>
											<span class="sheet-table-header" data-i18n="spells-per-day">Spells/Day</span>
											<span class="sheet-table-header sheet-divider"></span>
											<span class="sheet-table-header" data-i18n="base-spells-per-day">Base Spells/Day</span>
											<span class="sheet-table-header sheet-divider"></span>
											<span class="sheet-table-header" data-i18n="bonus-spells">Bonus Spells</span>
											<span class="sheet-table-header sheet-divider sheet-advanced-spell-option"></span>
											<span class="sheet-table-header sheet-advanced-spell-option sheet-entry-med sheet-entry-custom-header"><input class="sheet-entry-custom-header sheet-entry-med" name="attr_spellclass-2-user_defined_column" title="@{spellclass-2-user_defined_column}" type="text" value="" data-i18n-placeholder="user-defined" placeholder="User Defined" /></span>
											<span class="sheet-table-header sheet-sect2 sheet-left-border" data-i18n="spells-known">Spells Known</span>
											<span class="sheet-table-header sheet-sect2" data-i18n="total-listed">Total spells in list</span>
											<span class="sheet-table-header sheet-advanced-spell-option sheet-entry-med sheet-entry-custom-header sheet-left-border"><input class="sheet-entry-custom-header sheet-entry-med" name="attr_spellclass-2-user_defined_column2" title="@{spellclass-2-user_defined_column2}" type="text" value="" data-i18n-placeholder="user-defined" placeholder="User Defined" /></span>											
										</div>
									</div>
									<div class="sheet-table-group">
										<div class="sheet-table-row">
											<span class="sheet-table-cell"><input title="@{spellclass-2-level-0-savedc}" type="number" name="attr_spellclass-2-level-0-savedc" value="10" class="sheet-calc" readonly /></span>
											<span class="sheet-table-cell">0</span>
											<span class="sheet-table-cell sheet-sect"><input title="@{spellclass-2-level-0-spells-per-day}" type="number" name="attr_spellclass-2-level-0-spells-per-day" value="0" /></span>
											<span class="sheet-table-cell sheet-sect3 sheet-sect-inverse"><input title="@{spellclass-2-level-0-spells-prepared}" type="number" name="attr_spellclass-2-level-0-spells-prepared" value="0" class="sheet-calc" readonly /></span>
											<span class="sheet-table-cell sheet-sect2 sheet-sect-inverse"><input title="@{spellclass-2-level-0-spells-per-day}" type="number" name="attr_spellclass-2-level-0-spells-per-day" value="0" class="sheet-calc" readonly /></span>
											<span class="sheet-divider">/</span>
											<span class="sheet-table-cell"><input title="@{spellclass-2-level-0-spells-per-day|max}" type="number" name="attr_spellclass-2-level-0-spells-per-day_max" value="0" class="sheet-calc" readonly /></span>
											<span class="sheet-divider">=</span>
											<span class="sheet-table-cell"><input title="@{spellclass-2-level-0-class}" type="text" name="attr_spellclass-2-level-0-class" value="" placeholder="-" class="sheet-number" /></span>
											<span class="sheet-divider">+</span>
											<span class="sheet-table-cell sheet-ability-column">
												<select class="sheet-select-small" title="@{Concentration-2-ability}" name="attr_Concentration-2-ability"  >
													<option value="0" data-i18n="select-one-default" selected>&#8226;None</option>
													<option value="@{STR-mod}" data-i18n="strength-abbrv">STR</option>
													<option value="@{DEX-mod}" data-i18n="dexterity-abbrv">DEX</option>
													<option value="@{CON-mod}" data-i18n="constitution-abbrv">CON</option>
													<option value="@{INT-mod}" data-i18n="intelligence-abbrv">INT</option>
													<option value="@{WIS-mod}" data-i18n="wisdom-abbrv">WIS</option>
													<option value="@{CHA-mod}" data-i18n="charisma-abbrv">CHA</option>
												</select>
											</span>
											<span class="sheet-divider sheet-advanced-spell-option">+</span>
											<span class="sheet-table-cell sheet-advanced-spell-option"><input title="@{spellclass-2-level-0-misc}" type="number" name="attr_spellclass-2-level-0-misc" value="0" /></span>
											<span class="sheet-table-cell sheet-sect2 sheet-left-border"><input title="@{spellclass-2-level-0-spells-known}" type="number" name="attr_spellclass-2-level-0-spells-known" value="0" /></span>
											<span class="sheet-table-cell sheet-sect2"><input title="@{spellclass-2-level-0-total-listed}" type="number" name="attr_spellclass-2-level-0-total-listed" value="0" class="sheet-calc" readonly /></span>
											<span class="sheet-table-cell sheet-advanced-spell-option sheet-left-border"><input title="@{spellclass-2-level-0-user}" type="number" name="attr_spellclass-2-level-0-user" value="0" /></span>
										</div>
										<div class="sheet-table-row">
											<span class="sheet-table-cell"><input title="@{spellclass-2-level-1-savedc}" type="number" name="attr_spellclass-2-level-1-savedc" value="11" class="sheet-calc" readonly /></span>
											<span class="sheet-table-cell" >1st</span>
											<span class="sheet-table-cell sheet-sect"><input title="@{spellclass-2-level-1-spells-per-day}" type="number" name="attr_spellclass-2-level-1-spells-per-day" value="0" /></span>
											<span class="sheet-table-cell sheet-sect3 sheet-sect-inverse"><input title="@{spellclass-2-level-1-spells-prepared}" type="number" name="attr_spellclass-2-level-1-spells-prepared" value="0" class="sheet-calc" readonly /></span>
											<span class="sheet-table-cell sheet-sect2 sheet-sect-inverse"><input title="@{spellclass-2-level-1-spells-per-day}" type="number" name="attr_spellclass-2-level-1-spells-per-day" value="0" class="sheet-calc" readonly /></span>
											<span class="sheet-divider">/</span>
											<span class="sheet-table-cell"><input title="@{spellclass-2-level-1-spells-per-day|max}" type="number" name="attr_spellclass-2-level-1-spells-per-day_max" value="0" class="sheet-calc" readonly /></span>
											<span class="sheet-divider">=</span>
											<span class="sheet-table-cell"><input title="@{spellclass-2-level-1-class}" type="text" name="attr_spellclass-2-level-1-class" value="" placeholder="-" class="sheet-number" /></span>
											<span class="sheet-divider">+</span>
											<span class="sheet-table-cell"><input title="@{spellclass-2-level-1-bonus}" type="number" name="attr_spellclass-2-level-1-bonus" value="0" class="sheet-calc" readonly /></span>
											<span class="sheet-divider sheet-advanced-spell-option">+</span>
											<span class="sheet-table-cell sheet-advanced-spell-option"><input title="@{spellclass-2-level-1-misc}" type="number" name="attr_spellclass-2-level-1-misc" value="0" /></span>
											<span class="sheet-table-cell sheet-sect2 sheet-left-border"><input title="@{spellclass-2-level-1-spells-known}" type="number" name="attr_spellclass-2-level-1-spells-known" value="0" /></span>
											<span class="sheet-table-cell sheet-sect2"><input title="@{spellclass-2-level-1-total-listed}" type="number" name="attr_spellclass-2-level-1-total-listed" value="0" class="sheet-calc" readonly /></span>
											<span class="sheet-table-cell sheet-advanced-spell-option sheet-left-border"><input title="@{spellclass-2-level-1-user}" type="number" name="attr_spellclass-2-level-1-user" value="0" /></span>
										</div>
										<div class="sheet-table-row">
											<span class="sheet-table-cell"><input title="@{spellclass-2-level-2-savedc}" type="number" name="attr_spellclass-2-level-2-savedc" value="22" class="sheet-calc" readonly /></span>
											<span class="sheet-table-cell" data-i18n="2-ordinal">2nd</span>
											<span class="sheet-table-cell sheet-sect"><input title="@{spellclass-2-level-2-spells-per-day}" type="number" name="attr_spellclass-2-level-2-spells-per-day" value="0" /></span>
											<span class="sheet-table-cell sheet-sect3 sheet-sect-inverse"><input title="@{spellclass-2-level-2-spells-prepared}" type="number" name="attr_spellclass-2-level-2-spells-prepared" value="0" class="sheet-calc" readonly /></span>
											<span class="sheet-table-cell sheet-sect2 sheet-sect-inverse"><input title="@{spellclass-2-level-2-spells-per-day}" type="number" name="attr_spellclass-2-level-2-spells-per-day" value="0" class="sheet-calc" readonly /></span>
											<span class="sheet-divider">/</span>
											<span class="sheet-table-cell"><input title="@{spellclass-2-level-2-spells-per-day|max}" type="number" name="attr_spellclass-2-level-2-spells-per-day_max" value="0" class="sheet-calc" readonly /></span>
											<span class="sheet-divider">=</span>
											<span class="sheet-table-cell"><input title="@{spellclass-2-level-2-class}" type="text" name="attr_spellclass-2-level-2-class" value="" placeholder="-" class="sheet-number" /></span>
											<span class="sheet-divider">+</span>
											<span class="sheet-table-cell"><input title="@{spellclass-2-level-2-bonus}" type="number" name="attr_spellclass-2-level-2-bonus" value="0" class="sheet-calc" readonly /></span>
											<span class="sheet-divider sheet-advanced-spell-option">+</span>
											<span class="sheet-table-cell sheet-advanced-spell-option"><input title="@{spellclass-2-level-2-misc}" type="number" name="attr_spellclass-2-level-2-misc" value="0" /></span>
											<span class="sheet-table-cell sheet-sect2 sheet-left-border"><input title="@{spellclass-2-level-2-spells-known}" type="number" name="attr_spellclass-2-level-2-spells-known" value="0" /></span>
											<span class="sheet-table-cell sheet-sect2"><input title="@{spellclass-2-level-2-total-listed}" type="number" name="attr_spellclass-2-level-2-total-listed" value="0" class="sheet-calc" readonly /></span>
											<span class="sheet-table-cell sheet-advanced-spell-option sheet-left-border"><input title="@{spellclass-2-level-2-user}" type="number" name="attr_spellclass-2-level-2-user" value="0" /></span>
										</div>
										<div class="sheet-table-row">
											<span class="sheet-table-cell"><input title="@{spellclass-2-level-3-savedc}" type="number" name="attr_spellclass-2-level-3-savedc" value="33" class="sheet-calc" readonly /></span>
											<span class="sheet-table-cell" data-i18n="3-ordinal">3rd</span>
											<span class="sheet-table-cell sheet-sect"><input title="@{spellclass-2-level-3-spells-per-day}" type="number" name="attr_spellclass-2-level-3-spells-per-day" value="0" /></span>
											<span class="sheet-table-cell sheet-sect3 sheet-sect-inverse"><input title="@{spellclass-2-level-3-spells-prepared}" type="number" name="attr_spellclass-2-level-3-spells-prepared" value="0" class="sheet-calc" readonly /></span>
											<span class="sheet-table-cell sheet-sect2 sheet-sect-inverse"><input title="@{spellclass-2-level-3-spells-per-day}" type="number" name="attr_spellclass-2-level-3-spells-per-day" value="0" class="sheet-calc" readonly /></span>
											<span class="sheet-divider">/</span>
											<span class="sheet-table-cell"><input title="@{spellclass-2-level-3-spells-per-day|max}" type="number" name="attr_spellclass-2-level-3-spells-per-day_max" value="0" class="sheet-calc" readonly /></span>
											<span class="sheet-divider">=</span>
											<span class="sheet-table-cell"><input title="@{spellclass-2-level-3-class}" type="text" name="attr_spellclass-2-level-3-class" value="" placeholder="-" class="sheet-number" /></span>
											<span class="sheet-divider">+</span>
											<span class="sheet-table-cell"><input title="@{spellclass-2-level-3-bonus}" type="number" name="attr_spellclass-2-level-3-bonus" value="0" class="sheet-calc" readonly /></span>
											<span class="sheet-divider sheet-advanced-spell-option">+</span>
											<span class="sheet-table-cell sheet-advanced-spell-option"><input title="@{spellclass-2-level-3-misc}" type="number" name="attr_spellclass-2-level-3-misc" value="0" /></span>
											<span class="sheet-table-cell sheet-sect2 sheet-left-border"><input title="@{spellclass-2-level-3-spells-known}" type="number" name="attr_spellclass-2-level-3-spells-known" value="0" /></span>
											<span class="sheet-table-cell sheet-sect2"><input title="@{spellclass-2-level-3-total-listed}" type="number" name="attr_spellclass-2-level-3-total-listed" value="0" class="sheet-calc" readonly /></span>
											<span class="sheet-table-cell sheet-advanced-spell-option sheet-left-border"><input title="@{spellclass-2-level-3-user}" type="number" name="attr_spellclass-2-level-3-user" value="0" /></span>
										</div>
										<div class="sheet-table-row">
											<span class="sheet-table-cell"><input title="@{spellclass-2-level-4-savedc}" type="number" name="attr_spellclass-2-level-4-savedc" value="44" class="sheet-calc" readonly /></span>
											<span class="sheet-table-cell" data-i18n="4-ordinal">4th</span>
											<span class="sheet-table-cell sheet-sect"><input title="@{spellclass-2-level-4-spells-per-day}" type="number" name="attr_spellclass-2-level-4-spells-per-day" value="0" /></span>
											<span class="sheet-table-cell sheet-sect3 sheet-sect-inverse"><input title="@{spellclass-2-level-4-spells-prepared}" type="number" name="attr_spellclass-2-level-4-spells-prepared" value="0" class="sheet-calc" readonly /></span>
											<span class="sheet-table-cell sheet-sect2 sheet-sect-inverse"><input title="@{spellclass-2-level-4-spells-per-day}" type="number" name="attr_spellclass-2-level-4-spells-per-day" value="0" class="sheet-calc" readonly /></span>
											<span class="sheet-divider">/</span>
											<span class="sheet-table-cell"><input title="@{spellclass-2-level-4-spells-per-day|max}" type="number" name="attr_spellclass-2-level-4-spells-per-day_max" value="0" class="sheet-calc" readonly /></span>
											<span class="sheet-divider">=</span>
											<span class="sheet-table-cell"><input title="@{spellclass-2-level-4-class}" type="text" name="attr_spellclass-2-level-4-class" value="" placeholder="-" class="sheet-number" /></span>
											<span class="sheet-divider">+</span>
											<span class="sheet-table-cell"><input title="@{spellclass-2-level-4-bonus}" type="number" name="attr_spellclass-2-level-4-bonus" value="0" class="sheet-calc" readonly /></span>
											<span class="sheet-divider sheet-advanced-spell-option">+</span>
											<span class="sheet-table-cell sheet-advanced-spell-option"><input title="@{spellclass-2-level-4-misc}" type="number" name="attr_spellclass-2-level-4-misc" value="0" /></span>
											<span class="sheet-table-cell sheet-sect2 sheet-left-border"><input title="@{spellclass-2-level-4-spells-known}" type="number" name="attr_spellclass-2-level-4-spells-known" value="0" /></span>
											<span class="sheet-table-cell sheet-sect2"><input title="@{spellclass-2-level-4-total-listed}" type="number" name="attr_spellclass-2-level-4-total-listed" value="0" class="sheet-calc" readonly /></span>
											<span class="sheet-table-cell sheet-advanced-spell-option sheet-left-border"><input title="@{spellclass-2-level-4-user}" type="number" name="attr_spellclass-2-level-4-user" value="0" /></span>
										</div>
										<div class="sheet-table-row">
											<span class="sheet-table-cell"><input title="@{spellclass-2-level-5-savedc}" type="number" name="attr_spellclass-2-level-5-savedc" value="55" class="sheet-calc" readonly /></span>
											<span class="sheet-table-cell" data-i18n="5-ordinal">5th</span>
											<span class="sheet-table-cell sheet-sect"><input title="@{spellclass-2-level-5-spells-per-day}" type="number" name="attr_spellclass-2-level-5-spells-per-day" value="0" /></span>
											<span class="sheet-table-cell sheet-sect3 sheet-sect-inverse"><input title="@{spellclass-2-level-5-spells-prepared}" type="number" name="attr_spellclass-2-level-5-spells-prepared" value="0" class="sheet-calc" readonly /></span>
											<span class="sheet-table-cell sheet-sect2 sheet-sect-inverse"><input title="@{spellclass-2-level-5-spells-per-day}" type="number" name="attr_spellclass-2-level-5-spells-per-day" value="0" class="sheet-calc" readonly /></span>
											<span class="sheet-divider">/</span>
											<span class="sheet-table-cell"><input title="@{spellclass-2-level-5-spells-per-day|max}" type="number" name="attr_spellclass-2-level-5-spells-per-day_max" value="0" class="sheet-calc" readonly /></span>
											<span class="sheet-divider">=</span>
											<span class="sheet-table-cell"><input title="@{spellclass-2-level-5-class}" type="text" name="attr_spellclass-2-level-5-class" value="" placeholder="-" class="sheet-number" /></span>
											<span class="sheet-divider">+</span>
											<span class="sheet-table-cell"><input title="@{spellclass-2-level-5-bonus}" type="number" name="attr_spellclass-2-level-5-bonus" value="0" class="sheet-calc" readonly /></span>
											<span class="sheet-divider sheet-advanced-spell-option">+</span>
											<span class="sheet-table-cell sheet-advanced-spell-option"><input title="@{spellclass-2-level-5-misc}" type="number" name="attr_spellclass-2-level-5-misc" value="0" /></span>
											<span class="sheet-table-cell sheet-sect2 sheet-left-border"><input title="@{spellclass-2-level-5-spells-known}" type="number" name="attr_spellclass-2-level-5-spells-known" value="0" /></span>
											<span class="sheet-table-cell sheet-sect2"><input title="@{spellclass-2-level-5-total-listed}" type="number" name="attr_spellclass-2-level-5-total-listed" value="0" class="sheet-calc" readonly /></span>
											<span class="sheet-table-cell sheet-advanced-spell-option sheet-left-border"><input title="@{spellclass-2-level-5-user}" type="number" name="attr_spellclass-2-level-5-user" value="0" /></span>
										</div>
										<div class="sheet-table-row">
											<span class="sheet-table-cell"><input title="@{spellclass-2-level-6-savedc}" type="number" name="attr_spellclass-2-level-6-savedc" value="66" class="sheet-calc" readonly /></span>
											<span class="sheet-table-cell" data-i18n="6-ordinal">6th</span>
											<span class="sheet-table-cell sheet-sect"><input title="@{spellclass-2-level-6-spells-per-day}" type="number" name="attr_spellclass-2-level-6-spells-per-day" value="0" /></span>
											<span class="sheet-table-cell sheet-sect3 sheet-sect-inverse"><input title="@{spellclass-2-level-6-spells-prepared}" type="number" name="attr_spellclass-2-level-6-spells-prepared" value="0" class="sheet-calc" readonly /></span>
											<span class="sheet-table-cell sheet-sect2 sheet-sect-inverse"><input title="@{spellclass-2-level-6-spells-per-day}" type="number" name="attr_spellclass-2-level-6-spells-per-day" value="0" class="sheet-calc" readonly /></span>
											<span class="sheet-divider">/</span>
											<span class="sheet-table-cell"><input title="@{spellclass-2-level-6-spells-per-day|max}" type="number" name="attr_spellclass-2-level-6-spells-per-day_max" value="0" class="sheet-calc" readonly /></span>
											<span class="sheet-divider">=</span>
											<span class="sheet-table-cell"><input title="@{spellclass-2-level-6-class}" type="text" name="attr_spellclass-2-level-6-class" value="" placeholder="-" class="sheet-number" /></span>
											<span class="sheet-divider">+</span>
											<span class="sheet-table-cell"><input title="@{spellclass-2-level-6-bonus}" type="number" name="attr_spellclass-2-level-6-bonus" value="0" class="sheet-calc" readonly /></span>
											<span class="sheet-divider sheet-advanced-spell-option">+</span>
											<span class="sheet-table-cell sheet-advanced-spell-option"><input title="@{spellclass-2-level-6-misc}" type="number" name="attr_spellclass-2-level-6-misc" value="0" /></span>
											<span class="sheet-table-cell sheet-sect2 sheet-left-border"><input title="@{spellclass-2-level-6-spells-known}" type="number" name="attr_spellclass-2-level-6-spells-known" value="0" /></span>
											<span class="sheet-table-cell sheet-sect2"><input title="@{spellclass-2-level-6-total-listed}" type="number" name="attr_spellclass-2-level-6-total-listed" value="0" class="sheet-calc" readonly /></span>
											<span class="sheet-table-cell sheet-advanced-spell-option sheet-left-border"><input title="@{spellclass-2-level-6-user}" type="number" name="attr_spellclass-2-level-6-user" value="0" /></span>
										</div>
										<div class="sheet-table-row">
											<span class="sheet-table-cell"><input title="@{spellclass-2-level-7-savedc}" type="number" name="attr_spellclass-2-level-7-savedc" value="77" class="sheet-calc" readonly /></span>
											<span class="sheet-table-cell" data-i18n="7-ordinal">7th</span>
											<span class="sheet-table-cell sheet-sect"><input title="@{spellclass-2-level-7-spells-per-day}" type="number" name="attr_spellclass-2-level-7-spells-per-day" value="0" /></span>
											<span class="sheet-table-cell sheet-sect3 sheet-sect-inverse"><input title="@{spellclass-2-level-7-spells-prepared}" type="number" name="attr_spellclass-2-level-7-spells-prepared" value="0" class="sheet-calc" readonly /></span>
											<span class="sheet-table-cell sheet-sect2 sheet-sect-inverse"><input title="@{spellclass-2-level-7-spells-per-day}" type="number" name="attr_spellclass-2-level-7-spells-per-day" value="0" class="sheet-calc" readonly /></span>
											<span class="sheet-divider">/</span>
											<span class="sheet-table-cell"><input title="@{spellclass-2-level-7-spells-per-day|max}" type="number" name="attr_spellclass-2-level-7-spells-per-day_max" value="0" class="sheet-calc" readonly /></span>
											<span class="sheet-divider">=</span>
											<span class="sheet-table-cell"><input title="@{spellclass-2-level-7-class}" type="text" name="attr_spellclass-2-level-7-class" value="" placeholder="-" class="sheet-number" /></span>
											<span class="sheet-divider">+</span>
											<span class="sheet-table-cell"><input title="@{spellclass-2-level-7-bonus}" type="number" name="attr_spellclass-2-level-7-bonus" value="0" class="sheet-calc" readonly /></span>
											<span class="sheet-divider sheet-advanced-spell-option">+</span>
											<span class="sheet-table-cell sheet-advanced-spell-option"><input title="@{spellclass-2-level-7-misc}" type="number" name="attr_spellclass-2-level-7-misc" value="0" /></span>
											<span class="sheet-table-cell sheet-sect2 sheet-left-border"><input title="@{spellclass-2-level-7-spells-known}" type="number" name="attr_spellclass-2-level-7-spells-known" value="0" /></span>
											<span class="sheet-table-cell sheet-sect2"><input title="@{spellclass-2-level-7-total-listed}" type="number" name="attr_spellclass-2-level-7-total-listed" value="0" class="sheet-calc" readonly /></span>
											<span class="sheet-table-cell sheet-advanced-spell-option sheet-left-border"><input title="@{spellclass-2-level-7-user}" type="number" name="attr_spellclass-2-level-7-user" value="0" /></span>
										</div>
										<div class="sheet-table-row">
											<span class="sheet-table-cell"><input title="@{spellclass-2-level-8-savedc}" type="number" name="attr_spellclass-2-level-8-savedc" value="88" class="sheet-calc" readonly /></span>
											<span class="sheet-table-cell" data-i18n="8-ordinal">8th</span>
											<span class="sheet-table-cell sheet-sect"><input title="@{spellclass-2-level-8-spells-per-day}" type="number" name="attr_spellclass-2-level-8-spells-per-day" value="0" /></span>
											<span class="sheet-table-cell sheet-sect3 sheet-sect-inverse"><input title="@{spellclass-2-level-8-spells-prepared}" type="number" name="attr_spellclass-2-level-8-spells-prepared" value="0" class="sheet-calc" readonly /></span>
											<span class="sheet-table-cell sheet-sect2 sheet-sect-inverse"><input title="@{spellclass-2-level-8-spells-per-day}" type="number" name="attr_spellclass-2-level-8-spells-per-day" value="0" class="sheet-calc" readonly /></span>
											<span class="sheet-divider">/</span>
											<span class="sheet-table-cell"><input title="@{spellclass-2-level-8-spells-per-day|max}" type="number" name="attr_spellclass-2-level-8-spells-per-day_max" value="0" class="sheet-calc" readonly /></span>
											<span class="sheet-divider">=</span>
											<span class="sheet-table-cell"><input title="@{spellclass-2-level-8-class}" type="text" name="attr_spellclass-2-level-8-class" value="" placeholder="-" class="sheet-number" /></span>
											<span class="sheet-divider">+</span>
											<span class="sheet-table-cell"><input title="@{spellclass-2-level-8-bonus}" type="number" name="attr_spellclass-2-level-8-bonus" value="0" class="sheet-calc" readonly /></span>
											<span class="sheet-divider sheet-advanced-spell-option">+</span>
											<span class="sheet-table-cell sheet-advanced-spell-option"><input title="@{spellclass-2-level-8-misc}" type="number" name="attr_spellclass-2-level-8-misc" value="0" /></span>
											<span class="sheet-table-cell sheet-sect2 sheet-left-border"><input title="@{spellclass-2-level-8-spells-known}" type="number" name="attr_spellclass-2-level-8-spells-known" value="0" /></span>
											<span class="sheet-table-cell sheet-sect2"><input title="@{spellclass-2-level-8-total-listed}" type="number" name="attr_spellclass-2-level-8-total-listed" value="0" class="sheet-calc" readonly /></span>
											<span class="sheet-table-cell sheet-advanced-spell-option sheet-left-border"><input title="@{spellclass-2-level-8-user}" type="number" name="attr_spellclass-2-level-8-user" value="0" /></span>
										</div>
										<div class="sheet-table-row">
											<span class="sheet-table-cell"><input title="@{spellclass-2-level-9-savedc}" type="number" name="attr_spellclass-2-level-9-savedc" value="99" class="sheet-calc" readonly /></span>
											<span class="sheet-table-cell" data-i18n="9-ordinal">9th</span>
											<span class="sheet-table-cell sheet-sect"><input title="@{spellclass-2-level-9-spells-per-day}" type="number" name="attr_spellclass-2-level-9-spells-per-day" value="0" /></span>
											<span class="sheet-table-cell sheet-sect3 sheet-sect-inverse"><input title="@{spellclass-2-level-9-spells-prepared}" type="number" name="attr_spellclass-2-level-9-spells-prepared" value="0" class="sheet-calc" readonly /></span>
											<span class="sheet-table-cell sheet-sect2 sheet-sect-inverse"><input title="@{spellclass-2-level-9-spells-per-day}" type="number" name="attr_spellclass-2-level-9-spells-per-day" value="0" class="sheet-calc" readonly /></span>
											<span class="sheet-divider">/</span>
											<span class="sheet-table-cell"><input title="@{spellclass-2-level-9-spells-per-day|max}" type="number" name="attr_spellclass-2-level-9-spells-per-day_max" value="0" class="sheet-calc" readonly /></span>
											<span class="sheet-divider">=</span>
											<span class="sheet-table-cell"><input title="@{spellclass-2-level-9-class}" type="text" name="attr_spellclass-2-level-9-class" value="" placeholder="-" class="sheet-number" /></span>
											<span class="sheet-divider">+</span>
											<span class="sheet-table-cell"><input title="@{spellclass-2-level-9-bonus}" type="number" name="attr_spellclass-2-level-9-bonus" value="0" class="sheet-calc" readonly /></span>
											<span class="sheet-divider sheet-advanced-spell-option">+</span>
											<span class="sheet-table-cell sheet-advanced-spell-option"><input title="@{spellclass-2-level-9-misc}" type="number" name="attr_spellclass-2-level-9-misc" value="0" /></span>
											<span class="sheet-table-cell sheet-sect2 sheet-left-border"><input title="@{spellclass-2-level-9-spells-known}" type="number" name="attr_spellclass-2-level-9-spells-known" value="0" /></span>
											<span class="sheet-table-cell sheet-sect2"><input title="@{spellclass-2-level-9-total-listed}" type="number" name="attr_spellclass-2-level-9-total-listed" value="0" class="sheet-calc" readonly /></span>
											<span class="sheet-table-cell sheet-advanced-spell-option sheet-left-border"><input title="@{spellclass-2-level-9-user}" type="number" name="attr_spellclass-2-level-9-user" value="0" /></span>
										</div>
									</div>
								</div>
							</div>
						</div>
						<div class="sheet-cheat"></div>
						<input class="sheet-showarrow sheet-h3arrow" type="checkbox" name="attr_spellclass-2-domains-show" data-i18n-aria-label="domains" title="Click to expand" data-i18n-title="showsect-cmd" value="1" checked />
						<h3 class="sheet-clickheader sheet-showsect"><label title="Click to expand" data-i18n-title="showsect-cmd" data-i18n-aria-label="showsect-cmd" data-i18n="domains">Domains</label></h3>
						<div class="sheet-h3-section sheet-domains sheet-wide-readonly">
							<div class="sheet-table sheet-hasexpandrows">
								<span class="sheet-table-name sheet-secondary-table-name sheet-show-readonly" data-i18n="known-or-special">Known / Specialties</span>
								<div class="sheet-table-row">
									<span class="sheet-table-header" data-i18n="name">Name</span>
									<span class="sheet-table-header" data-i18n="type">Type</span>
									<span class="sheet-table-header" data-i18n="bonus">Bonus</span>
									<span class="sheet-table-header" data-i18n="opposition">Opposition</span>
									<span class="sheet-table-header" data-i18n="effect">Effect</span>
								</div>
								<div class="sheet-table-row">
									<span class="sheet-table-cell"><input title="@{spellclass-2-domain-0}" type="text" name="attr_spellclass-2-domain-0" value="" placeholder="Name" data-i18n-placeholder="name" /></span>
									<span class="sheet-table-cell"><input title="@{spellclass-2-domaintype-0}" type="text" name="attr_spellclass-2-domaintype-0" value="" placeholder="(Sub)Domain/School/Bloodline/Patron" data-i18n-placeholder="domain-etc-type-example" /></span>
									<span class="sheet-table-cell"><input title="@{spellclass-2-domainbonus-0}" type="text" name="attr_spellclass-2-domainbonus-0" value="" placeholder="Bonus" data-i18n-placeholder="bonus" /></span>
									<span class="sheet-table-cell"><input title="@{spellclass-2-oppositionschool-0}" type="text" name="attr_spellclass-2-oppositionschool-0" value="" placeholder="Name" data-i18n-placeholder="name" /></span>
									<span class="sheet-table-cell"><input title="@{spellclass-2-oppositioneffect-0}" type="text" name="attr_spellclass-2-oppositioneffect-0" value="" placeholder="Cost double or prohibited" data-i18n-placeholder="opposition-school-example" /></span>
								</div>
								<input type="checkbox" class="sheet-showarrow sheet-sect-show sheet-expand-arrow sheet-expand1" name="attr_domain02_show" value="1" title="Show more domains/schools" aria-label="Show more domains/schools" /><span class="sheet-showsect"></span>
								<div class="sheet-table-row sheet-sect">
									<span class="sheet-table-cell"><input title="@{spellclass-2-domain-1}" type="text" name="attr_spellclass-2-domain-1" value="" placeholder="Name" data-i18n-placeholder="name" /></span>
									<span class="sheet-table-cell"><input title="@{spellclass-2-domaintype-1}" type="text" name="attr_spellclass-2-domaintype-1" value="" placeholder="(Sub)Domain/School/Bloodline/Patron" data-i18n-placeholder="domain-etc-type-example" /></span>
									<span class="sheet-table-cell"><input title="@{spellclass-2-domainbonus-1}" type="text" name="attr_spellclass-2-domainbonus-1" value="" placeholder="Bonus" data-i18n-placeholder="bonus" /></span>
									<span class="sheet-table-cell"><input title="@{spellclass-2-oppositionschool-1}" type="text" name="attr_spellclass-2-oppositionschool-1" value="" placeholder="Name" data-i18n-placeholder="name" /></span>
									<span class="sheet-table-cell"><input title="@{spellclass-2-oppositioneffect-1}" type="text" name="attr_spellclass-2-oppositioneffect-1" value="" placeholder="Cost double or prohibited" data-i18n-placeholder="opposition-school-example" /></span>
								</div>
								<input type="checkbox" class="sheet-showarrow sheet-sect2-show sheet-sect sheet-expand-arrow sheet-expand2" name="attr_domain03_show" value="1" title="Show more domains/schools" aria-label="Show more domains/schools" /><span class="sheet-showsect sheet-sect"></span>
								<div class="sheet-table-row sheet-sect sheet-sect2">
									<span class="sheet-table-cell"><input title="@{spellclass-2-domain-2}" type="text" name="attr_spellclass-2-domain-2" value="" placeholder="Name" data-i18n-placeholder="name" /></span>
									<span class="sheet-table-cell"><input title="@{spellclass-2-domaintype-2}" type="text" name="attr_spellclass-2-domaintype-2" value="" placeholder="(Sub)Domain/School/Bloodline/Patron" data-i18n-placeholder="domain-etc-type-example" /></span>
									<span class="sheet-table-cell"><input title="@{spellclass-2-domainbonus-2}" type="text" name="attr_spellclass-2-domainbonus-2" value="" placeholder="Bonus" data-i18n-placeholder="bonus" /></span>
									<span class="sheet-table-cell"><input title="@{spellclass-2-oppositionschool-2}" type="text" name="attr_spellclass-2-oppositionschool-2" value="" placeholder="Name" data-i18n-placeholder="name" /></span>
									<span class="sheet-table-cell"><input title="@{spellclass-2-oppositioneffect-2}" type="text" name="attr_spellclass-2-oppositioneffect-2" value="" placeholder="Cost double or prohibited" data-i18n-placeholder="opposition-school-example" /></span>
								</div>
							</div>
						</div>
					</div>
				</div>
				<div class="sheet-cheat"></div>
				<input class="sheet-showarrow sheet-h2arrow" type="checkbox" name="attr_spelloptions-show" data-i18n-aria-label="spell-roll-options" title="Click to expand" data-i18n-title="showsect-cmd" value="1" checked />
				<h2 class="sheet-clickheader sheet-showsect"><label title="Click to expand" data-i18n-title="showsect-cmd" data-i18n-aria-label="showsect-cmd" data-i18n="spell-roll-options">Spell Roll Options</label></h2>
				<div class="sheet-h2-section sheet-table sheet-spell-options sheet-options sheet-named sheet-hide-readonly">
					<span class="sheet-table-name"><b data-i18n="include-spell-info">Include these attributes with each spell roll?</b></span>				
					<div class="sheet-table-row">
						<span class="sheet-table-cell sheet-small-label"><label><input type="checkbox" class="sheet-boldlabel-check" name="attr_toggle_spell_school_notes" value="1" title="@{toggle_spell_school_notes}" checked /><b title="Include School" data-i18n-title="options-spell-school-title" data-i18n-aria-label="options-spell-school-title" data-i18n="school"> School</b></label></span>
						<span class="sheet-table-cell sheet-small-label"><label><input type="checkbox" class="sheet-boldlabel-check" name="attr_toggle_spell_level_notes" value="1" title="@{toggle_spell_level_notes}" checked /><b title="Include Class/Level" data-i18n-title="options-spell-level-title" data-i18n-aria-label="options-spell-level-title" data-i18n="spell-level"> Spell Level</b></label></span>
						<span class="sheet-table-cell sheet-small-label"><label><input type="checkbox" class="sheet-boldlabel-check" name="attr_toggle_spell_casting_time_notes" value="1" title="@{toggle_spell_casting_time_notes}" checked /><b title="Include Casting Time" data-i18n-title="options-spell-casting-time-title" data-i18n-aria-label="options-spell-casting-time-title" data-i18n="casting-time"> Casting Time</b></label></span>
						<span class="sheet-table-cell sheet-small-label"><label><input type="checkbox" class="sheet-boldlabel-check" name="attr_toggle_spell_components_notes" value="1" title="@{toggle_spell_components_notes}" checked /><b title="Include Components" data-i18n-title="options-spell-comp-title" data-i18n-aria-label="options-spell-comp-title" data-i18n="spell-components"> Components</b></label></span>
						<span class="sheet-table-cell sheet-small-label"><label><input type="checkbox" class="sheet-boldlabel-check" name="attr_toggle_spell_range_notes" value="1" title="@{toggle_spell_range_notes}" checked /><b title="Include Range" data-i18n-title="options-range-title" data-i18n-aria-label="options-range-title" data-i18n="range"> Range</b></label></span>
						<span class="sheet-table-cell sheet-small-label"><label><input type="checkbox" class="sheet-boldlabel-check" name="attr_toggle_spell_targets_notes" value="1" title="@{toggle_spell_targets_notes}" checked /><b title="Include Targets/Area" data-i18n-title="options-spell-target-title" data-i18n-aria-label="options-spell-target-title" data-i18n="target"> Target</b></label></span>
					</div>
					<div class="sheet-table-row">
						<span class="sheet-table-cell sheet-small-label"><label><input type="checkbox" class="sheet-boldlabel-check" name="attr_toggle_spell_duration_notes" value="1" title="@{toggle_spell_duration_notes}" checked /><b title="Include Duration" data-i18n-title="options-spell-duration-title" data-i18n-aria-label="options-spell-duration-title" data-i18n="duration"> Duration</b></label></span>
						<span class="sheet-table-cell sheet-small-label"><label><input type="checkbox" class="sheet-boldlabel-check" name="attr_toggle_spell_saving_throw_notes" value="1" title="@{toggle_spell_saving_throw_notes}" checked /><b title="Include Saving Throw" data-i18n-title="options-spell-save-title" data-i18n-aria-label="options-spell-save-title" data-i18n="saving-throw"> Saving Throw</b></label></span>
						<span class="sheet-table-cell sheet-small-label"><label><input type="checkbox" class="sheet-boldlabel-check" name="attr_toggle_spell_dc_notes" value="1" title="@{toggle_spell_dc_notes}" checked /><b title="Include DC" data-i18n-title="options-spell-dc-title" data-i18n-aria-label="options-spell-dc-title" data-i18n="difficulty-class-abbrv"> DC</b></label></span>
						<span class="sheet-table-cell sheet-small-label"><label><input type="checkbox" class="sheet-boldlabel-check" name="attr_toggle_spell_sr_notes" value="1" title="@{toggle_spell_sr_notes}" checked /><b title="Include Spell Resistance" data-i18n-title="options-spell-sr-title" data-i18n-aria-label="options-spell-sr-title" data-i18n="spell-resistance-abbrv"> SR</b></label></span>
						<span class="sheet-table-cell sheet-small-label"><label><input type="checkbox" class="sheet-boldlabel-check" name="attr_toggle_spell_description_notes" value="1" title="@{toggle_spell_description_notes}" checked /><b title="Include Description" data-i18n-title="options-spell-desc-title" data-i18n-aria-label="options-spell-desc-title" data-i18n="description"> Description</b></label></span>
						<span class="sheet-table-cell sheet-small-label"><label><input type="checkbox" class="sheet-boldlabel-check" name="attr_toggle_spell_spell_fail_check" value="1" title="@{toggle_spell_spell_fail_check}" checked /><b title="Include Spell Failure Check" data-i18n-title="options-spell-spellfail-chk-title" data-i18n-aria-label="options-spell-spellfail-chk-title" data-i18n="spell-failure-chk"> Spell Failure Check</b></label></span>
					</div>
					<div class="sheet-table-row">
						<span class="sheet-table-cell sheet-small-label"><label><input type="checkbox" class="sheet-boldlabel-check" name="attr_toggle_spell_casterlevel_notes" value="1" title="@{toggle_spell_casterlevel_notes}" checked /><b title="Include Caster Level" data-i18n-title="options-spell-caster-level-title" data-i18n-aria-label="options-spell-caster-level-title" data-i18n="caster-level"> Caster Level</b></label></span>
						<span class="sheet-table-cell sheet-small-label"><label><input type="checkbox" class="sheet-boldlabel-check" name="attr_toggle_spell_casterlevel_check" value="1" title="@{toggle_spell_casterlevel_check}" checked /><b title="Roll Caster Level Check" data-i18n-title="options-spell-caster-level-chk-title" data-i18n-aria-label="options-spell-caster-level-chk-title" data-i18n="caster-level-check"> Caster Level Check</b></label></span>
						<span class="sheet-table-cell sheet-small-label"><label><input type="checkbox" class="sheet-boldlabel-check" name="attr_toggle_spell_concentration_notes" value="1" title="@{toggle_spell_Concentration_notes}" /><b title="Include Concentration" data-i18n-title="options-spell-concentration-title" data-i18n-aria-label="options-spell-concentration-title" data-i18n="concentration"> Concentration</b></label></span>
						<span class="sheet-table-cell sheet-small-label"><label><input type="checkbox" class="sheet-boldlabel-check" name="attr_toggle_spell_concentration_check" value="1" title="@{toggle_spell_Concentration_check}" /><b title="Roll Concentration Check" data-i18n-title="options-spell-concentration-chk-title" data-i18n-aria-label="options-spell-concentration-chk-title" data-i18n="concentration-check"> Concentration Check</b></label></span>
						<span class="sheet-table-cell sheet-small-label"><label><input type="checkbox" class="sheet-boldlabel-check" name="attr_toggle_spell_damage_notes" value="1" title="@{toggle_spell_damage_notes}" checked /><b title="Include Spell damage" data-i18n-title="options-spell-damage-title" data-i18n-aria-label="options-spell-damage-title" data-i18n="spell-damage"> Spell Damage</b></label></span>
						<span class="sheet-table-cell sheet-small-label"><label><input type="checkbox" class="sheet-boldlabel-check" name="attr_toggle_spell_spellnotes_notes" value="1" title="@{toggle_spell_spellnotes_notes}" checked /><b title="Include Spells notes" data-i18n-title="options-spells-notes-title" data-i18n-aria-label="options-spells-notes-title" data-i18n="spells-notes"> Spells Notes</b></label></span>
					</div>
					<div class="sheet-table-row">
						<span class="sheet-table-cell sheet-small-label"><label><input type="checkbox" class="sheet-boldlabel-check" name="attr_spellmenu_groupby_school" value="1" title="@{spellmenu_groupby_school}" /><b title="Group spells by school in spells menu" data-i18n-title="group-by-school-desc" data-i18n-aria-label="group-by-school-desc" data-i18n="group-by-school"> Group by school</b></label></span>
						<span class="sheet-table-cell sheet-small-label"><label><input type="checkbox" class="sheet-boldlabel-check" name="attr_spellmenu_show_uses" value="1" title="@{spellmenu_show_uses}" /><b title="Show # spells used per day in spells menu" data-i18n-title="show-uses-spell-desc" data-i18n-aria-label="show-uses-spell-desc" data-i18n="show-uses"> Show Uses</b></label></span>
						<span class="sheet-table-cell sheet-small-label">&nbsp;</span>
						<span class="sheet-table-cell sheet-small-label">&nbsp;</span>
						<span class="sheet-table-cell sheet-small-label">&nbsp;</span>
						<span class="sheet-table-cell sheet-small-label">&nbsp;</span>
					</div>
				</div>
				<div class="sheet-cheat"></div>
				<input class="sheet-showarrow sheet-h2arrow" type="checkbox" name="attr_spell-lists-show" data-i18n-aria-label="spell-lists" title="Click to expand" data-i18n-title="showsect-cmd" value="1" checked />
				<h2 class="sheet-clickheader sheet-showsect"><label title="Click to expand" data-i18n-title="showsect-cmd" data-i18n-aria-label="showsect-cmd" data-i18n="spell-lists">Spell Lists</label></h2>
				<div class="sheet-h2-section sheet-repeating-sect sheet-spells sheet-wide-readonly">
					<input type="checkbox" class="sheet-minimize-show sheet-cssbutton" data-i18n-title="minimize-all-cmd" data-i18n-aria-label="minimize-all-cmd" title="Minimize all rows." name="attr_newspells-min-show" value="1" /><span></span>
					<input type="checkbox" class="sheet-lock-show sheet-cssbutton" data-i18n-title="expand-cmd" data-i18n-aria-label="expand-cmd" title="Collapse or expand all rows." name="attr_newspells-expand-show" value="1" /><span></span>
					<input type="checkbox" class="sheet-split-column-show sheet-cssbutton" data-i18n-title="column-cmd" data-i18n-aria-label="column-cmd" title="Split into two columns" name="attr_newspells-column-show" value="1" /><span></span>
					<input class="sheet-deletebutton sheet-cssbutton sheet-deletesect-show" type="checkbox" name="attr_delete_repeating_spells_btn" value="1" data-i18n-title="delete-spells" data-i18n-aria-label="delete-spells-must-confirm-next-checkbox" /><span></span><label class="sheet-deletesect sheet-allrows-note"><input type="checkbox" class="sheet-selectedlabel-check" name="attr_delete_repeating_spells" data-i18n-aria-label="confirm-delete-spells" data-i18n-title="confirm-delete-spells" value="1" /><b data-i18n="delete-all-rows-are-you-sure">delete all rows are you sure</b></label>
					<span class="sheet-compendium-note sheet-hide-readonly" >
						<span class="sheet-compendium-icon">i</span>
						<span class="sheet-vertical-middle" data-i18n-title="compendium-drag-n-drop-desc" data-i18n-aria-label="compendium-drag-n-drop-desc" data-i18n="compendium-drag-drop-compatible"> Compendium drag-n-drop compatible </span>
						<span class="sheet-drag-icon">&#9111;</span>
					</span>					
					<div class="sheet-spellsnav sheet-tabs sheet-custbordernav" role="menubar" aria-label="Spells by Level" data-i18n-aria-label="spells-by-level"></div>
					<input type="radio" class="sheet-tabinput sheet-tab0" name="attr_spells_tab" value="0" data-i18n-aria-label="level-0-spells" data-i18n-title="cantrips" title="Cantrips" />
					<label role="menuitem" class="sheet-tab sheet-tab0" data-i18n-title="cantrips" data-i18n-aria-label="cantrips" title="Cantrips" data-i18n="cantrips">Cantrips</label>
					<input type="radio" class="sheet-tabinput sheet-tab1" name="attr_spells_tab" value="1" data-i18n-aria-label="level-1-spells" data-i18n-title="level-1-ordinal" title="1st Level" />
					<label role="menuitem" class="sheet-tab sheet-tab1" data-i18n-title="level-1-ordinal" title="1th Level" data-i18n="level-1-ordinal">1st Level</label>
					<input type="radio" class="sheet-tabinput sheet-tab2" name="attr_spells_tab" value="2" data-i18n-aria-label="level-2-spells" data-i18n-title="level-2-ordinal" title="2nd Level" />
					<label role="menuitem" class="sheet-tab sheet-tab2" data-i18n-title="level-2-ordinal" title="2nd Level" data-i18n="level-2-ordinal">2nd Level</label>
					<input type="radio" class="sheet-tabinput sheet-tab3" name="attr_spells_tab" value="3" data-i18n-aria-label="level-3-spells" data-i18n-title="level-3-ordinal" title="3rd Level" />
					<label role="menuitem" class="sheet-tab sheet-tab3" data-i18n-title="level-3-ordinal" title="3rd Level" data-i18n="level-3-ordinal">3rd Level</label>
					<input type="radio" class="sheet-tabinput sheet-tab4" name="attr_spells_tab" value="4" data-i18n-aria-label="level-4-spells" data-i18n-title="level-4-ordinal" title="4th Level" />
					<label role="menuitem" class="sheet-tab sheet-tab4" data-i18n-title="level-4-ordinal" title="4th Level" data-i18n="level-4-ordinal">4th Level</label>
					<input type="radio" class="sheet-tabinput sheet-tab5" name="attr_spells_tab" value="5" data-i18n-aria-label="level-5-spells" data-i18n-title="level-5-ordinal" title="5th Level" />
					<label role="menuitem" class="sheet-tab sheet-tab5" data-i18n-title="level-5-ordinal" title="5th Level" data-i18n="level-5-ordinal">5th Level</label>
					<input type="radio" class="sheet-tabinput sheet-tab6" name="attr_spells_tab" value="6" data-i18n-aria-label="level-6-spells" data-i18n-title="level-6-ordinal" title="6th Level" />
					<label role="menuitem" class="sheet-tab sheet-tab6" data-i18n-title="level-6-ordinal" title="6th Level" data-i18n="level-6-ordinal">6th Level</label>
					<input type="radio" class="sheet-tabinput sheet-tab7" name="attr_spells_tab" value="7" data-i18n-aria-label="level-7-spells" data-i18n-title="level-7-ordinal" title="7th Level" />
					<label role="menuitem" class="sheet-tab sheet-tab7" data-i18n-title="level-7-ordinal" title="7th Level" data-i18n="level-7-ordinal">7th Level</label>
					<input type="radio" class="sheet-tabinput sheet-tab8" name="attr_spells_tab" value="8" data-i18n-aria-label="level-8-spells" data-i18n-title="level-8-ordinal" title="8th Level" />
					<label role="menuitem" class="sheet-tab sheet-tab8" data-i18n-title="level-8-ordinal" title="8th Level" data-i18n="level-8-ordinal">8th Level</label>
					<input type="radio" class="sheet-tabinput sheet-tab9" name="attr_spells_tab" value="9" data-i18n-aria-label="level-9-spells" data-i18n-title="level-9-ordinal" title="9th Level" />
					<label role="menuitem" class="sheet-tab sheet-tab9" data-i18n-title="level-9-ordinal" title="9th Level" data-i18n="level-9-ordinal">9th Level</label>
					<input type="radio" class="sheet-tabinput sheet-tab99" name="attr_spells_tab" value="99" data-i18n-aria-label="all" data-i18n-title="all" title="All" checked />
					<label role="menuitem" class="sheet-tab sheet-tab99" data-i18n-title="all" data-i18n-aria-label="all" title="All" data-i18n="all">All</label>
					<span class="sheet-nontable-name">&nbsp;</span>
					<input type="checkbox" class="sheet-mythic-show" name="attr_mythic-adventures-show" value="1" role="presentation" />
					<input type="checkbox" value="1" class="sheet-subsect2-show sheet-noshow" name="attr_spellclass-0-casting_type" role="presentation" aria-label="spontaneous spellcasting" />
					<input type="checkbox" value="2" class="sheet-subsect3-show sheet-noshow" name="attr_spellclass-0-casting_type" role="presentation" aria-label="prepared spellcasting" />
					<div class="sheet-spells sheet-repeating-fields sheet-hiderepborder">
						<fieldset class="repeating_spells">
							<span class="sheet-error"><span class="sheet-pictos">!</span><span data-i18n="error-delete-row">Error! You must delete this row before editing any items in this section.</span></span>
							<input type="radio" name="attr_spell_level_r" value="-1" class="sheet-tabcopy custnavsection-new" checked role="presentation" />
							<input type="radio" name="attr_spell_level_r" value="0" class="sheet-tabcopy custnavsection-0" role="presentation" />
							<input type="radio" name="attr_spell_level_r" value="1" class="sheet-tabcopy custnavsection-1" role="presentation" />
							<input type="radio" name="attr_spell_level_r" value="2" class="sheet-tabcopy custnavsection-2" role="presentation" />
							<input type="radio" name="attr_spell_level_r" value="3" class="sheet-tabcopy custnavsection-3" role="presentation" />
							<input type="radio" name="attr_spell_level_r" value="4" class="sheet-tabcopy custnavsection-4" role="presentation" />
							<input type="radio" name="attr_spell_level_r" value="5" class="sheet-tabcopy custnavsection-5" role="presentation" />
							<input type="radio" name="attr_spell_level_r" value="6" class="sheet-tabcopy custnavsection-6" role="presentation" />
							<input type="radio" name="attr_spell_level_r" value="7" class="sheet-tabcopy custnavsection-7" role="presentation" />
							<input type="radio" name="attr_spell_level_r" value="8" class="sheet-tabcopy custnavsection-8" role="presentation" />
							<input type="radio" name="attr_spell_level_r" value="9" class="sheet-tabcopy custnavsection-9" role="presentation" />
							<input type="radio" name="attr_spell_class_r" value="-1" class="sheet-tabcopy sheet-section-spellclass-1" checked role="presentation" />
							<input type="radio" name="attr_spell_class_r" value="0" class="sheet-tabcopy sheet-section-spellclass0" role="presentation" />
							<input type="radio" name="attr_spell_class_r" value="1" class="sheet-tabcopy sheet-section-spellclass1" role="presentation" />
							<input type="radio" name="attr_spell_class_r" value="2" class="sheet-tabcopy sheet-section-spellclass2" role="presentation" />
							<input type="checkbox" name="attr_prepared_state" value="1" class="sheet-section-state" role="presentation" />
							<div class="sheet-custrepeating-border sheet-nontable-repeating sheet-background-color1 compendium-drop-target Spells">
								<input type="checkbox" class="sheet-counted sheet-sect-show" data-i18n-title="minimize-cmd" data-i18n-aria-label="minimize-cmd" title="Minimize Row" name="attr_row-show" value="1" checked /><span></span>
								<span class="sheet-repeating-rollbutton"><button type="roll" name="attr_roll" title="%{selected|repeating_spells_$X_roll}" value="@{macro-text}"></button></span>
								<span style="display:none;" class="sheet-repeating-rollbutton"><button type="roll" name="attr_npc-roll" title="%{selected|repeating_spells_$X_npc-roll}" value="@{npc-macro-text}"></button></span>
								<label class="sheet-small-label2 sheet-narrow-numbers">
									<input title="@{repeating_spells_$X_used}" type="number" name="attr_used" value="0">
									<span class="sheet-sect3" style="margin-left:-.5em;" data-i18n-title="number-prepared-title" data-i18n-aria-label="number-prepared-title" data-i18n="number-prepared"># Prepared</span>
									<span class="sheet-sect2" style="margin-left:-.5em;" title="number-used-title" data-i18n="number-used"># Used</span>
								</label>
								<label class="sheet-small-label2 sheet-entry-25p"><input title="@{repeating_spells_$X_name}" type="text" value="" name="attr_name" placeholder="Spell Name" data-i18n-placeholder="spell-name" accept="Name"><span data-i18n="name">Name</span></label>
								<label class="sheet-small-label2 sheet-sect sheet-spell-multiclassed" style="width:3em;">
									<select title="@{repeating_spells_$X_spellclass_number}" name="attr_spellclass_number" style="width:100%;">
										<option value="">Select One</option>
										<option value="0" data-i18n="1-ordinal-spellclass" >1st Spellcasting Class</option>
										<option value="1" data-i18n="2-ordinal-spellclass" >2nd Spellcasting Class</option>
										<option value="2" data-i18n="3-ordinal-spellclass" >3rd Spellcasting Class</option>
									</select>
									<span data-i18n="class">Class</span>
								</label>
								<label class="sheet-small-label2 sheet-spell-multiclassed sheet-entry-8p"><input title="@{repeating_spells_$X_spellclass}" type="text" value="" name="attr_spellclass" /><span data-i18n="class">Class</span></label>
								<label class="sheet-small-label2 sheet-narrow-numbers"><input title="@{repeating_spells_$X_spell_level}" type="number" value="" name="attr_spell_level" /><span data-i18n="level">Level</span></label>
								<input type="checkbox" name="attr_metamagic" value="1" class="sheet-nextitem-show" role="presentation" />
								<label class="sheet-small-label2 sheet-narrow-numbers sheet-slot"><input title="@{repeating_spells_$X_slot}" type="number" value="" name="attr_slot" /><span data-i18n="slot">Slot</span></label>
								<label class="sheet-small-label2 sheet-narrow-numbers"><input title="@{repeating_spells_$X_savedc}" type="number" value="0" name="attr_savedc" class="sheet-calc" readonly /><span data-i18n="difficulty-class-abbrv">DC</span></label>
								<label class="sheet-small-label2 sheet-entry-12p-shrink"><input title="@{repeating_spells_$X_school}" type="text" value="" name="attr_school" placeholder="Spell School [descriptor]" data-i18n-placeholder="spell-school-place" accept="School"><span data-i18n="school">School</span></label>
								<label class="sheet-small-label2 sheet-entry-small">
									<select title="@{repeating_spells_$X_sr}" name="attr_sr" accept="Spell Resistance" class="sheet-select-small">
										<option value="" data-i18n="not-applicable-abbrv-default" selected>&#8226;N/A</option>
										<option value="Yes" data-i18n="yes">Yes</option>
										<option value="No" data-i18n="no">No</option>
										<option value="Yes (Harmless)" data-i18n="save-yes-harmless">Yes (Harmless)</option>
										<option value="No (Harmless)" data-i18n="save-no-harmless">No (Harmless)</option>
									</select>
									<span data-i18n="spell-resistance-abbrv">SR</span>
								</label>
								<label class="sheet-small-label2 sheet-entry-10p-shrink"><input title="@{repeating_spells_$X_save}" type="text" value="" name="attr_save" placeholder="Save Effect" data-i18n-placeholder="save-effect" accept="Saving Throw"><span data-i18n="save">Save</span></label>
								<label class="sheet-small-label2 sheet-entry-short">
									<select class="sheet-select-small" title="@{repeating_spells_$X_range_pick}" name="attr_range_pick">
										<option value="blank" data-i18n="blank" selected>Blank</option>
										<option value="close" data-i18n="close">Close</option>
										<option value="medium" data-i18n="medium">Medium</option>
										<option value="long" data-i18n="long">Long</option>
										<option value="touch" data-i18n="touch">Touch</option>
										<option value="personal" data-i18n="personal">Personal</option>
										<option value="see_text" data-i18n="see_text">See text</option>
										<option value="number" data-i18n="number">Number</option>
										<option value="perlevel" data-i18n="perlevel">Per Level</option>
										<option value="unknownrange" data-i18n="unknownrange">Unknown Range</option>
									</select>
									<span data-i18n="range">Range</span>
								</label>
								<input type="checkbox" value="number" name="attr_range_pick" class="sheet-or-A-show sheet-noshow" />
								<input type="checkbox" value="perlevel" name="attr_range_pick" class="sheet-or-B-show sheet-noshow" />
								<label class="sheet-small-label2 sheet-entry-8p-shrink sheet-sect sheet-either-or-sect">
									<input type="text" value="" name="attr_range" title="@{repeating_spells_$X_range}" placeholder="Flat # or # /level" data-i18n-placeholder="range-custom-place" />
									<span class="sheet-nowrap" data-i18n-title="range-per-level-desc" data-i18n-aria-label="range-per-level-desc" data-i18n="range-custom">Custom Range</span>
								</label>
								<label class="sheet-small-label2 sheet-sect sheet-number">
									<input title="@{repeating_spells_$X_range_numeric}" type="number" value="0" name="attr_range_numeric" placeholder="0" class="sheet-calc" readonly>
									<span data-i18n="range-in-feet">Range</span>
								</label>
								<label class="sheet-small-label2 sheet-entry-15p-shrink sheet-sect"><input title="@{repeating_spells_$X_targets}" type="text" value="" name="attr_targets" placeholder="Targets/Area/Effect" data-i18n-placeholder="spell-targets-area-effect" /><span data-i18n="spell-targets-area-effect">Targets/Area/Effect</span></label>
								<label class="sheet-small-label2 sheet-entry-12p-shrink sheet-sect"><input title="@{repeating_spells_$X_duration}" type="text" value="" name="attr_duration" placeholder="Duration" data-i18n-placeholder="duration" accept="Duration" /><span data-i18n="duration">Duration</span></label>
								<label class="sheet-small-label2 sheet-entry-8p sheet-sect"><input title="@{repeating_spells_$X_cast-time}" type="text" value="" name="attr_cast-time" placeholder="Casting Time" data-i18n-placeholder="spell-casting-time-place" accept="Casting Time" /><span data-i18n="casting-time-abbrv">Cast Time</span></label>
								<label class="sheet-small-label2 sheet-entry-10p-shrink sheet-sect"><input title="@{repeating_spells_$X_components}" type="text" value="" name="attr_components" placeholder="Components" data-i18n-placeholder="spell-components" accept="Components"><span data-i18n="spell-components">Components</span></label>
								<div style="display:none;">
									<input type="text" value="" name="attr_range_from_compendium" accept="Range" />
									<input type="text" value="" name="attr_spell_lvlstr" accept="Level" />
									<input type="text" value="" name="attr_target_from_compendium" accept="Target" />
									<input type="text" value="" name="attr_area_from_compendium" accept="Area" />
									<input type="text" value="" name="attr_effect_from_compendium" accept="Effect" />
									<input type="text" value="" name="attr_compendium_category" accept="Category" />
								</div>
								<input type="hidden" name="attr_spell_options" value="" />
								<div class="sheet-sect sheet-expand">
									<input type="checkbox" class="sheet-showarrow sheet-misc-show" title="Click to expand" data-i18n-title="showsect-cmd" data-i18n-aria-label="showsect-cmd" aria-label="Show Miscellaneous" name="attr_misc-show" value="1" />
									<label class="sheet-showsect sheet-misc-showlabel" data-i18n="miscellaneous-abbrv">Misc</label>
									<input type="checkbox" class="sheet-showarrow sheet-desc-show" title="Click to expand" data-i18n-title="showsect-cmd" data-i18n-aria-label="showsect-cmd" aria-label="Show Description" name="attr_description-show" value="1" />
									<label class="sheet-showsect sheet-desc-showlabel" data-i18n="description">Description</label>
									<input type="checkbox" class="sheet-showarrow sheet-macro-text-show" title="Click to expand" data-i18n-title="showsect-cmd" data-i18n-aria-label="showsect-cmd" aria-label="Show Macro Text" name="attr_macro-text-show" value="1" />
									<label class="sheet-showsect sheet-macro-text-showlabel sheet-super sheet-note-d" data-i18n="macro-text">Macro Text</label>
									<input type="checkbox" class="sheet-showarrow sheet-weapon-attributes-show" title="Click to expand" data-i18n-title="showsect-cmd" data-i18n-aria-label="showsect-cmd" aria-label="Show attack and damage fields" name="attr_attack-show" value="1" />
									<label class="sheet-showsect sheet-weapon-attributes-showlabel" data-i18n="attack-and-damage">Attack and Damage</label>
									<input type="checkbox" class="sheet-showarrow sheet-id-show" title="Click to expand" data-i18n-title="showsect-cmd" data-i18n-aria-label="showsect-cmd" aria-label="Show Row ID" name="attr_ids-show" value="1" />
									<label class="sheet-showsect sheet-id-showlabel" data-i18n="identification-abbrv">ID</label>
									<hr class="sheet-subnav-hr">
									<div class="sheet-cheat"></div>
									<div class="sheet-nontable sheet-misc">
										<label class="sheet-small-label2 sheet-entry-small"><input title="@{repeating_spells_$X_metamagic}" type="checkbox" value="1" name="attr_metamagic" /><span data-i18n-title="metamagic-title" data-i18n-aria-label="metamagic-title" title="Click to show spell slot field to differentiate slot from spell level." data-i18n="metamagic">Meta Magic</span></label>
										<label class="sheet-small-label2 sheet-number"><input title="@{repeating_spells_$X_isDomain}" type="checkbox" value="1" name="attr_isDomain" /><span data-i18n="spell-domain-chk">Domain</span></label>
										<label class="sheet-small-label2 sheet-number sheet-section-mythic"><input title="@{repeating_spells_$X_isMythic}" type="checkbox" value="1" name="attr_isMythic" /><span data-i18n="spell-mythic-chk">Mythic</span></label>
										<span class="sheet-divider-db-lg">|</span>
										<label class="sheet-small-label2 sheet-number"><input title="@{repeating_spells_$X_CL_misc}" type="number" value="0" name="attr_CL_misc" placeholder="CL Mod" data-i18n-placeholder="caster-level-modifier-abbrv" /><span data-i18n="caster-level-modifier-abbrv">CL Mod</span></label>
										<label class="sheet-small-label2 sheet-number"><input title="@{repeating_spells_$X_casterlevel}" type="number" value="0" name="attr_casterlevel" class="sheet-calc" readonly /><span data-i18n="caster-level-abbrv">CL</span></label>
										<span class="sheet-divider-db-lg">|</span>
										<label class="sheet-small-label2 sheet-entry-vshort"><input title="@{repeating_spells_$X_DC_misc}" type="number" value="0" name="attr_DC_misc" placeholder="DC Mod" data-i18n-placeholder="difficulty-class-modifier-abbrv" /><span data-i18n="difficulty-class-modifier-abbrv">DC Mod</span></label>
										<span class="sheet-divider-db-lg">|</span>
										<label class="sheet-small-label2" style="width:7em;"><input title="@{repeating_spells_$X_SP_misc}" type="number" value="0" name="attr_SP_misc" style="left:20%;" placeholder="Spell Pen" data-i18n-placeholder="spell-penetration-modifier-abbrv" /><span data-i18n="spell-penetration-modifier-abbrv">Spell Pen Mod</span></label>
										<label class="sheet-small-label2 sheet-number"><input title="@{repeating_spells_$X_SP-mod}" type="number" value="0" name="attr_SP-mod" class="sheet-calc" readonly /><span data-i18n="spell-penetration-abbrv-short">SP</span></label>
										<span class="sheet-divider-db-lg">|</span>
										<label class="sheet-small-label2 sheet-entry-small"><input title="@{repeating_spells_$X_Concentration_misc}" type="number" value="0" name="attr_Concentration_misc" /><span data-i18n="concentration-miscellaneous-abbrv">Conc Misc</span></label>
										<label class="sheet-small-label2 sheet-number"><input title="@{repeating_spells_$X_Concentration-mod}" type="number" value="0" name="attr_Concentration-mod" class="sheet-calc" readonly /><span data-i18n="concentration-abbrv">Conc</span></label>
									</div>
									<div class="sheet-weapon-attributes sheet-non-table">
										<label class="sheet-small-label2" style="width:5em;">
											<input type="checkbox" name="attr_create-attack-entry" value="1" class="sheet-cssbutton sheet-createattackbutton" title="Create a new attack based on this weapon." data-i18n-title="create-attack-entry" data-i18n-aria-label="create-attack-entry"><span></span>
											<span data-i18n-title="create-attack-entry" data-i18n-aria-label="create-attack-entry" data-i18n="create-attack" >Create Attack</span>
										</label>
										<label class="sheet-small-label2 sheet-entry-short">
											<select class="sheet-select-small" title="@{repeating_spells_$X_spell-attack-type}" name="attr_spell-attack-type">
												<option value="0" data-i18n="none-default" selected>&#8226;None</option>
												<option value="@{attk-melee}" data-i18n="touch">Touch</option>
												<option value="@{attk-melee2}" data-i18n="touch-melee2">Touch (melee 2)</option>
												<option value="@{attk-ranged}" data-i18n="ranged-touch-ray">Ranged touch/Ray</option>
												<option value="@{CMB}" data-i18n="combat-maneuver-bonus-abbrv">CMB</option>
											</select>
											<span data-i18n="attack-type">Attack Type</span>
										</label>
										<label class="sheet-small-label2 sheet-entry-30p-shrink">
											<textarea class="sheet-inline-textarea" name="attr_damage-macro-text" title="@{repeating_spells_$X_damage-macro-text}" placeholder="Macro/Query" data-i18n-placeholder="full-macro-place" ></textarea>
											<span class="sheet-super sheet-note-b" data-i18n="damage">Damage</span>
										</label>
										<label class="sheet-small-label2 sheet-entry-15p-shrink">
											<input type="text" name="attr_damage-type" title="@{repeating_spells_$X_damage-type}" placeholder="Damage Type" data-i18n-placeholder="damage-type" />
											<span data-i18n="damage-type">Damage Type</span>
										</label>											
									</div>
									<textarea class="sheet-desc" title="@{repeating_spells_$X_description}" name="attr_description" accept="Content"></textarea>
									<textarea class="sheet-macro-text" title="@{repeating_spells_$X_macro-text}" name="attr_macro-text">@{PC-whisper} &{template:pf_spell} @{toggle_spell_accessible} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_spell}}} {{name=@{name}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle}} {{deafened_note=@{SpellFailureNote}}} @{spell_options} </textarea>
									<textarea style="display:none;" class="sheet-macro-text" title="@{repeating_spells_$X_npc-macro-text}" name="attr_npc-macro-text">@{NPC-whisper}  &{template:pf_spell} @{toggle_spell_accessible} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_spell}}} {{name=@{name}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle}} {{deafened_note=@{SpellFailureNote}}} @{spell_options}</textarea>
									<div class="sheet-repeating-id">
										<span data-i18n="row-identification-for-macros">Row ID for macros</span>: <span class="sheet-selectable" name="attr_row_id" />
									</div>
								</div>
							</div>
						</fieldset>
					</div>
				</div>
			</div>
			<div class="sheet-section6 sheet-section sheet-section-inventory" role="region" aria-label="Inventory" data-i18n-aria-label="inventory">
				<div class="sheet-cheat sheet-show-readonly sheet-inverse-readonly"></div>
				<h1 class="sheet-selected-tabtitle" data-i18n="inventory">Inventory</h1>
				<div class="sheet-col sheet-col1">
					<div class="sheet-cheat"></div>
					<input class="sheet-showarrow sheet-h2arrow" type="checkbox" name="attr_currency-show" data-i18n-aria-label="currency" title="Click to expand" data-i18n-title="showsect-cmd" value="1" checked />
					<h2 class="sheet-clickheader sheet-showsect"><label title="Click to expand" data-i18n-title="showsect-cmd" data-i18n-aria-label="showsect-cmd" data-i18n="currency">Currency</label></h2>
					<div class="sheet-h2-section sheet-currency">
						<div class="sheet-table sheet-wide-numbers sheet-carried-currency">
							<span class="sheet-table-name sheet-secondary-table-name sheet-show-readonly" title="The amount of currency carried on the character that will contribute to total load" data-i18n-title="carried-currency-title" data-i18n-aria-label="carried-currency-title" data-i18n="carried-currency">Carried Currency</span>
							<div class="sheet-table-row">
								<span class="sheet-table-cell" style="width:10%;"><img style="vertical-align:middle;" alt="image of coin purse" src="http://i.imgur.com/F7USUqg.png"></span>									
								<span class="sheet-table-cell"><label title="Copper pieces" data-i18n-title="copper-pieces" data-i18n-aria-label="copper-pieces" data-i18n="copper-pieces-abbrv" style="width:10%;min-width:2em;">&nbsp;CP</label><input title="@{CP}" type="number" name="attr_CP" value="0"></span>
								<span class="sheet-table-cell"><label title="Silver pieces" data-i18n-title="silver-pieces" data-i18n-aria-label="silver-pieces" data-i18n="silver-pieces-abbrv" style="width:10%;min-width:2em;">&nbsp;SP</label><input title="@{SP}" type="number" name="attr_SP" value="0"></span>
								<span class="sheet-table-cell"><label title="Gold pieces" data-i18n-title="gold-pieces" data-i18n-aria-label="gold-pieces" data-i18n="gold-pieces-abbrv" style="width:10%;min-width:2em;">&nbsp;GP</label><input title="@{GP}" type="number" name="attr_GP" value="0"></span>
								<span class="sheet-table-cell"><label title="Platinum pieces" data-i18n-title="platinum-pieces" data-i18n-aria-label="platinum-pieces" data-i18n="platinum-pieces-abbrv" style="width:10%;min-width:2em;">&nbsp;PP</label><input title="@{PP}" type="number" name="attr_PP" value="0"></span>
							</div>
						</div>
						<div class="sheet-table sheet-wide-numbers sheet-other-currency">
							<span class="sheet-table-name sheet-secondary-table-name sheet-show-readonly" title="The amount of currency not actively carried by the character" data-i18n-title="other-currency-title" data-i18n-aria-label="other-currency-title" data-i18n="other-currency">Other Currency</span>
							<div class="sheet-table-row">
								<span class="sheet-table-cell" style="width:10%;"><img style="vertical-align:middle;" alt="image of treasure chest" src="http://i.imgur.com/rnuQ6SJ.png"></span>
								<span class="sheet-table-cell"><label title="Copper pieces" data-i18n-title="copper-pieces" data-i18n-aria-label="copper-pieces" data-i18n="copper-pieces-abbrv" style="width:10%;min-width:2em;">&nbsp;CP</label><input title="@{other-CP}" type="number" name="attr_other-CP" value="0"></span>
								<span class="sheet-table-cell"><label title="Silver pieces" data-i18n-title="silver-pieces" data-i18n-aria-label="silver-pieces" data-i18n="silver-pieces-abbrv" style="width:10%;min-width:2em;">&nbsp;SP</label><input title="@{other-SP}" type="number" name="attr_other-SP" value="0"></span>
								<span class="sheet-table-cell"><label title="Gold pieces" data-i18n-title="gold-pieces" data-i18n-aria-label="gold-pieces" data-i18n="gold-pieces-abbrv" style="width:10%;min-width:2em;">&nbsp;GP</label><input title="@{other-GP}" type="number" name="attr_other-GP" value="0"></span>
								<span class="sheet-table-cell"><label title="Platinum pieces" data-i18n-title="platinum-pieces" data-i18n-aria-label="platinum-pieces" data-i18n="platinum-pieces-abbrv" style="width:10%;min-width:2em;">&nbsp;PP</label><input title="@{other-PP}" type="number" name="attr_other-PP" value="0"></span>
							</div>
						</div>
					</div>
					<div class="sheet-cheat"></div>
					<input class="sheet-showarrow sheet-h2arrow" type="checkbox" name="attr_carried-weight-show" data-i18n-aria-label="carried-weight" title="Click to expand" data-i18n-title="showsect-cmd" value="1" checked />
					<h2 class="sheet-clickheader sheet-showsect"><label title="Click to expand" data-i18n-title="showsect-cmd" data-i18n-aria-label="showsect-cmd" data-i18n="encumbrance">Encumbrance</label></h2>
					<div class="sheet-h2-section sheet-current-loads">
						<div class="sheet-table sheet-wide-numbers sheet-carried-totals">
							<span class="sheet-table-name sheet-show-readonly sheet-secondary-table-name" data-i18n="carried-weight">Carried Weight</span>
							<div class="sheet-table-row">
								<span class="sheet-table-header" data-i18n-title="carried-currency" data-i18n-aria-label="carried-currency" data-i18n="currency">Currency</span>
								<span class="sheet-table-header sheet-hide-readonly"></span>
								<span class="sheet-table-header" data-i18n-title="carried-equipment" data-i18n-aria-label="carried-equipment" data-i18n="equipment-abbrv">Equip</span>
								<span class="sheet-table-header sheet-hide-readonly"></span>
								<span class="sheet-table-header" title="Miscellaneous weight. Player configurable" data-i18n="miscellaneous-abbrv">Misc</span>
								<span class="sheet-table-header sheet-hide-readonly"></span>
								<span class="sheet-table-header" title="Total weight carried by character" data-i18n-title="total-weight-title" data-i18n-aria-label="total-weight-title" data-i18n="total">Total</span>
							</div>
							<div class="sheet-table-row">
								<span class="sheet-table-cell"><input title="@{carried-currency}" type="number" name="attr_carried-currency" value="0" class="sheet-calc" readonly /></span>
								<span class="sheet-divider-lg">+</span>
								<span class="sheet-table-cell"><input title="@{carried-equipment}" type="text" class="sheet-number" name="attr_carried-equipment" value="@{item_total_weight}" disabled /></span>
								<span class="sheet-divider-lg">+</span>
								<span class="sheet-table-cell"><input title="@{carried-misc}" type="number" name="attr_carried-misc" value="0" /></span>
								<span class="sheet-divider-lg">=</span>
								<span class="sheet-table-cell"><input title="@{carried-total}" type="number" name="attr_carried-total" value="0" class="sheet-calc" readonly /></span>
							</div>
						</div>
						<div class="sheet-table sheet-sect sheet-wide-numbers sheet-load" style="background-color:#d3d3d3;">
							<span class="sheet-table-name sheet-secondary-table-name" data-i18n="current-load">Current Load</span>
							<div class="sheet-table-row">
								<span class="sheet-table-config-row-name sheet-secondary-table-name sheet-show-readonly sheet-inverse-readonly" style="width:10%;" data-i18n="current-load">Current Load</span>
								<span class="sheet-table-cell" style="width:10%;"><label class="sheet-center"><input title="@{current-load}" type="radio" value="0" name="attr_current-load" checked>&nbsp;<span data-i18n="light">Light</span></label></span>
								<span class="sheet-table-cell" style="width:10%;"><label class="sheet-center"><input title="@{current-load}" type="radio" value="1" name="attr_current-load">&nbsp;<span data-i18n="medium">Medium</span></label></span>
								<span class="sheet-table-cell" style="width:10%;"><label class="sheet-center"><input title="@{current-load}" type="radio" value="2" name="attr_current-load">&nbsp;<span data-i18n="heavy">Heavy</span></label></span>					
								<span class="sheet-table-cell" style="width:10%;"><label class="sheet-center"><input title="@{current-load}" type="radio" value="3" name="attr_current-load">&nbsp;<span data-i18n-title="over-heavy-encumbrance-title" data-i18n-aria-label="over-heavy-encumbrance-title" data-i18n="over">Over</span></label></span>					
								<span class="sheet-table-cell" style="width:10%;"><label class="sheet-center"><input title="@{current-load}" type="radio" value="4" name="attr_current-load">&nbsp;<span data-i18n-title="maximum-encumbrance-title" data-i18n-aria-label="maximum-encumbrance-title" data-i18n="maximum-abbrv">Max</span></label></span>					
							</div>
						</div>
					</div>
					<div class="sheet-cheat"></div>
					<input class="sheet-showarrow sheet-h2arrow" type="checkbox" name="attr_loads-show" data-i18n-aria-label="loads-and-lift" title="Click to expand" data-i18n-title="showsect-cmd" value="1" checked />
					<h2 class="sheet-clickheader sheet-showsect"><label title="Click to expand" data-i18n-title="showsect-cmd" data-i18n-aria-label="showsect-cmd" data-i18n="loads-and-lift">Loads and Lift</label></h2>
					<div class="sheet-h2-section sheet-loads-and-lift">
						<div class="sheet-table sheet-sect sheet-wide-numbers sheet-lift-modifiers">
							<span class="sheet-table-name sheet-show-readonly sheet-secondary-table-name" data-i18n="lift-modifiers">Lift Modifiers</span>
							<div class="sheet-table-group-head">
								<div class="sheet-table-row">
									<span class="sheet-table-header sheet-nowrap" title="Bonus to Strength score for carrying capacity only" data-i18n-title="encumbrance-str-bonus-title" data-i18n-aria-label="encumbrance-str-bonus-title" data-i18n="strength-bonus-abbrv">STR Bonus</span>
									<span class="sheet-table-header" title="Miscellaneous bonus to load values" data-i18n-title="encumbrance-misc-title" data-i18n-aria-label="encumbrance-misc-title" data-i18n="miscellaneous-abbrv">Misc</span>
									<span class="sheet-table-header"></span>
									<span class="sheet-table-header" title="The amount that load values will be multiplied" data-i18n-title="encumbrance-multiplier-title" data-i18n-aria-label="encumbrance-multiplier-title" data-i18n="multiplier-abbrv">Mult</span>
									<span class="sheet-table-header"></span>
									<span class="sheet-table-header" title="The amount that load values will be multiplied for size. Number of legs are accounted for." data-i18n-title="encumbrance-size-multiplier-title" data-i18n-aria-label="encumbrance-size-multiplier-title" data-i18n="size">Size</span>
									<span class="sheet-table-header"></span>
									<span class="sheet-table-header" title="Total amount that load values will be multiplied." data-i18n-title="encumbrance-multiplier-total-title" data-i18n-aria-label="encumbrance-multiplier-total-title" data-i18n="total">Total</span>
									<span class="sheet-table-header"></span>
								</div>
							</div>
							<div class="sheet-table-group">
								<div class="sheet-table-row">
									<span class="sheet-table-cell"><input title="@{load-str-bonus}" type="number" name="attr_load-str-bonus" value="0" /></span>
									<span class="sheet-table-cell"><input title="@{load-misc}" type="number" name="attr_load-misc" value="0" /></span>
									<span class="sheet-divider-lg" style="text-align: right;">(</span>
									<span class="sheet-table-cell"><input title="@{load-multiplier}" type="number" name="attr_load-multiplier" value="1"  /></span>
									<span class="sheet-divider-lg">+</span>
									<span class="sheet-table-cell"><input title="@{size-multiplier}" type="number" name="attr_size-multiplier" value="1" class="sheet-calc" readonly /></span>
									<span class="sheet-divider-lg">=</span>
									<span class="sheet-table-cell"><input title="@{total-load-multiplier}" type="number" name="attr_total-load-multiplier" value="1" class="sheet-calc" readonly /></span>
									<span class="sheet-divider-lg" style="text-align: left;">)</span>
								</div>
							</div>
						</div>
						<div class="sheet-table sheet-sect sheet-wide-numbers sheet-lift">
							<span class="sheet-table-name sheet-show-readonly sheet-inverse-readonly sheet-secondary-table-name" data-i18n="loads-and-lift">Loads and Lift</span>
							<span class="sheet-table-name sheet-secondary-table-name sheet-hide-readonly" data-i18n="loads">Loads</span>
							<div class="sheet-table-group-head">
								<div class="sheet-table-row">
									<span class="sheet-table-header" title="At this weight of carried equipment or less, the character is unencumbered" data-i18n-title="encumbrance-light-title" data-i18n-aria-label="encumbrance-light-title" data-i18n="light">Light</span>
									<span class="sheet-table-header" title="Over the light load and up to this weight, the character is moderately encumbered" data-i18n-title="encumbrance-medium-title" data-i18n-aria-label="encumbrance-medium-title" data-i18n="medium">Medium</span>
									<span class="sheet-table-header" title="Over the medium load and up to this weight, the character is heavily encumbered" data-i18n-title="encumbrance-heavy-title" data-i18n-aria-label="encumbrance-heavy-title" data-i18n="heavy">Heavy</span>
									<span class="sheet-table-header" title="At this weight or greater the character is immobilized" data-i18n-title="encumbrance-max-title" data-i18n-aria-label="encumbrance-max-title" data-i18n="maximum-abbrv">Max</span>
								</div>
							</div>
							<div class="sheet-table-group">
								<div class="sheet-table-row">
									<span class="sheet-table-cell"><input title="@{load-light}" type="number" name="attr_load-light" value="33" class="sheet-calc" readonly /></span>
									<span class="sheet-table-cell"><input title="@{load-medium}" type="number" name="attr_load-medium" value="66" class="sheet-calc" readonly /></span>
									<span class="sheet-table-cell"><input title="@{load-heavy}" type="number" name="attr_load-heavy" value="100" class="sheet-calc" readonly /></span>
									<span class="sheet-table-cell"><input title="@{load-max}" type="number" name="attr_load-max" value="200" class="sheet-calc" readonly /></span>
								</div>
							</div>
						</div>
						<div class="sheet-table sheet-sect sheet-wide-numbers sheet-lift">
							<span class="sheet-table-name sheet-secondary-table-name" data-i18n="lift">Lift</span>
							<div class="sheet-table-group-head">
								<div class="sheet-table-row">
									<span class="sheet-table-header" title="A character can lift as much as his maximum load over his head" data-i18n-title="encumbrance-above-title" data-i18n-aria-label="encumbrance-above-title" data-i18n="above-head">Above Head</span>
									<span class="sheet-table-header" title="A character can lift as much as double his maximum load off the ground, but he or she can only stagger around with it" data-i18n-title="encumbrance-off-ground-title" data-i18n-aria-label="encumbrance-off-ground-title" data-i18n="off-ground">Off Ground</span>
									<span class="sheet-table-header" title="A character can generally push or drag along the ground as much as five times his maximum load" data-i18n-title="encumbrance-drag-push-title" data-i18n-aria-label="encumbrance-drag-push-title" data-i18n="drag-push">Drag &amp; Push</span>
								</div>
							</div>
							<div class="sheet-table-group">
								<div class="sheet-table-row">
									<span class="sheet-table-cell"><input title="@{lift-above-head}" type="number" name="attr_lift-above-head" value="100" class="sheet-calc" readonly /></span>
									<span class="sheet-table-cell"><input title="@{lift-off-ground}" type="number" name="attr_lift-off-ground" value="200" class="sheet-calc" readonly /></span>
									<span class="sheet-table-cell"><input title="@{lift-drag-and-push}" type="number" name="attr_lift-drag-and-push" value="500" class="sheet-calc" readonly /></span>
								</div>
							</div>
						</div>
					</div>
				</div>
				<div class="sheet-col sheet-col2">
					<div class="sheet-cheat"></div>
					<input class="sheet-showarrow sheet-h2arrow" type="checkbox" name="attr_worn-items-show" data-i18n-aria-label="worn-items" title="Click to expand" data-i18n-title="showsect-cmd" value="1" checked />
					<h2 class="sheet-clickheader sheet-showsect"><label title="Click to expand" data-i18n-title="showsect-cmd" data-i18n-aria-label="showsect-cmd" data-i18n="worn-items">Worn Items</label></h2>
					<span class="sheet-nontable-name" title="The equipment currently worn by the character" data-i18n="worn-equipment" data-i18n-title="worn-equipment-title" data-i18n-aria-label="worn-equipment-title">Worn Equipment</span>
					<div class="sheet-h2-section sheet-worn-items">
						<div class="sheet-table">
							<div class="sheet-table-row">
								<span class="sheet-table-header sheet-right" style="text-align:right;width:6em;" title="The location on the body where the equipment is worn" data-i18n-title="worn-equipment-slot-title" data-i18n-aria-label="worn-equipment-slot-title" data-i18n="slot">Slot</span>
								<span class="sheet-table-header sheet-entry-5p-shrink" ></span>
								<span class="sheet-table-header" title="Name" data-i18n-title="worn-item-name" data-i18n-aria-label="worn-item-name" data-i18n="worn-item-name">Name</span>
							</div>
							<div class="sheet-table-row">
								<span class="sheet-table-cell sheet-right" data-i18n="head">Head</span>
								<span class="sheet-table-cell sheet-repeating-rollbutton"><button type="roll" name="attr_worn-Head-roll" title="%{selected|worn-Head-roll}" value=""></button></span>
								<span class="sheet-table-cell sheet-left"><input title="@{worn-Head}" type="text" name="attr_worn-Head" value="" placeholder="Item Name" data-i18n-placeholder="item-name" class="sheet-calc" readonly /></span>
							</div>
							<div class="sheet-table-row">
								<span class="sheet-table-cell sheet-right" data-i18n="headband">Headband</span>
								<span class="sheet-table-cell sheet-repeating-rollbutton"><button type="roll" name="attr_worn-Headband-roll" title="%{selected|worn-Headband-roll}" value=""></button></span>
								<span class="sheet-table-cell sheet-left"><input title="@{worn-Headband}" type="text" name="attr_worn-Headband" value="" placeholder="Item Name" data-i18n-placeholder="item-name" class="sheet-calc" readonly /></span>
							</div>
							<div class="sheet-table-row">
								<span class="sheet-table-cell sheet-right" data-i18n="eyes">Eyes</span>
								<span class="sheet-table-cell sheet-repeating-rollbutton"><button type="roll" name="attr_worn-Eyes-roll" title="%{selected|worn-Eyes-roll}" value=""></button></span>
								<span class="sheet-table-cell sheet-left"><input title="@{worn-Eyes}" type="text" name="attr_worn-Eyes" value="" placeholder="Item Name" data-i18n-placeholder="item-name" class="sheet-calc" readonly /></span>
							</div>
							<div class="sheet-table-row">
								<span class="sheet-table-cell sheet-right" data-i18n="neck">Neck</span>
								<span class="sheet-table-cell sheet-repeating-rollbutton"><button type="roll" name="attr_worn-Neck-roll" title="%{selected|worn-Neck-roll}" value=""></button></span>
								<span class="sheet-table-cell sheet-left"><input title="@{worn-Neck}" type="text" name="attr_worn-Neck" value="" placeholder="Item Name" data-i18n-placeholder="item-name" class="sheet-calc" readonly /></span>
							</div>
							<div class="sheet-table-row">
								<span class="sheet-table-cell sheet-right" data-i18n="shoulders">Shoulders</span>
								<span class="sheet-table-cell sheet-repeating-rollbutton"><button type="roll" name="attr_worn-Shoulders-roll" title="%{selected|worn-Shoulders-roll}" value=""></button></span>
								<span class="sheet-table-cell sheet-left"><input title="@{worn-Shoulders}" type="text" name="attr_worn-Shoulders" value="" placeholder="Item Name" data-i18n-placeholder="item-name" class="sheet-calc" readonly /></span>
							</div>
							<div class="sheet-table-row">
								<span class="sheet-table-cell sheet-right" data-i18n="body">Body</span>
								<span class="sheet-table-cell sheet-repeating-rollbutton"><button type="roll" name="attr_worn-Body-roll" title="%{selected|worn-Body-roll}" value=""></button></span>
								<span class="sheet-table-cell sheet-left"><input title="@{worn-Body}" type="text" name="attr_worn-Body" value="" placeholder="Item Name" data-i18n-placeholder="item-name" class="sheet-calc" readonly /></span>
							</div>
							<div class="sheet-table-row">
								<span class="sheet-table-cell sheet-right" data-i18n="chest">Chest</span>
								<span class="sheet-table-cell sheet-repeating-rollbutton"><button type="roll" name="attr_worn-Chest-roll" title="%{selected|worn-Chest-roll}" value=""></button></span>
								<span class="sheet-table-cell sheet-left"><input title="@{worn-Chest}" type="text" name="attr_worn-Chest" value="" placeholder="Item Name" data-i18n-placeholder="item-name" class="sheet-calc" readonly /></span>
							</div>
						</div>
						<div class="sheet-table">
							<div class="sheet-table-row">
								<span class="sheet-table-header sheet-right" style="text-align:right;width:6em;" title="The location on the body where the equipment is worn" data-i18n-title="worn-equipment-slot-title" data-i18n-aria-label="worn-equipment-slot-title" data-i18n="slot">Slot</span>
								<span class="sheet-table-header sheet-entry-5p-shrink" ></span>
								<span class="sheet-table-header" title="Name" data-i18n-title="worn-item-name" data-i18n-aria-label="worn-item-name" data-i18n="worn-item-name">Name</span>
							</div>
							<div class="sheet-table-row">
								<span class="sheet-table-cell sheet-right" data-i18n="belt">Belt</span>
								<span class="sheet-table-cell sheet-repeating-rollbutton"><button type="roll" name="attr_worn-Belt-roll" title="%{selected|worn-Belt-roll}" value=""></button></span>
								<span class="sheet-table-cell sheet-left"><input title="@{worn-Belt}" type="text" name="attr_worn-Belt" value="" placeholder="Item Name" data-i18n-placeholder="item-name" class="sheet-calc" readonly /></span>
							</div>
							<div class="sheet-table-row">
								<span class="sheet-table-cell sheet-right" data-i18n="wrist">Wrist</span>
								<span class="sheet-table-cell sheet-repeating-rollbutton"><button type="roll" name="attr_worn-Wrist-roll" title="%{selected|worn-Wrist-roll}" value=""></button></span>
								<span class="sheet-table-cell sheet-left"><input title="@{worn-Wrist}" type="text" name="attr_worn-Wrist" value="" placeholder="Item Name" data-i18n-placeholder="item-name" class="sheet-calc" readonly /></span>
							</div>
							<div class="sheet-table-row">
								<span class="sheet-table-cell sheet-right" data-i18n="hands">Hands</span>
								<span class="sheet-table-cell sheet-repeating-rollbutton"><button type="roll" name="attr_worn-Hands-roll" title="%{selected|worn-Hands-roll}" value=""></button></span>
								<span class="sheet-table-cell sheet-left"><input title="@{worn-Hands}" type="text" name="attr_worn-Hands" value="" placeholder="Item Name" data-i18n-placeholder="item-name" class="sheet-calc" readonly /></span>
							</div>
							<div class="sheet-table-row">
								<span class="sheet-table-cell sheet-right" data-i18n="ring-one">Ring 1</span>
								<span class="sheet-table-cell sheet-repeating-rollbutton"><button type="roll" name="attr_worn-Ring1-roll" title="%{selected|worn-Ring1-roll}" value=""></button></span>
								<span class="sheet-table-cell sheet-left"><input title="@{worn-Ring1}" type="text" name="attr_worn-Ring1" value="" placeholder="Item Name" data-i18n-placeholder="item-name" class="sheet-calc" readonly /></span>
							</div>
							<div class="sheet-table-row">
								<span class="sheet-table-cell sheet-right" data-i18n="ring-two">Ring 2</span>
								<span class="sheet-table-cell sheet-repeating-rollbutton"><button type="roll" name="attr_worn-Ring2-roll" title="%{selected|worn-Ring2-roll}" value=""></button></span>
								<span class="sheet-table-cell sheet-left"><input title="@{worn-Ring2}" type="text" name="attr_worn-Ring2" value="" placeholder="Item Name" data-i18n-placeholder="item-name" class="sheet-calc" readonly /></span>
							</div>
							<div class="sheet-table-row">
								<span class="sheet-table-cell sheet-right" data-i18n="feet">Feet</span>
								<span class="sheet-table-cell sheet-repeating-rollbutton"><button type="roll" name="attr_worn-Feet-roll" title="%{selected|worn-Feet-roll}" value=""></button></span>
								<span class="sheet-table-cell sheet-left"><input title="@{worn-Feet}" type="text" name="attr_worn-Feet" value="" placeholder="Item Name" data-i18n-placeholder="item-name" class="sheet-calc" readonly /></span>
							</div>
							<div class="sheet-table-row">
								<span class="sheet-table-cell sheet-right" data-i18n="armor">Armor</span>
								<span class="sheet-table-cell sheet-repeating-rollbutton"><button type="roll" name="attr_armor3-roll" title="%{selected|armor3-roll}" value=""></button></span>
								<span class="sheet-table-cell sheet-left"><input title="@{armor3}" type="text" name="attr_armor3" value="" placeholder="Item Name" data-i18n-placeholder="item-name" class="sheet-calc" readonly /></span>
							</div>
							<div class="sheet-table-row">
								<span class="sheet-table-cell sheet-right" data-i18n="shield">Shield</span>
								<span class="sheet-table-cell sheet-repeating-rollbutton"><button type="roll" name="attr_shield3-roll" title="%{selected|shield3-roll}" value=""></button></span>
								<span class="sheet-table-cell sheet-left"><input title="@{shield3}" type="text" name="attr_shield3" value="" placeholder="Item Name" data-i18n-placeholder="item-name" class="sheet-calc" readonly /></span>
							</div>
						</div>
					</div>
				</div>
				<div class="sheet-cheat"></div>
				<input class="sheet-showarrow sheet-h2arrow" type="checkbox" name="attr_other-items-show" data-i18n-aria-label="other-items" title="Click to expand" data-i18n-title="showsect-cmd" value="1" checked />
				<h2 class="sheet-clickheader sheet-showsect"><label title="Click to expand" data-i18n-title="showsect-cmd" data-i18n-aria-label="showsect-cmd" data-i18n="other-items">Other Items</label></h2>
				<div class="sheet-h2-section sheet-other-items" style="height:auto;">
					<span class="sheet-nontable-name" title="Freeform other items" data-i18n="other-items">Other Items</span>
					<textarea name="attr_other_items_treasure" title="@{other_items_treasure}" placeholder="Other equipment or property" class="sheet-entry-wide sheet-notes"></textarea>
				</div>
				<div class="sheet-cheat"></div>
				<input class="sheet-showarrow sheet-h2arrow" type="checkbox" name="attr_equipment-show" data-i18n-aria-label="equipment" title="Click to expand" data-i18n-title="showsect-cmd" value="1" checked />
				<h2 class="sheet-clickheader sheet-showsect"><label title="Click to expand" data-i18n-title="showsect-cmd" data-i18n-aria-label="showsect-cmd" data-i18n="equipment">Equipment</label></h2>
				<div class="sheet-h2-section sheet-repeating-sect sheet-items sheet-wide-readonly">
					<span class="sheet-nontable-name" title="The items that the character has; either carried or elsewhere" data-i18n="equipment-list">Equipment List</span>
					<input type="checkbox" class="sheet-minimize-show sheet-cssbutton" data-i18n-title="minimize-all-cmd" data-i18n-aria-label="minimize-all-cmd" title="Minimize all rows." name="attr_item-min-show" value="1" /><span></span>
					<input type="checkbox" class="sheet-lock-show sheet-cssbutton" data-i18n-title="expand-cmd" data-i18n-aria-label="expand-cmd" title="Collapse or expand all rows." name="attr_item-expand-show" value="1" /><span></span>
					<input type="checkbox" class="sheet-split-column-show sheet-cssbutton" data-i18n-title="column-cmd" data-i18n-aria-label="column-cmd" title="Split into two columns" name="attr_item-column-show" value="1" /><span></span>
					<input class="sheet-deletebutton sheet-cssbutton sheet-deletesect-show" type="checkbox" name="attr_delete_repeating_item_btn" value="1" data-i18n-title="delete-item" data-i18n-aria-label="delete-item-must-confirm-next-checkbox" /><span></span><label class="sheet-deletesect sheet-allrows-note"><input type="checkbox" class="sheet-selectedlabel-check" name="attr_delete_repeating_item" data-i18n-aria-label="confirm-delete-item" data-i18n-title="confirm-delete-item" value="1" /><b data-i18n="delete-all-rows-are-you-sure">delete all rows are you sure</b></label>
					<span class="sheet-compendium-note sheet-hide-readonly" >
						<span class="sheet-compendium-icon">i</span>
						<span class="sheet-vertical-middle" data-i18n-title="compendium-drag-n-drop-desc" data-i18n-aria-label="compendium-drag-n-drop-desc" data-i18n="compendium-drag-drop-compatible"> Compendium drag-n-drop compatible </span>
						<span class="sheet-drag-icon">&#9111;</span>
					</span>
					<div class="sheet-equipmentnav sheet-tabs sheet-custbordernav" role="menubar" aria-label="Equipment" data-i18n-aria-label="equipment"></div>
					<input type="radio" class="sheet-tabinput sheet-tab0" name="attr_equipment_tab" value="1" data-i18n-aria-label="weapon" data-i18n-title="weapon" title="Weapon" />
					<label role="menuitem" class="sheet-tab sheet-tab0" data-i18n-title="weapons" data-i18n-aria-label="weapons" title="Weapons" data-i18n="weapon">Weapons</label>
					<input type="radio" class="sheet-tabinput sheet-tab1 sheet-wider-tab" name="attr_equipment_tab" value="2" data-i18n-aria-label="armor-shield" data-i18n-title="armor-shield" title="Armors/Shields" />
					<label role="menuitem" class="sheet-tab sheet-tab1 sheet-wider-tab" data-i18n-title="armor-shield" data-i18n-aria-label="armor-shield" title="Armor/Shields" data-i18n="armor-shield">Armor/Shields</label>
					<input type="radio" class="sheet-tabinput sheet-tab2 sheet-narrow-tab" name="attr_equipment_tab" value="3" data-i18n-aria-label="ammo" data-i18n-title="ammo" title="Ammo" />
					<label role="menuitem" class="sheet-tab sheet-tab2 sheet-narrow-tab" data-i18n-title="ammunition" data-i18n-aria-label="ammunition" title="ammunition" data-i18n="ammo">Ammo</label>
					<input type="radio" class="sheet-tabinput sheet-tab3 sheet-wider-tab" name="attr_equipment_tab" value="4" data-i18n-aria-label="consumables" data-i18n-title="consumables" title="Consumables" />
					<label role="menuitem" class="sheet-tab sheet-tab3 sheet-wider-tab" data-i18n-title="consumables" data-i18n-aria-label="consumables" title="Consumables" data-i18n="consumable">Consumable</label>
					<input type="radio" class="sheet-tabinput sheet-tab7" name="attr_equipment_tab" value="8" data-i18n-aria-label="charged" data-i18n-title="charged" title="Charged" />
					<label role="menuitem" class="sheet-tab sheet-tab7" data-i18n-title="charged-magic" data-i18n-aria-label="charged-magics" title="Charged magic items" data-i18n="charged">Charged</label>
					<input type="radio" class="sheet-tabinput sheet-tab4 sheet-narrow-tab" name="attr_equipment_tab" value="5" data-i18n-aria-label="other-magic" data-i18n-title="other-magic" title="Other Magic" />
					<label role="menuitem" class="sheet-tab sheet-tab4 sheet-narrow-tab" data-i18n-title="other-magic" data-i18n-aria-label="other-magic" title="Other Magic" data-i18n="other-magic-abbrv">Magic</label>
					<input type="radio" class="sheet-tabinput sheet-tab5 sheet-narrow-tab" name="attr_equipment_tab" value="6" data-i18n-aria-label="adventuring-gear-tool" data-i18n-title="adventuring-gear-tool" title="Adventuring gear or tools" />
					<label role="menuitem" class="sheet-tab sheet-tab5 sheet-narrow-tab" data-i18n-title="adventuring-gear-tool" data-i18n-aria-label="adventuring-gear-tool" title="Adventuring gear or tools" data-i18n="gear">Gear</label>
					<input type="radio" class="sheet-tabinput sheet-tab6 sheet-narrow-tab" name="attr_equipment_tab" value="7" data-i18n-aria-label="other" data-i18n-title="other" title="Other" />
					<label role="menuitem" class="sheet-tab sheet-tab6 sheet-narrow-tab" data-i18n-title="other" data-i18n-aria-label="other" title="Other" data-i18n="other-1-abbrv">Oth 1</label>
					<input type="radio" class="sheet-tabinput sheet-tab8 sheet-narrow-tab" name="attr_equipment_tab" value="9" data-i18n-aria-label="other" data-i18n-title="other" title="Other" />
					<label role="menuitem" class="sheet-tab sheet-tab8 sheet-narrow-tab" data-i18n-title="other" data-i18n-aria-label="other" title="Other" data-i18n="other-2-abbrv">Oth 2</label>
					<input type="radio" class="sheet-tabinput sheet-tab99" name="attr_equipment_tab" value="99" data-i18n-aria-label="all" data-i18n-title="all" title="All" checked />
					<label role="menuitem" class="sheet-tab sheet-tab99" data-i18n-title="all" data-i18n-aria-label="all" title="All" data-i18n="all">All</label>
					<div class="sheet-divider-db-lg"></div>
					<input type="radio" class="sheet-tabinput sheet-tab9" name="attr_equipment_tab" value="10" data-i18n-aria-label="carried" data-i18n-title="carried" title="Carried" />
					<label role="menuitem" class="sheet-tab sheet-tab9" data-i18n-title="carried" data-i18n-aria-label="carried" title="Carried" data-i18n="carried">Carried</label>
					<input type="radio" class="sheet-tabinput sheet-tab10 sheet-wider-tab" name="attr_equipment_tab" value="11" data-i18n-aria-label="not-carried" data-i18n-title="not-carried" title="Not Carried" />
					<label role="menuitem" class="sheet-tab sheet-tab10 sheet-wider-tab" data-i18n-title="not-carried" data-i18n-aria-label="not-carried" title="Carried" data-i18n="not-carried">Not Carried</label>
					<span class="sheet-nontable-name" >&nbsp;</span>
					<div class="sheet-table">
						<span class="sheet-table-cell sheet-left" style="width: 76%;">&nbsp;</span>
						<span class="sheet-table-cell sheet-right" style="width: 8%;min-width: 6em;"><b data-i18n="totals">Totals:</b></span>
						<span class="sheet-table-cell sheet-left" style="width: 8%;min-width: 6em;"><input title="@{item_total_weight}" type="number" name="attr_item_total_weight" value="0" class="sheet-calc" readonly="">
						<b title="Weight in pounds" data-i18n-title="pounds-title" data-i18n-aria-label="pounds-title" data-i18n="pounds-abbrv">lbs.</b></span>						
						<span class="sheet-table-cell sheet-left" style="width: 8%;min-width: 6em;"><input title="@{item-total-value}" type="number" name="attr_item-total-value" value="0" class="sheet-calc" readonly="">
						<b title="Gold pieces" data-i18n-title="gold-pieces" data-i18n-aria-label="gold-pieces" data-i18n="gold-pieces-abbrv">GP</b></span>
						<!-- keep these in case someone needs them -->
						<input title="@{item-total-hp}" type="hidden" name="attr_item-total-hp" value="0" class="sheet-calc" readonly="">					
						<input title="@{item-total-hp|max}" type="hidden" name="attr_item-total-hp_max" value="0" class="sheet-calc" readonly="">
					</div>
					<input type="checkbox" name="attr_is_npc" value="1" class="sheet-noshow sheet-npc-show" />
					<!-- hide/show some fields -->
					<label style="position: absolute;margin-top: -1.75em;"><input type="checkbox" class="sheet-boldlabel-check" name="attr_inventory_onetime_show" title="@{inventory_onetime_show}" value="1" role="presentation" checked /><b data-i18n-title="show-onetime-item-fields-title" data-i18n-aria-label="show-onetime-item-fields-title" title="Show item equipment type, hardness, item-hp, item-hp|max, and value." data-i18n="show-more-fields">Show more fields</b></label>							
					<input type="checkbox" class="sheet-inventory-onetime-show sheet-noshow" name="attr_inventory_onetime_show" value="1" role="presentation" checked />		
					<div class="sheet-sect sheet-table sheet-repeating-fields sheet-hiderepborder">
						<fieldset class="repeating_item">
							<span class="sheet-error"><span class="sheet-pictos">!</span><span data-i18n="error-msg1">Error! You must delete this row before editing any items in this section.</span></span>
							<input type="radio" name="attr_equiptype-tab" value="0" class="sheet-tabcopy sheet-custnavsection-new" checked role="presentation" />
							<input type="radio" name="attr_equiptype-tab" value="1" class="sheet-tabcopy sheet-custnavsection-0" role="presentation" />
							<input type="radio" name="attr_equiptype-tab" value="2" class="sheet-tabcopy sheet-custnavsection-1" role="presentation" />
							<input type="radio" name="attr_equiptype-tab" value="3" class="sheet-tabcopy sheet-custnavsection-2" role="presentation" />
							<input type="radio" name="attr_equiptype-tab" value="4" class="sheet-tabcopy sheet-custnavsection-3" role="presentation" />
							<input type="radio" name="attr_equiptype-tab" value="5" class="sheet-tabcopy sheet-custnavsection-4" role="presentation" />
							<input type="radio" name="attr_equiptype-tab" value="6" class="sheet-tabcopy sheet-custnavsection-5" role="presentation" />
							<input type="radio" name="attr_equiptype-tab" value="7" class="sheet-tabcopy sheet-custnavsection-6" role="presentation" />
							<input type="radio" name="attr_equiptype-tab" value="8" class="sheet-tabcopy sheet-custnavsection-7" role="presentation" />
							<input type="radio" name="attr_equiptype-tab" value="9" class="sheet-tabcopy sheet-custnavsection-8" role="presentation" />
							<input type="radio" name="attr_loctype-tab" value="-1" class="sheet-noshow" role="presentation" />
							<input type="radio" name="attr_loctype-tab" value="0" class="sheet-tabcopy sheet-custnavsection-9" role="presentation" checked />
							<input type="radio" name="attr_loctype-tab" value="1" class="sheet-tabcopy sheet-custnavsection-10" role="presentation" />
							<div class="sheet-nontable-repeating sheet-custrepeating-border compendium-drop-target Items">
								<input type="checkbox" class="sheet-counted sheet-sect-show" data-i18n-title="minimize-cmd" data-i18n-aria-label="minimize-cmd" title="Minimize Row" name="attr_row-show" value="1" checked /><span class="sheet-table-cell"></span>
								<span class="sheet-repeating-rollbutton sheet-sect-pc"><button type="roll" name="attr_roll" title="%{selected|repeating_item_$X_roll}" value="@{PC-whisper} @{macro-text}"></button></span>
								<span class="sheet-repeating-rollbutton sheet-sect-npc"><button type="roll" name="attr_npc-roll" title="%{selected|repeating_item_$X_npc-roll}" value="@{NPC-whisper} @{macro-text}"></button></span>
								<label class="sheet-small-label2 sheet-small-label sheet-hide-readonly" style="width:2.5em;"><input type="checkbox" name="attr_showinmenu" title="@{repeating_item_$X_showinmenu}" value="1"  /><span data-i18n="show-in-menu" data-i18n-title="show-in-menu-title" data-i18n-aria-label="show-in-menu-title">Show</span></label>
								<label class="sheet-small-label2 sheet-small-label"><input title="@{repeating_item_$X_name}" type="text" name="attr_name" value="" accept="Name" placeholder="Item Name" data-i18n-placeholder="item-name"><span data-i18n="name">Name</span></label>
								<label class="sheet-small-label2 sheet-small-label"><textarea class="sheet-inline-textarea sheet-both" title="@{repeating_item_$X_short-description}" name="attr_short-description" placeholder="Short Description" data-i18n-placeholder="short-description" data-i18n-aria-label="worn-equipment-short-desc-title" ></textarea><span data-i18n-title="worn-equipment-short-desc-title" data-i18n-aria-label="worn-equipment-short-desc-title" data-i18n="short-description-abbrv">Short Desc</span></label>
								<label class="sheet-small-label2 sheet-small-label sheet-items-toggle-except-on-all" style="width:15%;">
									<select title="@{repeating_item_$X_equip-type}" name="attr_equip-type" class="sheet-select-small">
										<option value="0" data-i18n="select-one-default" selected>Select One</option>
										<option value="1" data-i18n="weapon" >Weapon</option>
										<option value="2" data-i18n="armor-or-shield">Armor or Shield</option>
										<option value="3" data-i18n="ammunition">Ammunition</option>
										<option value="4" data-i18n="consumable">Consumable</option>
										<option value="8" data-i18n="charged-magic">Charged magic item</option>
										<option value="5" data-i18n="other-magic">Other Magic</option>
										<option value="6" data-i18n="gear-or-tool">Gear or Tool</option>
										<option value="7" data-i18n="other-1">Other 1</option>
										<option value="9" data-i18n="other-2">Other 2</option>
									</select>
									<span data-i18n="equipment-type-abbrv">Equip Type</span>
								</label>
								<input type="number" name="attr_old_location" style="display:none;" value="0" />
								<label class="sheet-small-label2 sheet-small-label" style="width:10%;" >
									<select title="@{repeating_item_$X_location}" name="attr_location" class="sheet-select-small sheet-entry-wide"  data-i18n-aria-label="worn-equipment-slot-title">
										<option value="0" data-i18n="carried-default" selected>&#8226;Carried</option>
										<option value="1" data-i18n="not-carried">Not Carried</option>
										<option value="2" data-i18n="armor">Armor</option>
										<option value="3" data-i18n="belt">Belt</option>
										<option value="4" data-i18n="body">Body</option>
										<option value="5" data-i18n="chest">Chest</option>
										<option value="6" data-i18n="eyes">Eyes</option>
										<option value="7" data-i18n="feet">Feet</option>
										<option value="8" data-i18n="hands">Hands</option>
										<option value="9" data-i18n="head">Head</option>
										<option value="10" data-i18n="headband">Headband</option>
										<option value="11" data-i18n="neck">Neck</option>
										<option value="12" data-i18n="ring-one">Ring 1</option>
										<option value="13" data-i18n="ring-two">Ring 2</option>
										<option value="14" data-i18n="shield">Shield</option>
										<option value="15" data-i18n="shoulders">Shoulders</option>
										<option value="16" data-i18n="wrist">Wrist</option>
									</select>
									<span data-i18n-title="worn-equipment-slot-title" data-i18n-aria-label="worn-equipment-slot-title" data-i18n="location">Location</span>
								</label>
								<div class="sheet-linked-fields">
									<label class="sheet-small-label2 sheet-small-label">
										<input title="@{repeating_item_$X_qty}" type="number" name="attr_qty" value="0" aria-label-i18n="worn-equipment-quantity-title" />
										<span data-i81n-title="worn-equipment-quantity-title" data-i18n="quantity-abbrv" >Qty</span>
									</label>
									<span class="sheet-divider-db-lg sheet-sect sheet-hide-readonly sheet-items-toggle" style="width:.1%;">/</span>
									<label class="sheet-small-label2 sheet-small-label sheet-hide-readonly sheet-sect sheet-items-toggle"><input title="@{repeating_item_$X_qty|max}" type="number" name="attr_qty_max" value="0" /><span data-i18n="maximum-abbrv">Max</span></label>
								</div>
								<label class="sheet-small-label2 sheet-small-label"><input title="@{repeating_item_$X_item-weight}" type="number" name="attr_item-weight" value="0" step="any" /><span data-i18n="weight-abbrv">Wt</span></label>
								<label class="sheet-small-label2 sheet-small-label sheet-hide-readonly sheet-sect sheet-items-toggle"><input title="@{repeating_item_$X_hardness}" type="number" name="attr_hardness" value="0" step="any" min="0" /><span data-i18n="hardness-abbrv">Hard</span></label>
								<div class="sheet-linked-fields sheet-hide-readonly sheet-items-toggle">
									<label class="sheet-small-label2 sheet-small-label sheet-sect"><input title="@{repeating_item_$X_item-hp}" type="number" name="attr_item-hp" value="0" step="any" /><span data-i18n="item-hit-points-abbrv">HP</span></label>
									<span class="sheet-divider-db-lg sheet-sect" style="width:.1%;">/</span>
									<label class="sheet-small-label2 sheet-small-label sheet-sect"><input title="@{repeating_item_$X_item-hp|max}" type="number" name="attr_item-hp_max" value="0" step="any" min="0" /><span data-i18n="maximum-abbrv">Max</span></label>
								</div>								
								<label class="sheet-small-label2 sheet-small-label sheet-sect sheet-items-toggle"><input title="@{repeating_item_$X_value}" type="number" name="attr_value" value="0" step="any" min="0" /><span data-i18n="value">Value</span></label>
								<div style="display:none;">
										<input type="text" name="attr_item-critical_compendium" value="" accept="Critical"  />
										<input type="text" name="attr_item-meddamage_compendium" value="" accept="Single-Handed Damage"  />
										<input type="text" name="attr_item-smalldamage_compendium" value="" accept="Double-Handed Damage"  />
										<input type="text" name="attr_item-category_compendium" value="" accept="Category"  />
										<input type="text" name="attr_item-specialtype_compendium" value="" accept="Special"  />
										<input type="text" name="attr_item-speed20_compendium" value="" accept="Speed 20ft."  />
										<input type="text" name="attr_item-speed30_compendium" value="" accept="Speed 30ft."  />
										<input type="text" name="attr_item-weight_compendium" value="" accept="Weight"  />
										<input type="text" name="attr_item-value_compendium" value="" accept="Cost"  />
										<input type="text" name="attr_item-range_compendium" value="" accept="Range"  />
										<input type="text" name="attr_item-spell-fail_compendium" value="" accept="Arcane Spell Failure Chance"  />
										<input type="text" name="attr_item-acbonus_compendium" value="" accept="Armor/Shield Bonus"  />
										<input type="text" name="attr_item-acp_compendium" value="" accept="Armor Check Penalty"  />
									</div>
								<div class="sheet-sect sheet-expand sheet-hide-readonly" style="margin-top:.5em;">
									<input type="checkbox" class="sheet-showarrow sheet-armor-attributes-show" title="Click to expand" data-i18n-title="showsect-cmd" data-i18n-aria-label="showsect-cmd" aria-label="Show Armor Attributes" name="attr_armor-attributes-show" value="1" />
									<label class="sheet-showsect sheet-armor-attributes-showlabel" data-i18n="armor-attributes">Armor Attributes</label>
									<input type="checkbox" class="sheet-showarrow sheet-weapon-attributes-show" title="Click to expand" data-i18n-title="showsect-cmd" data-i18n-aria-label="showsect-cmd" aria-label="Show Weapon Attributes" name="attr_weapon-attributes-show" value="1" />
									<label class="sheet-showsect sheet-weapon-attributes-showlabel" data-i18n="weapon-attributes">Weapon Attributes</label>
									<input type="checkbox" class="sheet-showarrow sheet-desc-show" title="Click to expand" data-i18n-title="showsect-cmd" data-i18n-aria-label="showsect-cmd" aria-label="Show Description" name="attr_description-show" value="1" />
									<label class="sheet-showsect sheet-desc-showlabel" data-i18n="description">Description</label>
									<input type="checkbox" class="sheet-showarrow sheet-macro-text-show" title="Click to expand" data-i18n-title="showsect-cmd" data-i18n-aria-label="showsect-cmd" aria-label="Show Macro Text" name="attr_macro-text-show" value="1" />
									<label class="sheet-showsect sheet-macro-text-showlabel sheet-super sheet-note-d" data-i18n="macro-text">Macro Text</label> 
									<input type="checkbox" class="sheet-showarrow sheet-id-show" title="Click to expand" data-i18n-title="showsect-cmd" data-i18n-aria-label="showsect-cmd" aria-label="Show Row ID" name="attr_ids-show" value="1" />
									<label class="sheet-showsect sheet-id-showlabel" data-i18n="identification-abbrv">ID</label>
									<hr class="sheet-subnav-hr">
									<div class="sheet-cheat"></div>
									<div class="sheet-armor-attributes">								
										<label class="sheet-small-label2" style="width:5em;">
											<input type="checkbox" name="attr_set-as-armor" value="1" class="sheet-cssbutton sheet-addarmorbutton" title="@{set-as-armor}" data-i18n-aria-label="set-as-armor"><span></span>
											<span data-i18n-title="set-as-armor" data-i18n-aria-label="set-as-armor" data-i18n="set-armor" >Set Armor</span>
										</label>
										<label class="sheet-small-label2" style="width:5em;">
											<input type="checkbox" name="attr_set-as-shield" value="1" class="sheet-cssbutton sheet-addshieldbutton" title="@{set-as-shield}" data-i18n-aria-label="set-as-shield"><span></span>
											<span data-i18n-title="set-as-shield" data-i18n-aria-label="set-as-shield"  data-i18n="set-shield" >Set Shield</span>
										</label>
										<label class="sheet-small-label2"><input title="@{repeating_item_$X_item-acbonus}" name="attr_item-acbonus" type="number" value="0" min="0" /><span data-i18n-title="armor-shield-bonus" data-i18n-aria-label="armor-shield-bonus" title="Armor or Shield bonus to Armor Class" data-i18n="armor-class-bonus">AC Bonus</span></label>
										<label class="sheet-small-label2"><input title="@{repeating_item_$X_item-acenhance}" name="attr_item-acenhance" type="number" value="0" /><span data-i18n="enhancement-abbrv">Enh</span></label>
										<label class="sheet-small-label2"><input title="@{repeating_item_$X_item-max-dex}" name="attr_item-max-dex" type="text" value="-" accept="Maximum Dex Bonus" class="sheet-number" /><span data-i18n="maximum-dexterity-bonus-abbrv">Max Dex</span></label>
										<label class="sheet-small-label2"><input title="@{repeating_item_$X_item-acp}" name="attr_item-acp" type="number" value="0" max="0" /><span data-i18n-title="negative-number" data-i18n-aria-label="negative-number" data-i18n="armor-check-penalty-abbrv">ACP</span></label>
										<label class="sheet-small-label2"><input title="@{repeating_item_$X_item-spell-fail}" name="attr_item-spell-fail" type="number" value="0" min="0" max="100" /><span class="sheet-nowrap" data-i18n="spell-failure">Spell Fail</span></label>
										<label class="sheet-small-label2 sheed-divider-db-lg sheet-left">%</label>
										<label class="sheet-small-label2">
											<select class="sheet-select-small" title="@{repeating_item_$X_item-defense-type}" name="attr_item-defense-type">
												<option value="Light" data-i18n="light" selected>Light</option>
												<option value="Medium" data-i18n="medium">Medium</option>
												<option value="Heavy" data-i18n="heavy">Heavy</option>
												<option value="Tower Shield" data-i18n="tower">Tower Shield</option>
											</select>
											<span data-i18n="armor-type">Armor or Shield Type</span>
										</label>
										<label class="sheet-small-label2">								
											<select title="@{repeating_item_$X_item-proficiency}" name="attr_item-proficiency" class="sheet-select-small">
												<option value="0" data-i18n="yes-default" selected>Yes</option>
												<option value="1" data-i18n="no">No</option>
											</select>
											<span data-i18n="proficiency">Proficiency</span>
										</label>								
									</div>
									<div class="sheet-weapon-attributes sheet-show-grp1">
										<label class="sheet-small-label2" style="width:5em;">
											<input type="checkbox" name="attr_create-attack-entry" value="1" class="sheet-cssbutton sheet-createattackbutton" title="Create a new attack based on this weapon." data-i18n-title="create-attack-entry" data-i18n-aria-label="create-attack-entry"><span></span>
											<span data-i18n-title="create-attack-entry" data-i18n-aria-label="create-attack-entry" data-i18n="create-attack" >Create Attack</span>
										</label>
										<label class="sheet-small-label2 sheet-entry-short">
											<select class="sheet-select-small" title="@{repeating_item_$X_item-attack-type}" name="attr_item-attack-type">
												<option value="0" data-i18n="none-default" selected>&#8226;None</option>
												<option value="@{attk-melee}" data-i18n="melee">Melee</option>
												<option value="@{attk-melee2}" data-i18n="melee2">Melee2</option>
												<option value="@{attk-ranged}" data-i18n="ranged">Ranged</option>
												<option value="@{attk-ranged2}" data-i18n="ranged2">Ranged2</option>
												<option value="@{CMB}" data-i18n="combat-maneuver-bonus-abbrv">CMB</option>
												<option value="@{CMB2}" data-i18n="combat-maneuver-bonus-abbrv2">CMB2</option>
											</select>
											<span data-i18n="attack-type">Attack Type</span>
										</label>
										
										<label class="sheet-small-label2"><input title="@{repeating_item_$X_item-wpenhance}" name="attr_item-wpenhance" type="number" value="0" min="0" /><span data-i18n="enhancement-abbrv">Enh</span></label>
										<label class="sheet-small-label2 sheet-sect" style="width:2.5em;"><input title="@{repeating_item_$X_item-masterwork}" name="attr_item-masterwork" type="checkbox" value="1" /><span data-i18n="masterwork-abbrv">Mwk</span></label>
										<label class="sheet-small-label2"><input title="@{repeating_item_$X_item-damage-dice-num}" name="attr_item-damage-dice-num" type="number" value="0" min="0" /><span data-i18n="dice">Dice</span></label>
										<span class="sheet-divider-db-lg" style="padding-bottom: 10px;margin-right:-.125em;" data-i18n="dice-abbrv">d</span>
										<label class="sheet-small-label2"><input title="@{repeating_item_$X_item-damage-die}" name="attr_item-damage-die" type="number" value="0" min="0" /><span data-i18n="die">Die</span></label>
										<span class="sheet-divider-db-lg" style="padding-bottom: 10px;margin-right:-.125em;">+</span>
										<label class="sheet-small-label2 sheet-entry-med"><input title="@{repeating_item_$X_item-damage}" name="attr_item-damage" type="text" value="" /><span data-i18n-placeholder="equation-macro-place" placeholder="#/Equation" data-i18n="damage-abbrv">Dmg</span></label>
										<label class="sheet-small-label2"><input title="@{repeating_item_$X_item-crit-target}" name="attr_item-crit-target" type="number" value="20" min="1" /><span data-i18n="critical-abbrv">Crit</span></label>
										<label class="sheet-small-label2"><input title="@{repeating_item_$X_item-crit-multiplier}" name="attr_item-crit-multiplier" type="number" value="2" min="0" /><span data-i18n="multiplier-abbrv">Mult</span></label>
										<label class="sheet-small-label2"><input title="@{repeating_item_$X_item-range}" name="attr_item-range" type="number" value="0" min="0" /><span data-i18n="range-in-feet">Range</span></label>
										<label class="sheet-small-label2 sheet-entry-small"><input title="@{repeating_item_$X_item-dmg-type}" name="attr_item-dmg-type" type="text" value="" accept="Type" /><span data-i18n="damage-type">Damage Type</span></label>
										<label class="sheet-small-label2 sheet-entry-med">
											<select title="@{repeating_item_$X_default_size}" name="attr_default_size" >
												<option value="-8" data-i18n="size-colossal">Colossal</option>
												<option value="-4" data-i18n="size-gargantuan">Gargantuan</option>
												<option value="-2" data-i18n="size-huge">Huge</option>
												<option value="-1" data-i18n="size-large">Large</option>
												<option value="0" data-i18n="medium-abbrv-default" selected>&#8226;Medium</option>
												<option value="1" data-i18n="size-small">Small</option>
												<option value="2" data-i18n="size-tiny">Tiny</option>
												<option value="4" data-i18n="size-diminutive">Diminutive</option>
												<option value="8" data-i18n="size-fine">Fine</option>
											</select>
											<span data-i18n="default-size">Default Size</span>
										</label>
										<br/>
										<label class="sheet-small-label2 sheet-entry-20p-shrink" >
											<textarea class="sheet-inline-textarea sheet-both" type="text" name="attr_item-precision_dmg_macro" title="@{repeating_item_$X_item-precision_dmg_macro}" placeholder="Macro/Query" data-i18n-placeholder="full-macro-place"></textarea>
											<span class="sheet-super sheet-note-b" data-i18n-title="precision-damage-title" data-i18n-aria-label="precision-damage-title" title="Extra or Precision Damage (not added to critical damage)" data-i18n="extra-damage">Extra Non-Crit Dmg</span>
										</label>
										<label class="sheet-small-label2 sheet-entry-20p-shrink">
											<input style="height:2.15em;" type="text" name="attr_item-precision_dmg_type" title="@{repeating_item_$X_item-precision_dmg_type}" value="" placeholder="Dmg type / Description" data-i18n-placeholder="damage-type-or-description" />
											<span data-i18n-title="precision-damage-type" data-i18n-aria-label="precision-damage-type" title="Extra Damage type" data-i18n="type">Type</span>
										</label>
										<label class="sheet-small-label2 sheet-entry-20p-shrink">
											<textarea class="sheet-inline-textarea sheet-both" type="text" name="attr_item-critical_dmg_macro" title="@{repeating_item_$X_item-critical_dmg_macro}" placeholder="Macro/Query" data-i18n-placeholder="full-macro-place"></textarea>
											<span class="sheet-super sheet-note-b" data-i18n-title="extra-critical-damage-title" data-i18n-aria-label="extra-critical-damage-title" title="Extra Critical Damage" data-i18n="extra-critical-damage">Extra Crit Dmg</span>
										</label>
										<label class="sheet-small-label2 sheet-entry-20p-shrink">
											<input style="height:2.15em;" type="text" name="attr_item-critical_dmg_type" title="@{repeating_item_$X_item-critical_dmg_type}" value="" placeholder="Dmg type / Description" data-i18n-placeholder="damage-type-or-description" />
											<span data-i18n-title="precision-damage-type" data-i18n-aria-label="precision-damage-type" title="Extra Damage type" data-i18n="type">Type</span>
										</label>
										<label class="sheet-small-label2">								
											<select title="@{repeating_item_$X_item-proficiency}" name="attr_item-proficiency" class="sheet-select-small">
												<option value="0" data-i18n="yes-default" selected>Yes</option>
												<option value="1" data-i18n="no">No</option>
											</select>
											<span data-i18n="proficiency-abbrv">Prof</span>
										</label>								
									</div>
									<input type="hidden" name="attr_has_uses" value="" />
									<textarea class="sheet-desc" title="@{repeating_item_$X_description}" name="attr_description" accept="content" ></textarea>
									<textarea class="sheet-macro-text" title="@{repeating_item_$X_macro-text}" name="attr_macro-text">&{template:pf_block} @{toggle_accessible_flag} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_block-item}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle}} {{name=@{name}}} {{hasuses=@{has_uses}}} {{qty=@{qty}}} {{qty_max=@{qty_max}}} {{shortdesc=@{short-description}}} {{description=@{description}}}</textarea>
									<div class="sheet-repeating-id">
										<span data-i18n="row-identification-for-macros">Row ID for macros</span>: <span class="sheet-selectable" name="attr_row_id" />
									</div>
								</div>						
							</div>
						</fieldset>
					</div>
					<div class="sheet-table">
						<span class="sheet-table-cell sheet-left" style="width: 76%;">&nbsp;</span>
						<span class="sheet-table-cell sheet-right" style="width: 8%;min-width: 6em;"><b data-i18n="totals">Totals</b></span>
						<span class="sheet-table-cell sheet-left" style="width: 8%;min-width: 6em;"><input title="@{item_total_weight}" type="number" name="attr_item_total_weight" value="0" class="sheet-calc" readonly="">
						<b title="Weight in pounds" data-i18n-title="pounds-title" data-i18n-aria-label="pounds-title" data-i18n="pounds-abbrv">lbs.</b></span>						
						<span class="sheet-table-cell sheet-left" style="width: 8%;min-width: 6em;"><input title="@{item-total-value}" type="number" name="attr_item-total-value" value="0" class="sheet-calc" readonly="">
						<b title="Gold pieces" data-i18n-title="gold-pieces" data-i18n-aria-label="gold-pieces" data-i18n="gold-pieces-abbrv">GP</b></span>
					</div>
				</div>
				<!-- xp at end of sheet in read mode -->
				<div class="sheet-h2-section sheet-experience sheet-show-readonly sheet-inverse-readonly sheet-wide-readonly">
					<div class="sheet-table sheet-sect">
						<span class="sheet-table-name" data-i18n="experience-points-abbrv">XP</span>
						<div class="sheet-table-group-head">
							<input class="sheet-sect-show sheet-noshow" type="checkbox" name="attr_use_prestige_fame" value="1" />
							<input class="sheet-sect2-show sheet-noshow" type="checkbox" name="attr_use_hero_points" value="1" />
							<span class="sheet-table-header" data-i18n="current-experience" >Current Experience</span>
							<span class="sheet-table-header">/</span>
							<span class="sheet-table-header" data-i18n="next-level">Next Level</span>
							<span class="sheet-table-header sheet-divider sheet-sect">|</span>
							<span class="sheet-table-header sheet-sect" data-i18n="prestige-points">Prestige Points</span>
							<span class="sheet-table-header sheet-sect">/</span>
							<span class="sheet-table-header sheet-sect" data-i18n="fame">Fame</span>
							<span class="sheet-table-header sheet-divider sheet-sect2">|</span>
							<span class="sheet-table-header sheet-sect2" data-i18n="hero-points">Hero Points</span>
						</div>
						<div class="sheet-table-row">
							<input class="sheet-sect-show sheet-noshow" type="checkbox" name="attr_use_prestige_fame" value="1" />
							<input class="sheet-sect2-show sheet-noshow" type="checkbox" name="attr_use_hero_points" value="1" />
							<span class="sheet-table-cell"><input class="sheet-entry-wide" title="@{experience}" type="number" name="attr_experience" placeholder="Current Experience" data-i18n-placeholder="experience-current-place" /></span>
							<span class="sheet-divider-lg">/</span>
							<span class="sheet-table-cell"><input class="sheet-entry-wide" title="@{experience|max}" type="number" name="attr_experience_max" placeholder="Next Level" data-i18n-placeholder="experience-next" /></span>
							<span class="sheet-divider-lg sheet-sect">|</span>
							<span class="sheet-table-cell sheet-sect"><input class="sheet-entry-wide" title="@{prestige}" type="number" name="attr_prestige" placeholder="Prestige Points" data-i18n-placeholder="prestige-points" /></span>
							<span class="sheet-divider-lg sheet-sect">/</span>
							<span class="sheet-table-cell sheet-sect"><input class="sheet-entry-wide" title="@{fame}" type="number" name="attr_fame" placeholder="Fame" data-i18n-placeholder="fame" /></span>
							<span class="sheet-divider-lg sheet-sect2">|</span>
							<span class="sheet-table-cell sheet-sect2"><input class="sheet-entry-wide" title="@{hero-points}" type="number" name="attr_hero-points" placeholder="Hero Points" data-i18n-placeholder="hero-points" /></span>
						</div>
					</div>
					<input class="sheet-nextitem-show" type="checkbox" name="attr_use_prestige_fame" value="1" />
					<div class="sheet-faction-notes sheet-nextitem" style="width:99%;margin-top:.5em;">
						<label class="sheet-left sheet-small-label" style="display: block;" data-i18n="faction-notes">Faction Notes</label>
						<textarea class="sheet-notes sheet-inline-textarea" title="@{faction_notes}" name="attr_faction_notes" Placeholder="Fame, Prestige, and Faction Notes" data-i18n-placeholder="faction-notes-place"></textarea>
					</div>
				</div>
			</div>
			<div class="sheet-section8 sheet-section sheet-section-npc" role="region" aria-label="NPC" data-i18n-aria-label="npc">
				<h1 class="sheet-selected-tabtitle sheet-offscreen" data-i18n="npc">NPC</h1>
				<input class="sheet-showarrow sheet-h2arrow" type="checkbox" name="attr_npc-compimport-show" data-i18n-aria-label="quick-stats" title="Click to expand" data-i18n-title="showsect-cmd" value="1" checked />
				<h2 class="sheet-clickheader sheet-showsect"><label title="Click to expand" data-i18n-title="showsect-cmd" data-i18n-aria-label="showsect-cmd" data-i18n="npc-statblock-header">Compendium statblock fields for parsing</label></h2>
				<div class="sheet-h2-section sheet-hide-readonly" role="section" data-i18n-aria-label="npc-statblock-header" style="border-width:2px;border-style:solid;border-color:black;padding:.75em;">
					<div class="compendium-drop-target Beastiary">
						<span class="sheet-nontable-name sheet-show-readonly" data-i18n="npc-statblock-import" >Statblock Import</span>
						<div class="sheet-left">
							<span data-i18n="npc-statblock-parse-instructions">Drag a monster from the compendium here, or type in the statblock values below. Then hit the parse button. The parser will populate the sheet with the underlying stats and attacks.</span>
							<span data-i18n="npc-statblock-textarea-instructions">For multiline textareas, paste in exactly as appears in source. Keep newlines in input.</span> 
							<br/>
 							<input class="sheet-csstextbutton sheet-sect-show" type="checkbox" title="@{npc_import_now}" name="attr_npc_import_now" value="1" /><span data-i18n="parse">Parse</span>
							<span class="sheet-sect sheet-progress-icon"><img src="http://i.imgur.com/XKktDjC.gif" />&nbsp;<span data-i18n="loading">Loading...</span></span>
							<span class="sheet-compendium-note sheet-hide-readonly" >
								<span class="sheet-compendium-icon">i</span>
								<span class="sheet-vertical-middle" data-i18n-title="compendium-drag-n-drop-desc" data-i18n-aria-label="compendium-drag-n-drop-desc" data-i18n="compendium-drag-drop-compatible"> Compendium drag-n-drop compatible </span>
								<span class="sheet-drag-icon">&#9111;</span>
							</span>					
						</div>
						<div class="sheet-nontable">
							<label class="sheet-small-label2 sheet-autoexpand"><input type="text" name="attr_character_name" accept="Name" value="" title="@{character_name}"/><span data-i18n="name">Name</span><span name="attr_character_name" class="sheet-autoexpand"></span></label>
							<label class="sheet-small-label2 sheet-autoexpand"><input type="text" name="attr_cr_compendium" accept="CR" value="" title="@{cr_compendium}"/><span data-i18n="challenge-rating-abbrv">CR</span><span name="attr_cr_compendium" class="sheet-autoexpand"></span></label>
							<label class="sheet-small-label2 sheet-autoexpand"><input type="text" name="attr_xp_compendium" accept="XP" value="" title="@{xp_compendium}"/><span data-i18n="experience-points-abbrv">XP</span><span name="attr_xp_compendium" class="sheet-autoexpand"></span></label>
							<label class="sheet-small-label2 sheet-autoexpand"><input type="text" name="attr_alignment" accept="Alignment" value="" placeholder="Alignment" title="@{alignment}" data-i18n-placeholder="alignment"/><span data-i18n="alignment">Alignment</span><span name="attr_alignment" class="sheet-autoexpand"></span></label>
							<label class="sheet-small-label2 sheet-autoexpand"><input type="text" name="attr_size_compendium" accept="Size" value="" title="@{size_compendium}" /><span data-i18n="size">Size</span><span name="attr_size_compendium" class="sheet-autoexpand"></span></label>
							<label class="sheet-small-label2 sheet-autoexpand"><input type="text" name="attr_type_compendium" accept="Creature Type" value="" title="@{type_compendium}" placeholder="Type (sub-type)" data-i18n-placeholder="type-or-sub-type" /><span data-i18n="type-or-sub-type">Type/(sub-type)</span><span name="attr_type_compendium" class="sheet-autoexpand"></span></label>
							<label class="sheet-small-label2 sheet-autoexpand"><input type="text" name="attr_init_compendium" accept="Init" value="" title="@{init_compendium}" /><span data-i18n-placeholder="npc-initiative-compendium-example" data-i18n-title="npc-initiative-compendium-example" data-i18n-aria-label="npc-initiative-compendium-example"  data-i18n="alignment-type-init">Init</span><span name="attr_init_compendium" class="sheet-autoexpand"></span></label>
							<label class="sheet-small-label2 sheet-autoexpand"><input type="text" name="attr_senses_compendium" accept="Senses" value="" title="@{senses_compendium}" data-i18n-placeholder="npc-senses-compendium-place"/><span data-i18n="senses">Senses</span><span name="attr_senses_compendium" class="sheet-autoexpand"></span></label>
							<label class="sheet-small-label2 sheet-autoexpand"><input type="text" name="attr_npc-aura" accept="Aura" value="" title="@{npc-aura}" placeholder="Aura" data-i18n-placeholder="npc-aura-compendium-place" /><span data-i18n="aura">Aura</span><span name="attr_npc-aura" class="sheet-autoexpand"></span></label>
							<hr/>
							<label class="sheet-small-label2 sheet-autoexpand"><input type="text" name="attr_ac_compendium" accept="AC" value="" title="@{ac_compendium}" data-i18n-placeholder="npc-ac-compendium-place" /><span data-i18n="armor-class-abbrv">AC</span><span name="attr_ac_compendium" class="sheet-autoexpand"></span></label>
							<label class="sheet-small-label2 sheet-autoexpand"><input type="text" name="attr_npc_hp_compendium" accept="HP" value="" title="@{npc_hp_compendium}" /><span data-i18n="hit-points-abbrv">HP</span><span name="attr_npc_hp_compendium" class="sheet-autoexpand"></span></label>
							<label class="sheet-small-label2 sheet-autoexpand"><input type="text" name="attr_fort_compendium" accept="Fort" value="" title="@{fort_compendium}" placeholder="Fort" /><span data-i18n="fortitude-abbrv">Fort</span><span name="attr_fort_compendium" class="sheet-autoexpand"></span></label>
							<label class="sheet-small-label2 sheet-autoexpand"><input type="text" name="attr_ref_compendium" accept="Ref" value="" title="@{ref_compendium}" placeholder="Ref" /><span data-i18n="reflex-abbrv">Ref</span><span name="attr_ref_compendium" class="sheet-autoexpand"></span></label>
							<label class="sheet-small-label2 sheet-autoexpand"><input type="text" name="attr_will_compendium" accept="Will" value="" title="@{will_compendium}" placeholder="Will" /><span data-i18n="willpower-abbrv">Will</span><span name="attr_will_compendium" class="sheet-autoexpand"></span></label>
							<label class="sheet-small-label2 sheet-autoexpand"><input type="text" name="attr_dr_compendium" accept="DR" value="" title="@{dr_compendium}" /><span data-i18n="damage-resistance-abbrv">DR</span><span name="attr_dr_compendium" class="sheet-autoexpand"></span></label>
							<label class="sheet-small-label2 sheet-autoexpand"><input type="text" name="attr_sr_compendium" value="" title="@{sr_compendium}" data-i18n-placeholder="spell-resistance" accept="Spell Resistance" /><span data-i18n="spell-resistance-abbrv">SR</span><span name="attr_sr_compendium" class="sheet-autoexpand"></span></label>
							<label class="sheet-small-label2 sheet-autoexpand"><input type="text" name="attr_npc-defensive-abilities" accept="Defensive Abilities" value="" title="@{npc-defensive-abilities}" placeholder="Defensive abilities" data-i18n-placeholder="defensive-abilities" /><span data-i18n="defensive-abilities">Defensive Abilities</span><span name="attr_npc-defensive-abilities" class="sheet-autoexpand"></span></label>
							<label class="sheet-small-label2 sheet-autoexpand"><input type="text" name="attr_immunities" accept="Immune" value="" title="@{immunities}" data-i18n-placeholder="immunities"/><span data-i18n="immunities">immunities</span><span name="attr_immunities" class="sheet-autoexpand"></span></label>
							<label class="sheet-small-label2 sheet-autoexpand"><input type="text" name="attr_resistances" accept="Resist" value="" title="@{resistances}" data-i18n-placeholder="resistances"/><span data-i18n="resistances">resistances</span><span name="attr_resistances" class="sheet-autoexpand"></span></label>
							<label class="sheet-small-label2 sheet-autoexpand"><input type="text" name="attr_weaknesses" accept="Weaknesses" value="" title="@{weaknesses}" data-i18n-placeholder="weaknesses"/><span data-i18n="weaknesses">weaknesses</span><span name="attr_weaknesses" class="sheet-autoexpand"></span></label>
							<hr/>
							<label class="sheet-small-label2 sheet-autoexpand"><input type="text" name="attr_speed_compendium" accept="Speed" value="" data-i18n-placeholder="speed" /><span data-i18n="speed">Speed</span><span name="attr_speed_compendium" class="sheet-autoexpand"></span></label>
							<label class="sheet-small-label2 sheet-autoexpand"><input type="text" name="attr_space_compendium" accept="Space" value="" data-i18n-placeholder="space" /><span data-i18n="space">Space</span><span name="attr_space_compendium" class="sheet-autoexpand"></span></label>
							<label class="sheet-small-label2 sheet-autoexpand"><input type="text" name="attr_reach_compendium" accept="Reach" value="" data-i18n-placeholder="reach" /><span data-i18n="reach">Reach</span><span name="attr_reach_compendium" class="sheet-autoexpand"></span></label>
							<div class="sheet-cheat"></div>
							<label class="sheet-small-label2 sheet-wide-textareaparent"><textarea class="sheet-inline-textarea"  name="attr_npc-melee-attacks-text" accept="Melee" title="@{npc-melee-attacks-text}" placeholder="Melee attacks from compendium" data-i18n-placeholder="npc-melee-attacks-text-place"></textarea><span data-i18n-title="npc-statblock-textarea-instructions" data-i18n-aria-label="npc-statblock-textarea-instructions" data-i18n="melee">Melee</span></label>
							<label class="sheet-small-label2 sheet-wide-textareaparent"><textarea class="sheet-inline-textarea"  name="attr_npc-ranged-attacks-text" accept="Ranged" title="@{npc-ranged-attacks-text}" placeholder="Ranged attacks from compendium" data-i18n-placeholder="npc-ranged-attacks-text-place"></textarea><span data-i18n-title="npc-statblock-textarea-instructions" data-i18n-aria-label="npc-statblock-textarea-instructions" data-i18n="ranged">Ranged</span></label>
							<label class="sheet-small-label2 sheet-wide-textareaparent"><textarea class="sheet-inline-textarea"  name="attr_npc-special-attacks" accept="Special Attacks" title="@{npc-special-attacks}" placeholder="List all special combat actions here. Do not list feats." data-i18n-placeholder="npc-special-attacks-place"></textarea><span data-i18n-title="npc-statblock-textarea-instructions" data-i18n-aria-label="npc-statblock-textarea-instructions" data-i18n="special-attacks">Special Attacks</span></label>
							<label class="sheet-small-label2 sheet-wide-textareaparent"><textarea class="sheet-inline-textarea"  name="attr_npc-spellike-ability-text" accept="Spell-Like Abilities" title="@{spellike-ability-text}" placeholder="Spell like abilities from compendium" data-i18n-placeholder="npc-spellike-abilities-text-place"></textarea><span data-i18n-title="npc-statblock-textarea-instructions" data-i18n-aria-label="npc-statblock-textarea-instructions" data-i18n="spell-like-abilities">Spell-Like Abilities</span></label>
							<label class="sheet-small-label2 sheet-wide-textareaparent"><textarea class="sheet-inline-textarea"  name="attr_npc-spells-known-text" accept="Spells Known" title="@{npc-spells-known-text}" placeholder="Spells known from compendium" data-i18n-placeholder="npc-spells-known-text-place"></textarea><span data-i18n-title="npc-statblock-textarea-instructions" data-i18n-aria-label="npc-statblock-textarea-instructions" data-i18n="spells-known">Spells Known</span></label>
							<div class="sheet-cheat"></div>
							<hr/>							
							<label class="sheet-small-label2 sheet-autoexpand"><input type="text" name="attr_str_compendium" accept="Str" value="" placeholder="Str" /><span data-i18n="strength-abbrv">STR</span><span name="attr_str_compendium" class="sheet-autoexpand"></span></label>
							<label class="sheet-small-label2 sheet-autoexpand"><input type="text" name="attr_dex_compendium" accept="Dex" value="" placeholder="Dex" /><span data-i18n="dexterity-abbrv">DEX</span><span name="attr_dex_compendium" class="sheet-autoexpand"></span></label>
							<label class="sheet-small-label2 sheet-autoexpand"><input type="text" name="attr_con_compendium" accept="Con" value="" placeholder="Con" /><span data-i18n="constitution-abbrv">CON</span><span name="attr_con_compendium" class="sheet-autoexpand"></span></label>
							<label class="sheet-small-label2 sheet-autoexpand"><input type="text" name="attr_int_compendium" accept="Int" value="" placeholder="Int" /><span data-i18n="intelligence-abbrv">INT</span><span name="attr_int_compendium" class="sheet-autoexpand"></span></label>
							<label class="sheet-small-label2 sheet-autoexpand"><input type="text" name="attr_wis_compendium" accept="Wis" value="" placeholder="Wis" /><span data-i18n="wisdom-abbrv">WIS</span><span name="attr_wis_compendium" class="sheet-autoexpand"></span></label>
							<label class="sheet-small-label2 sheet-autoexpand"><input type="text" name="attr_cha_compendium" accept="Cha" value="" placeholder="Cha" /><span data-i18n="charisma-abbrv">CHA</span><span name="attr_cha_compendium" class="sheet-autoexpand"></span></label>
							<label class="sheet-small-label2 sheet-autoexpand"><input type="text" name="attr_bab_compendium" accept="Base Atk"  value="" placeholder="bab" /><span data-i18n="base-attack-bonus-abbrv">BAB</span><span name="attr_bab_compendium" class="sheet-autoexpand"></span></label>
							<label class="sheet-small-label2 sheet-autoexpand"><input type="text" name="attr_cmb_compendium" accept="CMB"  value="" /><span data-i18n="combat-maneuver-bonus-abbrv">CMB</span><span name="attr_cmb_compendium" class="sheet-autoexpand"></span></label>
							<label class="sheet-small-label2 sheet-autoexpand"><input type="text" name="attr_cmd_compendium" accept="CMD"  value="" /><span data-i18n="combat-maneuver-defense-abbrv">CMD</span><span name="attr_cmd_compendium" class="sheet-autoexpand"></span></label>
							<label class="sheet-small-label2 sheet-autoexpand"><input type="text" name="attr_class_compendium" accept="Monster Class"  value="" placeholder="class" /><span data-i18n="class">Class</span><span name="attr_class_compendium" class="sheet-autoexpand"></span></label>
							<div class="sheet-cheat"></div>
							<label class="sheet-small-label2 sheet-wide-textareaparent"><textarea class="sheet-inline-textarea"  name="attr_npc-feats-text" accept="Feats" data-i18n-placeholder="npc-feats-text" title="@{npc-feats-text}"></textarea><span data-i18n-title="npc-statblock-textarea-instructions" data-i18n-aria-label="npc-statblock-textarea-instructions" data-i18n="feats">Feats</span></label>
							<label class="sheet-small-label2 sheet-wide-textareaparent"><textarea class="sheet-inline-textarea"  name="attr_skills_compendium" accept="Skills" data-i18n-placeholder="skills" title="@{skills_compendium}"></textarea><span data-i18n-title="npc-statblock-textarea-instructions" data-i18n-aria-label="npc-statblock-textarea-instructions" data-i18n="skills">Skills</span></label>
							<label class="sheet-small-label2 sheet-wide-textareaparent"><textarea class="sheet-inline-textarea"  name="attr_racial_mods_compendium" accept="Racial Modifiers" placeholder="Racial Modifiers" data-i18n-placeholder="racial-modifiers" title="@{racial_mods_compendium}" ></textarea><span data-i18n-title="npc-statblock-textarea-instructions" data-i18n-aria-label="npc-statblock-textarea-instructions" data-i18n="racial-modifiers">Racial Modifiers</span></label>
							<div class="sheet-cheat"></div>
							<label class="sheet-small-label2 sheet-autoexpand"><input type="text" name="attr_environment" accept="Environment" value="" placeholder="Environment" data-i18n-placeholder="environment" title="@{environment}" /><span data-i18n="environment">Environment</span><span name="attr_environment" class="sheet-autoexpand"></span></label>
							<label class="sheet-small-label2 sheet-autoexpand"><input type="text" name="attr_organization" accept="Organization" value="" placeholder="Organization" data-i18n-placeholder="organization" title="@{organization}" /><span data-i18n="organization">Organization</span><span name="attr_organization" class="sheet-autoexpand"></span></label>
							<label class="sheet-small-label2 sheet-autoexpand"><input type="text" name="attr_other_items_treasure" accept="Treasure" value="" placeholder="Treasure" data-i18n-placeholder="treasure" title="@{treasure}" /><span data-i18n="treasure">Treasure</b></label><span name="attr_other_items_treasure" class="sheet-autoexpand"></span></label>

							<label class="sheet-small-label2 sheet-autoexpand"><input type="text" name="attr_languages" accept="Languages" value="" placeholder="Languages" data-i18n-placeholder="languages" title="@{languages}" /><span data-i18n="languages">Languages</span><span name="attr_languages" class="sheet-autoexpand"></span></label>
							<label class="sheet-small-label2 sheet-autoexpand"><input type="text" name="attr_SQ_compendium" accept="SQ" value="" placeholder="Add all special qualities here" data-i18n-placeholder="special-qualities-place" title="@{SQ_compendium}" /><span data-i18n="special-qualities">Special Qualities</span><span name="attr_SQ_compendium" class="sheet-autoexpand"></span></label>
						</div>
						<div class="sheet-table">
							<div class="sheet-table-row">
								<span class="sheet-table-cell sheet-small-label sheet-left" style="width:100%;height:auto;">
									<span data-i18n="special-abilities-and-content">Special Abilities and Content </span>
									<textarea class="sheet-desc" name="attr_content_compendium" accept="Content" data-i18n-placeholder="special-abilities-and-content-place"></textarea>
								</span>
							</div>
						</div>
					</div><!-- compendium import -->
				</div>
				<div class="sheet-cheat" style="margin-bottom:-2em;"></div>
				<input type="checkbox" class="sheet-mythic-show" name="attr_mythic-adventures-show" value="1" role="presentation">
				<input class="sheet-showarrow sheet-npc-details-show sheet-h2arrow" type="checkbox" name="attr_npc-details-show" data-i18n-aria-label="details" title="Click to expand" data-i18n-title="showsect-cmd" value="1" checked />
				<div class="sheet-table sheet-npc-header sheet-showsect sheet-showsect-nocolor" >
					<span class="sheet-table-cell" ><input type="text" title="@{character_name}" name="attr_character_name" ></span>
					<span class="sheet-table-cell sheet-right"><b data-i18n="challenge-rating-abbrv">CR</b></span>
					<span class="sheet-table-cell"><input type="text" title="@{npc-cr}" name="attr_npc-cr" style="padding-top: .5em;  min-width: 4em;" /></span>
					<span class="sheet-table-cell sheet-section-mythic"><b title="Mythic Rank" data-i18n="mythic-rating-abbrv">MR</b></span>
					<span class="sheet-table-cell sheet-section-mythic"><input type="text" title="@{npc-mythic-mr}" name="attr_npc-mythic-mr" style="padding-top: .5em;  min-width: 4em;" /></span>
					<span class="sheet-table-cell sheet-right"><b data-i18n="experience-points-abbrv">XP</b></span>
					<span class="sheet-table-cell"><input type="text" name="attr_npc-xp" accept="XP" title="@{npc-xp}" style="padding-top: .5em;  min-width: 4em;" /></span>
				</div>
				<div class="sheet-nontable sheet-npc-details sheet-h2-section" role="section" aria-label="npc details">
					<label class="sheet-small-label2 sheet-autoexpand"><input title="@{alignment}" type="text" name="attr_alignment" placeholder="Alignment" data-i18n-placeholder="alignment"  /><span data-i18n="alignment-abbrv">Align</span><span class="sheet-autoexpand" name="attr_alignment"></span></label>
					<label class="sheet-small-label2 sheet-entry-med" style="padding-left:.5em;">
						<select title="@{default_char_size}" name="attr_default_char_size" >
							<option value="-8" data-i18n="size-colossal">Colossal</option>
							<option value="-4" data-i18n="size-gargantuan">Gargantuan</option>
							<option value="-2" data-i18n="size-huge">Huge</option>
							<option value="-1" data-i18n="size-large">Large</option>
							<option value="0" data-i18n="medium-abbrv-default" selected>&#8226;Medium</option>
							<option value="1" data-i18n="size-small">Small</option>
							<option value="2" data-i18n="size-tiny">Tiny</option>
							<option value="4" data-i18n="size-diminutive">Diminutive</option>
							<option value="8" data-i18n="size-fine">Fine</option>
						</select>
						<span data-i18n="default-size">Default Size</span>
					</label>
					<label class="sheet-small-label2 sheet-entry-med">
						<select title="@{size}" name="attr_size">
							<option value="-8" data-i18n="size-colossal">Colossal</option>
							<option value="-4" data-i18n="size-gargantuan">Gargantuan</option>
							<option value="-2" data-i18n="size-huge">Huge</option>
							<option value="-1" data-i18n="size-large">Large</option>
							<option value="0" data-i18n="medium-abbrv-default" selected>&#8226;Medium</option>
							<option value="1" data-i18n="size-small">Small</option>
							<option value="2" data-i18n="size-tiny">Tiny</option>
							<option value="4" data-i18n="size-diminutive">Diminutive</option>
							<option value="8" data-i18n="size-fine">Fine</option>
						</select>
						<span data-i18n="size">Size</span>
					</label>
					<label class="sheet-small-label2 sheet-autoexpand"><input title="@{npc-type}" type="text" name="attr_npc-type" placeholder="Type (sub-type)" data-i18n-placeholder="type-or-sub-type" accept="Creature Type" /><span data-i18n="type-or-sub-type">Type/(sub-type)</span><span class="sheet-autoexpand" name="attr_npc-type" ></span></label>
					<label class="sheet-small-label2 sheet-number"><input type="checkbox" name="attr_is_undead" value="1" title="@{is_undead}"/><span data-i18n-title="undead-title" data-i18n-aria-label="undead-title" data-i18n="undead">Undead</span></label>
					<label class="sheet-small-label2 sheet-autoexpand"><input title="@{gender}" type="text" name="attr_gender" placeholder="Gender" data-i18n-placeholder="gender" /><span data-i18n="gender">Gender</span><span class="sheet-autoexpand" name="attr_gender"></span></label>
					<label class="sheet-small-label2 sheet-autoexpand"><input title="@{class-0-name}" type="text" name="attr_class-0-name" placeholder="Class(es)" data-i18n-placeholder="class-and-level" /><span data-i18n="class">Class</span><span class="sheet-autoexpand" name="attr_class-0-name"></span></label>
					<label class="sheet-small-label2 sheet-autoexpand"><input title="@{class-0-level}" type="text" name="attr_class-0-level" placeholder="0"  /><span data-i18n="level">levels</span><span class="sheet-autoexpand" name="attr_class-0-level"></span></label>
					<label class="sheet-table-rollbuttoncell"><button style="font-size: 0.8125rem ; white-space: nowrap" name="roll_NPC-Initiative-Roll" title="%{selected|NPC-Initiative-Roll}" type="roll" value="@{NPC-whisper} @{init-macro-text} {{name=^{npc} ^{initiative}}}">&nbsp;<span style="vertical-align: middle;" data-i18n="initiative-abbrv">INIT</span>&nbsp;<span style="vertical-align: middle;" name="attr_init"></span></button></label>
					<label class="sheet-small-label2 sheet-autoexpand"><input type="text" title="@{vision}" name="attr_vision" placeholder="Vision" data-i18n-placeholder="vision" /><span data-i18n="vision-senses">Vision/Senses</span><span class="sheet-autoexpand" name="attr_vision"></span></label>
					<label class="sheet-table-rollbuttoncell"><button style="font-size: 0.8125rem ; white-space: nowrap" name="roll_NPC-Perception-Check" title="%{selected|NPC-Perception-Check}" type="roll" value="@{NPC-whisper} @{Perception-macro}">&nbsp;<span style="vertical-align: middle;" data-i18n="perception">Perception</span>&nbsp;<span style="vertical-align: middle;" name="attr_Perception"></span></button></label>
					<label class="sheet-small-label2 sheet-autoexpand"><input type="text" title="@{npc-aura}" name="attr_npc-aura" placeholder="Aura" data-i18n-placeholder="aura" accept="Aura" /><span data-i18n="aura">Aura</span><span class="sheet-autoexpand" name="attr_npc-aura"></span></label>
				</div>
				<hr class="sheet-npc-hr sheet-npchead-top" />
				<input class="sheet-showarrow sheet-h2arrow" type="checkbox" name="attr_npc-defense-show" data-i18n-aria-label="defense" title="Click to expand" data-i18n-title="showsect-cmd" value="1" checked />
				<h2 class="sheet-clickheader sheet-showsect"><label title="Click to expand" data-i18n-title="showsect-cmd" data-i18n-aria-label="showsect-cmd" data-i18n="defense">DEFENSE</label></h2>
				<hr class="sheet-npc-hr sheet-npchead-bottom" />
				<div class="sheet-h2-section" style="text-align:left;">
					<div class="sheet-table">
						<div class="sheet-table-row">
							<span class="sheet-table-cell sheet-small-label"><input type="number" title="@{AC}" name="attr_AC" value="10" class="sheet-calc" readonly /><br><span data-i18n="armor-class-abbrv">AC</span></span>
							<span class="sheet-table-cell sheet-small-label"><input title="@{Touch}" type="number" name="attr_Touch" value="10" class="sheet-calc" readonly /><br><span data-i18n="touch-armor-class-abbrv">Touch</span></span>
							<span class="sheet-table-cell sheet-small-label"><input title="@{Flat-Footed}" type="number" name="attr_Flat-Footed" value="10" class="sheet-calc" readonly /><br><span data-i18n="flat-footed-armor-class-abbrv">Flat-Footed</span></span>
							<span class="sheet-divider-lg" style="text-align:right;">(<br>&nbsp;</span>
							<span class="sheet-table-cell sheet-small-label"><input title="@{armor3-acbonus}" type="number" name="attr_armor3-acbonus" value="0" /><br><label style="text-align:center;"><input title="@{armor3-equipped}" type="checkbox" class="sheet-boldlabel-check" name="attr_armor3-equipped" value="1" style="width:10px; height:10px;" checked /><b title="Equipped" style="font-size: 85%;" data-i18n="armor">Armor</b></label></span>
							<span class="sheet-table-cell sheet-small-label"><input title="@{shield3-acbonus}" type="number" name="attr_shield3-acbonus" value="0" /><br><label style="text-align:center;"><input title="@{shield3-equipped}" type="checkbox" class="sheet-boldlabel-check" name="attr_shield3-equipped" value="1" style="width:10px; height:10px;" checked /><b title="Equipped" style="font-size: 85%;" data-i18n="shield">Shield</b></label></span>
							<span class="sheet-table-cell sheet-small-label"><input title="@{AC-deflect}" type="number" name="attr_AC-deflect" value="0" /><br><span data-i18n="deflect">Deflect</span></span>
							<input type="checkbox" name="attr_nodex-toggle" class="sheet-warn-mshow" value="1" />
							<input type="checkbox" name="attr_maxdex-toggle" class="sheet-warn-show" value="1" />
							<span class="sheet-table-cell sheet-small-label sheet-highlight"><input title="@{AC-ability-mod}" type="number" name="attr_AC-ability-display" value="0" class="sheet-calc" readonly /><br/><span data-i18n="dexterity-abbrv">Dex</span></span>
							<span class="sheet-table-cell sheet-small-label sheet-highlight"><input title="@{AC-dodge}" type="number" name="attr_AC-dodge" value="0" /><br><span data-i18n="dodge">Dodge</span></span>
							<span class="sheet-table-cell sheet-small-label"><input title="@{AC-natural}" type="number" name="attr_AC-natural" value="0" /><br><span data-i18n="natural">Natural</span></span>
							<span class="sheet-table-cell sheet-small-label"><input title="@{AC-misc}" type="number" name="attr_AC-misc" value="0" /><br><span data-i18n="miscellaneous-abbrv">Misc</span></span>
							<span style="display:none;" class="sheet-table-cell sheet-small-label"><input title="@{buff_AC-total}" name="attr_buff_AC-total" type="number" value="0" class="sheet-calc" readonly /><br><span data-i18n="buff">Buff</span></span>
							<span style="display:none;" class="sheet-table-cell sheet-small-label"><input title="@{AC-penalty}" type="number" name="attr_AC-penalty" value="0" max="0" class="sheet-calc" readonly><br><span data-i18n-title="condition-description" data-i18n-aria-label="condition-description" data-i18n="condition-abbrv">Cond</span></span>
							<span class="sheet-divider-lg" style="text-align:left;">)<br>&nbsp;</span>
						</div>
					</div>
					<div class="sheet-table">
						<div class="sheet-table-row">
							<span class="sheet-table-cell sheet-small-label"><input type="number" title="@{HP}" name="attr_HP" value="0" /><br><span data-i18n="hit-points-abbrv">HP</span></span>
							<span class="sheet-divider-lg">/<br>&nbsp;</span>
							<span class="sheet-table-cell sheet-small-label"><input type="number" title="@{HP|max}" name="attr_HP_max" value="0" class="sheet-calc" readonly /><br><span data-i18n="maximum-abbrv">Max</span></span>
							<span class="sheet-divider-lg" style="text-align:right;">(<br>&nbsp;</span>
							<span class="sheet-table-cell sheet-small-label"><input title="@{npc-hd-num}" type="number" name="attr_npc-hd-num" value="0" /><br><span data-i18n="racial-bonus">Racial</span></span>
							<span class="sheet-divider-lg"><br><span data-i18n="dice-abbrv">d</span><br>&nbsp;</span>
							<span class="sheet-table-cell sheet-small-label"><input title="@{npc-hd} racial HD" type="text" name="attr_npc-hd" value="" class="sheet-number" /><br><span data-i18n="hit-die-abbrv">HDie</span></span>
							<span class="sheet-divider-lg">+<br>&nbsp;</span>
							<span class="sheet-table-cell sheet-small-label"><input title="@{hp_ability_bonus}" type="number" name="attr_hp_ability_bonus" value="0" class="sheet-calc" readonly /><br><span data-i18n="constitution-abbrv">Con</span></span>
							<span class="sheet-divider-lg">+<br>&nbsp;</span>
							<input type="checkbox" name="attr_HP-formula-mod_error" class="sheet-error-mshow" value="1" />
							<span class="sheet-table-cell sheet-small-label sheet-entry-long sheet-highlight"><input title="@{HP-formula-macro-text}" type="text" name="attr_HP-formula-macro-text" value="" placeholder="#/Equation" data-i18n-placeholder="equation-macro-place" /><br><span data-i18n="miscellaneous-abbrv">Misc</span></span>
							<span class="sheet-table-cell sheet-small-label sheet-highlight"><input title="@{HP-formula-mod}" type="number" name="attr_HP-formula-mod" value="0" class="sheet-calc" readonly /><br><span data-i18n="modifier-abbrv">Mod</span></span>
							<span class="sheet-divider-lg" style="text-align:left;">)<br>&nbsp;</span>
							<span class="sheet-table-cell sheet-small-label"><input type="number" title="@{HP-temp}" name="attr_HP-temp" value="0" /><br><span data-i18n="temporary-hit-points-abbrv">Temp hp</span></span>
							<span class="sheet-table-cell sheet-small-label"><input type="number" title="@{non-lethal-damage}" name="attr_non-lethal-damage" value="0" min="0" /><br><span data-i18n="nonlethal">Nonlthal</span></span>
							<span class="sheet-table-cell sheet-small-label" style="width:20%;"><textarea class="sheet-inline-textarea" title="@{npc-heal-conditions}" name="attr_npc-heal-conditions" placeholder="Heal conditions" data-i18n-placeholder="heal-conditions"></textarea><br><span data-i18n="heal-conditions">Heal Conditions</span></span>
						</div>
					</div>
					<div class="sheet-table">
						<div class="sheet-table-row">
							<span class="sheet-table-cell" style="vertical-align:text-bottom;"><button style="font-size:.8125rem;white-space:nowrap;" title="%{selected|NPC-Fort-Save}" type="roll" name="roll_NPC-Fort-Save" value="@{NPC-whisper} @{fort-save-macro-text} {{name=^{npc} ^{fortitude}}}">&nbsp;<span style="color:#fff; vertical-align: text-bottom;" data-i18n="fortitude-abbrv">Fort</span>&nbsp;<span style="color:#fff; vertical-align: text-bottom;" name="attr_Fort"></span></button></span>
							<span class="sheet-divider-lg">+<br>&nbsp;</span>
							<span class="sheet-table-cell sheet-small-label"><input title="@{npc-Fort}" type="number" name="attr_npc-Fort" value="0" /><br><span data-i18n="miscellaneous-abbrv">Misc</span></span>
							<span class="sheet-divider-lg">;<br>&nbsp;</span>
							<span class="sheet-table-cell" style="vertical-align:text-bottom;"><button style="font-size:.8125rem;white-space:nowrap;" title="%{selected|NPC-Ref-Save}" type="roll" name="roll_NPC-Ref-Save" value="@{NPC-whisper} @{ref-save-macro-text} {{name=^{npc} ^{reflex}}}">&nbsp;<span style="color:#fff; vertical-align: text-bottom;" data-i18n="reflex-abbrv">Ref</span>&nbsp;<span style="color:#fff; vertical-align: text-bottom;" name="attr_Ref" value="0" ></span></button></span>
							<span class="sheet-divider-lg">+<br>&nbsp;</span>
							<span class="sheet-table-cell sheet-small-label"><input title="@{npc-Ref}" type="number" name="attr_npc-Ref" value="0" /><br><span data-i18n="miscellaneous-abbrv">Misc</span></span>
							<span class="sheet-divider-lg">;<br>&nbsp;</span>
							<span class="sheet-table-cell" style="vertical-align:text-bottom;"><button style="font-size:.8125rem;white-space:nowrap;" title="%{selected|NPC-Will-Save}" type="roll" name="roll_NPC-Will-Save" value="@{NPC-whisper} @{will-save-macro-text} {{name=^{npc} ^{willpower}}}">&nbsp;<span style="color:#fff; vertical-align: text-bottom;" data-i18n="willpower-abbrv">Will</span>&nbsp;<span style="color:#fff; vertical-align: text-bottom;" name="attr_Will" ></span></button></span>
							<span class="sheet-divider-lg">+<br>&nbsp;</span>
							<span class="sheet-table-cell sheet-small-label"><input title="@{npc-Will}" type="number" name="attr_npc-Will" value="0" /><br><span data-i18n="miscellaneous-abbrv">Misc</span></span>
							<span class="sheet-table-cell sheet-small-label"><textarea class="sheet-inline-textarea sheet-both" title="@{save-notes}" name="attr_Save-notes" placeholder="Save Notes" data-i18n-placeholder="save-notes"></textarea><br><span><input type="checkbox" name="attr_toggle_save_notes" value="@{var_save_notes}" title="@{toggle_save_notes}" style="font-size:inherit;" /><span data-i18n="save-notes">Save Notes</span></span></span>
							<input type="checkbox" name="attr_SR_error" class="sheet-error-mshow" value="1" />
							<span class="sheet-table-cell sheet-small-label sheet-highlight"><textarea class="sheet-inline-textarea" title="@{SR-macro-text}" name="attr_SR-macro-text" placeholder="#/Equation" data-i18n-placeholder="equation-macro-place"></textarea><br/><span class="sheet-super sheet-note-a" data-i18n-title="spell-resistance-title" data-i18n-aria-label="spell-resistance-title" data-i18n="spell-resistance-abbrv2">Spell Resist</span></span>
							<span class="sheet-table-cell sheet-small-label sheet-highlight"><input title="@{SR}" type="number" name="attr_SR" value="0" class="sheet-calc" readonly /><br><span data-i18n="spell-resistance-abbrv">SR</span></span>
						</div>
					</div>
					<div class="sheet-table">
						<div class="sheet-table-row">
							<span class="sheet-table-cell sheet-small-label" style="width:20%;"><input title="@{DR}" type="text" name="attr_DR" accept="DR" /><br><span data-i18n="damage-resistance-abbrv">DR</span></span>
							<span class="sheet-table-cell sheet-small-label"><textarea title="@{npc-defensive-abilities}" name="attr_npc-defensive-abilities" class="sheet-inline-textarea" placeholder="Defensive abilities" data-i18n-placeholder="defensive-abilities"></textarea><br><span data-i18n="defensive-abilities">Defensive Abilities</span></span>
							<span class="sheet-table-cell sheet-small-label"><textarea title="@{immunities}" name="attr_immunities" class="sheet-inline-textarea" placeholder="Immunities" data-i18n-placeholder="immunities"></textarea><br><span data-i18n="immunities">Immunities</span></span>
							<span class="sheet-table-cell sheet-small-label"><textarea title="@{resistances}" name="attr_resistances" class="sheet-inline-textarea" placeholder="Resistances" data-i18n-placeholder="resistances"></textarea><br><span data-i18n="resistance">Resistances</span></span>
							<span class="sheet-table-cell sheet-small-label"><textarea title="@{weaknesses}" name="attr_weaknesses" class="sheet-inline-textarea" placeholder="Weaknesses" data-i18n-placeholder="weaknesses"></textarea><br><span data-i18n="weaknesses">Weaknesses</span></span>
						</div>
					</div>
					<div class="sheet-hide-readonly">
						<h3 class="sheet-sect-inverse sheet-inspecial" style="display:block;" data-i18n="special-qualities">SQ</h3>
						<span class="sheet-sect-inverse sheet-inspecial" data-i18n="in-special-abilities-section">In list under Special Abilities below</span>
					</div>
				</div>
				<hr class="sheet-npc-hr sheet-npchead-top" />
				<input class="sheet-showarrow sheet-h2arrow" type="checkbox" name="attr_npc-offense-show" data-i18n-aria-label="offense" title="Click to expand" data-i18n-title="showsect-cmd" value="1" checked />
				<h2 class="sheet-clickheader sheet-showsect"><label title="Click to expand" data-i18n-title="showsect-cmd" data-i18n-aria-label="showsect-cmd" data-i18n="offense">OFFENSE</label></h2>
				<hr class="sheet-npc-hr sheet-npchead-bottom" />
				<div class="sheet-h2-section sheet-noborder-readonly sheet-wide-readonly" role="region" aria-label="npc-offense">
					<div class="sheet-cheat"></div>
					<input class="sheet-showarrow sheet-h3arrow" type="checkbox" name="attr_npc-speed-show" data-i18n-aria-label="speed" title="Click to expand" data-i18n-title="showsect-cmd" value="1" checked />
					<h3 class="sheet-clickheader sheet-showsect"><label title="Click to expand" data-i18n-title="showsect-cmd" data-i18n="speed-space-reach">Speed</label></h3>
					<div class="sheet-h3-section sheet-table sheet-wide-readonly">
						<div class="sheet-table-row">
							<span class="sheet-table-cell sheet-small-label"><input title="@{speed-base}" type="number" name="attr_speed-base" value="0" step="5" /><br><span data-i18n="base-speed">Base</span></span>
							<span class="sheet-table-cell sheet-small-label"><input title="@{speed-modified} by encumbrance" type="number" name="attr_speed-modified" value="0" class="sheet-calc" readonly /><br><span data-i18n="encumbered-speed">Encumbered</span></span>
							<span class="sheet-table-cell sheet-small-label"><input title="@{run-mult}" type="number" name="attr_run-mult" value="4" /><br /><span data-i18n="multiplier-abbrv">Mult</span></span>
							<span class="sheet-table-cell sheet-small-label"><input title="@{speed-run}" type="number" name="attr_speed-run" value="0" class="sheet-calc" readonly /><br /><span data-i18n="run">Run</span></span>
							<span class="sheet-table-cell sheet-small-label"><input title="@{speed-burrow}" type="number" name="attr_speed-burrow" value="0" step="5" /><br><span data-i18n="burrow-speed">Burrow</span></span>
							<span class="sheet-table-cell sheet-small-label"><input title="@{speed-climb}" type="number" name="attr_speed-climb" value="0" step="5" /><br><span data-i18n="climb">Climb</span></span>
							<span class="sheet-table-cell sheet-small-label"><input title="@{speed-fly}" type="number" name="attr_speed-fly" value="0" step="5" /><br><span data-i18n="fly">Fly</span></span>
							<span class="sheet-table-cell sheet-small-label"><input title="@{speed-fly-maneuverability}" type="text" name="attr_speed-fly-maneuverability" placeholder="Maneuverability" data-i18n-placeholder="maneuverability" /><br><span data-i18n="maneuverability">Maneuverability</span></span>
							<span class="sheet-table-cell sheet-small-label"><input title="@{speed-swim}" type="number" name="attr_speed-swim" value="0" step="5" /><br><span data-i18n="swim-speed">Swim</span></span>
							<span class="sheet-table-cell sheet-small-label"><input title="@{speed-misc}" type="number" name="attr_speed-misc" value="0" step="5" /><br><span data-i18n="miscellaneous-abbrv">Misc</span></span>
							<span class="sheet-table-cell sheet-small-label"><input title="@{speed-notes}" type="text" name="attr_speed-notes" placeholder="Speed Notes" data-i18n-placeholder="speed-notes" /><br><span data-i18n="speed-notes">Speed Notes</span></span>
						</div>
					</div>
					<div class="sheet-h3-section sheet-table sheet-sect">
						<div class="sheet-table-row">
							<span class="sheet-table-cell sheet-small-label sheet-sect sheet-entry-short"><input title="@{space}" type="text" name="attr_space" value="0" /><br><span data-i18n="space">Space (ft.)</span></span>
							<span class="sheet-table-cell sheet-small-label sheet-sect sheet-entry-short"><input title="@{reach}" type="text" name="attr_reach" value="0" /><br><span data-i18n="reach">Reach (ft.)</span></span>
							<span class="sheet-table-cell sheet-small-label sheet-sect"><input title="@{reach-notes}" type="text" name="attr_reach-notes" placeholder="Reach notes" data-i18n-placeholder="reach-notes" /><br><span data-i18n="reach-notes">Reach Notes</span></span>
						</div>
					</div>
					<div class="sheet-cheat"></div>
					<input class="sheet-showarrow sheet-h3arrow" type="checkbox" name="attr_npc-repeating-weapons-show" data-i18n-aria-label="attacks" title="Click to expand" data-i18n-title="showsect-cmd" value="1" checked />
					<h3 class="sheet-clickheader sheet-showsect"><label title="Click to expand" data-i18n-title="showsect-cmd" data-i18n-aria-label="showsect-cmd" data-i18n="attacks">Attacks</label></h3>
					<div class="sheet-h3-section sheet-repeating-sect" role="region" aria-label="npc-attacks">
						<span class="sheet-nontable-name" data-i18n="attacks">Attacks</span>
						<input type="checkbox" class="sheet-minimize-show sheet-cssbutton" data-i18n-title="minimize-all-cmd" data-i18n-aria-label="minimize-all-cmd" title="Minimize all rows." name="attr_npcweapon-min-show" value="1" /><span></span>
						<input type="checkbox" class="sheet-lock-show sheet-cssbutton" data-i18n-title="expand-cmd" data-i18n-aria-label="expand-cmd" title="Collapse or expand all rows." name="attr_npcweapon-expand-show" value="1" /><span></span>
						<input type="checkbox" class="sheet-split-column-show sheet-cssbutton" data-i18n-title="column-cmd" data-i18n-aria-label="column-cmd" title="Split into two columns" name="attr_npcweapon-column-show" value="1" /><span></span>
						<input class="sheet-deletebutton sheet-cssbutton sheet-deletesect-show" type="checkbox" name="attr_delete_repeating_weapon_btn" value="1" data-i18n-title="delete-weapon" data-i18n-aria-label="delete-weapon-must-confirm-next-checkbox" /><span></span><label class="sheet-deletesect sheet-allrows-note"><input type="checkbox" class="sheet-selectedlabel-check" name="attr_delete_repeating_weapon" data-i18n-aria-label="confirm-delete-weapon" data-i18n-title="confirm-delete-weapon" value="1" /><b data-i18n="delete-all-rows-are-you-sure">delete all rows are you sure</b></label>
						<input type="checkbox" name="attr_adv_macro_show" class="sheet-repeating-sect-show" value="1" role="presentation" />
						<input name="attr_modify_dmg_by_size" type="checkbox" value="1" class="sheet-use-size-show sheet-noshow" />
						<div class="sheet-repeating-fields">
							<fieldset class="repeating_weapon">
								<span class="sheet-error"><span class="sheet-pictos">!</span><span data-i18n="error-msg1">Error! You must delete this row before editing any items in this section.</span></span>
								<div class="sheet-nontable-repeating">
									<input type="checkbox" class="sheet-counted sheet-sect-show" data-i18n-title="minimize-cmd" data-i18n-aria-label="minimize-cmd" title="Minimize Row" name="attr_row-show" value="1" checked /><span></span>
									<span style="display:none;" class="sheet-repeating-rollbutton"><button type="roll" name="attr_attack-roll" title="%{selected|repeating_weapon_$X_attack-roll}" value="@{macro-text}"></button></span>
									<span class="sheet-repeating-rollbutton"><button type="roll" name="attr_attack-npc-roll" title="%{selected|repeating_weapon_$X_attack-npc-roll}" value="@{NPC-macro-text}"></button></span>
									<label class="sheet-small-label2 sheet-narrow-numbers sheet-sect"><input type="number" name="attr_enhance" title="@{repeating_weapon_$X_enhance}" value="0" /><span data-i18n="enhancement-abbrv">Enh</span></label>
									<label class="sheet-small-label2 sheet-sect" style="width:2.5em;"><input type="checkbox" name="attr_masterwork" title="@{repeating_weapon_$X_masterwork}" value="1" style="margin-bottom: .55em;"/><span data-i18n="masterwork-abbrv">Mwk</span></label>
									<label class="sheet-small-label2 sheet-entry-25p-shrink"><input type="text" name="attr_name"  value="" title="@{repeating_weapon_$X_name}" placeholder="Name" data-i18n-placeholder="name" /><span data-i18n="name">Name</span></label>
									<div class="sheet-linked-fields sheet-sect">
										<input type="checkbox" name="attr_attack-mod_error" class="sheet-error-mshow" value="1" />
										<label class="sheet-small-label2 sheet-entry-med sheet-macro-text-inline sheet-highlight"><input type="text" name="attr_attack" title="@{repeating_weapon_$X_attack}" placeholder="#/Equation" value="" data-i18n-placeholder="equation-macro-place" class="sheet-macro-text-inline" /><span class="sheet-super sheet-note-a" data-i18n="attack-modifiers-abbrv">Attack Mods</span></label>
										<label class="sheet-small-label2 sheet-narrow-numbers sheet-highlight"><input type="number" name="attr_attack-mod" title="@{repeating_weapon_$X_attack-mod}" value="0" class="sheet-calc" readonly /><span data-i18n="value-abbrv">val</span></label>
									</div>
									<span class="sheet-divider-db sheet-sect">+</span>
									<label class="sheet-small-label2 sheet-entry-short">
										<select class="sheet-select-small" title="@{repeating_weapon_$X_attack-type}" name="attr_attack-type">
											<option value="0" data-i18n="none-default" selected>&#8226;None</option>
											<option value="@{attk-melee}" data-i18n="melee">Melee</option>
											<option value="@{attk-melee2}" data-i18n="melee2">Melee2</option>
											<option value="@{attk-ranged}" data-i18n="ranged">Ranged</option>
											<option value="@{attk-ranged2}" data-i18n="ranged2">Ranged2</option>
											<option value="@{CMB}" data-i18n="combat-maneuver-bonus-abbrv">CMB</option>
											<option value="@{CMB2}" data-i18n="combat-maneuver-bonus-abbrv2">CMB2</option>
										</select>
										<span data-i18n="attack-type">Attack Type</span>
									</label>
									<span class="sheet-divider-db sheet-sect">=</span>
									<label class="sheet-small-label2 sheet-narrow-numbers sheet-space-right-collapse"><input type="number" name="attr_total-attack" title="@{repeating_weapon_$X_total-attack}" value="0" class="sheet-calc" readonly /><span data-i18n="attack">Attack</span></label>
									<label class="sheet-small-label2 sheet-entry-small sheet-sect">
										<select class="sheet-select-small" name="attr_vs">
											<option value="ac" data-i18n="armor-class-abbrv-default" selected>&#8226;AC</option>
											<option value="touch" data-i18n="touch">Touch</option>
											<option value="ff" data-i18n="flat-footed-armor-class-abbrv">FF</option>
											<option value="fft" data-i18n="flat-footed-touch-abbrv">FF Touch</option>
											<option value="cmd" data-i18n="combat-maneuver-defense-abbrv">CMD</option>
											<option value="cmb" data-i18n="opposed-combat-maneuver-bonus-abbrv">Opposed CMB</option>
											<option value="other" data-i18n="other">Other</option>
										</select>
										<span data-i18n="versus-abbrv">Vs.</span>
									</label>
									<div class="sheet-linked-fields">
										<label class="sheet-small-label2 sheet-narrow-numbers"><input type="number" name="attr_crit-target" title="@{repeating_weapon_$X_crit-target}" value="20" min="0" max="20" /><span data-i18n="critical-abbrv">Crit</span></label>
										<span class="sheet-divider-db-lg" style="width:1em; padding-bottom:10px;">/x</span>
										<label class="sheet-small-label2 sheet-narrow-numbers"><input type="number" name="attr_crit-multiplier" title="@{repeating_weapon_$X_crit-multiplier}" value="2" min="0" /><span data-i18n="multiplier-abbrv">Mult</span></label>
									</div>
									<div class="sheet-linked-fields">
										<label class="sheet-small-label2 sheet-narrow-numbers sheet-sect"><input type="number" name="attr_crit_confirm" title="@{repeating_weapon_$X_crit_confirm}" value="0" /><span data-i18n-title="custom-crit-confirmation-bonus" data-i18n-aria-label="custom-crit-confirmation-bonus" title="Custom critical confirmation bonus for this attack" data-i18n="confirm-critical-bonus-abbrv">+Conf</span></label>
										<label class="sheet-small-label2 sheet-narrow-numbers sheet-space-right-collapse"><input type="number" name="attr_crit_conf_mod" title="@{repeating_weapon_$X_crit_conf_mod}" value="0" class="sheet-calc" readonly /><span data-i18n="confirm-critical-bonus-abbrv">+Conf</span></label>
									</div>
									<input name="attr_size_affects"  type="checkbox" value="1" class="sheet-sect3-show sheet-noshow" />
									<input name="attr_not_default_size" type="checkbox" value="1" class="sheet-sect3-show sheet-noshow" />
									<div class="sheet-linked-fields sheet-dont-use-size">
										<label class="sheet-small-label2 sheet-narrow-numbers"><input type="number" name="attr_damage-dice-num" title="@{repeating_weapon_$X_damage-dice-num}" value="0"/></label>
										<span class="sheet-divider-db-lg" style="padding-bottom: 10px;margin-right:-.125em;" data-i18n="dice-abbrv">d</span>
										<label class="sheet-small-label2 sheet-narrow-numbers"><input type="number" name="attr_damage-die" title="@{repeating_weapon_$X_damage-die}" value="0" /></label>
										<span style="display: block; text-align: center; font-size: .7rem; font-style: italic; font-weight: bold; color: Black; margin-top: -1.7em;" >dmg dice</span>
									</div>
									<div class="sheet-linked-fields sheet-sect3 sheet-use-size">
										<label class="sheet-small-label2 sheet-narrow-numbers"><input type="number" name="attr_damage-dice-num" title="@{repeating_weapon_$X_damage-dice-num}" value="0" class="sheet-calc" readonly /></label>
										<span class="sheet-divider-db-lg" style="padding-bottom: 10px;margin-right:-.125em;" data-i18n="dice-abbrv">d</span>
										<label class="sheet-small-label2 sheet-narrow-numbers"><input type="number" name="attr_damage-die" title="@{repeating_weapon_$X_damage-die}" value="0" class="sheet-calc" readonly /></label>
										<span style="display: block; text-align: center; font-size: .7rem; font-style: italic; font-weight: bold; color: Black; margin-top: -1.7em;" >adj damage dice</span>
									</div>
									<div class="sheet-linked-fields sheet-use-size">
										<label class="sheet-small-label2 sheet-narrow-numbers"><input type="number" name="attr_default_damage-dice-num" title="@{repeating_weapon_$X_default_damage-dice-num}" value="0" min="0" /></label>
										<span class="sheet-divider-db-lg" style="padding-bottom: 10px;margin-right:-.125em;" data-i18n="dice-abbrv">d</span>
										<label class="sheet-small-label2 sheet-narrow-numbers"><input type="number" name="attr_default_damage-die" title="@{repeating_weapon_$X_default_damage-die}" value="0" min="0" /></label>
										<span style="display: block; text-align: center; font-size: .7rem; font-style: italic; font-weight: bold; color: Black; margin-top: -1.7em;" >dmg dice</span>
									</div>
									<span class="sheet-divider-db sheet-sect">+</span>
									<div class="sheet-linked-fields sheet-sect">
										<input type="checkbox" name="attr_damage-mod_error" class="sheet-error-mshow" value="1" />
										<label class="sheet-small-label2 sheet-entry-short sheet-macro-text-inline sheet-highlight"><input type="text" name="attr_damage" title="@{repeating_weapon_$X_damage}" placeholder="#/Equation" value="" data-i18n-placeholder="equation-macro-place" class="sheet-macro-text-inline" /><span class="sheet-super sheet-note-a" data-i18n="damage-modifier-abbrv">Dmg Mods</span></label>
										<label class="sheet-small-label2 sheet-narrow-numbers sheet-highlight"><input type="number" name="attr_damage-mod" title="@{repeating_weapon_$X_damage-mod}" value="0" class="sheet-calc" readonly /><span data-i18n="value-abbrv">val</span></label>
									</div>
									<span class="sheet-divider-db">+</span>
									<label class="sheet-small-label2 sheet-narrow-numbers sheet-sect"><input type="number" step=".5" name="attr_damage_ability_mult" title="@{repeating_weapon_$X_damage_ability_mult}" value="1"><span data-i18n="multiplier-abbrv" data-i18n-title="damage-multiplier-title" data-i18n-aria-label="damage-multiplier-title" title="Damage ability modifier: .5, 1.5, 2, etc, can leave blank to represent 1.">Mult</span></label>
									<span class="sheet-divider-db-lg sheet-sect">*</span>
									<label class="sheet-small-label2 sheet-entry-small sheet-sect">
										<select class="sheet-select-small" title="@{repeating_weapon_$X_damage-ability}" name="attr_damage-ability">
											<option value="0" data-i18n="none-default" selected>&#8226;None</option>
											<option value="@{STR-mod}" data-i18n="strength-abbrv">STR</option>
											<option value="@{DEX-mod}" data-i18n="dexterity-abbrv">DEX</option>
											<option value="@{CON-mod}" data-i18n="constitution-abbrv">CON</option>
											<option value="@{INT-mod}" data-i18n="intelligence-abbrv">INT</option>
											<option value="@{WIS-mod}" data-i18n="wisdom-abbrv">WIS</option>
											<option value="@{CHA-mod}" data-i18n="charisma-abbrv">CHA</option>
										</select>
										<span style="margin-left:-.75em;" data-i18n="damage-ability">Dmg Ability</span>
									</label>
									<input type="checkbox" class="sheet-noshow sheet-sect2-show sheet-sect-show-inverse" name="attr_isranged" value="1" role="presentation" title="@{repeating_weapon_$X_isranged}" />
									<span class="sheet-divider-db sheet-sect sheet-sect2">(</span>
									<label class="sheet-small-label2 sheet-sect sheet-sect2" style="width:1.75em;">
										<input style="min-width:.5em;" type="text" name="attr_damage-ability-max" title="@{repeating_weapon_$X_damage-ability-max}" value="" placeholder="NA" data-i18n-placeholder="not-applicable" />
										<span data-i18n-title="maximum-damage-ability-title" data-i18n-aria-label="maximum-damage-ability-title" title="Maximum damage ability applied (for strength score, etc.)" data-i18n="maximum-abbrv">Max</span>
									</label>
									<span class="sheet-divider-db sheet-sect sheet-sect2">)</span>
									<span class="sheet-divider-db sheet-sect">=</span>
									<label class="sheet-small-label2 sheet-narrow-numbers sheet-space-right-collapse"><input type="number" name="attr_total-damage" title="@{repeating_weapon_$X_total-damage}" value="0" class="sheet-calc" readonly /><span data-i18n="damage-abbrv">Dmg</span></label>
									<label class="sheet-small-label2 sheet-entry-8p-shrink sheet-sect"><input type="text" name="attr_type" title="@{repeating_weapon_$X_type} Damage Type" data-i18n-placeholder="pierce-blunt-slash-abbrv" placeholder="P B S" /><span data-i18n="type">Type</span></label>
									<label class="sheet-small-label2 sheet-narrow-numbers">
										<input class="sheet-number" type="number" name="attr_range" title="@{repeating_weapon_$X_range}" value="0"  />
										<input type="checkbox" class="sheet-noshow sheet-sect2-show sheet-sect-show-inverse" name="attr_isranged" value="1" role="presentation" title="@{repeating_weapon_$X_isranged}" />
										<span class="sheet-sect2" data-i18n="range-in-feet">Range</span>
										<span class="sheet-sect-inverse" data-i18n="reach-small">Reach</span>
									</label>
									<input type="checkbox" class="sheet-nextitem-show sheet-noshow" name="attr_isranged" value="1" role="presentation" title="@{repeating_weapon_$X_isranged}" />
									<label class="sheet-small-label2 sheet-narrow-numbers sheet-ammo"><input type="number" name="attr_ammo" title="@{repeating_weapon_$X_ammo}" value="0" style="width:2.8em;" /><span data-i18n="ammo">Ammo</span></label>
									<label class="sheet-small-label2 sheet-entry-10p-shrink sheet-sect"><input type="text" name="attr_group" value="" title="@{repeating_weapon_$X_group}" placeholder="Group by name for attackbook buttons" data-i18n-placeholder="group-name" /><span data-i18n="group">Group name</span></label>
									<label class="sheet-small-label2 sheet-entry-small sheet-sect">
										<select title="@{repeating_weapon_$X_proficiency}" name="attr_proficiency">
											<option value="0" data-i18n="yes-default" selected>&#8226;Yes</option>
											<option value="-4" data-i18n="no">No</option>
										</select>
										<span data-i18n-title="proficiency-title" data-i18n-aria-label="proficiency-title" data-i18n="proficiency">Prof</span>
									</label>
									<label class="sheet-small-label2 sheet-sect sheet-use-size-only" style="width:4.5em;"><input type="checkbox" name="attr_size_affects" title="@{repeating_weapon_$X_size_affects}" value="1" checked /><span data-i18n-title="damage-dice-affected-by-size" data-i18n="use-size-abbrv">Use sze</span></label>
									<input type="checkbox" name="attr_size_affects" value="1" checked class="sheet-nextitem-show sheet-noshow" />
									<label class="sheet-small-label2 sheet-entry-med sheet-sect sheet-nextitem sheet-use-size-only">
										<select title="@{repeating_weapon_$X_default_size}" name="attr_default_size" >
											<option value="-8" data-i18n="size-colossal">Colossal</option>
											<option value="-4" data-i18n="size-gargantuan">Gargantuan</option>
											<option value="-2" data-i18n="size-huge">Huge</option>
											<option value="-1" data-i18n="size-large">Large</option>
											<option value="0" data-i18n="medium-abbrv-default" selected>&#8226;Medium</option>
											<option value="1" data-i18n="size-small">Small</option>
											<option value="2" data-i18n="size-tiny">Tiny</option>
											<option value="4" data-i18n="size-diminutive">Diminutive</option>
											<option value="8" data-i18n="size-fine">Fine</option>
										</select>
										<span data-i18n="default-size">Default Size</span>
									</label>
									<div class="sheet-small-label2 sheet-sect" style="width:60%;height:auto;clear:both;margin-bottom:0;">
										<textarea class="sheet-inline-textarea" name="attr_notes" title="@{repeating_weapon_$X_notes}" placeholder="Weapon Notes"></textarea>
										<span data-i18n="notes">Notes</span>
									</div>
									<div class="sheet-cheat"></div>
									<input type="hidden" name="attr_attack-type_macro_insert" value="@{toggle_global_melee_macro_insert}" />
									<input type="hidden" name="attr_damage-type_macro_insert" value="@{toggle_global_melee_damage_macro_insert}" />
									<input type="hidden" name="attr_macro_options" value="" />
									<input type="hidden" name="attr_iterative_attacks" value="@{toggle_iterative_attack2} @{toggle_iterative_attack3} @{toggle_iterative_attack4} @{toggle_iterative_attack5} @{toggle_iterative_attack6} @{toggle_iterative_attack7} @{toggle_iterative_attack8}" />
									<input type="hidden" name="attr_attack_macro" value="[[ @{total-attack} ]] [Total] + @{toggle_attack_macro_insert} + @{attack-type_macro_insert} + @{toggle_global_attack_macro_insert}" />
									<input type="hidden" name="attr_damage_macro" value="[[ @{total-damage} ]] [Total] + @{toggle_damage_macro_insert} + @{damage-type_macro_insert} + @{toggle_global_damage_macro_insert}" />
									<div class="sheet-sect sheet-expand">
										<input type="checkbox" class="sheet-showarrow sheet-extra-damage-show" name="attr_add-damage-show" value="1" title="Add additional, precision, or extra critical damage" data-i18n-title="additional-damage-title" aria-label="Show Additional Damage" data-i18n-aria-label="additional-damage" />
										<label class="sheet-showsect sheet-extra-damage-showlabel" data-i18n="precision-abbrv">Extra Dmg</label>
										<input type="checkbox" class="sheet-showarrow sheet-iterations-show" title="iterative-attacks-title" data-i18n-title="iterative-attacks-title" data-i18n-aria-label="iterative-attacks-title" aria-label="Show Iterative Attacks" name="attr_iterative-attacks-show" value="1" />
										<label class="sheet-showsect sheet-iterations-showlabel" data-i18n="iterative-attacks-abbrv">Iterative Atks</label>
										<input type="checkbox" class="sheet-showarrow sheet-advmacro-text-show" title="Click to expand" data-i18n-title="showsect-cmd" data-i18n-aria-label="showsect-cmd" aria-label="Show Macro Text" name="attr_advmacro-text-show" value="1" />
										<label class="sheet-showsect sheet-advmacro-text-showlabel" data-i18n="macro-text-advanced">Adv Rolltime Macros</label>
										<input type="checkbox" class="sheet-showarrow sheet-macro-text-show" title="Click to expand" data-i18n-title="showsect-cmd" data-i18n-aria-label="showsect-cmd" aria-label="Show Macro Text" name="attr_macro-text-show" value="1" />
										<label class="sheet-showsect sheet-macro-text-showlabel" data-i18n="macro-text">Macro Text</label>
										<input type="checkbox" class="sheet-showarrow sheet-id-show" title="Click to expand" data-i18n-title="showsect-cmd" data-i18n-aria-label="showsect-cmd" aria-label="Show Row ID" name="attr_ids-show" value="1" />
										<label class="sheet-showsect sheet-id-showlabel" data-i18n="identification-abbrv">ID</label>
										<hr class="sheet-subnav-hr">
										<div class="sheet-cheat"></div>
										<div class="sheet-extra-damage sheet-center">
											<label class="sheet-small-label2" style="width:23.85%;">
												<span class="sheet-super sheet-note-b" data-i18n-title="precision-damage-title" data-i18n-aria-label="precision-damage-title" title="Extra or Precision Damage (not added to critical damage)" data-i18n="extra-damage">Extra Non-Crit Dmg</span>
												<textarea class="sheet-inline-textarea sheet-both" type="text" name="attr_precision_dmg_macro" title="@{repeating_weapon_$X_precision_dmg_macro}" placeholder="Macro/Query" data-i18n-placeholder="full-macro-place"></textarea>
											</label>
											<label class="sheet-small-label2" style="width:23.85%;">
												<span data-i18n-title="precision-damage-type" data-i18n-aria-label="precision-damage-type" title="Extra Damage type" data-i18n="type">Type</span>
												<input style="height:2.15em;" type="text" name="attr_precision_dmg_type" title="@{repeating_weapon_$X_precision_dmg_type}" value="" placeholder="Dmg type / Description" data-i18n-placeholder="damage-type-or-description" />
											</label>
											<label class="sheet-small-label2" style="width:23.85%;">
												<span class="sheet-super sheet-note-b" data-i18n-title="extra-critical-damage-title" data-i18n-aria-label="extra-critical-damage-title" title="Extra Critical Damage" data-i18n="extra-critical-damage">Extra Crit Dmg</span>
												<textarea class="sheet-inline-textarea sheet-both" type="text" name="attr_critical_dmg_macro" title="@{repeating_weapon_$X_critical_dmg_macro}" placeholder="Macro/Query" data-i18n-placeholder="full-macro-place"></textarea>
											</label>
											<label class="sheet-small-label2" style="width:23.85%;">
												<span data-i18n-title="precision-damage-type" data-i18n-aria-label="precision-damage-type" title="Extra Damage type" data-i18n="type">Type</span>
												<input style="height:2.15em;" type="text" name="attr_critical_dmg_type" title="@{repeating_weapon_$X_critical_dmg_type}" value="" placeholder="Dmg type / Description" data-i18n-placeholder="damage-type-or-description" />
											</label>
										</div>
										<div class="sheet-table sheet-iterative_attack_section">
											<span class="sheet-secondary-table-name" data-i18n="iterative-attacks">Iterative Attacks</span>
											<div class="sheet-table-row">
												<span class="sheet-table-header" style="width: 14em;" data-i18n="include-attacks-?">Include Attack?</span>
												<span class="sheet-table-header" style="width: 20%;" data-i18n="custom-name">Custom Name</span>
												<span class="sheet-table-header" style="width: 7em;" data-i18n="attack-modifier-abbrv">Attack Mod</span>
												<span class="sheet-table-header sheet-super sheet-note-d" data-i18n="macro-text">Macro</span>
											</div>										
											<div class="sheet-table-row">
												<span class="sheet-table-cell">
													<label>
														<b data-i18n="primary-attack">Primary attack</b>
													</label>
												</span>
												<span class="sheet-table-cell">
													<input type="text" name="attr_iterative_attack1_name" title="@{repeating_weapon_$X_iterative_attack1_name}" value="" data-i18n-placeholder="attack-1">
												</span>
												<span class="sheet-table-cell">
													<input type="number" name="attr_total-attack" title="@{repeating_weapon_$X_total-attack}" value="0" class="sheet-calc" readonly>
												</span>
												<span class="sheet-table-cell sheet-macro-text-tohide">&nbsp;</span>
											</div>										
											<div class="sheet-table-row">
												<span class="sheet-table-cell">
													<label>
														<input type="checkbox" class="sheet-boldlabel-check" name="attr_toggle_iterative_attack2" title="@{repeating_weapon_$X_toggle_iterative_attack2}" value="@{var_iterative_attack2_macro}" /><b title="Include a second attack to your weapon?" data-i18n="include-second-attack">Include a 2nd attack?</b>
													</label>
												</span>
												<span class="sheet-table-cell">
													<input type="text" name="attr_iterative_attack2_name" title="@{repeating_weapon_$X_iterative_attack2_name}" value="" data-i18n-placeholder="attack-2">
												</span>
												<span class="sheet-table-cell">
													<input type="number" name="attr_iterative_attack2_value" title="@{repeating_weapon_$X_iterative_attack2_value}" value="-5" max="0" />
												</span>
												<span class="sheet-table-cell sheet-macro-text-tohide">
													<textarea class="sheet-inline-textarea" data-i18n-placeholder="full-macro-place" name="attr_var_iterative_attack2_macro" title="@{repeating_weapon_$X_var_iterative_attack2_macro}">{{attack2=[[ 1d20cs>[[ @{crit-target} ]] + [[ @{attack_macro} + @{iterative_attack2_value} ]] [iterative] ]]}} {{damage2=[[ @{damage-dice-num}d@{damage-die} + @{damage_macro} ]]}} {{crit_confirm2=[[ 1d20 + [[ @{attack_macro} + @{iterative_attack2_value} ]] [iterative] + [[ @{crit_conf_mod} ]] ]]}} {{crit_damage2=[[ [[ @{damage-dice-num} * [[ @{crit-multiplier} - 1 ]] ]]d@{damage-die} + ((@{damage_macro}) * [[ @{crit-multiplier} - 1 ]]) ]]}} {{precision_dmg21=@{precision_dmg_macro}}} {{precision_dmg22=@{global_precision_dmg_macro}}} {{critical_dmg21=@{critical_dmg_macro}}} {{critical_dmg22=@{global_critical_dmg_macro}}} {{attack2name=@{iterative_attack2_name}}}</textarea>
												</span>
											</div>
											<div class="sheet-table-row">
												<span class="sheet-table-cell">
													<label>
														<input type="checkbox" class="sheet-boldlabel-check" name="attr_toggle_iterative_attack3" title="@{repeating_weapon_$X_toggle_iterative_attack3}" value="@{var_iterative_attack3_macro}" /><b title="Include a third attack to your weapon?" data-i18n="include-third-attack">Include a 3rd attack?</b>
													</label>
												</span>
												<span class="sheet-table-cell">
													<input type="text" name="attr_iterative_attack3_name" title="@{repeating_weapon_$X_iterative_attack3_name}" value="" data-i18n-placeholder="attack-3">
												</span>
												<span class="sheet-table-cell">
													<input type="number" name="attr_iterative_attack3_value" title="@{repeating_weapon_$X_iterative_attack3_value}" value="-10" max="0" />
												</span>
												<span class="sheet-table-cell sheet-macro-text-tohide">
													<textarea class="sheet-inline-textarea" data-i18n-placeholder="full-macro-place" name="attr_var_iterative_attack3_macro" title="@{repeating_weapon_$X_var_iterative_attack3_macro}">{{attack3=[[ 1d20cs>[[ @{crit-target} ]] + [[ @{attack_macro} + @{iterative_attack3_value} ]] [iterative] ]]}} {{damage3=[[ @{damage-dice-num}d@{damage-die} + @{damage_macro} ]]}} {{crit_confirm3=[[ 1d20 + [[ @{attack_macro} + @{iterative_attack3_value} ]] [iterative] + [[ @{crit_conf_mod} ]] ]]}} {{crit_damage3=[[ [[ @{damage-dice-num} * [[ @{crit-multiplier} - 1 ]] ]]d@{damage-die} + ((@{damage_macro}) * [[ @{crit-multiplier} - 1]]) ]]}} {{precision_dmg31=@{precision_dmg_macro}}} {{precision_dmg32=@{global_precision_dmg_macro}}} {{critical_dmg31=@{critical_dmg_macro}}} {{critical_dmg32=@{global_critical_dmg_macro}}} {{attack3name=@{iterative_attack3_name}}}</textarea>
												</span>
											</div>
											<div class="sheet-table-row">
												<span class="sheet-table-cell">
													<label>
														<input type="checkbox" class="sheet-boldlabel-check" name="attr_toggle_iterative_attack4" title="@{repeating_weapon_$X_toggle_iterative_attack4}" value="@{var_iterative_attack4_macro}" /><b title="Include a fourth attack to your weapon?" data-i18n="include-fourth-attack">Include a 4th attack?</b>
													</label>
												</span>
												<span class="sheet-table-cell">
													<input type="text" name="attr_iterative_attack4_name" title="@{repeating_weapon_$X_iterative_attack4_name}" value="" data-i18n-placeholder="attack-4">
												</span>
												<span class="sheet-table-cell">
													<input type="number" name="attr_iterative_attack4_value" title="@{repeating_weapon_$X_iterative_attack4_value}" value="-15" max="0" />
												</span>
												<span class="sheet-table-cell sheet-macro-text-tohide">
													<textarea class="sheet-inline-textarea" data-i18n-placeholder="full-macro-place" name="attr_var_iterative_attack4_macro" title="@{repeating_weapon_$X_var_iterative_attack4_macro}">{{attack4=[[ 1d20cs>[[ @{crit-target} ]] + [[ @{attack_macro} + @{iterative_attack4_value} ]] [iterative] ]]}} {{damage4=[[ @{damage-dice-num}d@{damage-die} + @{damage_macro} ]]}} {{crit_confirm4=[[ 1d20 + [[ @{attack_macro} + @{iterative_attack4_value} ]] [iterative] + [[ @{crit_conf_mod} ]] ]]}} {{crit_damage4=[[ [[ @{damage-dice-num} * [[ @{crit-multiplier} - 1 ]] ]]d@{damage-die} + ((@{damage_macro}) * [[ @{crit-multiplier} - 1 ]]) ]]}} {{precision_dmg41=@{precision_dmg_macro}}} {{precision_dmg42=@{global_precision_dmg_macro}}} {{critical_dmg41=@{critical_dmg_macro}}} {{critical_dmg42=@{global_critical_dmg_macro}}} {{attack4name=@{iterative_attack4_name}}}</textarea>
												</span>
											</div>
											<div class="sheet-table-row">
												<span class="sheet-table-cell">
													<label>
														<input type="checkbox" class="sheet-boldlabel-check" name="attr_toggle_iterative_attack5" title="@{repeating_weapon_$X_toggle_iterative_attack5}" value="@{var_iterative_attack5_macro}" /><b title="Include a fifth attack to your weapon?" data-i18n="include-fifth-attack">Include a 5th attack?</b>
													</label>
												</span>
												<span class="sheet-table-cell">
													<input type="text" name="attr_iterative_attack5_name" title="@{repeating_weapon_$X_iterative_attack5_name}" value="" data-i18n-placeholder="attack-5">
												</span>
												<span class="sheet-table-cell">
													<input type="number" name="attr_iterative_attack5_value" title="@{repeating_weapon_$X_iterative_attack5_value}" value="-20" max="0" />
												</span>
												<span class="sheet-table-cell sheet-macro-text-tohide">
													<textarea class="sheet-inline-textarea" data-i18n-placeholder="full-macro-place" name="attr_var_iterative_attack5_macro" title="@{repeating_weapon_$X_var_iterative_attack5_macro}">{{attack5=[[ 1d20cs>[[ @{crit-target} ]] + [[ @{attack_macro} + @{iterative_attack5_value} ]] [iterative] ]]}} {{damage5=[[ @{damage-dice-num}d@{damage-die} + @{damage_macro} ]]}} {{crit_confirm5=[[ 1d20 + [[ @{attack_macro} + @{iterative_attack5_value} ]] [iterative] + [[ @{crit_conf_mod} ]] ]]}} {{crit_damage5=[[ [[ @{damage-dice-num} * [[ @{crit-multiplier} - 1 ]] ]]d@{damage-die} + ((@{damage_macro}) * [[ @{crit-multiplier} - 1 ]]) ]]}} {{precision_dmg51=@{precision_dmg_macro}}} {{precision_dmg52=@{global_precision_dmg_macro}}} {{critical_dmg51=@{critical_dmg_macro}}} {{critical_dmg52=@{global_critical_dmg_macro}}} {{attack5name=@{iterative_attack5_name}}}</textarea>
												</span>
											</div>
											<div class="sheet-table-row">
												<span class="sheet-table-cell">
													<label>
														<input type="checkbox" class="sheet-boldlabel-check" name="attr_toggle_iterative_attack6" title="@{repeating_weapon_$X_toggle_iterative_attack6}" value="@{var_iterative_attack6_macro}" /><b title="Include a sixth attack to your weapon?" data-i18n="include-sixth-attack">Include a 6th attack?</b>
													</label>
												</span>
												<span class="sheet-table-cell">
													<input type="text" name="attr_iterative_attack6_name" title="@{repeating_weapon_$X_iterative_attack6_name}" value="" data-i18n-placeholder="attack-6">
												</span>
												<span class="sheet-table-cell">
													<input type="number" name="attr_iterative_attack6_value" title="@{repeating_weapon_$X_iterative_attack6_value}" value="-25" max="0" />
												</span>
												<span class="sheet-table-cell sheet-macro-text-tohide">
													<textarea class="sheet-inline-textarea" data-i18n-placeholder="full-macro-place" name="attr_var_iterative_attack6_macro" title="@{repeating_weapon_$X_var_iterative_attack6_macro}">{{attack6=[[ 1d20cs>[[ @{crit-target} ]] + [[ @{attack_macro} + @{iterative_attack6_value} ]] [iterative] ]]}} {{damage6=[[ @{damage-dice-num}d@{damage-die} + @{damage_macro} ]]}} {{crit_confirm6=[[ 1d20 + [[ @{attack_macro} + @{iterative_attack6_value} ]] [iterative] + [[ @{crit_conf_mod} ]] ]]}} {{crit_damage6=[[ [[ @{damage-dice-num} * [[ @{crit-multiplier} - 1 ]] ]]d@{damage-die} + ((@{damage_macro}) * [[ @{crit-multiplier} - 1 ]]) ]]}} {{precision_dmg61=@{precision_dmg_macro}}} {{precision_dmg62=@{global_precision_dmg_macro}}} {{critical_dmg61=@{critical_dmg_macro}}} {{critical_dmg62=@{global_critical_dmg_macro}}} {{attack6name=@{iterative_attack6_name}}}</textarea>
												</span>
											</div>
											<div class="sheet-table-row">
												<span class="sheet-table-cell">
													<label>
														<input type="checkbox" class="sheet-boldlabel-check" name="attr_toggle_iterative_attack7" title="@{repeating_weapon_$X_toggle_iterative_attack7}" value="@{var_iterative_attack7_macro}" /><b title="Include a seventh attack to your weapon?" data-i18n="include-seventh-attack">Include a 7th attack?</b>
													</label>
												</span>
												<span class="sheet-table-cell">
													<input type="text" name="attr_iterative_attack7_name" title="@{repeating_weapon_$X_iterative_attack7_name}" value="" data-i18n-placeholder="attack-7">
												</span>
												<span class="sheet-table-cell">
													<input type="number" name="attr_iterative_attack7_value" title="@{repeating_weapon_$X_iterative_attack7_value}" value="-30" max="0" />
												</span>
												<span class="sheet-table-cell sheet-macro-text-tohide">
													<textarea class="sheet-inline-textarea" data-i18n-placeholder="full-macro-place" name="attr_var_iterative_attack7_macro" title="@{repeating_weapon_$X_var_iterative_attack7_macro}">{{attack7=[[ 1d20cs>[[ @{crit-target} ]] + [[ @{attack_macro} + @{iterative_attack7_value} ]] [iterative] ]]}} {{damage7=[[ @{damage-dice-num}d@{damage-die} + @{damage_macro} ]]}} {{crit_confirm7=[[ 1d20 + [[ @{attack_macro} + @{iterative_attack7_value} ]] [iterative] + [[ @{crit_conf_mod} ]] ]]}} {{crit_damage7=[[ [[ @{damage-dice-num} * [[ @{crit-multiplier} - 1 ]] ]]d@{damage-die} + ((@{damage_macro}) * [[ @{crit-multiplier} - 1 ]]) ]]}} {{precision_dmg71=@{precision_dmg_macro}}} {{precision_dmg72=@{global_precision_dmg_macro}}} {{critical_dmg71=@{critical_dmg_macro}}} {{critical_dmg72=@{global_critical_dmg_macro}}} {{attack7name=@{iterative_attack7_name}}}</textarea>
												</span>
											</div>
											<div class="sheet-table-row">
												<span class="sheet-table-cell">
													<label>
														<input type="checkbox" class="sheet-boldlabel-check" name="attr_toggle_iterative_attack8" title="@{repeating_weapon_$X_toggle_iterative_attack8}" value="@{var_iterative_attack8_macro}" /><b title="Include an eighth attack to your weapon?" data-i18n="include-eighth-attack">Include an 8th attack?</b>
													</label>
												</span>
												<span class="sheet-table-cell">
													<input type="text" name="attr_iterative_attack8_name" title="@{repeating_weapon_$X_iterative_attack8_name}" value="" data-i18n-placeholder="attack-8">
												</span>
												<span class="sheet-table-cell">
													<input type="number" name="attr_iterative_attack8_value" title="@{repeating_weapon_$X_iterative_attack8_value}" value="-35" max="0" />
												</span>
												<span class="sheet-table-cell sheet-macro-text-tohide">
													<textarea class="sheet-inline-textarea" data-i18n-placeholder="full-macro-place" name="attr_var_iterative_attack8_macro" title="@{repeating_weapon_$X_var_iterative_attack8_macro}">{{attack8=[[ 1d20cs>[[ @{crit-target} ]] + [[ @{attack_macro} + @{iterative_attack8_value} ]] [iterative] ]]}} {{damage8=[[ @{damage-dice-num}d@{damage-die} + @{damage_macro} ]]}} {{crit_confirm8=[[ 1d20 + [[ @{attack_macro} + @{iterative_attack8_value} ]] [iterative] + [[ @{crit_conf_mod} ]] ]]}} {{crit_damage8=[[ [[ @{damage-dice-num} * [[ @{crit-multiplier} - 1 ]] ]]d@{damage-die} + ((@{damage_macro}) * [[ @{crit-multiplier} - 1 ]]) ]]}} {{precision_dmg81=@{precision_dmg_macro}}} {{precision_dmg82=@{global_precision_dmg_macro}}} {{critical_dmg81=@{critical_dmg_macro}}} {{critical_dmg82=@{global_critical_dmg_macro}}} {{attack8name=@{iterative_attack8_name}}}</textarea>
												</span>
											</div>
										</div>
										<div class="sheet-advanced-macros" style="width:100%;height:auto;clear:both;">
											<div class="sheet-center sheet-repeating-hidesect">
												<div class="sheet-insertmacrocell" style="width:48.5%">
													<input class="sheet-textarea-gray" type="checkbox" name="attr_toggle_attack_macro_insert" value="@{var_attack_macro_insert}" title="@{toggle_attack_macro_insert}" checked />
													<label class="sheet-small-label2">
														<span class="sheet-super sheet-note-c" data-i18n="insert-macro-attack" data-i18n-title="additional-attack-macro-query-included-with-crits" data-i18n-aria-label="additional-attack-macro-query-included-with-crits" title="Additional Attack Macro/Query(included with crits)">'Add to Attack' Macro:</span>
														<input type="hidden" name="attr_var_attack_macro_insert" value="[[ @{attack_macro_insert} ]] [Macro]" />
														<textarea class="sheet-inline-textarea sheet-both" name="attr_attack_macro_insert" data-i18n-placeholder="full-macro-place" placeholder="Macro/Query" title="@{repeating_weapon_$X_attack_macro_insert}">0</textarea>
													</label>
												</div>
												<div class="sheet-insertmacrocell" style="width:48.5%">
													<input class="sheet-textarea-gray" type="checkbox" name="attr_toggle_damage_macro_insert" value="@{var_damage_macro_insert}" title="@{toggle_damage_macro_insert}" checked />
													<label class="sheet-small-label2">
														<span class="sheet-super sheet-note-c" data-i18n="insert-macro-damage" data-i18n-title="additional-damage-macro-query-included-with-crits" data-i18n-aria-label="additional-damage-macro-query-included-with-crits" title="Additional Damage Macro/Query(included with crits)">'Add to Damage' Macro:</span>
														<input type="hidden" name="attr_var_damage_macro_insert" value="[[ @{damage_macro_insert} ]] [Macro]" />
														<textarea class="sheet-inline-textarea sheet-both" name="attr_damage_macro_insert" data-i18n-placeholder="full-macro-place" placeholder="Macro/Query" title="@{repeating_weapon_$X_damage_macro_insert}">0</textarea>
													</label>
												</div>
											</div>
										</div>
										<div class="sheet-macro-text" style="width:100%;height:auto;clear:both;">
											<label class="sheet-small-label2" style="width:100%;height:auto;margin-left:0;margin-right:0;padding-left:2px;padding-right:2px;">
												<span class="sheet-super sheet-note-d" data-i18n="full-macro">Full Macro:</span>
												<textarea style="display:none;" class="sheet-macro-text" title="@{repeating_weapon_$X_macro-text}" name="attr_macro-text">@{PC-whisper} &{template:pf_attack} @{toggle_attack_accessible} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle}} {{name=@{name}}} {{attack=[[ 1d20cs>[[ @{crit-target} ]] + @{attack_macro} ]]}} {{damage=[[@{damage-dice-num}d@{damage-die} + @{damage_macro}]]}} {{crit_confirm=[[ 1d20 + @{attack_macro} + [[ @{crit_conf_mod} ]] ]]}} {{crit_damage=[[ [[ @{damage-dice-num} * (@{crit-multiplier} - 1) ]]d@{damage-die} + ((@{damage_macro}) * [[ @{crit-multiplier} - 1 ]]) ]]}} {{type=@{type}}} {{weapon_notes=@{notes}}} @{iterative_attacks} @{macro_options} {{vs=@{vs}}} {{vs@{vs}=@{vs}}} {{precision_dmg1=@{precision_dmg_macro}}} {{precision_dmg1_type=@{precision_dmg_type}}} {{precision_dmg2=@{global_precision_dmg_macro}}} {{precision_dmg2_type=@{global_precision_dmg_type}}} {{critical_dmg1=@{critical_dmg_macro}}} {{critical_dmg1_type=@{critical_dmg_type}}} {{critical_dmg2=@{global_critical_dmg_macro}}} {{critical_dmg2_type=@{global_critical_dmg_type}}} {{attack1name=@{iterative_attack1_name}}}</textarea>
												<textarea class="sheet-macro-text" title="@{repeating_weapon_$X_NPC-macro-text}" name="attr_NPC-macro-text">@{NPC-whisper} &{template:pf_attack} @{toggle_attack_accessible} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle}} {{name=@{name}}} {{attack=[[ 1d20cs>[[ @{crit-target} ]] + @{attack_macro} ]]}} {{damage=[[@{damage-dice-num}d@{damage-die} + @{damage_macro}]]}} {{crit_confirm=[[ 1d20 + @{attack_macro} + [[ @{crit_conf_mod} ]] ]]}} {{crit_damage=[[ [[ @{damage-dice-num} * (@{crit-multiplier} - 1) ]]d@{damage-die} + ((@{damage_macro}) * [[ @{crit-multiplier} - 1 ]]) ]]}} {{type=@{type}}} {{weapon_notes=@{notes}}} @{iterative_attacks} @{macro_options} {{vs=@{vs}}} {{vs@{vs}=@{vs}}} {{precision_dmg1=@{precision_dmg_macro}}} {{precision_dmg1_type=@{precision_dmg_type}}} {{precision_dmg2=@{global_precision_dmg_macro}}} {{precision_dmg2_type=@{global_precision_dmg_type}}} {{critical_dmg1=@{critical_dmg_macro}}} {{critical_dmg1_type=@{critical_dmg_type}}} {{critical_dmg2=@{global_critical_dmg_macro}}} {{critical_dmg2_type=@{global_critical_dmg_type}}} {{attack1name=@{iterative_attack1_name}}}</textarea>
											</label>
										</div>
										<div class="sheet-repeating-id">
											<label class="sheet-small-label2 sheet-left" style="width:32%;"><span data-i18n="row-identification-for-macros">Row ID for macros</span>:&nbsp;<span class="sheet-selectable" name="attr_row_id"></span></label>
											<label class="sheet-small-label2" title="ID of the Item from the Inventory tab that, when changed, updates this attack entry" data-i18n-title="source-item-title" data-i18n-aria-label="source-item-title"><input type="text" name="attr_source-item" title="@{repeating_weapon_$X_source-item}" value="" placeholder="Linked Item ID" data-i18n-placeholder="source-item-placeholder" /><span data-i18n="source-item">Linked Item ID</span>&nbsp;<span name="attr_source-item-name"></span></label>
											<label class="sheet-small-label2" title="ID of the spell from the spells tab that, when changed, updates this attack entry" data-i18n-title="source-spell-title" data-i18n-aria-label="source-spell-title"><input type="text" name="attr_source-spell" title="@{repeating_weapon_$X_source-spell}" value="" placeholder="Linked Spell ID" data-i18n-placeholder="source-spell-placeholder" /><span data-i18n="source-spell">Linked Spell ID</span>&nbsp;<span name="attr_source-spell-name"></span></label>
											<label class="sheet-small-label2" title="ID of the ability from the abilities tab that, when changed, updates this attack entry" data-i18n-title="source-ability-title" data-i18n-aria-label="source-ability-title"><input type="text" name="attr_source-ability" title="@{repeating_weapon_$X_source-ability}" value="" placeholder="Linked ability ID" data-i18n-placeholder="source-ability-placeholder" /><span data-i18n="source-ability">Linked ability ID</span>&nbsp;<span name="attr_source-ability-name"></span></label>
										</div>
									</div>
								</div>
							</fieldset>
						
						</div>
					</div>
					<div class="sheet-cheat"></div>
					<input name="attr_use_spell-like-abilities" type="checkbox" value="1" class="sheet-oldslas-show sheet-sect-show-inverse" />
					<h3 class="sheet-sect-inverse sheet-inspecial" data-i18n="spell-like-abilities">Spell-like Abilities</h3>
					<span class="sheet-sect-inverse sheet-inspecial" data-i18n="in-special-abilities-section">In list under Special Abilities below</span>
					<input class="sheet-showarrow sheet-h3arrow sheet-section-oldslas" type="checkbox" name="attr_npc-spell-like-abilities-show" data-i18n-aria-label="spell-like-abilities" title="Click to expand" data-i18n-title="showsect-cmd" value="1" checked />
					<h3 class="sheet-clickheader sheet-showsect sheet-section-oldslas"><label title="Click to expand" data-i18n-title="showsect-cmd" data-i18n="spell-like-abilities">Spell Like Abilities</label></h3>
					<div class="sheet-h3-section sheet-section-oldslas" role="region" aria-label="npc-spell-like-abilities">
						<h4 data-i18n="spell-like-abilities-class-zero">Class and stat abilities based on</h4>
						<div class="sheet-table">
							<span class="sheet-table-name" data-i18n="spell-like-abilities-class-zero">Spell Like Abilities Class 0</span>
							<div class="sheet-table-row">
								<span class="sheet-table-header"></span>
								<span class="sheet-table-header" data-i18n="total">Total</span>
								<span class="sheet-table-header"></span>
								<span class="sheet-table-header" data-i18n="caster-level-abbrv">CL</span>
								<span class="sheet-table-header"></span>
								<span class="sheet-table-header" data-i18n="miscellaneous-abbrv">Misc</span>
								<span class="sheet-table-header" data-i18n="concentration-check">Concentration Check</span>
								<span class="sheet-table-header" data-i18n="total">Total</span>
								<span class="sheet-table-header"></span>
								<span class="sheet-table-header" data-i18n="ability">Ability</span>
								<span class="sheet-table-header" data-i18n="modifier-abbrv">Mod</span>
								<span class="sheet-table-header"></span>
								<span class="sheet-table-header" data-i18n="miscellaneous-abbrv">Misc</span>
							</div>
							<div class="sheet-table-row">
								<span class="sheet-table-cell"><button style="font-size:100%;" title="%{selected|NPC-Spell-Class-0-CL-Check}" type="roll" name="roll_NPC-Spell-Class-0-CL-Check" value="@{NPC-whisper} &{template:pf_generic} @{toggle_accessible_flag} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_generic}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle}} {{name=CL Check}} {{Class=**@{spellclass-0-name} @{spellclass-0-level}**}} {{Check=[[ 1d20 + @{spellclass-0-level} + @{spellclass-0-level-misc} ]]}}">&nbsp;<span data-i18n="caster-level-check-abbrv">CL Check</span></button></span>
								<span class="sheet-table-cell"><input title="@{spellclass-0-level-total}" type="number" name="attr_spellclass-0-level-total" value="0" class="sheet-calc" readonly /></span>
								<span class="sheet-divider">=</span>
								<span class="sheet-table-cell"><input title="@{spellclass-0-level}" type="number" name="attr_spellclass-0-level" value="0" /></span>
								<span class="sheet-divider">+</span>
								<span class="sheet-table-cell"><input title="@{spellclass-0-level-misc}" type="number" name="attr_spellclass-0-level-misc" value="0" /></span>
								<span class="sheet-table-cell"><button style="font-size:100%;" title="%{selected|NPC-Concentration-Check-0}" type="roll" name="roll_NPC-Concentration-Check-0" value="@{NPC-whisper} &{template:pf_generic} @{toggle_accessible_flag} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_generic}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle}} {{name=Concentration Check}} {{Class=**@{spellclass-0-name} @{spellclass-0-level}**}} {{Check=[[ 1d20 + @{Concentration-0} ]]}}">&nbsp;<span data-i18n="concentration-check-abbrv">Concentration</span></button></span>
								<span class="sheet-table-cell"><input title="@{Concentration-0}" type="number" name="attr_Concentration-0" value="0" class="sheet-calc" readonly /></span>
								<span class="sheet-divider">=</span>
								<span class="sheet-table-cell">
									<select title="@{Concentration-0-ability}" name="attr_Concentration-0-ability">
										<option value="0" data-i18n="none-default" selected>&#8226;None</option>
										<option value="@{STR-mod}" data-i18n="strength-abbrv">STR</option>
										<option value="@{DEX-mod}" data-i18n="dexterity-abbrv">DEX</option>
										<option value="@{CON-mod}" data-i18n="constitution-abbrv">CON</option>
										<option value="@{INT-mod}" data-i18n="intelligence-abbrv">INT</option>
										<option value="@{WIS-mod}" data-i18n="wisdom-abbrv">WIS</option>
										<option value="@{CHA-mod}" data-i18n="charisma-abbrv">CHA</option>
									</select>
								</span>
								<span class="sheet-table-cell"><input title="@{Concentration-0-mod}" type="number" name="attr_Concentration-0-mod" value="0" class="sheet-calc" readonly /></span>
								<span class="sheet-divider">+</span>
								<span class="sheet-table-cell"><input title="@{Concentration-0-misc}" type="number" name="attr_Concentration-0-misc" value="0" /></span>
							</div>
						</div>
						<div class="sheet-repeating-sect sheet-section-oldslas">
							<input type="checkbox" class="sheet-minimize-show sheet-cssbutton" data-i18n-title="minimize-all-cmd" title="Minimize all rows." name="attr_npc-spell-like-abilities-min-show" value="1" /><span></span>
							<input type="checkbox" class="sheet-lock-show sheet-cssbutton" data-i18n-title="expand-cmd" title="Collapse or expand all rows." name="attr_npc-spell-like-abilities-expand-show" value="1" /><span></span>
							<input type="checkbox" class="sheet-split-column-show sheet-cssbutton" data-i18n-title="column-cmd" title="Split into two columns" name="attr_npc-spell-like-abilities-column-show" value="1" /><span></span>
							<input class="sheet-deletebutton sheet-cssbutton sheet-deletesect-show" type="checkbox" name="attr_delete_repeating_npc-spell-like-abilities_btn" value="1" data-i18n-title="delete-npc-spell-like-abilities" data-i18n-aria-label="delete-npc-spell-like-abilities-must-confirm-next-checkbox" /><span></span><label class="sheet-deletesect sheet-allrows-note"><input type="checkbox" class="sheet-selectedlabel-check" name="attr_delete_repeating_npc-spell-like-abilities" data-i18n-aria-label="confirm-delete-npc-spell-like-abilities" data-i18n-title="confirm-delete-npc-spell-like-abilities" value="1" /><b data-i18n="delete-all-rows-are-you-sure">delete all rows are you sure</b></label>
							<div class="sheet-repeating-fields">
								<fieldset class="repeating_npc-spell-like-abilities">
									<span class="sheet-error"><span class="sheet-pictos">!</span><span data-i18n="error-msg1">Error! You must delete this row before editing any items in this section.</span></span>
									<input type="checkbox" class="sheet-counted sheet-sect-show" data-i18n-title="minimize-cmd" title="Minimize Row" name="attr_row-show" value="1" checked /><span class="sheet-table-cell"></span>
									<span class="sheet-table-cell sheet-repeating-rollbutton"><button type="roll" name="attr_roll" title="%{selected|repeating_npc-spell-like-abilities_$X_roll}" value="@{macro-text}"></button></span>
									<span class="sheet-table-cell sheet-small-label"><input title="@{repeating_npc-spell-like-abilities_$X_used}" type="number" name="attr_used" value="0" /><br><span data-i18n="uses-per-day">Uses/Day</span></span>
									<input type="hidden" value="spell-like-abilities" name="attr_rule_category" />
									<span class="sheet-table-cell sheet-small-label" style="width:25%;"><input title="@{repeating_npc-spell-like-abilities_$X_name}" type="text" name="attr_name" placeholder="Name" data-i18n-placeholder="name" /><br><span data-i18n="name">Name</span></span>
									<span class="sheet-table-cell sheet-small-label sheet-sect" style="width:25%;"><input title="@{repeating_npc-spell-like-abilities_$X_short-description}" type="text" name="attr_short-description" placeholder="Short Description" data-i18n-placeholder="short-description" /><br><span data-i18n="short-description-abbrv">Short Desc</span></span>
									<span class="sheet-table-cell sheet-small-label sheet-sect"><input title="@{repeating_npc-spell-like-abilities_$X_level}" type="text" name="attr_level" value="0" placeholder="Spell Level" data-i18n-placeholder="spell-level" /><br><span data-i18n="level">Level</span></span>
									<span class="sheet-table-cell sheet-small-label"><input title="@{repeating_npc-spell-like-abilities_$X_range}" type="text" name="attr_range" value="" placeholder="Range" data-i18n-placeholder="range" /><br><span data-i18n="range">Range</span></span>
									<span class="sheet-table-cell sheet-small-label sheet-sect"><input title="@{repeating_npc-spell-like-abilities_$X_duration}" type="text" name="attr_duration" value="" placeholder="Duration" data-i18n-placeholder="spell-duration" /><br><span data-i18n="duration">Duration</span></span>
									<span class="sheet-table-cell sheet-small-label"><input title="@{repeating_npc-spell-like-abilities_$X_save}" type="text" name="attr_save" value="" placeholder="Save" data-i18n-placeholder="save" /><br><span data-i18n="save">Save</span></span>
									<span class="sheet-table-cell sheet-small-label sheet-sect" style="width:5.5em;">
										<select title="@{repeating_npc-spell-like-abilities_$X_sr}" name="attr_sr">
											<option value="" data-i18n="not-applicable-abbrv-default" selected>&#8226;N/A</option>
											<option value="Yes" data-i18n="yes">Yes</option>
											<option value="No" data-i18n="no">No</option>
											<option value="Yes (Harmless)" data-i18n="yes-harmless">Yes (Harmless)</option>
											<option value="No (Harmless)" data-i18n="no-harmless">No (Harmless)</option>
										</select>
										<br><span data-i18n="spell-resistance-abbrv">SR</span>
									</span>
									<div class="sheet-sect sheet-expand">
										<input type="checkbox" class="sheet-showarrow sheet-macro-text-show" title="Click to expand" data-i18n-title="showsect-cmd" aria-label="Show Macro Text" name="attr_macro-text-show" value="1" checked />
										<label class="sheet-showsect sheet-macro-text-showlabel" data-i18n="macro-text">Macro Text</label>
										<input type="checkbox" class="sheet-showarrow sheet-id-show" title="Click to expand" data-i18n-title="showsect-cmd" aria-label="Show Row ID" name="attr_ids-show" value="1"  />
										<label class="sheet-showsect sheet-id-showlabel" data-i18n="identification-abbrv">ID</label>
										<hr class="sheet-subnav-hr">
										<div class="sheet-cheat"></div>
										<textarea class="sheet-macro-text" title="@{repeating_npc-spell-like-abilities_$X_macro-text}" name="attr_macro-text">@{NPC-whisper} &{template:pf_generic} @{toggle_accessible_flag} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_generic}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle}} {{name=@{name}}} {{^{level}=[[@{level}]]}} {{^{range}=@{range}}} {{^{duration}=@{duration}}} {{^{save}=@{save}}} {{^{spell-resistance-abbrv}=@{sr}}} {{description=@{short-description}}}</textarea>
										<div class="sheet-repeating-id">
											<span data-i18n="identification-abbrv">ID</span>: <span class="sheet-selectable" name="attr_row_id" />
										</div>
									</div>
								</fieldset>
							</div>
						</div>
					</div>
					<div class="sheet-cheat"></div>
					<input class="sheet-showarrow sheet-h3arrow" type="checkbox" name="attr_npc-spells-show" data-i18n-aria-label="spells" title="Click to expand" data-i18n-title="showsect-cmd" value="1" checked />
					<h3 class="sheet-clickheader sheet-showsect"><label title="Click to expand" data-i18n-title="showsect-cmd" data-i18n-aria-label="showsect-cmd" data-i18n="spells">Spells</label></h3>
					<div class="sheet-h3-section sheet-npc-spellcasting sheet-wide-readonly" role="region" aria-label="npc-spells-prepared">
						<h4 data-i18n="spellcasting-classes">Spellcasting Classes</h4>
						<div role="menubar" class="sheet-spellclassnav sheet-tabs" aria-label="spellcasting classes" data-i18n-aria-label="spellcasting-classes"></div>
						<input type="radio" class="sheet-tabinput sheet-tab0" name="attr_npc_spellclass_tab" value="0" data-i18n-title="spell-class-zero" data-i18n-aria-label="spell-class-zero" checked />
						<label role="menuitem" class="sheet-tab sheet-tab0" data-i18n-title="spell-class-zero" data-i18n-aria-label="spell-class-zero" title="Spell Class 0" data-i18n="spell-class-zero">Spell Class 0</label>
						<input type="radio" class="sheet-tabinput sheet-tab1" name="attr_npc_spellclass_tab" value="1" data-i18n-title="spell-class-one" data-i18n-aria-label="spell-class-one" />
						<label role="menuitem" class="sheet-tab sheet-tab1" data-i18n-title="spell-class-one" data-i18n-aria-label="spell-class-one" title="Spell Class 1" data-i18n="spell-class-one">Spell Class 1</label>
						<input type="radio" class="sheet-tabinput sheet-tab2" name="attr_npc_spellclass_tab" value="2" data-i18n-title="spell-class-two" data-i18n-aria-label="spell-class-two" />
						<label role="menuitem" class="sheet-tab sheet-tab2" data-i18n-title="spell-class-two" data-i18n-aria-label="spell-class-two" title="Spell Class 2" data-i18n="spell-class-two">Spell Class 2</label>
						<input type="radio" class="sheet-tabinput sheet-tab99" name="attr_npc_spellclass_tab" value="99" data-i18n-title="all" data-i18n-aria-label="all" />
						<label role="menuitem" class="sheet-tab sheet-tab99" data-i18n-title="all" data-i18n-aria-label="all" title="All" data-i18n="all">All</label>
						<div class="sheet-section0 sheet-section-spellclass-0 sheet-table">
							<span class="sheet-table-name" data-i18n="spell-class-zero">Spell Class 0</span>
							<div class="sheet-table-row">
								<span class="sheet-table-header"></span>
								<span class="sheet-table-header" data-i18n="total">Total</span>
								<span class="sheet-table-header"></span>
								<span class="sheet-table-header" data-i18n="caster-level-abbrv">CL</span>
								<span class="sheet-table-header"></span>
								<span class="sheet-table-header" data-i18n="miscellaneous-abbrv">Misc</span>
								<span class="sheet-table-header" data-i18n="concentration-check">Concentration Check</span>
								<span class="sheet-table-header" data-i18n="total">Total</span>
								<span class="sheet-table-header"></span>
								<span class="sheet-table-header" data-i18n="ability">Ability</span>
								<span class="sheet-table-header" data-i18n="modifier-abbrv">Mod</span>
								<span class="sheet-table-header"></span>
								<span class="sheet-table-header" data-i18n="miscellaneous-abbrv">Misc</span>
							</div>
							<div class="sheet-table-row">
								<span class="sheet-table-cell"><button style="font-size:100%;" title="%{selected|NPC-Spell-Class-0-CL-Check}" type="roll" name="roll_NPC-Spell-Class-0-CL-Check" value="@{NPC-whisper} &{template:pf_generic} @{toggle_accessible_flag} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_generic}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle}} {{name=^{caster-level-check}}} {{class=**@{spellclass-0-name} @{spellclass-0-level}**}} {{check=[[ 1d00 + @{spellclass-0-level} + @{spellclass-0-level-misc} ]]}}">&nbsp;<span data-i18n="caster-level-check-abbrv">CL Check</span></button></span>
								<span class="sheet-table-cell"><input title="@{spellclass-0-level-total}" type="number" name="attr_spellclass-0-level-total" value="0" class="sheet-calc" readonly /></span>
								<span class="sheet-divider">=</span>
								<span class="sheet-table-cell"><input title="@{spellclass-0-level}" type="number" name="attr_spellclass-0-level" value="0" /></span>
								<span class="sheet-divider">+</span>
								<span class="sheet-table-cell"><input title="@{spellclass-0-level-misc}" type="number" name="attr_spellclass-0-level-misc" value="0" /></span>
								<span class="sheet-table-cell"><button style="font-size:100%;" title="%{selected|NPC-Concentration-Check-0}" type="roll" name="roll_NPC-Concentration-Check-0" value="@{NPC-whisper} &{template:pf_generic} @{toggle_accessible_flag} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_generic}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle}} {{name=^{concentration-check}}} {{class=**@{spellclass-0-name} @{spellclass-0-level}**}} {{check=[[ 1d00 + @{Concentration-0} ]]}}">&nbsp;<span data-i18n="concentration-check-abbrv">Concentration</span></button></span>
								<span class="sheet-table-cell"><input title="@{Concentration-0}" type="number" name="attr_Concentration-0" value="0" class="sheet-calc" readonly /></span>
								<span class="sheet-divider">=</span>
								<span class="sheet-table-cell sheet-ability-column">
									<select class="sheet-select-small" title="@{Concentration-0-ability}" name="attr_Concentration-0-ability">
										<option value="0" data-i18n="select-one-default" selected>&#8226;Select One</option>
										<option value="@{STR-mod}" data-i18n="strength-abbrv">STR</option>
										<option value="@{DEX-mod}" data-i18n="dexterity-abbrv">DEX</option>
										<option value="@{CON-mod}" data-i18n="constitution-abbrv">CON</option>
										<option value="@{INT-mod}" data-i18n="intelligence-abbrv">INT</option>
										<option value="@{WIS-mod}" data-i18n="wisdom-abbrv">WIS</option>
										<option value="@{CHA-mod}" data-i18n="charisma-abbrv">CHA</option>
									</select>
								</span>
								<span class="sheet-table-cell"><input title="@{Concentration-0-mod}" type="number" name="attr_Concentration-0-mod" value="0" class="sheet-calc" readonly /></span>
								<span class="sheet-divider">+</span>
								<span class="sheet-table-cell"><input title="@{Concentration-0-misc}" type="number" name="attr_Concentration-0-misc" value="0" /></span>
							</div>
						</div>
						<div class="sheet-section1 sheet-section-spellclass-1 sheet-table">
							<span class="sheet-table-name" data-i18n="spell-class-one">Spell Class 1</span>
							<div class="sheet-table-row">
								<span class="sheet-table-header"></span>
								<span class="sheet-table-header" data-i18n="total">Total</span>
								<span class="sheet-table-header"></span>
								<span class="sheet-table-header" data-i18n="caster-level-abbrv">CL</span>
								<span class="sheet-table-header"></span>
								<span class="sheet-table-header" data-i18n="miscellaneous-abbrv">Misc</span>
								<span class="sheet-table-header" data-i18n="concentration-check">Concentration Check</span>
								<span class="sheet-table-header" data-i18n="total">Total</span>
								<span class="sheet-table-header"></span>
								<span class="sheet-table-header" data-i18n="ability">Ability</span>
								<span class="sheet-table-header" data-i18n="modifier-abbrv">Mod</span>
								<span class="sheet-table-header"></span>
								<span class="sheet-table-header" data-i18n="miscellaneous-abbrv">Misc</span>
							</div>
							<div class="sheet-table-row">
								<span class="sheet-table-cell"><button style="font-size:100%;" title="%{selected|NPC-Spell-Class-1-CL-Check}" type="roll" name="roll_NPC-Spell-Class-1-CL-Check" value="@{NPC-whisper} &{template:pf_generic} @{toggle_accessible_flag} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_generic}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle}} {{name=^{caster-level-check}}} {{class=**@{spellclass-1-name} @{spellclass-1-level}**}} {{check=[[ 1d20 + @{spellclass-1-level} + @{spellclass-1-level-misc} ]]}}">&nbsp;<span data-i18n="caster-level-check-abbrv">CL Check</span></button></span>
								<span class="sheet-table-cell"><input title="@{spellclass-1-level-total}" type="number" name="attr_spellclass-1-level-total" value="0" class="sheet-calc" readonly /></span>
								<span class="sheet-divider">=</span>
								<span class="sheet-table-cell"><input title="@{spellclass-1-level}" type="number" name="attr_spellclass-1-level" value="0" /></span>
								<span class="sheet-divider">+</span>
								<span class="sheet-table-cell"><input title="@{spellclass-1-level-misc}" type="number" name="attr_spellclass-1-level-misc" value="0" /></span>
								<span class="sheet-table-cell"><button style="font-size:100%;" title="%{selected|NPC-Concentration-Check-1}" type="roll" name="roll_NPC-Concentration-Check-1" value="@{NPC-whisper} &{template:pf_generic} @{toggle_accessible_flag} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_generic}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle}} {{name=^{concentration-check}}} {{class=**@{spellclass-1-name} @{spellclass-1-level}**}} {{check=[[ 1d20 + @{Concentration-1} ]]}}">&nbsp;<span data-i18n="concentration-check-abbrv">Concentration</span></button></span>
								<span class="sheet-table-cell"><input title="@{Concentration-1}" type="number" name="attr_Concentration-1" value="0" class="sheet-calc" readonly /></span>
								<span class="sheet-divider">=</span>
								<span class="sheet-table-cell sheet-ability-column">
									<select class="sheet-select-small" title="@{Concentration-1-ability}" name="attr_Concentration-1-ability">
										<option value="0" data-i18n="select-one-default" selected>&#8226;Select One</option>
										<option value="@{STR-mod}" data-i18n="strength-abbrv">STR</option>
										<option value="@{DEX-mod}" data-i18n="dexterity-abbrv">DEX</option>
										<option value="@{CON-mod}" data-i18n="constitution-abbrv">CON</option>
										<option value="@{INT-mod}" data-i18n="intelligence-abbrv">INT</option>
										<option value="@{WIS-mod}" data-i18n="wisdom-abbrv">WIS</option>
										<option value="@{CHA-mod}" data-i18n="charisma-abbrv">CHA</option>
									</select>
								</span>
								<span class="sheet-table-cell"><input title="@{Concentration-1-mod}" type="number" name="attr_Concentration-1-mod" value="0" class="sheet-calc" readonly /></span>
								<span class="sheet-divider">+</span>
								<span class="sheet-table-cell"><input title="@{Concentration-1-misc}" type="number" name="attr_Concentration-1-misc" value="0" /></span>
							</div>
						</div>
						<div class="sheet-section2 sheet-section-spellclass-2 sheet-table">
							<span class="sheet-table-name" data-i18n="spell-class-two">Spell Class 2</span>
							<div class="sheet-table-row">
								<span class="sheet-table-header"></span>
								<span class="sheet-table-header" data-i18n="total">Total</span>
								<span class="sheet-table-header"></span>
								<span class="sheet-table-header" data-i18n="caster-level-abbrv">CL</span>
								<span class="sheet-table-header"></span>
								<span class="sheet-table-header" data-i18n="miscellaneous-abbrv">Misc</span>
								<span class="sheet-table-header" data-i18n="concentration-check">Concentration Check</span>
								<span class="sheet-table-header" data-i18n="total">Total</span>
								<span class="sheet-table-header"></span>
								<span class="sheet-table-header" data-i18n="ability">Ability</span>
								<span class="sheet-table-header" data-i18n="modifier-abbrv">Mod</span>
								<span class="sheet-table-header"></span>
								<span class="sheet-table-header" data-i18n="miscellaneous-abbrv">Misc</span>
							</div>
							<div class="sheet-table-row">
								<span class="sheet-table-cell"><button style="font-size:100%;" title="%{selected|NPC-Spell-Class-2-CL-Check}" type="roll" name="roll_NPC-Spell-Class-2-CL-Check" value="@{NPC-whisper} &{template:pf_generic} @{toggle_accessible_flag} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_generic}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle}} {{name=^{caster-level-check}}} {{class=**@{spellclass-2-name} @{spellclass-2-level}**}} {{check=[[ 1d20 + @{spellclass-2-level} + @{spellclass-2-level-misc} ]]}}">&nbsp;<span data-i18n="caster-level-check-abbrv">CL Check</span></button></span>
								<span class="sheet-table-cell"><input title="@{spellclass-2-level-total}" type="number" name="attr_spellclass-2-level-total" value="0" class="sheet-calc" readonly /></span>
								<span class="sheet-divider">=</span>
								<span class="sheet-table-cell"><input title="@{spellclass-2-level}" type="number" name="attr_spellclass-2-level" value="0" /></span>
								<span class="sheet-divider">+</span>
								<span class="sheet-table-cell"><input title="@{spellclass-2-level-misc}" type="number" name="attr_spellclass-2-level-misc" value="0" /></span>
								<span class="sheet-table-cell"><button style="font-size:100%;" title="%{selected|NPC-Concentration-Check-2}" type="roll" name="roll_NPC-Concentration-Check-2" value="@{NPC-whisper} &{template:pf_generic} @{toggle_accessible_flag} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_generic}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle}} {{name=^{concentration-check}}} {{class=**@{spellclass-2-name} @{spellclass-2-level}**}} {{check=[[ 1d20 + @{Concentration-2} ]]}}">&nbsp;<span data-i18n="concentration-check-abbrv">Concentration</span></button></span>
								<span class="sheet-table-cell"><input title="@{Concentration-2}" type="number" name="attr_Concentration-2" value="0" class="sheet-calc" readonly /></span>
								<span class="sheet-divider">=</span>
								<span class="sheet-table-cell sheet-ability-column">
									<select class="sheet-select-small" title="@{Concentration-2-ability}" name="attr_Concentration-2-ability">
										<option value="0" data-i18n="select-one-default" selected>&#8226;Select One</option>
										<option value="@{STR-mod}" data-i18n="strength-abbrv">STR</option>
										<option value="@{DEX-mod}" data-i18n="dexterity-abbrv">DEX</option>
										<option value="@{CON-mod}" data-i18n="constitution-abbrv">CON</option>
										<option value="@{INT-mod}" data-i18n="intelligence-abbrv">INT</option>
										<option value="@{WIS-mod}" data-i18n="wisdom-abbrv">WIS</option>
										<option value="@{CHA-mod}" data-i18n="charisma-abbrv">CHA</option>
									</select>
								</span>
								<span class="sheet-table-cell"><input title="@{Concentration-2-mod}" type="number" name="attr_Concentration-2-mod" value="0" class="sheet-calc" readonly /></span>
								<span class="sheet-divider">+</span>
								<span class="sheet-table-cell"><input title="@{Concentration-2-misc}" type="number" name="attr_Concentration-2-misc" value="0" /></span>
							</div>
						</div>
						<div class="sheet-repeating-sect sheet-custbordernav">
							<input type="checkbox" class="sheet-minimize-show sheet-cssbutton" data-i18n-title="minimize-all-cmd" data-i18n-aria-label="minimize-all-cmd" title="Minimize all rows." name="attr_npcnewspells-min-show" value="1" /><span></span>
							<input type="checkbox" class="sheet-lock-show sheet-cssbutton" data-i18n-title="expand-cmd" data-i18n-aria-label="expand-cmd" title="Collapse or expand all rows." name="attr_npcnewspells-expand-show" value="1" /><span></span>
							<input type="checkbox" class="sheet-split-column-show sheet-cssbutton" data-i18n-title="column-cmd" data-i18n-aria-label="column-cmd" title="Split into two columns" name="attr_npcnewspells-column-show" value="1" /><span></span>
							<input class="sheet-deletebutton sheet-cssbutton sheet-deletesect-show" type="checkbox" name="attr_delete_repeating_spells_btn" value="1" data-i18n-title="delete-spells" data-i18n-aria-label="delete-spells-must-confirm-next-checkbox" /><span></span><label class="sheet-deletesect sheet-allrows-note"><input type="checkbox" class="sheet-selectedlabel-check" name="attr_delete_repeating_spells" data-i18n-aria-label="confirm-delete-spells" data-i18n-title="confirm-delete-spells" value="1" /><b data-i18n="delete-all-rows-are-you-sure">delete all rows are you sure</b></label>
							<span class="sheet-compendium-note sheet-hide-readonly" >
								<span class="sheet-compendium-icon">i</span>
								<span class="sheet-vertical-middle" data-i18n-title="compendium-drag-n-drop-desc" data-i18n-aria-label="compendium-drag-n-drop-desc" data-i18n="compendium-drag-drop-compatible"> Compendium drag-n-drop compatible </span>
								<span class="sheet-drag-icon">&#9111;</span>
							</span>					
							<input type="checkbox" class="sheet-mythic-show" name="attr_mythic-adventures-show" value="1" role="presentation" />
							<div class="sheet-npc-spells sheet-repeating-fields sheet-hiderepborder">
							<fieldset class="repeating_spells">
								<span class="sheet-error"><span class="sheet-pictos">!</span><span data-i18n="error-delete-row">Error! You must delete this row before editing any items in this section.</span></span>
								<input type="radio" name="attr_spell_level_r" value="-1" class="sheet-tabcopy custnavsection-new" checked role="presentation" />
								<input type="radio" name="attr_spell_level_r" value="0" class="sheet-tabcopy custnavsection-0" role="presentation" />
								<input type="radio" name="attr_spell_level_r" value="1" class="sheet-tabcopy custnavsection-1" role="presentation" />
								<input type="radio" name="attr_spell_level_r" value="2" class="sheet-tabcopy custnavsection-2" role="presentation" />
								<input type="radio" name="attr_spell_level_r" value="3" class="sheet-tabcopy custnavsection-3" role="presentation" />
								<input type="radio" name="attr_spell_level_r" value="4" class="sheet-tabcopy custnavsection-4" role="presentation" />
								<input type="radio" name="attr_spell_level_r" value="5" class="sheet-tabcopy custnavsection-5" role="presentation" />
								<input type="radio" name="attr_spell_level_r" value="6" class="sheet-tabcopy custnavsection-6" role="presentation" />
								<input type="radio" name="attr_spell_level_r" value="7" class="sheet-tabcopy custnavsection-7" role="presentation" />
								<input type="radio" name="attr_spell_level_r" value="8" class="sheet-tabcopy custnavsection-8" role="presentation" />
								<input type="radio" name="attr_spell_level_r" value="9" class="sheet-tabcopy custnavsection-9" role="presentation" />
								<input type="radio" name="attr_spell_class_r" value="-1" class="sheet-tabcopy sheet-section-spellclass-1" checked role="presentation" />
								<input type="radio" name="attr_spell_class_r" value="0" class="sheet-tabcopy sheet-section-spellclass0" role="presentation" />
								<input type="radio" name="attr_spell_class_r" value="1" class="sheet-tabcopy sheet-section-spellclass1" role="presentation" />
								<input type="radio" name="attr_spell_class_r" value="2" class="sheet-tabcopy sheet-section-spellclass2" role="presentation" />
								<input type="checkbox" name="attr_prepared_state" value="1" class="sheet-section-state" role="presentation" />
								<div class="sheet-custrepeating-border sheet-nontable-repeating sheet-background-color1 compendium-drop-target Spells">
									<input type="checkbox" class="sheet-counted sheet-sect-show" data-i18n-title="minimize-cmd" data-i18n-aria-label="minimize-cmd" title="Minimize Row" name="attr_row-show" value="1" checked /><span></span>
									<span style="display:none;" class="sheet-repeating-rollbutton"><button type="roll" name="attr_roll" title="%{selected|repeating_spells_$X_roll}" value="@{macro-text}"></button></span>
									<span class="sheet-repeating-rollbutton"><button type="roll" name="attr_npc-roll" title="%{selected|repeating_spells_$X_npc-roll}" value="@{npc-macro-text}"></button></span>
									<label class="sheet-small-label2 sheet-narrow-numbers">
										<input title="@{repeating_spells_$X_used}" type="number" name="attr_used" value="0">
										<span class="sheet-sect3" style="margin-left:-.5em;" data-i18n-title="number-prepared-title" data-i18n-aria-label="number-prepared-title" data-i18n="number-prepared"># Prepared</span>
										<span class="sheet-sect2" style="margin-left:-.5em;" title="number-used-title" data-i18n="number-used"># Used</span>
									</label>
									<label class="sheet-small-label2 sheet-entry-25p"><input title="@{repeating_spells_$X_name}" type="text" value="" name="attr_name" placeholder="Spell Name" data-i18n-placeholder="spell-name" accept="Name"><span data-i18n="name">Name</span></label>
									<label class="sheet-small-label2 sheet-sect" style="width:3em;">
										<select title="@{repeating_spells_$X_spellclass_number}" name="attr_spellclass_number" style="width:100%;">
											<option value="">Select One</option>
											<option value="0" data-i18n="1-ordinal-spellclass" >1st Spellcasting Class</option>
											<option value="1" data-i18n="2-ordinal-spellclass" >2nd Spellcasting Class</option>
											<option value="2" data-i18n="3-ordinal-spellclass" >3rd Spellcasting Class</option>
										</select>
										<span data-i18n="class">Class</span>
									</label>
									<label class="sheet-small-label2 sheet-entry-8p"><input title="@{repeating_spells_$X_spellclass}" type="text" value="" name="attr_spellclass" /><span data-i18n="class">Class</span></label>
									<label class="sheet-small-label2 sheet-narrow-numbers"><input title="@{repeating_spells_$X_spell_level}" type="number" value="" name="attr_spell_level" /><span data-i18n="level">Level</span></label>
									<input type="checkbox" name="attr_metamagic" value="1" class="sheet-nextitem-show" role="presentation" />
									<label class="sheet-small-label2 sheet-narrow-numbers sheet-slot"><input title="@{repeating_spells_$X_slot}" type="number" value="" name="attr_slot" /><span data-i18n="slot">Slot</span></label>
									<label class="sheet-small-label2 sheet-narrow-numbers"><input title="@{repeating_spells_$X_savedc}" type="number" value="0" name="attr_savedc" class="sheet-calc" readonly /><span data-i18n="difficulty-class-abbrv">DC</span></label>
									<label class="sheet-small-label2 sheet-entry-15p-shrink"><input title="@{repeating_spells_$X_school}" type="text" value="" name="attr_school" placeholder="Spell School [descriptor]" data-i18n-placeholder="spell-school-place" accept="School"><span data-i18n="school">School</span></label>
									<label class="sheet-small-label2 sheet-entry-small">
										<select title="@{repeating_spells_$X_sr}" name="attr_sr" accept="Spell Resistance" class="sheet-select-small">
											<option value="" data-i18n="not-applicable-abbrv-default" selected>&#8226;N/A</option>
											<option value="Yes" data-i18n="yes">Yes</option>
											<option value="No" data-i18n="no">No</option>
											<option value="Yes (Harmless)" data-i18n="save-yes-harmless">Yes (Harmless)</option>
											<option value="No (Harmless)" data-i18n="save-no-harmless">No (Harmless)</option>
										</select>
										<span data-i18n="spell-resistance-abbrv">SR</span>
									</label>
									<label class="sheet-small-label2 sheet-entry-10p-shrink"><input title="@{repeating_spells_$X_save}" type="text" value="" name="attr_save" placeholder="Save Effect" data-i18n-placeholder="save-effect" accept="Saving Throw"><span data-i18n="save">Save</span></label>
									<label class="sheet-small-label2 sheet-entry-short">
										<select class="sheet-select-small" title="@{repeating_spells_$X_range_pick}" name="attr_range_pick">
											<option value="blank" data-i18n="blank" selected>Blank</option>
											<option value="close" data-i18n="close">Close</option>
											<option value="medium" data-i18n="medium">Medium</option>
											<option value="long" data-i18n="long">Long</option>
											<option value="touch" data-i18n="touch">Touch</option>
											<option value="personal" data-i18n="personal">Personal</option>
											<option value="see_text" data-i18n="see_text">See text</option>
											<option value="number" data-i18n="number">Number</option>
											<option value="perlevel" data-i18n="perlevel">Per Level</option>
											<option value="unknownrange" data-i18n="unknownrange">Unknown Range</option>
										</select>
										<span data-i18n="range">Range</span>
									</label>
									<input type="checkbox" value="number" name="attr_range_pick" class="sheet-or-A-show sheet-noshow" />
									<input type="checkbox" value="perlevel" name="attr_range_pick" class="sheet-or-B-show sheet-noshow" />
									<label class="sheet-small-label2 sheet-entry-8p-shrink sheet-sect sheet-either-or-sect">
										<input type="text" value="" name="attr_range" title="@{repeating_spells_$X_range}" placeholder="Flat # or # /level" data-i18n-placeholder="range-custom-place" />
										<span class="sheet-nowrap" data-i18n-title="range-per-level-desc" data-i18n-aria-label="range-per-level-desc" data-i18n="range-custom">Custom Range</span>
									</label>
									<label class="sheet-small-label2 sheet-sect sheet-number">
										<input title="@{repeating_spells_$X_range_numeric}" type="number" value="0" name="attr_range_numeric" placeholder="0" class="sheet-calc" readonly>
										<span data-i18n="range-in-feet">Range</span>
									</label>
									<label class="sheet-small-label2 sheet-entry-15p-shrink sheet-sect"><input title="@{repeating_spells_$X_targets}" type="text" value="" name="attr_targets" placeholder="Targets/Area/Effect" data-i18n-placeholder="spell-targets-area-effect" /><span data-i18n="spell-targets-area-effect">Targets/Area/Effect</span></label>
									<label class="sheet-small-label2 sheet-entry-12p-shrink sheet-sect"><input title="@{repeating_spells_$X_duration}" type="text" value="" name="attr_duration" placeholder="Duration" data-i18n-placeholder="duration" accept="Duration" /><span data-i18n="duration">Duration</span></label>
									<label class="sheet-small-label2 sheet-entry-8p sheet-sect"><input title="@{repeating_spells_$X_cast-time}" type="text" value="" name="attr_cast-time" placeholder="Casting Time" data-i18n-placeholder="spell-casting-time-place" accept="Casting Time" /><span data-i18n="casting-time-abbrv">Cast Time</span></label>
									<label class="sheet-small-label2 sheet-entry-10p-shrink sheet-sect"><input title="@{repeating_spells_$X_components}" type="text" value="" name="attr_components" placeholder="Components" data-i18n-placeholder="spell-components" accept="Components"><span data-i18n="spell-components">Components</span></label>
									<div style="display:none;">
										<input type="text" value="" name="attr_range_from_compendium" accept="Range" />
										<input type="text" value="" name="attr_spell_lvlstr" accept="Level" />
										<input type="text" value="" name="attr_target_from_compendium" accept="Target" />
										<input type="text" value="" name="attr_area_from_compendium" accept="Area" />
										<input type="text" value="" name="attr_effect_from_compendium" accept="Effect" />
										<input type="text" value="" name="attr_compendium_category" accept="Category" />
									</div>
									<input type="hidden" name="attr_spell_options" value="" />
									<div class="sheet-sect sheet-expand">
										<input type="checkbox" class="sheet-showarrow sheet-misc-show" title="Click to expand" data-i18n-title="showsect-cmd" data-i18n-aria-label="showsect-cmd" aria-label="Show Miscellaneous" name="attr_misc-show" value="1" />
										<label class="sheet-showsect sheet-misc-showlabel" data-i18n="miscellaneous-abbrv">Misc</label>
										<input type="checkbox" class="sheet-showarrow sheet-desc-show" title="Click to expand" data-i18n-title="showsect-cmd" data-i18n-aria-label="showsect-cmd" aria-label="Show Description" name="attr_description-show" value="1" />
										<label class="sheet-showsect sheet-desc-showlabel" data-i18n="description">Description</label>
										<input type="checkbox" class="sheet-showarrow sheet-macro-text-show" title="Click to expand" data-i18n-title="showsect-cmd" data-i18n-aria-label="showsect-cmd" aria-label="Show Macro Text" name="attr_macro-text-show" value="1" />
										<label class="sheet-showsect sheet-macro-text-showlabel sheet-super sheet-note-d" data-i18n="macro-text">Macro Text</label>
										<input type="checkbox" class="sheet-showarrow sheet-weapon-attributes-show" title="Click to expand" data-i18n-title="showsect-cmd" data-i18n-aria-label="showsect-cmd" aria-label="Show attack and damage fields" name="attr_attack-show" value="1" />
										<label class="sheet-showsect sheet-weapon-attributes-showlabel" data-i18n="attack-and-damage">Attack and Damage</label>
										<input type="checkbox" class="sheet-showarrow sheet-id-show" title="Click to expand" data-i18n-title="showsect-cmd" data-i18n-aria-label="showsect-cmd" aria-label="Show Row ID" name="attr_ids-show" value="1" />
										<label class="sheet-showsect sheet-id-showlabel" data-i18n="identification-abbrv">ID</label>
										<hr class="sheet-subnav-hr">
										<div class="sheet-cheat"></div>
										<div class="sheet-nontable sheet-misc">
											<label class="sheet-small-label2 sheet-entry-small"><input title="@{repeating_spells_$X_metamagic}" type="checkbox" value="1" name="attr_metamagic" /><span data-i18n-title="metamagic-title" data-i18n-aria-label="metamagic-title" title="Click to show spell slot field to differentiate slot from spell level." data-i18n="metamagic">Meta Magic</span></label>
											<label class="sheet-small-label2 sheet-number"><input title="@{repeating_spells_$X_isDomain}" type="checkbox" value="1" name="attr_isDomain" /><span data-i18n="spell-domain-chk">Domain</span></label>
											<label class="sheet-small-label2 sheet-number sheet-section-mythic"><input title="@{repeating_spells_$X_isMythic}" type="checkbox" value="1" name="attr_isMythic" /><span data-i18n="spell-mythic-chk">Mythic</span></label>
											<span class="sheet-divider-db-lg">|</span>
											<label class="sheet-small-label2 sheet-number"><input title="@{repeating_spells_$X_CL_misc}" type="number" value="0" name="attr_CL_misc" placeholder="CL Mod" data-i18n-placeholder="caster-level-modifier-abbrv" /><span data-i18n="caster-level-modifier-abbrv">CL Mod</span></label>
											<label class="sheet-small-label2 sheet-number"><input title="@{repeating_spells_$X_casterlevel}" type="number" value="0" name="attr_casterlevel" class="sheet-calc" readonly /><span data-i18n="caster-level-abbrv">CL</span></label>
											<span class="sheet-divider-db-lg">|</span>
											<label class="sheet-small-label2 sheet-entry-vshort"><input title="@{repeating_spells_$X_DC_misc}" type="number" value="0" name="attr_DC_misc" placeholder="DC Mod" data-i18n-placeholder="difficulty-class-modifier-abbrv" /><span data-i18n="difficulty-class-modifier-abbrv">DC Mod</span></label>
											<span class="sheet-divider-db-lg">|</span>
											<label class="sheet-small-label2" style="width:7em;"><input title="@{repeating_spells_$X_SP_misc}" type="number" value="0" name="attr_SP_misc" style="left:20%;" placeholder="Spell Pen" data-i18n-placeholder="spell-penetration-modifier-abbrv" /><span data-i18n="spell-penetration-modifier-abbrv">Spell Pen Mod</span></label>
											<label class="sheet-small-label2 sheet-number"><input title="@{repeating_spells_$X_SP-mod}" type="number" value="0" name="attr_SP-mod" class="sheet-calc" readonly /><span data-i18n="spell-penetration-abbrv-short">SP</span></label>
											<span class="sheet-divider-db-lg">|</span>
											<label class="sheet-small-label2 sheet-entry-small"><input title="@{repeating_spells_$X_Concentration_misc}" type="number" value="0" name="attr_Concentration_misc" /><span data-i18n="concentration-miscellaneous-abbrv">Conc Misc</span></label>
											<label class="sheet-small-label2 sheet-number"><input title="@{repeating_spells_$X_Concentration-mod}" type="number" value="0" name="attr_Concentration-mod" class="sheet-calc" readonly /><span data-i18n="concentration-abbrv">Conc</span></label>
										</div>
										<div class="sheet-weapon-attributes sheet-non-table">
											<label class="sheet-small-label2" style="width:5em;">
												<input type="checkbox" name="attr_create-attack-entry" value="1" class="sheet-cssbutton sheet-createattackbutton" title="Create a new attack based on this weapon." data-i18n-title="create-attack-entry" data-i18n-aria-label="create-attack-entry"><span></span>
												<span data-i18n-title="create-attack-entry" data-i18n-aria-label="create-attack-entry" data-i18n="create-attack" >Create Attack</span>
											</label>
											<label class="sheet-small-label2 sheet-entry-short">
												<select class="sheet-select-small" title="@{repeating_spells_$X_spell-attack-type}" name="attr_spell-attack-type">
													<option value="0" data-i18n="none-default" selected>&#8226;None</option>
													<option value="@{attk-melee}" data-i18n="touch">Touch</option>
													<option value="@{attk-melee2}" data-i18n="touch-melee2">Touch (melee 2)</option>
													<option value="@{attk-ranged}" data-i18n="ranged-touch-ray">Ranged touch/Ray</option>
													<option value="@{CMB}" data-i18n="combat-maneuver-bonus-abbrv">CMB</option>
												</select>
												<span data-i18n="attack-type">Attack Type</span>
											</label>
											<label class="sheet-small-label2 sheet-entry-30p-shrink">
												<textarea class="sheet-inline-textarea" name="attr_damage-macro-text" title="@{repeating_spells_$X_damage-macro-text}" placeholder="Macro/Query" data-i18n-placeholder="full-macro-place" ></textarea>
												<span class="sheet-super sheet-note-b" data-i18n="damage">Damage</span>
											</label>
											<label class="sheet-small-label2 sheet-entry-15p-shrink">
												<input type="text" name="attr_damage-type" title="@{repeating_spells_$X_damage-type}" placeholder="Damage Type" data-i18n-placeholder="damage-type" />
												<span data-i18n="damage-type">Damage Type</span>
											</label>											
										</div>
										<textarea class="sheet-desc" title="@{repeating_spells_$X_description}" name="attr_description" accept="Content"></textarea>
										<textarea style="display:none;" class="sheet-macro-text" title="@{repeating_spells_$X_macro-text}" name="attr_macro-text">@{PC-whisper} &{template:pf_spell} @{toggle_spell_accessible} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_spell}}} {{name=@{name}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle}} {{deafened_note=@{SpellFailureNote}}} @{spell_options} </textarea>
										<textarea class="sheet-macro-text" title="@{repeating_spells_$X_npc-macro-text}" name="attr_npc-macro-text">@{NPC-whisper}  &{template:pf_spell} @{toggle_spell_accessible} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_spell}}} {{name=@{name}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle}} {{deafened_note=@{SpellFailureNote}}} @{spell_options}</textarea>
										<div class="sheet-repeating-id">
											<span data-i18n="row-identification-for-macros">Row ID for macros</span>: <span class="sheet-selectable" name="attr_row_id" />
										</div>
									</div>
								</div>
							</fieldset>
							</div>
						</div>
					</div>
				</div>
				<hr class="sheet-npc-hr sheet-npchead-top" />
				<input class="sheet-showarrow sheet-h2arrow" type="checkbox" name="attr_npc-tactics-show" data-i18n-aria-label="tactics" title="Click to expand" data-i18n-title="showsect-cmd" value="1" checked />
				<h2 class="sheet-clickheader sheet-showsect"><label title="Click to expand" data-i18n-title="showsect-cmd" data-i18n-aria-label="showsect-cmd" data-i18n="tactics">TACTICS</label></h2>
				<hr class="sheet-npc-hr sheet-npchead-bottom" />
				<div class="sheet-h2-section sheet-npc-tactics" style="text-align:left;">
					<h3 style="display:block;" data-i18n="before-combat">Before Combat</h3>
					<textarea class="sheet-inline-textarea" title="@{npc-before-combat}" name="attr_npc-before-combat" placeholder="List any spells and/or abilities used before combat. His stats should reflect these spells." data-i18n-placeholder="before-combat-place"></textarea>
					<h3 style="display:block;" data-i18n="during-combat">During Combat</h3>
					<textarea class="sheet-inline-textarea" title="@{npc-during-combat}" name="attr_npc-during-combat" placeholder="List all combat tactics here, including spell, feat, and magic item use." data-i18n-placeholder="during-combat-place"></textarea>
					<h3 style="display:block;" data-i18n="morale">Morale</h3>
					<textarea class="sheet-inline-textarea" title="@{npc-morale}" name="attr_npc-morale" placeholder="List here under what condition the creature flees combat, if any." data-i18n-placeholder="morale-place"></textarea>
					<h3 style="display:block;" data-i18n="base-statistics">Base Statistics</h3>
					<textarea class="sheet-inline-textarea" title="@{npc-base-statistics}" name="attr_npc-base-statistics" placeholder="If the creature has buffs and other effects active that modify his stats, the base stats should be quickly summarized here." data-i18n-placeholder="base-statistics-place"></textarea>
					<h3 style="display:block;" data-i18n="combat-gear">Combat Gear</h3>
					<textarea class="sheet-inline-textarea" title="@{npc-combat-gear}" name="attr_npc-combat-gear" placeholder="Gear used in combat" data-i18n-placeholder="gear-used-place"></textarea>						
					<h3 style="display:block;"  data-i18n="other-gear">Other Gear</h3>
					<textarea class="sheet-inline-textarea" title="@{npc-other-gear}" name="attr_npc-other-gear" placeholder="Gear not used in combat" data-i18n-placeholder="gear-not-used-place"></textarea>						
				</div>
				<hr class="sheet-npc-hr sheet-npchead-top" />
				<input class="sheet-showarrow sheet-h2arrow" type="checkbox" name="attr_npc-statistics-show" data-i18n-aria-label="statistics" title="Click to expand" data-i18n-title="showsect-cmd" value="1" checked />
				<h2 class="sheet-clickheader sheet-showsect"><label title="Click to expand" data-i18n-title="showsect-cmd" data-i18n-aria-label="showsect-cmd" data-i18n="statistics">STATISTICS</label></h2>
				<hr class="sheet-npc-hr sheet-npchead-bottom" />
				<div class="sheet-h2-section sheet-npc-statistics sheet-noborder-readonly sheet-wide-readonly" style="text-align:left;">
					<div class="sheet-h3-section sheet-wide-readonly">
						<div class="sheet-table">
							<div class="sheet-table-row">
								<span class="sheet-table-cell sheet-table-rollbuttoncell"><button style="font-size:100%;" title="%{selected|NPC-STR-Check}" type="roll" name="roll_NPC-STR-Check" value="@{NPC-whisper} &{template:pf_generic} @{toggle_accessible_flag} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_generic}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle}} {{name=^{strength}}} {{check=[[ 1d20 + [[ @{STR-mod} + @{checks-cond} ]] ]]}}">&nbsp;<span data-i18n="strength-abbrv">STR</span>&nbsp;<span name="attr_STR"></span></button></span>
								<span class="sheet-table-cell sheet-table-rollbuttoncell"><button style="font-size:100%;" title="%{selected|NPC-DEX-Check}" type="roll" name="roll_NPC-DEX-Check" value="@{NPC-whisper} &{template:pf_generic} @{toggle_accessible_flag} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_generic}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle}} {{name=^{dexterity}}} {{check=[[ 1d20 + [[ @{DEX-mod} + @{checks-cond} ]] ]]}}">&nbsp;<span data-i18n="dexterity-abbrv">DEX</span>&nbsp;<span name="attr_DEX"></span></button></span>
								<span class="sheet-table-cell sheet-table-rollbuttoncell"><button style="font-size:100%;" title="%{selected|NPC-CON-Check}" type="roll" name="roll_NPC-CON-Check" value="@{NPC-whisper} &{template:pf_generic} @{toggle_accessible_flag} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_generic}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle}} {{name=^{constitution}}} {{check=[[ 1d20 + [[ @{CON-mod} + @{checks-cond} ]] ]]}}">&nbsp;<span data-i18n="constitution-abbrv">CON</span>&nbsp;<span name="attr_CON"></span></button></span>
								<span class="sheet-table-cell sheet-table-rollbuttoncell"><button style="font-size:100%;" title="%{selected|NPC-INT-Check}" type="roll" name="roll_NPC-INT-Check" value="@{NPC-whisper} &{template:pf_generic} @{toggle_accessible_flag} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_generic}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle}} {{name=^{intelligence}}} {{check=[[ 1d20 + [[ @{INT-mod} + @{checks-cond} ]] ]]}}">&nbsp;<span data-i18n="intelligence-abbrv">INT</span>&nbsp;<span name="attr_INT"></span></button></span>
								<span class="sheet-table-cell sheet-table-rollbuttoncell"><button style="font-size:100%;" title="%{selected|NPC-WIS-Check}" type="roll" name="roll_NPC-WIS-Check" value="@{NPC-whisper} &{template:pf_generic} @{toggle_accessible_flag} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_generic}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle}} {{name=^{wisdom}}} {{check=[[ 1d20 + [[ @{WIS-mod} + @{checks-cond} ]] ]]}}">&nbsp;<span data-i18n="wisdom-abbrv">WIS</span>&nbsp;<span name="attr_WIS"></span></button></span>
								<span class="sheet-table-cell sheet-table-rollbuttoncell"><button style="font-size:100%;" title="%{selected|NPC-CHA-Check}" type="roll" name="roll_NPC-CHA-Check" value="@{NPC-whisper} &{template:pf_generic} @{toggle_accessible_flag} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_generic}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle}} {{name=^{charisma}}} {{check=[[ 1d20 + [[ @{CHA-mod} + @{checks-cond} ]] ]]}}">&nbsp;<span data-i18n="charisma-abbrv">CHA</span>&nbsp;<span name="attr_CHA"></span></button></span>
								<span class="sheet-table-cell sheet-divider"></span>
								<span class="sheet-table-cell sheet-small-label sheet-number"><input title="@{bab}" type="number" name="attr_bab" value="0" class="sheet-calc" readonly /><br><span data-i18n="base-attack-bonus-abbrv">BAB</span></span>
								<span class="sheet-table-cell sheet-divider"></span>
								<span class="sheet-table-cell sheet-table-rollbuttoncell"><button style="font-size:100%;" type="roll" title="%{selected|NPC-CMB-Check}" name="roll_NPC-CMB-Check" value="@{NPC-whisper} &{template:pf_generic} @{toggle_accessible_flag} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_generic}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle}} {{name=^{combat-maneuver-bonus-abbrv}}} {{check=[[ 1d20 + [[ @{CMB} ]] ]]}}">&nbsp;<span data-i18n="combat-maneuver-bonus-abbrv">CMB</span>&nbsp;<span name="attr_CMB"></span></button></span>
								<span class="sheet-table-cell sheet-small-label sheet-number"><input title="@{attk-CMB-misc}" type="number" name="attr_attk-CMB-misc" value="0" /><br><span data-i18n="miscellaneous-abbrv">Misc</span></span>
								<span class="sheet-table-cell sheet-divider"></span>
								<span class="sheet-table-cell sheet-small-label sheet-number"><input title="@{CMD}" type="number" name="attr_CMD" value="10" class="sheet-calc" readonly /><br><span data-i18n="combat-maneuver-defense-abbrv">CMD</span></span>
								<span class="sheet-table-cell sheet-small-label sheet-number"><input title="@{CMD-misc}" type="number" name="attr_CMD-misc" value="0" /><br><span data-i18n="miscellaneous-abbrv">Misc</span></span>
								<span class="sheet-table-cell sheet-small-label" style="width:15%;"><input title="@{cmd-notes}" type="text" name="attr_CMD-notes" placeholder="Put notes about context-sensitive CMD bonuses here." data-i18n-placeholder="combat-maneuver-defense-notes-place"><br><span data-i18n="combat-maneuver-defense-notes">CMD Notes</span></span>
							</div>
						</div>
						<label class="sheet-small-label2 sheet-autoexpand"><input type="text" title="@{languages}" value="" name="attr_languages" placeholder="Languages" data-i18n-placeholder="languages"/><span data-i18n="languages">Languages</span><span class="sheet-autoexpand" name="attr_languages"></span></label>
						<input class="sheet-sect-show-inverse sheet-noshow" type="checkbox" name="attr_is_v1" value="1" />			
						<div class="sheet-sect-inverse">
							<div class="sheet-small-label"><span class="sheet-left" data-i18n="special-attacks">Special Attacks</span><br><textarea class="sheet-inline-textarea" title="@{npc-special-attacks}" name="attr_npc-special-attacks" placeholder="List all special combat actions here. Do not list feats." data-i18n-placeholder="npc-special-attacks-place" ></textarea></div>
							<div class="sheet-small-label"><span class="sheet-left" data-i18n="spell-like-abilities">Spell-like Abilities</span><br><textarea class="sheet-inline-textarea" title="@{npc-spellike-ability-text}" name="attr_npc-spellike-ability-text" placeholder="Spell like abilities from compendium" data-i18n-placeholder="npc-spellike-abilities-text-place" ></textarea></div>
							<div class="sheet-small-label"><span class="sheet-left" data-i18n="melee">Melee</span><br><textarea class="sheet-inline-textarea" title="@{npc-melee-attacks-text}" name="attr_npc-melee-attacks-text" placeholder="Melee attacks from compendium" data-i18n-placeholder="npc-melee-attacks-text-place" ></textarea></div>
							<div class="sheet-small-label"><span class="sheet-left" data-i18n="ranged">ranged</span><br><textarea class="sheet-inline-textarea" title="@{npc-ranged-attacks-text}" name="attr_npc-ranged-attacks-text" placeholder="Ranged attacks from compendium" data-i18n-placeholder="npc-ranged-attacks-text-place" ></textarea></div>
							<div class="sheet-small-label"><span class="sheet-left" data-i18n="spells-known">Spells Known</span><br><textarea class="sheet-inline-textarea" title="@{npc-spells-known-text}" name="attr_npc-spells-known-text" placeholder="Spells known abilities from compendium" data-i18n-placeholder="npc-spells-known-text-place" ></textarea></div>
							<div class="sheet-small-label"><span class="sheet-left" data-i18n="feats">Feats</span><br><textarea class="sheet-inline-textarea" title="@{npc-feats-text}" name="attr_npc-feats-text" placeholder="Feats from compendium" data-i18n-placeholder="npc-feats-text" ></textarea></div>
							<div class="sheet-small-label"><span class="sheet-left" data-i18n="special-qualities-abbrv">SQ</span><br><textarea class="sheet-inline-textarea" title="@{SQ}" name="attr_SQ" placeholder="Add all special qualities here" data-i18n-placeholder="special-qualities-place" ></textarea></div>
						</div>
					</div>
					<div class="sheet-cheat"></div>
					<div class="sheet-hide-readonly">
						<input name="use_feats" type="checkbox" value="1" class="sheet-featlist-show sheet-sect-show-inverse" />
						<h3 class="sheet-sect-inverse sheet-inspecial" data-i18n="feats">Feats</h3>
						<span class="sheet-sect-inverse sheet-inspecial" data-i18n="in-special-abilities-section">In list under Special Abilities below</span>
						<input class="sheet-showarrow sheet-h3arrow sheet-section-featlist" type="checkbox" name="attr_npc-feats-show" data-i18n-aria-label="non-player-character-feats" title="Click to expand" data-i18n-title="showsect-cmd" value="1" checked />
						<h3 class="sheet-clickheader sheet-showsect sheet-section-featlist"><label title="Click to expand" data-i18n-title="showsect-cmd" data-i18n-aria-label="showsect-cmd" data-i18n="non-player-character-feats">NPC Feats</label></h3>
						<div class="sheet-h3-section sheet-repeating-sect sheet-section-featlist">
							<span class="sheet-nontable-name" data-i18n="feats">Feats</span>
							<input type="checkbox" class="sheet-minimize-show sheet-cssbutton" data-i18n-title="minimize-all-cmd" data-i18n-aria-label="minimize-all-cmd" title="Minimize all rows." name="attr_npcfeat-min-show" value="1" /><span></span>
							<input type="checkbox" class="sheet-lock-show sheet-cssbutton" data-i18n-title="expand-cmd" data-i18n-aria-label="expand-cmd" title="Collapse or expand all rows." name="attr_npcfeat-expand-show" value="1" /><span></span>
							<input type="checkbox" class="sheet-split-column-show sheet-cssbutton" data-i18n-title="column-cmd" data-i18n-aria-label="column-cmd" title="Split into two columns" name="attr_npcfeat-column-show" value="1" /><span></span>
							<input class="sheet-deletebutton sheet-cssbutton sheet-deletesect-show" type="checkbox" name="attr_delete_repeating_feat_btn" value="1" data-i18n-title="delete-feat" data-i18n-aria-label="delete-feat-must-confirm-next-checkbox" /><span></span><label class="sheet-deletesect sheet-allrows-note"><input type="checkbox" class="sheet-selectedlabel-check" name="attr_delete_repeating_feat" data-i18n-aria-label="confirm-delete-feat" data-i18n-title="confirm-delete-feat" value="1" /><b data-i18n="delete-all-rows-are-you-sure">delete all rows are you sure</b></label>
							<div class="sheet-repeating-fields sheet-table">
								<fieldset class="repeating_feat">
									<span class="sheet-error"><span class="sheet-pictos">!</span><span data-i18n="error-msg1">Error! You must delete this row before editing any items in this section.</span></span>

									<div class="sheet-table-repeating compendium-drop-target Feats">
											<input type="checkbox" class="sheet-counted sheet-sect-show" data-i18n-title="minimize-cmd" data-i18n-aria-label="minimize-cmd" title="Minimize Row" name="attr_row-show" value="1" checked /><span class="sheet-table-cell"></span>
											<span style="display:none;" class="sheet-table-cell sheet-repeating-rollbutton"><button type="roll" name="attr_roll" title="%{selected|repeating_feat_$X_roll}" value="@{macro-text}"></button></span>
											<span class="sheet-table-cell sheet-repeating-rollbutton"><button type="roll" name="attr_npc-roll" title="%{selected|repeating_feat_$X_npc-roll" value="@{npc-macro-text}"></button></span>
											<span class="sheet-table-cell sheet-small-label sheet-hide-readonly" style="width:2.5em;"><input type="checkbox" name="attr_showinmenu" title="@{repeating_feat_$X_showinmenu}" value="1"  /><span data-i18n="show-in-menu" data-i18n-title="show-in-menu-title" data-i18n-aria-label="show-in-menu-title">Show</span></span>
											<input type="hidden" value="" name="attr_ability_type" />
											<input type="hidden" value="feats" name="attr_rule_category" />
											<span class="sheet-table-cell sheet-small-label"><input title="@{repeating_feat_$X_name}" type="text" name="attr_name" placeholder="Feat Name" data-i18n-placeholder="feat-name" accept="Name"><br><span data-i18n="name">Name</span></span>
											<span class="sheet-table-cell sheet-small-label sheet-entry-30p-shrink" ><textarea class="sheet-inline-textarea" title="@{repeating_feat_$X_short-description}" name="attr_short-description" placeholder="Short Desc" data-i18n-placeholder="short-description"></textarea><br><span data-i18n="short-description-abbrv">Short Desc</span></span>
											<span class="sheet-table-cell sheet-small-label" style="width:.1%;"><input title="@{repeating_feat_$X_used}" type="number" name="attr_used" value="0" /><br><span data-i18n="used">Used</span></span>
											<span class="sheet-divider-lg" style="width:.1%;">/</span>
											<input type="checkbox" name="attr_used_max_error" class="sheet-error-mshow" value="1" />
											<span class="sheet-table-cell sheet-small-label sheet-highlight" style="width:.1%;"><input title="@{repeating_feat_$X_used|max}" type="text" name="attr_used_max" value="0" class="sheet-calc" readonly /><br><span data-i18n="maximum-abbrv">Max</span></span>
											<span class="sheet-table-cell sheet-small-label sheet-sect sheet-highlight sheet-hide-readonly" style="width:7%;"><textarea class="sheet-inline-textarea sheet-both" title="@{repeating_feat_$X_max-calculation}" name="attr_max-calculation" placeholder="#/Equation" data-i18n-placeholder="equation-macro-place" ></textarea><br><span data-i18n="calculation-abbrv">Calc</span></span>
											<div class="sheet-sect sheet-expand">
												<input type="checkbox" class="sheet-showarrow sheet-desc-show" title="Click to expand" data-i18n-title="showsect-cmd" data-i18n-aria-label="showsect-cmd" aria-label="Show Description" name="attr_description-show" value="1" />
												<label class="sheet-showsect sheet-desc-showlabel" data-i18n="description">Description</label>
												<input type="checkbox" class="sheet-showarrow sheet-macro-text-show" title="Click to expand" data-i18n-title="showsect-cmd" data-i18n-aria-label="showsect-cmd" aria-label="Show Macro Text" name="attr_macro-text-show" value="1" />
												<label class="sheet-showsect sheet-macro-text-showlabel" data-i18n="macro-text">Macro Text</label>
												<input type="checkbox" class="sheet-showarrow sheet-id-show" title="Click to expand" data-i18n-title="showsect-cmd" data-i18n-aria-label="showsect-cmd" aria-label="Show Row ID" name="attr_ids-show" value="1" />
												<label class="sheet-showsect sheet-id-showlabel" data-i18n="identification-abbrv">ID</label>
												<hr class="sheet-subnav-hr">
												<div class="sheet-cheat"></div>
												<textarea class="sheet-desc" title="@{repeating_feat_$X_description}" name="attr_description" accept="Content"></textarea>
												<textarea style="display:none;" class="sheet-macro-text" title="@{repeating_feat_$X_macro-text}" name="attr_macro-text">@{PC-whisper} &{template:pf_block} @{toggle_accessible_flag} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_block}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle}} {{name=@{name}}} {{description=@{short-description}}}</textarea>
												<textarea class="sheet-macro-text" title="@{repeating_feat_$X_npc-macro-text}" name="attr_npc-macro-text">@{NPC-whisper} &{template:pf_block} @{toggle_accessible_flag} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_block}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle}} {{name=@{name}}} {{description=@{short-description}}}</textarea>
												<div class="sheet-repeating-id">
													<span data-i18n="row-identification-for-macros">Row ID for macros</span>: <span class="sheet-selectable" name="attr_row_id" />
												</div>
											</div>
										</div>
								</fieldset>
							</div>
						</div>
					</div>
					<!-- Mythic Adventures display option toggled from Config -->
					<input type="checkbox" class="sheet-mythic-show" name="attr_mythic-adventures-show" value="1" role="presentation" />
					<div class="sheet-cheat"></div>
					<input class="sheet-showarrow sheet-h3arrow sheet-section-mythic" type="checkbox" name="attr_npc-mythic-feats-show" data-i18n-aria-label="mythic-feats" title="Click to expand" data-i18n-title="showsect-cmd" value="1" checked />
					<h3 class="sheet-clickheader sheet-showsect sheet-section-mythic"><label title="Click to expand" data-i18n-title="showsect-cmd" data-i18n-aria-label="showsect-cmd" data-i18n="mythic-feats">Mythic Feat</label></h3>
					<div class="sheet-h3-section sheet-repeating-sect sheet-section-mythic">
						<span class="sheet-nontable-name" data-i18n="mythic-feats">Mythic Feats</span>
						<input type="checkbox" class="sheet-minimize-show sheet-cssbutton" data-i18n-title="minimize-all-cmd" data-i18n-aria-label="minimize-all-cmd" title="Minimize all rows." name="attr_npcmythic-feats-min-show" value="1" /><span></span>
						<input type="checkbox" class="sheet-lock-show sheet-cssbutton" data-i18n-title="expand-cmd" data-i18n-aria-label="expand-cmd" title="Collapse or expand all rows." name="attr_npcmythic-feats-expand-show" value="1" /><span></span>
						<input type="checkbox" class="sheet-split-column-show sheet-cssbutton" data-i18n-title="column-cmd" data-i18n-aria-label="column-cmd" title="Split into two columns" name="attr_npcmythic-feats-column-show" value="1" /><span></span>
						<input class="sheet-deletebutton sheet-cssbutton sheet-deletesect-show" type="checkbox" name="attr_delete_repeating_mythic-feat_btn" value="1" data-i18n-title="delete-mythic-feat" data-i18n-aria-label="delete-mythic-feat-must-confirm-next-checkbox" /><span></span><label class="sheet-deletesect sheet-allrows-note"><input type="checkbox" class="sheet-selectedlabel-check" name="attr_delete_repeating_mythic-feat" data-i18n-aria-label="confirm-delete-mythic-feat" data-i18n-title="confirm-delete-mythic-feat" value="1" /><b data-i18n="delete-all-rows-are-you-sure">delete all rows are you sure</b></label>
						<div class="sheet-repeating-fields sheet-table">
							<fieldset class="repeating_mythic-feat">
								<span class="sheet-error"><span class="sheet-pictos">!</span><span data-i18n="error-msg1">Error! You must delete this row before editing any items in this section.</span></span>
								<div class="sheet-table-repeating">
									<input type="checkbox" class="sheet-counted sheet-sect-show" data-i18n-title="minimize-cmd" data-i18n-aria-label="minimize-cmd" title="Minimize Row" name="attr_row-show" value="1" checked /><span class="sheet-table-cell"></span>
									<span class="sheet-table-cell sheet-repeating-rollbutton"><button type="roll" name="attr_npc-roll" title="%{selected|repeating_mythic-feat_$X_npc-roll" value="@{npc-macro-text}"></button></span>
									<span class="sheet-table-cell sheet-small-label sheet-hide-readonly" style="width:2.5em;"><input type="checkbox" name="attr_showinmenu" title="@{repeating_mythic-feat_$X_showinmenu}" value="1"  /><span data-i18n="show-in-menu" data-i18n-title="show-in-menu-title" data-i18n-aria-label="show-in-menu-title">Show</span></span>
									<span class="sheet-table-cell sheet-small-label"><input title="@{repeating_mythic-feat_$X_name}" type="text" name="attr_name" placeholder="Mythic Feat Name" data-i18n-placeholder="mythic-feat-name"><br><span data-i18n="name">Name</span></span>
									<span class="sheet-table-cell sheet-small-label sheet-entry-30p-shrink"><textarea class="sheet-inline-textarea" title="@{repeating_mythic-feat_$X_short-description}" name="attr_short-description" placeholder="Short Description" data-i18n-placeholder="short-description"></textarea><br><span data-i18n="short-description-abbrv">Short Desc</span></span>
									<span class="sheet-table-cell sheet-small-label" style="width:.1%;"><input title="@{repeating_mythic-feat_$X_used}" type="number" name="attr_used" value="0" /><br><span data-i18n="uses">Uses</span></span>
									<span class="sheet-divider-lg" style="width:.1%;">/</span>
									<input type="checkbox" name="attr_used_max_error" class="sheet-error-mshow" value="1" />
									<span class="sheet-table-cell sheet-small-label sheet-highlight" style="width:.1%;"><input title="@{repeating_mythic-feat_$X_used|max}" type="number" name="attr_used_max" value="0" class="sheet-calc" readonly /><br><span data-i18n="maximum-abbrv">Max</span></span>
									<span class="sheet-table-cell sheet-small-label sheet-sect sheet-highlight sheet-hide-readonly" style="width:7%;"><textarea class="sheet-inline-textarea sheet-both" title="@{repeating_mythic-feat_$X_max-calculation}" name="attr_max-calculation" placeholder="#/Equation" data-i18n-placeholder="equation-macro-place" ></textarea><br><span data-i18n="maximum-calculation-abbrv">Max Calc</span></span>
									<div class="sheet-sect sheet-expand">
										<input type="checkbox" class="sheet-showarrow sheet-desc-show" title="Click to expand" data-i18n-title="showsect-cmd" data-i18n-aria-label="showsect-cmd" aria-label="Show Description" name="attr_description-show" value="1" />
										<label class="sheet-showsect sheet-desc-showlabel" data-i18n="description">Description</label>
										<input type="checkbox" class="sheet-showarrow sheet-macro-text-show" title="Click to expand" data-i18n-title="showsect-cmd" data-i18n-aria-label="showsect-cmd" aria-label="Show Macro Text" name="attr_macro-text-show" value="1" />
										<label class="sheet-showsect sheet-macro-text-showlabel" data-i18n="macro-text">Macro Text</label>
										<input type="checkbox" class="sheet-showarrow sheet-id-show" title="Click to expand" data-i18n-title="showsect-cmd" data-i18n-aria-label="showsect-cmd" aria-label="Show Row ID" name="attr_ids-show" value="1" />
										<label class="sheet-showsect sheet-id-showlabel" data-i18n="identification-abbrv">ID</label>
										<hr class="sheet-subnav-hr">
										<div class="sheet-cheat"></div>
										<textarea class="sheet-desc" title="@{repeating_mythic-feat_$X_description}" name="attr_description"></textarea>
										<textarea class="sheet-macro-text" title="@{repeating_mythic-feat_$X_npc-macro-text}" name="attr_npc-macro-text">@{PC-whisper} &{template:pf_block} @{toggle_accessible_flag} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_block}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}}  {{name=@{name}}} {{description=@{short-description}}}</textarea>
										<div class="sheet-repeating-id">
											<span data-i18n="row-identification-for-macros">Row ID for macros</span>: <span class="sheet-selectable" name="attr_row_id" />
										</div>
									</div>
								</div>
							</fieldset>
						</div>
					</div>
					<div class="sheet-cheat"></div>
					<input class="sheet-showarrow sheet-h3arrow" type="checkbox" name="attr_skill_options-show" data-i18n-aria-label="skill-options" title="Click to expand" data-i18n-title="showsect-cmd" value="1" checked />
					<h3 class="sheet-clickheader sheet-showsect"><label title="Click to expand" data-i18n-title="showsect-cmd" data-i18n-aria-label="showsect-cmd" data-i18n="skill-options">Skill Options</label></h3>
					<div class="sheet-h3-section sheet-table sheet-options sheet-named sheet-wide-readonly">
						<div class="sheet-table-name" data-i18n="skill-options">Skill Options</div>
						<div class="sheet-table sheet-config-table">
							<span class="sheet-table-cell sheet-left">
								<label>
									<input type="checkbox" class="sheet-boldlabel-check" name="attr_enforce_requires_training" value="1" />
									<b title="Only affects skillbook buttons" data-i18n="enforce-requires-training">Enforce Requires Training?</b>
								</label>
								<br>
								<label>
									<input type="hidden" name="attr_var_skill-notes" value="{{description=@{Skill-notes}}}" disabled >
									<input type="hidden" name="attr_skill_options" value="@{toggle_skill-notes}" disabled >
									<input type="checkbox" class="sheet-boldlabel-check" name="attr_toggle_skill-notes" value="@{var_skill-notes}" title="@{toggle_skill-notes}"  >
									<b title="Include Skill notes with roll?" data-i18n-title="include-skill-notes" data-i18n-aria-label="include-skill-notes" data-i18n="skill-notes">Skill notes?</b>
								</label>
								<br>
								<label>
									<input type="checkbox" class="sheet-boldlabel-check" name="attr_include_skill_totals" value="1" checked><b title="Only affects skillbook buttons" data-i18n="include-skill-totals">Include Skill Totals?</b>
								</label>
							</span>
							<span class="sheet-table-cell sheet-left">
								<label>
									<span data-i18n="enable-take-10-or-20-options" data-i18n-title="enable-skill-check-query-title" data-i18n-aria-label="enable-skill-check-query-title" title="Skill Checks will include an option to Roll, Take 10, or Take 20.">Enable Take 10 or 20 options?</span>
									<select name="attr_skill-query" title="@{skill-query}">
										<option value="1d20+@{skill-invest-query}" data-i18n="no" selected>No</option>
										<option value="?{Roll or Take 10/20?|1d20,1d20+@{skill-invest-query&#125;|10,10+@{skill-invest-query&#125;|20,20+@{skill-invest-query&#125;}" data-i18n="yes">Yes</option>
									</select>
								</label>
							</span>
							<span class="sheet-table-cell sheet-left">
								<label>
									<span data-i18n="add-skill-bonus-macro">Add Skill Bonus Macro?</span>
									<select name="attr_skill-invest-query" title="@{skill-invest-query}">
										<option value="0" data-i18n="no" selected>No</option>
										<option value="@{investigator_dice}" data-i18n="yes">Yes</option>
									</select>
								</label>
							</span>
							<span class="sheet-table-cell sheet-left">
								<label>
									<span data-i18n="skill-bonus-macro" data-i18n-title="additional-modifier-or-macro" data-i18n-aria-label="additional-modifier-or-macro" title="Additional modifier or macro (eg [[1d6]][investigator])">Skill Bonus Macro</span>
									<textarea title="@{investigator_dice}" class="sheet-inline-textarea sheet-both" type="text" name="attr_investigator_dice" data-i18n-placeholder="additional-modifier-or-macro">[[ 1d6 ]][skill bonus]</textarea>
								</label>
							</span>
						</div>
					</div>
					<div class="sheet-cheat"></div>
					<input class="sheet-showarrow sheet-h3arrow" type="checkbox" name="attr_skill-notes-show" data-i18n-aria-label="skill-notes" title="Click to expand" data-i18n-title="showsect-cmd" value="1" checked />
					<h3 class="sheet-clickheader sheet-showsect"><label title="Click to expand" data-i18n-title="showsect-cmd" data-i18n-aria-label="showsect-cmd" data-i18n="skill-notes">Skill Notes</label></h3>
					<div class="sheet-h3-section sheet-table sheet-wide-readonly">
						<textarea class="sheet-sect sheet-inline-textarea" title="@{Skill-notes}" name="attr_Skill-notes" style="height:50px;" placeholder="Put notes about context-sensitive Skill bonuses here." data-i18n-placeholder="skill-notes-place"></textarea>							
					</div>
					<div class="sheet-cheat"></div>
					<input class="sheet-showarrow sheet-h3arrow" type="checkbox" name="attr_npc-skills-show" data-i18n-aria-label="skills" title="Click to expand" data-i18n-title="showsect-cmd" value="1" checked />
					<h3 class="sheet-clickheader sheet-showsect"><label title="Click to expand" data-i18n-title="showsect-cmd" data-i18n-aria-label="showsect-cmd" data-i18n="skills">Skills</label></h3>
					<div class="sheet-h3-section sheet-wide-readonly">
						<input type="checkbox" class="sheet-unchained-show" name="attr_unchained_skills-show" value="1" role="presentation" />
						<input type="checkbox" class="sheet-consolidated-show" name="attr_BG-Skill-Use" value="0" role="presentation" />
						<input type="checkbox" class="sheet-bg-show" name="attr_BG-Skill-Use" value="1" checked role="presentation" />
						<div class="sheet-3colrow sheet-h3-section sheet-wide-readonly">
							<div class="sheet-col">
								<div class="sheet-table-row">
									<span class="sheet-table-header"></span>
									<span class="sheet-table-header" data-i18n="name">Name</span>
									<span class="sheet-table-header" data-i18n="total">Total</span>
									<span class="sheet-table-header" data-i18n="miscellaneous-abbrv">Misc</span>
									<span class="sheet-table-header"></span>
								</div>
								<div class="sheet-table-row">
									<span class="sheet-table-cell"><button style="font-size:100%;" title="%{selected|NPC-Acrobatics-Check}" type="roll" value="@{NPC-whisper} @{Acrobatics-macro}" name="roll_NPC-Acrobatics-Check"></button></span>
									<span class="sheet-table-cell sheet-left" data-i18n="acrobatics">Acrobatics</span>
									<span class="sheet-table-cell"><input title="@{Acrobatics}" type="number" name="attr_Acrobatics" value="0" class="sheet-calc" readonly /></span>
									<span class="sheet-table-cell"><input title="@{Acrobatics-misc}" type="number" name="attr_Acrobatics-misc" value="0" /></span>
								</div>
								<div class="sheet-table-row">
									<span class="sheet-table-cell"><button style="font-size:100%;" title="%{selected|NPC-Appraise-Check}" type="roll" value="@{NPC-whisper} @{Appraise-macro}" name="roll_NPC-Appraise-Check"></button></span>
									<span class="sheet-table-cell sheet-left" data-i18n="appraise">Appraise</span>
									<span class="sheet-table-cell"><input title="@{Appraise}" type="number" name="attr_Appraise" value="0" class="sheet-calc" readonly /></span>
									<span class="sheet-table-cell"><input title="@{Appraise-misc}" type="number" name="attr_Appraise-misc" value="0" /></span>
								</div>
								<div class="sheet-table-row">
									<span class="sheet-table-cell"><button style="font-size:100%;" title="%{selected|NPC-Bluff-Check}" type="roll" value="@{NPC-whisper} @{Bluff-macro}" name="roll_NPC-Bluff-Check"></button></span>
									<span class="sheet-table-cell sheet-left" data-i18n="bluff">Bluff</span>
									<span class="sheet-table-cell"><input title="@{Bluff}" type="number" name="attr_Bluff" value="0" class="sheet-calc" readonly /></span>
									<span class="sheet-table-cell"><input title="@{Bluff-misc}" type="number" name="attr_Bluff-misc" value="0" /></span>
								</div>
								<div class="sheet-table-row">
									<span class="sheet-table-cell"><button style="font-size:100%;" title="%{selected|NPC-Climb-Check}" type="roll" value="@{NPC-whisper} @{Climb-macro}" name="roll_NPC-Climb-Check"></button></span>
									<span class="sheet-table-cell sheet-left" data-i18n="climb">Climb</span>
									<span class="sheet-table-cell"><input title="@{Climb}" type="number" name="attr_Climb" value="0" class="sheet-calc" readonly /></span>
									<span class="sheet-table-cell"><input title="@{Climb-misc}" type="number" name="attr_Climb-misc" value="0" /></span>
								</div>
								<div class="sheet-table-row">
									<span class="sheet-table-cell"><button style="font-size:100%;" title="%{selected|NPC-Craft-Check}" type="roll" value="@{NPC-whisper} @{Craft-macro}" name="roll_NPC-Craft-Check"></button></span>
									<span class="sheet-table-cell sheet-left"><input title="@{Craft-name}" type="text" name="attr_Craft-name" placeholder="Craft" data-i18n-placeholder="craft" /></span>
									<span class="sheet-table-cell"><input title="@{Craft}" type="number" name="attr_Craft" value="0" class="sheet-calc" readonly /></span>
									<span class="sheet-table-cell"><input title="@{Craft-misc}" type="number" name="attr_Craft-misc" value="0" /></span>
								</div>
								<div class="sheet-table-row">
									<span class="sheet-table-cell"><button style="font-size:100%;" title="%{selected|NPC-Craft2-Check}" type="roll" value="@{NPC-whisper} @{Craft2-macro}" name="roll_NPC-Craft2-Check"></button></span>
									<span class="sheet-table-cell sheet-left"><input title="@{Craft2-name}" type="text" name="attr_Craft2-name" placeholder="Craft 2" data-i18n-placeholder="craft" /></span>
									<span class="sheet-table-cell"><input title="@{Craft2}" type="number" name="attr_Craft2" value="0" class="sheet-calc" readonly /></span>
									<span class="sheet-table-cell"><input title="@{Craft2-misc}" type="number" name="attr_Craft2-misc" value="0" /></span>
								</div>
								<div class="sheet-table-row">
									<span class="sheet-table-cell"><button style="font-size:100%;" title="%{selected|NPC-Craft3-Check}" type="roll" value="@{NPC-whisper} @{Craft3-macro}" name="roll_NPC-Craft3-Check"></button></span>
									<span class="sheet-table-cell sheet-left"><input title="@{Craft3-name}" type="text" name="attr_Craft3-name" placeholder="Craft 3" data-i18n-placeholder="craft" /></span>
									<span class="sheet-table-cell"><input title="@{Craft3}" type="number" name="attr_Craft3" value="0" class="sheet-calc" readonly /></span>
									<span class="sheet-table-cell"><input title="@{Craft3-misc}" type="number" name="attr_Craft3-misc" value="0" /></span>
								</div>
								<div class="sheet-table-row">
									<span class="sheet-table-cell"><button style="font-size:100%;" title="%{selected|NPC-Diplomacy-Check}" type="roll" value="@{NPC-whisper} @{Diplomacy-macro}" name="roll_NPC-Diplomacy-Check"></button></span>
									<span class="sheet-table-cell sheet-left" data-i18n="diplomacy">Diplomacy</span>
									<span class="sheet-table-cell"><input title="@{Diplomacy}" type="number" name="attr_Diplomacy" value="0" class="sheet-calc" readonly /></span>
									<span class="sheet-table-cell"><input title="@{Diplomacy-misc}" type="number" name="attr_Diplomacy-misc" value="0" /></span>
								</div>
								<div class="sheet-table-row">
									<span class="sheet-table-cell"><button style="font-size:100%;" title="%{selected|NPC-Disable-Device-Check}" type="roll" value="@{NPC-whisper} @{Disable-Device-macro}" name="roll_NPC-Disable-Device-Check"></button></span>
									<span class="sheet-table-cell sheet-left" data-i18n="disable-device">Disable Device</span>
									<span class="sheet-table-cell"><input title="@{Disable-Device}" type="number" name="attr_Disable-Device" value="0" class="sheet-calc" readonly /></span>
									<span class="sheet-table-cell"><input title="@{Disable-Device-misc}" type="number" name="attr_Disable-Device-misc" value="0" /></span>
								</div>
								<div class="sheet-table-row">
									<span class="sheet-table-cell"><button style="font-size:100%;" title="%{selected|NPC-Disguise-Check}" type="roll" value="@{NPC-whisper} @{Disguise-macro}" name="roll_NPC-Disguise-Check"></button></span>
									<span class="sheet-table-cell sheet-left" data-i18n="disguise">Disguise</span>
									<span class="sheet-table-cell"><input title="@{Disguise}" type="number" name="attr_Disguise" value="0" class="sheet-calc" readonly /></span>
									<span class="sheet-table-cell"><input title="@{Disguise-misc}" type="number" name="attr_Disguise-misc" value="0" /></span>
								</div>
								<div class="sheet-table-row">
									<span class="sheet-table-cell"><button style="font-size:100%;" title="%{selected|NPC-Escape-Artist-Check}" type="roll" value="@{NPC-whisper} @{Escape-Artist-macro}" name="roll_NPC-Escape-Artist-Check"></button></span>
									<span class="sheet-table-cell sheet-left" data-i18n="escape-artist">Escape Artist</span>
									<span class="sheet-table-cell"><input title="@{Escape-Artist}" type="number" name="attr_Escape-Artist" value="0" class="sheet-calc" readonly /></span>
									<span class="sheet-table-cell"><input title="@{Escape-Artist-misc}" type="number" name="attr_Escape-Artist-misc" value="0" /></span>
								</div>
								<div class="sheet-table-row">
									<span class="sheet-table-cell"><button style="font-size:100%;" title="%{selected|NPC-Fly-Check}" type="roll" value="@{NPC-whisper} @{Fly-macro}" name="roll_NPC-Fly-Check"></button></span>
									<span class="sheet-table-cell sheet-left" data-i18n="fly">Fly</span>
									<span class="sheet-table-cell"><input title="@{Fly}" type="number" name="attr_Fly" value="0" class="sheet-calc" readonly /></span>
									<span class="sheet-table-cell"><input title="@{Fly-misc}" type="number" name="attr_Fly-misc" value="0" /></span>
								</div>
								<div class="sheet-table-row">
									<span class="sheet-table-cell"><button style="font-size:100%;" title="%{selected|NPC-Handle-Animal-Check}" type="roll" value="@{NPC-whisper} @{Handle-Animal-macro}" name="roll_NPC-Handle-Animal-Check"></button></span>
									<span class="sheet-table-cell sheet-left" data-i18n="handle-animal">Handle Animal</span>
									<span class="sheet-table-cell"><input title="@{Handle-Animal}" type="number" name="attr_Handle-Animal" value="0" class="sheet-calc" readonly /></span>
									<span class="sheet-table-cell"><input title="@{Handle-Animal-misc}" type="number" name="attr_Handle-Animal-misc" value="0" /></span>
								</div>
								<div class="sheet-table-row">
									<span class="sheet-table-cell"><button style="font-size:100%;" title="%{selected|NPC-Heal-Check}" type="roll" value="@{NPC-whisper} @{Heal-macro}" name="roll_NPC-Heal-Check"></button></span>
									<span class="sheet-table-cell sheet-left" data-i18n="heal">Heal</span>
									<span class="sheet-table-cell"><input title="@{Heal}" type="number" name="attr_Heal" value="0" class="sheet-calc" readonly /></span>
									<span class="sheet-table-cell"><input title="@{Heal-misc}" type="number" name="attr_Heal-misc" value="0" /></span>
								</div>
								<div class="sheet-table-row">
									<span class="sheet-table-cell"><button style="font-size:100%;" title="%{selected|NPC-Intimidate-Check}" type="roll" value="@{NPC-whisper} @{Intimidate-macro}" name="roll_NPC-Intimidate-Check"></button></span>
									<span class="sheet-table-cell sheet-left" data-i18n="intimidate">Intimidate</span>
									<span class="sheet-table-cell"><input title="@{Intimidate}" type="number" name="attr_Intimidate" value="0" class="sheet-calc" readonly /></span>
									<span class="sheet-table-cell"><input title="@{Intimidate-misc}" type="number" name="attr_Intimidate-misc" value="0" /></span>
								</div>
							</div>
							<div class="sheet-col">
								<div class="sheet-table-row">
									<span class="sheet-table-header"></span>
									<span class="sheet-table-header" data-i18n="name">Name</span>
									<span class="sheet-table-header" data-i18n="total">Total</span>
									<span class="sheet-table-header" data-i18n="miscellaneous-abbrv">Misc</span>
									<span class="sheet-table-header"></span>
								</div>
								<div class="sheet-table-row">
									<span class="sheet-table-cell"><button style="font-size:100%;" title="%{selected|NPC-Knowledge-Arcana-Check}" type="roll" value="@{NPC-whisper} @{Knowledge-Arcana-macro}" name="roll_NPC-Knowledge-Arcana-Check"></button></span>
									<span class="sheet-table-cell sheet-left" data-i18n="knowledge-arcana">Knowledge (Arcana)</span>
									<span class="sheet-table-cell"><input title="@{Knowledge-Arcana}" type="number" name="attr_Knowledge-Arcana" value="0" class="sheet-calc" readonly /></span>
									<span class="sheet-table-cell"><input title="@{Knowledge-Arcana-misc}" type="number" name="attr_Knowledge-Arcana-misc" value="0" /></span>
								</div>
								<div class="sheet-table-row">
									<span class="sheet-table-cell"><button style="font-size:100%;" title="%{selected|NPC-Knowledge-Dungeoneering-Check}" type="roll" value="@{NPC-whisper} @{Knowledge-Dungeoneering-macro}" name="roll_NPC-Knowledge-Dungeoneering-Check"></button></span>
									<span class="sheet-table-cell sheet-left" data-i18n="knowledge-dungeoneering">Knowledge (Dungeoneering)</span>
									<span class="sheet-table-cell"><input title="@{Knowledge-Dungeoneering}" type="number" name="attr_Knowledge-Dungeoneering" value="0" class="sheet-calc" readonly /></span>
									<span class="sheet-table-cell"><input title="@{Knowledge-Dungeoneering-misc}" type="number" name="attr_Knowledge-Dungeoneering-misc" value="0" /></span>
								</div>
								<div class="sheet-table-row">
									<span class="sheet-table-cell"><button style="font-size:100%;" title="%{selected|NPC-Knowledge-Engineering-Check}" type="roll" value="@{NPC-whisper} @{Knowledge-Engineering-macro}" name="roll_NPC-Knowledge-Engineering-Check"></button></span>
									<span class="sheet-table-cell sheet-left" data-i18n="knowledge-engineering">Knowledge (Engineering)</span>
									<span class="sheet-table-cell"><input title="@{Knowledge-Engineering}" type="number" name="attr_Knowledge-Engineering" value="0" class="sheet-calc" readonly /></span>
									<span class="sheet-table-cell"><input title="@{Knowledge-Engineering-misc}" type="number" name="attr_Knowledge-Engineering-misc" value="0" /></span>
								</div>
								<div class="sheet-table-row">
									<span class="sheet-table-cell"><button style="font-size:100%;" title="%{selected|NPC-Knowledge-Geography-Check}" type="roll" value="@{NPC-whisper} @{Knowledge-Geography-macro}" name="roll_NPC-Knowledge-Geography-Check"></button></span>
									<span class="sheet-table-cell sheet-left" data-i18n="knowledge-geography">Knowledge (Geography)</span>
									<span class="sheet-table-cell"><input title="@{Knowledge-Geography}" type="number" name="attr_Knowledge-Geography" value="0" class="sheet-calc" readonly /></span>
									<span class="sheet-table-cell"><input title="@{Knowledge-Geography-misc}" type="number" name="attr_Knowledge-Geography-misc" value="0" /></span>
								</div>
								<div class="sheet-table-row">
									<span class="sheet-table-cell"><button style="font-size:100%;" title="%{selected|NPC-Knowledge-History-Check}" type="roll" value="@{NPC-whisper} @{Knowledge-History-macro}" name="roll_NPC-Knowledge-History-Check"></button></span>
									<span class="sheet-table-cell sheet-left" data-i18n="knowledge-history">Knowledge (History)</span>
									<span class="sheet-table-cell"><input title="@{Knowledge-History}" type="number" name="attr_Knowledge-History" value="0" class="sheet-calc" readonly /></span>
									<span class="sheet-table-cell"><input title="@{Knowledge-History-misc}" type="number" name="attr_Knowledge-History-misc" value="0" /></span>
								</div>
								<div class="sheet-table-row">
									<span class="sheet-table-cell"><button style="font-size:100%;" title="%{selected|NPC-Knowledge-Local-Check}" type="roll" value="@{NPC-whisper} @{Knowledge-Local-macro}" name="roll_NPC-Knowledge-Local-Check"></button></span>
									<span class="sheet-table-cell sheet-left" data-i18n="knowledge-local">Knowledge (Local)</span>
									<span class="sheet-table-cell"><input title="@{Knowledge-Local}" type="number" name="attr_Knowledge-Local" value="0" class="sheet-calc" readonly /></span>
									<span class="sheet-table-cell"><input title="@{Knowledge-Local-misc}" type="number" name="attr_Knowledge-Local-misc" value="0" /></span>
								</div>
								<div class="sheet-table-row">
									<span class="sheet-table-cell"><button style="font-size:100%;" title="%{selected|NPC-Knowledge-Nature-Check}" type="roll" value="@{NPC-whisper} @{Knowledge-Nature-macro}" name="roll_NPC-Knowledge-Nature-Check"></button></span>
									<span class="sheet-table-cell sheet-left" data-i18n="knowledge-nature">Knowledge (Nature)</span>
									<span class="sheet-table-cell"><input title="@{Knowledge-Nature}" type="number" name="attr_Knowledge-Nature" value="0" class="sheet-calc" readonly /></span>
									<span class="sheet-table-cell"><input title="@{Knowledge-Nature-misc}" type="number" name="attr_Knowledge-Nature-misc" value="0" /></span>
								</div>
								<div class="sheet-table-row">
									<span class="sheet-table-cell"><button style="font-size:100%;" title="%{selected|NPC-Knowledge-Nobility-Check}" type="roll" value="@{NPC-whisper} @{Knowledge-Nobility-macro}" name="roll_NPC-Knowledge-Nobility-Check"></button></span>
									<span class="sheet-table-cell sheet-left" data-i18n="knowledge-nobility">Knowledge (Nobility)</span>
									<span class="sheet-table-cell"><input title="@{Knowledge-Nobility}" type="number" name="attr_Knowledge-Nobility" value="0" class="sheet-calc" readonly /></span>
									<span class="sheet-table-cell"><input title="@{Knowledge-Nobility-misc}" type="number" name="attr_Knowledge-Nobility-misc" value="0" /></span>
								</div>
								<div class="sheet-table-row">
									<span class="sheet-table-cell"><button style="font-size:100%;" title="%{selected|NPC-Knowledge-Planes-Check}" type="roll" value="@{NPC-whisper} @{Knowledge-Planes-macro}" name="roll_NPC-Knowledge-Planes-Check"></button></span>
									<span class="sheet-table-cell sheet-left" data-i18n="knowledge-planes">Knowledge (Planes)</span>
									<span class="sheet-table-cell"><input title="@{Knowledge-Planes}" type="number" name="attr_Knowledge-Planes" value="0" class="sheet-calc" readonly /></span>
									<span class="sheet-table-cell"><input title="@{Knowledge-Planes-misc}" type="number" name="attr_Knowledge-Planes-misc" value="0" /></span>
								</div>
								<div class="sheet-table-row">
									<span class="sheet-table-cell"><button style="font-size:100%;" title="%{selected|NPC-Knowledge-Religion-Check}" type="roll" value="@{NPC-whisper} @{Knowledge-Religion-macro}" name="roll_NPC-Knowledge-Religion-Check"></button></span>
									<span class="sheet-table-cell sheet-left" data-i18n="knowledge-religion">Knowledge (Religion)</span>
									<span class="sheet-table-cell"><input title="@{Knowledge-Religion}" type="number" name="attr_Knowledge-Religion" value="0" class="sheet-calc" readonly /></span>
									<span class="sheet-table-cell"><input title="@{Knowledge-Religion-misc}" type="number" name="attr_Knowledge-Religion-misc" value="0" /></span>
								</div>
								<div class="sheet-table-row">
									<span class="sheet-table-cell"><button style="font-size:100%;" title="%{selected|NPC-Linguistics-Check}" type="roll" value="@{NPC-whisper} @{Linguistics-macro}" name="roll_NPC-Linguistics-Check"></button></span>
									<span class="sheet-table-cell sheet-left" data-i18n="linguistics">Linguistics</span>
									<span class="sheet-table-cell"><input title="@{Linguistics}" type="number" name="attr_Linguistics" value="0" class="sheet-calc" readonly /></span>
									<span class="sheet-table-cell"><input title="@{Linguistics-misc}" type="number" name="attr_Linguistics-misc" value="0" /></span>
								</div>
								<div class="sheet-table-row">
									<span class="sheet-table-cell"><button style="font-size:100%;" title="%{selected|NPC-Perception-Check}" type="roll" value="@{NPC-whisper} @{Perception-macro}" name="roll_NPC-Perception-Check"></button></span>
									<span class="sheet-table-cell sheet-left" data-i18n="perception">Perception</span>
									<span class="sheet-table-cell"><input title="@{Perception}" type="number" name="attr_Perception" value="0" class="sheet-calc" readonly /></span>
									<span class="sheet-table-cell"><input title="@{Perception-misc}" type="number" name="attr_Perception-misc" value="0" /></span>
								</div>
								<div class="sheet-table-row">
									<span class="sheet-table-cell"><button style="font-size:100%;" title="%{selected|NPC-Perform-Check}" type="roll" value="@{NPC-whisper} @{Perform-macro}" name="roll_NPC-Perform-Check"></button></span>
									<span class="sheet-table-cell sheet-left"><input title="@{Perform-name}" type="text" name="attr_Perform-name" placeholder="Perform" data-i18n-placeholder="perform" /></span>
									<span class="sheet-table-cell"><input title="@{Perform}" type="number" name="attr_Perform" value="0" class="sheet-calc" readonly /></span>
									<span class="sheet-table-cell"><input title="@{Perform-misc}" type="number" name="attr_Perform-misc" value="0" /></span>
								</div>
								<div class="sheet-table-row">
									<span class="sheet-table-cell"><button style="font-size:100%;" title="%{selected|NPC-Perform2-Check}" type="roll" value="@{NPC-whisper} @{Perform2-macro}" name="roll_NPC-Perform2-Check"></button></span>
									<span class="sheet-table-cell sheet-left"><input title="@{Perform2-name}" type="text" name="attr_Perform2-name" placeholder="Perform 2" data-i18n-placeholder="perform" /></span>
									<span class="sheet-table-cell"><input title="@{Perform2}" type="number" name="attr_Perform2" value="0" class="sheet-calc" readonly /></span>
									<span class="sheet-table-cell"><input title="@{Perform2-misc}" type="number" name="attr_Perform2-misc" value="0" /></span>
								</div>
								<div class="sheet-table-row">
									<span class="sheet-table-cell"><button style="font-size:100%;" title="%{selected|NPC-Perform3-Check}" type="roll" value="@{NPC-whisper} @{Perform3-macro}" name="roll_NPC-Perform3-Check"></button></span>
									<span class="sheet-table-cell sheet-left"><input title="@{Perform3-name}" type="text" name="attr_Perform3-name" placeholder="Perform 3" data-i18n-placeholder="perform" /></span>
									<span class="sheet-table-cell"><input title="@{Perform3}" type="number" name="attr_Perform3" value="0" class="sheet-calc" readonly /></span>
									<span class="sheet-table-cell"><input title="@{Perform3-misc}" type="number" name="attr_Perform3-misc" value="0" /></span>
								</div>
							</div>
							<div class="sheet-col">
								<div class="sheet-table-row">
									<span class="sheet-table-header"></span>
									<span class="sheet-table-header" data-i18n="name">Name</span>
									<span class="sheet-table-header" data-i18n="total">Total</span>
									<span class="sheet-table-header" data-i18n="miscellaneous-abbrv">Misc</span>
									<span class="sheet-table-header"></span>
								</div>
								<div class="sheet-table-row">
									<span class="sheet-table-cell"><button style="font-size:100%;" title="%{selected|NPC-Profession-Check}" type="roll" value="@{NPC-whisper} @{Profession-macro}" name="roll_NPC-Profession-Check"></button></span>
									<span class="sheet-table-cell sheet-left"><input title="@{Profession-name}" type="text" name="attr_Profession-name" placeholder="Profession" data-i18n-placeholder="profession" /></span>
									<span class="sheet-table-cell"><input title="@{Profession}" type="number" name="attr_Profession" value="0" class="sheet-calc" readonly /></span>
									<span class="sheet-table-cell"><input title="@{Profession-misc}" type="number" name="attr_Profession-misc" value="0" /></span>
								</div>
								<div class="sheet-table-row">
									<span class="sheet-table-cell"><button style="font-size:100%;" title="%{selected|NPC-Profession2-Check}" type="roll" value="@{NPC-whisper} @{Profession2-macro}" name="roll_NPC-Profession2-Check"></button></span>
									<span class="sheet-table-cell sheet-left"><input title="@{Profession2-name}" type="text" name="attr_Profession2-name" placeholder="Profession 2" data-i18n-placeholder="profession" /></span>
									<span class="sheet-table-cell"><input title="@{Profession2}" type="number" name="attr_Profession2" value="0" class="sheet-calc" readonly /></span>
									<span class="sheet-table-cell"><input title="@{Profession2-misc}" type="number" name="attr_Profession2-misc" value="0" /></span>
								</div>
								<div class="sheet-table-row">
									<span class="sheet-table-cell"><button style="font-size:100%;" title="%{selected|NPC-Profession3-Check}" type="roll" value="@{NPC-whisper} @{Profession3-macro}" name="roll_NPC-Profession3-Check"></button></span>
									<span class="sheet-table-cell sheet-left"><input title="@{Profession3-name}" type="text" name="attr_Profession3-name" placeholder="Profession 3" data-i18n-placeholder="profession" /></span>
									<span class="sheet-table-cell"><input title="@{Profession3}" type="number" name="attr_Profession3" value="0" class="sheet-calc" readonly /></span>
									<span class="sheet-table-cell"><input title="@{Profession3-misc}" type="number" name="attr_Profession3-misc" value="0" /></span>
								</div>
								<div class="sheet-table-row">
									<span class="sheet-table-cell"><button style="font-size:100%;" title="%{selected|NPC-Ride-Check}" type="roll" value="@{NPC-whisper} @{Ride-macro}" name="roll_NPC-Ride-Check"></button></span>
									<span class="sheet-table-cell sheet-left" data-i18n="ride">Ride</span>
									<span class="sheet-table-cell"><input title="@{Ride}" type="number" name="attr_Ride" value="0" class="sheet-calc" readonly /></span>
									<span class="sheet-table-cell"><input title="@{Ride-misc}" type="number" name="attr_Ride-misc" value="0" /></span>
								</div>
								<div class="sheet-table-row">
									<span class="sheet-table-cell"><button style="font-size:100%;" title="%{selected|NPC-Sense-Motive-Check}" type="roll" value="@{NPC-whisper} @{Sense-Motive-macro}" name="roll_NPC-Sense-Motive-Check"></button></span>
									<span class="sheet-table-cell sheet-left" data-i18n="sense-motive">Sense Motive</span>
									<span class="sheet-table-cell"><input title="@{Sense-Motive}" type="number" name="attr_Sense-Motive" value="0" class="sheet-calc" readonly /></span>
									<span class="sheet-table-cell"><input title="@{Sense-Motive-misc}" type="number" name="attr_Sense-Motive-misc" value="0" /></span>
								</div>
								<div class="sheet-table-row">
									<span class="sheet-table-cell"><button style="font-size:100%;" title="%{selected|NPC-Sleight-of-Hand-Check}" type="roll" value="@{NPC-whisper} @{Sleight-of-Hand-macro}" name="roll_NPC-Sleight-of-Hand-Check"></button></span>
									<span class="sheet-table-cell sheet-left" data-i18n="sleight-of-hand">Sleight of Hand</span>
									<span class="sheet-table-cell"><input title="@{Sleight-of-Hand}" type="number" name="attr_Sleight-of-Hand" value="0" class="sheet-calc" readonly /></span>
									<span class="sheet-table-cell"><input title="@{Sleight-of-Hand-misc}" type="number" name="attr_Sleight-of-Hand-misc" value="0" /></span>
								</div>
								<div class="sheet-table-row">
									<span class="sheet-table-cell"><button style="font-size:100%;" title="%{selected|NPC-Spellcraft-Check}" type="roll" value="@{NPC-whisper} @{Spellcraft-macro}" name="roll_NPC-Spellcraft-Check"></button></span>
									<span class="sheet-table-cell sheet-left" data-i18n="spellcraft">Spellcraft</span>
									<span class="sheet-table-cell"><input title="@{Spellcraft}" type="number" name="attr_Spellcraft" value="0" class="sheet-calc" readonly /></span>
									<span class="sheet-table-cell"><input title="@{Spellcraft-misc}" type="number" name="attr_Spellcraft-misc" value="0" /></span>
								</div>
								<div class="sheet-table-row">
									<span class="sheet-table-cell"><button style="font-size:100%;" title="%{selected|NPC-Stealth-Check}" type="roll" value="@{NPC-whisper} @{Stealth-macro}" name="roll_NPC-Stealth-Check"></button></span>
									<span class="sheet-table-cell sheet-left" data-i18n="stealth">Stealth</span>
									<span class="sheet-table-cell"><input title="@{Stealth}" type="number" name="attr_Stealth" value="0" class="sheet-calc" readonly /></span>
									<span class="sheet-table-cell"><input title="@{Stealth-misc}" type="number" name="attr_Stealth-misc" value="0" /></span>
								</div>
								<div class="sheet-table-row">
									<span class="sheet-table-cell"><button style="font-size:100%;" title="%{selected|NPC-Survival-Check}" type="roll" value="@{NPC-whisper} @{Survival-macro}" name="roll_NPC-Survival-Check"></button></span>
									<span class="sheet-table-cell sheet-left" data-i18n="survival">Survival</span>
									<span class="sheet-table-cell"><input title="@{Survival}" type="number" name="attr_Survival" value="0" class="sheet-calc" readonly /></span>
									<span class="sheet-table-cell"><input title="@{Survival-misc}" type="number" name="attr_Survival-misc" value="0" /></span>
								</div>
								<div class="sheet-table-row">
									<span class="sheet-table-cell"><button style="font-size:100%;" title="%{selected|NPC-Swim-Check}" type="roll" value="@{NPC-whisper} @{Swim-macro}" name="roll_NPC-Swim-Check"></button></span>
									<span class="sheet-table-cell sheet-left" data-i18n="swim">Swim</span>
									<span class="sheet-table-cell"><input title="@{Swim}" type="number" name="attr_Swim" value="0" class="sheet-calc" readonly /></span>
									<span class="sheet-table-cell"><input title="@{Swim-misc}" type="number" name="attr_Swim-misc" value="0" /></span>
								</div>
								<div class="sheet-table-row">
									<span class="sheet-table-cell"><button style="font-size:100%;" title="%{selected|NPC-Use-Magic-Device-Check}" type="roll" value="@{NPC-whisper} @{Use-Magic-Device-macro}" name="roll_NPC-Use-Magic-Device-Check"></button></span>
									<span class="sheet-table-cell sheet-left" data-i18n="use-magic-device">Use Magic Device</span>
									<span class="sheet-table-cell"><input title="@{Use-Magic-Device}" type="number" name="attr_Use-Magic-Device" value="0" class="sheet-calc" readonly /></span>
									<span class="sheet-table-cell"><input title="@{Use-Magic-Device-misc}" type="number" name="attr_Use-Magic-Device-misc" value="0" /></span>
								</div>
								<div class="sheet-table-row">
									<span class="sheet-table-cell"><button style="font-size:100%;" title="%{selected|NPC-Misc-Skill-0-Check}" type="roll" value="@{NPC-whisper} @{Misc-Skill-0-macro}" name="roll_NPC-Misc-Skill-0-Check"></button></span>
									<span class="sheet-table-cell sheet-left"><input type="text" title="@{Misc-Skill-0-name}" name="attr_Misc-Skill-0-name" placeholder="Misc Skill 0" data-i18n-placeholder="miscellaneous-skill-abbrv" /></span>
									<span class="sheet-table-cell"><input title="@{Misc-Skill-0}" type="number" name="attr_Misc-Skill-0" value="0" class="sheet-calc" readonly /></span>
									<span class="sheet-table-cell"><input title="@{Misc-Skill-0-misc}" type="number" name="attr_Misc-Skill-0-misc" value="0" /></span>
								</div>
								<div class="sheet-table-row">
									<span class="sheet-table-cell"><button style="font-size:100%;" title="%{selected|NPC-Misc-Skill-1-Check}" type="roll" value="@{NPC-whisper} @{Misc-Skill-1-macro}" name="roll_NPC-Misc-Skill-1-Check"></button></span>
									<span class="sheet-table-cell sheet-left"><input type="text" title="@{Misc-Skill-1-name}" name="attr_Misc-Skill-1-name" placeholder="Misc Skill 1" data-i18n-placeholder="miscellaneous-skill-abbrv" /></span>
									<span class="sheet-table-cell"><input title="@{Misc-Skill-1}" type="number" name="attr_Misc-Skill-1" value="0" class="sheet-calc" readonly /></span>
									<span class="sheet-table-cell"><input title="@{Misc-Skill-1-misc}" type="number" name="attr_Misc-Skill-1-misc" value="0" /></span>
								</div>
								<div class="sheet-table-row">
									<span class="sheet-table-cell"><button style="font-size:100%;" title="%{selected|NPC-Misc-Skill-2-Check}" type="roll" value="@{NPC-whisper} @{Misc-Skill-2-macro}" name="roll_NPC-Misc-Skill-2-Check"></button></span>
									<span class="sheet-table-cell sheet-left"><input type="text" title="@{Misc-Skill-2-name}" name="attr_Misc-Skill-2-name" placeholder="Misc Skill 2" data-i18n-placeholder="miscellaneous-skill-abbrv" /></span>
									<span class="sheet-table-cell"><input title="@{Misc-Skill-2}" type="number" name="attr_Misc-Skill-2" value="0" class="sheet-calc" readonly /></span>
									<span class="sheet-table-cell"><input title="@{Misc-Skill-2-misc}" type="number" name="attr_Misc-Skill-2-misc" value="0" /></span>
								</div>
								<div class="sheet-table-row">
									<span class="sheet-table-cell"><button style="font-size:100%;" title="%{selected|NPC-Misc-Skill-3-Check}" type="roll" value="@{NPC-whisper} @{Misc-Skill-3-macro}" name="roll_NPC-Misc-Skill-3-Check"></button></span>
									<span class="sheet-table-cell sheet-left"><input type="text" title="@{Misc-Skill-3-name}" name="attr_Misc-Skill-3-name" placeholder="Misc Skill 3" data-i18n-placeholder="miscellaneous-skill-abbrv" /></span>
									<span class="sheet-table-cell"><input title="@{Misc-Skill-3}" type="number" name="attr_Misc-Skill-3" value="0" class="sheet-calc" readonly /></span>
									<span class="sheet-table-cell"><input title="@{Misc-Skill-3-misc}" type="number" name="attr_Misc-Skill-3-misc" value="0" /></span>
								</div>
								<div class="sheet-table-row">
									<span class="sheet-table-cell"><button style="font-size:100%;" title="%{selected|NPC-Misc-Skill-4-Check}" type="roll" value="@{NPC-whisper} @{Misc-Skill-4-macro}" name="roll_NPC-Misc-Skill-4-Check"></button></span>
									<span class="sheet-table-cell sheet-left"><input type="text" title="@{Misc-Skill-4-name}" name="attr_Misc-Skill-4-name" placeholder="Misc Skill 4" data-i18n-placeholder="miscellaneous-skill-abbrv" /></span>
									<span class="sheet-table-cell"><input title="@{Misc-Skill-4}" type="number" name="attr_Misc-Skill-4" value="0" class="sheet-calc" readonly /></span>
									<span class="sheet-table-cell"><input title="@{Misc-Skill-4-misc}" type="number" name="attr_Misc-Skill-4-misc" value="0" /></span>
								</div>
								<div class="sheet-table-row">
									<span class="sheet-table-cell"><button style="font-size:100%;" title="%{selected|NPC-Misc-Skill-5-Check}" type="roll" value="@{NPC-whisper} @{Misc-Skill-5-macro}" name="roll_NPC-Misc-Skill-5-Check"></button></span>
									<span class="sheet-table-cell sheet-left"><input type="text" title="@{Misc-Skill-5-name}" name="attr_Misc-Skill-5-name" placeholder="Misc Skill 5" data-i18n-placeholder="miscellaneous-skill-abbrv" /></span>
									<span class="sheet-table-cell"><input title="@{Misc-Skill-5}" type="number" name="attr_Misc-Skill-5" value="0" class="sheet-calc" readonly /></span>
									<span class="sheet-table-cell"><input title="@{Misc-Skill-5-misc}" type="number" name="attr_Misc-Skill-5-misc" value="0" /></span>
								</div>
							</div>
						</div>
					</div>
				</div>
				<hr class="sheet-npc-hr sheet-npchead-top" />
				<input class="sheet-showarrow sheet-h2arrow" type="checkbox" name="attr_npc-ecology-show" data-i18n-aria-label="ecology" title="Click to expand" data-i18n-title="showsect-cmd" value="1" checked />
				<h2 class="sheet-clickheader sheet-showsect"><label title="Click to expand" data-i18n-title="showsect-cmd" data-i18n-aria-label="showsect-cmd" data-i18n="ecology">ECOLOGY</label></h2>
				<hr class="sheet-npc-hr sheet-npchead-bottom" />
				<div class="sheet-h2-section sheet-npc-ecology sheet-table" style="text-align:left;">
					<div class="sheet-table-row">
						<span class="sheet-table-cell sheet-small-label"><textarea class="sheet-inline-textarea" title="@{environment}" name="attr_environment" ></textarea><br><span data-i18n="environment">Environment</span></span>
						<span class="sheet-table-cell sheet-small-label"><textarea class="sheet-inline-textarea" title="@{organization}" name="attr_organization" ></textarea><br><span data-i18n="organization">Organization</span></span>
						<span class="sheet-table-cell sheet-small-label"><textarea class="sheet-inline-textarea" title="@{other_items_treasure}" name="attr_other_items_treasure" ></textarea><br><span data-i18n="treasure">Treasure</b></label></span>
					</div>
				</div>
				<input name="attr_use_racial_traits" type="checkbox" value="1" class="sheet-racial-traits-show" />
				<hr class="sheet-npc-hr sheet-npchead-top" />
				<input class="sheet-showarrow sheet-h2arrow" type="checkbox" name="attr_npc-special-abilities-show" data-i18n-aria-label="special-abilities" title="Click to expand" data-i18n-title="showsect-cmd" value="1" checked />
				<h2 class="sheet-clickheader sheet-showsect"><label title="Click to expand" data-i18n-title="showsect-cmd" data-i18n-aria-label="showsect-cmd" data-i18n="special-abilities" class="sheet-upper" >SPECIAL ABILITIES</label></h2>
				<hr class="sheet-npc-hr sheet-npchead-bottom" />
				<div class="sheet-h2-section sheet-abilities sheet-repeating-sect sheet-wide-readonly" role="region" aria-label="special-abilities">
<!-- NPC -->
					<div role="menubar" class="sheet-abilitiesnav sheet-tabs sheet-custbordernav" aria-label="Abilities" data-i18n-aria-label="abilities"></div>
					<input type="checkbox" class="sheet-mythic-show" name="attr_mythic-adventures-show" value="1" role="presentation" />
					<input type="radio" class="sheet-tabinput sheet-tab0 sheet-wider-tab" name="attr_npc-abilities_tab" value="0" data-i18n-title="original-class-features-list" data-i18n-aria-label="class-features" />
					<label role="menuitem" class="sheet-tab sheet-tab0 sheet-wider-tab" data-i18n="class-features">Features</label>
					<input type="radio" class="sheet-tabinput sheet-tab1 sheet-med-tab" name="attr_npc-abilities_tab" value="1" data-i18n-title="original-feats-list" data-i18n-aria-label="feats" />
					<label role="menuitem" class="sheet-tab sheet-tab1 sheet-med-tab" data-i18n="feats">Feats</label>
					<input type="radio" class="sheet-tabinput sheet-tab2 sheet-med-tab" name="attr_npc-abilities_tab" value="2" data-i18n-title="traits-and-racial-traits" data-i18n-aria-label="traits-and-racial-traits" />
					<label role="menuitem" class="sheet-tab sheet-tab2 sheet-med-tab" data-i18n="traits">Traits</label>
					<input type="radio" class="sheet-tabinput sheet-tab3 sheet-section-mythic sheet-wider-tab" name="attr_npc-abilities_tab" value="3" data-i18n-title="mythic-abilities" data-i18n-aria-label="mythic-abilities" />
					<label role="menuitem" class="sheet-tab sheet-tab3 sheet-section-mythic sheet-wider-tab" data-i18n="mythic-abilities">Mythic Abilities</label>
					<input type="radio" class="sheet-tabinput sheet-tab4" name="attr_npc-abilities_tab" value="4" data-i18n-title="special-attacks" data-i18n-aria-label="special-attacks" />
					<label role="menuitem" class="sheet-tab sheet-tab4" data-i18n="special-attacks-abbrv">Spec Atk</label>
					<input type="radio" class="sheet-tabinput sheet-tab5" name="attr_npc-abilities_tab" value="5" data-i18n-title="special-abilities" data-i18n-aria-label="special-abilities" />
					<label role="menuitem" class="sheet-tab sheet-tab5" data-i18n="special-abilities-abbrv">Spec Abil</label>
					<input type="radio" class="sheet-tabinput sheet-tab6" name="attr_npc-abilities_tab" value="6" data-i18n-title="spell-like-abilities" data-i18n-aria-label="spell-like-abilities" />
					<label role="menuitem" class="sheet-tab sheet-tab6" data-i18n="spell-like-abilities-abbrv">Spell-like</label>
					<input type="radio" class="sheet-tabinput sheet-tab7 sheet-narrow-tab" name="attr_npc-abilities_tab" value="7" data-i18n-title="special-qualities" data-i18n-aria-label="special-qualities" />
					<label role="menuitem" class="sheet-tab sheet-tab7 sheet-narrow-tab" data-i18n="special-qualities-abbrv">SQ</label>
					<input type="radio" class="sheet-tabinput sheet-tab8 sheet-med-tab" name="attr_npc-abilities_tab" value="8" data-i18n-title="all-other-desc" data-i18n-aria-label="all-other-desc"  />
					<label role="menuitem" class="sheet-tab sheet-tab8 sheet-med-tab" data-i18n="miscellaneous-abbrv">Misc</label>
					<input type="radio" class="sheet-tabinput sheet-tab99 sheet-narrow-tab" name="attr_npc-abilities_tab" value="99" data-i18n-title="all" data-i18n-aria-label="all" checked />
					<label role="menuitem" class="sheet-tab sheet-tab99 sheet-narrow-tab" data-i18n="all">All</label>
					<span class="sheet-divider-db-lg">&nbsp;</span>
					<input type="radio" class="sheet-tabinput sheet-tab9 sheet-narrow-tab" name="attr_npc-abilities_tab" value="9" data-i18n-title="extraordinary-abilities" data-i18n-aria-label="extraordinary-abilities" />
					<label role="menuitem" class="sheet-tab sheet-tab9 sheet-narrow-tab" data-i18n="extraordinary-abbrv">Ex</label>
					<input type="radio" class="sheet-tabinput sheet-tab10 sheet-narrow-tab" name="attr_npc-abilities_tab" value="10" data-i18n-title="spell-like-abilities" data-i18n-aria-label="spell-like-abilities" />
					<label role="menuitem" class="sheet-tab sheet-tab10 sheet-narrow-tab" data-i18n="spell-like-abbrv">Sp</label>
					<input type="radio" class="sheet-tabinput sheet-tab11 sheet-narrow-tab" name="attr_npc-abilities_tab" value="11" data-i18n-title="supernatural-abilities" data-i18n-aria-label="supernatural-abilities" />
					<label role="menuitem" class="sheet-tab sheet-tab11 sheet-narrow-tab" data-i18n="supernatural-abbrv">Su</label>
					<div class="sheet-cheat"></div>
					<span class="sheet-nontable-name sheet-selected-tabtitle" data-i18n="all-abilities">All Abilities</span>
					<div></div> <!--prevents the repeating buttons(expand/collapse, split-view) from changing position when sheet is in collapsed mode-->
					<input type="checkbox" class="sheet-minimize-show sheet-cssbutton" data-i18n-title="minimize-all-cmd" data-i18n-aria-label="minimize-all-cmd" title="Minimize all rows." name="attr_abilities-min-show" value="1" /><span></span>
					<input type="checkbox" class="sheet-lock-show sheet-cssbutton" data-i18n-title="expand-cmd" data-i18n-aria-label="expand-cmd" title="Collapse or expand all rows." name="attr_abilities-expand-show" value="1" /><span></span>
					<input type="checkbox" class="sheet-split-column-show sheet-cssbutton" data-i18n-title="column-cmd" data-i18n-aria-label="column-cmd" title="Split into two columns" name="attr_abilities-column-show" value="1" /><span></span>
					<input class="sheet-deletebutton sheet-cssbutton sheet-deletesect-show" type="checkbox" name="attr_delete_repeating_ability_btn" value="1" data-i18n-title="delete-ability" data-i18n-aria-label="delete-ability-must-confirm-next-checkbox" /><span></span><label class="sheet-deletesect sheet-allrows-note"><input type="checkbox" class="sheet-selectedlabel-check" name="attr_delete_repeating_ability" data-i18n-aria-label="confirm-delete-ability" data-i18n-title="confirm-delete-ability" value="1" /><b data-i18n="delete-all-rows-are-you-sure">delete all rows are you sure</b></label>
					<span class="sheet-compendium-note sheet-hide-readonly" >
						<span class="sheet-compendium-icon">i</span>
						<span class="sheet-vertical-middle" data-i18n-title="compendium-drag-n-drop-desc" data-i18n-aria-label="compendium-drag-n-drop-desc" data-i18n="compendium-drag-drop-compatible"> Compendium drag-n-drop compatible </span>
						<span class="sheet-drag-icon">&#9111;</span>
					</span>
					<div class="sheet-repeating-fields sheet-table sheet-hiderepborder sheet-section-ability-list">
						<fieldset class="repeating_ability">
							<span class="sheet-error"><span class="sheet-pictos">!</span><span data-i18n="error-msg1">Error! You must delete this row before editing any items in this section.</span></span>
							<input type="checkbox" name="attr_tabcat-1" value="1" class="sheet-tabcopy custnavsection-new" checked role="presentation" />
							<input type="checkbox" name="attr_tabcat0" value="1" class="sheet-tabcopy custnavsection-0" role="presentation" />
							<input type="checkbox" name="attr_tabcat1" value="1" class="sheet-tabcopy custnavsection-1" role="presentation" />
							<input type="checkbox" name="attr_tabcat2" value="1" class="sheet-tabcopy custnavsection-2" role="presentation" />
							<input type="checkbox" name="attr_tabcat3" value="1" class="sheet-tabcopy custnavsection-3" role="presentation" />
							<input type="checkbox" name="attr_tabcat4" value="1" class="sheet-tabcopy custnavsection-4" role="presentation" />
							<input type="checkbox" name="attr_tabcat5" value="1" class="sheet-tabcopy custnavsection-5" role="presentation" />
							<input type="checkbox" name="attr_tabcat6" value="1" class="sheet-tabcopy custnavsection-6" role="presentation" />
							<input type="checkbox" name="attr_tabcat7" value="1" class="sheet-tabcopy custnavsection-7" role="presentation" />
							<input type="checkbox" name="attr_tabcat8" value="1" class="sheet-tabcopy custnavsection-8" role="presentation" />
							<input type="checkbox" name="attr_tabcat9" value="1" class="sheet-tabcopy custnavsection-9" role="presentation" />
							<input type="checkbox" name="attr_tabcat10" value="1" class="sheet-tabcopy custnavsection-10" role="presentation" />
							<input type="checkbox" name="attr_tabcat11" value="1" class="sheet-tabcopy custnavsection-11" role="presentation" />
							<div class="sheet-custrepeating-border sheet-nontable-repeating compendium-drop-target">
								<input type="checkbox" class="sheet-counted sheet-sect-show" data-i18n-title="minimize-cmd" data-i18n-aria-label="minimize-cmd" title="Minimize Row" name="attr_row-show" value="1" checked /><span></span>
								<span style="display:none;" class="sheet-small-label2 sheet-repeating-rollbutton"><button type="roll" name="attr_npc-roll" title="%{selected|repeating_ability_$X_npc-roll}" value="@{NPC-Whisper} @{macro-text}"></button></span>
								<span class="sheet-small-label2 sheet-repeating-rollbutton"><button type="roll" name="attr_roll" title="%{selected|repeating_ability_$X_roll}" value="@{PC-Whisper} @{macro-text}"></button></span>
								<label class="sheet-small-label2 sheet-hide-readonly" style="width:2.5em;">
								<input type="checkbox" name="attr_showinmenu" title="@{repeating_ability_$X_showinmenu}" value="1" />
								<span data-i18n="show-in-menu" data-i18n-title="show-in-menu-title" data-i18n-aria-label="show-in-menu-title">Show</span></label>
								<label class="sheet-small-label2 sheet-entry-10p-shrink">
									<select class="sheet-select-small" title="@{repeating_ability_$X_rule_category}" name="attr_rule_category" data-i18n-aria-label="rule-category" >
										<option value="" data-i18n="select-one-default" selected>&#8226;Select One</option>
										<option value="class-features" data-i18n="class-features">Class Features</option>
										<!-- confusing since defensive abilities already a textbox<option value="defensive-abilities" data-i18n="defensive-abilities">Defensive Abilities</option>-->
										<option value="feats" data-i18n="feats">Feats</option>
										<option value="monster-rule" data-i18n="monster-rule">Monster Rule</option>
										<option value="special-abilities" data-i18n="special-abilities">Special Abilities</option>
										<option value="special-attacks" data-i18n="special-attacks">Special Attacks</option>
										<option value="special-qualities" data-i18n="special-qualities">Special Qualities</option>
										<option value="spell-like-abilities" data-i18n="spell-like-abilities" >Spell-like Abilities</option>
										<option value="racial-traits" data-i18n="racial-traits">Racial Traits</option>
										<option value="traits" data-i18n="traits">Traits</option>
										<option value="other" data-i18n="other">Other</option>
									</select>
									<span data-i18n-title="rule-category" data-i18n-aria-label="rule-category" data-i18n="rule">Rule</span>
								</label>
								<label class="sheet-small-label2 sheet-entry-10p-shrink sheet-sect">
									<select class="sheet-select-small sheet-select-class" title="@{repeating_ability_$X_CL-basis}" name="attr_CL-basis" >
										<option value="0" data-i18n="custom" >Custom</option>
										<option value="@{class-0-level}" data-i18n="1-ordinal-class">1st Class</option>
										<option value="@{class-1-level}" data-i18n="2-ordinal-class">2nd Class</option>
										<option value="@{class-2-level}" data-i18n="3-ordinal-class">3rd Class</option>
										<option value="@{class-3-level}" data-i18n="4-ordinal-class">4th Class</option>
										<option value="@{class-4-level}" data-i18n="5-ordinal-class">5th Class</option>
										<option value="@{class-5-level}" data-i18n="6-ordinal-class">6th Class</option>
										<option value="@{npc-hd-num}" data-i18n="race-hd-default" selected>Race only</option>
										<option value="@{level}" data-i18n="character-level" >Character Level</option>
									</select>
									<span data-i18n-title="caster-level-basis-explanation" data-i18n-aria-label="caster-level-basis-explanation" data-i18n="source" >Source</span>
								</label>
								<input type="checkbox" name="attr_CL-basis" value="0" class="sheet-sect2-show-inverse sheet-noshow" />
								<label class="sheet-small-label2 sheet-entry-10p-shrink sheet-sect2-inverse sheet-sect">
									<input type="text" value="" name="attr_class-name" title="@{repeating_ability_$X_class-name}" class="sheet-calc" readonly />
									<span class="sheet-nowrap" data-i18n="source-name">Source Name</span>
								</label>
								<label class="sheet-small-label2 sheet-entry-20p-shrink"><input title="@{repeating_ability_$X_name}" type="text" name="attr_name" placeholder="Name" data-i18n-placeholder="name" accept="Name" /><span data-i18n="name">Name</span></label>
								<label class="sheet-small-label2 sheet-exspsu-dropdown">
									<select title="@{repeating_ability_$X_ability_type}" name="attr_ability_type">
										<option value="" data-i18n="not-applicable-abbrv-default" selected>&#8226;N/A</option>
										<option value="Ex" data-i18n="extraordinary-abbrv">Ex</option>
										<option value="Sp" data-i18n="spell-like-abbrv" >Sp</option>
										<option value="Su" data-i18n="supernatural-abbrv">Su</option>
									</select>
									<span data-i18n-title="ability-type-title" data-i18n-aria-label="ability-type-title" data-i18n="type">Type</span>
								</label>
								<label class="sheet-small-label2 sheet-entry-20p-shrink" style="height:auto;"><textarea class="sheet-inline-textarea sheet-both" title="@{repeating_ability_$X_short-description}" name="attr_short-description" placeholder="Short Description" data-i18n-placeholder="short-description" ></textarea><span data-i18n="short-description-abbrv">Short Desc</span></label>
								<label class="sheet-small-label2" style="width:6em;">
									<select class="sheet-select-small" name="attr_frequency" style="width:100%;">
										<option value="not-applicable" data-i18n="not-applicable-abbrv-default" selected>&#8226; N/A</option>
										<option value="constant" data-i18n="constant">Constant</constant>
										<option value="atwill" data-i18n="at-will">At Will</option>
										<option value="perday" data-i18n="per-day-abbrv">/day</option>
										<option value="hexfreq" data-i18n="24-per-target-abbrv">/24/target</option>
										<option value="everyrounds" data-i18n="every-rounds-abbrv">Every n rnds</option>
										<option value="permonth" data-i18n="per-month-abbrv">/month</option>
										<option value="other" data-i18n="other">Other</option>
									</select>
									<span data-i18n-title="frequency-title" data-i18n-aria-label="frequency-title" data-i18n="frequency-abbrv">Freq</span>
								</label>
								<input type="checkbox" value="everyrounds" name="attr_frequency" class="sheet-nextitem-show sheet-or-C-show sheet-noshow" />
								<label class="sheet-small-label2 sheet-sect sheet-nextitem sheet-entry-10p-shrink"><textarea class="sheet-inline-textarea sheet-both" title="@{repeating_ability_$X_rounds_between}" name="attr_rounds_between" placeholder="Query/Macro" data-i18n-placeholder="full-macro-place" ></textarea><span data-i18n="rounds">Rounds</span></label>
								<input type="checkbox" value="not-applicable" name="attr_frequency" class="sheet-or-D-show sheet-noshow" />
								<input type="checkbox" value="constant" name="attr_frequency" class="sheet-or-A-show sheet-noshow" />
								<input type="checkbox" value="atwill" name="attr_frequency" class="sheet-or-B-show sheet-noshow" />
								<label class="sheet-small-label2 sheet-nor-sect" ><input class="sheet-narrow-numbers" title="@{repeating_ability_$X_used}" type="number" name="attr_used" value="0" /><span class="sheet-nowrap-over" data-i18n="number-prepared-abbrv"># Left</span></label>
								<label class="sheet-divider-db-lg sheet-nor-sect sheet-sect-inverse">/</label>
								<input type="checkbox" name="attr_used_max_error" class="sheet-error-mshow" value="1" />
								<label class="sheet-small-label2 sheet-highlight sheet-nor-sect sheet-sect-inverse" ><input class="sheet-narrow-numbers sheet-calc" title="@{repeating_ability_$X_used|max}" type="number" name="attr_used_max" value="0" readonly /><span class="sheet-nowrap-over" data-i18n="maximum-abbrv">Max</span></label>
								<label class="sheet-small-label2 sheet-sect sheet-highlight sheet-hide-readonly sheet-nor-sect sheet-sect-inverse sheet-entry-10p-shrink"><textarea class="sheet-inline-textarea sheet-both" title="@{repeating_ability_$X_max-calculation}" name="attr_max-calculation" placeholder="#/Equation" data-i18n-placeholder="equation-macro-place" ></textarea><span class="sheet-super sheet-note-a" data-i18n="maximum-calculation-abbrv">Max Calc</span></label>
								<div style="display:none;">
									<input type="text" name="attr_compendium_category" accept="Category" value="" />
									<input type="text" name="attr_ability_type_compendium" accept="Ability Type" value="" />
									<!--spells -->
									<input type="text" name="attr_range_from_compendium" accept="Range" value="" />
									<input type="text" name="attr_target_from_compendium" accept="Target" value="" />
									<input type="text" name="attr_area_from_compendium" accept="Area" value="" />
									<input type="text" name="attr_effect_from_compendium" accept="Effect" value="" />
								</div>
								<div class="sheet-sect sheet-expand"> 
									<input type="checkbox" class="sheet-showarrow sheet-desc-show" title="Click to expand" data-i18n-title="showsect-cmd" data-i18n-aria-label="showsect-cmd" aria-label="Show Description" name="attr_description-show" value="1" />
									<label class="sheet-showsect sheet-desc-showlabel" data-i18n="description">Description</label>
									<input type="checkbox" class="sheet-showarrow sheet-misc-show" title="Click to expand" data-i18n-title="showsect-cmd" data-i18n-aria-label="showsect-cmd" aria-label="Show Miscellaneous" name="attr_misc-show" value="1" />
									<label class="sheet-showsect sheet-misc-showlabel" data-i18n="level-basis">Level basis</label>
									<input type="checkbox" class="sheet-showarrow sheet-range-show" title="Click to expand" data-i18n-title="showsect-cmd" data-i18n-aria-label="showsect-cmd" aria-label="Show Miscellaneous" name="attr_range-show" value="1" />
									<label class="sheet-showsect sheet-range-showlabel" data-i18n="range">Range</label>
									<input type="checkbox" class="sheet-showarrow sheet-weapon-attributes-show" title="Click to expand" data-i18n-title="showsect-cmd" data-i18n-aria-label="showsect-cmd" aria-label="Show attack and damage fields" name="attr_attack-show" value="1" />
									<label class="sheet-showsect sheet-weapon-attributes-showlabel" data-i18n="attack-and-damage">Attack and Damage</label>
									<input type="checkbox" class="sheet-showarrow sheet-macro-text-show" title="Click to expand" data-i18n-title="showsect-cmd" data-i18n-aria-label="showsect-cmd" aria-label="Show Macro Text" name="attr_macro-text-show" value="1" />
									<label class="sheet-showsect sheet-macro-text-showlabel sheet-super sheet-note-d" data-i18n="macro-text">Macro Text</label>
									<input type="checkbox" class="sheet-showarrow sheet-id-show" title="Click to expand" data-i18n-title="showsect-cmd" data-i18n-aria-label="showsect-cmd" aria-label="Show Row ID" name="attr_ids-show" value="1" />
									<label class="sheet-showsect sheet-id-showlabel" data-i18n="identification-abbrv">ID</label>
									<hr class="sheet-subnav-hr">
									<div class="sheet-cheat"></div>
									<div class="sheet-misc">										
										<input type="checkbox" value="1" name="attr_showextrafields" class="sheet-extra-show sheet-noshow"/>
										<input type="checkbox" value="Sp" name="attr_ability_type" class="sheet-sp-show sheet-noshow" />
										<label class="sheet-small-label2">
											<input type="checkbox" value="1" name="attr_showextrafields" />
											<span data-i18n-title="display-advanced-options-title" data-i18n="custom">Custom</span>
										</label>											
										<label class="sheet-small-label2 sheet-section-extra">
											<input class="sheet-number sheet-calc" type="number" name="attr_CL-basis-mod" title="@{CL-basis}" value="0" readonly />
											<span data-i18n-title="caster-level-basis-explanation" data-i18n-aria-label="caster-level-basis-explanation" data-i18n="caster-level-basis-abbreviation" >CL basis</span>
										</label>
										<label class="sheet-divider-db-lg sheet-nowrap sheet-section-extra">+(</label>											
										<label class="sheet-small-label2 sheet-linked-tablecell sheet-section-extra sheet-nowrap sheet-entry-15p-shrink">
											<input type="checkbox" value="1" name="attr_CL-misc-mod_error" class="sheet-error-mshow" />
											<textarea class="sheet-inline-textarea sheet-linked-cellfield sheet-highlight" title="@{repeating_ability_$X_CL-misc}" name="attr_CL-misc" data-i18n-placeholder="equation-macro-place" style="display:inline-block;"></textarea>
											<input type="number" value="0" name="attr_CL-misc-mod" title="@{repeating_ability_$X_CL-misc-mod}" class="sheet-narrow-numbers sheet-calc sheet-linked-cellfield sheet-highlight" style="display:inline-block;" readonly />
											<br>
											<span class="sheet-super sheet-note-a" data-i18n-title="buff-spell-caster-level-title" data-i18n-aria-label="buff-spell-caster-level-title" data-i18n="miscellaneous-abbrv" style="display:inline-block;">Misc</span>
										</label>						
										<label class="sheet-divider-db-lg sheet-nowrap sheet-section-extra" style="margin-left:-.5em;">)=</label>
										<label class="sheet-small-label2 sheet-number">
											<input type="number" value="0" title="@{repeating_ability_$X_casterlevel}" name="attr_casterlevel" class="sheet-calc" />
											<span title="@{CL-basis} + @{CL-misc-mod} + @{buff_CasterLevel-total} + @{CasterLevel-Penalty}" data-i18n-title="effective-caster-level" data-i18n-aria-label="effective-caster-level" data-i18n="caster-level-abbrv" >CL</span>
										</label>
										<label class="sheet-divider-db-lg sheet-section-extra">|</label>
										<label class="sheet-small-label2">
											<select class="sheet-select-small" title="@{repeating_ability_$X_ability-basis}" name="attr_ability-basis">
												<option value="0" data-i18n="none-default" selected>None</option>
												<option value="@{STR-mod}" data-i18n="strength-abbrv">STR</option>
												<option value="@{DEX-mod}" data-i18n="dexterity-abbrv">DEX</option>
												<option value="@{CON-mod}" data-i18n="constitution-abbrv">CON</option>
												<option value="@{INT-mod}" data-i18n="intelligence-abbrv">INT</option>
												<option value="@{WIS-mod}" data-i18n="wisdom-abbrv">WIS</option>
												<option value="@{CHA-mod}" data-i18n="charisma-abbrv" >CHA</option>
											</select>
											<span data-i18n-title="ability-basis-desc" data-i18n-aria-label="ability-basis-desc" data-i18n="ability" >Ability</span>
										</label>
										<label class="sheet-divider-db-lg sheet-section-extra">|</label>
										<label class="sheet-small-label2">
											<select style="width:100%;" class="sheet-select-small sheet-select-spelllvl" title="@{repeating_ability_$X_spell_level-basis}" name="attr_spell_level-basis" >
												<option value="floor(@{casterlevel}/2)" data-i18n="half-caster-level-abbrv-selected" selected>&#8226;&#189; Lvl/HD</option>
												<option value="@{casterlevel}" data-i18n="full-caster-level-abbrv" >Lvl/HD</option>
												<option value="0" data-i18n="custom-level-abbrv">Custom Lvl</option>
											</select>
											<span data-i18n-title="difficulty-class-effect-basis-desc" data-i18n-aria-label="difficulty-class-effect-basis-desc" data-i18n="difficulty-class-effect-basis" >DC/Effect Basis</span>
										</label>
										<label class="sheet-divider-db-lg sheet-nowrap sheet-section-extra">+(</label>
										<label class="sheet-small-label2 sheet-linked-tablecell sheet-section-extra sheet-nowrap sheet-entry-15p-shrink">
											<input type="checkbox" value="1" name="attr_spell_level-misc-mod_error" class="sheet-error-mshow" />
											<textarea class="sheet-inline-textarea sheet-linked-cellfield sheet-highlight" title="@{repeating_ability_$X_spell_level-misc}" name="attr_spell_level-misc" data-i18n-placeholder="equation-macro-place" style="display:inline-block;"></textarea>
											<input type="number" value="0" name="attr_spell_level-misc-mod" title="@{repeating_ability_$X_spell_level-misc-mod}" class="sheet-narrow-numbers sheet-calc sheet-linked-cellfield sheet-highlight" style="display:inline-block;" readonly />
											<br>
											<span class="sheet-super sheet-note-a" data-i18n-aria-label="spell-level-miscellaneous-desc" data-i18n-title="spell-level-miscellaneous-desc" data-i18n="miscellaneous-abbrv" style="display:inline-block;">Misc</span>
										</label>
										<label class="sheet-divider-db-lg sheet-nowrap sheet-section-extra" style="margin-left:-.5em;">)=</label>
										<label class="sheet-small-label2 sheet-section-extra sheet-number">
											<input type="text" value="(@{spell_level-basis}+@{spell_level-misc-mod})" title="@{repeating_ability_$X_spell_level}" name="attr_spell_level" disabled />
											<span data-i18n-title="effective-spell-level" data-i18n-aria-label="effective-spell-level" data-i18n="spell-level-abbrv" >Spell lvl</span>
										</label>
										<label class="sheet-divider-db-lg">|</label>
										<label class="sheet-small-label2 sheet-entry-10p-shrink"><input title="@{repeating_ability_$X_save}" type="text" name="attr_save" value="" placeholder="Save" data-i18n-placeholder="save" accept="Saving Throw" /><span data-i18n="save">Save</span></label>
										<label class="sheet-small-label2 sheet-number">
											<input type="text" value="(10+@{ability-basis} + @{spell_level})" name="attr_savedc" title="@{repeating_ability_$X_savedc}" class="sheet-number" disabled />												
											<span data-i18n-title="difficulty-class-calculation-desc" data-i18n-aria-label="difficulty-class-calculation-desc" data-i18n="difficulty-class-abbrv" >DC</span>
										</label>
										<label class="sheet-small-label2 sheet-sect-sp">
											<input type="text" value="(@{ability-basis} + @{casterlevel})" name="attr_Concentration-mod" title="@{repeating_ability_$X_Concentration-mod}" class="sheet-number" disabled />
											<span data-i18n-aria-label="concentration-bonus-desc" data-i18n-title="concentration-bonus-desc" data-i18n="concentration-abbrv">Conc</span>
										</label>
										<label class="sheet-small-label2 sheet-sect-sp">
											<select class="sheet-select-small" title="@{repeating_ability_$X_abil-sr}" name="attr_abil-sr" accept="Spell Resistance" >
												<option value="" data-i18n="select-spell-resistance-default">&#8226;Select SR</option>
												<option value="Yes" data-i18n="yes" selected>Yes</option>
												<option value="No" data-i18n="no">No</option>
												<option value="Yes (Harmless)" data-i18n="yes-harmless">Yes (Harmless)</option>
												<option value="No (Harmless)" data-i18n="no-harmless">No (Harmless)</option>
											</select>
											<span data-i18n-title="spell-resistance" data-i18n-aria-label="spell-resistance" data-i18n="spell-resistance-abbrv">SR</span>
										</label>
									</div>
									<div class="sheet-range">
										<input type="checkbox" value="Sp" name="attr_ability_type" class="sheet-sp-show sheet-noshow" />
										<label class="sheet-small-label2 sheet-number">
											<input type="number" value="0" title="@{repeating_ability_$X_casterlevel}" name="attr_casterlevel" class="sheet-calc" />
											<span data-i18n-title="level-hit-dice-abbrv" data-i18n-aria-label="level-hit-dice-abbrv" data-i18n="caster-level-abbrv" >CL</span>
										</label>
										<label class="sheet-small-label2 sheet-sect-sp-inverse">
											<select class="sheet-select-small" title="@{repeating_ability_$X_range_pick}" name="attr_range_pick">
												<option value="" data-i18n="not-applicable-abbrv-default" selected>na</option>
												<option value="number" data-i18n="number">Number</option>
												<option value="perlevel" data-i18n="perlevel">Per Level</option>
												<option value="see_text" data-i18n="see_text">See text</option>
											</select>
											<span data-i18n="range">Range</span>
										</label>										
										<label class="sheet-small-label2 sheet-sect-sp">
											<select class="sheet-select-small" title="@{repeating_ability_$X_range_pick}" name="attr_range_pick">
												<option value="" data-i18n="blank" selected>Blank</option>
												<option value="close" data-i18n="close">Close</option>
												<option value="medium" data-i18n="medium">Medium</option>
												<option value="long" data-i18n="long">Long</option>
												<option value="touch" data-i18n="touch">Touch</option>
												<option value="personal" data-i18n="personal">Personal</option>
												<option value="see_text" data-i18n="see_text">See text</option>
												<option value="number" data-i18n="number">Number</option>
												<option value="perlevel" data-i18n="perlevel">Per Level</option>
												<option value="unknownrange" data-i18n="unknownrange">Unknown Range</option>
											</select>
											<span data-i18n="range">Range</span>
										</label>										
										<input type="checkbox" value="number" name="attr_range_pick" class="sheet-or-A-show sheet-noshow" />
										<input type="checkbox" value="perlevel" name="attr_range_pick" class="sheet-or-B-show sheet-noshow" />
										<label class="sheet-small-label2 sheet-entry-8p-shrink sheet-either-or-sect"><input title="@{repeating_ability_$X_range}" type="text" name="attr_range" placeholder="Flat # or # /level" data-i18n-placeholder="range-custom-place" /><span data-i18n-title="range-per-level-desc" data-i18n-aria-label="range-per-level-desc" data-i18n="range-custom">Custom Range</span></label>
										<label class="sheet-small-label2">
											<input title="@{repeating_ability_$X_range_numeric}" type="number" value="0" name="attr_range_numeric" class="sheet-calc" readonly ><span data-i18n="range-in-feet">Range</span>
										</label>
										<label class="sheet-small-label2 sheet-sect sheet-entry-15p-shrink"><input title="@{repeating_ability_$X_duration}" type="text" name="attr_duration" value="" placeholder="Duration" data-i18n-placeholder="spell-duration" accept="Duration" /><span data-i18n="duration">Duration</span></label>
										<label class="sheet-small-label2 sheet-entry-15p-shrink"><input title="@{repeating_ability_$X_cust-category}" type="text" name="attr_cust-category" value="" placeholder="School etc" data-i18n-placeholder="school-etc"  accept="School" /><span data-i18n-title="custom-category-desc" data-i18n-aria-label="custom-category-desc" data-i18n="category">Category</span></label>
									</div>
									<div class="sheet-weapon-attributes sheet-non-table">
										<label class="sheet-small-label2 sheet-entry-short">
											<input type="checkbox" name="attr_create-attack-entry" value="1" class="sheet-cssbutton sheet-createattackbutton" title="Create a new attack based on this weapon." data-i18n-title="create-attack-entry" data-i18n-aria-label="create-attack-entry"><span></span>
											<span data-i18n-title="create-attack-entry" data-i18n-aria-label="create-attack-entry" data-i18n="create-attack" >Create Attack</span>
										</label>
										<label class="sheet-small-label2 sheet-entry-short">
											<select class="sheet-select-small" title="@{repeating_ability_$X_abil-attack-type}" name="attr_abil-attack-type">
												<option value="0" data-i18n="none-default" selected>&#8226;None</option>
												<option value="@{attk-melee}" data-i18n="touch">Touch</option>
												<option value="@{attk-melee2}" data-i18n="touch-melee2">Alt Touch (alt melee)</option>
												<option value="@{attk-ranged}" data-i18n="ranged-touch-ray">Ranged touch/Ray</option>
												<option value="@{attk-ranged2}" data-i18n="ranged-touch-ray2">Alt Ranged Touch/Ray</option>
												<option value="@{CMB}" data-i18n="combat-maneuver-bonus-abbrv">CMB</option>
											</select>
											<span data-i18n="attack-type">Attack Type</span>
										</label>
										<label class="sheet-small-label2 sheet-sect sheet-entry-15p-shrink">
											<input title="@{repeating_ability_$X_targets}" type="text" value="" name="attr_targets" placeholder="Targets/Area/Effect" data-i18n-placeholder="spell-targets-area-effect" />
											<span data-i18n="spell-targets-area-effect">Targets/Area/Effect</span>
										</label>
										<label class="sheet-small-label2 sheet-entry-15p-shrink">
											<textarea class="sheet-inline-textarea" name="attr_damage-macro-text" title="@{repeating_ability_$X_damage-macro-text}" placeholder="Macro/Query" data-i18n-placeholder="full-macro-place" ></textarea>
											<span class="sheet-super sheet-note-b" data-i18n-title="damage-macro-desc" data-i18n-aria-label="damage-macro-desc" data-i18n="damage">Damage</span>
										</label>
										<label class="sheet-small-label2 sheet-entry-15p-shrink">
											<input type="text" name="attr_damage-type" title="@{repeating_ability_$X_damage-type}" placeholder="Damage Type" data-i18n-placeholder="damage-type" />
											<span data-i18n="damage-type">Damage Type</span>
										</label>
									</div>
									<input type="text" name="attr_is_sp" value="" class="sheet-noshow" />
									<input type="text" name="attr_hasposrange" value="" class="sheet-noshow" />
									<input type="text" name="attr_hasfrequency" value="" class="sheet-noshow" />
									<input type="text" name="attr_hasuses" value="" class="sheet-noshow" />
									<input type="text" name="attr_hasattack" value="" class="sheet-noshow" />
									<input type="text" name="attr_abil-attacktypestr" value="" class="sheet-noshow" />
									<textarea class="sheet-desc" title="@{repeating_ability_$X_description}" name="attr_description" accept="Content"></textarea>
									<textarea class="sheet-macro-text" title="@{repeating_ability_$X_macro-text}" name="attr_macro-text">&{template:pf_ability} @{toggle_accessible_flag} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_ability}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle=^{@{rule_category}}}} {{name=@{name}}} {{rule_category=@{rule_category}}} {{source=@{class-name}}} {{is_sp=@{is_sp}}} {{hasspellrange=@{range_pick}}} {{spell_range=^{@{range_pick}}}} {{casterlevel=[[@{casterlevel}]]}} {{spell_level=[[@{spell_level}]]}} {{hasposrange=@{hasposrange}}} {{custrange=@{range}}} {{range=[[@{range_numeric}]]}} {{save=@{save}}} {{savedc=[[@{savedc}]]}} {{hassr=@{abil-sr}}} {{sr=^{@{abil-sr}}}} {{hasfrequency=@{hasfrequency}}} {{frequency=^{@{frequency}}}} {{next_cast=@{rounds_between}}} {{hasuses=@{hasuses}}} {{uses=@{used}}} {{uses_max=@{used|max}}} {{cust_category=@{cust-category}}} {{concentration=[[@{Concentration-mod}]]}} {{damage=@{damage-macro-text}}} {{damagetype=@{damage-type}}} {{hasattack=@{hasattack}}} {{attacktype=^{@{abil-attacktypestr}}}} {{targetarea=@{targets}}} {{duration=@{duration}}} {{shortdesc=@{short-description}}} {{description=@{description}}} {{deafened_note=@{SpellFailureNote}}}</textarea>
									<div class="sheet-repeating-id">
										<span data-i18n="row-identification-for-macros">Row ID for macros</span>: <span class="sheet-selectable" name="attr_row_id" />
									</div>
								</div>
							</div>
						</fieldset>
					</div>
				</div>
				<div class="sheet-h2-section sheet-repeating-sect sheet-section-racial-traits" role="region" aria-label="racial traits">
					<span class="sheet-nontable-name sheet-secondary-table-name">(&nbsp;<span data-i18n="racial-traits">Racial Traits</span>&nbsp;)</span>
					<input type="checkbox" class="sheet-minimize-show sheet-cssbutton" data-i18n-title="minimize-all-cmd" data-i18n-aria-label="minimize-all-cmd" title="Minimize all rows." name="attr_npc-special-abilities-min-show" value="1" /><span></span>
					<input type="checkbox" class="sheet-lock-show sheet-cssbutton" data-i18n-title="expand-cmd" data-i18n-aria-label="expand-cmd" title="Collapse or expand all rows." name="attr_npc-special-abilities-expand-show" value="1" /><span></span>
					<input type="checkbox" class="sheet-split-column-show sheet-cssbutton" data-i18n-title="column-cmd" data-i18n-aria-label="column-cmd" title="Split into two columns" name="attr_npc-special-abilities-column-show" value="1" /><span></span>
					<input class="sheet-deletebutton sheet-cssbutton sheet-deletesect-show" type="checkbox" name="attr_delete_repeating_racial-trait_btn" value="1" data-i18n-title="delete-racial-trait" data-i18n-aria-label="delete-racial-trait-must-confirm-next-checkbox" /><span></span><label class="sheet-deletesect sheet-allrows-note"><input type="checkbox" class="sheet-selectedlabel-check" name="attr_delete_repeating_racial-trait" data-i18n-aria-label="confirm-delete-racial-trait" data-i18n-title="confirm-delete-racial-trait" value="1" /><b data-i18n="delete-all-rows-are-you-sure">delete all rows are you sure</b></label>
					<div class="sheet-sect sheet-repeating-fields sheet-table">
							<fieldset class="repeating_racial-trait">
								<span class="sheet-error"><span class="sheet-pictos">!</span><span data-i18n="error-msg1">Error! You must delete this row before editing any items in this section.</span></span>
								<div class="sheet-table-repeating">
									<input type="checkbox" class="sheet-counted sheet-sect-show" data-i18n-title="minimize-cmd" data-i18n-aria-label="minimize-cmd" title="Minimize Row" name="attr_row-show" value="1" checked /><span class="sheet-table-cell"></span>
									<span style="display:none;" class="sheet-table-cell sheet-repeating-rollbutton"><button type="roll" name="attr_roll" title="%{selected|repeating_racial-trait_$X_roll}" value="@{macro-text}"></button></span>
									<span class="sheet-table-cell sheet-repeating-rollbutton"><button type="roll" name="attr_npc-roll" title="%{selected|repeating_racial-trait_$X_npc-roll}" value="@{npc-macro-text}"></button></span>
									<span class="sheet-table-cell sheet-small-label sheet-hide-readonly" style="width:2.5em;"><input type="checkbox" name="attr_showinmenu" title="@{repeating_racial-trait_$X_showinmenu}" value="1"  /><span data-i18n="show-in-menu" data-i18n-title="show-in-menu-title" data-i18n-aria-label="show-in-menu-title">Show</span></span>
									<input type="hidden" value="racial-traits" name="attr_rule_category" />
									<span class="sheet-table-cell sheet-small-label"><input title="@{repeating_racial-trait_$X_name}" type="text" name="attr_name" placeholder="Racial Trait Name" data-i18n-placeholder="racial-trait-name" accept="Name"><br><span data-i18n="name">Name</span></span>
									<span class="sheet-table-cell sheet-small-label sheet-entry-30p-shrink"><textarea class="sheet-inline-textarea" title="@{repeating_racial-trait_$X_short-description}" name="attr_short-description" placeholder="Short Description" data-i18n-placeholder="short-description"></textarea><br><span data-i18n="short-description-abbrv">Short Desc</span></span>
									<span class="sheet-table-cell sheet-small-label sheet-exspsu-dropdown">
										<select title="@{repeating_racial-trait_$X_ability_type}" name="attr_ability_type">
											<option value="not-applicable" data-i18n="not-applicable-abbrv-default" selected>&#8226;N/A</option>
											<option value="Ex" data-i18n="exceptional-abbrv">Ex</option>
											<option value="Sp" data-i18n="spell-like-abbrv" >Sp</option>
											<option value="Su" data-i18n="supernatural-abbrv">Su</option>
										</select>
										<br>
										<span data-i18n="type">Type</span>
									</span>
									<span class="sheet-table-cell sheet-small-label" style="width:.1%;"><input title="@{repeating_racial-trait_$X_used}" type="number" name="attr_used" value="0" /><br><span data-i18n="uses">Uses</span></span>
									<span class="sheet-divider-lg" style="width:.1%;">/</span>
									<input type="checkbox" name="attr_used_max_error" class="sheet-error-mshow" value="1" />
									<span class="sheet-table-cell sheet-small-label sheet-highlight" style="width:.1%;"><input title="@{repeating_racial-trait_$X_used|max}" type="number" name="attr_used_max" value="" class="sheet-calc" readonly /><br><span data-i18n="maximum-abbrv">Max</span></span>
									<span class="sheet-table-cell sheet-small-label sheet-sect sheet-highlight sheet-hide-readonly" style="width:7%;"><textarea class="sheet-inline-textarea sheet-both" title="@{repeating_racial-trait_$X_max-calculation}" name="attr_max-calculation" placeholder="#/Equation" data-i18n-placeholder="equation-macro-place" ></textarea><br><span data-i18n="maximum-calculation-abbrv">Max Calc</span></span>
									<div class="sheet-sect sheet-expand">
										<input type="checkbox" class="sheet-showarrow sheet-desc-show" title="Click to expand" data-i18n-title="showsect-cmd" data-i18n-aria-label="showsect-cmd" aria-label="Show Description" name="attr_description-show" value="1" />
										<label class="sheet-showsect sheet-desc-showlabel" data-i18n="description">Description</label>
										<input type="checkbox" class="sheet-showarrow sheet-macro-text-show" title="Click to expand" data-i18n-title="showsect-cmd" data-i18n-aria-label="showsect-cmd" aria-label="Show Macro Text" name="attr_macro-text-show" value="1" />
										<label class="sheet-showsect sheet-macro-text-showlabel" data-i18n="macro-text">Macro Text</label>
										<input type="checkbox" class="sheet-showarrow sheet-id-show" title="Click to expand" data-i18n-title="showsect-cmd" data-i18n-aria-label="showsect-cmd" aria-label="Show Row ID" name="attr_ids-show" value="1" />
										<label class="sheet-showsect sheet-id-showlabel" data-i18n="identification-abbrv">ID</label>
										<hr class="sheet-subnav-hr">
										<div class="sheet-cheat"></div>
										<textarea class="sheet-desc" title="@{repeating_racial-trait_$X_description}" name="attr_description" accept="Content"></textarea>
										<textarea style="display:none;" class="sheet-macro-text" title="@{repeating_racial-trait_$X_macro-text}" name="attr_macro-text">@{PC-whisper} &{template:pf_block} @{toggle_accessible_flag} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_block}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle}} {{name=@{name}}} {{description=@{short-description}}}</textarea>
										<textarea class="sheet-macro-text" title="@{repeating_racial-trait_$X_npc-macro-text}" name="attr_npc-macro-text">@{NPC-whisper} &{template:pf_block} @{toggle_accessible_flag} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_block}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle}} {{name=@{name}}} {{description=@{short-description}}}</textarea>
										<div class="sheet-repeating-id">
											<span data-i18n="row-identification-for-macros">Row ID for macros</span>: <span class="sheet-selectable" name="attr_row_id" />
										</div>
									</div>
								</div>
							</fieldset>
					</div>
				</div>
				<div class="sheet-cheat"></div>
				<div class="sheet-h2-section sheet-npc-desc">
					<label class="sheet-small-label2 sheet-wide-textareaparent">
						<span data-i18n="description"></span>
						<textarea class="sheet-inline-textarea" title="@{character_description}" name="attr_character_description" placeholder="Description" data-i18n-placeholder="description"></textarea>
					</label>
				</div>
			</div>
			<div class="sheet-section9 sheet-section sheet-section-notes" role="region" aria-label="Notes and custom attributes" data-i18n-aria-label="notes-and-custom-attributes">
				<h1 class="sheet-selected-tabtitle" data-i18n="notes-and-custom-attributes">Notes and custom attributes</h1>
				<div class="sheet-cheat"></div>
				<input class="sheet-showarrow sheet-h2arrow" type="checkbox" name="attr_custom-attr-sect-a-show" title="Click to expand" data-i18n-title="showsect-cmd" value="1" checked />
				<h2 class="sheet-clickheader sheet-showsect sheet-super sheet-note-a" title="Click to expand" data-i18n-title="showsect-cmd" data-i18n-aria-label="showsect-cmd" data-i18n="edit-time-custom-num-attributes">Evaluate at edit time custom number attributes</h2>
				<div class="sheet-h2-section sheet-notes sheet-wide-readonly" role="section" >
					<div class="sheet-nontable">
						<div class="sheet-linked-custom">
							<input type="checkbox" name="attr_customa1-mod_error" class="sheet-error-mshow" value="1" />
							<textarea name="attr_customa1" title="@{customa1}" placeholder="#/Equation" value="" data-i18n-placeholder="equation-macro-place" class="sheet-inline-textarea sheet-highlight"></textarea>
							<input type="number" name="attr_customa1-mod" title="@{customa1-mod}" value="0" class="sheet-narrow-numbers sheet-calc sheet-highlight" readonly />
							<span ><input class="sheet-entry-custom-header" type="text" value="" data-i18n-placeholder="user-defined" placeholder="User Defined" name="attr_customa1-name" title="@{customa1-name}"  /></span>
						</div>
						<div class="sheet-linked-custom">
							<input type="checkbox" name="attr_customa2-mod_error" class="sheet-error-mshow" value="1" />
							<textarea name="attr_customa2" title="@{customa2}" placeholder="#/Equation" value="" data-i18n-placeholder="equation-macro-place" class="sheet-inline-textarea sheet-highlight"></textarea>
							<input type="number" name="attr_customa2-mod" title="@{customa2-mod}" value="0" class="sheet-narrow-numbers sheet-calc sheet-highlight" readonly />
							<span ><input class="sheet-entry-custom-header" type="text" value="" data-i18n-placeholder="user-defined" placeholder="User Defined" name="attr_customa2-name" title="@{customa2-name}"  /></span>
						</div>
						<div class="sheet-linked-custom">
							<input type="checkbox" name="attr_customa3-mod_error" class="sheet-error-mshow" value="1" />
							<textarea name="attr_customa3" title="@{customa3}" placeholder="#/Equation" value="" data-i18n-placeholder="equation-macro-place" class="sheet-inline-textarea sheet-highlight"></textarea>
							<input type="number" name="attr_customa3-mod" title="@{customa3-mod}" value="0" class="sheet-narrow-numbers sheet-calc sheet-highlight" readonly />
							<span ><input class="sheet-entry-custom-header" type="text" value="" data-i18n-placeholder="user-defined" placeholder="User Defined" name="attr_customa3-name" title="@{customa3-name}"  /></span>
						</div>
						<br/>
						<div class="sheet-linked-custom">
							<input type="checkbox" name="attr_customa10-mod_error" class="sheet-error-mshow" value="1" />
							<textarea name="attr_customa10" title="@{customa10}" placeholder="#/Equation" value="" data-i18n-placeholder="equation-macro-place" class="sheet-inline-textarea sheet-highlight"></textarea>
							<input type="number" name="attr_customa10-mod" title="@{customa10-mod}" value="0" class="sheet-narrow-numbers sheet-calc sheet-highlight" readonly />
							<span ><input class="sheet-entry-custom-header" type="text" value="" data-i18n-placeholder="user-defined" placeholder="User Defined" name="attr_customa10-name" title="@{customa10-name}"  /></span>
						</div>
						<div class="sheet-linked-custom">
							<input type="checkbox" name="attr_customa11-mod_error" class="sheet-error-mshow" value="1" />
							<textarea name="attr_customa11" title="@{customa11}" placeholder="#/Equation" value="" data-i18n-placeholder="equation-macro-place" class="sheet-inline-textarea sheet-highlight"></textarea>
							<input type="number" name="attr_customa11-mod" title="@{customa11-mod}" value="0" class="sheet-narrow-numbers sheet-calc sheet-highlight" readonly />
							<span ><input class="sheet-entry-custom-header" type="text" value="" data-i18n-placeholder="user-defined" placeholder="User Defined" name="attr_customa11-name" title="@{customa11-name}"  /></span>
						</div>
						<div class="sheet-linked-custom">
							<input type="checkbox" name="attr_customa12-mod_error" class="sheet-error-mshow" value="1" />
							<textarea name="attr_customa12" title="@{customa12}" placeholder="#/Equation" value="" data-i18n-placeholder="equation-macro-place" class="sheet-inline-textarea sheet-highlight"></textarea>
							<input type="number" name="attr_customa12-mod" title="@{customa12-mod}" value="0" class="sheet-narrow-numbers sheet-calc sheet-highlight" readonly />
							<span ><input class="sheet-entry-custom-header" type="text" value="" data-i18n-placeholder="user-defined" placeholder="User Defined" name="attr_customa12-name" title="@{customa12-name}"  /></span>
						</div>
						<br/>
						<div class="sheet-linked-custom">
							<input type="checkbox" name="attr_customa4-mod_max_error" class="sheet-error-mshow" value="1" />
							<textarea name="attr_customa4" title="@{customa4}" placeholder="#/Equation" value="" data-i18n-placeholder="equation-macro-place" class="sheet-inline-textarea sheet-highlight"></textarea>
							<input type="number" name="attr_customa4-mod" title="@{customa4-mod}" value="0" class="sheet-narrow-numbers"  />
							<div class="sheet-divider-db-lg">/</div>
							<input type="number" name="attr_customa4-mod_max" title="@{customa4-mod|max}" value="0" class="sheet-calc sheet-narrow-numbers sheet-highlight" readonly />
							<span ><input class="sheet-entry-custom-header" type="text" value="" data-i18n-placeholder="user-defined" placeholder="User Defined" name="attr_customa4-name" title="@{customa4-name}"  /></span>
						</div>
						<div class="sheet-linked-custom">
							<input type="checkbox" name="attr_customa5-mod_max_error" class="sheet-error-mshow" value="1" />
							<textarea name="attr_customa5" title="@{customa5}" placeholder="#/Equation" value="" data-i18n-placeholder="equation-macro-place" class="sheet-inline-textarea sheet-highlight"></textarea>
							<input type="number" name="attr_customa5-mod" title="@{customa5-mod}" value="0" class="sheet-narrow-numbers"  />
							<div class="sheet-divider-db-lg">/</div>
							<input type="number" name="attr_customa5-mod_max" title="@{customa5-mod|max}" value="0" class="sheet-calc sheet-narrow-numbers sheet-highlight" readonly />
							<span ><input class="sheet-entry-custom-header" type="text" value="" data-i18n-placeholder="user-defined" placeholder="User Defined" name="attr_customa5-name" title="@{customa5-name}"  /></span>
						</div>
						<div class="sheet-linked-custom">
							<input type="checkbox" name="attr_customa6-mod_max_error" class="sheet-error-mshow" value="1" />
							<textarea name="attr_customa6" title="@{customa6}" placeholder="#/Equation" value="" data-i18n-placeholder="equation-macro-place" class="sheet-inline-textarea sheet-highlight"></textarea>
							<input type="number" name="attr_customa6-mod" title="@{customa6-mod}" value="0" class="sheet-narrow-numbers"  />
							<div class="sheet-divider-db-lg">/</div>
							<input type="number" name="attr_customa6-mod_max" title="@{customa6-mod|max}" value="0" class="sheet-calc sheet-narrow-numbers sheet-highlight" readonly />
							<span ><input class="sheet-entry-custom-header" type="text" value="" data-i18n-placeholder="user-defined" placeholder="User Defined" name="attr_customa6-name" title="@{customa6-name}"  /></span>
						</div>
						<br/>
						<div class="sheet-linked-custom">
							<input type="checkbox" name="attr_customa7-mod_max_error" class="sheet-error-mshow" value="1" />
							<textarea name="attr_customa7" title="@{customa7}" placeholder="#/Equation" value="" data-i18n-placeholder="equation-macro-place" class="sheet-inline-textarea sheet-highlight"></textarea>
							<input type="number" name="attr_customa7-mod" title="@{customa7-mod}" value="0" class="sheet-narrow-numbers"  />
							<div class="sheet-divider-db-lg">/</div>
							<input type="number" name="attr_customa7-mod_max" title="@{customa7-mod|max}" value="0" class="sheet-calc sheet-narrow-numbers sheet-highlight" readonly />
							<span ><input class="sheet-entry-custom-header" type="text" value="" data-i18n-placeholder="user-defined" placeholder="User Defined" name="attr_customa7-name" title="@{customa7-name}"  /></span>
						</div>
						<div class="sheet-linked-custom">
							<input type="checkbox" name="attr_customa8-mod_max_error" class="sheet-error-mshow" value="1" />
							<textarea name="attr_customa8" title="@{customa8}" placeholder="#/Equation" value="" data-i18n-placeholder="equation-macro-place" class="sheet-inline-textarea sheet-highlight"></textarea>
							<input type="number" name="attr_customa8-mod" title="@{customa8-mod}" value="0" class="sheet-narrow-numbers"  />
							<div class="sheet-divider-db-lg">/</div>
							<input type="number" name="attr_customa8-mod_max" title="@{customa8-mod|max}" value="0" class="sheet-calc sheet-narrow-numbers sheet-highlight" readonly />
							<span ><input class="sheet-entry-custom-header" type="text" value="" data-i18n-placeholder="user-defined" placeholder="User Defined" name="attr_customa8-name" title="@{customa8-name}"  /></span>
						</div>
						<div class="sheet-linked-custom">
							<input type="checkbox" name="attr_customa9-mod_max_error" class="sheet-error-mshow" value="1" />
							<textarea name="attr_customa9" title="@{customa9}" placeholder="#/Equation" value="" data-i18n-placeholder="equation-macro-place" class="sheet-inline-textarea sheet-highlight"></textarea>
							<input type="number" name="attr_customa9-mod" title="@{customa9-mod}" value="0" class="sheet-narrow-numbers"  />
							<div class="sheet-divider-db-lg">/</div>
							<input type="number" name="attr_customa9-mod_max" title="@{customa9-mod|max}" value="0" class="sheet-calc sheet-narrow-numbers sheet-highlight" readonly />
							<span ><input class="sheet-entry-custom-header" type="text" value="" data-i18n-placeholder="user-defined" placeholder="User Defined" name="attr_customa9-name" title="@{customa9-name}"  /></span>
						</div>
					</div>
				</div>
				<div class="sheet-cheat"></div>
				<input class="sheet-showarrow sheet-h2arrow" type="checkbox" name="attr_custom-attr-sect-c-show" title="Click to expand" data-i18n-title="showsect-cmd" value="1" checked />
				<h2 class="sheet-clickheader sheet-showsect sheet-super sheet-note-c" title="Click to expand" data-i18n-title="showsect-cmd" data-i18n-aria-label="showsect-cmd" data-i18n="roll-time-custom-num-attributes">Evaluate at roll time custom number attributes</h2>
				<div class="sheet-h2-section sheet-notes sheet-wide-readonly" role="section" >
					<div class="sheet-nontable">
						<div class="sheet-linked-custom">
							<textarea name="attr_customc1" title="@{customc1}" value="" placeholder="Query/Macro" data-i18n-placeholder="full-macro-place" class="sheet-inline-textarea sheet-highlight"></textarea>
							<input type="number" name="attr_customc1-mod" title="@{customc1-mod}" value="(@{customc1})" class="sheet-calc sheet-narrow-numbers sheet-highlight" disabled />
							<span ><input class="sheet-entry-custom-header" type="text" value="" data-i18n-placeholder="user-defined" placeholder="User Defined" name="attr_customc1-name" title="@{customc1-name}"  /></span>
						</div>
						<div class="sheet-linked-custom">
							<textarea name="attr_customc2" title="@{customc2}" value="" placeholder="Query/Macro" data-i18n-placeholder="full-macro-place" class="sheet-inline-textarea sheet-highlight"></textarea>
							<input type="number" name="attr_customc2-mod" title="@{customc2-mod}" value="(@{customc2})" class="sheet-calc sheet-narrow-numbers sheet-highlight" disabled />
							<span ><input class="sheet-entry-custom-header" type="text" value="" data-i18n-placeholder="user-defined" placeholder="User Defined" name="attr_customc2-name" title="@{customc2-name}"  /></span>
						</div>
						<div class="sheet-linked-custom">
							<textarea name="attr_customc3" title="@{customc3}" value="" placeholder="Query/Macro" data-i18n-placeholder="full-macro-place" class="sheet-inline-textarea sheet-highlight"></textarea>
							<input type="number" name="attr_customc3-mod" title="@{customc3-mod}" value="(@{customc3})" class="sheet-calc sheet-narrow-numbers sheet-highlight" disabled />
							<span ><input class="sheet-entry-custom-header" type="text" value="" data-i18n-placeholder="user-defined" placeholder="User Defined" name="attr_customc3-name" title="@{customc3-name}"  /></span>
						</div>
						<br/>
						<div class="sheet-linked-custom">
							<textarea name="attr_customc4" title="@{customc4}" value="" placeholder="Query/Macro" data-i18n-placeholder="full-macro-place" class="sheet-inline-textarea sheet-highlight"></textarea>
							<input type="number" name="attr_customc4-mod" title="@{customc4-mod}" value="0" class="sheet-narrow-numbers"  />
							<div class="sheet-divider-db-lg">/</div>
							<input type="number" name="attr_customc4-mod_max" title="@{customc4-mod|max}" value="(@{customc4})" class="sheet-calc sheet-narrow-numbers sheet-highlight" disabled />
							<span ><input class="sheet-entry-custom-header" type="text" value="" data-i18n-placeholder="user-defined" placeholder="User Defined" name="attr_customc4-name" title="@{customc4-name}"  /></span>
						</div>
						<div class="sheet-linked-custom">
							<textarea name="attr_customc5" title="@{customc5}" value="" placeholder="Query/Macro" data-i18n-placeholder="full-macro-place" class="sheet-inline-textarea sheet-highlight"></textarea>
							<input type="number" name="attr_customc5-mod" title="@{customc5-mod}" value="0" class="sheet-narrow-numbers"  />
							<div class="sheet-divider-db-lg">/</div>
							<input type="number" name="attr_customc5-mod_max" title="@{customc5-mod|max}" value="(@{customc5})" class="sheet-calc sheet-narrow-numbers sheet-highlight" disabled />
							<span ><input class="sheet-entry-custom-header" type="text" value="" data-i18n-placeholder="user-defined" placeholder="User Defined" name="attr_customc5-name" title="@{customc5-name}"  /></span>
						</div>
						<div class="sheet-linked-custom">
							<textarea name="attr_customc6" title="@{customc6}" value="" placeholder="Query/Macro" data-i18n-placeholder="full-macro-place" class="sheet-inline-textarea sheet-highlight"></textarea>
							<input type="number" name="attr_customc6-mod" title="@{customc6-mod}" value="0" class="sheet-narrow-numbers"  />
							<div class="sheet-divider-db-lg">/</div>
							<input type="number" name="attr_customc6-mod_max" title="@{customc6-mod|max}" value="(@{customc6})" class="sheet-calc sheet-narrow-numbers sheet-highlight" disabled />
							<span ><input class="sheet-entry-custom-header" type="text" value="" data-i18n-placeholder="user-defined" placeholder="User Defined" name="attr_customc6-name" title="@{customc6-name}"  /></span>
						</div>
					</div>
				</div>
				<div class="sheet-cheat"></div>
				<input class="sheet-showarrow sheet-h2arrow" type="checkbox" name="attr_custom-attr-sect-b-show" title="Click to expand" data-i18n-title="showsect-cmd" value="1" checked />
				<h2 class="sheet-clickheader sheet-showsect sheet-super sheet-note-b" title="Click to expand" data-i18n-title="showsect-cmd" data-i18n-aria-label="showsect-cmd" data-i18n="roll-time-custom-attributes">Evaluate at roll time custom attributes</h2>
				<div class="sheet-h2-section sheet-notes sheet-wide-readonly" role="section" >
					<div class="sheet-nontable">
						<div class="sheet-linked-custom-wideinputs">
							<textarea name="attr_customb1" title="@{customb1}" value="" placeholder="Query/Macro" data-i18n-placeholder="full-macro-place" class="sheet-inline-textarea sheet-highlight"></textarea>
							<span ><input class="sheet-entry-custom-header" type="text" value="" data-i18n-placeholder="user-defined" placeholder="User Defined" name="attr_customb1-name" title="@{customb1-name}"  /></span>
						</div>
						<div class="sheet-linked-custom-wideinputs">
							<textarea name="attr_customb2" title="@{customb2}" value="" placeholder="Query/Macro" data-i18n-placeholder="full-macro-place" class="sheet-inline-textarea sheet-highlight"></textarea>
							<span ><input class="sheet-entry-custom-header" type="text" value="" data-i18n-placeholder="user-defined" placeholder="User Defined" name="attr_customb2-name" title="@{customb2-name}"  /></span>
						</div>
						<div class="sheet-linked-custom-wideinputs">
							<textarea name="attr_customb3" title="@{customb3}" value="" placeholder="Query/Macro" data-i18n-placeholder="full-macro-place" class="sheet-inline-textarea sheet-highlight"></textarea>
							<span ><input class="sheet-entry-custom-header" type="text" value="" data-i18n-placeholder="user-defined" placeholder="User Defined" name="attr_customb3-name" title="@{customb3-name}"  /></span>
						</div>
						<br/>
						<div class="sheet-linked-custom-wideinputs">
							<textarea name="attr_customb4" title="@{customb4}" value="" placeholder="Query/Macro" data-i18n-placeholder="full-macro-place" class="sheet-inline-textarea sheet-highlight"></textarea>
							<span ><input class="sheet-entry-custom-header" type="text" value="" data-i18n-placeholder="user-defined" placeholder="User Defined" name="attr_customb4-name" title="@{customb4-name}"  /></span>
						</div>
						<div class="sheet-linked-custom-wideinputs">
							<textarea name="attr_customb5" title="@{customb5}" value="" placeholder="Query/Macro" data-i18n-placeholder="full-macro-place" class="sheet-inline-textarea sheet-highlight"></textarea>
							<span ><input class="sheet-entry-custom-header" type="text" value="" data-i18n-placeholder="user-defined" placeholder="User Defined" name="attr_customb5-name" title="@{customb5-name}"  /></span>
						</div>
						<div class="sheet-linked-custom-wideinputs">
							<textarea name="attr_customb6" title="@{customb6}" value="" placeholder="Query/Macro" data-i18n-placeholder="full-macro-place" class="sheet-inline-textarea sheet-highlight"></textarea>
							<span ><input class="sheet-entry-custom-header" type="text" value="" data-i18n-placeholder="user-defined" placeholder="User Defined" name="attr_customb6-name" title="@{customb6-name}"  /></span>
						</div>
					</div>
				</div>
				<div class="sheet-cheat"></div>
				<input class="sheet-showarrow sheet-h2arrow" type="checkbox" name="attr_custom-attr-sect-d-show" title="Click to expand" data-i18n-title="showsect-cmd" value="1" checked />
				<h2 class="sheet-clickheader sheet-showsect sheet-super sheet-note-d" title="Click to expand" data-i18n-title="showsect-cmd" data-i18n-aria-label="showsect-cmd" data-i18n="custom-rolls">Custom Rolls</h2>
				<div class="sheet-h2-section sheet-notes" role="section" >
					
						<div class="sheet-linked-custom-roll">
							<span ><input class="sheet-entry-custom-header" type="text" value="" data-i18n-placeholder="user-defined" placeholder="User Defined" name="attr_customd1-name" title="@{customd1-name}"  /></span>
							<div class="sheet-custom-roll-inner">
								<div class="sheet-custom-buttons">
									<button type="roll" name="roll_customd1_roll" class="sheet-command-button" value="@{PC-whisper} @{customd1}" title="%{selected|customd1}">&nbsp;<span name="attr_customd1-name" /></button>
									<br>
									<button type="roll" name="roll_NPC-customd1_roll" class="sheet-command-button" value="@{NPC-whisper} @{customd1}" title="%{selected|customd1}"><span data-i18n="npc">NPC</span>&nbsp;<span name="attr_customd1-name" /></button>
								</div>
								<textarea name="attr_customd1" title="@{customd1}" value="" placeholder="Query/Macro" data-i18n-placeholder="full-macro-place" class="sheet-inline-textarea sheet-half"></textarea>
							</div>
						</div>
						<div class="sheet-linked-custom-roll">
							<span ><input class="sheet-entry-custom-header" type="text" value="" data-i18n-placeholder="user-defined" placeholder="User Defined" name="attr_customd2-name" title="@{customd2-name}"  /></span>
							<div class="sheet-custom-roll-inner">
							<div class="sheet-custom-buttons">
								<button type="roll" name="roll_customd2_roll" class="sheet-command-button" value="@{PC-whisper} @{customd2}" title="%{selected|customd2}">&nbsp;<span name="attr_customd2-name" /></button>
								<br>
								<button type="roll" name="roll_NPC-customd2_roll" class="sheet-command-button" value="@{NPC-whisper} @{customd2}" title="%{selected|customd2}"><span data-i18n="npc">NPC</span>&nbsp;<span name="attr_customd2-name" /></button>
							</div>
							<textarea name="attr_customd2" title="@{customd2}" value="" placeholder="Query/Macro" data-i18n-placeholder="full-macro-place" class="sheet-inline-textarea sheet-half"></textarea>
							</div>
						</div>
						<div class="sheet-linked-custom-roll">
							<span ><input class="sheet-entry-custom-header" type="text" value="" data-i18n-placeholder="user-defined" placeholder="User Defined" name="attr_customd3-name" title="@{customd3-name}"  /></span>
							<div class="sheet-custom-roll-inner">
							<div class="sheet-custom-buttons">
								<button type="roll" name="roll_customd3_roll" class="sheet-command-button" value="@{PC-whisper} @{customd3}" title="%{selected|customd3}">&nbsp;<span name="attr_customd3-name" /></button>
								<br>
								<button type="roll" name="roll_NPC-customd3_roll" class="sheet-command-button" value="@{NPC-whisper} @{customd3}" title="%{selected|customd3}"><span data-i18n="npc">NPC</span>&nbsp;<span name="attr_customd3-name" /></button>
							</div>
							<textarea name="attr_customd3" title="@{customd3}" value="" placeholder="Query/Macro" data-i18n-placeholder="full-macro-place" class="sheet-inline-textarea sheet-half"></textarea>
							</div>
						</div>
						<div class="sheet-linked-custom-roll">
							<span ><input class="sheet-entry-custom-header" type="text" value="" data-i18n-placeholder="user-defined" placeholder="User Defined" name="attr_customd4-name" title="@{customd4-name}"  /></span>
							<div class="sheet-custom-roll-inner">
							<div class="sheet-custom-buttons">
								<button type="roll" name="roll_customd4_roll" class="sheet-command-button" value="@{PC-whisper} @{customd4}" title="%{selected|customd4}">&nbsp;<span name="attr_customd4-name" /></button>
								<br>
								<button type="roll" name="roll_NPC-customd4_roll" class="sheet-command-button" value="@{NPC-whisper} @{customd4}" title="%{selected|customd4}"><span data-i18n="npc">NPC</span>&nbsp;<span name="attr_customd4-name" /></button>
							</div>
							<textarea name="attr_customd4" title="@{customd4}" value="" placeholder="Query/Macro" data-i18n-placeholder="full-macro-place" class="sheet-inline-textarea sheet-half"></textarea>
							</div>
						</div>
						<div class="sheet-linked-custom-roll">
							<span ><input class="sheet-entry-custom-header" type="text" value="" data-i18n-placeholder="user-defined" placeholder="User Defined" name="attr_customd5-name" title="@{customd5-name}"  /></span>
							<div class="sheet-custom-roll-inner">
							<div class="sheet-custom-buttons">
								<button type="roll" name="roll_customd5_roll" class="sheet-command-button" value="@{PC-whisper} @{customd5}" title="%{selected|customd5}">&nbsp;<span name="attr_customd5-name" /></button>
								<br>
								<button type="roll" name="roll_NPC-customd5_roll" class="sheet-command-button" value="@{NPC-whisper} @{customd5}" title="%{selected|customd5}"><span data-i18n="npc">NPC</span>&nbsp;<span name="attr_customd5-name" /></button>
							</div>
							<textarea name="attr_customd5" title="@{customd5}" value="" placeholder="Query/Macro" data-i18n-placeholder="full-macro-place" class="sheet-inline-textarea sheet-half"></textarea>
							</div>
						</div>
						<div class="sheet-linked-custom-roll">
							<span ><input class="sheet-entry-custom-header" type="text" value="" data-i18n-placeholder="user-defined" placeholder="User Defined" name="attr_customd6-name" title="@{customd6-name}"  /></span>
							<div class="sheet-custom-roll-inner">
							<div class="sheet-custom-buttons">
								<button type="roll" name="roll_customd6_roll" class="sheet-command-button" value="@{PC-whisper} @{customd6}" title="%{selected|customd6}">&nbsp;<span name="attr_customd6-name" /></button>
								<br>
								<button type="roll" name="roll_NPC-customd6_roll" class="sheet-command-button" value="@{NPC-whisper} @{customd6}" title="%{selected|customd6}"><span data-i18n="npc">NPC</span>&nbsp;<span name="attr_customd6-name" /></button>
							</div>
							<textarea name="attr_customd6" title="@{customd6}" value="" placeholder="Query/Macro" data-i18n-placeholder="full-macro-place" class="sheet-inline-textarea sheet-half"></textarea>
							</div>
						</div>
					
				</div>
				<div class="sheet-cheat"></div>
				<input class="sheet-showarrow sheet-h2arrow" type="checkbox" name="attr_custom-attr-sect-n-show" data-i18n-aria-label="quick-stats" title="Click to expand" data-i18n-title="showsect-cmd" value="1" checked />
				<h2 class="sheet-clickheader sheet-showsect" title="Click to expand" data-i18n-title="showsect-cmd" data-i18n-aria-label="showsect-cmd" data-i18n="notes">Notes</h2>
				<div class="sheet-h2-section sheet-notes" role="section" >
					
						<div class="sheet-linked-custom-notes">
							<span><input class="sheet-entry-custom-header" type="text" value="" data-i18n-placeholder="user-defined" placeholder="User Defined" name="attr_customn1-name" title="@{customn1-name}" /></span>
							<textarea name="attr_customn1" title="@{customn1}" value="" placeholder="Notes" data-i18n-placeholder="notes" class="sheet-inline-textarea sheet-half"></textarea>
						</div>
						<div class="sheet-linked-custom-notes">
							<span><input class="sheet-entry-custom-header" type="text" value="" data-i18n-placeholder="user-defined" placeholder="User Defined" name="attr_customn2-name" title="@{customn2-name}" /></span>
							<textarea name="attr_customn2" title="@{customn2}" value="" placeholder="Notes" data-i18n-placeholder="notes" class="sheet-inline-textarea sheet-half"></textarea>
						</div>
						<div class="sheet-linked-custom-notes">
							<span><input class="sheet-entry-custom-header" type="text" value="" data-i18n-placeholder="user-defined" placeholder="User Defined" name="attr_customn3-name" title="@{customn3-name}" /></span>
							<textarea name="attr_customn3" title="@{customn3}" value="" placeholder="Notes" data-i18n-placeholder="notes" class="sheet-inline-textarea sheet-half"></textarea>
						</div>
						<div class="sheet-linked-custom-notes">
							<span><input class="sheet-entry-custom-header" type="text" value="" data-i18n-placeholder="user-defined" placeholder="User Defined" name="attr_customn4-name" title="@{customn4-name}" /></span>
							<textarea name="attr_customn4" title="@{customn4}" value="" placeholder="Notes" data-i18n-placeholder="notes" class="sheet-inline-textarea sheet-half"></textarea>
						</div>
						<div class="sheet-linked-custom-notes">
							<span><input class="sheet-entry-custom-header" type="text" value="" data-i18n-placeholder="user-defined" placeholder="User Defined" name="attr_customn5-name" title="@{customn5-name}" /></span>
							<textarea name="attr_customn5" title="@{customn5}" value="" placeholder="Notes" data-i18n-placeholder="notes" class="sheet-inline-textarea sheet-half"></textarea>
						</div>
						<div class="sheet-linked-custom-notes">
							<span><input class="sheet-entry-custom-header" type="text" value="" data-i18n-placeholder="user-defined" placeholder="User Defined" name="attr_customn6-name" title="@{customn6-name}" /></span>
							<textarea name="attr_customn6" title="@{customn6}" value="" placeholder="Notes" data-i18n-placeholder="notes" class="sheet-inline-textarea sheet-half"></textarea>
						</div>
						<div class="sheet-linked-custom-notes">
							<span><input class="sheet-entry-custom-header" type="text" value="" data-i18n-placeholder="user-defined" placeholder="User Defined" name="attr_customn7-name" title="@{customn7-name}" /></span>
							<textarea name="attr_customn7" title="@{customn7}" value="" placeholder="Notes" data-i18n-placeholder="notes" class="sheet-inline-textarea sheet-half"></textarea>
						</div>
						<div class="sheet-linked-custom-notes">
							<span><input class="sheet-entry-custom-header" type="text" value="" data-i18n-placeholder="user-defined" placeholder="User Defined" name="attr_customn8-name" title="@{customn8-name}" /></span>
							<textarea name="attr_customn8" title="@{customn8}" value="" placeholder="Notes" data-i18n-placeholder="notes" class="sheet-inline-textarea sheet-half"></textarea>
						</div>
						<div class="sheet-linked-custom-notes">
							<span><input class="sheet-entry-custom-header" type="text" value="" data-i18n-placeholder="user-defined" placeholder="User Defined" name="attr_customn9-name" title="@{customn9-name}" /></span>
							<textarea name="attr_customn9" title="@{customn9}" value="" placeholder="Notes" data-i18n-placeholder="notes" class="sheet-inline-textarea sheet-half"></textarea>
						</div>
						<div class="sheet-linked-custom-notes">
							<span><input class="sheet-entry-custom-header" type="text" value="" data-i18n-placeholder="user-defined" placeholder="User Defined" name="attr_customn10-name" title="@{customn10-name}" /></span>
							<textarea name="attr_customn10" title="@{customn10}" value="" placeholder="Notes" data-i18n-placeholder="notes" class="sheet-inline-textarea sheet-half"></textarea>
						</div>
					
				</div>
			</div>
		</div>
	</div>
	<div class="sheet-section-config" role="contentinfo" aria-label="Configuration" data-i18n-aria-label="configuration">
		<input type="checkbox" name="attr_is_newsheet" value="1" style="display:none;" aria-label="when creating a new sheet this is default 1" />
		<h1 class="sheet-selected-tabtitle" data-i18n="configuration">Configuration</h1>
			<div class="sheet-cheat"></div>
		<input class="sheet-showarrow sheet-h2arrow" type="checkbox" name="attr_sheet-config-show" data-i18n-aria-label="sheet-configuration" title="Click to expand" data-i18n-title="showsect-cmd" value="1" checked />
		<h2 class="sheet-clickheader sheet-showsect"><label title="Click to expand" data-i18n-title="showsect-cmd" data-i18n-aria-label="showsect-cmd" data-i18n="sheet-configuration">Sheet Configuration</label></h2>
		<div class="sheet-h2-section sheet-sheetconfig">
			<div class="sheet-corerules sheet-two-equalcolumn sheet-table">
				<span class="sheet-table-name sheet-show-readonly" data-i18n="sheet-configuration">Sheet configuration</span>
				<div class="sheet-table-row">
					<span class="sheet-table-config-row-name" style="border-bottom:none;" data-i18n="accessibility">Accessibility</span>
					<input type="hidden" name="attr_var_accessible_flag" value="{{accessible=true}}" />
					<span class="sheet-table-cell sheet-left">
						<label>
							<input type="checkbox" class="sheet-selectedlabel-check" name="attr_toggle_attack_accessible" value="@{var_accessible_flag}" title="@{toggle_attack_accessible}"><b title="Use simple accessible template for attacks." data-i18n-title="options-attacks-accessible-title" data-i18n-aria-label="options-attacks-accessible-title" data-i18n="use-simple-template-attacks">Use Attacks Simple Template</b>
						</label>
					</span>
					<span class="sheet-table-cell sheet-left">
						<label>
							<input type="checkbox" class="sheet-selectedlabel-check" name="attr_toggle_spell_accessible" value="@{var_accessible_flag}" title="@{toggle_spell_accessible}"><b title="Use simple accessible template for spells." data-i18n-title="options-spells-accessible-title" data-i18n-aria-label="options-spells-accessible-title" data-i18n="use-simple-template-spells">Use Spells Simple Template</b>
						</label>
					</span>
				</div>
				<div class="sheet-table-row">
					<span class="sheet-table-config-row-name"  ></span>
					<span class="sheet-table-cell sheet-left">
						<label>
							<input type="checkbox" class="sheet-selectedlabel-check" name="attr_toggle_accessible_flag" value="@{var_accessible_flag}" title="@{toggle_accessible_flag}" /><b><span data-i18n="use-simple-templates">Use Other Simple Templates</span></b>
						</label>
					</span>
					<span class="sheet-table-cell sheet-left">
						<label>
						</label>
					</span>
				</div>
				<div class="sheet-table-row">
					<span class="sheet-table-config-row-name" data-i18n="font-background" >Font / background</span>
					<span class="sheet-table-cell sheet-left">
						<label>
							<select name="attr_use_specfont" title="@{use_specfont}" class="sheet-select-small">
								<option value="0" data-i18n="arial-default">•Arial</option>
								<option value="1" data-i18n="verdana">Verdana</option>
								<option value="2" data-i18n="comic-sans">Comic Sans</option>
								<option value="3" data-i81n="segoe">Segoe UI</option>
								<option value="4" data-i81n="lucida">Lucida</option>
								<option value="5" data-i81n="fantasy">Fantasy</option>
							</select>
						</label>
					</span>
					<span class="sheet-table-cell sheet-left">
						<label>
							<span class="sheet-table-cell" title="Choose a background image." data-i18n-title="background-title" data-i18n="choose-background">Choose Background:</span>
							<span class="sheet-table-cell">
								<select name="attr_use_background" title="@{use_background}" class="sheet-select-small">
									<option value="0" data-i18n="none">•None</option>
									<option value="1" data-i18n="graphpaper">Graph-paper</option>
									<option value="2" data-i18n="parchment-1">Parchment 1</option>
									<option value="3" data-i18n="parchment-2">Parchment 2</option>
								</select>
							</span>
						</label>
					</span>
				</div>
				<div class="sheet-table-row">
					<span class="sheet-table-config-row-name"  data-i18n="pages">Pages</span>
					<span class="sheet-table-cell sheet-left">
						<label ><input type="checkbox" class="sheet-selectedlabel-check" name="attr_is_npc" value="1" title="@{is_npc}" /><b title="IS NPC" data-i18n-title="is-npc-description" data-i18n-aria-label="is-npc-description" data-i18n="is-npc-check-caps">IS NPC</b></label>
					</span>
					<span class="sheet-table-cell sheet-left">&nbsp;</span>
				</div>
				<div class="sheet-table-row">
					<span class="sheet-table-config-row-name"  data-i18n="spells">Spells</span>
					<span class="sheet-table-cell sheet-left">
						<label><input type="checkbox" class="sheet-selectedlabel-check" name="attr_use_spells" value="1" title="@{use_spells}" /><b data-i18n-aria-label="uses-spells-title" title="Character has spells" data-i18n-title="uses-spells-title" data-i18n="uses-spells">Uses Spells</b></label>
					</span>
					<span class="sheet-table-cell sheet-left">
						<label><input type="checkbox" class="sheet-selectedlabel-check" name="attr_use_spell_points" value="1" title="@{use_spell_points}" /><b data-i18n-aria-label="uses-spell-points-title" title="Character uses spell points" data-i18n-title="uses-spell-points-title" data-i18n="uses-spell-points">Uses Spell Points</b></label>
					</span>
				</div>
				<div class="sheet-table-row">
					<span class="sheet-table-config-row-name" style="border-bottom:none;" data-i18n="lists">Lists</span>
					<span class="sheet-table-cell sheet-left">
						<label><span><input type="checkbox" title="@{use_traits}" name="attr_use_traits" value="1" class="sheet-selectedlabel-check" /><b><span data-i18n="use-traits">Use Separate Traits List</span></b></span></label>
 						<input type="checkbox"  name="attr_use_traits" value="1" class="sheet-sect2-show" />
						<input class="sheet-csstextbutton sheet-sect-show sheet-sect2" type="checkbox" name="attr_merge_traits_now" value="1" /><span class="sheet-sect2" data-i18n-title="merge-traits" data-i18n="merge">Merge</span>
					</span>
					<span class="sheet-table-cell sheet-left">
						<label><span><input type="checkbox" title="@{use_racial_traits}" name="attr_use_racial_traits" value="1" class="sheet-selectedlabel-check" /><b><span data-i18n="use-racial-traits">Use Separate Racial Traits List</span></b></span></label>
 						<input type="checkbox" name="attr_use_racial_traits" value="1" class="sheet-sect2-show" />
						<input class="sheet-csstextbutton sheet-sect-show sheet-sect2" type="checkbox" name="attr_merge_race_traits_now" value="1" /><span class="sheet-sect2" data-i18n-title="merge-race-traits" data-i18n="merge">Merge</span>						
					</span>
				</div>
				<div class="sheet-table-row">
					<span class="sheet-table-config-row-name" style="border-bottom:none;">&nbsp;</span>
					<span class="sheet-table-cell sheet-left">
						<label><span><input type="checkbox" title="@{use_feats}" name="attr_use_feats" value="1" class="sheet-selectedlabel-check" /><b><span data-i18n="use-feats">Use Separate feats List</span></b></span></label>
 						<input type="checkbox" name="attr_use_feats" value="1" class="sheet-sect2-show" />
 						<input class="sheet-csstextbutton sheet-sect-show sheet-sect2" type="checkbox" name="attr_merge_feats_now" value="1" /><span class="sheet-sect2" data-i18n-title="merge-feats" data-i18n="merge">Merge</span>						
					</span>
					<span class="sheet-table-cell sheet-left">
						<label><span><input type="checkbox" title="@{use_class_features}" name="attr_use_class_features" value="1" class="sheet-selectedlabel-check" /><b><span data-i18n="use-class-features">Use Separate Class Features List</span></b></span></label>
 						<input type="checkbox" name="attr_use_class_features" value="1" class="sheet-sect2-show" />
 						<input class="sheet-csstextbutton sheet-sect-show sheet-sect2" type="checkbox" name="attr_merge_class_features_now" value="1" /><span class="sheet-sect2" data-i18n-title="merge-class_features" data-i18n="merge">Merge</span>						
					</span>
				</div>
				<div class="sheet-table-row">
					<span class="sheet-table-config-row-name">&nbsp;</span>
					<span class="sheet-table-cell sheet-left">
						<label><span><input type="checkbox" title="@{use_spell-like-abilities}" name="attr_use_spell-like-abilities" value="1" class="sheet-selectedlabel-check" /><b><span data-i18n="use-spell-like-abilities">Use Separate Spell-like ability List</span></b></span></label>
 						<input type="checkbox" name="attr_use_spell-like-abilities" value="1" class="sheet-sect2-show" />
 						<input class="sheet-csstextbutton sheet-sect-show sheet-sect2" type="checkbox" name="attr_merge_slas_now" value="1" /><span class="sheet-sect2" data-i18n-title="merge-slas" data-i18n="merge">Merge</span>						
					</span>
					<span class="sheet-table-cell sheet-left">
					</span>
				</div>		
				<div class="sheet-table-row">
					<span class="sheet-table-config-row-name" style="border-bottom: none;" data-i18n="attacks">Attacks</span>
					<span class="sheet-table-cell sheet-left">
						<label>
							<input type="checkbox" title="@{ranged_2_show}" name="attr_ranged_2_show" value="1" class="sheet-selectedlabel-check" /><b><span data-i18n="display-ranged-2">Display Alt Ranged attack type</span></b>
						</label>
					</span>
					<span class="sheet-table-cell sheet-left">
						<label>
							<input type="checkbox" title="@{cmb_2_show}" name="attr_cmb_2_show" value="1" class="sheet-selectedlabel-check"/><b><span data-i18n="display-cmb-2">Display Alt CMB attack type</span></b>
						</label>
					</span>					
				</div>
				<div class="sheet-table-row">
					<span class="sheet-table-config-row-name" ></span>
					<span class="sheet-table-cell sheet-left">
						<label>
							<input type="checkbox" title="@{modify_dmg_by_size}" name="attr_modify_dmg_by_size" value="1" class="sheet-selectedlabel-check" /><b><span data-i18n="adjust-damage-by-size"> Adjust damage based on size</span></b>
						</label>
					</span>
					<span class="sheet-table-cell sheet-left">
					</span>					
				</div>
				<div class="sheet-table-row">				
					<span class="sheet-table-config-row-name" data-i18n="encumbrance">Encumbrance</span>
					<span class="sheet-table-cell sheet-left">
						<label>
							<span class="sheet-table-cell" data-i18n="encumbrance-based-on">Encumbrance based on:</span>
							<span class="sheet-table-cell">
								<select title="@{max-dex-source}" name="attr_max-dex-source" class="sheet-select-small" style="width: 12em; display:inline-block;">
									<option value="0" data-i18n="armor-shield-load-default" selected>&#8226;Armor, Shield &amp; Load</option>
									<option value="1" data-i18n="armor-shield-only">Armor &amp; Shield only</option>
									<option value="2" data-i18n="load-only">Load only</option>
									<option value="3" data-i18n="ignore-encumbrance">Ignore Encumbrance</option>
								</select>
							</span>
						</label>
					</span>
					<span class="sheet-table-cell sheet-left">
						<label><input type="checkbox" class="sheet-selectedlabel-check" name="attr_is_dwarf" value="1" title="@{is_dwarf}" /><b data-i18n-aria-label="use-dwarf-encumbrance-title" data-i18n="use-dwarf-encumbrance" title="Use Dwarf encumbrance rules: base speed not lowered due to load or armor encumbrance" data-i18n-title="use-dwarf-encumbrance-title">Uses dwarf encumbrance rules</b></label>
					</span>
				</div>
				<div class="sheet-table-row">
					<span class="sheet-table-config-row-name" data-i18n="hit-points" style="border-bottom: none;">Hit Points</span>
					<span class="sheet-table-cell sheet-left">
						<label>
							<input type="checkbox" class="sheet-sect2-show sheet-selectedlabel-check" style="display:inline;" value="1" name="attr_auto_calc_hp" aria-label="check to autocalc hp/lvl"  /><b><span data-i18n="automatically-calculate-hit-points-abbrv">Auto calc hp</span></b>
							<span class="sheet-sect2" role="Radiogroup">
								<span data-i18n="average-hit-point-abbrv">Avg hp:</span>&nbsp;
								<label><input type="radio" name="attr_autohp_percent" value="1" checked />50%</label>
								<label><input type="radio" name="attr_autohp_percent" value="2" />75%</label>
								<label><input type="radio" name="attr_autohp_percent" value="3" />100%</label>
							</span>
						</label>
					</span>
					<span class="sheet-table-cell sheet-left">
						<input type="checkbox" class="sheet-sect2-show sheet-noshow" value="1" name="attr_auto_calc_hp" role="presentation"  />					
						<label class="sheet-sect2">
							<input type="checkbox" value="1" name="attr_maxhp_lvl1" class="sheet-selectedlabel-check" /><b><span data-i18n-title="100-at-level-1-title" data-i18n="100-at-level-1">Use Max hp for first level/HD</span></b>
						</label>
					</span>					
				</div>
				<div class="sheet-table-row">
					<span class="sheet-table-config-row-name" ></span>
					<span class="sheet-table-cell sheet-left">
						<label>
							<input type="checkbox" value="1" name="attr_increase_hp" title="@{increase_hp}" checked  class="sheet-selectedlabel-check" data-i18n-aria-label="update-hp-when-max-changes" /><b><span data-i18n-title="update-hp-when-max-changes-title" data-i18n="update-hp-when-max-changes"> Update curr HP when max HP changes</span></b>
						</label>
					</span>
					<span class="sheet-table-cell sheet-left">
					</span>					
				</div>
				<div class="sheet-table-row">
					<span class="sheet-table-config-row-name" data-i18n="defenses" style="border-bottom: none;">Defenses</span>
					<span class="sheet-table-cell sheet-left">
						<label>
							<input type="checkbox" title="@{uncanny_dodge}" name="attr_uncanny_dodge" value="1" class="sheet-selectedlabel-check"/>
							<b><span data-i18n-title="uncanny-dodge-title" data-i18n-aria-label="uncanny-dodge-title" data-i18n="uncanny-dodge-desc">Do not lose DEX when Flat footed</span></b>
						</label>
					</span>
					<span class="sheet-table-cell sheet-left">
						<label>
							<input type="checkbox" title="@{hd_not_bab}" name="attr_hd_not_bab" value="1" class="sheet-selectedlabel-check"/>
							<b><span data-i18n="hd-not-bab">Use HD instead of BAB for CMD</span></b>
						</label>
					</span>
				</div>
				<div class="sheet-table-row">
					<span class="sheet-table-config-row-name">&nbsp;</span>
					<span class="sheet-table-cell sheet-left">
						<label>
							<input type="checkbox" title="@{unlock_def_ability}" name="attr_unlock_def_ability" value="1" class="sheet-selectedlabel-check" />
							<b><span data-i18n-title="unlock-defense-dropdowns-title" data-i18n-aria-label="unlock-defense-dropdowns-title"  data-i18n="unlock-defense-dropdowns">Allow AC and CMD to use different ability scores</span></b>
						</label>
					</span>
					<span class="sheet-table-cell sheet-left">&nbsp;</span>
				</div>
				<div class="sheet-table-row">
					<span class="sheet-table-config-row-name" data-i18n="advanced" style="border-bottom: none;">Advanced</span>
					<span class="sheet-table-cell sheet-left">
						<label>
							<input type="checkbox" title="@{use_advanced_options}" name="attr_use_advanced_options" value="1" class="sheet-selectedlabel-check" />
							<b><span data-i18n-title="display-advanced-options-title" data-i18n-aria-label="display-advanced-options-title" aria-label="display-advanced-options-title" data-i18n="display-advanced-options">Display user defined and misc fields</span></b>
						</label>
					</span>
					<span class="sheet-table-cell sheet-left">
						<label>
							<input type="checkbox" title="@{normal_macro_show}" name="attr_normal_macro_show" value="1" class="sheet-selectedlabel-check" />
							<b><span data-i18n-aria-label="display-macro-text-title" data-i18n-title="display-macro-text-title" data-i18n="display-macro-text">Display macro-text fields for customizing rolls</span></b>
						</label>
					</span>
				</div>
				<div class="sheet-table-row">
					<span class="sheet-table-config-row-name">&nbsp;</span>
					<span class="sheet-table-cell sheet-left">
						<label>
							<input type="checkbox" title="@{adv_macro_show}" name="attr_adv_macro_show" value="1" class="sheet-selectedlabel-check" />
							<b><span data-i18n-title="display-advanced-macros-title" data-i18n-aria-label="display-advanced-macros-title" aria-label="display-advanced-macros-title" data-i18n="display-advanced-macros">Display 'Advanced' roll-time macro fields to add to rolls</span></b>
						</label>
					</span>					
					<span class="sheet-table-cell sheet-left">&nbsp;</span>
				</div>
				<div class="sheet-table-row">
					<span class="sheet-table-config-row-name" data-i18n="roll-configuration" style="border-bottom: none;">Roll Configuration</span>
					<span class="sheet-table-cell sheet-left">
						<label>
							<span data-i18n="whisper-non-player-character-rolls" >NPC rolls:</span>
							<select name="attr_NPC-whisper" title="@{NPC-whisper}" style="display:inline;">
								<option value="&nbsp;" data-i18n="public-rolls">Public Rolls</option>
								<option value="/w gm" data-i18n="whisper-to-game-master" selected>Whisper GM</option>
							</select>
						</label>
						<label>
							<span  data-i18n="whisper-character-rolls" >PC rolls:</span>
							<select name="attr_PC-whisper" title="@{PC-whisper}" style="display:inline;">
								<option value="&nbsp;" data-i18n="public-rolls" selected>Public Rolls</option>
								<option value="/w gm" data-i18n="whisper-to-game-master">Whisper GM</option>
							</select>
						</label>
					</span>
					<span class="sheet-table-cell sheet-left">
						<label>
							<input type="checkbox" title="@{both_whisper_show}" name="attr_both_whisper_show" value="1" class="sheet-selectedlabel-check" />
							<b><span data-i18n-title="display-both-whispers-title" data-i18n-aria-label="display-both-whispers-title" aria-label="display-advanced-macros-title" data-i18n="display-both-whispers">Show both roll menu buttons for NPCs</span></b>
						</label>
					</span>
				</div>
				<div class="sheet-table-row">
					<span class="sheet-table-config-row-name" style="border-bottom: none;">&nbsp;</span>
					<span class="sheet-table-cell sheet-left">
						<label>
							<span data-i18n-title="statistics-rolls-title" data-i18n="statistics-rolls-abbrv" >Stats rolls:</span>
							<select name="attr_STATS-whisper" title="@{STATS-whisper}" style="display:inline;">
								<option value="&nbsp;" data-i18n="public-rolls">Public Rolls</option>
								<option value="/w gm" data-i18n="whisper-to-game-master" selected>Whisper GM</option>
							</select>
						</label>
					</span>
					<span class="sheet-table-cell sheet-left">
						<label style="width:98%;">
						
							<input  type="hidden" name="attr_CHAR-whisper"  value="/w &quot;@{character_name}&quot;" />
						</label>
					</span>
				</div>
				<div class="sheet-table-row">
					<span class="sheet-table-config-row-name">&nbsp;</span>
					<span class="sheet-table-cell sheet-left">
						<label>
						<input type="hidden" name="attr_var_rounded_flag" value="{{rounded=rounded}}" />						
							<input type="checkbox" name="attr_toggle_rounded_flag" value="@{var_rounded_flag}" title="@{toggle_rounded_flag}" class="sheet-selectedlabel-check" checked /><b>
							<span data-i18n="use-round-corners-on-simple-templates">Round Corners on non simple template.</span>
							</b>
						</label>
					</span>					
					<span class="sheet-table-cell sheet-left">
						<label>
							<span data-i18n="heading-border-colors">Heading background and outlines:</span>
							<select title="@{rolltemplate_color}" name="attr_rolltemplate_color" style="width:8em;display:inline-block;">
								<option value="" data-i18n="black-default" selected>&#8226;Black</option>
								<option value="white" data-i18n="white">White</option>
								<option value="grey" data-i18n="grey">Grey</option>
								<option value="darkgrey" data-i18n="dark-grey">DarkGrey</option>
								<option value="pink" data-i18n="pink">Pink</option>
								<option value="darkpink" data-i18n="dark-pink">DarkPink</option>
								<option value="red" data-i18n="red">Red</option>
								<option value="darkred" data-i18n="dark-red">DarkRed</option>
								<option value="orange" data-i18n="orange">Orange</option>
								<option value="darkorange" data-i18n="dark-orange">DarkOrange</option>
								<option value="yellow" data-i18n="yellow">Yellow</option>
								<option value="darkyellow" data-i18n="dark-yellow">DarkYellow</option>
								<option value="green" data-i18n="green">Green</option>
								<option value="darkgreen" data-i18n="dark-green">DarkGreen</option>
								<option value="teal" data-i18n="teal">Teal</option>
								<option value="darkteal" data-i18n="dark-teal">DarkTeal</option>
								<option value="cyan" data-i18n="cyan">Cyan</option>
								<option value="darkcyan" data-i18n="dark-cyan">DarkCyan</option>
								<option value="azure" data-i18n="azure">Azure</option>
								<option value="darkazure" data-i18n="dark-azure">DarkAzure</option>
								<option value="blue" data-i18n="blue">Blue</option>
								<option value="darkblue" data-i18n="dark-blue">DarkBlue</option>
								<option value="purple" data-i18n="purple">Purple</option>
								<option value="darkpurple" data-i18n="dark-purple">DarkPurple</option>
								<option value="violet" data-i18n="violet">Violet</option>
								<option value="darkviolet" data-i18n="dark-violet">DarkViolet</option>
							</select>
						</label>
					</span>					
				</div>
			</div>			
		</div>
		<div class="sheet-cheat"></div>
		<input class="sheet-showarrow sheet-h2arrow" type="checkbox" name="attr_core_pfs_show" data-i18n-aria-label="core-pfs-rules" aria-label="Core and PFS Rule Options" title="Click to expand" data-i18n-title="showsect-cmd" value="1" checked />
		<h2 class="sheet-clickheader sheet-showsect"><label title="Click to expand" data-i18n-title="showsect-cmd" data-i18n-aria-label="showsect-cmd" data-i18n="rule-options">Rule Options</label></h2>
		<div class="sheet-h2-section sheet-rule-options">
			<span class="sheet-nontable-name sheet-show-readonly" data-i18n="rule-options">Rule Options</span>
			<div class="sheet-corerules sheet-table">
				<div class="sheet-table-row">
					<span class="sheet-table-config-row-name" data-i18n="core-rules" >Core Options</span>
					<span class="sheet-table-cell sheet-left">
						<label>
							<input type="checkbox" title="@{set_pfs}" name="attr_set_pfs" value="1" class="sheet-selectedlabel-check" /><b><span data-i18n="enable-pfs">Enable PFS config settings</span></b>
						</label>
					</span>
					<span class="sheet-table-cell sheet-left">
						<label>
							<span>
								<input type="checkbox" title="@{use_prestige_fame}" name="attr_use_prestige_fame" value="1" class="sheet-selectedlabel-check" /><b><span data-i18n="use-prestige-fame">Use Prestige and Fame Points</span></b>
							</span>
						</label>
					</span>
					<span class="sheet-table-cell sheet-left">
						<label>
							<span>
								<input type="checkbox" title="@{use_hero_points}" name="attr_use_hero_points" value="1" class="sheet-selectedlabel-check" /><b><span data-i18n="use-hero-points">Use Hero Points</span></b>
							</span>
						</label>
					</span>
				</div>
			</div>
			<div class="sheet-corerules sheet-table">
				<div class="sheet-table-row">
					<span class="sheet-table-config-row-name" data-i18n="pathfinder-unchained" style="border-bottom:none;">Pathfinder Unchained</span>
					<span class="sheet-table-cell sheet-left">
						<label>
							<span title="Use the Unchained Skills variants.">
								<input type="checkbox" title="@{unchained_skills-show}" name="attr_unchained_skills-show" value="1" class="sheet-selectedlabel-check" /><b><span data-i18n="toggle-unchained-skills"> Display/Enable Unchained Skills</span></b>
							</span>
						</label>
					</span>
					<span class="sheet-table-cell sheet-left">
						<input type="checkbox" class="sheet-sect2-show sheet-noshow" name="attr_unchained_skills-show" value="1" role="presentation" />
						<label class="sheet-sect2">
							<span title="Background skills ranks are awarded at a rate of two per level and can be spent on any background skill.">
								<input type="radio" title="@{BG-Skill-Use}" name="attr_BG-Skill-Use" value="1" class="sheet-selectedlabel-check" checked /><b><span data-i18n="background-skills"> Background Skills</span></b>
							</span>
						</label>
					</span>
					<span class="sheet-table-cell sheet-left">
						<input type="checkbox" class="sheet-sect2-show sheet-noshow" name="attr_unchained_skills-show" value="1" role="presentation" />
						<label class="sheet-sect2">
							<span title="Consolidated skills ranks are awarded at 1/2 normal skill points.">
								<input type="radio" title="@{BG-Skill-Use}" name="attr_BG-Skill-Use" value="0" class="sheet-selectedlabel-check" /><b><span data-i18n="toggle-consolidated-skills">Consolidated Skills.</span></b>
							</span>
						</label>
					</span>
				</div>
				<div class="sheet-table-row">
					<span class="sheet-table-config-row-name">&nbsp;</span>
					<span class="sheet-table-cell sheet-left">
						<label>
							<span title="In the wound thresholds variant, a character divides her hit point total into four quarters, and takes penalties whenever she's not in her top quarter.">
								<input type="checkbox" title="@{wound_threshold-show}" name="attr_wound_threshold-show" value="1" class="sheet-selectedlabel-check" /><b><span data-i18n="toggle-wound-threshold">Display Wound Thresholds.</span></b>
							</span>
						</label>
					</span>
					<span class="sheet-table-cell sheet-left">
						<input type="checkbox" class="sheet-nextitem-show sheet-noshow sheet-selectedlabel-check" name="attr_wound_threshold-show" value="1" />
						<label class="sheet-endurance-feat">
							<span title="Endurance affects wounds by changing the penalty.">
								<input type="checkbox" title="@{has_endurance_feat}" name="attr_has_endurance_feat" value="1" class="sheet-selectedlabel-check" /><b><span data-i18n="toggle-endurance-feat">Has Endurance Feat</span></b>
							</span>
						</label>
					</span>
					<span class="sheet-table-cell sheet-left">
						<input type="checkbox" class="sheet-nextitem-show sheet-noshow sheet-selectedlabel-check" name="attr_wound_threshold-show" value="1" />
						<label class="sheet-gritty-mode">
							<span title="Gritty mode doubles penalties.">
								<input type="checkbox" title="@{wounds_gritty_mode}" name="attr_wounds_gritty_mode" value="1" class="sheet-selectedlabel-check" /><b><span data-i18n="toggle-gritty-mode">Gritty Mode</span></b>
							</span>
						</label>
					</span>
				</div>
			</div>
			<div class="sheet-corerules sheet-onecolumn sheet-table">
				<div class="sheet-table-row">
					<span class="sheet-table-config-row-name" data-i18n="pathfinder-mythic-adventures">Pathfinder Mythic Adventures</span>
					<span class="sheet-table-cell sheet-left">
						<label>
							<input type="checkbox" title="@{mythic-adventures-show}" name="attr_mythic-adventures-show" value="1" class="sheet-selectedlabel-check" /><b><span data-i18n="toggle-mythic-adventures">Display/Enable Mythic Adventures Character Sheet Items</span></b>
						</label>
					</span>
				</div>
				<div class="sheet-table-row">
					<span class="sheet-table-config-row-name" data-i18n="pathfinder-psionics">Pathfinder Psionics</span>
					<span class="sheet-table-cell sheet-left">
						<label>
							<span title="Use Psionics.">
								<input type="checkbox" title="@{psionics-show}" name="attr_psionics-show" value="1" class="sheet-selectedlabel-check" /><b><span data-i18n="toggle-psionics">Display/Enable Psionics Character Sheet Items</span></b>
							</span>
						</label>
					</span>
				</div>				
			</div>
		</div>
		<div class="sheet-cheat"></div>
		<input class="sheet-showarrow sheet-h2arrow" type="checkbox" name="attr_header-image-show" data-i18n-aria-label="header-image" title="Click to expand" data-i18n-title="showsect-cmd" value="1" checked />
		<h2 class="sheet-clickheader sheet-showsect"><label title="Click to expand" data-i18n-title="showsect-cmd" data-i18n-aria-label="showsect-cmd" data-i18n="header-image">Header Image</label></h2>
		<div class="sheet-h2-section sheet-header-images sheet-table">
			<span class="sheet-table-name sheet-show-readonly" data-i18n="header-image">Header Images</span>
			<span style="display:table-caption;" data-i18n="config-header-image-info">Header images are iconic images that appear in the header of roll templates. All macros on the sheet include <b>{{header_image=<i>image attriubute</i>}}</b>. Each roll template has a specific image attribute that works with the options below. i.e. The Spells roll template would use <b>{{header_image=@{header_image-pf_spell}}}</b> Attack images can be set from within each weapon's "Options" section. Hover over the template names below to learn the specific image attributes. You can substitute images for any roll template by using the URL column below or using the syntax <b>{{header_image=<i>[name](url)</i>}}</b> For best results, try to keep header images under 32x32px.</span>
			<div class="sheet-table-row">
				<span class="sheet-table-header" style="min-width:100px;" data-i18n="roll-template">Roll Template</span>
				<span class="sheet-table-header"></span>
				<span class="sheet-table-header" title="Do not include a header image." data-i18n-title="header-image-none" data-i18n-aria-title="header-image-none" data-i18n="none">None</span>
				<span class="sheet-table-header" style="width:10%;"></span>
				<span class="sheet-table-header" style="width:3%;"></span>
				<span class="sheet-table-header" style="width:5%;"><span title="Include the default header image." data-i18n-title="header-image-default" data-i18n-aria-title="header-image-default" data-i18n="default">Default</span></span>
				<span class="sheet-table-header" style="width:5%;"></span>
				<span class="sheet-table-header">
					  <span title="Include a custom header image using the provided URL." data-i18n-title="custom-url-title" data-i18n-aria-title="custom-url-title" data-i18n="custom-url">Custom URL</span>
				</span>
			</div>
			<div class="sheet-table-row">
				<span class="sheet-table-cell" title="Macros must include {{header_image=@{header_image-pf_spell}}}">pf_spell</span>
				<span class="sheet-divider"></span>
				<span class="sheet-table-cell"><input type="radio" name="attr_header_image-pf_spell" value="" title="@{header_image-pf_spell}" checked /></span>
				<span class="sheet-divider"></span>
				<span class="sheet-table-cell"><input type="radio" name="attr_header_image-pf_spell" value="[default](http://imgur.com/9yjOsAD.png)" title="@{header_image-pf_spell}" /></span>
				<span class="sheet-table-cell sheet-nontable-name"><img src="http://imgur.com/9yjOsAD.png" style="padding-top:.125em;"></span>
				<span class="sheet-divider"></span>				
				<span class="sheet-table-cell"><input type="radio" name="attr_header_image-pf_spell" value="[custom](@{header_image-pf_spell-url})" title="@{header_image-pf_spell}" /><textarea class="sheet-inline-textarea" style="width:80%; margin-left:.5em;" name="attr_header_image-pf_spell-url" title="@{header_image-pf_spell-url}">http://imgur.com/9yjOsAD.png</textarea></span>
			</div>
			<div class="sheet-table-row">
				<span class="sheet-table-cell" title="Macros must include {{header_image=@{header_image-pf_attack-melee}}}">pf_attack (melee)</span>
				<span class="sheet-divider"></span>
				<span class="sheet-table-cell"><input type="radio" name="attr_header_image-pf_attack-melee" value="" title="@{header_image-pf_attack-melee}" checked /></span>
				<span class="sheet-divider"></span>
				<span class="sheet-table-cell"><input type="radio" name="attr_header_image-pf_attack-melee" value="[default](http://i.imgur.com/AGq5VBG.png)" title="@{header_image-pf_attack}" /></span>
				<span class="sheet-table-cell sheet-nontable-name"><img src="http://i.imgur.com/AGq5VBG.png"></span>
				<span class="sheet-divider"></span>				
				<span class="sheet-table-cell"><input type="radio" name="attr_header_image-pf_attack-melee" value="[custom](@{header_image-pf_attack-melee-url})" title="@{header_image-pf_attack}" /><textarea class="sheet-inline-textarea" style="width:80%; margin-left:.5em;" name="attr_header_image-pf_attack-melee-url" title="@{header_image-pf_attack-melee-url}">http://i.imgur.com/AGq5VBG.png</textarea></span>
			</div>
			<div class="sheet-table-row">
				<span class="sheet-table-cell" title="Macros must include {{header_image=@{header_image-pf_attack-ranged}}}">pf_attack (ranged)</span>
				<span class="sheet-divider"></span>
				<span class="sheet-table-cell"><input type="radio" name="attr_header_image-pf_attack-ranged" value="" title="@{header_image-pf_attack-ranged}" checked /></span>
				<span class="sheet-divider"></span>
				<span class="sheet-table-cell"><input type="radio" name="attr_header_image-pf_attack-ranged" value="[default](http://imgur.com/58j2e8P.png)" title="@{header_image-pf_attack}" /></span>
				<span class="sheet-table-cell sheet-nontable-name"><img src="http://imgur.com/58j2e8P.png"></span>
				<span class="sheet-divider"></span>				
				<span class="sheet-table-cell"><input type="radio" name="attr_header_image-pf_attack-ranged" value="[custom](@{header_image-pf_attack-ranged-url})" title="@{header_image-pf_attack}" /><textarea class="sheet-inline-textarea" style="width:80%; margin-left:.5em;" name="attr_header_image-pf_attack-ranged-url" title="@{header_image-pf_attack-ranged-url}">http://imgur.com/58j2e8P.png</textarea></span>
			</div>
			<div class="sheet-table-row">
				<span class="sheet-table-cell" title="Macros must include {{header_image=@{header_image-pf_attack-cmb}}}">pf_attack (cmb)</span>
				<span class="sheet-divider"></span>
				<span class="sheet-table-cell"><input type="radio" name="attr_header_image-pf_attack-cmb" value="" title="@{header_image-pf_attack-cmb}" checked /></span>
				<span class="sheet-divider"></span>
				<span class="sheet-table-cell"><input type="radio" name="attr_header_image-pf_attack-cmb" value="[default](http://i.imgur.com/Si4vfts.png)" title="@{header_image-pf_attack}" /></span>
				<span class="sheet-table-cell sheet-nontable-name"><img src="http://i.imgur.com/Si4vfts.png"></span>
				<span class="sheet-divider"></span>				
				<span class="sheet-table-cell"><input type="radio" name="attr_header_image-pf_attack-cmb" value="[custom](@{header_image-pf_attack-cmb-url})" title="@{header_image-pf_attack}" /><textarea class="sheet-inline-textarea" style="width:80%; margin-left:.5em;" name="attr_header_image-pf_attack-cmb-url" title="@{header_image-pf_attack-cmb-url}">http://i.imgur.com/Si4vfts.png</textarea></span>
			</div>
			<div class="sheet-table-row">
				<span class="sheet-table-cell" title="Macros must include {{header_image=@{header_image-pf_defense}}}">pf_defense</span>
				<span class="sheet-divider"></span>
				<span class="sheet-table-cell"><input type="radio" name="attr_header_image-pf_defense" value="" title="@{header_image-pf_defense}" checked /></span>
				<span class="sheet-divider"></span>
				<span class="sheet-table-cell"><input type="radio" name="attr_header_image-pf_defense" value="[default](http://imgur.com/02fV6wh.png)" title="@{header_image-pf_defense}" /></span>
				<span class="sheet-table-cell sheet-nontable-name"><img src="http://imgur.com/02fV6wh.png"></span>
				<span class="sheet-divider"></span>				
				<span class="sheet-table-cell"><input type="radio" name="attr_header_image-pf_defense" value="[custom](@{header_image-pf_defense-url})" title="@{header_image-pf_defense}" /><textarea class="sheet-inline-textarea" style="width:80%; margin-left:.5em;" name="attr_header_image-pf_defense-url" title="@{header_image-pf_defense-url}">http://imgur.com/02fV6wh.png</textarea></span>
			</div>
			<div class="sheet-table-row">
				<span class="sheet-table-cell" title="Macros must include {{header_image=@{header_image-pf_generic}}}">pf_generic</span>
				<span class="sheet-divider"></span>
				<span class="sheet-table-cell"><input type="radio" name="attr_header_image-pf_generic" value="" title="@{header_image-pf_generic}" checked /></span>
				<span class="sheet-divider"></span>
				<span class="sheet-table-cell"><input type="radio" name="attr_header_image-pf_generic" value="[default](http://imgur.com/phw1eFB.png)" title="@{header_image-pf_generic}" /></span>
				<span class="sheet-table-cell sheet-nontable-name"><img src="http://imgur.com/phw1eFB.png"></span>
				<span class="sheet-divider"></span>				
				<span class="sheet-table-cell"><input type="radio" name="attr_header_image-pf_generic" value="[custom](@{header_image-pf_generic-url})" title="@{header_image-pf_generic}" /><textarea class="sheet-inline-textarea" style="width:80%; margin-left:.5em;" name="attr_header_image-pf_generic-url" title="@{header_image-pf_generic-url}">http://imgur.com/phw1eFB.png</textarea></span>
			</div>
			<div class="sheet-table-row">
				<span class="sheet-table-cell" title="Macros must include {{header_image=@{header_image-pf_ability}}}">pf_ability</span>
				<span class="sheet-divider"></span>
				<span class="sheet-table-cell"><input type="radio" name="attr_header_image-pf_ability" value="" title="@{header_image-pf_ability}" checked /></span>
				<span class="sheet-divider"></span>
				<span class="sheet-table-cell"><input type="radio" name="attr_header_image-pf_ability" value="[default](http://i.imgur.com/UxYSva8.png)" title="@{header_image-pf_ability}" /></span>
				<span class="sheet-table-cell sheet-nontable-name"><img src="http://i.imgur.com/UxYSva8.png"></span>
				<span class="sheet-divider"></span>				
				<span class="sheet-table-cell"><input type="radio" name="attr_header_image-pf_ability" value="[custom](@{header_image-pf_ability-url})" title="@{header_image-pf_ability}" /><textarea class="sheet-inline-textarea" style="width:80%; margin-left:.5em;" name="attr_header_image-pf_ability-url" title="@{header_image-pf_ability-url}">http://i.imgur.com/UxYSva8.png</textarea></span>
			</div>
			<div class="sheet-table-row">
				<span class="sheet-table-cell" title="Macros must include {{header_image=@{header_image-pf_block}}}">pf_block</span>
				<span class="sheet-divider"></span>
				<span class="sheet-table-cell"><input type="radio" name="attr_header_image-pf_block" value="" title="@{header_image-pf_block}" checked /></span>
				<span class="sheet-divider"></span>
				<span class="sheet-table-cell"><input type="radio" name="attr_header_image-pf_block" value="[default](http://imgur.com/nBnv4DL.png)" title="@{header_image-pf_block}" /></span>
				<span class="sheet-table-cell sheet-nontable-name"><img src="http://imgur.com/nBnv4DL.png"></span>
				<span class="sheet-divider"></span>				
				<span class="sheet-table-cell"><input type="radio" name="attr_header_image-pf_block" value="[custom](@{header_image-pf_block-url})" title="@{header_image-pf_block}" /><textarea class="sheet-inline-textarea" style="width:80%; margin-left:.5em;" name="attr_header_image-pf_block-url" title="@{header_image-pf_block-url}">http://imgur.com/nBnv4DL.png</textarea></span>
			</div>
			<div class="sheet-table-row">
				<span class="sheet-table-cell" title="Macros must include {{header_image=@{header_image-pf_generic-skill}}}">pf_generic (skill)</span>
				<span class="sheet-divider"></span>
				<span class="sheet-table-cell"><input type="radio" name="attr_header_image-pf_generic-skill" value="" title="@{header_image-pf_generic-skill}" checked /></span>
				<span class="sheet-divider"></span>
				<span class="sheet-table-cell"><input type="radio" name="attr_header_image-pf_generic-skill" value="[default](http://imgur.com/8dCkRtG.png)" title="@{header_image-pf_generic-skill}" /></span>
				<span class="sheet-table-cell sheet-nontable-name"><img src="http://imgur.com/8dCkRtG.png"></span>
				<span class="sheet-divider"></span>				
				<span class="sheet-table-cell"><input type="radio" name="attr_header_image-pf_generic-skill" value="[custom](@{header_image-pf_generic-skill-url})" title="@{header_image-pf_generic-skill}" /><textarea class="sheet-inline-textarea" style="width:80%; margin-left:.5em;" name="attr_header_image-pf_generic-skill-url" title="@{header_image-pf_generic-skill-url}">http://imgur.com/8dCkRtG.png</textarea></span>
			</div>
			<div class="sheet-table-row">
				<span class="sheet-table-cell" title="Macros must include {{header_image=@{header_image-pf_generic-init}}}">pf_generic (initiative)</span>
				<span class="sheet-divider"></span>
				<span class="sheet-table-cell"><input type="radio" name="attr_header_image-pf_generic-init" value="" title="@{header_image-pf_generic-init}" checked /></span>
				<span class="sheet-divider"></span>
				<span class="sheet-table-cell"><input type="radio" name="attr_header_image-pf_generic-init" value="[default](http://i.imgur.com/pjS6HVJ.png)" title="@{header_image-pf_generic-init}" /></span>
				<span class="sheet-table-cell sheet-nontable-name"><img src="http://i.imgur.com/pjS6HVJ.png"></span>
				<span class="sheet-divider"></span>				
				<span class="sheet-table-cell"><input type="radio" name="attr_header_image-pf_generic-init" value="[custom](@{header_image-pf_generic-init-url})" title="@{header_image-pf_generic-init}" /><textarea class="sheet-inline-textarea" style="width:80%; margin-left:.5em;" name="attr_header_image-pf_generic-init-url" title="@{header_image-pf_generic-init-url}">http://i.imgur.com/pjS6HVJ.png</textarea></span>
			</div>
			<div class="sheet-table-row">
				<span class="sheet-table-cell" title="Macros must include {{header_image=@{header_image-pf_block-item}}}">pf_block (item)</span>
				<span class="sheet-divider"></span>
				<span class="sheet-table-cell"><input type="radio" name="attr_header_image-pf_block-item" value="" title="@{header_image-pf_block-item}" checked /></span>
				<span class="sheet-divider"></span>
				<span class="sheet-table-cell"><input type="radio" name="attr_header_image-pf_block-item" value="[default](http://i.imgur.com/4FgQuqS.png)" title="@{header_image-pf_block-item}" /></span>
				<span class="sheet-table-cell sheet-nontable-name"><img src="http://i.imgur.com/4FgQuqS.png"></span>
				<span class="sheet-divider"></span>				
				<span class="sheet-table-cell"><input type="radio" name="attr_header_image-pf_block-item" value="[custom](@{header_image-pf_block-item-url})" title="@{header_image-pf_block-item}" /><textarea class="sheet-inline-textarea" style="width:80%; margin-left:.5em;" name="attr_header_image-pf_block-item-url" title="@{header_image-pf_block-item-url}">http://i.imgur.com/4FgQuqS.png</textarea></span>
			</div>
			<div class="sheet-table-row">
				<span class="sheet-table-cell" title="Macros must include {{header_image=@{header_image-pf_block-check}}}">pf_block (ability check)</span>
				<span class="sheet-divider"></span>
				<span class="sheet-table-cell"><input type="radio" name="attr_header_image-pf_block-check" value="" title="@{header_image-pf_block-check}" checked /></span>
				<span class="sheet-divider"></span>
				<span class="sheet-table-cell"><input type="radio" name="attr_header_image-pf_block-check" value="[default](http://i.imgur.com/a6O3ZGB.png)" title="@{header_image-pf_block-check}" /></span>
				<span class="sheet-table-cell sheet-nontable-name"><img src="http://i.imgur.com/a6O3ZGB.png"></span>
				<span class="sheet-divider"></span>				
				<span class="sheet-table-cell"><input type="radio" name="attr_header_image-pf_block-check" value="[custom](@{header_image-pf_block-check-url})" title="@{header_image-pf_block-check}" /><textarea class="sheet-inline-textarea" style="width:80%; margin-left:.5em;" name="attr_header_image-pf_block-check-url" title="@{header_image-pf_block-check-url}">http://i.imgur.com/a6O3ZGB.png</textarea></span>
			</div>
		</div>
		<div class="sheet-cheat"></div>
		<input class="sheet-showarrow sheet-h2arrow" type="checkbox" name="attr_sheet-import-show" data-i18n-aria-label="character-import" title="Click to expand" data-i18n-title="showsect-cmd" value="1" />
		<h2 class="sheet-clickheader sheet-showsect"><label title="Click to expand" data-i18n-title="showsect-cmd" data-i18n="character-import">HeroLab Character Import</label></h2>
		<div class="sheet-h2-section sheet-import sheet-table">
			<span class="sheet-table-name" data-i18n="character-import">HeroLab Character Import</span>
			<div class="sheet-table sheet-config-table">
				<span class="sheet-table-row">
					<span class="sheet-table-data sheet-left" style="vertical-align:top;">
						<span data-i18n="character-import-desc">
							<strong>Hero Lab XML Import </strong><br/>Used to import characters from Hero Lab via XML files.<br/>
							<strong>Step 1:</strong> Save the character as an XML file in Hero Lab (File -> Save Custom Output).<br/>
							<strong>Step 2:</strong> Use Code Beautify's XML to JSON converter (link below) to convert the contents of the XML file to JSON (paste contents of XML file from a text editor into the text area labelled "Xml Input", set "Result mode" to text, click "XML to JSON", then copy the text from the text area on the right).<br/>
							<strong>Step 3:</strong> Paste the JSON into the text field below these instructions.<br/><strong>Step 4:</strong> Profit!<br/>Code Beautify: 
						</span>
					</span>
					<input type="text" style="width:75%; border:none; cursor:help; height:1.4em;" value="http://codebeautify.org/xmltojson" />
					<span class="sheet-table-data" style="width:50%;">
						<textarea class="sheet-both" name="attr_herolab_import" title="Hero Lab import"></textarea><br>
					</span>
				</span>
			</div>
		</div>

		<div class="sheet-cheat"></div>
		<input class="sheet-showarrow sheet-h2arrow" type="checkbox" name="attr_roll-template-info-show" data-i18n-aria-label="roll-template-info" title="Click to expand" data-i18n-title="showsect-cmd" value="1"  />
		<h2 class="sheet-clickheader sheet-showsect"><label title="Click to expand" data-i18n-title="showsect-cmd" data-i18n-aria-label="showsect-cmd" data-i18n="roll-template-info">Roll Template Information</label></h2>
		<div class="sheet-h2-section sheet-roll_template_info">
			<div class="sheet-table sheet-options sheet-named" style="margin-top:.5em; background-color:#FFFFFF;">
				<span class="sheet-table-name sheet-show-readonly" data-i18n="roll-template-info">Roll Template Info</span>
				<span class="sheet-table-row">
					<span class="sheet-table-cell" style="padding: 20px; margin-top:5px;">
						<span data-i18n="config-roll-template-info1">Roll templates use a combination of predetermined HTML, CSS, and macro-text to format the output of macros.  Roll templates included in the Pathfinder sheet: <b>pf_spell, pf_attack, pf_defense, pf_generic, and pf_block</b></span><br><br>
						<span style="display:block; text-align:center;" data-i18n="config-roll-template-info2"><b>Macro roll template syntax: </b>&{template:<b>roll template name</b>} {{<b>key</b>=<b>value</b>}}</span><br>
						<span data-i18n="config-roll-template-info5">Use this syntax to customize output of rolls in the &quot;macro-text&quot; fields found on the sheet.</span>
						<span data-i18n="config-roll-template-info3">Below is a list of each roll template along with it's defined properties(keys). Keys can only be used once within a macro. A key that is not defined may still be included in the macro and will be displayed on a new row as determined by the roll template. i.e. {{foo=foo}} Property values may consist of text, attributes, in-line rolls, images, hyperlinks, etc., or any combination of such values.</span><br>
						<span data-i18n="config-roll-template-info4">Each has a @{toggle_accessible_flag} , this makes the following string appear or not: {{accessible=true}}. If accessible is set, then an alternate rolltemplate is used that does not uses divs or tables but only labels and spans, which some users may find easier to use. This can also be set globally by checking "use simple templates"</span>
					</span>
				</span>
			</div>
			<hr>
			<div class="sheet-table sheet-options" style="margin-top:.5em;">
				<span class="sheet-table-row">
					<span class="sheet-table-cell" style="vertical-align:top;">
						<button type="roll" value="@{pf_spell_example}" name="roll_pf_spell_example" title="Display pf_spell example"></button>
						<span data-i18n="config-roll-template-pf_spell">
							<b data-i18n="spell-roll-template">Spell Roll Template </b>(pf_spell)<br>Used for all spell-based sheet rolls. Primarily formatted to emulate a typical spell stat-block. (<b>note:</b> @{spell_options} is used by the sheet to enable the toggling of spell attributes and contains ALL pf_spell specific properties.)
						</span>
					</span><br>
					<span class="sheet-table-cell" style="width:50%;">
						<textarea name="attr_pf_spell_example" class="sheet-inline-textarea" title="pf_spell macro" style="height:100%;">@{PC-whisper} &{template:pf_spell} @{toggle_spell_accessible} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_spell}}} {{name=pf_spell}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle=subtitle}} {{deafened_note=@{SpellFailureNote}}} {{school=school}} {{spellclass=spellclass}} {{level=10}} {{casting_time=casting time}} {{components=components}} {{saving_throw=saving_throw}} {{dc= 10}} {{close=range_pick}} {{range=25}} {{rangetext=rangetext}} {{targets=targets}} {{duration=duration}} {{sr=sr}} {{casterlevel= 10}} {{casterlevel_chk= [[ 1d20 ]]}} {{spellPen= 10}} {{Concentration= 10}} {{Concentration_chk=[[ 1d20 ]]}} {{cast_def= 10}} {{cast_defDC= 10}} {{=just some text}} {{description=descriptive text will span both columns and wrap as needed.}} {{foo=foo}} {{attack=[[ 1d20cs>10 ]]}} {{crit_confirm=[[ 1d20 ]]}} {{damage=[[ 1d6 ]]}} {{crit_damage=[[ 1d6 ]]}} {{attack2=[[ 1d20cs>10 ]]}} {{crit_confirm2=[[ 1d20 ]]}} {{damage2=[[ 1d6 ]]}} {{crit_damage2=[[ 1d6 ]]}}</textarea><br>
					</span>
				</span>
			</div>
			<hr>
			<div class="sheet-table sheet-options">
				<span class="sheet-table-row">
					<span class="sheet-table-cell" style="vertical-align:top;">
						<button type="roll" value="@{pf_attack_example}" name="roll_pf_attack_example" title="Display pf_attack example"></button>
						<span data-i18n="config-roll-template-pf_attack">
							<b data-i18n="attack-roll-template">Attack Roll Template </b>(pf_attack)<br>Used for attacks. 2 column format except for the "description" property. (<b>note:</b> @{macro_options} is used by the sheet to enable the toggling of notes related to attacks and contains the properties for @{melee_notes}, @{ranged_notes}, @{cmb_notes}, and @{attack_notes}.)
						</span>
					</span><br>
					<span class="sheet-table-cell" style="width:50%;">
						<textarea name="attr_pf_attack_example" class="sheet-inline-textarea" title="pf_attack macro" style="height:100%;">@{PC-whisper} &{template:pf_attack} @{toggle_attack_accessible} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_attack-melee} @{header_image-pf_attack-ranged} @{header_image-pf_attack-cmb}}} {{name=pf_attack}} {{name_link=www.url.com}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle=subtitle}} {{attack=[[ 1d20cs>10 ]]}} {{damage=[[ 1d6 ]]}} {{crit_confirm=[[ 1d20 ]]}} {{crit_damage=[[ 1d6 ]]}} {{precision_dmg1= [[ 0 ]]}} {{precision_dmg1_type=Precision Dmg local}} {{precision_dmg2=[[ 0 ]]}} {{precision_dmg2_type=Precision Dmg global}} {{critical_dmg1=[[ 0 ]]}} {{critical_dmg1_type=Added Crit Dmg local}} {{critical_dmg2=[[ 0 ]]}} {{critical_dmg2_type=Added Crit Dmg global}} {{type=B}} {{melee_notes=melee notes}} {{ranged_notes=ranged notes}} {{CMB_notes=cmb notes}} {{attack_notes=attack notes}} {{weapon_notes=weapon_notes}} {{=just some text}} {{description=descriptive text will span both columns and wrap as needed.}} {{foo=foo}} {{attack2= [[ 1d20cs>10 ]]}} {{damage2=[[ 1d6 ]]}} {{crit_confirm2=[[ 1d20cs>10 ]]}} {{crit_damage2=[[ 1d6 ]]}} {{precision_dmg21= [[ 0 ]]}} {{precision_dmg1_type=Precision Dmg local}} {{precision_dmg22=[[ 0 ]]}} {{precision_dmg2_type=Precision Dmg global}} {{critical_dmg21=[[ 0 ]]}} {{critical_dmg1_type=Added Crit Dmg local}} {{critical_dmg22=[[ 0 ]]}} {{critical_dmg2_type=Added Crit Dmg global}}</textarea><br>
					</span>
				</span>
			</div>
			<hr>
			<div class="sheet-table sheet-options">
				<span class="sheet-table-row">
					<span class="sheet-table-cell" style="vertical-align:top;">
						<button type="roll" value="@{pf_defense_example}" name="roll_pf_defense_example" title="Display pf_defense example"></button>
						<span data-i18n="config-roll-template-pf_defense">
							<b data-i18n="defense-roll-template">Defense Roll Template </b>(pf_defense)<br>Used for Saving Throws. (<b>note:</b> @{macro_options} is used by the sheet to enable the toggling of notes related to defense and contains the properties for @{dr_notes}, @{resistances_notes}, @{immunities_notes}, @{weaknesses_notes}, @{sr_notes}, @{armor_notes}, @{save_notes}, @{cmd_notes}, and @{defense-notes}.)
						</span>
					</span><br>
					<span class="sheet-table-cell" style="width:50%;">
						<textarea name="attr_pf_defense_example" class="sheet-inline-textarea" title="pf_defense macro" style="height:100%;">@{PC-whisper} &{template:pf_defense} @{toggle_accessible_flag} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_defense}}} {{name=pf_defense}} {{name_link=www.url.com}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle=subtitle}} {{check=[[ 1d20 ]]}} {{dr_notes=dr_notes}} {{resistances_notes=resistance_notes}} {{immunities_notes=immunities_notes}} {{weaknesses_notes=weaknesses_notes}} {{sr0_notes=sr0_notes}} {{armor_notes=armor_notes}} {{save_notes=save_notes}} {{cmd_notes=cmd_notes}} {{defense_notes=defense_notes}} {{=just some text}} {{description=descriptive text will span both columns and wrap as needed.}} {{foo=foo}}</textarea><br>
					</span>
				</span>
			</div>
			<hr>
			<div class="sheet-table sheet-options">
				<span class="sheet-table-row">
					<span class="sheet-table-cell" style="vertical-align:top;">
						<button type="roll" value="@{pf_generic_example}" name="roll_pf_generic_example" title="Display pf_generic example"></button>
						<span data-i18n="config-roll-template-pf_generic">
							<b data-i18n="generic-roll-template">Generic Roll Template </b>(pf_generic)<br>Used for Ability checks, Initiative, Spell Failure Check, Skill Checks, Concentration Check, Caster Level Check. 2 column format, except for righttext_X(1-10), lefttext_X(1-10), and the description keys.
						</span>
					</span><br>
					<span class="sheet-table-cell" style="width:50%;">
						<textarea name="attr_pf_generic_example" class="sheet-inline-textarea" title="pf_generic macro" style="height:100%;">@{PC-whisper} &{template:pf_generic} @{toggle_accessible_flag} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_generic}}} {{name=pf_generic}} {{name_link=www.url.com}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle=subtitle}} {{check=[[ 1d20 ]]}} {{lefttext_1=1st row of left aligned text.}} {{righttext_1=1st row of right aligned text.}} {{lefttext_2=2nd row of left aligned text.}} {{righttext_2=2nd row of right aligned text.}} {{=just some text}} {{description=descriptive text will span both columns and wrap as needed.}} {{foo=foo}}</textarea><br>
					</span>
				</span>
			</div>
			<hr>
			<div class="sheet-table sheet-options">
				<span class="sheet-table-row">
					<span class="sheet-table-cell" style="vertical-align:top;">
						<button type="roll" value="@{pf_ability_example}" name="roll_pf_ability_example" title="Display pf_ability example"></button>
						<span data-i18n="config-roll-template-pf_ability">
							<b data-i18n="ability-roll-template">Ability Roll Template </b>(pf_ability)<br>Used for all Abilities(Class Features, Feats, Traits, etc.). 2 column format except for the "description" property.
						</span>
					</span><br>
					<span class="sheet-table-cell" style="width:50%;">
						<textarea name="attr_pf_ability_example" class="sheet-inline-textarea" title="pf_ability macro" style="height:100%;">@{PC-whisper} &{template:pf_ability} @{toggle_accessible_flag} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_ability}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle=subtitle}} {{name=pf_ability}} {{rule_category=rule_category}} {{source=source}} {{is_sp=flag}} {{hasspellrange=flag}} {{spell_range=close}} {{casterlevel=[[10]]}} {{spell_level=[[10]]}} {{hasposrange=flag}} {{custrange=close}} {{range=[[30]]}} {{save=save}} {{savedc=[[10]]}} {{hassr=flag}} {{sr=Yes}} {{hasfrequency=flag}} {{frequency=Every}} {{next_cast=/day}} {{uses=2}} {{uses_max=3}} {{cust_category=cust-category}} {{concentration=[[3]]}} {{damage=[[ 1d6 ]]}} {{damagetype=Fire}} {{hasattack=flag}} {{attacktype=Touch}} {{targetarea=Single}} {{duration=Instantaneous}} {{shortdesc=short description}} {{=just some text}} {{description=descriptive text will span both columns and wrap as needed.}} {{foo=foo}}</textarea><br>
					</span>
				</span>
			</div>
			<hr>
			<div class="sheet-table sheet-options">
				<span class="sheet-table-row">
					<span class="sheet-table-cell" style="vertical-align:top;">
						<button type="roll" value="@{pf_block_example}" name="roll_pf_block_example" title="Display pf_block example"></button>
						<span data-i18n="config-roll-template-pf_block">
							<b data-i18n="block-roll-template">Block Text Roll Template </b>(pf_block)<br>Used for Inventory. Key/Property names are not shown in this template. Best for long blocks of text.
						</span>
					</span><br>
					<span class="sheet-table-cell" style="width:50%;">
						<textarea name="attr_pf_block_example" class="sheet-inline-textarea" title="pf_block macro" style="height:100%;">@{PC-whisper} &{template:pf_block} @{toggle_accessible_flag} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_block}}} {{name=pf_block}} {{name_link=www.url.com}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle=subtitle}} {{check=[[ 1d20 ]]}} {{=just some text}} {{description=descriptive text will span both columns and wrap as needed.}}</textarea><br>
					</span>
				</span>
			</div>
			<hr>
		</div>

		<div class="sheet-cheat"></div>
		<input class="sheet-showarrow sheet-h2arrow" type="checkbox" name="attr_macros-show" data-i18n-aria-label="macros" title="Click to expand" data-i18n-title="showsect-cmd" value="1" />
		<h2 class="sheet-clickheader sheet-showsect"><label title="Click to expand" data-i18n-title="showsect-cmd" data-i18n-aria-label="showsect-cmd" data-i18n="macros">Macros</label></h2>
		<div class="sheet-h2-section sheet-macro-recalcs">
			<span class="sheet-nontable-name" data-i18n="ensure-macros-uptodate">Ensure macros are up to date.</span>
			<span data-i18n="macro-recalc-instructions">If you are having problems with list or skill macros, uncheck the appropriate box below and hit the recalc button.</span>
			<br>
			<div class="sheet-table">
				<div class="sheet-table-row" >
					<span class="sheet-table-config-row-name" style="width:5em;border-bottom:none;" data-i18n="macros">Macros</span>
					<span class="sheet-table-cell sheet-left"><label><input type="checkbox" name="attr_migrated_skill_macrosv1" title="@{migrated_skill_macrosv1}" value="1" checked /><span data-i18n-title="skill-macros-current" data-i18n="skill-macros-current">Skill macros to current</span></label></span>
					<span class="sheet-table-cell sheet-left"><label><input type="checkbox" name="attr_migrated_attack_macrosv1" title="@{migrated_attack_macrosv1}" value="1" checked/><span data-i18n="attack-macros-current" >Attack macros current</span></label></span>
					<span class="sheet-table-cell sheet-left"><label><input type="checkbox" name="attr_migrated_ability_macrosv112" title="@{migrated_ability_macrosv112}" value="1" checked /><span data-i18n="ability-macros-current" >Ability macros current</span></label></span>
					<span class="sheet-table-cell sheet-left"><label><input type="checkbox" name="attr_migrated_spells_macrosv1" title="@{migrated_spells_macrosv1}" value="1" checked /><span data-i18n-title="spell-macros-current" data-i18n="spell-macros-current">Spell macros to current</span></label></span>
				</div>
				<div class="sheet-table-row" style="background-color:#eeeeee;" >
					<span class="sheet-table-config-row-name"  style="width:5em;border-bottom:none;">&nbsp;</span>
					<span class="sheet-table-cell sheet-left"><label><input type="checkbox" name="attr_migrated_item_macrosv1" title="@{migrated_item_macrosv1}" value="1" checked /><span data-i18n-title="item-macros-current" data-i18n="item-macros-current">Equipment macros to current</span></label></span>
					<span class="sheet-table-cell sheet-left"><label><input type="checkbox" name="attr_migrated_feature_macrosv109" title="@{migrated_feature_macrosv109}" value="1" checked /><span data-i18n="feature-macros-v1" >Original feature macros V1</span></label></span>
					<span class="sheet-table-cell sheet-left">&nbsp;</span>
					<span class="sheet-table-cell sheet-left">&nbsp;</span>
				</div>
			</div>
		</div>
		
		<div class="sheet-cheat"></div>
		<input class="sheet-showarrow sheet-h2arrow" type="checkbox" name="attr_migrations-show" data-i18n-aria-label="migrations" title="Click to expand" data-i18n-title="showsect-cmd" value="1" />
		<h2 class="sheet-clickheader sheet-showsect"><label title="Click to expand" data-i18n-title="showsect-cmd" data-i18n-aria-label="showsect-cmd" data-i18n="migrations">migrations</label></h2>
		<div class="sheet-h2-section sheet-migrations">
			<div class="sheet-table">
				<span class="sheet-table-name" data-i18n-title="do-not-touch" data-i18n-aria-label="do-not-touch"><span data-i18n="migrations-completed">Migrations Completed</span>:&nbsp;<span data-i18n="do-not-touch"></span></span>
				<label><input type="checkbox" class="sheet-selectedlabel-check" name="attr_is_v1" value="1" title="@{is_v1}" /><b data-i18n-aria-label="sheet-created-after-v1" title="Sheet created at version 1.00 or later" data-i18n-title="sheet-created-after-v1" data-i18n="is-v1">Is V1 sheet</b></label>
				<div class="sheet-table sheet-migrations">
					<div class="sheet-table-row" style="background-color:#eeeeee;">
						<span class="sheet-table-config-row-name" data-i18n="pre-v1" style="width:5em;border-bottom:none;">Pre 1.0</span>
						<span class="sheet-table-cell sheet-left"><label><input type="checkbox" name="attr_migrated_buffs" title="@{migrated_buffs}" value="1" checked /><span data-i18n-title="buffs-migrated-title" data-i18n-aria-label="buffs-migrated-title" data-i18n="buffs-migrated">Buffs</span></label></span>
						<span class="sheet-table-cell sheet-left"><label><input type="checkbox" name="attr_migrated_effects" title="@{migrated_effects}" value="1" /><span data-i18n-title="combat-effects-migrated-title" data-i18n-aria-label="combat-effects-migrated-title" data-i18n="combat-effects-migrated">Combat Effects</span></label></span>
						<span class="sheet-table-cell sheet-left"><label><input type="checkbox" name="attr_classSkillsMigrated" title="@{classSkillsMigrated}" value="1" /><span data-i18n-title="class-skills-migrated" data-i18n-aria-label="class-skills-migrated" data-i18n="class-skills-migrated">Class skill checkboxes</span></label></span>
						<span class="sheet-table-cell sheet-left"><label><input type="checkbox" name="attr_migrated_damage-multiplier" title="@{migrated_damage-multiplier}" value="1" /><span data-i18n-title="attacks-dmg-migrated-title" data-i18n-aria-label="attacks-dmg-migrated-title" title="Repeating Attack damage multiplier migrated." data-i18n="attacks-dmg-migrated">Dmg Multiplier</span></label></span>
					</div>
					<div  class="sheet-table-row">
						<span class="sheet-table-config-row-name" >&nbsp;</span>
						<span class="sheet-table-cell sheet-left"><label><input type="checkbox" name="attr_migrated_spells" title="@{migrated_spells}" value="1" checked /><span data-i18n-title="spells-migrated-title" data-i18n-aria-label="spells-migrated-title" data-i18n="spells-migrated">Spells</span></label></span>
						<span class="sheet-table-cell sheet-left"><label><input type="checkbox" name="attr_spellranges_migrated" title="@{spellranges_migrated}" value="1" /><span data-i18n="spellranges-migrated">Spell Ranges</span></label></span>
						<span class="sheet-table-cell sheet-left"></span>
						<span class="sheet-table-cell sheet-left"></span>
					</div>
					<div class="sheet-table-row" style="background-color:#eeeeee;">
						<span class="sheet-table-config-row-name" style="width:5em;border-bottom:none;" data-i18n="post-v1">V 1.0</span>
						<span class="sheet-table-cell sheet-left"><label><input type="checkbox" name="attr_migrated_npc" title="@{migrated_npc}" value="1"/><span data-i18n="npc-migrated">NPC Values Migrated</span></label></span>
						<span class="sheet-table-cell sheet-left"><label><input type="checkbox" name="attr_migrated_experience" title="@{migrated_experience}" value="1" /><span data-i18n-title="experience-migrated" data-i18n-aria-label="experience-migrated" data-i18n="experience-migrated">Fame and Hero </span></label></span>
						<span class="sheet-table-cell sheet-left"><label><input type="checkbox" name="attr_migrated_spellflag" title="@{migrated_spellflag}" value="1" /><span data-i18n="uses-spells-migrated">Uses Spells Flag</span></label></span>
						<span class="sheet-table-cell sheet-left"><label><input type="checkbox" name="attr_migratedAttack2row" title="@{migratedAttack2row}" value="1"/><span data-i18n="attack-grid-rows-migrated">Attack grid extra rows</span></label></span>
					</div>
					<div class="sheet-table-row">
						<span class="sheet-table-config-row-name" style="width:5em;border-bottom:none;" >&nbsp;</span>
						<span class="sheet-table-cell sheet-left"><label><input type="checkbox" name="attr_migrated_repeating_item_attributes" title="@{migrated_repeating_item_attributes}" value="1"><span data-i18n="copy-duplicate-attrs" >Copy duplicate fields</span></label></span>
						<span class="sheet-table-cell sheet-left"><label><input type="checkbox" name="attr_migrated_worn_equipment" title="@{migrated_worn_equipment}" value="1" /><span data-i18n-title="worn-equipment-migrated" data-i18n-aria-label="worn-equipment-migrated" data-i18n="worn-equipment-migrated">Worn Equipment </span></label></span>
						<span class="sheet-table-cell sheet-left"><label><input type="checkbox" name="attr_migrated_hp_misc" title="@{migrated_hp_misc}" value="1"/><span data-i18n="hit-point-misc-migrated">Misc hp field</span></label></span>
						<span class="sheet-table-cell sheet-left"><label><input type="checkbox" name="attr_migrated_maxskill_misc" title="@{migrated_maxskill_misc}" value="1"/><span data-i18n="misc-skill-point-field" >Misc skill point field</span></label></span>
					</div>
					<div class="sheet-table-row" style="background-color:#eeeeee;">
						<span class="sheet-table-config-row-name" >&nbsp;</span>
						<span class="sheet-table-cell sheet-left"><label><input type="checkbox" name="attr_migrated_abilityflags109" title="@{migrated_abilityflags109}" value="1"  /><span data-i18n="ability-lists-flags">Ability lists Flags</span></label></span>
						<span class="sheet-table-cell sheet-left"><label><input type="checkbox" name="attr_migrated_itemlist_defaults" title="@{migrated_itemlist_defaults}" value="1"/><span data-i18n="item-list-default-values" >Items default values</span></label></span>
						<span class="sheet-table-cell sheet-left"><label><input type="checkbox" name="attr_migrated_featurelists_defaults" title="@{migrated_featurelists_defaults}" value="1"/><span data-i18n="feature-list-default-values" >Features default values</span></label></span>
						<span class="sheet-table-cell sheet-left"><label><input type="checkbox" name="attr_migrated_attacklist_defaults111" title="@{migrated_attacklist_defaults111}" value="1" /><span data-i18n="attack-list-default-values">Attacks default values</span></label></span>
					</div>
				</div>
			</div>
		</div>

		<div class="sheet-cheat"></div>
		<input class="sheet-showarrow sheet-h2arrow" type="checkbox" name="attr_cleanup-show" data-i18n-aria-label="spell-migration" title="Click to expand" data-i18n-title="showsect-cmd" value="1" />
		<h2 class="sheet-clickheader sheet-showsect"><label title="Click to expand" data-i18n-title="showsect-cmd" data-i18n-aria-label="showsect-cmd" data-i18n="spell-migration">Spell Migration</label></h2>
		<div class="sheet-h2-section sheet-cleanup sheet-hide-readonly">
			<div class="sheet-table">
				<span class="sheet-table-name" data-i18n="update-spell-macros">Update spell macros</span>
				<span class="sheet-table-row">
					<span data-i18n="config-update-spell-macros-info1">This is a mapping of old spell ids to new spell ids for use in upgrading macros.</span><br />
					<span style="vertical-align:top;">
						<button class="sheet-blank-roll-button" title="Print ID Mapping to chat so you can copy to clipboard" style="font-size: 85%;" type="roll" name="attr_row_idmap_roll" value="/w @{character_name} @{spellmap}">
							<span data-i18n="post-identification-numbers"> Post IDs</span>
						</button>
					</span>
					<span name="attr_spellmap" class="sheet-selectable" style="width: 90%;height: auto;float: right;"></span>
				</span>
			</div>
			<div class="sheet-table" >
				<span class="sheet-table-name" data-i18n="cleanup-old-spell-lists">Cleanup old spell lists</span>
				<span class="sheet-table-row" data-i18n="config-update-spell-macros-info2">
					Click Modify for each spell level and delete all the old spell lists to eliminate old redundant attributes and possibly speed up your sheet.
					Once you delete the below you will not be able to re-migrate the spells.
				</span>
			</div>
			<div>
				<!-- Spells Level 0 -->
				<div class="sheet-repeating-sect sheet-repeating-fields">
					<span class="sheet-nontable-name" data-i18n="level-0-spells">Level 0 Spells</span>
					<fieldset class="repeating_lvl-0-spells">
						<div >
							<input type="checkbox" class="sheet-counted sheet-sect-show" title="Click to expand" data-i18n-title="showsect-cmd" data-i18n-aria-label="showsect-cmd" name="attr_row-show" value="1" checked="checked" /><span class="sheet-table-cell"></span>
							<span class="sheet-table-cell sheet-repeating-rollbutton"><button type="roll" name="attr_roll" title="%{selected|repeating_lvl-0-spells_$X_roll}" value="@{macro-text}"></button></span>
							<span class="sheet-table-cell sheet-small-label"><input title="@{repeating_lvl-0-spells_$X_used}" type="number" name="attr_used" value="0" ><br><span data-i18n="prepared">Prepped</span></span>
							<span class="sheet-table-cell sheet-small-label"><input title="@{repeating_lvl-0-spells_$X_name}" type="text" value="" name="attr_name" placeholder="Spell Name" data-i18n-placeholder="name" accept="Name"><br><span data-i18n="name">Name</span></span>
							<span class="sheet-table-cell sheet-small-label">
								<select title="@{repeating_lvl-0-spells_$X_spellclass}" name="attr_spellclass">
									<option value="@{spellclass-0-name}" data-i18n="class-0" selected>Class 0</option>
									<option value="@{spellclass-1-name}" data-i18n="2-ordinal-class">2nd Class</option>
									<option value="@{spellclass-2-name}" data-i18n="3-ordinal-class">3rd Class</option>
								</select>
								<input type="hidden" name="attr_spellclass_number" value="0" />
							<br><span data-i18n="class">Class</span>
							</span>
							<span class="sheet-table-cell sheet-small-label" style="width:5%;"><input title="@{repeating_lvl-0-spells_$X_spell_level}" type="number" value="0" name="attr_spell_level" /><br><span data-i18n="level">Level</span></span>
							<span class="sheet-table-cell sheet-small-label sheet-sect"><input title="@{repeating_lvl-0-spells_$X_school}" type="text" value="" name="attr_school" placeholder="Spell School [descriptor]" data-i18n-placeholder="school" accept="School"><br><span data-i18n="school">School</span></span>
							<span class="sheet-table-cell sheet-small-label sheet-sect"><input title="@{repeating_lvl-0-spells_$X_cast-time}" type="text" value="" name="attr_cast-time" placeholder="Casting Time" data-i18n-placeholder="casting-time" accept="Casting Time"/><br><span data-i18n="casting-time">Casting Time</span></span>

							<span class="sheet-table-cell sheet-small-label sheet-sect"><input title="@{repeating_lvl-0-spells_$X_DC_misc}" type="number" value="0" name="attr_DC_misc" placeholder="DC Mod" data-i18n-placeholder="difficulty-class-modifier-abbrv"/> <br><span data-i18n="difficulty-class-modifier-abbrv">DC Mod</span></span>
							<span class="sheet-table-cell sheet-small-label"><input title="@{repeating_lvl-0-spells_$X_savedc}" type="number" value="0" name="attr_savedc" class="sheet-calc" readonly="readonly" /> <br><span data-i18n="difficulty-class-abbrv">DC</span></span>
							<div></div>
							<span class="sheet-table-cell sheet-small-label sheet-sect"><input title="@{repeating_lvl-0-spells_$X_components}" type="text" value="" name="attr_components" placeholder="Components" data-i18n-placeholder="components" accept="Components"><br><span data-i18n="components">Components</span></span>
							<span class="sheet-table-cell sheet-small-label sheet-sect"><input title="@{repeating_lvl-0-spells_$X_range}" type="text" value="" name="attr_range" placeholder="Range" data-i18n-placeholder="range" accept="Range"><br><span data-i18n="range">Range</span></span>
							<span class="sheet-table-cell sheet-small-label sheet-sect"><input title="@{repeating_lvl-0-spells_$X_range_numeric}" type="number" value="0" name="attr_range_numeric" placeholder="0" data-i18n-placeholder="range" class="sheet-calc" readonly="readonly"><br><span data-i18n="range">Range</span></span>
							<span class="sheet-table-cell sheet-small-label sheet-sect">
								<input title="@{repeating_lvl-0-spells_$X_targets}" type="text" value="" name="attr_targets" placeholder="Targets/Area/Effect" data-i18n-placeholder="targets-area-effect" accept="Target">
								<br><span data-i18n="targets-area-effect">Targets/Area/Effect</span>
							</span>
							<span class="sheet-table-cell sheet-small-label sheet-sect"><input title="@{repeating_lvl-0-spells_$X_duration}" type="text" value="" name="attr_duration" placeholder="Duration" data-i18n-placeholder="duration" accept="Duration"/><br><span data-i18n="duration">Duration</span></span>
							<span class="sheet-table-cell sheet-small-label sheet-sect"><input title="@{repeating_lvl-0-spells_$X_save}" type="text" value="" name="attr_save" placeholder="Save Effect" data-i18n-placeholder="save" accept="Saving Throw"><br><span data-i18n="save-effect">Save Effect</span></span>
							<span class="sheet-table-cell sheet-small-label sheet-sect">
								<select title="@{repeating_lvl-0-spells_$X_sr}" name="attr_sr" accept="Spell Resistance">
									<option value="not-applicable" data-i18n="not-applicable-abbrv-default" selected>&#8226;N/A</option>
									<option value="Yes" data-i18n="yes">Yes</option>
									<option value="No" data-i18n="no">No</option>
									<option value="Yes (Harmless)" data-i18n="save-yes-harmless">Yes (Harmless)</option>
									<option value="No (Harmless)" data-i18n="save-no-harmless">No (Harmless)</option>
								</select>
								<br><span data-i18n="spell-resistance-abbrv">SR</span>
							</span>

							<div class="sheet-sect sheet-expand">
								<div class="sheet-table sheet-spell-misc">
									<span class="sheet-table-data" style="width:15%;"></span>
									<span class="sheet-table-cell sheet-small-label"><input title="@{repeating_lvl-0-spells_$X_CL_misc}" type="number" value="0" name="attr_CL_misc"/> <br><span data-i18n="caster-level-modifier-abbrv">CL Mod</span></span>
									<span class="sheet-table-cell sheet-small-label"><input title="@{repeating_lvl-0-spells_$X_casterlevel}" type="number" value="0" name="attr_casterlevel" class="sheet-calc" readonly="readonly" /> <br><span data-i18n="caster-level-abbrv">CL</span></span>
									<span class="sheet-table-data sheet-divider-lg" >|<br>&nbsp;</span>
									<span class="sheet-table-cell sheet-small-label"><input title="@{repeating_lvl-0-spells_$X_Concentration_misc}" type="number" value="0" name="attr_Concentration_misc" /> <br><span data-i18n="concentration-modifier-abbrv">Conc Mod</span></span>
									<span class="sheet-table-cell sheet-small-label"><input title="@{repeating_lvl-0-spells_$X_Concentration-mod}" type="number" value="0" name="attr_Concentration-mod" class="sheet-calc" readonly="readonly" /> <br><span data-i18n="concentration-abbrv">Conc</span></span>
									<span class="sheet-table-data sheet-divider-lg" >|<br>&nbsp;</span>
									<span class="sheet-table-cell sheet-small-label"><input title="@{repeating_lvl-0-spells_$X_cast_def-mod}" type="number" value="0" name="attr_cast_def-mod" class="sheet-calc" readonly="readonly" /> <br><span data-i18n="cast-defensively-abbrv">Cast Def</span></span>
									<span class="sheet-table-cell sheet-small-label"><input title="@{repeating_lvl-0-spells_$X_cast_def_dc}" type="number" value="0" name="attr_cast_def_dc" class="sheet-calc" readonly="readonly" /> <br><span data-i18n="cast-defensively-difficulty-class-abbrv">Cast Def DC</span></span>
									<span class="sheet-table-data sheet-divider-lg" >|<br>&nbsp;</span>
									<span class="sheet-table-cell sheet-small-label"><input title="@{repeating_lvl-0-spells_$X_SP_misc}" type="number" value="0" name="attr_SP_misc"/> <br><span data-i18n="spell-penetration-modifier-abbrv">Spell Pen Mod</span></span>
									<span class="sheet-table-cell sheet-small-label"><input title="@{repeating_lvl-0-spells_$X_SP-mod}" type="number" value="0" name="attr_SP-mod" class="sheet-calc" readonly="readonly" /> <br><span data-i18n="spell-penetration-abbrv">Spell Pen</span></span>
									<span class="sheet-table-data" style="width:15%;"></span>
								</div>

								<textarea class="sheet-desc" title="@{repeating_lvl-0-spells_$X_description}" name="attr_description" accept="Content"></textarea>
								<textarea class="sheet-macro-text" title="@{repeating_lvl-0-spells_$X_macro-text}" name="attr_macro-text">@{PC-whisper} &{template:pf_spell} @{toggle_spell_accessible} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_spell}}} {{name=@{name}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle}} @{spell_options}</textarea>
								<input type="hidden" name="attr_var_casterlevel_check" value="{{casterlevel_chk=[[ 1d20 + [[ @{casterlevel} ]] ]] }}" />
								<input type="hidden" name="attr_var_spellPen_check" value="{{spellPen_chk=[[ 1d20 + [[  @{SP-mod} ]] ]] }}" />
								<input type="hidden" name="attr_var_Concentration_check" value="{{Concentration_chk=[[ 1d20 + [[ @{Concentration-mod} ]] ]] }}" />
								<input type="hidden" name="attr_var_cast_def_check" value="{{cast_def_chk=[[ (1d20 + @{cast_def-mod})cs> [[ @{cast_def_dc} ]]cf<[[ @{cast_def_dc} - 1 ]] ]] }}" />
								<input type="hidden" name="attr_spell_options" value="{{cast_def=[[ @{cast_def_dc} ]] }}{{Concentration=[[ @{Concentration-mod} ]] }}{{spellPen=[[ @{SP-mod} ]] }}{{casterlevel=[[ @{casterlevel} ]] }}{{sr=@{sr}}}{{saving_throw=@{save}}}{{duration=@{duration}}}{{targets=@{targets}}}{{range=@{range}}}{{components=@{components}}}{{dc= [[ @{savedc} ]] }}{{casting_time=@{cast-time}}}{{school=@{school}}}{{level= @{spellclass} @{spell_level}}}@{toggle_casterlevel_check}@{toggle_spellPen_check}@{toggle_Concentration_check}@{toggle_cast_def_check}" />

								<div class="sheet-options sheet-table">
									<div class="sheet-table-row">
										<span class="sheet-table-cell sheet-small-label" style="padding-left:10px;"><label><input type="checkbox" class="sheet-boldlabel-check" name="attr_toggle_casterlevel_check" value="@{var_casterlevel_check}" title="@{repeating_lvl-0-spells_$X_casterlevel_check}" checked="checked" /><b title="Roll Caster Level Check"><span data-i18n="caster-level-check">Caster Level Check</span></b></label></span>
										<span class="sheet-table-cell sheet-small-label"><label><input type="checkbox" class="sheet-boldlabel-check" name="attr_toggle_spellPen_check" value="@{var_spellPen_check}" title="@{repeating_lvl-0-spells_$X_SP_check}" /><b title="Roll Spell Penetration Check"> <span data-i18n="spell-penetration-check">Spell Penetration Check</span></b></label></span>
										<span class="sheet-table-cell sheet-small-label"><label><input type="checkbox" class="sheet-boldlabel-check" name="attr_toggle_Concentration_check" value="@{var_Concentration_check}" title="@{repeating_lvl-0-spells_$X_Concentration_check}" /><b title="Roll Concentration Check"> <span data-i18n="concentration-check">Concentration Check</span></b></label></span>
										<span class="sheet-table-cell sheet-small-label"><label><input type="checkbox" class="sheet-boldlabel-check" name="attr_toggle_cast_def_check" value="@{var_cast_def_check}" title="@{repeating_lvl-0-spells_$X_cast_def_check}" /><b title="Roll Cast Defensively Check"> <span data-i18n="cast-defensively-check">Cast Defensively Check</span></b></label></span>
									</div>
								</div>

								<div class="sheet-repeating-id">
									<span data-i18n="identification-abbrv">ID</span>: <span class="sheet-selectable" name="attr_row_id" />
								</div>
							</div>
						</div>
					</fieldset>
				</div>
				<!-- Spells Level 1 -->
				<div class="sheet-repeating-sect sheet-repeating-fields">
					<span class="sheet-nontable-name" data-i18n="level-1-spells">Level 1 Spells</span>
					<fieldset class="repeating_lvl-1-spells">
						<div >
							<input type="checkbox" class="sheet-counted sheet-sect-show" title="Click to expand" data-i18n-title="showsect-cmd" data-i18n-aria-label="showsect-cmd" name="attr_row-show" value="1" checked="checked" /><span class="sheet-table-cell"></span>
							<span class="sheet-table-cell sheet-repeating-rollbutton"><button type="roll" name="attr_roll" title="%{selected|repeating_lvl-1-spells_$X_roll}" value="@{macro-text}"></button></span>
							<span class="sheet-table-cell sheet-small-label"><input title="@{repeating_lvl-1-spells_$X_used}" type="number" name="attr_used" value="0" ><br><span data-i18n="prepared">Prepped</span></span>
							<span class="sheet-table-cell sheet-small-label"><input title="@{repeating_lvl-1-spells_$X_name}" type="text" value="" name="attr_name" placeholder="Spell Name" data-i18n-placeholder="name" accept="Name"><br><span data-i18n="name">Name</span></span>
							<span class="sheet-table-cell sheet-small-label">
								<select title="@{repeating_lvl-1-spells_$X_spellclass}" name="attr_spellclass">
									<option value="@{spellclass-0-name}" data-i18n="class-0" selected>Class 0</option>
									<option value="@{spellclass-1-name}" data-i18n="2-ordinal-class">2nd Class</option>
									<option value="@{spellclass-2-name}" data-i18n="3-ordinal-class">3rd Class</option>
								</select>
								<input type="hidden" name="attr_spellclass_number" value="0" />
							<br><span data-i18n="class">Class</span>
							</span>
							<span class="sheet-table-cell sheet-small-label" style="width:5%;"><input title="@{repeating_lvl-1-spells_$X_spell_level}" type="number" value="0" name="attr_spell_level" /><br><span data-i18n="level">Level</span></span>
							<span class="sheet-table-cell sheet-small-label sheet-sect"><input title="@{repeating_lvl-1-spells_$X_school}" type="text" value="" name="attr_school" placeholder="Spell School [descriptor]" data-i18n-placeholder="school" accept="School"><br><span data-i18n="school">School</span></span>
							<span class="sheet-table-cell sheet-small-label sheet-sect"><input title="@{repeating_lvl-1-spells_$X_cast-time}" type="text" value="" name="attr_cast-time" placeholder="Casting Time" data-i18n-placeholder="casting-time" accept="Casting Time"/><br><span data-i18n="casting-time">Casting Time</span></span>

							<span class="sheet-table-cell sheet-small-label sheet-sect"><input title="@{repeating_lvl-1-spells_$X_DC_misc}" type="number" value="0" name="attr_DC_misc" placeholder="DC Mod" data-i18n-placeholder="difficulty-class-modifier-abbrv"/> <br><span data-i18n="difficulty-class-modifier-abbrv">DC Mod</span></span>
							<span class="sheet-table-cell sheet-small-label"><input title="@{repeating_lvl-1-spells_$X_savedc}" type="number" value="0" name="attr_savedc" class="sheet-calc" readonly="readonly" /> <br><span data-i18n="difficulty-class-abbrv">DC</span></span>
							<div></div>
							<span class="sheet-table-cell sheet-small-label sheet-sect"><input title="@{repeating_lvl-1-spells_$X_components}" type="text" value="" name="attr_components" placeholder="Components" data-i18n-placeholder="components" accept="Components"><br><span data-i18n="components">Components</span></span>
							<span class="sheet-table-cell sheet-small-label sheet-sect"><input title="@{repeating_lvl-1-spells_$X_range}" type="text" value="" name="attr_range" placeholder="Range" data-i18n-placeholder="range" accept="Range"><br><span data-i18n="range">Range</span></span>
							<span class="sheet-table-cell sheet-small-label sheet-sect"><input title="@{repeating_lvl-1-spells_$X_range_numeric}" type="number" value="0" name="attr_range_numeric" placeholder="0" data-i18n-placeholder="range" class="sheet-calc" readonly="readonly"><br><span data-i18n="range">Range</span></span>
							<span class="sheet-table-cell sheet-small-label sheet-sect">
								<input title="@{repeating_lvl-1-spells_$X_targets}" type="text" value="" name="attr_targets" placeholder="Targets/Area/Effect" data-i18n-placeholder="targets-area-effect" accept="Target">
								<br><span data-i18n="targets-area-effect">Targets/Area/Effect</span>
							</span>
							<span class="sheet-table-cell sheet-small-label sheet-sect"><input title="@{repeating_lvl-1-spells_$X_duration}" type="text" value="" name="attr_duration" placeholder="Duration" data-i18n-placeholder="duration" accept="Duration"/><br><span data-i18n="duration">Duration</span></span>
							<span class="sheet-table-cell sheet-small-label sheet-sect"><input title="@{repeating_lvl-1-spells_$X_save}" type="text" value="" name="attr_save" placeholder="Save Effect" data-i18n-placeholder="save" accept="Saving Throw"><br><span data-i18n="save-effect">Save Effect</span></span>
							<span class="sheet-table-cell sheet-small-label sheet-sect">
								<select title="@{repeating_lvl-1-spells_$X_sr}" name="attr_sr" accept="Spell Resistance">
									<option value="not-applicable" data-i18n="not-applicable-abbrv-default" selected>&#8226;N/A</option>
									<option value="Yes" data-i18n="yes">Yes</option>
									<option value="No" data-i18n="no">No</option>
									<option value="Yes (Harmless)" data-i18n="save-yes-harmless">Yes (Harmless)</option>
									<option value="No (Harmless)" data-i18n="save-no-harmless">No (Harmless)</option>
								</select>
								<br><span data-i18n="spell-resistance-abbrv">SR</span>
							</span>

							<div class="sheet-sect sheet-expand">
								<div class="sheet-table sheet-spell-misc">
									<span class="sheet-table-data" style="width:15%;"></span>
									<span class="sheet-table-cell sheet-small-label"><input title="@{repeating_lvl-1-spells_$X_CL_misc}" type="number" value="0" name="attr_CL_misc"/> <br><span data-i18n="caster-level-modifier-abbrv">CL Mod</span></span>
									<span class="sheet-table-cell sheet-small-label"><input title="@{repeating_lvl-1-spells_$X_casterlevel}" type="number" value="0" name="attr_casterlevel" class="sheet-calc" readonly="readonly" /> <br><span data-i18n="caster-level-abbrv">CL</span></span>
									<span class="sheet-table-data sheet-divider-lg" >|<br>&nbsp;</span>
									<span class="sheet-table-cell sheet-small-label"><input title="@{repeating_lvl-1-spells_$X_Concentration_misc}" type="number" value="0" name="attr_Concentration_misc" /> <br><span data-i18n="concentration-modifier-abbrv">Conc Mod</span></span>
									<span class="sheet-table-cell sheet-small-label"><input title="@{repeating_lvl-1-spells_$X_Concentration-mod}" type="number" value="0" name="attr_Concentration-mod" class="sheet-calc" readonly="readonly" /> <br><span data-i18n="concentration-abbrv">Conc</span></span>
									<span class="sheet-table-data sheet-divider-lg" >|<br>&nbsp;</span>
									<span class="sheet-table-cell sheet-small-label"><input title="@{repeating_lvl-1-spells_$X_cast_def-mod}" type="number" value="0" name="attr_cast_def-mod" class="sheet-calc" readonly="readonly" /> <br><span data-i18n="cast-defensively-abbrv">Cast Def</span></span>
									<span class="sheet-table-cell sheet-small-label"><input title="@{repeating_lvl-1-spells_$X_cast_def_dc}" type="number" value="0" name="attr_cast_def_dc" class="sheet-calc" readonly="readonly" /> <br><span data-i18n="cast-defensively-difficulty-class-abbrv">Cast Def DC</span></span>
									<span class="sheet-table-data sheet-divider-lg" >|<br>&nbsp;</span>
									<span class="sheet-table-cell sheet-small-label"><input title="@{repeating_lvl-1-spells_$X_SP_misc}" type="number" value="0" name="attr_SP_misc"/> <br><span data-i18n="spell-penetration-modifier-abbrv">Spell Pen Mod</span></span>
									<span class="sheet-table-cell sheet-small-label"><input title="@{repeating_lvl-1-spells_$X_SP-mod}" type="number" value="0" name="attr_SP-mod" class="sheet-calc" readonly="readonly" /> <br><span data-i18n="spell-penetration-abbrv">Spell Pen</span></span>
									<span class="sheet-table-data" style="width:15%;"></span>
								</div>

								<textarea class="sheet-desc" title="@{repeating_lvl-1-spells_$X_description}" name="attr_description" accept="Content"></textarea>
								<textarea class="sheet-macro-text" title="@{repeating_lvl-1-spells_$X_macro-text}" name="attr_macro-text">@{PC-whisper} &{template:pf_spell} @{toggle_spell_accessible} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_spell}}} {{name=@{name}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle}} @{spell_options}</textarea>
								<input type="hidden" name="attr_var_casterlevel_check" value="{{casterlevel_chk=[[ 1d20 + [[ @{casterlevel} ]] ]] }}" />
								<input type="hidden" name="attr_var_spellPen_check" value="{{spellPen_chk=[[ 1d20 + [[  @{SP-mod} ]] ]] }}" />
								<input type="hidden" name="attr_var_Concentration_check" value="{{Concentration_chk=[[ 1d20 + [[ @{Concentration-mod} ]] ]] }}" />
								<input type="hidden" name="attr_var_cast_def_check" value="{{cast_def_chk=[[ (1d20 + @{cast_def-mod})cs> [[ @{cast_def_dc} ]]cf<[[ @{cast_def_dc} - 1 ]] ]] }}" />
								<input type="hidden" name="attr_spell_options" value="{{cast_def=[[ @{cast_def_dc} ]] }}{{Concentration=[[ @{Concentration-mod} ]] }}{{spellPen=[[ @{SP-mod} ]] }}{{casterlevel=[[ @{casterlevel} ]] }}{{sr=@{sr}}}{{saving_throw=@{save}}}{{duration=@{duration}}}{{targets=@{targets}}}{{range=@{range}}}{{components=@{components}}}{{dc= [[ @{savedc} ]] }}{{casting_time=@{cast-time}}}{{school=@{school}}}{{level= @{spellclass} @{spell_level}}}@{toggle_casterlevel_check}@{toggle_spellPen_check}@{toggle_Concentration_check}@{toggle_cast_def_check}" />

								<div class="sheet-options sheet-table">
									<div class="sheet-table-row">
										<span class="sheet-table-cell sheet-small-label" style="padding-left:10px;"><label><input type="checkbox" class="sheet-boldlabel-check" name="attr_toggle_casterlevel_check" value="@{var_casterlevel_check}" title="@{repeating_lvl-1-spells_$X_casterlevel_check}" checked="checked" /><b title="Roll Caster Level Check"><span data-i18n="caster-level-check">Caster Level Check</span></b></label></span>
										<span class="sheet-table-cell sheet-small-label"><label><input type="checkbox" class="sheet-boldlabel-check" name="attr_toggle_spellPen_check" value="@{var_spellPen_check}" title="@{repeating_lvl-1-spells_$X_SP_check}" /><b title="Roll Spell Penetration Check"> <span data-i18n="spell-penetration-check">Spell Penetration Check</span></b></label></span>
										<span class="sheet-table-cell sheet-small-label"><label><input type="checkbox" class="sheet-boldlabel-check" name="attr_toggle_Concentration_check" value="@{var_Concentration_check}" title="@{repeating_lvl-1-spells_$X_Concentration_check}" /><b title="Roll Concentration Check"> <span data-i18n="concentration-check">Concentration Check</span></b></label></span>
										<span class="sheet-table-cell sheet-small-label"><label><input type="checkbox" class="sheet-boldlabel-check" name="attr_toggle_cast_def_check" value="@{var_cast_def_check}" title="@{repeating_lvl-1-spells_$X_cast_def_check}" /><b title="Roll Cast Defensively Check"> <span data-i18n="cast-defensively-check">Cast Defensively Check</span></b></label></span>
									</div>
								</div>

								<div class="sheet-repeating-id">
									<span data-i18n="identification-abbrv">ID</span>: <span class="sheet-selectable" name="attr_row_id" />
								</div>
							</div>
						</div>
					</fieldset>
				</div>
				<!-- Spells Level 2 -->
				<div class="sheet-repeating-sect sheet-repeating-fields">
					<span class="sheet-nontable-name" data-i18n="level-2-spells">Level 2 Spells</span>
					<fieldset class="repeating_lvl-2-spells">
						<div >
							<input type="checkbox" class="sheet-counted sheet-sect-show" title="Click to expand" data-i18n-title="showsect-cmd" data-i18n-aria-label="showsect-cmd" name="attr_row-show" value="1" checked="checked" /><span class="sheet-table-cell"></span>
							<span class="sheet-table-cell sheet-repeating-rollbutton"><button type="roll" name="attr_roll" title="%{selected|repeating_lvl-2-spells_$X_roll}" value="@{macro-text}"></button></span>
							<span class="sheet-table-cell sheet-small-label"><input title="@{repeating_lvl-2-spells_$X_used}" type="number" name="attr_used" value="0" ><br><span data-i18n="prepared">Prepped</span></span>
							<span class="sheet-table-cell sheet-small-label"><input title="@{repeating_lvl-2-spells_$X_name}" type="text" value="" name="attr_name" placeholder="Spell Name" data-i18n-placeholder="name" accept="Name"><br><span data-i18n="name">Name</span></span>
							<span class="sheet-table-cell sheet-small-label">
								<select title="@{repeating_lvl-2-spells_$X_spellclass}" name="attr_spellclass">
									<option value="@{spellclass-0-name}" data-i18n="class-0" selected>Class 0</option>
									<option value="@{spellclass-1-name}" data-i18n="2-ordinal-class">2nd Class</option>
									<option value="@{spellclass-2-name}" data-i18n="3-ordinal-class">3rd Class</option>
								</select>
								<input type="hidden" name="attr_spellclass_number" value="0" />
							<br><span data-i18n="class">Class</span>
							</span>
							<span class="sheet-table-cell sheet-small-label" style="width:5%;"><input title="@{repeating_lvl-2-spells_$X_spell_level}" type="number" value="0" name="attr_spell_level" /><br><span data-i18n="level">Level</span></span>
							<span class="sheet-table-cell sheet-small-label sheet-sect"><input title="@{repeating_lvl-2-spells_$X_school}" type="text" value="" name="attr_school" placeholder="Spell School [descriptor]" data-i18n-placeholder="school" accept="School"><br><span data-i18n="school">School</span></span>
							<span class="sheet-table-cell sheet-small-label sheet-sect"><input title="@{repeating_lvl-2-spells_$X_cast-time}" type="text" value="" name="attr_cast-time" placeholder="Casting Time" data-i18n-placeholder="casting-time" accept="Casting Time"/><br><span data-i18n="casting-time">Casting Time</span></span>

							<span class="sheet-table-cell sheet-small-label sheet-sect"><input title="@{repeating_lvl-2-spells_$X_DC_misc}" type="number" value="0" name="attr_DC_misc" placeholder="DC Mod" data-i18n-placeholder="difficulty-class-modifier-abbrv"/> <br><span data-i18n="difficulty-class-modifier-abbrv">DC Mod</span></span>
							<span class="sheet-table-cell sheet-small-label"><input title="@{repeating_lvl-2-spells_$X_savedc}" type="number" value="0" name="attr_savedc" class="sheet-calc" readonly="readonly" /> <br><span data-i18n="difficulty-class-abbrv">DC</span></span>
							<div></div>
							<span class="sheet-table-cell sheet-small-label sheet-sect"><input title="@{repeating_lvl-2-spells_$X_components}" type="text" value="" name="attr_components" placeholder="Components" data-i18n-placeholder="components" accept="Components"><br><span data-i18n="components">Components</span></span>
							<span class="sheet-table-cell sheet-small-label sheet-sect"><input title="@{repeating_lvl-2-spells_$X_range}" type="text" value="" name="attr_range" placeholder="Range" data-i18n-placeholder="range" accept="Range"><br><span data-i18n="range">Range</span></span>
							<span class="sheet-table-cell sheet-small-label sheet-sect"><input title="@{repeating_lvl-2-spells_$X_range_numeric}" type="number" value="0" name="attr_range_numeric" placeholder="0" data-i18n-placeholder="range" class="sheet-calc" readonly="readonly"><br><span data-i18n="range">Range</span></span>
							<span class="sheet-table-cell sheet-small-label sheet-sect">
								<input title="@{repeating_lvl-2-spells_$X_targets}" type="text" value="" name="attr_targets" placeholder="Targets/Area/Effect" data-i18n-placeholder="targets-area-effect" accept="Target">
								<br><span data-i18n="targets-area-effect">Targets/Area/Effect</span>
							</span>
							<span class="sheet-table-cell sheet-small-label sheet-sect"><input title="@{repeating_lvl-2-spells_$X_duration}" type="text" value="" name="attr_duration" placeholder="Duration" data-i18n-placeholder="duration" accept="Duration"/><br><span data-i18n="duration">Duration</span></span>
							<span class="sheet-table-cell sheet-small-label sheet-sect"><input title="@{repeating_lvl-2-spells_$X_save}" type="text" value="" name="attr_save" placeholder="Save Effect" data-i18n-placeholder="save" accept="Saving Throw"><br><span data-i18n="save-effect">Save Effect</span></span>
							<span class="sheet-table-cell sheet-small-label sheet-sect">
								<select title="@{repeating_lvl-2-spells_$X_sr}" name="attr_sr" accept="Spell Resistance">
									<option value="not-applicable" data-i18n="not-applicable-abbrv-default" selected>&#8226;N/A</option>
									<option value="Yes" data-i18n="yes">Yes</option>
									<option value="No" data-i18n="no">No</option>
									<option value="Yes (Harmless)" data-i18n="save-yes-harmless">Yes (Harmless)</option>
									<option value="No (Harmless)" data-i18n="save-no-harmless">No (Harmless)</option>
								</select>
								<br><span data-i18n="spell-resistance-abbrv">SR</span>
							</span>

							<div class="sheet-sect sheet-expand">
								<div class="sheet-table sheet-spell-misc">
									<span class="sheet-table-data" style="width:15%;"></span>
									<span class="sheet-table-cell sheet-small-label"><input title="@{repeating_lvl-2-spells_$X_CL_misc}" type="number" value="0" name="attr_CL_misc"/> <br><span data-i18n="caster-level-modifier-abbrv">CL Mod</span></span>
									<span class="sheet-table-cell sheet-small-label"><input title="@{repeating_lvl-2-spells_$X_casterlevel}" type="number" value="0" name="attr_casterlevel" class="sheet-calc" readonly="readonly" /> <br><span data-i18n="caster-level-abbrv">CL</span></span>
									<span class="sheet-table-data sheet-divider-lg" >|<br>&nbsp;</span>
									<span class="sheet-table-cell sheet-small-label"><input title="@{repeating_lvl-2-spells_$X_Concentration_misc}" type="number" value="0" name="attr_Concentration_misc" /> <br><span data-i18n="concentration-modifier-abbrv">Conc Mod</span></span>
									<span class="sheet-table-cell sheet-small-label"><input title="@{repeating_lvl-2-spells_$X_Concentration-mod}" type="number" value="0" name="attr_Concentration-mod" class="sheet-calc" readonly="readonly" /> <br><span data-i18n="concentration-abbrv">Conc</span></span>
									<span class="sheet-table-data sheet-divider-lg" >|<br>&nbsp;</span>
									<span class="sheet-table-cell sheet-small-label"><input title="@{repeating_lvl-2-spells_$X_cast_def-mod}" type="number" value="0" name="attr_cast_def-mod" class="sheet-calc" readonly="readonly" /> <br><span data-i18n="cast-defensively-abbrv">Cast Def</span></span>
									<span class="sheet-table-cell sheet-small-label"><input title="@{repeating_lvl-2-spells_$X_cast_def_dc}" type="number" value="0" name="attr_cast_def_dc" class="sheet-calc" readonly="readonly" /> <br><span data-i18n="cast-defensively-difficulty-class-abbrv">Cast Def DC</span></span>
									<span class="sheet-table-data sheet-divider-lg" >|<br>&nbsp;</span>
									<span class="sheet-table-cell sheet-small-label"><input title="@{repeating_lvl-2-spells_$X_SP_misc}" type="number" value="0" name="attr_SP_misc"/> <br><span data-i18n="spell-penetration-modifier-abbrv">Spell Pen Mod</span></span>
									<span class="sheet-table-cell sheet-small-label"><input title="@{repeating_lvl-2-spells_$X_SP-mod}" type="number" value="0" name="attr_SP-mod" class="sheet-calc" readonly="readonly" /> <br><span data-i18n="spell-penetration-abbrv">Spell Pen</span></span>
									<span class="sheet-table-data" style="width:15%;"></span>
								</div>

								<textarea class="sheet-desc" title="@{repeating_lvl-2-spells_$X_description}" name="attr_description" accept="Content"></textarea>
								<textarea class="sheet-macro-text" title="@{repeating_lvl-2-spells_$X_macro-text}" name="attr_macro-text">@{PC-whisper} &{template:pf_spell} @{toggle_spell_accessible} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_spell}}} {{name=@{name}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle}} @{spell_options}</textarea>
								<input type="hidden" name="attr_var_casterlevel_check" value="{{casterlevel_chk=[[ 1d20 + [[ @{casterlevel} ]] ]] }}" />
								<input type="hidden" name="attr_var_spellPen_check" value="{{spellPen_chk=[[ 1d20 + [[  @{SP-mod} ]] ]] }}" />
								<input type="hidden" name="attr_var_Concentration_check" value="{{Concentration_chk=[[ 1d20 + [[ @{Concentration-mod} ]] ]] }}" />
								<input type="hidden" name="attr_var_cast_def_check" value="{{cast_def_chk=[[ (1d20 + @{cast_def-mod})cs> [[ @{cast_def_dc} ]]cf<[[ @{cast_def_dc} - 1 ]] ]] }}" />
								<input type="hidden" name="attr_spell_options" value="{{cast_def=[[ @{cast_def_dc} ]] }}{{Concentration=[[ @{Concentration-mod} ]] }}{{spellPen=[[ @{SP-mod} ]] }}{{casterlevel=[[ @{casterlevel} ]] }}{{sr=@{sr}}}{{saving_throw=@{save}}}{{duration=@{duration}}}{{targets=@{targets}}}{{range=@{range}}}{{components=@{components}}}{{dc= [[ @{savedc} ]] }}{{casting_time=@{cast-time}}}{{school=@{school}}}{{level= @{spellclass} @{spell_level}}}@{toggle_casterlevel_check}@{toggle_spellPen_check}@{toggle_Concentration_check}@{toggle_cast_def_check}" />

								<div class="sheet-options sheet-table">
									<div class="sheet-table-row">
										<span class="sheet-table-cell sheet-small-label" style="padding-left:10px;"><label><input type="checkbox" class="sheet-boldlabel-check" name="attr_toggle_casterlevel_check" value="@{var_casterlevel_check}" title="@{repeating_lvl-2-spells_$X_casterlevel_check}" checked="checked" /><b title="Roll Caster Level Check"><span data-i18n="caster-level-check">Caster Level Check</span></b></label></span>
										<span class="sheet-table-cell sheet-small-label"><label><input type="checkbox" class="sheet-boldlabel-check" name="attr_toggle_spellPen_check" value="@{var_spellPen_check}" title="@{repeating_lvl-2-spells_$X_SP_check}" /><b title="Roll Spell Penetration Check"> <span data-i18n="spell-penetration-check">Spell Penetration Check</span></b></label></span>
										<span class="sheet-table-cell sheet-small-label"><label><input type="checkbox" class="sheet-boldlabel-check" name="attr_toggle_Concentration_check" value="@{var_Concentration_check}" title="@{repeating_lvl-2-spells_$X_Concentration_check}" /><b title="Roll Concentration Check"> <span data-i18n="concentration-check">Concentration Check</span></b></label></span>
										<span class="sheet-table-cell sheet-small-label"><label><input type="checkbox" class="sheet-boldlabel-check" name="attr_toggle_cast_def_check" value="@{var_cast_def_check}" title="@{repeating_lvl-2-spells_$X_cast_def_check}" /><b title="Roll Cast Defensively Check"> <span data-i18n="cast-defensively-check">Cast Defensively Check</span></b></label></span>
									</div>
								</div>

								<div class="sheet-repeating-id">
									<span data-i18n="identification-abbrv">ID</span>: <span class="sheet-selectable" name="attr_row_id" />
								</div>
							</div>
						</div>
					</fieldset>
				</div>
				<!-- Spells Level 3 -->
				<div class="sheet-repeating-sect sheet-repeating-fields">
					<span class="sheet-nontable-name" data-i18n="level-3-spells">Level 3 Spells</span>
					<fieldset class="repeating_lvl-3-spells">
						<div >
							<input type="checkbox" class="sheet-counted sheet-sect-show" title="Click to expand" data-i18n-title="showsect-cmd" data-i18n-aria-label="showsect-cmd" name="attr_row-show" value="1" checked="checked" /><span class="sheet-table-cell"></span>
							<span class="sheet-table-cell sheet-repeating-rollbutton"><button type="roll" name="attr_roll" title="%{selected|repeating_lvl-3-spells_$X_roll}" value="@{macro-text}"></button></span>
							<span class="sheet-table-cell sheet-small-label"><input title="@{repeating_lvl-3-spells_$X_used}" type="number" name="attr_used" value="0" ><br><span data-i18n="prepared">Prepped</span></span>
							<span class="sheet-table-cell sheet-small-label"><input title="@{repeating_lvl-3-spells_$X_name}" type="text" value="" name="attr_name" placeholder="Spell Name" data-i18n-placeholder="name" accept="Name"><br><span data-i18n="name">Name</span></span>
							<span class="sheet-table-cell sheet-small-label">
								<select title="@{repeating_lvl-3-spells_$X_spellclass}" name="attr_spellclass">
									<option value="@{spellclass-0-name}" data-i18n="class-0" selected>Class 0</option>
									<option value="@{spellclass-1-name}" data-i18n="2-ordinal-class">2nd Class</option>
									<option value="@{spellclass-2-name}" data-i18n="3-ordinal-class">3rd Class</option>
								</select>
								<input type="hidden" name="attr_spellclass_number" value="0" />
							<br><span data-i18n="class">Class</span>
							</span>
							<span class="sheet-table-cell sheet-small-label" style="width:5%;"><input title="@{repeating_lvl-3-spells_$X_spell_level}" type="number" value="0" name="attr_spell_level" /><br><span data-i18n="level">Level</span></span>
							<span class="sheet-table-cell sheet-small-label sheet-sect"><input title="@{repeating_lvl-3-spells_$X_school}" type="text" value="" name="attr_school" placeholder="Spell School [descriptor]" data-i18n-placeholder="school" accept="School"><br><span data-i18n="school">School</span></span>
							<span class="sheet-table-cell sheet-small-label sheet-sect"><input title="@{repeating_lvl-3-spells_$X_cast-time}" type="text" value="" name="attr_cast-time" placeholder="Casting Time" data-i18n-placeholder="casting-time" accept="Casting Time"/><br><span data-i18n="casting-time">Casting Time</span></span>

							<span class="sheet-table-cell sheet-small-label sheet-sect"><input title="@{repeating_lvl-3-spells_$X_DC_misc}" type="number" value="0" name="attr_DC_misc" placeholder="DC Mod" data-i18n-placeholder="difficulty-class-modifier-abbrv"/> <br><span data-i18n="difficulty-class-modifier-abbrv">DC Mod</span></span>
							<span class="sheet-table-cell sheet-small-label"><input title="@{repeating_lvl-3-spells_$X_savedc}" type="number" value="0" name="attr_savedc" class="sheet-calc" readonly="readonly" /> <br><span data-i18n="difficulty-class-abbrv">DC</span></span>
							<div></div>
							<span class="sheet-table-cell sheet-small-label sheet-sect"><input title="@{repeating_lvl-3-spells_$X_components}" type="text" value="" name="attr_components" placeholder="Components" data-i18n-placeholder="components" accept="Components"><br><span data-i18n="components">Components</span></span>
							<span class="sheet-table-cell sheet-small-label sheet-sect"><input title="@{repeating_lvl-3-spells_$X_range}" type="text" value="" name="attr_range" placeholder="Range" data-i18n-placeholder="range" accept="Range"><br><span data-i18n="range">Range</span></span>
							<span class="sheet-table-cell sheet-small-label sheet-sect"><input title="@{repeating_lvl-3-spells_$X_range_numeric}" type="number" value="0" name="attr_range_numeric" placeholder="0" data-i18n-placeholder="range" class="sheet-calc" readonly="readonly"><br><span data-i18n="range">Range</span></span>
							<span class="sheet-table-cell sheet-small-label sheet-sect">
								<input title="@{repeating_lvl-3-spells_$X_targets}" type="text" value="" name="attr_targets" placeholder="Targets/Area/Effect" data-i18n-placeholder="targets-area-effect" accept="Target">
								<br><span data-i18n="targets-area-effect">Targets/Area/Effect</span>
							</span>
							<span class="sheet-table-cell sheet-small-label sheet-sect"><input title="@{repeating_lvl-3-spells_$X_duration}" type="text" value="" name="attr_duration" placeholder="Duration" data-i18n-placeholder="duration" accept="Duration"/><br><span data-i18n="duration">Duration</span></span>
							<span class="sheet-table-cell sheet-small-label sheet-sect"><input title="@{repeating_lvl-3-spells_$X_save}" type="text" value="" name="attr_save" placeholder="Save Effect" data-i18n-placeholder="save" accept="Saving Throw"><br><span data-i18n="save-effect">Save Effect</span></span>
							<span class="sheet-table-cell sheet-small-label sheet-sect">
								<select title="@{repeating_lvl-3-spells_$X_sr}" name="attr_sr" accept="Spell Resistance">
									<option value="not-applicable" data-i18n="not-applicable-abbrv-default" selected>&#8226;N/A</option>
									<option value="Yes" data-i18n="yes">Yes</option>
									<option value="No" data-i18n="no">No</option>
									<option value="Yes (Harmless)" data-i18n="save-yes-harmless">Yes (Harmless)</option>
									<option value="No (Harmless)" data-i18n="save-no-harmless">No (Harmless)</option>
								</select>
								<br><span data-i18n="spell-resistance-abbrv">SR</span>
							</span>

							<div class="sheet-sect sheet-expand">
								<div class="sheet-table sheet-spell-misc">
									<span class="sheet-table-data" style="width:15%;"></span>
									<span class="sheet-table-cell sheet-small-label"><input title="@{repeating_lvl-3-spells_$X_CL_misc}" type="number" value="0" name="attr_CL_misc"/> <br><span data-i18n="caster-level-modifier-abbrv">CL Mod</span></span>
									<span class="sheet-table-cell sheet-small-label"><input title="@{repeating_lvl-3-spells_$X_casterlevel}" type="number" value="0" name="attr_casterlevel" class="sheet-calc" readonly="readonly" /> <br><span data-i18n="caster-level-abbrv">CL</span></span>
									<span class="sheet-table-data sheet-divider-lg" >|<br>&nbsp;</span>
									<span class="sheet-table-cell sheet-small-label"><input title="@{repeating_lvl-3-spells_$X_Concentration_misc}" type="number" value="0" name="attr_Concentration_misc" /> <br><span data-i18n="concentration-modifier-abbrv">Conc Mod</span></span>
									<span class="sheet-table-cell sheet-small-label"><input title="@{repeating_lvl-3-spells_$X_Concentration-mod}" type="number" value="0" name="attr_Concentration-mod" class="sheet-calc" readonly="readonly" /> <br><span data-i18n="concentration-abbrv">Conc</span></span>
									<span class="sheet-table-data sheet-divider-lg" >|<br>&nbsp;</span>
									<span class="sheet-table-cell sheet-small-label"><input title="@{repeating_lvl-3-spells_$X_cast_def-mod}" type="number" value="0" name="attr_cast_def-mod" class="sheet-calc" readonly="readonly" /> <br><span data-i18n="cast-defensively-abbrv">Cast Def</span></span>
									<span class="sheet-table-cell sheet-small-label"><input title="@{repeating_lvl-3-spells_$X_cast_def_dc}" type="number" value="0" name="attr_cast_def_dc" class="sheet-calc" readonly="readonly" /> <br><span data-i18n="cast-defensively-difficulty-class-abbrv">Cast Def DC</span></span>
									<span class="sheet-table-data sheet-divider-lg" >|<br>&nbsp;</span>
									<span class="sheet-table-cell sheet-small-label"><input title="@{repeating_lvl-3-spells_$X_SP_misc}" type="number" value="0" name="attr_SP_misc"/> <br><span data-i18n="spell-penetration-modifier-abbrv">Spell Pen Mod</span></span>
									<span class="sheet-table-cell sheet-small-label"><input title="@{repeating_lvl-3-spells_$X_SP-mod}" type="number" value="0" name="attr_SP-mod" class="sheet-calc" readonly="readonly" /> <br><span data-i18n="spell-penetration-abbrv">Spell Pen</span></span>
									<span class="sheet-table-data" style="width:15%;"></span>
								</div>

								<textarea class="sheet-desc" title="@{repeating_lvl-3-spells_$X_description}" name="attr_description" accept="Content"></textarea>
								<textarea class="sheet-macro-text" title="@{repeating_lvl-3-spells_$X_macro-text}" name="attr_macro-text">@{PC-whisper} &{template:pf_spell} @{toggle_spell_accessible} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_spell}}} {{name=@{name}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle}} @{spell_options}</textarea>
								<input type="hidden" name="attr_var_casterlevel_check" value="{{casterlevel_chk=[[ 1d20 + [[ @{casterlevel} ]] ]] }}" />
								<input type="hidden" name="attr_var_spellPen_check" value="{{spellPen_chk=[[ 1d20 + [[  @{SP-mod} ]] ]] }}" />
								<input type="hidden" name="attr_var_Concentration_check" value="{{Concentration_chk=[[ 1d20 + [[ @{Concentration-mod} ]] ]] }}" />
								<input type="hidden" name="attr_var_cast_def_check" value="{{cast_def_chk=[[ (1d20 + @{cast_def-mod})cs> [[ @{cast_def_dc} ]]cf<[[ @{cast_def_dc} - 1 ]] ]] }}" />
								<input type="hidden" name="attr_spell_options" value="{{cast_def=[[ @{cast_def_dc} ]] }}{{Concentration=[[ @{Concentration-mod} ]] }}{{spellPen=[[ @{SP-mod} ]] }}{{casterlevel=[[ @{casterlevel} ]] }}{{sr=@{sr}}}{{saving_throw=@{save}}}{{duration=@{duration}}}{{targets=@{targets}}}{{range=@{range}}}{{components=@{components}}}{{dc= [[ @{savedc} ]] }}{{casting_time=@{cast-time}}}{{school=@{school}}}{{level= @{spellclass} @{spell_level}}}@{toggle_casterlevel_check}@{toggle_spellPen_check}@{toggle_Concentration_check}@{toggle_cast_def_check}" />

								<div class="sheet-options sheet-table">
									<div class="sheet-table-row">
										<span class="sheet-table-cell sheet-small-label" style="padding-left:10px;"><label><input type="checkbox" class="sheet-boldlabel-check" name="attr_toggle_casterlevel_check" value="@{var_casterlevel_check}" title="@{repeating_lvl-3-spells_$X_casterlevel_check}" checked="checked" /><b title="Roll Caster Level Check"><span data-i18n="caster-level-check">Caster Level Check</span></b></label></span>
										<span class="sheet-table-cell sheet-small-label"><label><input type="checkbox" class="sheet-boldlabel-check" name="attr_toggle_spellPen_check" value="@{var_spellPen_check}" title="@{repeating_lvl-3-spells_$X_SP_check}" /><b title="Roll Spell Penetration Check"> <span data-i18n="spell-penetration-check">Spell Penetration Check</span></b></label></span>
										<span class="sheet-table-cell sheet-small-label"><label><input type="checkbox" class="sheet-boldlabel-check" name="attr_toggle_Concentration_check" value="@{var_Concentration_check}" title="@{repeating_lvl-3-spells_$X_Concentration_check}" /><b title="Roll Concentration Check"> <span data-i18n="concentration-check">Concentration Check</span></b></label></span>
										<span class="sheet-table-cell sheet-small-label"><label><input type="checkbox" class="sheet-boldlabel-check" name="attr_toggle_cast_def_check" value="@{var_cast_def_check}" title="@{repeating_lvl-3-spells_$X_cast_def_check}" /><b title="Roll Cast Defensively Check"> <span data-i18n="cast-defensively-check">Cast Defensively Check</span></b></label></span>
									</div>
								</div>

								<div class="sheet-repeating-id">
									<span data-i18n="identification-abbrv">ID</span>: <span class="sheet-selectable" name="attr_row_id" />
								</div>
							</div>
						</div>
					</fieldset>
				</div>
				<!-- Spells Level 4 -->
				<div class="sheet-repeating-sect sheet-repeating-fields">
					<span class="sheet-nontable-name" data-i18n="level-4-spells">Level 4 Spells</span>
					<fieldset class="repeating_lvl-4-spells">
						<div >
							<input type="checkbox" class="sheet-counted sheet-sect-show" title="Click to expand" data-i18n-title="showsect-cmd" data-i18n-aria-label="showsect-cmd" name="attr_row-show" value="1" checked="checked" /><span class="sheet-table-cell"></span>
							<span class="sheet-table-cell sheet-repeating-rollbutton"><button type="roll" name="attr_roll" title="%{selected|repeating_lvl-4-spells_$X_roll}" value="@{macro-text}"></button></span>
							<span class="sheet-table-cell sheet-small-label"><input title="@{repeating_lvl-4-spells_$X_used}" type="number" name="attr_used" value="0" ><br><span data-i18n="prepared">Prepped</span></span>
							<span class="sheet-table-cell sheet-small-label"><input title="@{repeating_lvl-4-spells_$X_name}" type="text" value="" name="attr_name" placeholder="Spell Name" data-i18n-placeholder="name" accept="Name"><br><span data-i18n="name">Name</span></span>
							<span class="sheet-table-cell sheet-small-label">
								<select title="@{repeating_lvl-4-spells_$X_spellclass}" name="attr_spellclass">
									<option value="@{spellclass-0-name}" data-i18n="class-0" selected>Class 0</option>
									<option value="@{spellclass-1-name}" data-i18n="2-ordinal-class">2nd Class</option>
									<option value="@{spellclass-2-name}" data-i18n="3-ordinal-class">3rd Class</option>
								</select>
								<input type="hidden" name="attr_spellclass_number" value="0" />
							<br><span data-i18n="class">Class</span>
							</span>
							<span class="sheet-table-cell sheet-small-label" style="width:5%;"><input title="@{repeating_lvl-4-spells_$X_spell_level}" type="number" value="0" name="attr_spell_level" /><br><span data-i18n="level">Level</span></span>
							<span class="sheet-table-cell sheet-small-label sheet-sect"><input title="@{repeating_lvl-4-spells_$X_school}" type="text" value="" name="attr_school" placeholder="Spell School [descriptor]" data-i18n-placeholder="school" accept="School"><br><span data-i18n="school">School</span></span>
							<span class="sheet-table-cell sheet-small-label sheet-sect"><input title="@{repeating_lvl-4-spells_$X_cast-time}" type="text" value="" name="attr_cast-time" placeholder="Casting Time" data-i18n-placeholder="casting-time" accept="Casting Time"/><br><span data-i18n="casting-time">Casting Time</span></span>

							<span class="sheet-table-cell sheet-small-label sheet-sect"><input title="@{repeating_lvl-4-spells_$X_DC_misc}" type="number" value="0" name="attr_DC_misc" placeholder="DC Mod" data-i18n-placeholder="difficulty-class-modifier-abbrv"/> <br><span data-i18n="difficulty-class-modifier-abbrv">DC Mod</span></span>
							<span class="sheet-table-cell sheet-small-label"><input title="@{repeating_lvl-4-spells_$X_savedc}" type="number" value="0" name="attr_savedc" class="sheet-calc" readonly="readonly" /> <br><span data-i18n="difficulty-class-abbrv">DC</span></span>
							<div></div>
							<span class="sheet-table-cell sheet-small-label sheet-sect"><input title="@{repeating_lvl-4-spells_$X_components}" type="text" value="" name="attr_components" placeholder="Components" data-i18n-placeholder="components" accept="Components"><br><span data-i18n="components">Components</span></span>
							<span class="sheet-table-cell sheet-small-label sheet-sect"><input title="@{repeating_lvl-4-spells_$X_range}" type="text" value="" name="attr_range" placeholder="Range" data-i18n-placeholder="range" accept="Range"><br><span data-i18n="range">Range</span></span>
							<span class="sheet-table-cell sheet-small-label sheet-sect"><input title="@{repeating_lvl-4-spells_$X_range_numeric}" type="number" value="0" name="attr_range_numeric" placeholder="0" data-i18n-placeholder="range" class="sheet-calc" readonly="readonly"><br><span data-i18n="range">Range</span></span>
							<span class="sheet-table-cell sheet-small-label sheet-sect">
								<input title="@{repeating_lvl-4-spells_$X_targets}" type="text" value="" name="attr_targets" placeholder="Targets/Area/Effect" data-i18n-placeholder="targets-area-effect" accept="Target">
								<br><span data-i18n="targets-area-effect">Targets/Area/Effect</span>
							</span>
							<span class="sheet-table-cell sheet-small-label sheet-sect"><input title="@{repeating_lvl-4-spells_$X_duration}" type="text" value="" name="attr_duration" placeholder="Duration" data-i18n-placeholder="duration" accept="Duration"/><br><span data-i18n="duration">Duration</span></span>
							<span class="sheet-table-cell sheet-small-label sheet-sect"><input title="@{repeating_lvl-4-spells_$X_save}" type="text" value="" name="attr_save" placeholder="Save Effect" data-i18n-placeholder="save" accept="Saving Throw"><br><span data-i18n="save-effect">Save Effect</span></span>
							<span class="sheet-table-cell sheet-small-label sheet-sect">
								<select title="@{repeating_lvl-4-spells_$X_sr}" name="attr_sr" accept="Spell Resistance">
									<option value="not-applicable" data-i18n="not-applicable-abbrv-default" selected>&#8226;N/A</option>
									<option value="Yes" data-i18n="yes">Yes</option>
									<option value="No" data-i18n="no">No</option>
									<option value="Yes (Harmless)" data-i18n="save-yes-harmless">Yes (Harmless)</option>
									<option value="No (Harmless)" data-i18n="save-no-harmless">No (Harmless)</option>
								</select>
								<br><span data-i18n="spell-resistance-abbrv">SR</span>
							</span>

							<div class="sheet-sect sheet-expand">
								<div class="sheet-table sheet-spell-misc">
									<span class="sheet-table-data" style="width:15%;"></span>
									<span class="sheet-table-cell sheet-small-label"><input title="@{repeating_lvl-4-spells_$X_CL_misc}" type="number" value="0" name="attr_CL_misc"/> <br><span data-i18n="caster-level-modifier-abbrv">CL Mod</span></span>
									<span class="sheet-table-cell sheet-small-label"><input title="@{repeating_lvl-4-spells_$X_casterlevel}" type="number" value="0" name="attr_casterlevel" class="sheet-calc" readonly="readonly" /> <br><span data-i18n="caster-level-abbrv">CL</span></span>
									<span class="sheet-table-data sheet-divider-lg" >|<br>&nbsp;</span>
									<span class="sheet-table-cell sheet-small-label"><input title="@{repeating_lvl-4-spells_$X_Concentration_misc}" type="number" value="0" name="attr_Concentration_misc" /> <br><span data-i18n="concentration-modifier-abbrv">Conc Mod</span></span>
									<span class="sheet-table-cell sheet-small-label"><input title="@{repeating_lvl-4-spells_$X_Concentration-mod}" type="number" value="0" name="attr_Concentration-mod" class="sheet-calc" readonly="readonly" /> <br><span data-i18n="concentration-abbrv">Conc</span></span>
									<span class="sheet-table-data sheet-divider-lg" >|<br>&nbsp;</span>
									<span class="sheet-table-cell sheet-small-label"><input title="@{repeating_lvl-4-spells_$X_cast_def-mod}" type="number" value="0" name="attr_cast_def-mod" class="sheet-calc" readonly="readonly" /> <br><span data-i18n="cast-defensively-abbrv">Cast Def</span></span>
									<span class="sheet-table-cell sheet-small-label"><input title="@{repeating_lvl-4-spells_$X_cast_def_dc}" type="number" value="0" name="attr_cast_def_dc" class="sheet-calc" readonly="readonly" /> <br><span data-i18n="cast-defensively-difficulty-class-abbrv">Cast Def DC</span></span>
									<span class="sheet-table-data sheet-divider-lg" >|<br>&nbsp;</span>
									<span class="sheet-table-cell sheet-small-label"><input title="@{repeating_lvl-4-spells_$X_SP_misc}" type="number" value="0" name="attr_SP_misc"/> <br><span data-i18n="spell-penetration-modifier-abbrv">Spell Pen Mod</span></span>
									<span class="sheet-table-cell sheet-small-label"><input title="@{repeating_lvl-4-spells_$X_SP-mod}" type="number" value="0" name="attr_SP-mod" class="sheet-calc" readonly="readonly" /> <br><span data-i18n="spell-penetration-abbrv">Spell Pen</span></span>
									<span class="sheet-table-data" style="width:15%;"></span>
								</div>

								<textarea class="sheet-desc" title="@{repeating_lvl-4-spells_$X_description}" name="attr_description" accept="Content"></textarea>
								<textarea class="sheet-macro-text" title="@{repeating_lvl-4-spells_$X_macro-text}" name="attr_macro-text">@{PC-whisper} &{template:pf_spell} @{toggle_spell_accessible} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_spell}}} {{name=@{name}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle}} @{spell_options}</textarea>
								<input type="hidden" name="attr_var_casterlevel_check" value="{{casterlevel_chk=[[ 1d20 + [[ @{casterlevel} ]] ]] }}" />
								<input type="hidden" name="attr_var_spellPen_check" value="{{spellPen_chk=[[ 1d20 + [[  @{SP-mod} ]] ]] }}" />
								<input type="hidden" name="attr_var_Concentration_check" value="{{Concentration_chk=[[ 1d20 + [[ @{Concentration-mod} ]] ]] }}" />
								<input type="hidden" name="attr_var_cast_def_check" value="{{cast_def_chk=[[ (1d20 + @{cast_def-mod})cs> [[ @{cast_def_dc} ]]cf<[[ @{cast_def_dc} - 1 ]] ]] }}" />
								<input type="hidden" name="attr_spell_options" value="{{cast_def=[[ @{cast_def_dc} ]] }}{{Concentration=[[ @{Concentration-mod} ]] }}{{spellPen=[[ @{SP-mod} ]] }}{{casterlevel=[[ @{casterlevel} ]] }}{{sr=@{sr}}}{{saving_throw=@{save}}}{{duration=@{duration}}}{{targets=@{targets}}}{{range=@{range}}}{{components=@{components}}}{{dc= [[ @{savedc} ]] }}{{casting_time=@{cast-time}}}{{school=@{school}}}{{level= @{spellclass} @{spell_level}}}@{toggle_casterlevel_check}@{toggle_spellPen_check}@{toggle_Concentration_check}@{toggle_cast_def_check}" />

								<div class="sheet-options sheet-table">
									<div class="sheet-table-row">
										<span class="sheet-table-cell sheet-small-label" style="padding-left:10px;"><label><input type="checkbox" class="sheet-boldlabel-check" name="attr_toggle_casterlevel_check" value="@{var_casterlevel_check}" title="@{repeating_lvl-4-spells_$X_casterlevel_check}" checked="checked" /><b title="Roll Caster Level Check"><span data-i18n="caster-level-check">Caster Level Check</span></b></label></span>
										<span class="sheet-table-cell sheet-small-label"><label><input type="checkbox" class="sheet-boldlabel-check" name="attr_toggle_spellPen_check" value="@{var_spellPen_check}" title="@{repeating_lvl-4-spells_$X_SP_check}" /><b title="Roll Spell Penetration Check"> <span data-i18n="spell-penetration-check">Spell Penetration Check</span></b></label></span>
										<span class="sheet-table-cell sheet-small-label"><label><input type="checkbox" class="sheet-boldlabel-check" name="attr_toggle_Concentration_check" value="@{var_Concentration_check}" title="@{repeating_lvl-4-spells_$X_Concentration_check}" /><b title="Roll Concentration Check"> <span data-i18n="concentration-check">Concentration Check</span></b></label></span>
										<span class="sheet-table-cell sheet-small-label"><label><input type="checkbox" class="sheet-boldlabel-check" name="attr_toggle_cast_def_check" value="@{var_cast_def_check}" title="@{repeating_lvl-4-spells_$X_cast_def_check}" /><b title="Roll Cast Defensively Check"> <span data-i18n="cast-defensively-check">Cast Defensively Check</span></b></label></span>
									</div>
								</div>

								<div class="sheet-repeating-id">
									<span data-i18n="identification-abbrv">ID</span>: <span class="sheet-selectable" name="attr_row_id" />
								</div>
							</div>
						</div>
					</fieldset>
				</div>
				<!-- Spells Level 5 -->
				<div class="sheet-repeating-sect sheet-repeating-fields">
					<span class="sheet-nontable-name" data-i18n="level-5-spells">Level 5 Spells</span>
					<fieldset class="repeating_lvl-5-spells">
						<div >
							<input type="checkbox" class="sheet-counted sheet-sect-show" title="Click to expand" data-i18n-title="showsect-cmd" data-i18n-aria-label="showsect-cmd" name="attr_row-show" value="1" checked="checked" /><span class="sheet-table-cell"></span>
							<span class="sheet-table-cell sheet-repeating-rollbutton"><button type="roll" name="attr_roll" title="%{selected|repeating_lvl-5-spells_$X_roll}" value="@{macro-text}"></button></span>
							<span class="sheet-table-cell sheet-small-label"><input title="@{repeating_lvl-5-spells_$X_used}" type="number" name="attr_used" value="0" ><br><span data-i18n="prepared">Prepped</span></span>
							<span class="sheet-table-cell sheet-small-label"><input title="@{repeating_lvl-5-spells_$X_name}" type="text" value="" name="attr_name" placeholder="Spell Name" data-i18n-placeholder="name" accept="Name"><br><span data-i18n="name">Name</span></span>
							<span class="sheet-table-cell sheet-small-label">
								<select title="@{repeating_lvl-5-spells_$X_spellclass}" name="attr_spellclass">
									<option value="@{spellclass-0-name}" data-i18n="class-0" selected>Class 0</option>
									<option value="@{spellclass-1-name}" data-i18n="2-ordinal-class">2nd Class</option>
									<option value="@{spellclass-2-name}" data-i18n="3-ordinal-class">3rd Class</option>
								</select>
								<input type="hidden" name="attr_spellclass_number" value="0" />
							<br><span data-i18n="class">Class</span>
							</span>
							<span class="sheet-table-cell sheet-small-label" style="width:5%;"><input title="@{repeating_lvl-5-spells_$X_spell_level}" type="number" value="0" name="attr_spell_level" /><br><span data-i18n="level">Level</span></span>
							<span class="sheet-table-cell sheet-small-label sheet-sect"><input title="@{repeating_lvl-5-spells_$X_school}" type="text" value="" name="attr_school" placeholder="Spell School [descriptor]" data-i18n-placeholder="school" accept="School"><br><span data-i18n="school">School</span></span>
							<span class="sheet-table-cell sheet-small-label sheet-sect"><input title="@{repeating_lvl-5-spells_$X_cast-time}" type="text" value="" name="attr_cast-time" placeholder="Casting Time" data-i18n-placeholder="casting-time" accept="Casting Time"/><br><span data-i18n="casting-time">Casting Time</span></span>

							<span class="sheet-table-cell sheet-small-label sheet-sect"><input title="@{repeating_lvl-5-spells_$X_DC_misc}" type="number" value="0" name="attr_DC_misc" placeholder="DC Mod" data-i18n-placeholder="difficulty-class-modifier-abbrv"/> <br><span data-i18n="difficulty-class-modifier-abbrv">DC Mod</span></span>
							<span class="sheet-table-cell sheet-small-label"><input title="@{repeating_lvl-5-spells_$X_savedc}" type="number" value="0" name="attr_savedc" class="sheet-calc" readonly="readonly" /> <br><span data-i18n="difficulty-class-abbrv">DC</span></span>
							<div></div>
							<span class="sheet-table-cell sheet-small-label sheet-sect"><input title="@{repeating_lvl-5-spells_$X_components}" type="text" value="" name="attr_components" placeholder="Components" data-i18n-placeholder="components" accept="Components"><br><span data-i18n="components">Components</span></span>
							<span class="sheet-table-cell sheet-small-label sheet-sect"><input title="@{repeating_lvl-5-spells_$X_range}" type="text" value="" name="attr_range" placeholder="Range" data-i18n-placeholder="range" accept="Range"><br><span data-i18n="range">Range</span></span>
							<span class="sheet-table-cell sheet-small-label sheet-sect"><input title="@{repeating_lvl-5-spells_$X_range_numeric}" type="number" value="0" name="attr_range_numeric" placeholder="0" data-i18n-placeholder="range" class="sheet-calc" readonly="readonly"><br><span data-i18n="range">Range</span></span>
							<span class="sheet-table-cell sheet-small-label sheet-sect">
								<input title="@{repeating_lvl-5-spells_$X_targets}" type="text" value="" name="attr_targets" placeholder="Targets/Area/Effect" data-i18n-placeholder="targets-area-effect" accept="Target">
								<br><span data-i18n="targets-area-effect">Targets/Area/Effect</span>
							</span>
							<span class="sheet-table-cell sheet-small-label sheet-sect"><input title="@{repeating_lvl-5-spells_$X_duration}" type="text" value="" name="attr_duration" placeholder="Duration" data-i18n-placeholder="duration" accept="Duration"/><br><span data-i18n="duration">Duration</span></span>
							<span class="sheet-table-cell sheet-small-label sheet-sect"><input title="@{repeating_lvl-5-spells_$X_save}" type="text" value="" name="attr_save" placeholder="Save Effect" data-i18n-placeholder="save" accept="Saving Throw"><br><span data-i18n="save-effect">Save Effect</span></span>
							<span class="sheet-table-cell sheet-small-label sheet-sect">
								<select title="@{repeating_lvl-5-spells_$X_sr}" name="attr_sr" accept="Spell Resistance">
									<option value="not-applicable" data-i18n="not-applicable-abbrv-default" selected>&#8226;N/A</option>
									<option value="Yes" data-i18n="yes">Yes</option>
									<option value="No" data-i18n="no">No</option>
									<option value="Yes (Harmless)" data-i18n="save-yes-harmless">Yes (Harmless)</option>
									<option value="No (Harmless)" data-i18n="save-no-harmless">No (Harmless)</option>
								</select>
								<br><span data-i18n="spell-resistance-abbrv">SR</span>
							</span>

							<div class="sheet-sect sheet-expand">
								<div class="sheet-table sheet-spell-misc">
									<span class="sheet-table-data" style="width:15%;"></span>
									<span class="sheet-table-cell sheet-small-label"><input title="@{repeating_lvl-5-spells_$X_CL_misc}" type="number" value="0" name="attr_CL_misc"/> <br><span data-i18n="caster-level-modifier-abbrv">CL Mod</span></span>
									<span class="sheet-table-cell sheet-small-label"><input title="@{repeating_lvl-5-spells_$X_casterlevel}" type="number" value="0" name="attr_casterlevel" class="sheet-calc" readonly="readonly" /> <br><span data-i18n="caster-level-abbrv">CL</span></span>
									<span class="sheet-table-data sheet-divider-lg" >|<br>&nbsp;</span>
									<span class="sheet-table-cell sheet-small-label"><input title="@{repeating_lvl-5-spells_$X_Concentration_misc}" type="number" value="0" name="attr_Concentration_misc" /> <br><span data-i18n="concentration-modifier-abbrv">Conc Mod</span></span>
									<span class="sheet-table-cell sheet-small-label"><input title="@{repeating_lvl-5-spells_$X_Concentration-mod}" type="number" value="0" name="attr_Concentration-mod" class="sheet-calc" readonly="readonly" /> <br><span data-i18n="concentration-abbrv">Conc</span></span>
									<span class="sheet-table-data sheet-divider-lg" >|<br>&nbsp;</span>
									<span class="sheet-table-cell sheet-small-label"><input title="@{repeating_lvl-5-spells_$X_cast_def-mod}" type="number" value="0" name="attr_cast_def-mod" class="sheet-calc" readonly="readonly" /> <br><span data-i18n="cast-defensively-abbrv">Cast Def</span></span>
									<span class="sheet-table-cell sheet-small-label"><input title="@{repeating_lvl-5-spells_$X_cast_def_dc}" type="number" value="0" name="attr_cast_def_dc" class="sheet-calc" readonly="readonly" /> <br><span data-i18n="cast-defensively-difficulty-class-abbrv">Cast Def DC</span></span>
									<span class="sheet-table-data sheet-divider-lg" >|<br>&nbsp;</span>
									<span class="sheet-table-cell sheet-small-label"><input title="@{repeating_lvl-5-spells_$X_SP_misc}" type="number" value="0" name="attr_SP_misc"/> <br><span data-i18n="spell-penetration-modifier-abbrv">Spell Pen Mod</span></span>
									<span class="sheet-table-cell sheet-small-label"><input title="@{repeating_lvl-5-spells_$X_SP-mod}" type="number" value="0" name="attr_SP-mod" class="sheet-calc" readonly="readonly" /> <br><span data-i18n="spell-penetration-abbrv">Spell Pen</span></span>
									<span class="sheet-table-data" style="width:15%;"></span>
								</div>

								<textarea class="sheet-desc" title="@{repeating_lvl-5-spells_$X_description}" name="attr_description" accept="Content"></textarea>
								<textarea class="sheet-macro-text" title="@{repeating_lvl-5-spells_$X_macro-text}" name="attr_macro-text">@{PC-whisper} &{template:pf_spell} @{toggle_spell_accessible} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_spell}}} {{name=@{name}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle}} @{spell_options}</textarea>
								<input type="hidden" name="attr_var_casterlevel_check" value="{{casterlevel_chk=[[ 1d20 + [[ @{casterlevel} ]] ]] }}" />
								<input type="hidden" name="attr_var_spellPen_check" value="{{spellPen_chk=[[ 1d20 + [[  @{SP-mod} ]] ]] }}" />
								<input type="hidden" name="attr_var_Concentration_check" value="{{Concentration_chk=[[ 1d20 + [[ @{Concentration-mod} ]] ]] }}" />
								<input type="hidden" name="attr_var_cast_def_check" value="{{cast_def_chk=[[ (1d20 + @{cast_def-mod})cs> [[ @{cast_def_dc} ]]cf<[[ @{cast_def_dc} - 1 ]] ]] }}" />
								<input type="hidden" name="attr_spell_options" value="{{cast_def=[[ @{cast_def_dc} ]] }}{{Concentration=[[ @{Concentration-mod} ]] }}{{spellPen=[[ @{SP-mod} ]] }}{{casterlevel=[[ @{casterlevel} ]] }}{{sr=@{sr}}}{{saving_throw=@{save}}}{{duration=@{duration}}}{{targets=@{targets}}}{{range=@{range}}}{{components=@{components}}}{{dc= [[ @{savedc} ]] }}{{casting_time=@{cast-time}}}{{school=@{school}}}{{level= @{spellclass} @{spell_level}}}@{toggle_casterlevel_check}@{toggle_spellPen_check}@{toggle_Concentration_check}@{toggle_cast_def_check}" />

								<div class="sheet-options sheet-table">
									<div class="sheet-table-row">
										<span class="sheet-table-cell sheet-small-label" style="padding-left:10px;"><label><input type="checkbox" class="sheet-boldlabel-check" name="attr_toggle_casterlevel_check" value="@{var_casterlevel_check}" title="@{repeating_lvl-5-spells_$X_casterlevel_check}" checked="checked" /><b title="Roll Caster Level Check"><span data-i18n="caster-level-check">Caster Level Check</span></b></label></span>
										<span class="sheet-table-cell sheet-small-label"><label><input type="checkbox" class="sheet-boldlabel-check" name="attr_toggle_spellPen_check" value="@{var_spellPen_check}" title="@{repeating_lvl-5-spells_$X_SP_check}" /><b title="Roll Spell Penetration Check"> <span data-i18n="spell-penetration-check">Spell Penetration Check</span></b></label></span>
										<span class="sheet-table-cell sheet-small-label"><label><input type="checkbox" class="sheet-boldlabel-check" name="attr_toggle_Concentration_check" value="@{var_Concentration_check}" title="@{repeating_lvl-5-spells_$X_Concentration_check}" /><b title="Roll Concentration Check"> <span data-i18n="concentration-check">Concentration Check</span></b></label></span>
										<span class="sheet-table-cell sheet-small-label"><label><input type="checkbox" class="sheet-boldlabel-check" name="attr_toggle_cast_def_check" value="@{var_cast_def_check}" title="@{repeating_lvl-5-spells_$X_cast_def_check}" /><b title="Roll Cast Defensively Check"> <span data-i18n="cast-defensively-check">Cast Defensively Check</span></b></label></span>
									</div>
								</div>

								<div class="sheet-repeating-id">
									<span data-i18n="identification-abbrv">ID</span>: <span class="sheet-selectable" name="attr_row_id" />
								</div>
							</div>
						</div>
					</fieldset>
				</div>
				<!-- Spells Level 6 -->
				<div class="sheet-repeating-sect sheet-repeating-fields">
					<span class="sheet-nontable-name" data-i18n="level-6-spells">Level 6 Spells</span>
					<fieldset class="repeating_lvl-6-spells">
						<div >
							<input type="checkbox" class="sheet-counted sheet-sect-show" title="Click to expand" data-i18n-title="showsect-cmd" data-i18n-aria-label="showsect-cmd" name="attr_row-show" value="1" checked="checked" /><span class="sheet-table-cell"></span>
							<span class="sheet-table-cell sheet-repeating-rollbutton"><button type="roll" name="attr_roll" title="%{selected|repeating_lvl-6-spells_$X_roll}" value="@{macro-text}"></button></span>
							<span class="sheet-table-cell sheet-small-label"><input title="@{repeating_lvl-6-spells_$X_used}" type="number" name="attr_used" value="0" ><br><span data-i18n="prepared">Prepped</span></span>
							<span class="sheet-table-cell sheet-small-label"><input title="@{repeating_lvl-6-spells_$X_name}" type="text" value="" name="attr_name" placeholder="Spell Name" data-i18n-placeholder="name" accept="Name"><br><span data-i18n="name">Name</span></span>
							<span class="sheet-table-cell sheet-small-label">
								<select title="@{repeating_lvl-6-spells_$X_spellclass}" name="attr_spellclass">
									<option value="@{spellclass-0-name}" data-i18n="class-0" selected>Class 0</option>
									<option value="@{spellclass-1-name}" data-i18n="2-ordinal-class">2nd Class</option>
									<option value="@{spellclass-2-name}" data-i18n="3-ordinal-class">3rd Class</option>
								</select>
								<input type="hidden" name="attr_spellclass_number" value="0" />
							<br><span data-i18n="class">Class</span>
							</span>
							<span class="sheet-table-cell sheet-small-label" style="width:5%;"><input title="@{repeating_lvl-6-spells_$X_spell_level}" type="number" value="0" name="attr_spell_level" /><br><span data-i18n="level">Level</span></span>
							<span class="sheet-table-cell sheet-small-label sheet-sect"><input title="@{repeating_lvl-6-spells_$X_school}" type="text" value="" name="attr_school" placeholder="Spell School [descriptor]" data-i18n-placeholder="school" accept="School"><br><span data-i18n="school">School</span></span>
							<span class="sheet-table-cell sheet-small-label sheet-sect"><input title="@{repeating_lvl-6-spells_$X_cast-time}" type="text" value="" name="attr_cast-time" placeholder="Casting Time" data-i18n-placeholder="casting-time" accept="Casting Time"/><br><span data-i18n="casting-time">Casting Time</span></span>

							<span class="sheet-table-cell sheet-small-label sheet-sect"><input title="@{repeating_lvl-6-spells_$X_DC_misc}" type="number" value="0" name="attr_DC_misc" placeholder="DC Mod" data-i18n-placeholder="difficulty-class-modifier-abbrv"/> <br><span data-i18n="difficulty-class-modifier-abbrv">DC Mod</span></span>
							<span class="sheet-table-cell sheet-small-label"><input title="@{repeating_lvl-6-spells_$X_savedc}" type="number" value="0" name="attr_savedc" class="sheet-calc" readonly="readonly" /> <br><span data-i18n="difficulty-class-abbrv">DC</span></span>
							<div></div>
							<span class="sheet-table-cell sheet-small-label sheet-sect"><input title="@{repeating_lvl-6-spells_$X_components}" type="text" value="" name="attr_components" placeholder="Components" data-i18n-placeholder="components" accept="Components"><br><span data-i18n="components">Components</span></span>
							<span class="sheet-table-cell sheet-small-label sheet-sect"><input title="@{repeating_lvl-6-spells_$X_range}" type="text" value="" name="attr_range" placeholder="Range" data-i18n-placeholder="range" accept="Range"><br><span data-i18n="range">Range</span></span>
							<span class="sheet-table-cell sheet-small-label sheet-sect"><input title="@{repeating_lvl-6-spells_$X_range_numeric}" type="number" value="0" name="attr_range_numeric" placeholder="0" data-i18n-placeholder="range" class="sheet-calc" readonly="readonly"><br><span data-i18n="range">Range</span></span>
							<span class="sheet-table-cell sheet-small-label sheet-sect">
								<input title="@{repeating_lvl-6-spells_$X_targets}" type="text" value="" name="attr_targets" placeholder="Targets/Area/Effect" data-i18n-placeholder="targets-area-effect" accept="Target">
								<br><span data-i18n="targets-area-effect">Targets/Area/Effect</span>
							</span>
							<span class="sheet-table-cell sheet-small-label sheet-sect"><input title="@{repeating_lvl-6-spells_$X_duration}" type="text" value="" name="attr_duration" placeholder="Duration" data-i18n-placeholder="duration" accept="Duration"/><br><span data-i18n="duration">Duration</span></span>
							<span class="sheet-table-cell sheet-small-label sheet-sect"><input title="@{repeating_lvl-6-spells_$X_save}" type="text" value="" name="attr_save" placeholder="Save Effect" data-i18n-placeholder="save" accept="Saving Throw"><br><span data-i18n="save-effect">Save Effect</span></span>
							<span class="sheet-table-cell sheet-small-label sheet-sect">
								<select title="@{repeating_lvl-6-spells_$X_sr}" name="attr_sr" accept="Spell Resistance">
									<option value="not-applicable" data-i18n="not-applicable-abbrv-default" selected>&#8226;N/A</option>
									<option value="Yes" data-i18n="yes">Yes</option>
									<option value="No" data-i18n="no">No</option>
									<option value="Yes (Harmless)" data-i18n="save-yes-harmless">Yes (Harmless)</option>
									<option value="No (Harmless)" data-i18n="save-no-harmless">No (Harmless)</option>
								</select>
								<br><span data-i18n="spell-resistance-abbrv">SR</span>
							</span>

							<div class="sheet-sect sheet-expand">
								<div class="sheet-table sheet-spell-misc">
									<span class="sheet-table-data" style="width:15%;"></span>
									<span class="sheet-table-cell sheet-small-label"><input title="@{repeating_lvl-6-spells_$X_CL_misc}" type="number" value="0" name="attr_CL_misc"/> <br><span data-i18n="caster-level-modifier-abbrv">CL Mod</span></span>
									<span class="sheet-table-cell sheet-small-label"><input title="@{repeating_lvl-6-spells_$X_casterlevel}" type="number" value="0" name="attr_casterlevel" class="sheet-calc" readonly="readonly" /> <br><span data-i18n="caster-level-abbrv">CL</span></span>
									<span class="sheet-table-data sheet-divider-lg" >|<br>&nbsp;</span>
									<span class="sheet-table-cell sheet-small-label"><input title="@{repeating_lvl-6-spells_$X_Concentration_misc}" type="number" value="0" name="attr_Concentration_misc" /> <br><span data-i18n="concentration-modifier-abbrv">Conc Mod</span></span>
									<span class="sheet-table-cell sheet-small-label"><input title="@{repeating_lvl-6-spells_$X_Concentration-mod}" type="number" value="0" name="attr_Concentration-mod" class="sheet-calc" readonly="readonly" /> <br><span data-i18n="concentration-abbrv">Conc</span></span>
									<span class="sheet-table-data sheet-divider-lg" >|<br>&nbsp;</span>
									<span class="sheet-table-cell sheet-small-label"><input title="@{repeating_lvl-6-spells_$X_cast_def-mod}" type="number" value="0" name="attr_cast_def-mod" class="sheet-calc" readonly="readonly" /> <br><span data-i18n="cast-defensively-abbrv">Cast Def</span></span>
									<span class="sheet-table-cell sheet-small-label"><input title="@{repeating_lvl-6-spells_$X_cast_def_dc}" type="number" value="0" name="attr_cast_def_dc" class="sheet-calc" readonly="readonly" /> <br><span data-i18n="cast-defensively-difficulty-class-abbrv">Cast Def DC</span></span>
									<span class="sheet-table-data sheet-divider-lg" >|<br>&nbsp;</span>
									<span class="sheet-table-cell sheet-small-label"><input title="@{repeating_lvl-6-spells_$X_SP_misc}" type="number" value="0" name="attr_SP_misc"/> <br><span data-i18n="spell-penetration-modifier-abbrv">Spell Pen Mod</span></span>
									<span class="sheet-table-cell sheet-small-label"><input title="@{repeating_lvl-6-spells_$X_SP-mod}" type="number" value="0" name="attr_SP-mod" class="sheet-calc" readonly="readonly" /> <br><span data-i18n="spell-penetration-abbrv">Spell Pen</span></span>
									<span class="sheet-table-data" style="width:15%;"></span>
								</div>

								<textarea class="sheet-desc" title="@{repeating_lvl-6-spells_$X_description}" name="attr_description" accept="Content"></textarea>
								<textarea class="sheet-macro-text" title="@{repeating_lvl-6-spells_$X_macro-text}" name="attr_macro-text">@{PC-whisper} &{template:pf_spell} @{toggle_spell_accessible} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_spell}}} {{name=@{name}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle}} @{spell_options}</textarea>
								<input type="hidden" name="attr_var_casterlevel_check" value="{{casterlevel_chk=[[ 1d20 + [[ @{casterlevel} ]] ]] }}" />
								<input type="hidden" name="attr_var_spellPen_check" value="{{spellPen_chk=[[ 1d20 + [[  @{SP-mod} ]] ]] }}" />
								<input type="hidden" name="attr_var_Concentration_check" value="{{Concentration_chk=[[ 1d20 + [[ @{Concentration-mod} ]] ]] }}" />
								<input type="hidden" name="attr_var_cast_def_check" value="{{cast_def_chk=[[ (1d20 + @{cast_def-mod})cs> [[ @{cast_def_dc} ]]cf<[[ @{cast_def_dc} - 1 ]] ]] }}" />
								<input type="hidden" name="attr_spell_options" value="{{cast_def=[[ @{cast_def_dc} ]] }}{{Concentration=[[ @{Concentration-mod} ]] }}{{spellPen=[[ @{SP-mod} ]] }}{{casterlevel=[[ @{casterlevel} ]] }}{{sr=@{sr}}}{{saving_throw=@{save}}}{{duration=@{duration}}}{{targets=@{targets}}}{{range=@{range}}}{{components=@{components}}}{{dc= [[ @{savedc} ]] }}{{casting_time=@{cast-time}}}{{school=@{school}}}{{level= @{spellclass} @{spell_level}}}@{toggle_casterlevel_check}@{toggle_spellPen_check}@{toggle_Concentration_check}@{toggle_cast_def_check}" />

								<div class="sheet-options sheet-table">
									<div class="sheet-table-row">
										<span class="sheet-table-cell sheet-small-label" style="padding-left:10px;"><label><input type="checkbox" class="sheet-boldlabel-check" name="attr_toggle_casterlevel_check" value="@{var_casterlevel_check}" title="@{repeating_lvl-6-spells_$X_casterlevel_check}" checked="checked" /><b title="Roll Caster Level Check"><span data-i18n="caster-level-check">Caster Level Check</span></b></label></span>
										<span class="sheet-table-cell sheet-small-label"><label><input type="checkbox" class="sheet-boldlabel-check" name="attr_toggle_spellPen_check" value="@{var_spellPen_check}" title="@{repeating_lvl-6-spells_$X_SP_check}" /><b title="Roll Spell Penetration Check"> <span data-i18n="spell-penetration-check">Spell Penetration Check</span></b></label></span>
										<span class="sheet-table-cell sheet-small-label"><label><input type="checkbox" class="sheet-boldlabel-check" name="attr_toggle_Concentration_check" value="@{var_Concentration_check}" title="@{repeating_lvl-6-spells_$X_Concentration_check}" /><b title="Roll Concentration Check"> <span data-i18n="concentration-check">Concentration Check</span></b></label></span>
										<span class="sheet-table-cell sheet-small-label"><label><input type="checkbox" class="sheet-boldlabel-check" name="attr_toggle_cast_def_check" value="@{var_cast_def_check}" title="@{repeating_lvl-6-spells_$X_cast_def_check}" /><b title="Roll Cast Defensively Check"> <span data-i18n="cast-defensively-check">Cast Defensively Check</span></b></label></span>
									</div>
								</div>

								<div class="sheet-repeating-id">
									<span data-i18n="identification-abbrv">ID</span>: <span class="sheet-selectable" name="attr_row_id" />
								</div>
							</div>
						</div>
					</fieldset>
				</div>
				<!-- Spells Level 7 -->
				<div class="sheet-repeating-sect sheet-repeating-fields">
					<span class="sheet-nontable-name" data-i18n="level-7-spells">Level 7 Spells</span>
					<fieldset class="repeating_lvl-7-spells">
						<div >
							<input type="checkbox" class="sheet-counted sheet-sect-show" title="Click to expand" data-i18n-title="showsect-cmd" data-i18n-aria-label="showsect-cmd" name="attr_row-show" value="1" checked="checked" /><span class="sheet-table-cell"></span>
							<span class="sheet-table-cell sheet-repeating-rollbutton"><button type="roll" name="attr_roll" title="%{selected|repeating_lvl-7-spells_$X_roll}" value="@{macro-text}"></button></span>
							<span class="sheet-table-cell sheet-small-label"><input title="@{repeating_lvl-7-spells_$X_used}" type="number" name="attr_used" value="0" ><br><span data-i18n="prepared">Prepped</span></span>
							<span class="sheet-table-cell sheet-small-label"><input title="@{repeating_lvl-7-spells_$X_name}" type="text" value="" name="attr_name" placeholder="Spell Name" data-i18n-placeholder="name" accept="Name"><br><span data-i18n="name">Name</span></span>
							<span class="sheet-table-cell sheet-small-label">
								<select title="@{repeating_lvl-7-spells_$X_spellclass}" name="attr_spellclass">
									<option value="@{spellclass-0-name}" data-i18n="class-0" selected>Class 0</option>
									<option value="@{spellclass-1-name}" data-i18n="2-ordinal-class">2nd Class</option>
									<option value="@{spellclass-2-name}" data-i18n="3-ordinal-class">3rd Class</option>
								</select>
								<input type="hidden" name="attr_spellclass_number" value="0" />
							<br><span data-i18n="class">Class</span>
							</span>
							<span class="sheet-table-cell sheet-small-label" style="width:5%;"><input title="@{repeating_lvl-7-spells_$X_spell_level}" type="number" value="0" name="attr_spell_level" /><br><span data-i18n="level">Level</span></span>
							<span class="sheet-table-cell sheet-small-label sheet-sect"><input title="@{repeating_lvl-7-spells_$X_school}" type="text" value="" name="attr_school" placeholder="Spell School [descriptor]" data-i18n-placeholder="school" accept="School"><br><span data-i18n="school">School</span></span>
							<span class="sheet-table-cell sheet-small-label sheet-sect"><input title="@{repeating_lvl-7-spells_$X_cast-time}" type="text" value="" name="attr_cast-time" placeholder="Casting Time" data-i18n-placeholder="casting-time" accept="Casting Time"/><br><span data-i18n="casting-time">Casting Time</span></span>

							<span class="sheet-table-cell sheet-small-label sheet-sect"><input title="@{repeating_lvl-7-spells_$X_DC_misc}" type="number" value="0" name="attr_DC_misc" placeholder="DC Mod" data-i18n-placeholder="difficulty-class-modifier-abbrv"/> <br><span data-i18n="difficulty-class-modifier-abbrv">DC Mod</span></span>
							<span class="sheet-table-cell sheet-small-label"><input title="@{repeating_lvl-7-spells_$X_savedc}" type="number" value="0" name="attr_savedc" class="sheet-calc" readonly="readonly" /> <br><span data-i18n="difficulty-class-abbrv">DC</span></span>
							<div></div>
							<span class="sheet-table-cell sheet-small-label sheet-sect"><input title="@{repeating_lvl-7-spells_$X_components}" type="text" value="" name="attr_components" placeholder="Components" data-i18n-placeholder="components" accept="Components"><br><span data-i18n="components">Components</span></span>
							<span class="sheet-table-cell sheet-small-label sheet-sect"><input title="@{repeating_lvl-7-spells_$X_range}" type="text" value="" name="attr_range" placeholder="Range" data-i18n-placeholder="range" accept="Range"><br><span data-i18n="range">Range</span></span>
							<span class="sheet-table-cell sheet-small-label sheet-sect"><input title="@{repeating_lvl-7-spells_$X_range_numeric}" type="number" value="0" name="attr_range_numeric" placeholder="0" data-i18n-placeholder="range" class="sheet-calc" readonly="readonly"><br><span data-i18n="range">Range</span></span>
							<span class="sheet-table-cell sheet-small-label sheet-sect">
								<input title="@{repeating_lvl-7-spells_$X_targets}" type="text" value="" name="attr_targets" placeholder="Targets/Area/Effect" data-i18n-placeholder="targets-area-effect" accept="Target">
								<br><span data-i18n="targets-area-effect">Targets/Area/Effect</span>
							</span>
							<span class="sheet-table-cell sheet-small-label sheet-sect"><input title="@{repeating_lvl-7-spells_$X_duration}" type="text" value="" name="attr_duration" placeholder="Duration" data-i18n-placeholder="duration" accept="Duration"/><br><span data-i18n="duration">Duration</span></span>
							<span class="sheet-table-cell sheet-small-label sheet-sect"><input title="@{repeating_lvl-7-spells_$X_save}" type="text" value="" name="attr_save" placeholder="Save Effect" data-i18n-placeholder="save" accept="Saving Throw"><br><span data-i18n="save-effect">Save Effect</span></span>
							<span class="sheet-table-cell sheet-small-label sheet-sect">
								<select title="@{repeating_lvl-7-spells_$X_sr}" name="attr_sr" accept="Spell Resistance">
									<option value="not-applicable" data-i18n="not-applicable-abbrv-default" selected>&#8226;N/A</option>
									<option value="Yes" data-i18n="yes">Yes</option>
									<option value="No" data-i18n="no">No</option>
									<option value="Yes (Harmless)" data-i18n="save-yes-harmless">Yes (Harmless)</option>
									<option value="No (Harmless)" data-i18n="save-no-harmless">No (Harmless)</option>
								</select>
								<br><span data-i18n="spell-resistance-abbrv">SR</span>
							</span>

							<div class="sheet-sect sheet-expand">
								<div class="sheet-table sheet-spell-misc">
									<span class="sheet-table-data" style="width:15%;"></span>
									<span class="sheet-table-cell sheet-small-label"><input title="@{repeating_lvl-7-spells_$X_CL_misc}" type="number" value="0" name="attr_CL_misc"/> <br><span data-i18n="caster-level-modifier-abbrv">CL Mod</span></span>
									<span class="sheet-table-cell sheet-small-label"><input title="@{repeating_lvl-7-spells_$X_casterlevel}" type="number" value="0" name="attr_casterlevel" class="sheet-calc" readonly="readonly" /> <br><span data-i18n="caster-level-abbrv">CL</span></span>
									<span class="sheet-table-data sheet-divider-lg" >|<br>&nbsp;</span>
									<span class="sheet-table-cell sheet-small-label"><input title="@{repeating_lvl-7-spells_$X_Concentration_misc}" type="number" value="0" name="attr_Concentration_misc" /> <br><span data-i18n="concentration-modifier-abbrv">Conc Mod</span></span>
									<span class="sheet-table-cell sheet-small-label"><input title="@{repeating_lvl-7-spells_$X_Concentration-mod}" type="number" value="0" name="attr_Concentration-mod" class="sheet-calc" readonly="readonly" /> <br><span data-i18n="concentration-abbrv">Conc</span></span>
									<span class="sheet-table-data sheet-divider-lg" >|<br>&nbsp;</span>
									<span class="sheet-table-cell sheet-small-label"><input title="@{repeating_lvl-7-spells_$X_cast_def-mod}" type="number" value="0" name="attr_cast_def-mod" class="sheet-calc" readonly="readonly" /> <br><span data-i18n="cast-defensively-abbrv">Cast Def</span></span>
									<span class="sheet-table-cell sheet-small-label"><input title="@{repeating_lvl-7-spells_$X_cast_def_dc}" type="number" value="0" name="attr_cast_def_dc" class="sheet-calc" readonly="readonly" /> <br><span data-i18n="cast-defensively-difficulty-class-abbrv">Cast Def DC</span></span>
									<span class="sheet-table-data sheet-divider-lg" >|<br>&nbsp;</span>
									<span class="sheet-table-cell sheet-small-label"><input title="@{repeating_lvl-7-spells_$X_SP_misc}" type="number" value="0" name="attr_SP_misc"/> <br><span data-i18n="spell-penetration-modifier-abbrv">Spell Pen Mod</span></span>
									<span class="sheet-table-cell sheet-small-label"><input title="@{repeating_lvl-7-spells_$X_SP-mod}" type="number" value="0" name="attr_SP-mod" class="sheet-calc" readonly="readonly" /> <br><span data-i18n="spell-penetration-abbrv">Spell Pen</span></span>
									<span class="sheet-table-data" style="width:15%;"></span>
								</div>

								<textarea class="sheet-desc" title="@{repeating_lvl-7-spells_$X_description}" name="attr_description" accept="Content"></textarea>
								<textarea class="sheet-macro-text" title="@{repeating_lvl-7-spells_$X_macro-text}" name="attr_macro-text">@{PC-whisper} &{template:pf_spell} @{toggle_spell_accessible} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_spell}}} {{name=@{name}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle}} @{spell_options}</textarea>
								<input type="hidden" name="attr_var_casterlevel_check" value="{{casterlevel_chk=[[ 1d20 + [[ @{casterlevel} ]] ]] }}" />
								<input type="hidden" name="attr_var_spellPen_check" value="{{spellPen_chk=[[ 1d20 + [[  @{SP-mod} ]] ]] }}" />
								<input type="hidden" name="attr_var_Concentration_check" value="{{Concentration_chk=[[ 1d20 + [[ @{Concentration-mod} ]] ]] }}" />
								<input type="hidden" name="attr_var_cast_def_check" value="{{cast_def_chk=[[ (1d20 + @{cast_def-mod})cs> [[ @{cast_def_dc} ]]cf<[[ @{cast_def_dc} - 1 ]] ]] }}" />
								<input type="hidden" name="attr_spell_options" value="{{cast_def=[[ @{cast_def_dc} ]] }}{{Concentration=[[ @{Concentration-mod} ]] }}{{spellPen=[[ @{SP-mod} ]] }}{{casterlevel=[[ @{casterlevel} ]] }}{{sr=@{sr}}}{{saving_throw=@{save}}}{{duration=@{duration}}}{{targets=@{targets}}}{{range=@{range}}}{{components=@{components}}}{{dc= [[ @{savedc} ]] }}{{casting_time=@{cast-time}}}{{school=@{school}}}{{level= @{spellclass} @{spell_level}}}@{toggle_casterlevel_check}@{toggle_spellPen_check}@{toggle_Concentration_check}@{toggle_cast_def_check}" />

								<div class="sheet-options sheet-table">
									<div class="sheet-table-row">
										<span class="sheet-table-cell sheet-small-label" style="padding-left:10px;"><label><input type="checkbox" class="sheet-boldlabel-check" name="attr_toggle_casterlevel_check" value="@{var_casterlevel_check}" title="@{repeating_lvl-7-spells_$X_casterlevel_check}" checked="checked" /><b title="Roll Caster Level Check"><span data-i18n="caster-level-check">Caster Level Check</span></b></label></span>
										<span class="sheet-table-cell sheet-small-label"><label><input type="checkbox" class="sheet-boldlabel-check" name="attr_toggle_spellPen_check" value="@{var_spellPen_check}" title="@{repeating_lvl-7-spells_$X_SP_check}" /><b title="Roll Spell Penetration Check"> <span data-i18n="spell-penetration-check">Spell Penetration Check</span></b></label></span>
										<span class="sheet-table-cell sheet-small-label"><label><input type="checkbox" class="sheet-boldlabel-check" name="attr_toggle_Concentration_check" value="@{var_Concentration_check}" title="@{repeating_lvl-7-spells_$X_Concentration_check}" /><b title="Roll Concentration Check"> <span data-i18n="concentration-check">Concentration Check</span></b></label></span>
										<span class="sheet-table-cell sheet-small-label"><label><input type="checkbox" class="sheet-boldlabel-check" name="attr_toggle_cast_def_check" value="@{var_cast_def_check}" title="@{repeating_lvl-7-spells_$X_cast_def_check}" /><b title="Roll Cast Defensively Check"> <span data-i18n="cast-defensively-check">Cast Defensively Check</span></b></label></span>
									</div>
								</div>

								<div class="sheet-repeating-id">
									<span data-i18n="identification-abbrv">ID</span>: <span class="sheet-selectable" name="attr_row_id" />
								</div>
							</div>
						</div>
					</fieldset>
				</div>
				<!-- Spells Level 8 -->
				<div class="sheet-repeating-sect sheet-repeating-fields">
					<span class="sheet-nontable-name" data-i18n="level-8-spells">Level 8 Spells</span>
					<fieldset class="repeating_lvl-8-spells">
						<div >
							<input type="checkbox" class="sheet-counted sheet-sect-show" title="Click to expand" data-i18n-title="showsect-cmd" data-i18n-aria-label="showsect-cmd" name="attr_row-show" value="1" checked="checked" /><span class="sheet-table-cell"></span>
							<span class="sheet-table-cell sheet-repeating-rollbutton"><button type="roll" name="attr_roll" title="%{selected|repeating_lvl-8-spells_$X_roll}" value="@{macro-text}"></button></span>
							<span class="sheet-table-cell sheet-small-label"><input title="@{repeating_lvl-8-spells_$X_used}" type="number" name="attr_used" value="0" ><br><span data-i18n="prepared">Prepped</span></span>
							<span class="sheet-table-cell sheet-small-label"><input title="@{repeating_lvl-8-spells_$X_name}" type="text" value="" name="attr_name" placeholder="Spell Name" data-i18n-placeholder="name" accept="Name"><br><span data-i18n="name">Name</span></span>
							<span class="sheet-table-cell sheet-small-label">
								<select title="@{repeating_lvl-8-spells_$X_spellclass}" name="attr_spellclass">
									<option value="@{spellclass-0-name}" data-i18n="class-0" selected>Class 0</option>
									<option value="@{spellclass-1-name}" data-i18n="2-ordinal-class">2nd Class</option>
									<option value="@{spellclass-2-name}" data-i18n="3-ordinal-class">3rd Class</option>
								</select>
								<input type="hidden" name="attr_spellclass_number" value="0" />
							<br><span data-i18n="class">Class</span>
							</span>
							<span class="sheet-table-cell sheet-small-label" style="width:5%;"><input title="@{repeating_lvl-8-spells_$X_spell_level}" type="number" value="0" name="attr_spell_level" /><br><span data-i18n="level">Level</span></span>
							<span class="sheet-table-cell sheet-small-label sheet-sect"><input title="@{repeating_lvl-8-spells_$X_school}" type="text" value="" name="attr_school" placeholder="Spell School [descriptor]" data-i18n-placeholder="school" accept="School"><br><span data-i18n="school">School</span></span>
							<span class="sheet-table-cell sheet-small-label sheet-sect"><input title="@{repeating_lvl-8-spells_$X_cast-time}" type="text" value="" name="attr_cast-time" placeholder="Casting Time" data-i18n-placeholder="casting-time" accept="Casting Time"/><br><span data-i18n="casting-time">Casting Time</span></span>

							<span class="sheet-table-cell sheet-small-label sheet-sect"><input title="@{repeating_lvl-8-spells_$X_DC_misc}" type="number" value="0" name="attr_DC_misc" placeholder="DC Mod" data-i18n-placeholder="difficulty-class-modifier-abbrv"/> <br><span data-i18n="difficulty-class-modifier-abbrv">DC Mod</span></span>
							<span class="sheet-table-cell sheet-small-label"><input title="@{repeating_lvl-8-spells_$X_savedc}" type="number" value="0" name="attr_savedc" class="sheet-calc" readonly="readonly" /> <br><span data-i18n="difficulty-class-abbrv">DC</span></span>
							<div></div>
							<span class="sheet-table-cell sheet-small-label sheet-sect"><input title="@{repeating_lvl-8-spells_$X_components}" type="text" value="" name="attr_components" placeholder="Components" data-i18n-placeholder="components" accept="Components"><br><span data-i18n="components">Components</span></span>
							<span class="sheet-table-cell sheet-small-label sheet-sect"><input title="@{repeating_lvl-8-spells_$X_range}" type="text" value="" name="attr_range" placeholder="Range" data-i18n-placeholder="range" accept="Range"><br><span data-i18n="range">Range</span></span>
							<span class="sheet-table-cell sheet-small-label sheet-sect"><input title="@{repeating_lvl-8-spells_$X_range_numeric}" type="number" value="0" name="attr_range_numeric" placeholder="0" data-i18n-placeholder="range" class="sheet-calc" readonly="readonly"><br><span data-i18n="range">Range</span></span>
							<span class="sheet-table-cell sheet-small-label sheet-sect">
								<input title="@{repeating_lvl-8-spells_$X_targets}" type="text" value="" name="attr_targets" placeholder="Targets/Area/Effect" data-i18n-placeholder="targets-area-effect" accept="Target">
								<br><span data-i18n="targets-area-effect">Targets/Area/Effect</span>
							</span>
							<span class="sheet-table-cell sheet-small-label sheet-sect"><input title="@{repeating_lvl-8-spells_$X_duration}" type="text" value="" name="attr_duration" placeholder="Duration" data-i18n-placeholder="duration" accept="Duration"/><br><span data-i18n="duration">Duration</span></span>
							<span class="sheet-table-cell sheet-small-label sheet-sect"><input title="@{repeating_lvl-8-spells_$X_save}" type="text" value="" name="attr_save" placeholder="Save Effect" data-i18n-placeholder="save" accept="Saving Throw"><br><span data-i18n="save-effect">Save Effect</span></span>
							<span class="sheet-table-cell sheet-small-label sheet-sect">
								<select title="@{repeating_lvl-8-spells_$X_sr}" name="attr_sr" accept="Spell Resistance">
									<option value="not-applicable" data-i18n="not-applicable-abbrv-default" selected>&#8226;N/A</option>
									<option value="Yes" data-i18n="yes">Yes</option>
									<option value="No" data-i18n="no">No</option>
									<option value="Yes (Harmless)" data-i18n="save-yes-harmless">Yes (Harmless)</option>
									<option value="No (Harmless)" data-i18n="save-no-harmless">No (Harmless)</option>
								</select>
								<br><span data-i18n="spell-resistance-abbrv">SR</span>
							</span>

							<div class="sheet-sect sheet-expand">
								<div class="sheet-table sheet-spell-misc">
									<span class="sheet-table-data" style="width:15%;"></span>
									<span class="sheet-table-cell sheet-small-label"><input title="@{repeating_lvl-8-spells_$X_CL_misc}" type="number" value="0" name="attr_CL_misc"/> <br><span data-i18n="caster-level-modifier-abbrv">CL Mod</span></span>
									<span class="sheet-table-cell sheet-small-label"><input title="@{repeating_lvl-8-spells_$X_casterlevel}" type="number" value="0" name="attr_casterlevel" class="sheet-calc" readonly="readonly" /> <br><span data-i18n="caster-level-abbrv">CL</span></span>
									<span class="sheet-table-data sheet-divider-lg" >|<br>&nbsp;</span>
									<span class="sheet-table-cell sheet-small-label"><input title="@{repeating_lvl-8-spells_$X_Concentration_misc}" type="number" value="0" name="attr_Concentration_misc" /> <br><span data-i18n="concentration-modifier-abbrv">Conc Mod</span></span>
									<span class="sheet-table-cell sheet-small-label"><input title="@{repeating_lvl-8-spells_$X_Concentration-mod}" type="number" value="0" name="attr_Concentration-mod" class="sheet-calc" readonly="readonly" /> <br><span data-i18n="concentration-abbrv">Conc</span></span>
									<span class="sheet-table-data sheet-divider-lg" >|<br>&nbsp;</span>
									<span class="sheet-table-cell sheet-small-label"><input title="@{repeating_lvl-8-spells_$X_cast_def-mod}" type="number" value="0" name="attr_cast_def-mod" class="sheet-calc" readonly="readonly" /> <br><span data-i18n="cast-defensively-abbrv">Cast Def</span></span>
									<span class="sheet-table-cell sheet-small-label"><input title="@{repeating_lvl-8-spells_$X_cast_def_dc}" type="number" value="0" name="attr_cast_def_dc" class="sheet-calc" readonly="readonly" /> <br><span data-i18n="cast-defensively-difficulty-class-abbrv">Cast Def DC</span></span>
									<span class="sheet-table-data sheet-divider-lg" >|<br>&nbsp;</span>
									<span class="sheet-table-cell sheet-small-label"><input title="@{repeating_lvl-8-spells_$X_SP_misc}" type="number" value="0" name="attr_SP_misc"/> <br><span data-i18n="spell-penetration-modifier-abbrv">Spell Pen Mod</span></span>
									<span class="sheet-table-cell sheet-small-label"><input title="@{repeating_lvl-8-spells_$X_SP-mod}" type="number" value="0" name="attr_SP-mod" class="sheet-calc" readonly="readonly" /> <br><span data-i18n="spell-penetration-abbrv">Spell Pen</span></span>
									<span class="sheet-table-data" style="width:15%;"></span>
								</div>

								<textarea class="sheet-desc" title="@{repeating_lvl-8-spells_$X_description}" name="attr_description" accept="Content"></textarea>
								<textarea class="sheet-macro-text" title="@{repeating_lvl-8-spells_$X_macro-text}" name="attr_macro-text">@{PC-whisper} &{template:pf_spell} @{toggle_spell_accessible} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_spell}}} {{name=@{name}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle}} @{spell_options}</textarea>
								<input type="hidden" name="attr_var_casterlevel_check" value="{{casterlevel_chk=[[ 1d20 + [[ @{casterlevel} ]] ]] }}" />
								<input type="hidden" name="attr_var_spellPen_check" value="{{spellPen_chk=[[ 1d20 + [[  @{SP-mod} ]] ]] }}" />
								<input type="hidden" name="attr_var_Concentration_check" value="{{Concentration_chk=[[ 1d20 + [[ @{Concentration-mod} ]] ]] }}" />
								<input type="hidden" name="attr_var_cast_def_check" value="{{cast_def_chk=[[ (1d20 + @{cast_def-mod})cs> [[ @{cast_def_dc} ]]cf<[[ @{cast_def_dc} - 1 ]] ]] }}" />
								<input type="hidden" name="attr_spell_options" value="{{cast_def=[[ @{cast_def_dc} ]] }}{{Concentration=[[ @{Concentration-mod} ]] }}{{spellPen=[[ @{SP-mod} ]] }}{{casterlevel=[[ @{casterlevel} ]] }}{{sr=@{sr}}}{{saving_throw=@{save}}}{{duration=@{duration}}}{{targets=@{targets}}}{{range=@{range}}}{{components=@{components}}}{{dc= [[ @{savedc} ]] }}{{casting_time=@{cast-time}}}{{school=@{school}}}{{level= @{spellclass} @{spell_level}}}@{toggle_casterlevel_check}@{toggle_spellPen_check}@{toggle_Concentration_check}@{toggle_cast_def_check}" />

								<div class="sheet-options sheet-table">
									<div class="sheet-table-row">
										<span class="sheet-table-cell sheet-small-label" style="padding-left:10px;"><label><input type="checkbox" class="sheet-boldlabel-check" name="attr_toggle_casterlevel_check" value="@{var_casterlevel_check}" title="@{repeating_lvl-8-spells_$X_casterlevel_check}" checked="checked" /><b title="Roll Caster Level Check"><span data-i18n="caster-level-check">Caster Level Check</span></b></label></span>
										<span class="sheet-table-cell sheet-small-label"><label><input type="checkbox" class="sheet-boldlabel-check" name="attr_toggle_spellPen_check" value="@{var_spellPen_check}" title="@{repeating_lvl-8-spells_$X_SP_check}" /><b title="Roll Spell Penetration Check"> <span data-i18n="spell-penetration-check">Spell Penetration Check</span></b></label></span>
										<span class="sheet-table-cell sheet-small-label"><label><input type="checkbox" class="sheet-boldlabel-check" name="attr_toggle_Concentration_check" value="@{var_Concentration_check}" title="@{repeating_lvl-8-spells_$X_Concentration_check}" /><b title="Roll Concentration Check"> <span data-i18n="concentration-check">Concentration Check</span></b></label></span>
										<span class="sheet-table-cell sheet-small-label"><label><input type="checkbox" class="sheet-boldlabel-check" name="attr_toggle_cast_def_check" value="@{var_cast_def_check}" title="@{repeating_lvl-8-spells_$X_cast_def_check}" /><b title="Roll Cast Defensively Check"> <span data-i18n="cast-defensively-check">Cast Defensively Check</span></b></label></span>
									</div>
								</div>

								<div class="sheet-repeating-id">
									<span data-i18n="identification-abbrv">ID</span>: <span class="sheet-selectable" name="attr_row_id" />
								</div>
							</div>
						</div>
					</fieldset>
				</div>
				<!-- Spells Level 9 -->
				<div class="sheet-repeating-sect sheet-repeating-fields">
					<span class="sheet-nontable-name" data-i18n="level-9-spells">Level 9 Spells</span>
					<fieldset class="repeating_lvl-9-spells">
						<div >
							<input type="checkbox" class="sheet-counted sheet-sect-show" title="Click to expand" data-i18n-title="showsect-cmd" data-i18n-aria-label="showsect-cmd" name="attr_row-show" value="1" checked="checked" /><span class="sheet-table-cell"></span>
							<span class="sheet-table-cell sheet-repeating-rollbutton"><button type="roll" name="attr_roll" title="%{selected|repeating_lvl-9-spells_$X_roll}" value="@{macro-text}"></button></span>
							<span class="sheet-table-cell sheet-small-label"><input title="@{repeating_lvl-9-spells_$X_used}" type="number" name="attr_used" value="0" ><br><span data-i18n="prepared">Prepped</span></span>
							<span class="sheet-table-cell sheet-small-label"><input title="@{repeating_lvl-9-spells_$X_name}" type="text" value="" name="attr_name" placeholder="Spell Name" data-i18n-placeholder="name" accept="Name"><br><span data-i18n="name">Name</span></span>
							<span class="sheet-table-cell sheet-small-label">
								<select title="@{repeating_lvl-9-spells_$X_spellclass}" name="attr_spellclass">
									<option value="@{spellclass-0-name}" data-i18n="class-0" selected>Class 0</option>
									<option value="@{spellclass-1-name}" data-i18n="2-ordinal-class">2nd Class</option>
									<option value="@{spellclass-2-name}" data-i18n="3-ordinal-class">3rd Class</option>
								</select>
								<input type="hidden" name="attr_spellclass_number" value="0" />
							<br><span data-i18n="class">Class</span>
							</span>
							<span class="sheet-table-cell sheet-small-label" style="width:5%;"><input title="@{repeating_lvl-9-spells_$X_spell_level}" type="number" value="0" name="attr_spell_level" /><br><span data-i18n="level">Level</span></span>
							<span class="sheet-table-cell sheet-small-label sheet-sect"><input title="@{repeating_lvl-9-spells_$X_school}" type="text" value="" name="attr_school" placeholder="Spell School [descriptor]" data-i18n-placeholder="school" accept="School"><br><span data-i18n="school">School</span></span>
							<span class="sheet-table-cell sheet-small-label sheet-sect"><input title="@{repeating_lvl-9-spells_$X_cast-time}" type="text" value="" name="attr_cast-time" placeholder="Casting Time" data-i18n-placeholder="casting-time" accept="Casting Time"/><br><span data-i18n="casting-time">Casting Time</span></span>

							<span class="sheet-table-cell sheet-small-label sheet-sect"><input title="@{repeating_lvl-9-spells_$X_DC_misc}" type="number" value="0" name="attr_DC_misc" placeholder="DC Mod" data-i18n-placeholder="difficulty-class-modifier-abbrv"/> <br><span data-i18n="difficulty-class-modifier-abbrv">DC Mod</span></span>
							<span class="sheet-table-cell sheet-small-label"><input title="@{repeating_lvl-9-spells_$X_savedc}" type="number" value="0" name="attr_savedc" class="sheet-calc" readonly="readonly" /> <br><span data-i18n="difficulty-class-abbrv">DC</span></span>
							<div></div>
							<span class="sheet-table-cell sheet-small-label sheet-sect"><input title="@{repeating_lvl-9-spells_$X_components}" type="text" value="" name="attr_components" placeholder="Components" data-i18n-placeholder="components" accept="Components"><br><span data-i18n="components">Components</span></span>
							<span class="sheet-table-cell sheet-small-label sheet-sect"><input title="@{repeating_lvl-9-spells_$X_range}" type="text" value="" name="attr_range" placeholder="Range" data-i18n-placeholder="range" accept="Range"><br><span data-i18n="range">Range</span></span>
							<span class="sheet-table-cell sheet-small-label sheet-sect"><input title="@{repeating_lvl-9-spells_$X_range_numeric}" type="number" value="0" name="attr_range_numeric" placeholder="0" data-i18n-placeholder="range" class="sheet-calc" readonly="readonly"><br><span data-i18n="range">Range</span></span>
							<span class="sheet-table-cell sheet-small-label sheet-sect">
								<input title="@{repeating_lvl-9-spells_$X_targets}" type="text" value="" name="attr_targets" placeholder="Targets/Area/Effect" data-i18n-placeholder="targets-area-effect" accept="Target">
								<br><span data-i18n="targets-area-effect">Targets/Area/Effect</span>
							</span>
							<span class="sheet-table-cell sheet-small-label sheet-sect"><input title="@{repeating_lvl-9-spells_$X_duration}" type="text" value="" name="attr_duration" placeholder="Duration" data-i18n-placeholder="duration" accept="Duration"/><br><span data-i18n="duration">Duration</span></span>
							<span class="sheet-table-cell sheet-small-label sheet-sect"><input title="@{repeating_lvl-9-spells_$X_save}" type="text" value="" name="attr_save" placeholder="Save Effect" data-i18n-placeholder="save" accept="Saving Throw"><br><span data-i18n="save-effect">Save Effect</span></span>
							<span class="sheet-table-cell sheet-small-label sheet-sect">
								<select title="@{repeating_lvl-9-spells_$X_sr}" name="attr_sr" accept="Spell Resistance">
									<option value="not-applicable" data-i18n="not-applicable-abbrv-default" selected>&#8226;N/A</option>
									<option value="Yes" data-i18n="yes">Yes</option>
									<option value="No" data-i18n="no">No</option>
									<option value="Yes (Harmless)" data-i18n="save-yes-harmless">Yes (Harmless)</option>
									<option value="No (Harmless)" data-i18n="save-no-harmless">No (Harmless)</option>
								</select>
								<br><span data-i18n="spell-resistance-abbrv">SR</span>
							</span>

							<div class="sheet-sect sheet-expand">
								<div class="sheet-table sheet-spell-misc">
									<span class="sheet-table-data" style="width:15%;"></span>
									<span class="sheet-table-cell sheet-small-label"><input title="@{repeating_lvl-9-spells_$X_CL_misc}" type="number" value="0" name="attr_CL_misc"/> <br><span data-i18n="caster-level-modifier-abbrv">CL Mod</span></span>
									<span class="sheet-table-cell sheet-small-label"><input title="@{repeating_lvl-9-spells_$X_casterlevel}" type="number" value="0" name="attr_casterlevel" class="sheet-calc" readonly="readonly" /> <br><span data-i18n="caster-level-abbrv">CL</span></span>
									<span class="sheet-table-data sheet-divider-lg" >|<br>&nbsp;</span>
									<span class="sheet-table-cell sheet-small-label"><input title="@{repeating_lvl-9-spells_$X_Concentration_misc}" type="number" value="0" name="attr_Concentration_misc" /> <br><span data-i18n="concentration-modifier-abbrv">Conc Mod</span></span>
									<span class="sheet-table-cell sheet-small-label"><input title="@{repeating_lvl-9-spells_$X_Concentration-mod}" type="number" value="0" name="attr_Concentration-mod" class="sheet-calc" readonly="readonly" /> <br><span data-i18n="concentration-abbrv">Conc</span></span>
									<span class="sheet-table-data sheet-divider-lg" >|<br>&nbsp;</span>
									<span class="sheet-table-cell sheet-small-label"><input title="@{repeating_lvl-9-spells_$X_cast_def-mod}" type="number" value="0" name="attr_cast_def-mod" class="sheet-calc" readonly="readonly" /> <br><span data-i18n="cast-defensively-abbrv">Cast Def</span></span>
									<span class="sheet-table-cell sheet-small-label"><input title="@{repeating_lvl-9-spells_$X_cast_def_dc}" type="number" value="0" name="attr_cast_def_dc" class="sheet-calc" readonly="readonly" /> <br><span data-i18n="cast-defensively-difficulty-class-abbrv">Cast Def DC</span></span>
									<span class="sheet-table-data sheet-divider-lg" >|<br>&nbsp;</span>
									<span class="sheet-table-cell sheet-small-label"><input title="@{repeating_lvl-9-spells_$X_SP_misc}" type="number" value="0" name="attr_SP_misc"/> <br><span data-i18n="spell-penetration-modifier-abbrv">Spell Pen Mod</span></span>
									<span class="sheet-table-cell sheet-small-label"><input title="@{repeating_lvl-9-spells_$X_SP-mod}" type="number" value="0" name="attr_SP-mod" class="sheet-calc" readonly="readonly" /> <br><span data-i18n="spell-penetration-abbrv">Spell Pen</span></span>
									<span class="sheet-table-data" style="width:15%;"></span>
								</div>

								<textarea class="sheet-desc" title="@{repeating_lvl-9-spells_$X_description}" name="attr_description" accept="Content"></textarea>
								<textarea class="sheet-macro-text" title="@{repeating_lvl-9-spells_$X_macro-text}" name="attr_macro-text">@{PC-whisper} &{template:pf_spell} @{toggle_spell_accessible} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_spell}}} {{name=@{name}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle}} @{spell_options}</textarea>
								<input type="hidden" name="attr_var_casterlevel_check" value="{{casterlevel_chk=[[ 1d20 + [[ @{casterlevel} ]] ]] }}" />
								<input type="hidden" name="attr_var_spellPen_check" value="{{spellPen_chk=[[ 1d20 + [[  @{SP-mod} ]] ]] }}" />
								<input type="hidden" name="attr_var_Concentration_check" value="{{Concentration_chk=[[ 1d20 + [[ @{Concentration-mod} ]] ]] }}" />
								<input type="hidden" name="attr_var_cast_def_check" value="{{cast_def_chk=[[ (1d20 + @{cast_def-mod})cs> [[ @{cast_def_dc} ]]cf<[[ @{cast_def_dc} - 1 ]] ]] }}" />
								<input type="hidden" name="attr_spell_options" value="{{cast_def=[[ @{cast_def_dc} ]] }}{{Concentration=[[ @{Concentration-mod} ]] }}{{spellPen=[[ @{SP-mod} ]] }}{{casterlevel=[[ @{casterlevel} ]] }}{{sr=@{sr}}}{{saving_throw=@{save}}}{{duration=@{duration}}}{{targets=@{targets}}}{{range=@{range}}}{{components=@{components}}}{{dc= [[ @{savedc} ]] }}{{casting_time=@{cast-time}}}{{school=@{school}}}{{level= @{spellclass} @{spell_level}}}@{toggle_casterlevel_check}@{toggle_spellPen_check}@{toggle_Concentration_check}@{toggle_cast_def_check}" />

								<div class="sheet-options sheet-table">
									<div class="sheet-table-row">
										<span class="sheet-table-cell sheet-small-label" style="padding-left:10px;"><label><input type="checkbox" class="sheet-boldlabel-check" name="attr_toggle_casterlevel_check" value="@{var_casterlevel_check}" title="@{repeating_lvl-9-spells_$X_casterlevel_check}" checked="checked" /><b title="Roll Caster Level Check"><span data-i18n="caster-level-check">Caster Level Check</span></b></label></span>
										<span class="sheet-table-cell sheet-small-label"><label><input type="checkbox" class="sheet-boldlabel-check" name="attr_toggle_spellPen_check" value="@{var_spellPen_check}" title="@{repeating_lvl-9-spells_$X_SP_check}" /><b title="Roll Spell Penetration Check"> <span data-i18n="spell-penetration-check">Spell Penetration Check</span></b></label></span>
										<span class="sheet-table-cell sheet-small-label"><label><input type="checkbox" class="sheet-boldlabel-check" name="attr_toggle_Concentration_check" value="@{var_Concentration_check}" title="@{repeating_lvl-9-spells_$X_Concentration_check}" /><b title="Roll Concentration Check"> <span data-i18n="concentration-check">Concentration Check</span></b></label></span>
										<span class="sheet-table-cell sheet-small-label"><label><input type="checkbox" class="sheet-boldlabel-check" name="attr_toggle_cast_def_check" value="@{var_cast_def_check}" title="@{repeating_lvl-9-spells_$X_cast_def_check}" /><b title="Roll Cast Defensively Check"> <span data-i18n="cast-defensively-check">Cast Defensively Check</span></b></label></span>
									</div>
								</div>

								<div class="sheet-repeating-id">
									<span data-i18n="identification-abbrv">ID</span>: <span class="sheet-selectable" name="attr_row_id" />
								</div>
							</div>
						</div>
					</fieldset>
				</div>
				<!-- NPC Spells 1 -->
				<div class="sheet-repeating-sect">
					<span class="sheet-nontable-name" data-i18n="non-player-character-class-one-spells">NPC Class 1 Spells</span>
					<div class="sheet-sect sheet-repeating-fields">
						<fieldset class="repeating_npc-spells1">
							<input type="checkbox" class="sheet-counted sheet-sect-show" title="Click to expand" data-i18n-title="showsect-cmd" data-i18n-aria-label="showsect-cmd" name="attr_spells1-show" value="1" checked="checked" /><span class="sheet-table-cell"></span>
							<span class="sheet-table-cell sheet-repeating-rollbutton"><button type="roll" name="attr_roll" title="%{selected|repeating_npc-spells1_$X_roll}" value="@{macro-text}"></button></span>
							<span class="sheet-table-cell sheet-small-label"><input title="@{repeating_npc-spells1_$X_used}" type="number" name="attr_used" value="0" /><br><span data-i18n="uses-per-day">Uses/Day</span></span>
							<span class="sheet-table-cell sheet-small-label" style="width:20%;"><input title="@{repeating_npc-spells1_$X_name}" type="text" name="attr_name" placeholder="Name" data-i18n-placeholder="name" /><br><span data-i18n="name">Name</span></span>
							<span class="sheet-table-cell sheet-small-label sheet-entry-30p-shrink"><input title="@{repeating_npc-spells1_$X_short-description}" type="text" name="attr_short-description" placeholder="Short Description" data-i18n-placeholder="short-description" /><br><span data-i18n="short-description-abbrv">Short Desc</span></span>
							<span class="sheet-table-cell sheet-small-label sheet-sect"><input title="@{repeating_npc-spells1_$X_level}" type="text" name="attr_level" value="" placeholder="Spell Level" data-i18n-placeholder="level" /><br><span data-i18n="level">Level</span></span>
							<span class="sheet-table-cell sheet-small-label"><input title="@{repeating_npc-spells1_$X_range}" type="text" name="attr_range" value="" placeholder="Range" data-i18n-placeholder="range" /><br><span data-i18n="range">Range</span></span>
							<span class="sheet-table-cell sheet-small-label sheet-sect"><input title="@{repeating_npc-spells1_$X_duration}" type="text" name="attr_duration" value="" placeholder="Duration" data-i18n-placeholder="duration" /><br><span data-i18n="duration">Duration</span></span>
							<span class="sheet-table-cell sheet-small-label"><input title="@{repeating_npc-spells1_$X_save}" type="text" name="attr_save" value="" placeholder="Save" data-i18n-placeholder="save" /><br><span data-i18n="save">Save</span></span>
							<span class="sheet-table-cell sheet-small-label sheet-sect" style="width:5.5em;">
								<select title="@{repeating_npc-spells1_$X_sr}" name="attr_sr">
									<option value="not-applicable" data-i18n="not-applicable-abbrv-default" selected>&#8226;N/A</option>
									<option value="Yes" data-i18n="yes">Yes</option>
									<option value="No" data-i18n="no">No</option>
									<option value="Yes (Harmless)" data-i18n="save-yes-harmless">Yes (Harmless)</option>
									<option value="No (Harmless)" data-i18n="save-no-harmless">No (Harmless)</option>
								</select>
							<br><span data-i18n="spell-resistance-abbrv">SR</span>
							</span>
							<div class="sheet-sect sheet-expand">
								<textarea class="sheet-macro-text" title="@{repeating_npc-spells1_$X_macro-text}" name="attr_macro-text">@{NPC-whisper} &{template:pf_generic} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_generic}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle}} {{name=@{name}}} {{Level=@{level}}} {{Range=@{range}}} {{Duration=@{duration}}} {{Save=@{save}}} {{SR=@{sr}}} {{description=@{short-description}}}</textarea>
								<div class="sheet-repeating-id">
									<span data-i18n="identification-abbrv">ID</span>: <span class="sheet-selectable" name="attr_row_id" />
								</div>
								<hr/>
							</div>
						</fieldset>

					</div>
				</div>
				<!-- NPC Spells 2 -->
				<div class="sheet-repeating-sect sheet-repeating-fields">
					<span class="sheet-nontable-name" data-i18n="non-player-character-class-two-spells">NPC Class 2 Spells</span>
					<fieldset class="repeating_npc-spells2">
						<input type="checkbox" class="sheet-counted sheet-sect-show" title="Click to expand" data-i18n-title="showsect-cmd" data-i18n-aria-label="showsect-cmd" name="attr_spells2-show" value="1" checked="checked" /><span class="sheet-table-cell"></span>
						<span class="sheet-table-cell sheet-repeating-rollbutton"><button type="roll" name="attr_roll" title="%{selected|repeating_npc-spells2_$X_roll}" value="@{macro-text}"></button></span>
						<span class="sheet-table-cell sheet-small-label"><input title="@{repeating_npc-spells2_$X_used}" type="number" name="attr_used" value="0" /><br><span data-i18n="uses-per-day">Uses/Day</span></span>
						<span class="sheet-table-cell sheet-small-label" style="width:20%;"><input title="@{repeating_npc-spells2_$X_name}" type="text" name="attr_name" placeholder="Name" data-i18n-placeholder="name" /><br><span data-i18n="name">Name</span></span>
						<span class="sheet-table-cell sheet-small-label sheet-entry-30p-shrink"><input title="@{repeating_npc-spells2_$X_short-description}" type="text" name="attr_short-description" placeholder="Short Description" data-i18n-placeholder="short-description" /><br><span data-i18n="short-description-abbrv">Short Desc</span></span>
						<span class="sheet-table-cell sheet-small-label sheet-sect"><input title="@{repeating_npc-spells2_$X_level}" type="text" name="attr_level" value="" placeholder="Spell Level" data-i18n-placeholder="level" /><br><span data-i18n="level">Level</span></span>
						<span class="sheet-table-cell sheet-small-label"><input title="@{repeating_npc-spells2_$X_range}" type="text" name="attr_range" value="" placeholder="Range" data-i18n-placeholder="range" /><br><span data-i18n="range">Range</span></span>
						<span class="sheet-table-cell sheet-small-label sheet-sect"><input title="@{repeating_npc-spells2_$X_duration}" type="text" name="attr_duration" value="" placeholder="Duration" data-i18n-placeholder="duration" /><br><span data-i18n="duration">Duration</span></span>
						<span class="sheet-table-cell sheet-small-label"><input title="@{repeating_npc-spells2_$X_save}" type="text" name="attr_save" value="" placeholder="Save" data-i18n-placeholder="save" /><br><span data-i18n="save">Save</span></span>
						<span class="sheet-table-cell sheet-small-label sheet-sect" style="width:5.5em;">
							<select title="@{repeating_npc-spells2_$X_sr}" name="attr_sr">
								<option value="not-applicable" data-i18n="not-applicable-abbrv-default" selected>&#8226;N/A</option>
								<option value="Yes" data-i18n="yes">Yes</option>
								<option value="No" data-i18n="no">No</option>
								<option value="Yes (Harmless)" data-i18n="save-yes-harmless">Yes (Harmless)</option>
								<option value="No (Harmless)" data-i18n="save-no-harmless">No (Harmless)</option>
							</select>
							<br><span data-i18n="spell-resistance-abbrv">SR</span>
						</span>
						<div class="sheet-sect sheet-expand">
							<textarea class="sheet-macro-text" title="@{repeating_npc-spells2_$X_macro-text}" name="attr_macro-text">@{NPC-whisper} &{template:pf_generic} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_generic}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle}} {{name=@{name}}} {{Level=@{level}}} {{Range=@{range}}} {{Duration=@{duration}}} {{Save=@{save}}} {{SR=@{sr}}} {{description=@{short-description}}}</textarea>
							<div class="sheet-repeating-id">
								<span data-i18n="identification-abbrv">ID</span>: <span class="sheet-selectable" name="attr_row_id" />
							</div>
						</div>
					</fieldset>
				</div>
			</div>
		</div>
	</div>
	<div data-i18n-aria-label="footnotes-aria" class="sheet-footnotes" aria-label="Footnote information">
		<hr style="border-color: #a9a9a9;">
		<ul style="list-style: none;">
			<li data-i18n="footnote-a">⒜ Evaluated at edit time, must evaluate to number. No queries. Extended Expressions allowed.</li>
			<li data-i18n="footnote-b">⒝ Evaluated at roll time in chat. Queries allowed. Must put [[brackets]] around rolls.</li>
			<li data-i18n="footnote-c">⒞ Evaluated at roll time in chat. Queries allowed. Must evaluate to number. No [[brackets]] needed.</li>
			<li data-i18n="footnote-d">⒟ Sent to roll template.</li>			
		</ul>		
    </div>
	<div data-i18n-aria-label="footer-aria" class="sheet-footer" aria-label="Help links and footer information">
		<div class="sheet-table">
			<span data-i18n="footer-info">Created by Samuel Marino w/contributions by Vince, Chris Buchholz, Magik, James W. | Last updated:</span> <i>03/27/2017 01:00am Est &nbsp;&nbsp;</i>v.<input type="text" style="width: 2.5em ; height: 1.4em ; vertical-align: top ; padding: 0px 2px 0 2px ; border: none" name="attr_PFSheet_Version" value="0" class="sheet-calc sheet-number" readonly="" title="A non-blank version indicates attributes have been successfully recalculated.">
		</div>
		<div class="sheet-table" style="margin-top: -.5em;">
			<span class="sheet-table-cell sheet-3col"><button type="roll" class="sheet-no-decoration" title="url will appear in chat" style="color: #0000ff" name="roll_blank" value="http://tinyurl.com/PF-Thread"><b style="font-size:.75em;" data-i18n="questions-feedback">Questions/Feedback?</b></button></span>
			<span class="sheet-table-cell sheet-3col"><button type="roll" class="sheet-no-decoration" title="url will appear in chat" style="color: #0000ff" name="roll_blank" value="http://tinyurl.com/Sheet-Guide"><b style="font-size:.75em;" data-i18n="sheet-guide">Wiki 'how to use' Sheet Guide</b></button></span>
			<span class="sheet-table-cell sheet-3col"><button type="roll" class="sheet-no-decoration" title="url will appear in chat" style="color: #0000ff" name="roll_blank" value="http://tinyurl.com/trans-pf-sheet"><b style="font-size:.75em;" data-i18n="help-translate">Help Translate</b></button></span>
		</div>
	</div>
	<div role="contentinfo" aria-label="rolltemplates" class="sheet-section-roll_templates" style="display:none;opacity:0;height:1em;overflow:hidden;">
		<!-- Spell Roll Templates -->
		<rolltemplate class="sheet-rolltemplate-pf_spell">
			<input type="checkbox" name="attr_use_specfont" value="1" class="sheet-accessible sheet-noshow" role="presentation" />
			<input type="checkbox" name="attr_use_specfont" value="2" class="sheet-comid-sans sheet-noshow" role="presentation" />
			<input type="checkbox" name="attr_use_specfont" value="3" class="sheet-segoe sheet-noshow" role="presentation" />
			<input type="checkbox" name="attr_use_specfont" value="4" class="sheet-lucida sheet-noshow" role="presentation" />
			<input type="checkbox" name="attr_use_specfont" value="5" class="sheet-fantasy sheet-noshow" role="presentation" />
			{{^accessible}}
			<div class="sheet-roll-table sheet-rolltemplate-pf_spell {{#color}}color-{{color}}{{/color}} {{#rounded}}rounded{{/rounded}}" role="presentation">
				<div class="sheet-roll-header" style="width:100%;">
					{{#header_image}}<span class="sheet-header-image">{{header_image}}</span>{{/header_image}}
					<span class="sheet-left">
						{{#character_name}}
						{{#character_id}}[{{character_name}}](https://journal.roll20.net/character/{{character_id}}){{/character_id}}
						{{^character_id}}{{character_name}}{{/character_id}}
						{{#name}}:{{/name}}
						{{/character_name}}
						{{#name}}
						{{#name_link}}[{{name}}]({{name_link}}){{/name_link}}
						{{^name_link}}{{name}}{{/name_link}}
						{{/name}}
					</span>
					{{#subtitle}}<span class="sheet-subtitle">{{subtitle}}</span>{{/subtitle}}
				</div>
				<div class="sheet-roll-group">
					{{#level}}<div class="sheet-roll-row"><div class="sheet-roll-cell">**<span data-i18n="spell-level">Spell Level</span>:**&nbsp;{{#spellclass}}{{spellclass}}{{/spellclass}}{{#class}}{{class}}{{/class}},&nbsp;{{level}}</div></div>{{/level}}
					{{#school}}<div class="sheet-roll-row"><div class="sheet-roll-cell">**<span data-i18n="school">School</span>:**&nbsp;{{school}}</div></div>{{/school}}
					{{#casting_time}}<div class="sheet-roll-row"><div class="sheet-roll-cell">**<span data-i18n="casting-time">Casting Time</span>:**&nbsp;{{casting_time}}</div></div>{{/casting_time}}
					{{#components}}<div class="sheet-roll-row"><div class="sheet-roll-cell">**<span data-i18n="spell-components">Components</span>:**&nbsp;{{components}}</div></div>{{/components}}
					{{#range}}<div class="sheet-roll-row">
						<div class="sheet-roll-cell">
							**<span data-i18n="range">Range</span>:**&nbsp;
							{{#close}}{{range}}&nbsp;(<span data-i18n="close">Close</span>){{/close}}
							{{#medium}}{{range}}&nbsp;(<span data-i18n="medium">Medium</span>){{/medium}}
							{{#long}}{{range}}&nbsp;(<span data-i18n="long">Long</span>){{/long}}
							{{#see_text}}<span data-i18n="see-text">See text</span>{{/see_text}}
							{{#personal}}<span data-i18n="personal">Personal</span>{{/personal}}
							{{#touch}}<span data-i18n="touch">Touch</span>{{/touch}}
							{{#number}}{{range}}{{/number}}
							{{#perlevel}}{{range}}{{#rangetext}}&nbsp;({{rangetext}}&nbsp;<span data-i18n="perlevel">Per Level</span>){{/rangetext}}{{/perlevel}}
							{{^perlevel}}{{#rangetext}}({{rangetext}}){{/rangetext}}{{/perlevel}}
						</div>
					</div>{{/range}}
					{{#targets}}<div class="sheet-roll-row"><div class="sheet-roll-cell">**<span data-i18n="effects-target">Effects/Target</span>:**&nbsp;{{targets}}</div></div>{{/targets}}
					{{#duration}}<div class="sheet-roll-row"><div class="sheet-roll-cell">**<span data-i18n="duration">Duration</span>:**&nbsp;{{duration}}</div></div>{{/duration}}
					{{#sr}}<div class="sheet-roll-row"><div class="sheet-roll-cell">**<span data-i18n="spell-resistance">Spell Resistance</span>:**&nbsp;{{sr}}</div></div>{{/sr}}
				</div>
				<div style="display:table;width:100%;">
					<div class="sheet-roll-group2">
						{{#saving_throw}}<div class="sheet-roll-row">
							<div class="sheet-roll-cell">**<span data-i18n="save-effect">Save</span>:**&nbsp;{{saving_throw}}</div>
							{{#dc}}<div class="sheet-roll-cell">**<span data-i18n="difficulty-class-abbrv">DC</span>:**&nbsp;{{dc}}</div>{{/dc}}
						</div>{{/saving_throw}}
						{{^casterlevel_chk}}{{#casterlevel}}
						<div class="sheet-roll-row"><div class="sheet-roll-cell">**<span data-i18n="caster-level">Caster Level</span>:**</div><div class="sheet-roll-cell">{{casterlevel}}</div></div>{{/casterlevel}}
						{{#sr}}{{#spellPen}}<div class="sheet-roll-row"><div class="sheet-roll-cell" style="text-indent:1em">**<span data-i18n="overcome-spell-resistance-abbrv">Overcome SR</span>:** +{{spellPen}}</div><div class="sheet-roll-cell"></div></div>{{/spellPen}}{{/sr}}
						{{/casterlevel_chk}}
						{{^Concentration_chk}}{{#Concentration}}
						<div class="sheet-roll-row"><div class="sheet-roll-cell">**<span data-i18n="concentration">Concentration</span>:**</div><div class="sheet-roll-cell">**+**{{Concentration}}</div></div>
						{{#cast_defDC}}
						<div class="sheet-roll-row">
							<div class="sheet-roll-cell" style="text-indent:1em">
								**<span data-i18n="cast-defensively">Cast Defensively</span>**&nbsp;
								{{#cast_def}}**+**{{cast_def}}{{/cast_def}}
							</div>
							<div class="sheet-roll-cell">**<span data-i18n="difficulty-class-abbrv">DC</span>:**&nbsp;{{cast_defDC}}</div>
						</div>
						{{/cast_defDC}}
						{{/Concentration}}{{/Concentration_chk}}
					</div>
					<div class="sheet-roll-group2">
						{{#casterlevel_chk}}<div class="sheet-roll-row"><div class="sheet-roll-cell">**<span data-i18n="rolls">Rolls</span>**</div><div></div></div>{{/casterlevel_chk}}
						{{^casterlevel_chk}}{{#Concentration_chk}}<div class="sheet-roll-row"><div class="sheet-roll-cell">**<span data-i18n="rolls">Rolls</span>**</div><div></div></div>{{/Concentration_chk}}{{/casterlevel_chk}}
						{{#casterlevel_chk}}
						<div class="sheet-roll-row"><div class="sheet-roll-cell">**<span data-i18n="caster-level-check">Caster Level Check</span>** {{#casterlevel}}&nbsp;(<span data-i18n="level">{{casterlevel}}</span>){{/casterlevel}}</div><div class="sheet-roll-cell">**=**{{casterlevel_chk}}</div></div>
						{{#sr}}{{#spellPen}}<div class="sheet-roll-row"><div class="sheet-roll-cell" style="text-indent:1em">**<span data-i18n="overcome-spell-resistance-abbrv">Overcome SR</span>:**&nbsp;**+**{{spellPen}}</div><div class="sheet-roll-cell"></div></div>{{/spellPen}}{{/sr}}
						{{/casterlevel_chk}}
						{{#Concentration_chk}}
						<div class="sheet-roll-row">
							<div class="sheet-roll-cell">**<span data-i18n="concentration-check">Concentration Check</span>** {{#Concentration}}&nbsp;**+**{{Concentration}}{{/Concentration}}</div>
							<div class="sheet-roll-cell">**=**{{Concentration_chk}}</div>
						</div>
						{{#cast_defDC}}
						<div class="sheet-roll-row">
							<div class="sheet-roll-cell" style="text-indent:1em">
								**<span data-i18n="cast-defensively">Cast Defensively</span>**&nbsp;
								{{#cast_def}}**+**{{cast_def}}{{/cast_def}}
							</div>
							<div class="sheet-roll-cell">**<span data-i18n="difficulty-class-abbrv">DC</span>:**&nbsp;{{cast_defDC}}</div>
						</div>
						{{/cast_defDC}}
						{{/Concentration_chk}}
						{{#spell_fail_check}}
						<div class="sheet-roll-row">
							<div class="sheet-roll-cell">**<span data-i18n="spell-failure-chk">Spell Failure Check</span>**</div>
							<div class="sheet-roll-cell">**=**{{spell_fail_check}}</div>
						</div>
						{{#spell_fail}}
						<div class="sheet-roll-row">
							<div class="sheet-roll-cell">**<span data-i18n="spell-failure">Spell Failure</span> %**</div>
							<div class="sheet-roll-cell">**=**{{spell_fail}}</div>
						</div>
						{{/spell_fail}}
						{{/spell_fail_check}}
						{{#spelldamage}}
						<div class="sheet-roll-row">
							<div class="sheet-roll-cell">**<span data-i18n="damage">Damage</span>**</div>
							<div class="sheet-roll-cell">**=**{{spelldamage}}{{#spelldamagetype}}&nbsp;{{spelldamagetype}}{{/spelldamagetype}}</div>
						</div>
						{{/spelldamage}}
						{{#attack}}
						<div class="sheet-roll-row"><div class="sheet-roll-cell">**<span data-i18n="attack">Attack</span>**</div><div class="sheet-roll-cell">{{attack}}</div></div>
						{{#crit_confirm}}{{#rollWasCrit() attack}}<div class="sheet-roll-row"><div class="sheet-roll-cell" style="text-indent:0.5em">**<span data-i18n="critical-confirm">Crit Confirm</span>**</div><div class="sheet-roll-cell">{{crit_confirm}}</div></div>{{/rollWasCrit() attack}}{{/crit_confirm}}
						{{#damage}}<div class="sheet-roll-row"><div class="sheet-roll-cell">**<span data-i18n="damage">Damage</span>**</div><div class="sheet-roll-cell">{{damage}}</div></div>{{/damage}}
						{{#crit_damage}}{{#rollWasCrit() attack}}<div class="sheet-roll-row"><div class="sheet-roll-cell" style="text-indent:0.5em">**<span data-i18n="critical-damage">Crit Damage</span>**</div><div class="sheet-roll-cell">+{{crit_damage}}</div></div>{{/rollWasCrit() attack}}{{/crit_damage}}
						{{/attack}}
						{{^attack}}{{#damage}}<div class="sheet-roll-row"><div class="sheet-roll-cell">**<span data-i18n="damage">Damage</span>**</div><div class="sheet-roll-cell">+{{damage}}</div></div>{{/damage}}{{/attack}}
						{{#attack2}}
						<div class="sheet-roll-row"><div class="sheet-roll-cell">**<span data-i18n="attack-2">Attack 2</span>**</div><div class="sheet-roll-cell">{{attack2}}</div></div>
						{{#crit_confirm2}}{{#rollWasCrit() attack2}}<div class="sheet-roll-row"><div class="sheet-roll-cell" style="text-indent:0.5em">**<span data-i18n="critical-confirm">Crit Confirm</span>**</div><div class="sheet-roll-cell">{{crit_confirm2}}</div></div>{{/rollWasCrit() attack2}}{{/crit_confirm2}}
						{{#damage2}}<div class="sheet-roll-row"><div class="sheet-roll-cell">**<span data-i18n="damage">Damage</span>**</div><div class="sheet-roll-cell">{{damage2}}</div></div>{{/damage2}}
						{{#crit_damage2}}{{#rollWasCrit() attack2}}<div class="sheet-roll-row"><div class="sheet-roll-cell" style="text-indent:0.5em">**<span data-i18n="critical-damage">Crit Damage</span>**</div><div class="sheet-roll-cell">+{{crit_damage2}}</div></div>{{/rollWasCrit() attack2}}{{/crit_damage2}}
						{{/attack2}}
						{{^attack2}}{{#damage2}}<div class="sheet-roll-row"><div class="sheet-roll-cell">**<span data-i18n="damage">Damage</span>**</div><div class="sheet-roll-cell">+{{damage2}}</div></div>{{/damage2}}{{/attack2}}
						{{#attack3}}
						<div class="sheet-roll-row"><div class="sheet-roll-cell">**<span data-i18n="attack-3">Attack 3</span>**</div><div class="sheet-roll-cell">{{attack3}}</div></div>
						{{#crit_confirm3}}{{#rollWasCrit() attack3}}<div class="sheet-roll-row"><div class="sheet-roll-cell" style="text-indent:0.5em">**<span data-i18n="critical-confirm">Crit Confirm</span>**</div><div class="sheet-roll-cell">{{crit_confirm3}}</div></div>{{/rollWasCrit() attack3}}{{/crit_confirm3}}
						{{#damage3}}<div class="sheet-roll-row"><div class="sheet-roll-cell">**<span data-i18n="damage">Damage</span>**</div><div class="sheet-roll-cell">{{damage3}}</div></div>{{/damage3}}
						{{#crit_damage3}}{{#rollWasCrit() attack3}}<div class="sheet-roll-row"><div class="sheet-roll-cell" style="text-indent:0.5em">**<span data-i18n="critical-damage">Crit Damage</span>**</div><div class="sheet-roll-cell">+{{crit_damage3}}</div></div>{{/rollWasCrit() attack3}}{{/crit_damage3}}
						{{/attack3}}
						{{^attack3}}{{#damage3}}<div class="sheet-roll-row"><div class="sheet-roll-cell">**<span data-i18n="damage">Damage</span>**</div><div class="sheet-roll-cell">+{{damage3}}</div></div>{{/damage3}}{{/attack3}}
						{{#attack4}}
						<div class="sheet-roll-row"><div class="sheet-roll-cell">**<span data-i18n="attack-4">Attack 4</span>**</div><div class="sheet-roll-cell">{{attack4}}</div></div>
						{{#crit_confirm4}}{{#rollWasCrit() attack4}}<div class="sheet-roll-row"><div class="sheet-roll-cell" style="text-indent:0.5em">**<span data-i18n="critical-confirm">Crit Confirm</span>**</div><div class="sheet-roll-cell">{{crit_confirm4}}</div></div>{{/rollWasCrit() attack4}}{{/crit_confirm4}}
						{{#damage4}}<div class="sheet-roll-row"><div class="sheet-roll-cell">**<span data-i18n="damage">Damage</span>**</div><div class="sheet-roll-cell">{{damage4}}</div></div>{{/damage4}}
						{{#crit_damage4}}{{#rollWasCrit() attack4}}<div class="sheet-roll-row"><div class="sheet-roll-cell" style="text-indent:0.5em">**<span data-i18n="critical-damage">Crit Damage</span>**</div><div class="sheet-roll-cell">+{{crit_damage4}}</div></div>{{/rollWasCrit() attack4}}{{/crit_damage4}}
						{{/attack4}}
						{{^attack4}}{{#damage4}}<div class="sheet-roll-row"><div class="sheet-roll-cell">**<span data-i18n="damage">Damage</span>**</div><div class="sheet-roll-cell">+{{damage4}}</div></div>{{/damage4}}{{/attack4}}
						{{#allprops() color accessible rounded spelldamage spelldamagetype spellclass class cast_defDC header_image character_name character_id name_link subtitle deafened_note school level casterlevel rangetext norangetext casting_time components range targets duration saving_throw dc sr Concentration spellPen cast_def Concentration_chk spellPen_chk casterlevel_chk description close medium long see_text personal touch number perlevel blank unknownrange spell_fail_check spell_fail attack damage crit_confirm crit_damage attack2 damage2 crit_confirm2 crit_damage2 attack3 damage3 crit_confirm3 crit_damage3 attack4 damage4 crit_confirm4 crit_damage4 spells_notes generic_note}}
						<div class="sheet-roll-row"><div class="sheet-roll-cell">**{{key}}**:</div><div class="sheet-roll-cell">{{value}}</div></div>
						{{/allprops() color accessible rounded spelldamage spelldamagetype spellclass class cast_defDC header_image character_name character_id name_link subtitle deafened_note school level casterlevel rangetext norangetext casting_time components range targets duration saving_throw dc sr Concentration spellPen cast_def Concentration_chk spellPen_chk casterlevel_chk description close medium long see_text personal touch number perlevel blank unknownrange spell_fail_check spell_fail attack damage crit_confirm crit_damage attack2 damage2 crit_confirm2 crit_damage2 attack3 damage3 crit_confirm3 crit_damage3 attack4 damage4 crit_confirm4 crit_damage4 spells_notes generic_note}}
					</div>
				</div>
				<div class="sheet-roll-group">
					{{#description}}<div class="sheet-roll-row sheet-roll-description"><div class="sheet-roll-cell">{{description}}</div></div>{{/description}}
					{{#spells_notes}}<div class="sheet-roll-row sheet-roll-description"><div class="sheet-roll-cell">**<span data-i18n="spells-notes">Spells Notes</span>:**{{spells_notes}}</div></div>{{/spells_notes}}
					{{#generic_note}}<div class="sheet-roll-row sheet-roll-description"><div class="sheet-roll-cell">{{generic_note}}</div></div>{{/generic_note}}
					{{#deafened_note}}<div class="sheet-roll-row sheet-roll-description"><div class="sheet-roll-cell">**<span data-i18n="deafened">Deafened</span>:**<span data-i18n="condition-deafened-spellonly">Has a 20% chance of spell failure when casting spells with verbal components.</span></div></div>{{/deafened_note}}				
				</div>
			</div>
			{{/accessible}}
			{{#accessible}}
			<div class="sheet-roll-accessible {{#color}}color-{{color}}{{/color}}" role="presentation">
				<h3 class="sheet-roll-header">
					{{#character_name}}{{character_name}}{{#name}}: {{/name}}{{/character_name}}
					{{#name}}{{name}}{{/name}}
				</h3>
				{{#subtitle}}<h4>{{subtitle}}</h4>{{/subtitle}}
				<h4>Spell Details</h4>
				{{#level}}<label>**<span data-i18n="spell-level">Spell Level</span>:**<span>{{#spellclass}}&nbsp;{{spellclass}},{{/spellclass}}{{#class}}&nbsp;{{class}},{{/class}}&nbsp;{{level}}</span></label>{{/level}}
				{{#school}}<label>**<span data-i18n="school">School</span>:**<span>{{school}}</span></label>{{/school}}
				{{#casting_time}}<label>**<span data-i18n="casting-time">Casting Time</span>:**<span>{{casting_time}}</span></label>{{/casting_time}}
				{{#components}}<label>**<span data-i18n="spell-components">Components</span>:**<span>{{components}}</span></label>{{/components}}
				{{#range}}<label>
					**<span data-i18n="range">Range</span>:**<span>
						{{#close}}{{range}} (<span data-i18n="close">Close</span>){{/close}}
						{{#medium}}{{range}} (<span data-i18n="medium">Medium</span>){{/medium}}
						{{#long}}{{range}} (<span data-i18n="long">Long</span>){{/long}}
						{{#see_text}}<span data-i18n="see-text">See text</span>{{/see_text}}
						{{#personal}}<span data-i18n="personal">Personal</span>{{/personal}}
						{{#touch}}<span data-i18n="touch">Touch</span>{{/touch}}
						{{#number}}{{range}}{{/number}}
						{{#perlevel}}{{range}} {{#rangetext}}({{rangetext}} <span data-i18n="perlevel">Per Level</span>){{/rangetext}}{{/perlevel}}
						{{^perlevel}}{{#rangetext}}({{rangetext}}){{/rangetext}}{{/perlevel}}
					</span>
				</label>{{/range}}
				{{#targets}}<label>**<span data-i18n="effects-target">Effects/Target</span>:**<span>{{targets}}</span></label>{{/targets}}
				{{#duration}}<label>**<span data-i18n="duration">Duration</span>:**<span>{{duration}}</span></label>{{/duration}}
				{{#sr}}<label>**<span data-i18n="spell-resistance">Spell Resistance</span>:**<span>{{sr}}</span></label>{{/sr}}
				{{#saving_throw}}<label>
					**<span data-i18n="save-effect">Save</span>:** <span>{{saving_throw}}</span>
					{{#dc}}<span class="sheet-right">**<span data-i18n="difficulty-class-abbrv">DC</span>**<span>{{dc}}</span></span>{{/dc}}
				</label>
				{{/saving_throw}}
				{{^casterlevel_chk}}{{#casterlevel}}
				<label>**<span data-i18n="caster-level">Caster Level</span>:**<span class="sheet-right">{{casterlevel}}</span></label>
				{{#sr}}{{#spellPen}}<label style="text-indent:1em">**<span data-i18n="overcome-spell-resistance-abbrv">Overcome SR</span>**<span>+{{spellPen}}</span></label>{{/spellPen}}{{/sr}}
				{{/casterlevel}}{{/casterlevel_chk}}
				{{^Concentration_chk}}{{#Concentration}}
				<label>**<span data-i18n="concentration">Concentration</span> **<span class="sheet-right">**+**{{Concentration}}</span></label>
				{{#cast_defDC}}<label style="text-indent:1em">
					<span>**<span data-i18n="cast-defensively">Cast Defensively</span>:**&nbsp;{{#cast_def}}**+**{{cast_def}}{{/cast_def}}</span>
					<span class="sheet-right">**<span data-i18n="difficulty-class-abbrv">DC</span>**&nbsp;{{cast_defDC}}</span>
				</label>{{/cast_defDC}}
				{{/Concentration}}{{/Concentration_chk}}
				{{#casterlevel_chk}}<h4 data-i18n="rolls">Rolls</h4>{{/casterlevel_chk}}
				{{^casterlevel_chk}}{{#Concentration_chk}}<h4>Rolls</h4>{{/Concentration_chk}}{{/casterlevel_chk}}
				{{#casterlevel_chk}}<label>**<span data-i18n="caster-level-check">Caster Level Check</span>** {{#casterlevel}}(<span data-i18n="level">Level</span>&nbsp;{{casterlevel}}){{/casterlevel}}<span class="sheet-right"> **=**{{casterlevel_chk}}</span></label>
				{{#sr}}{{#spellPen}}<label style="text-indent:1em"> **<span data-i18n="overcome-spell-resistance-abbrv">Overcome SR</span>: <span>+**{{spellPen}}</span></label>{{/spellPen}}{{/sr}}
				{{/casterlevel_chk}}
				{{#Concentration_chk}}<label>**<span data-i18n="concentration-check">Concentration Check</span>** {{#Concentration}}**+**{{Concentration}}{{/Concentration}}<span class="sheet-right">**=**{{Concentration_chk}}</span></label>
				{{#cast_defDC}}<label style="text-indent:1em">
					<span>**<span data-i18n="cast-defensively">Cast Defensively</span>:**&nbsp;{{#cast_def}}**+**{{cast_def}}{{/cast_def}}</span>
					<span class="sheet-right">**<span data-i18n="difficulty-class-abbrv">DC</span>**&nbsp;{{cast_defDC}}</span>
				</label>{{/cast_defDC}}
				{{/Concentration_chk}}
				{{#spell_fail_check}}
				<label>
					<span>
						**<span data-i18n="spell-failure-chk">Spell Failure Check</span>**
						<span class="sheet-right">**=**{{spell_fail_check}}</span>
					</span>
				</label>
				{{#spell_fail}}
				<label style="text-indent:1em">
					<span>
						**<span data-i18n="spell-failure">Spell Failure</span> %**
						<span class="sheet-right">**=**{{spell_fail}}</span>
					</span>
				</label>
				{{/spell_fail}}
				{{/spell_fail_check}}
				{{#spelldamage}}
				<label>
					<span>
						**<span data-i18n="damage">Damage</span>**
						<span class="sheet-right">**=**{{spelldamage}}{{#spelldamagetype}}&nbsp;{{spelldamagetype}}{{/spelldamagetype}}</span>
					</span>
				</label>
				{{/spelldamage}}
				{{#attack}}
				<h4>Attack:</h4>
				<label>**<span data-i18n="attack">Attack</span>:**<span class="sheet-right">{{attack}}</span></label>
				{{#crit_confirm}}{{#rollWasCrit() attack}}<label>**<span data-i18n="critical-confirm">Crit Confirm</span>**<span class="sheet-right">{{crit_confirm}}</span></label>{{/rollWasCrit() attack}}{{/crit_confirm}}
				{{#damage}}<label>**<span data-i18n="damage">Damage</span>**<span class="sheet-right">{{damage}}</span></label>{{/damage}}
				{{#crit_damage}}{{#rollWasCrit() attack}}<label>**<span data-i18n="critical-damage">Crit Damage</span>**<span class="sheet-right">+{{crit_damage}}</span></label>{{/rollWasCrit() attack}}{{/crit_damage}}
				{{/attack}}
				{{^attack}}
				{{#damage}}<label>**<span data-i18n="damage">Damage</span>**<span class="sheet-right">+{{damage}}</span></label>{{/damage}}
				{{/attack}}
				{{#attack2}}
				<h4>Attack 2:</h4>
				<label>**<span data-i18n="attack-2">Attack 2</span>:**<span class="sheet-right">{{attack2}}</span></label>
				{{#crit_confirm2}}{{#rollWasCrit() attack2}}<label>**<span data-i18n="critical-confirm">Crit Confirm</span>**<span class="sheet-right">{{crit_confirm2}}</span></label>{{/rollWasCrit() attack2}}{{/crit_confirm2}}
				{{#damage2}}<label>**<span data-i18n="damage">Damage</span>**<span class="sheet-right">{{damage2}}</span></label>{{/damage2}}
				{{#crit_damage2}}{{#rollWasCrit() attack2}}<label>**<span data-i18n="critical-damage">Crit Damage</span>**<span class="sheet-right">+{{crit_damage2}}</span></label>{{/rollWasCrit() attack2}}{{/crit_damage2}}
				{{/attack2}}
				{{^attack2}}
				{{#damage2}}<label>**<span data-i18n="damage">Damage</span>**<span class="sheet-right">+{{damage2}}</span></label>{{/damage2}}
				{{/attack2}}
				{{#attack3}}
				<h4>Attack 3:</h4>
				<label>**<span data-i18n="attack-3">Attack 3</span>:**<span class="sheet-right">{{attack3}}</span></label>
				{{#crit_confirm3}}{{#rollWasCrit() attack3}}<label>**<span data-i18n="critical-confirm">Crit Confirm</span>**<span class="sheet-right">{{crit_confirm3}}</span></label>{{/rollWasCrit() attack3}}{{/crit_confirm3}}
				{{#damage3}}<label>**<span data-i18n="damage">Damage</span>**<span class="sheet-right">{{damage3}}</span></label>{{/damage3}}
				{{#crit_damage3}}{{#rollWasCrit() attack3}}<label>**<span data-i18n="critical-damage">Crit Damage</span>**<span class="sheet-right">+{{crit_damage3}}</span></label>{{/rollWasCrit() attack3}}{{/crit_damage3}}
				{{/attack3}}
				{{^attack3}}
				{{#damage3}}<label>**<span data-i18n="damage">Damage</span>**<span class="sheet-right">+{{damage3}}</span></label>{{/damage3}}
				{{/attack3}}
				{{#attack4}}
				<h4>Attack 4:</h4>
				<label>**<span data-i18n="attack-4">Attack 4</span>:**<span class="sheet-right">{{attack4}}</span></label>
				{{#crit_confirm4}}{{#rollWasCrit() attack4}}<label>**<span data-i18n="critical-confirm">Crit Confirm</span>**<span class="sheet-right">{{crit_confirm4}}</span></label>{{/rollWasCrit() attack4}}{{/crit_confirm4}}
				{{#damage4}}<label>**<span data-i18n="damage">Damage</span>**<span class="sheet-right">{{damage4}}</span></label>{{/damage4}}
				{{#crit_damage4}}{{#rollWasCrit() attack4}}<label>**<span data-i18n="critical-damage">Crit Damage</span>**<span class="sheet-right">+{{crit_damage4}}</span></label>{{/rollWasCrit() attack4}}{{/crit_damage4}}
				{{/attack4}}
				{{^attack4}}
				{{#damage4}}<label>**<span data-i18n="damage">Damage</span>**<span class="sheet-right">+{{damage4}}</span></label>{{/damage4}}
				{{/attack4}}
				{{#allprops() color accessible rounded spelldamage spelldamagetype spellclass class cast_defDC header_image character_name character_id name_link subtitle deafened_note school level casterlevel rangetext norangetext casting_time components range targets duration saving_throw dc sr Concentration spellPen cast_def Concentration_chk spellPen_chk casterlevel_chk description close medium long see_text personal touch number perlevel blank unknownrange spell_fail_check spell_fail attack damage crit_confirm crit_damage attack2 damage2 crit_confirm2 crit_damage2 attack3 damage3 crit_confirm3 crit_damage3 attack4 damage4 crit_confirm4 crit_damage4 spells_notes generic_note}}
				<label>**{{key}}**:<span class="sheet-right">{{value}}</span></label>
				{{/allprops() color accessible rounded spelldamage spelldamagetype spellclass class cast_defDC header_image character_name character_id name_link subtitle deafened_note school level casterlevel rangetext norangetext casting_time components range targets duration saving_throw dc sr Concentration spellPen cast_def Concentration_chk spellPen_chk casterlevel_chk description close medium long see_text personal touch number perlevel blank unknownrange spell_fail_check spell_fail attack damage crit_confirm crit_damage attack2 damage2 crit_confirm2 crit_damage2 attack3 damage3 crit_confirm3 crit_damage3 attack4 damage4 crit_confirm4 crit_damage4 spells_notes generic_note}}
				{{#description}}<span class="sheet-roll-description">{{description}}</span>{{/description}}
				{{#generic_note}}<span class="sheet-roll-description">{{generic_note}}</span>{{/generic_note}}
				{{#spells_notes}}<h4 data-i18n="description">Spells Notes</h4><span class="sheet-roll-description">{{spells_notes}}</span>{{/spells_notes}}
				{{#deafened_note}}<h4 data-i18n="deafened">Deafened</h4>
				<label><span data-i18n="condition-deafened-spellonly">Has a 20% chance of spell failure when casting spells with verbal components.</span></label>
				{{/deafened_note}}				
			</div>
			{{/accessible}}
		</rolltemplate>
		<!-- Attack Roll Templates -->
		<rolltemplate class="sheet-rolltemplate-pf_attack">
			<input type="checkbox" name="attr_use_specfont" value="1" class="sheet-accessible sheet-noshow" role="presentation" />
			<input type="checkbox" name="attr_use_specfont" value="2" class="sheet-comid-sans sheet-noshow" role="presentation" />
			<input type="checkbox" name="attr_use_specfont" value="3" class="sheet-segoe sheet-noshow" role="presentation" />
			<input type="checkbox" name="attr_use_specfont" value="4" class="sheet-lucida sheet-noshow" role="presentation" />
			<input type="checkbox" name="attr_use_specfont" value="5" class="sheet-fantasy sheet-noshow" role="presentation" />
			{{^accessible}}
			<div class="sheet-roll-table {{#color}}color-{{color}}{{/color}} {{#rounded}}rounded{{/rounded}}" role="presentation">
				<div class="sheet-roll-header" style="width:100%;">
					{{#header_image}}<span class="sheet-header-image">{{header_image}}</span>{{/header_image}}
					<span class="sheet-left">
						{{#character_name}}
						{{#character_id}}[{{character_name}}](https://journal.roll20.net/character/{{character_id}}){{/character_id}}
						{{^character_id}}{{character_name}}{{/character_id}}
						{{#name}}:{{/name}}
						{{/character_name}}
						{{#name}}
						{{#name_link}}[{{name}}]({{name_link}}){{/name_link}}
						{{^name_link}}{{name}}{{/name_link}}
						{{/name}}
					</span>
					{{#subtitle}}<span class="sheet-subtitle">{{subtitle}}</span>{{/subtitle}}
				</div>
				<div style="display:table;width:100%;">
					<div class="sheet-roll-groupi">
						{{^no_attack_roll}}{{#attack}}<div class="sheet-roll-row"><div class="sheet-roll-cell sheet-atk">**{{^attack1name}}<span data-i18n="attack">Attack</span>{{/attack1name}}{{#attack1name}}{{attack1name}}{{/attack1name}}**</div><div class="sheet-roll-cell sheet-left">{{attack}}{{^vsother}}{{#vs}}&nbsp;{{#vsac}}<span class="sheet-vs" data-i18n="versus-armor-class">vs AC</span>{{/vsac}}{{#vstouch}}<span class="sheet-vs" data-i18n="versus-touch">vs Touch</span>{{/vstouch}}{{#vsff}}<span class="sheet-vs" data-i18n="versus-flat-footed">vs FF</span>{{/vsff}}{{#vsfft}}<span class="sheet-vs" data-i18n="versus-flat-footed-touch">vs FF Touch</span>{{/vsfft}}{{#vscmd}}<span class="sheet-vs" data-i18n="versus-combat-maneuver-defense">vs CMD</span>{{/vscmd}}{{#vscmb}}<span class="sheet-vs" data-i18n="versus-combat-maneuver-bonus">vs CMB</span>{{/vscmb}}{{/vs}}{{/vsother}}</div></div>{{/attack}}{{/no_attack_roll}}
						{{^no_damage}}{{#damage}}<div class="sheet-roll-row"><div class="sheet-roll-cell sheet-dmg">**<span data-i18n="damage">Damage</span>**</div><div class="sheet-roll-cell">{{^attack}}+{{/attack}}{{damage}}</div></div>{{/damage}}{{/no_damage}}
						{{#precision_dmg1}}<div class="sheet-roll-row"><div class="sheet-roll-cell sheet-dmg-x" data-i18n-title="precision-abbrv" data-i18n-aria-label="precision-abbrv">{{#precision_dmg1_type}}**{{precision_dmg1_type}}**{{/precision_dmg1_type}}{{^precision_dmg1_type}}**<span data-i18n="precision-abbrv">Extra Dmg</span>**{{/precision_dmg1_type}}</div><div class="sheet-roll-cell">{{precision_dmg1}}</div></div>{{/precision_dmg1}}
						{{#precision_dmg2}}<div class="sheet-roll-row"><div class="sheet-roll-cell sheet-dmg-x" data-i18n-title="precision-abbrv" data-i18n-aria-label="precision-abbrv">{{#precision_dmg2_type}}**{{precision_dmg2_type}}**{{/precision_dmg2_type}}{{^precision_dmg2_type}}**<span data-i18n="precision-abbrv">Extra Dmg</span>**{{/precision_dmg2_type}}</div><div class="sheet-roll-cell">{{precision_dmg2}}</div></div>{{/precision_dmg2}}
					</div>
					{{^no_attack_roll}}<div class="sheet-roll-groupc">
						{{#rollWasCrit() attack}}
						{{#crit_confirm}}<div class="sheet-roll-row sheet-crit-row"><div class="sheet-roll-cell sheet-confirm">**<span data-i18n="critical-confirm">Crit Confirm</span>**</div><div class="sheet-roll-cell sheet-left">{{crit_confirm}}{{^vsother}}{{#vs}}&nbsp;{{#vsac}}<span class="sheet-vs" data-i18n="versus-armor-class">vs AC</span>{{/vsac}}{{#vstouch}}<span class="sheet-vs" data-i18n="versus-touch">vs Touch</span>{{/vstouch}}{{#vsff}}<span class="sheet-vs" data-i18n="versus-flat-footed">vs FF</span>{{/vsff}}{{#vsfft}}<span class="sheet-vs" data-i18n="versus-flat-footed-touch">vs FF Touch</span>{{/vsfft}}{{#vscmd}}<span class="sheet-vs" data-i18n="versus-combat-maneuver-defense">vs CMD</span>{{/vscmd}}{{#vscmb}}<span class="sheet-vs" data-i18n="versus-combat-maneuver-bonus">vs CMB</span>{{/vscmb}}{{/vs}}{{/vsother}}</div></div>{{/crit_confirm}}
						{{#crit_damage}}<div class="sheet-roll-row"><div class="sheet-roll-cell sheet-crit-dmg">**<span data-i18n="critical-damage">Crit Damage</span>**</div><div class="sheet-roll-cell">+{{crit_damage}}</div></div>{{/crit_damage}}
						{{#critical_dmg1}}<div class="sheet-roll-row"><div class="sheet-roll-cell sheet-crit-dmg-x" data-i18n-title="extra-critical-damage" data-i18n-aria-label="extra-critical-damage">{{#critical_dmg1_type}}**{{critical_dmg1_type}}**{{/critical_dmg1_type}}{{^critical_dmg1_type}}**<span data-i18n="extra-critical-damage">Extra Crit Dmg</span>**{{/critical_dmg1_type}}</div><div class="sheet-roll-cell">+{{critical_dmg1}}</div></div>{{/critical_dmg1}}
						{{#critical_dmg2}}<div class="sheet-roll-row"><div class="sheet-roll-cell sheet-crit-dmg-x" data-i18n-title="extra-critical-damage" data-i18n-aria-label="extra-critical-damage">{{#critical_dmg2_type}}**{{critical_dmg2_type}}**{{/critical_dmg2_type}}{{^critical_dmg2_type}}**<span data-i18n="extra-critical-damage">Extra Crit Dmg</span>**{{/critical_dmg2_type}}</div><div class="sheet-roll-cell">+{{critical_dmg2}}</div></div>{{/critical_dmg2}}
						{{/rollWasCrit() attack}}
					</div>{{/no_attack_roll}}
					{{#attack2}}<div class="sheet-roll-iter-space"></div>{{/attack2}}
					<div class="sheet-roll-groupi">
						{{^no_attack_roll}}{{#attack2}}<div class="sheet-roll-row"><div class="sheet-roll-cell sheet-atk">**{{^attack2name}}<span data-i18n="attack-2-ordinal">2nd attack</span>{{/attack2name}}{{#attack2name}}{{attack2name}}{{/attack2name}}**</div><div class="sheet-roll-cell sheet-left">{{attack2}}{{^vsother}}{{#vs}}&nbsp;{{#vsac}}<span class="sheet-vs" data-i18n="versus-armor-class">vs AC</span>{{/vsac}}{{#vstouch}}<span class="sheet-vs" data-i18n="versus-touch">vs Touch</span>{{/vstouch}}{{#vsff}}<span class="sheet-vs" data-i18n="versus-flat-footed">vs FF</span>{{/vsff}}{{#vsfft}}<span class="sheet-vs" data-i18n="versus-flat-footed-touch">vs FF Touch</span>{{/vsfft}}{{#vscmd}}<span class="sheet-vs" data-i18n="versus-combat-maneuver-defense">vs CMD</span>{{/vscmd}}{{#vscmb}}<span class="sheet-vs" data-i18n="versus-combat-maneuver-bonus">vs CMB</span>{{/vscmb}}{{/vs}}{{/vsother}}</div></div>{{/attack2}}{{/no_attack_roll}}
						{{^no_damage}}{{#damage2}}<div class="sheet-roll-row"><div class="sheet-roll-cell sheet-dmg">**<span data-i18n="damage">Damage</span>**</div><div class="sheet-roll-cell">{{^attack2}}+{{/attack2}}{{damage2}}</div></div>{{/damage2}}{{/no_damage}}
						{{#precision_dmg21}}<div class="sheet-roll-row"><div class="sheet-roll-cell sheet-dmg-x" data-i18n-title="precision-abbrv" data-i18n-aria-label="precision-abbrv">{{#precision_dmg1_type}}**{{precision_dmg1_type}}**{{/precision_dmg1_type}}{{^precision_dmg1_type}}**<span data-i18n="precision-abbrv">Extra Dmg</span>**{{/precision_dmg1_type}}</div><div class="sheet-roll-cell">{{precision_dmg21}}</div></div>{{/precision_dmg21}}
						{{#precision_dmg22}}<div class="sheet-roll-row"><div class="sheet-roll-cell sheet-dmg-x" data-i18n-title="precision-abbrv" data-i18n-aria-label="precision-abbrv">{{#precision_dmg2_type}}**{{precision_dmg2_type}}**{{/precision_dmg2_type}}{{^precision_dmg2_type}}**<span data-i18n="precision-abbrv">Extra Dmg</span>**{{/precision_dmg2_type}}</div><div class="sheet-roll-cell">{{precision_dmg22}}</div></div>{{/precision_dmg22}}
					</div>
					{{^no_attack_roll}}<div class="sheet-roll-groupc">
						{{#rollWasCrit() attack2}}
						{{#crit_confirm2}}<div class="sheet-roll-row sheet-crit-row"><div class="sheet-roll-cell sheet-confirm">**<span data-i18n="critical-confirm">Crit Confirm</span>**</div><div class="sheet-roll-cell sheet-left">{{crit_confirm2}}{{^vsother}}{{#vs}}&nbsp;{{#vsac}}<span class="sheet-vs" data-i18n="versus-armor-class">vs AC</span>{{/vsac}}{{#vstouch}}<span class="sheet-vs" data-i18n="versus-touch">vs Touch</span>{{/vstouch}}{{#vsff}}<span class="sheet-vs" data-i18n="versus-flat-footed">vs FF</span>{{/vsff}}{{#vsfft}}<span class="sheet-vs" data-i18n="versus-flat-footed-touch">vs FF Touch</span>{{/vsfft}}{{#vscmd}}<span class="sheet-vs" data-i18n="versus-combat-maneuver-defense">vs CMD</span>{{/vscmd}}{{#vscmb}}<span class="sheet-vs" data-i18n="versus-combat-maneuver-bonus">vs CMB</span>{{/vscmb}}{{/vs}}{{/vsother}}</div></div>{{/crit_confirm2}}
						{{#crit_damage2}}<div class="sheet-roll-row"><div class="sheet-roll-cell sheet-crit-dmg">**<span data-i18n="critical-damage">Crit damage</span>**</div><div class="sheet-roll-cell">+{{crit_damage2}}</div></div>{{/crit_damage2}}
						{{#critical_dmg21}}<div class="sheet-roll-row"><div class="sheet-roll-cell sheet-crit-dmg-x" data-i18n-title="extra-critical-damage" data-i18n-aria-label="extra-critical-damage">{{#critical_dmg1_type}}**{{critical_dmg1_type}}**{{/critical_dmg1_type}}{{^critical_dmg1_type}}**<span data-i18n="extra-critical-damage">Extra Crit Dmg</span>**{{/critical_dmg1_type}}</div><div class="sheet-roll-cell">+{{critical_dmg21}}</div></div>{{/critical_dmg21}}
						{{#critical_dmg22}}<div class="sheet-roll-row"><div class="sheet-roll-cell sheet-crit-dmg-x" data-i18n-title="extra-critical-damage" data-i18n-aria-label="extra-critical-damage">{{#critical_dmg2_type}}**{{critical_dmg2_type}}**{{/critical_dmg2_type}}{{^critical_dmg2_type}}**<span data-i18n="extra-critical-damage">Extra Crit Dmg</span>**{{/critical_dmg2_type}}</div><div class="sheet-roll-cell">+{{critical_dmg22}}</div></div>{{/critical_dmg22}}
						{{/rollWasCrit() attack2}}
					</div>{{/no_attack_roll}}
					{{#attack3}}<div class="sheet-roll-iter-space"></div>{{/attack3}}
					<div class="sheet-roll-groupi">
						{{^no_attack_roll}}{{#attack3}}<div class="sheet-roll-row"><div class="sheet-roll-cell sheet-atk">**{{^attack3name}}<span data-i18n="attack-3-ordinal">3nd attack</span>{{/attack3name}}{{#attack3name}}{{attack3name}}{{/attack3name}}**</div><div class="sheet-roll-cell">{{attack3}}{{^vsother}}{{#vs}}&nbsp;{{#vsac}}<span class="sheet-vs" data-i18n="versus-armor-class">vs AC</span>{{/vsac}}{{#vstouch}}<span class="sheet-vs" data-i18n="versus-touch">vs Touch</span>{{/vstouch}}{{#vsff}}<span class="sheet-vs" data-i18n="versus-flat-footed">vs FF</span>{{/vsff}}{{#vsfft}}<span class="sheet-vs" data-i18n="versus-flat-footed-touch">vs FF Touch</span>{{/vsfft}}{{#vscmd}}<span class="sheet-vs" data-i18n="versus-combat-maneuver-defense">vs CMD</span>{{/vscmd}}{{#vscmb}}<span class="sheet-vs" data-i18n="versus-combat-maneuver-bonus">vs CMB</span>{{/vscmb}}{{/vs}}{{/vsother}}</div></div>{{/attack3}}{{/no_attack_roll}}
						{{^no_damage}}{{#damage3}}<div class="sheet-roll-row"><div class="sheet-roll-cell sheet-dmg">**<span data-i18n="damage">Damage</span>**</div><div class="sheet-roll-cell">{{^attack3}}+{{/attack3}}{{damage3}}</div></div>{{/damage3}}{{/no_damage}}
						{{#precision_dmg31}}<div class="sheet-roll-row"><div class="sheet-roll-cell sheet-dmg-x" data-i18n-title="precision-abbrv" data-i18n-aria-label="precision-abbrv">{{#precision_dmg1_type}}**{{precision_dmg1_type}}**{{/precision_dmg1_type}}{{^precision_dmg1_type}}**<span data-i18n="precision-abbrv">Extra Dmg</span>**{{/precision_dmg1_type}}</div><div class="sheet-roll-cell">{{precision_dmg31}}</div></div>{{/precision_dmg31}}
						{{#precision_dmg32}}<div class="sheet-roll-row"><div class="sheet-roll-cell sheet-dmg-x" data-i18n-title="precision-abbrv" data-i18n-aria-label="precision-abbrv">{{#precision_dmg2_type}}**{{precision_dmg2_type}}**{{/precision_dmg2_type}}{{^precision_dmg2_type}}**<span data-i18n="precision-abbrv">Extra Dmg</span>**{{/precision_dmg2_type}}</div><div class="sheet-roll-cell">{{precision_dmg32}}</div></div>{{/precision_dmg32}}
					</div>
					{{^no_attack_roll}}<div class="sheet-roll-groupc">
						{{#rollWasCrit() attack3}}
						{{#crit_confirm3}}<div class="sheet-roll-row sheet-crit-row"><div class="sheet-roll-cell sheet-confirm">**<span data-i18n="critical-confirm">Crit Confirm</span>**</div><div class="sheet-roll-cell sheet-left">{{crit_confirm3}}{{^vsother}}{{#vs}}&nbsp;{{#vsac}}<span class="sheet-vs" data-i18n="versus-armor-class">vs AC</span>{{/vsac}}{{#vstouch}}<span class="sheet-vs" data-i18n="versus-touch">vs Touch</span>{{/vstouch}}{{#vsff}}<span class="sheet-vs" data-i18n="versus-flat-footed">vs FF</span>{{/vsff}}{{#vsfft}}<span class="sheet-vs" data-i18n="versus-flat-footed-touch">vs FF Touch</span>{{/vsfft}}{{#vscmd}}<span class="sheet-vs" data-i18n="versus-combat-maneuver-defense">vs CMD</span>{{/vscmd}}{{#vscmb}}<span class="sheet-vs" data-i18n="versus-combat-maneuver-bonus">vs CMB</span>{{/vscmb}}{{/vs}}{{/vsother}}</div></div>{{/crit_confirm3}}
						{{#crit_damage3}}<div class="sheet-roll-row"><div class="sheet-roll-cell sheet-crit-dmg">**<span data-i18n="critical-damage">Crit damage</span>**</div><div class="sheet-roll-cell">+{{crit_damage3}}</div></div>{{/crit_damage3}}
						{{#critical_dmg31}}<div class="sheet-roll-row"><div class="sheet-roll-cell sheet-crit-dmg-x" data-i18n-title="extra-critical-damage" data-i18n-aria-label="extra-critical-damage">{{#critical_dmg1_type}}**{{critical_dmg1_type}}**{{/critical_dmg1_type}}{{^critical_dmg1_type}}**<span data-i18n="extra-critical-damage">Extra Crit Dmg</span>**{{/critical_dmg1_type}}</div><div class="sheet-roll-cell">+{{critical_dmg31}}</div></div>{{/critical_dmg31}}
						{{#critical_dmg32}}<div class="sheet-roll-row"><div class="sheet-roll-cell sheet-crit-dmg-x" data-i18n-title="extra-critical-damage" data-i18n-aria-label="extra-critical-damage">{{#critical_dmg2_type}}**{{critical_dmg2_type}}**{{/critical_dmg2_type}}{{^critical_dmg2_type}}**<span data-i18n="extra-critical-damage">Extra Crit Dmg</span>**{{/critical_dmg2_type}}</div><div class="sheet-roll-cell">+{{critical_dmg32}}</div></div>{{/critical_dmg32}}
						{{/rollWasCrit() attack3}}
					</div>{{/no_attack_roll}}
					{{#attack4}}<div class="sheet-roll-iter-space"></div>{{/attack4}}
					<div class="sheet-roll-groupi">
						{{^no_attack_roll}}{{#attack4}}<div class="sheet-roll-row"><div class="sheet-roll-cell sheet-atk">**{{^attack4name}}<span data-i18n="attack-4-ordinal">4nd attack</span>{{/attack4name}}{{#attack4name}}{{attack4name}}{{/attack4name}}**</div><div class="sheet-roll-cell">{{attack4}}{{^vsother}}{{#vs}}&nbsp;{{#vsac}}<span class="sheet-vs" data-i18n="versus-armor-class">vs AC</span>{{/vsac}}{{#vstouch}}<span class="sheet-vs" data-i18n="versus-touch">vs Touch</span>{{/vstouch}}{{#vsff}}<span class="sheet-vs" data-i18n="versus-flat-footed">vs FF</span>{{/vsff}}{{#vsfft}}<span class="sheet-vs" data-i18n="versus-flat-footed-touch">vs FF Touch</span>{{/vsfft}}{{#vscmd}}<span class="sheet-vs" data-i18n="versus-combat-maneuver-defense">vs CMD</span>{{/vscmd}}{{#vscmb}}<span class="sheet-vs" data-i18n="versus-combat-maneuver-bonus">vs CMB</span>{{/vscmb}}{{/vs}}{{/vsother}}</div></div>{{/attack4}}{{/no_attack_roll}}
						{{^no_damage}}{{#damage4}}<div class="sheet-roll-row"><div class="sheet-roll-cell sheet-dmg">**<span data-i18n="damage">Damage</span>**</div><div class="sheet-roll-cell">{{^attack4}}+{{/attack4}}{{damage4}}</div></div>{{/damage4}}{{/no_damage}}
						{{#precision_dmg41}}<div class="sheet-roll-row"><div class="sheet-roll-cell sheet-dmg-x" data-i18n-title="precision-abbrv" data-i18n-aria-label="precision-abbrv">{{#precision_dmg1_type}}**{{precision_dmg1_type}}**{{/precision_dmg1_type}}{{^precision_dmg1_type}}**<span data-i18n="precision-abbrv">Extra Dmg</span>**{{/precision_dmg1_type}}</div><div class="sheet-roll-cell">{{precision_dmg41}}</div></div>{{/precision_dmg41}}
						{{#precision_dmg42}}<div class="sheet-roll-row"><div class="sheet-roll-cell sheet-dmg-x" data-i18n-title="precision-abbrv" data-i18n-aria-label="precision-abbrv">{{#precision_dmg2_type}}**{{precision_dmg2_type}}**{{/precision_dmg2_type}}{{^precision_dmg2_type}}**<span data-i18n="precision-abbrv">Extra Dmg</span>**{{/precision_dmg2_type}}</div><div class="sheet-roll-cell">{{precision_dmg42}}</div></div>{{/precision_dmg42}}
					</div>
					{{^no_attack_roll}}<div class="sheet-roll-groupc">
						{{#rollWasCrit() attack4}}
						{{#crit_confirm4}}<div class="sheet-roll-row sheet-crit-row"><div class="sheet-roll-cell sheet-confirm">**<span data-i18n="critical-confirm">Crit Confirm</span>**</div><div class="sheet-roll-cell sheet-left">{{crit_confirm4}}{{^vsother}}{{#vs}}&nbsp;{{#vsac}}<span class="sheet-vs" data-i18n="versus-armor-class">vs AC</span>{{/vsac}}{{#vstouch}}<span class="sheet-vs" data-i18n="versus-touch">vs Touch</span>{{/vstouch}}{{#vsff}}<span class="sheet-vs" data-i18n="versus-flat-footed">vs FF</span>{{/vsff}}{{#vsfft}}<span class="sheet-vs" data-i18n="versus-flat-footed-touch">vs FF Touch</span>{{/vsfft}}{{#vscmd}}<span class="sheet-vs" data-i18n="versus-combat-maneuver-defense">vs CMD</span>{{/vscmd}}{{#vscmb}}<span class="sheet-vs" data-i18n="versus-combat-maneuver-bonus">vs CMB</span>{{/vscmb}}{{/vs}}{{/vsother}}</div></div>{{/crit_confirm4}}
						{{#crit_damage4}}<div class="sheet-roll-row"><div class="sheet-roll-cell sheet-crit-dmg">**<span data-i18n="critical-damage">Crit damage</span>**</div><div class="sheet-roll-cell">+{{crit_damage4}}</div></div>{{/crit_damage4}}
						{{#critical_dmg41}}<div class="sheet-roll-row"><div class="sheet-roll-cell sheet-crit-dmg-x" data-i18n-title="extra-critical-damage" data-i18n-aria-label="extra-critical-damage">{{#critical_dmg1_type}}**{{critical_dmg1_type}}**{{/critical_dmg1_type}}{{^critical_dmg1_type}}**<span data-i18n="extra-critical-damage">Extra Crit Dmg</span>**{{/critical_dmg1_type}}</div><div class="sheet-roll-cell">+{{critical_dmg41}}</div></div>{{/critical_dmg41}}
						{{#critical_dmg42}}<div class="sheet-roll-row"><div class="sheet-roll-cell sheet-crit-dmg-x" data-i18n-title="extra-critical-damage" data-i18n-aria-label="extra-critical-damage">{{#critical_dmg2_type}}**{{critical_dmg2_type}}**{{/critical_dmg2_type}}{{^critical_dmg2_type}}**<span data-i18n="extra-critical-damage">Extra Crit Dmg</span>**{{/critical_dmg2_type}}</div><div class="sheet-roll-cell">+{{critical_dmg42}}</div></div>{{/critical_dmg42}}
						{{/rollWasCrit() attack4}}
					</div>{{/no_attack_roll}}
					{{#attack5}}<div class="sheet-roll-iter-space"></div>{{/attack5}}
					<div class="sheet-roll-groupi">
						{{^no_attack_roll}}{{#attack5}}<div class="sheet-roll-row"><div class="sheet-roll-cell sheet-atk">**{{^attack5name}}<span data-i18n="attack-5-ordinal">5nd attack</span>{{/attack5name}}{{#attack5name}}{{attack5name}}{{/attack5name}}**</div><div class="sheet-roll-cell">{{attack5}}{{^vsother}}{{#vs}}&nbsp;{{#vsac}}<span class="sheet-vs" data-i18n="versus-armor-class">vs AC</span>{{/vsac}}{{#vstouch}}<span class="sheet-vs" data-i18n="versus-touch">vs Touch</span>{{/vstouch}}{{#vsff}}<span class="sheet-vs" data-i18n="versus-flat-footed">vs FF</span>{{/vsff}}{{#vsfft}}<span class="sheet-vs" data-i18n="versus-flat-footed-touch">vs FF Touch</span>{{/vsfft}}{{#vscmd}}<span class="sheet-vs" data-i18n="versus-combat-maneuver-defense">vs CMD</span>{{/vscmd}}{{#vscmb}}<span class="sheet-vs" data-i18n="versus-combat-maneuver-bonus">vs CMB</span>{{/vscmb}}{{/vs}}{{/vsother}}</div></div>{{/attack5}}{{/no_attack_roll}}
						{{^no_damage}}{{#damage5}}<div class="sheet-roll-row"><div class="sheet-roll-cell sheet-dmg">**<span data-i18n="damage">Damage</span>**</div><div class="sheet-roll-cell">{{^attack5}}+{{/attack5}}{{damage5}}</div></div>{{/damage5}}{{/no_damage}}
						{{#precision_dmg51}}<div class="sheet-roll-row"><div class="sheet-roll-cell sheet-dmg-x" data-i18n-title="precision-abbrv" data-i18n-aria-label="precision-abbrv">{{#precision_dmg1_type}}**{{precision_dmg1_type}}**{{/precision_dmg1_type}}{{^precision_dmg1_type}}**<span data-i18n="precision-abbrv">Extra Dmg</span>**{{/precision_dmg1_type}}</div><div class="sheet-roll-cell">{{precision_dmg51}}</div></div>{{/precision_dmg51}}
						{{#precision_dmg52}}<div class="sheet-roll-row"><div class="sheet-roll-cell sheet-dmg-x" data-i18n-title="precision-abbrv" data-i18n-aria-label="precision-abbrv">{{#precision_dmg2_type}}**{{precision_dmg2_type}}**{{/precision_dmg2_type}}{{^precision_dmg2_type}}**<span data-i18n="precision-abbrv">Extra Dmg</span>**{{/precision_dmg2_type}}</div><div class="sheet-roll-cell">{{precision_dmg52}}</div></div>{{/precision_dmg52}}
					</div>
					{{^no_attack_roll}}<div class="sheet-roll-groupc">
						{{#rollWasCrit() attack5}}
						{{#crit_confirm5}}<div class="sheet-roll-row sheet-crit-row"><div class="sheet-roll-cell sheet-confirm">**<span data-i18n="critical-confirm">Crit Confirm</span>**</div><div class="sheet-roll-cell sheet-left">{{crit_confirm5}}{{^vsother}}{{#vs}}&nbsp;{{#vsac}}<span class="sheet-vs" data-i18n="versus-armor-class">vs AC</span>{{/vsac}}{{#vstouch}}<span class="sheet-vs" data-i18n="versus-touch">vs Touch</span>{{/vstouch}}{{#vsff}}<span class="sheet-vs" data-i18n="versus-flat-footed">vs FF</span>{{/vsff}}{{#vsfft}}<span class="sheet-vs" data-i18n="versus-flat-footed-touch">vs FF Touch</span>{{/vsfft}}{{#vscmd}}<span class="sheet-vs" data-i18n="versus-combat-maneuver-defense">vs CMD</span>{{/vscmd}}{{#vscmb}}<span class="sheet-vs" data-i18n="versus-combat-maneuver-bonus">vs CMB</span>{{/vscmb}}{{/vs}}{{/vsother}}</div></div>{{/crit_confirm5}}
						{{#crit_damage5}}<div class="sheet-roll-row"><div class="sheet-roll-cell sheet-crit-dmg">**<span data-i18n="critical-damage">Crit damage</span>**</div><div class="sheet-roll-cell">+{{crit_damage5}}</div></div>{{/crit_damage5}}
						{{#critical_dmg51}}<div class="sheet-roll-row"><div class="sheet-roll-cell sheet-crit-dmg-x" data-i18n-title="extra-critical-damage" data-i18n-aria-label="extra-critical-damage">{{#critical_dmg1_type}}**{{critical_dmg1_type}}**{{/critical_dmg1_type}}{{^critical_dmg1_type}}**<span data-i18n="extra-critical-damage">Extra Crit Dmg</span>**{{/critical_dmg1_type}}</div><div class="sheet-roll-cell">+{{critical_dmg51}}</div></div>{{/critical_dmg51}}
						{{#critical_dmg52}}<div class="sheet-roll-row"><div class="sheet-roll-cell sheet-crit-dmg-x" data-i18n-title="extra-critical-damage" data-i18n-aria-label="extra-critical-damage">{{#critical_dmg2_type}}**{{critical_dmg2_type}}**{{/critical_dmg2_type}}{{^critical_dmg2_type}}**<span data-i18n="extra-critical-damage">Extra Crit Dmg</span>**{{/critical_dmg2_type}}</div><div class="sheet-roll-cell">+{{critical_dmg52}}</div></div>{{/critical_dmg52}}
						{{/rollWasCrit() attack5}}
					</div>{{/no_attack_roll}}
					{{#attack6}}<div class="sheet-roll-iter-space"></div>{{/attack6}}
					<div class="sheet-roll-groupi">
						{{^no_attack_roll}}{{#attack6}}<div class="sheet-roll-row"><div class="sheet-roll-cell sheet-atk">**{{^attack6name}}<span data-i18n="attack-6-ordinal">6nd attack</span>{{/attack6name}}{{#attack6name}}{{attack6name}}{{/attack6name}}**</div><div class="sheet-roll-cell">{{attack6}}{{^vsother}}{{#vs}}&nbsp;{{#vsac}}<span class="sheet-vs" data-i18n="versus-armor-class">vs AC</span>{{/vsac}}{{#vstouch}}<span class="sheet-vs" data-i18n="versus-touch">vs Touch</span>{{/vstouch}}{{#vsff}}<span class="sheet-vs" data-i18n="versus-flat-footed">vs FF</span>{{/vsff}}{{#vsfft}}<span class="sheet-vs" data-i18n="versus-flat-footed-touch">vs FF Touch</span>{{/vsfft}}{{#vscmd}}<span class="sheet-vs" data-i18n="versus-combat-maneuver-defense">vs CMD</span>{{/vscmd}}{{#vscmb}}<span class="sheet-vs" data-i18n="versus-combat-maneuver-bonus">vs CMB</span>{{/vscmb}}{{/vs}}{{/vsother}}</div></div>{{/attack6}}{{/no_attack_roll}}
						{{^no_damage}}{{#damage6}}<div class="sheet-roll-row"><div class="sheet-roll-cell sheet-dmg">**<span data-i18n="damage">Damage</span>**</div><div class="sheet-roll-cell">{{^attack6}}+{{/attack6}}{{damage6}}</div></div>{{/damage6}}{{/no_damage}}
						{{#precision_dmg61}}<div class="sheet-roll-row"><div class="sheet-roll-cell sheet-dmg-x" data-i18n-title="precision-abbrv" data-i18n-aria-label="precision-abbrv">{{#precision_dmg1_type}}**{{precision_dmg1_type}}**{{/precision_dmg1_type}}{{^precision_dmg1_type}}**<span data-i18n="precision-abbrv">Extra Dmg</span>**{{/precision_dmg1_type}}</div><div class="sheet-roll-cell">{{precision_dmg61}}</div></div>{{/precision_dmg61}}
						{{#precision_dmg62}}<div class="sheet-roll-row"><div class="sheet-roll-cell sheet-dmg-x" data-i18n-title="precision-abbrv" data-i18n-aria-label="precision-abbrv">{{#precision_dmg2_type}}**{{precision_dmg2_type}}**{{/precision_dmg2_type}}{{^precision_dmg2_type}}**<span data-i18n="precision-abbrv">Extra Dmg</span>**{{/precision_dmg2_type}}</div><div class="sheet-roll-cell">{{precision_dmg62}}</div></div>{{/precision_dmg62}}
					</div>
					{{^no_attack_roll}}<div class="sheet-roll-groupc">
						{{#rollWasCrit() attack6}}
						{{#crit_confirm6}}<div class="sheet-roll-row sheet-crit-row"><div class="sheet-roll-cell sheet-confirm">**<span data-i18n="critical-confirm">Crit Confirm</span>**</div><div class="sheet-roll-cell sheet-left">{{crit_confirm6}}{{^vsother}}{{#vs}}&nbsp;{{#vsac}}<span class="sheet-vs" data-i18n="versus-armor-class">vs AC</span>{{/vsac}}{{#vstouch}}<span class="sheet-vs" data-i18n="versus-touch">vs Touch</span>{{/vstouch}}{{#vsff}}<span class="sheet-vs" data-i18n="versus-flat-footed">vs FF</span>{{/vsff}}{{#vsfft}}<span class="sheet-vs" data-i18n="versus-flat-footed-touch">vs FF Touch</span>{{/vsfft}}{{#vscmd}}<span class="sheet-vs" data-i18n="versus-combat-maneuver-defense">vs CMD</span>{{/vscmd}}{{#vscmb}}<span class="sheet-vs" data-i18n="versus-combat-maneuver-bonus">vs CMB</span>{{/vscmb}}{{/vs}}{{/vsother}}</div></div>{{/crit_confirm6}}
						{{#crit_damage6}}<div class="sheet-roll-row"><div class="sheet-roll-cell sheet-crit-dmg">**<span data-i18n="critical-damage">Crit damage</span>**</div><div class="sheet-roll-cell">+{{crit_damage6}}</div></div>{{/crit_damage6}}
						{{#critical_dmg61}}<div class="sheet-roll-row"><div class="sheet-roll-cell sheet-crit-dmg-x" data-i18n-title="extra-critical-damage" data-i18n-aria-label="extra-critical-damage">{{#critical_dmg1_type}}**{{critical_dmg1_type}}**{{/critical_dmg1_type}}{{^critical_dmg1_type}}**<span data-i18n="extra-critical-damage">Extra Crit Dmg</span>**{{/critical_dmg1_type}}</div><div class="sheet-roll-cell">+{{critical_dmg61}}</div></div>{{/critical_dmg61}}
						{{#critical_dmg62}}<div class="sheet-roll-row"><div class="sheet-roll-cell sheet-crit-dmg-x" data-i18n-title="extra-critical-damage" data-i18n-aria-label="extra-critical-damage">{{#critical_dmg2_type}}**{{critical_dmg2_type}}**{{/critical_dmg2_type}}{{^critical_dmg2_type}}**<span data-i18n="extra-critical-damage">Extra Crit Dmg</span>**{{/critical_dmg2_type}}</div><div class="sheet-roll-cell">+{{critical_dmg62}}</div></div>{{/critical_dmg62}}
						{{/rollWasCrit() attack6}}
					</div>{{/no_attack_roll}}
					{{#attack7}}<div class="sheet-roll-iter-space"></div>{{/attack7}}
					<div class="sheet-roll-groupi">
						{{^no_attack_roll}}{{#attack7}}<div class="sheet-roll-row"><div class="sheet-roll-cell sheet-atk">**{{^attack7name}}<span data-i18n="attack-7-ordinal">7nd attack</span>{{/attack7name}}{{#attack7name}}{{attack7name}}{{/attack7name}}**</div><div class="sheet-roll-cell">{{attack7}}{{^vsother}}{{#vs}}&nbsp;{{#vsac}}<span class="sheet-vs" data-i18n="versus-armor-class">vs AC</span>{{/vsac}}{{#vstouch}}<span class="sheet-vs" data-i18n="versus-touch">vs Touch</span>{{/vstouch}}{{#vsff}}<span class="sheet-vs" data-i18n="versus-flat-footed">vs FF</span>{{/vsff}}{{#vsfft}}<span class="sheet-vs" data-i18n="versus-flat-footed-touch">vs FF Touch</span>{{/vsfft}}{{#vscmd}}<span class="sheet-vs" data-i18n="versus-combat-maneuver-defense">vs CMD</span>{{/vscmd}}{{#vscmb}}<span class="sheet-vs" data-i18n="versus-combat-maneuver-bonus">vs CMB</span>{{/vscmb}}{{/vs}}{{/vsother}}</div></div>{{/attack7}}{{/no_attack_roll}}
						{{^no_damage}}{{#damage7}}<div class="sheet-roll-row"><div class="sheet-roll-cell sheet-dmg">**<span data-i18n="damage">Damage</span>**</div><div class="sheet-roll-cell">{{^attack7}}+{{/attack7}}{{damage7}}</div></div>{{/damage7}}{{/no_damage}}
						{{#precision_dmg71}}<div class="sheet-roll-row"><div class="sheet-roll-cell sheet-dmg-x" data-i18n-title="precision-abbrv" data-i18n-aria-label="precision-abbrv">{{#precision_dmg1_type}}**{{precision_dmg1_type}}**{{/precision_dmg1_type}}{{^precision_dmg1_type}}**<span data-i18n="precision-abbrv">Extra Dmg</span>**{{/precision_dmg1_type}}</div><div class="sheet-roll-cell">{{precision_dmg71}}</div></div>{{/precision_dmg71}}
						{{#precision_dmg72}}<div class="sheet-roll-row"><div class="sheet-roll-cell sheet-dmg-x" data-i18n-title="precision-abbrv" data-i18n-aria-label="precision-abbrv">{{#precision_dmg2_type}}**{{precision_dmg2_type}}**{{/precision_dmg2_type}}{{^precision_dmg2_type}}**<span data-i18n="precision-abbrv">Extra Dmg</span>**{{/precision_dmg2_type}}</div><div class="sheet-roll-cell">{{precision_dmg72}}</div></div>{{/precision_dmg72}}
					</div>
					{{^no_attack_roll}}<div class="sheet-roll-groupc">
						{{#rollWasCrit() attack7}}
						{{#crit_confirm7}}<div class="sheet-roll-row sheet-crit-row"><div class="sheet-roll-cell sheet-confirm">**<span data-i18n="critical-confirm">Crit Confirm</span>**</div><div class="sheet-roll-cell sheet-left">{{crit_confirm7}}{{^vsother}}{{#vs}}&nbsp;{{#vsac}}<span class="sheet-vs" data-i18n="versus-armor-class">vs AC</span>{{/vsac}}{{#vstouch}}<span class="sheet-vs" data-i18n="versus-touch">vs Touch</span>{{/vstouch}}{{#vsff}}<span class="sheet-vs" data-i18n="versus-flat-footed">vs FF</span>{{/vsff}}{{#vsfft}}<span class="sheet-vs" data-i18n="versus-flat-footed-touch">vs FF Touch</span>{{/vsfft}}{{#vscmd}}<span class="sheet-vs" data-i18n="versus-combat-maneuver-defense">vs CMD</span>{{/vscmd}}{{#vscmb}}<span class="sheet-vs" data-i18n="versus-combat-maneuver-bonus">vs CMB</span>{{/vscmb}}{{/vs}}{{/vsother}}</div></div>{{/crit_confirm7}}
						{{#crit_damage7}}<div class="sheet-roll-row"><div class="sheet-roll-cell sheet-crit-dmg">**<span data-i18n="critical-damage">Crit damage</span>**</div><div class="sheet-roll-cell">+{{crit_damage7}}</div></div>{{/crit_damage7}}
						{{#critical_dmg71}}<div class="sheet-roll-row"><div class="sheet-roll-cell sheet-crit-dmg-x" data-i18n-title="extra-critical-damage" data-i18n-aria-label="extra-critical-damage">{{#critical_dmg1_type}}**{{critical_dmg1_type}}**{{/critical_dmg1_type}}{{^critical_dmg1_type}}**<span data-i18n="extra-critical-damage">Extra Crit Dmg</span>**{{/critical_dmg1_type}}</div><div class="sheet-roll-cell">+{{critical_dmg71}}</div></div>{{/critical_dmg71}}
						{{#critical_dmg72}}<div class="sheet-roll-row"><div class="sheet-roll-cell sheet-crit-dmg-x" data-i18n-title="extra-critical-damage" data-i18n-aria-label="extra-critical-damage">{{#critical_dmg2_type}}**{{critical_dmg2_type}}**{{/critical_dmg2_type}}{{^critical_dmg2_type}}**<span data-i18n="extra-critical-damage">Extra Crit Dmg</span>**{{/critical_dmg2_type}}</div><div class="sheet-roll-cell">+{{critical_dmg72}}</div></div>{{/critical_dmg72}}
						{{/rollWasCrit() attack7}}
					</div>{{/no_attack_roll}}
					{{#attack8}}<div class="sheet-roll-iter-space"></div>{{/attack8}}
					<div class="sheet-roll-groupi">
						{{^no_attack_roll}}{{#attack8}}<div class="sheet-roll-row"><div class="sheet-roll-cell sheet-atk">**{{^attack8name}}<span data-i18n="attack-8-ordinal">8nd attack</span>{{/attack8name}}{{#attack8name}}{{attack8name}}{{/attack8name}}**</div><div class="sheet-roll-cell">{{attack8}}{{^vsother}}{{#vs}}&nbsp;{{#vsac}}<span class="sheet-vs" data-i18n="versus-armor-class">vs AC</span>{{/vsac}}{{#vstouch}}<span class="sheet-vs" data-i18n="versus-touch">vs Touch</span>{{/vstouch}}{{#vsff}}<span class="sheet-vs" data-i18n="versus-flat-footed">vs FF</span>{{/vsff}}{{#vsfft}}<span class="sheet-vs" data-i18n="versus-flat-footed-touch">vs FF Touch</span>{{/vsfft}}{{#vscmd}}<span class="sheet-vs" data-i18n="versus-combat-maneuver-defense">vs CMD</span>{{/vscmd}}{{#vscmb}}<span class="sheet-vs" data-i18n="versus-combat-maneuver-bonus">vs CMB</span>{{/vscmb}}{{/vs}}{{/vsother}}</div></div>{{/attack8}}{{/no_attack_roll}}
						{{^no_damage}}{{#damage8}}<div class="sheet-roll-row"><div class="sheet-roll-cell sheet-dmg">**<span data-i18n="damage">Damage</span>**</div><div class="sheet-roll-cell">{{^attack8}}+{{/attack8}}{{damage8}}</div></div>{{/damage8}}{{/no_damage}}
						{{#precision_dmg81}}<div class="sheet-roll-row"><div class="sheet-roll-cell sheet-dmg-x" data-i18n-title="precision-abbrv" data-i18n-aria-label="precision-abbrv">{{#precision_dmg1_type}}**{{precision_dmg1_type}}**{{/precision_dmg1_type}}{{^precision_dmg1_type}}**<span data-i18n="precision-abbrv">Extra Dmg</span>**{{/precision_dmg1_type}}</div><div class="sheet-roll-cell">{{precision_dmg81}}</div></div>{{/precision_dmg81}}
						{{#precision_dmg82}}<div class="sheet-roll-row"><div class="sheet-roll-cell sheet-dmg-x" data-i18n-title="precision-abbrv" data-i18n-aria-label="precision-abbrv">{{#precision_dmg2_type}}**{{precision_dmg2_type}}**{{/precision_dmg2_type}}{{^precision_dmg2_type}}**<span data-i18n="precision-abbrv">Extra Dmg</span>**{{/precision_dmg2_type}}</div><div class="sheet-roll-cell">{{precision_dmg82}}</div></div>{{/precision_dmg82}}
					</div>
					{{^no_attack_roll}}<div class="sheet-roll-groupc">
						{{#rollWasCrit() attack8}}
						{{#crit_confirm8}}<div class="sheet-roll-row sheet-crit-row"><div class="sheet-roll-cell sheet-confirm">**<span data-i18n="critical-confirm">Crit Confirm</span>**</div><div class="sheet-roll-cell sheet-left">{{crit_confirm8}}{{^vsother}}{{#vs}}&nbsp;{{#vsac}}<span class="sheet-vs" data-i18n="versus-armor-class">vs AC</span>{{/vsac}}{{#vstouch}}<span class="sheet-vs" data-i18n="versus-touch">vs Touch</span>{{/vstouch}}{{#vsff}}<span class="sheet-vs" data-i18n="versus-flat-footed">vs FF</span>{{/vsff}}{{#vsfft}}<span class="sheet-vs" data-i18n="versus-flat-footed-touch">vs FF Touch</span>{{/vsfft}}{{#vscmd}}<span class="sheet-vs" data-i18n="versus-combat-maneuver-defense">vs CMD</span>{{/vscmd}}{{#vscmb}}<span class="sheet-vs" data-i18n="versus-combat-maneuver-bonus">vs CMB</span>{{/vscmb}}{{/vs}}{{/vsother}}</div></div>{{/crit_confirm8}}
						{{#crit_damage8}}<div class="sheet-roll-row"><div class="sheet-roll-cell sheet-crit-dmg">**<span data-i18n="critical-damage">Crit damage</span>**</div><div class="sheet-roll-cell">+{{crit_damage8}}</div></div>{{/crit_damage8}}
						{{#critical_dmg81}}<div class="sheet-roll-row"><div class="sheet-roll-cell sheet-crit-dmg-x" data-i18n-title="extra-critical-damage" data-i18n-aria-label="extra-critical-damage">{{#critical_dmg1_type}}**{{critical_dmg1_type}}**{{/critical_dmg1_type}}{{^critical_dmg1_type}}**<span data-i18n="extra-critical-damage">Extra Crit Dmg</span>**{{/critical_dmg1_type}}</div><div class="sheet-roll-cell">+{{critical_dmg81}}</div></div>{{/critical_dmg81}}
						{{#critical_dmg82}}<div class="sheet-roll-row"><div class="sheet-roll-cell sheet-crit-dmg-x" data-i18n-title="extra-critical-damage" data-i18n-aria-label="extra-critical-damage">{{#critical_dmg2_type}}**{{critical_dmg2_type}}**{{/critical_dmg2_type}}{{^critical_dmg2_type}}**<span data-i18n="extra-critical-damage">Extra Crit Dmg</span>**{{/critical_dmg2_type}}</div><div class="sheet-roll-cell">+{{critical_dmg82}}</div></div>{{/critical_dmg82}}
						{{/rollWasCrit() attack8}}
					</div>{{/no_attack_roll}}
				</div>
				<div style="display:table;width:100%;">
					<div class="sheet-roll-group2">
						{{#type}}<div class="sheet-roll-row"><div class="sheet-roll-cell">**<span data-i18n="type">Type</span>**:</div><div class="sheet-roll-cell">{{type}}</div></div>{{/type}}
						{{#allprops() color accessible rounded header_image character_name character_id name_link subtitle attack damage crit_confirm crit_damage description attack2 damage2 crit_confirm2 crit_damage2 attack3 damage3 crit_confirm3 crit_damage3 attack4 damage4 crit_confirm4 crit_damage4 attack5 damage5 crit_confirm5 crit_damage5 attack6 damage6 crit_confirm6 crit_damage6 attack7 damage7 crit_confirm7 crit_damage7 attack8 damage8 crit_confirm8 crit_damage8 melee_notes ranged_notes CMB_notes attack_notes type weapon_notes generic_note precision_dmg1 precision_dmg1_type precision_dmg2 precision_dmg2_type critical_dmg1 critical_dmg1_type critical_dmg2 critical_dmg2_type precision_dmg21 critical_dmg21 precision_dmg22 critical_dmg22 precision_dmg31 critical_dmg31 precision_dmg32 critical_dmg32 precision_dmg41 critical_dmg41 precision_dmg42 critical_dmg42 precision_dmg51 critical_dmg51 precision_dmg52 critical_dmg52 precision_dmg61 critical_dmg61 precision_dmg62 critical_dmg62 precision_dmg71 critical_dmg71 precision_dmg72 critical_dmg72 precision_dmg81 critical_dmg81 precision_dmg82 critical_dmg82 attack1name attack2name attack3name attack4name attack5name attack6name attack7name attack8name vs vsac vstouch vsff vsfft vscmd vscmb vsother no_attack_roll no_damage}}
						<div class="sheet-roll-row"><div class="sheet-roll-cell">**{{key}}**:</div><div class="sheet-roll-cell">{{value}}</div></div>
						{{/allprops() color accessible rounded header_image character_name character_id name_link subtitle attack damage crit_confirm crit_damage description attack2 damage2 crit_confirm2 crit_damage2 attack3 damage3 crit_confirm3 crit_damage3 attack4 damage4 crit_confirm4 crit_damage4 attack5 damage5 crit_confirm5 crit_damage5 attack6 damage6 crit_confirm6 crit_damage6 attack7 damage7 crit_confirm7 crit_damage7 attack8 damage8 crit_confirm8 crit_damage8 melee_notes ranged_notes CMB_notes attack_notes type weapon_notes generic_note precision_dmg1 precision_dmg1_type precision_dmg2 precision_dmg2_type critical_dmg1 critical_dmg1_type critical_dmg2 critical_dmg2_type precision_dmg21 critical_dmg21 precision_dmg22 critical_dmg22 precision_dmg31 critical_dmg31 precision_dmg32 critical_dmg32 precision_dmg41 critical_dmg41 precision_dmg42 critical_dmg42 precision_dmg51 critical_dmg51 precision_dmg52 critical_dmg52 precision_dmg61 critical_dmg61 precision_dmg62 critical_dmg62 precision_dmg71 critical_dmg71 precision_dmg72 critical_dmg72 precision_dmg81 critical_dmg81 precision_dmg82 critical_dmg82 attack1name attack2name attack3name attack4name attack5name attack6name attack7name attack8name vs vsac vstouch vsff vsfft vscmd vscmb vsother no_attack_roll no_damage}}
					</div>
				</div>
				<div class="sheet-roll-group">
					{{#melee_notes}}<div class="sheet-roll-row"><div class="sheet-roll-cell">**<span data-i18n="melee-notes">Melee Notes</span>:** {{melee_notes}}</div></div>{{/melee_notes}}
					{{#ranged_notes}}<div class="sheet-roll-row"><div class="sheet-roll-cell">**<span data-i18n="ranged-notes">Ranged Notes</span>:** {{ranged_notes}}</div></div>{{/ranged_notes}}
					{{#CMB_notes}}<div class="sheet-roll-row"><div class="sheet-roll-cell">**<span data-i18n="combat-maneuver-bonus-notes">CMB Notes</span>:** {{CMB_notes}}</div></div>{{/CMB_notes}}
					{{#attack_notes}}<div class="sheet-roll-row"><div class="sheet-roll-cell">**<span data-i18n="attack-notes">Attack Notes</span>:** {{attack_notes}}</div></div>{{/attack_notes}}
					{{#weapon_notes}}<div class="sheet-roll-row"><div class="sheet-roll-cell">**<span data-i18n="weapon-notes">Weapon Notes</span>:** {{weapon_notes}}</div></div>{{/weapon_notes}}
					{{#description}}<div class="sheet-roll-row sheet-roll-description"><div class="sheet-roll-cell">{{description}}</div></div>{{/description}}
					{{#generic_note}}<div class="sheet-roll-row sheet-roll-description"><div class="sheet-roll-cell">{{generic_note}}</div></div>{{/generic_note}}
				</div>
			</div>
			{{/accessible}}
			{{#accessible}}
			<div class="sheet-roll-accessible {{#color}}color-{{color}}{{/color}}" role="presentation">
				<h3 class="sheet-roll-header">
					{{#character_name}}{{character_name}}{{#name}}: {{/name}}{{/character_name}}
					{{#name}}{{name}}{{/name}}
				</h3>
				{{#subtitle}}<h4 class="sheet-subtitle">{{subtitle}}</h4>{{/subtitle}}
				{{^no_attack_roll}}{{#attack}}<label class="sheet-atksbkg sheet-atk">{{^attack1name}}<span data-i18n="attack">Attack</span>{{/attack1name}}{{#attack1name}}<span class="sheet-atk">{{attack1name}}</span>{{/attack1name}}:<span class="sheet-right">{{attack}}{{^vsother}}{{#vs}}&nbsp;{{#vsac}}<span class="sheet-vs" data-i18n="versus-armor-class">vs AC</span>{{/vsac}}{{#vstouch}}<span class="sheet-vs" data-i18n="versus-touch">vs Touch</span>{{/vstouch}}{{#vsff}}<span class="sheet-vs" data-i18n="versus-flat-footed">vs FF</span>{{/vsff}}{{#vsfft}}<span class="sheet-vs" data-i18n="versus-flat-footed-touch">vs FF Touch</span>{{/vsfft}}{{#vscmd}}<span class="sheet-vs" data-i18n="versus-combat-maneuver-defense">vs CMD</span>{{/vscmd}}{{#vscmb}}<span class="sheet-vs" data-i18n="versus-combat-maneuver-bonus">vs CMB</span>{{/vscmb}}{{/vs}}{{/vsother}}</span></label>{{/attack}}{{/no_attack_roll}}
				{{^no_damage}}{{#damage}}<label class="sheet-atksbkg sheet-dmg"><span data-i18n="damage">Damage</span>:<span class="sheet-right">{{^attack}}+{{/attack}}{{damage}}</span></label>{{/damage}}{{/no_damage}}
				{{#precision_dmg1}}<label class="sheet-atksbkg sheet-dmg-x">{{#precision_dmg1_type}}<span data-i18n-title="extra-damage" data-i18n-aria-label="extra-damage">{{precision_dmg1_type}}</span>{{/precision_dmg1_type}}{{^precision_dmg1_type}}<span data-i18n="extra-damage">Precision Dmg</span>{{/precision_dmg1_type}}:<span class="sheet-right">{{precision_dmg1}}</span></label>{{/precision_dmg1}}
				{{#precision_dmg2}}<label class="sheet-atksbkg sheet-dmg-x">{{#precision_dmg2_type}}<span data-i18n-title="extra-damage" data-i18n-aria-label="extra-damage">{{precision_dmg2_type}}</span>{{/precision_dmg2_type}}{{^precision_dmg2_type}}<span data-i18n="extra-damage">Precision Dmg</span>{{/precision_dmg2_type}}:<span class="sheet-right">{{precision_dmg2}}</span></label>{{/precision_dmg2}}
				{{^no_attack_roll}}{{#rollWasCrit() attack}}
				{{#crit_confirm}}<label class="sheet-atksbkg sheet-atk-c sheet-confirm"><span data-i18n="critical-confirm">Crit Confirm</span>:<span class="sheet-right">{{crit_confirm}}{{^vsother}}{{#vs}}&nbsp;{{#vsac}}<span class="sheet-vs" data-i18n="versus-armor-class">vs AC</span>{{/vsac}}{{#vstouch}}<span class="sheet-vs" data-i18n="versus-touch">vs Touch</span>{{/vstouch}}{{#vsff}}<span class="sheet-vs" data-i18n="versus-flat-footed">vs FF</span>{{/vsff}}{{#vsfft}}<span class="sheet-vs" data-i18n="versus-flat-footed-touch">vs FF Touch</span>{{/vsfft}}{{#vscmd}}<span class="sheet-vs" data-i18n="versus-combat-maneuver-defense">vs CMD</span>{{/vscmd}}{{#vscmb}}<span class="sheet-vs" data-i18n="versus-combat-maneuver-bonus">vs CMB</span>{{/vscmb}}{{/vs}}{{/vsother}}</span></label>{{/crit_confirm}}
				{{#crit_damage}}<label class="sheet-atksbkg sheet-crit-dmg"><span data-i18n="critical-damage">Crit Damage</span>:<span class="sheet-right">+{{crit_damage}}</span></label>{{/crit_damage}}
				{{#critical_dmg1}}<label class="sheet-atksbkg sheet-crit-dmg-x">{{#critical_dmg1_type}}<span data-i18n-title="extra-critical-damage" data-i18n-aria-label="extra-critical-damage">{{critical_dmg1_type}}</span>{{/critical_dmg1_type}}{{^critical_dmg1_type}}<span data-i18n="extra-critical-damage">Xtra Crit Dmg</span>{{/critical_dmg1_type}}:<span class="sheet-right">+{{critical_dmg1}}</span></label>{{/critical_dmg1}}
				{{#critical_dmg2}}<label class="sheet-atksbkg sheet-crit-dmg-x">{{#critical_dmg2_type}}<span data-i18n-title="extra-critical-damage" data-i18n-aria-label="extra-critical-damage">{{critical_dmg2_type}}</span>{{/critical_dmg2_type}}{{^critical_dmg2_type}}<span data-i18n="extra-critical-damage">Xtra Crit Dmg</span>{{/critical_dmg2_type}}:<span class="sheet-right">+{{critical_dmg2}}</span></label>{{/critical_dmg2}}
				{{/rollWasCrit() attack}}{{/no_attack_roll}}
				{{^no_attack_roll}}{{#attack2}}<label class="sheet-atksbkg sheet-atk-i sheet-atk">{{^attack2name}}<span data-i18n="attack-2-ordinal">2nd attack</span>{{/attack2name}}{{#attack2name}}<span class="sheet-atk">{{attack2name}}</span>{{/attack2name}}:<span class="sheet-right">{{^attack2}}+{{/attack2}}{{attack2}}{{^vsother}}{{#vs}}&nbsp;{{#vsac}}<span class="sheet-vs" data-i18n="versus-armor-class">vs AC</span>{{/vsac}}{{#vstouch}}<span class="sheet-vs" data-i18n="versus-touch">vs Touch</span>{{/vstouch}}{{#vsff}}<span class="sheet-vs" data-i18n="versus-flat-footed">vs FF</span>{{/vsff}}{{#vsfft}}<span class="sheet-vs" data-i18n="versus-flat-footed-touch">vs FF Touch</span>{{/vsfft}}{{#vscmd}}<span class="sheet-vs" data-i18n="versus-combat-maneuver-defense">vs CMD</span>{{/vscmd}}{{#vscmb}}<span class="sheet-vs" data-i18n="versus-combat-maneuver-bonus">vs CMB</span>{{/vscmb}}{{/vs}}{{/vsother}}</span></label>{{/attack2}}{{/no_attack_roll}}
				{{^no_damage}}{{#damage2}}<label class="sheet-atksbkg sheet-dmg"><span data-i18n="damage">Damage</span><span class="sheet-right">{{damage2}}</span></label>{{/damage2}}{{/no_damage}}
				{{#precision_dmg21}}<label class="sheet-atksbkg sheet-dmg-x">{{#precision_dmg1_type}}<span data-i18n-title="extra-damage" data-i18n-aria-label="extra-damage">{{precision_dmg1_type}}</span>{{/precision_dmg1_type}}{{^precision_dmg1_type}}<span data-i18n="extra-damage">Precision Dmg</span>{{/precision_dmg1_type}}:<span class="sheet-right">{{precision_dmg21}}</span></label>{{/precision_dmg21}}
				{{#precision_dmg22}}<label class="sheet-atksbkg sheet-dmg-x">{{#precision_dmg2_type}}<span data-i18n-title="extra-damage" data-i18n-aria-label="extra-damage">{{precision_dmg2_type}}</span>{{/precision_dmg2_type}}{{^precision_dmg2_type}}<span data-i18n="extra-damage">Precision Dmg</span>{{/precision_dmg2_type}}:<span class="sheet-right">{{precision_dmg22}}</span></label>{{/precision_dmg22}}
				{{^no_attack_roll}}{{#rollWasCrit() attack2}}
				{{#crit_confirm2}}<label class="sheet-atksbkg sheet-atk-c sheet-confirm"><span data-i18n="critical-confirm">Crit Confirm</span>:<span class="sheet-right">{{crit_confirm2}}{{^vsother}}{{#vs}}&nbsp;{{#vsac}}<span class="sheet-vs" data-i18n="versus-armor-class">vs AC</span>{{/vsac}}{{#vstouch}}<span class="sheet-vs" data-i18n="versus-touch">vs Touch</span>{{/vstouch}}{{#vsff}}<span class="sheet-vs" data-i18n="versus-flat-footed">vs FF</span>{{/vsff}}{{#vsfft}}<span class="sheet-vs" data-i18n="versus-flat-footed-touch">vs FF Touch</span>{{/vsfft}}{{#vscmd}}<span class="sheet-vs" data-i18n="versus-combat-maneuver-defense">vs CMD</span>{{/vscmd}}{{#vscmb}}<span class="sheet-vs" data-i18n="versus-combat-maneuver-bonus">vs CMB</span>{{/vscmb}}{{/vs}}{{/vsother}}</span></label>{{/crit_confirm2}}
				{{#crit_damage2}}<label class="sheet-atksbkg sheet-crit-dmg"><span data-i18n="critical-damage">Crit Damage</span>:<span class="sheet-right">+{{crit_damage2}}</span></label>{{/crit_damage2}}
				{{#critical_dmg21}}<label class="sheet-atksbkg sheet-crit-dmg-x">{{#critical_dmg1_type}}<span data-i18n-title="extra-critical-damage" data-i18n-aria-label="extra-critical-damage">{{critical_dmg1_type}}</span>{{/critical_dmg1_type}}{{^critical_dmg1_type}}<span data-i18n="extra-critical-damage">Xtra Crit Dmg</span>{{/critical_dmg1_type}}:<span class="sheet-right">+{{critical_dmg21}}</span></label>{{/critical_dmg21}}
				{{#critical_dmg22}}<label class="sheet-atksbkg sheet-crit-dmg-x">{{#critical_dmg2_type}}<span data-i18n-title="extra-critical-damage" data-i18n-aria-label="extra-critical-damage">{{critical_dmg2_type}}</span>{{/critical_dmg2_type}}{{^critical_dmg2_type}}<span data-i18n="extra-critical-damage">Xtra Crit Dmg</span>{{/critical_dmg2_type}}:<span class="sheet-right">+{{critical_dmg22}}</span></label>{{/critical_dmg22}}
				{{/rollWasCrit() attack2}}{{/no_attack_roll}}
				{{^no_attack_roll}}{{#attack3}}<label class="sheet-atksbkg sheet-atk-i sheet-atk">{{^attack3name}}<span data-i18n="attack-3-ordinal">3rd attack</span>{{/attack3name}}{{#attack3name}}<span class="sheet-atk">{{attack3name}}</span>{{/attack3name}}:<span class="sheet-right">{{^attack3}}+{{/attack3}}{{attack3}}{{^vsother}}{{#vs}}&nbsp;{{#vsac}}<span class="sheet-vs" data-i18n="versus-armor-class">vs AC</span>{{/vsac}}{{#vstouch}}<span class="sheet-vs" data-i18n="versus-touch">vs Touch</span>{{/vstouch}}{{#vsff}}<span class="sheet-vs" data-i18n="versus-flat-footed">vs FF</span>{{/vsff}}{{#vsfft}}<span class="sheet-vs" data-i18n="versus-flat-footed-touch">vs FF Touch</span>{{/vsfft}}{{#vscmd}}<span class="sheet-vs" data-i18n="versus-combat-maneuver-defense">vs CMD</span>{{/vscmd}}{{#vscmb}}<span class="sheet-vs" data-i18n="versus-combat-maneuver-bonus">vs CMB</span>{{/vscmb}}{{/vs}}{{/vsother}}</span></label>{{/attack3}}{{/no_attack_roll}}
				{{^no_damage}}{{#damage3}}<label class="sheet-atksbkg sheet-dmg"><span data-i18n="damage">Damage</span><span class="sheet-right">{{damage3}}</span></label>{{/damage3}}{{/no_damage}}
				{{#precision_dmg31}}<label class="sheet-atksbkg sheet-dmg-x">{{#precision_dmg1_type}}<span data-i18n-title="extra-damage" data-i18n-aria-label="extra-damage">{{precision_dmg1_type}}</span>{{/precision_dmg1_type}}{{^precision_dmg1_type}}<span data-i18n="extra-damage">Precision Dmg</span>{{/precision_dmg1_type}}:<span class="sheet-right">{{precision_dmg31}}</span></label>{{/precision_dmg31}}
				{{#precision_dmg32}}<label class="sheet-atksbkg sheet-dmg-x">{{#precision_dmg2_type}}<span data-i18n-title="extra-damage" data-i18n-aria-label="extra-damage">{{precision_dmg2_type}}</span>{{/precision_dmg2_type}}{{^precision_dmg2_type}}<span data-i18n="extra-damage">Precision Dmg</span>{{/precision_dmg2_type}}:<span class="sheet-right">{{precision_dmg32}}</span></label>{{/precision_dmg32}}
				{{^no_attack_roll}}{{#rollWasCrit() attack3}}
				{{#crit_confirm3}}<label class="sheet-atksbkg sheet-atk-c sheet-confirm"><span data-i18n="critical-confirm">Crit Confirm</span>:<span class="sheet-right">{{crit_confirm3}}{{^vsother}}{{#vs}}&nbsp;{{#vsac}}<span class="sheet-vs" data-i18n="versus-armor-class">vs AC</span>{{/vsac}}{{#vstouch}}<span class="sheet-vs" data-i18n="versus-touch">vs Touch</span>{{/vstouch}}{{#vsff}}<span class="sheet-vs" data-i18n="versus-flat-footed">vs FF</span>{{/vsff}}{{#vsfft}}<span class="sheet-vs" data-i18n="versus-flat-footed-touch">vs FF Touch</span>{{/vsfft}}{{#vscmd}}<span class="sheet-vs" data-i18n="versus-combat-maneuver-defense">vs CMD</span>{{/vscmd}}{{#vscmb}}<span class="sheet-vs" data-i18n="versus-combat-maneuver-bonus">vs CMB</span>{{/vscmb}}{{/vs}}{{/vsother}}</span></label>{{/crit_confirm3}}
				{{#crit_damage3}}<label class="sheet-atksbkg sheet-crit-dmg"><span data-i18n="critical-damage">Crit Damage</span>:<span class="sheet-right">+{{crit_damage3}}</span></label>{{/crit_damage3}}
				{{#critical_dmg31}}<label class="sheet-atksbkg sheet-crit-dmg-x">{{#critical_dmg1_type}}<span data-i18n-title="extra-critical-damage" data-i18n-aria-label="extra-critical-damage">{{critical_dmg1_type}}</span>{{/critical_dmg1_type}}{{^critical_dmg1_type}}<span data-i18n="extra-critical-damage">Xtra Crit Dmg</span>{{/critical_dmg1_type}}:<span class="sheet-right">+{{critical_dmg31}}</span></label>{{/critical_dmg31}}
				{{#critical_dmg32}}<label class="sheet-atksbkg sheet-crit-dmg-x">{{#critical_dmg2_type}}<span data-i18n-title="extra-critical-damage" data-i18n-aria-label="extra-critical-damage">{{critical_dmg2_type}}</span>{{/critical_dmg2_type}}{{^critical_dmg2_type}}<span data-i18n="extra-critical-damage">Xtra Crit Dmg</span>{{/critical_dmg2_type}}:<span class="sheet-right">+{{critical_dmg32}}</span></label>{{/critical_dmg32}}
				{{/rollWasCrit() attack3}}{{/no_attack_roll}}
				{{^no_attack_roll}}{{#attack4}}<label class="sheet-atksbkg sheet-atk-i sheet-atk">{{^attack4name}}<span data-i18n="attack-4-ordinal">4rd attack</span>{{/attack4name}}{{#attack4name}}<span class="sheet-atk">{{attack4name}}</span>{{/attack4name}}:<span class="sheet-right">{{^attack4}}+{{/attack4}}{{attack4}}{{^vsother}}{{#vs}}&nbsp;{{#vsac}}<span class="sheet-vs" data-i18n="versus-armor-class">vs AC</span>{{/vsac}}{{#vstouch}}<span class="sheet-vs" data-i18n="versus-touch">vs Touch</span>{{/vstouch}}{{#vsff}}<span class="sheet-vs" data-i18n="versus-flat-footed">vs FF</span>{{/vsff}}{{#vsfft}}<span class="sheet-vs" data-i18n="versus-flat-footed-touch">vs FF Touch</span>{{/vsfft}}{{#vscmd}}<span class="sheet-vs" data-i18n="versus-combat-maneuver-defense">vs CMD</span>{{/vscmd}}{{#vscmb}}<span class="sheet-vs" data-i18n="versus-combat-maneuver-bonus">vs CMB</span>{{/vscmb}}{{/vs}}{{/vsother}}</span></label>{{/attack4}}{{/no_attack_roll}}
				{{^no_damage}}{{#damage4}}<label class="sheet-atksbkg sheet-dmg"><span data-i18n="damage">Damage</span><span class="sheet-right">{{damage4}}</span></label>{{/damage4}}{{/no_damage}}
				{{#precision_dmg41}}<label class="sheet-atksbkg sheet-dmg-x">{{#precision_dmg1_type}}<span data-i18n-title="extra-damage" data-i18n-aria-label="extra-damage">{{precision_dmg1_type}}</span>{{/precision_dmg1_type}}{{^precision_dmg1_type}}<span data-i18n="extra-damage">Precision Dmg</span>{{/precision_dmg1_type}}:<span class="sheet-right">{{precision_dmg41}}</span></label>{{/precision_dmg41}}
				{{#precision_dmg42}}<label class="sheet-atksbkg sheet-dmg-x">{{#precision_dmg2_type}}<span data-i18n-title="extra-damage" data-i18n-aria-label="extra-damage">{{precision_dmg2_type}}</span>{{/precision_dmg2_type}}{{^precision_dmg2_type}}<span data-i18n="extra-damage">Precision Dmg</span>{{/precision_dmg2_type}}:<span class="sheet-right">{{precision_dmg42}}</span></label>{{/precision_dmg42}}
				{{^no_attack_roll}}{{#rollWasCrit() attack4}}
				{{#crit_confirm4}}<label class="sheet-atksbkg sheet-atk-c sheet-confirm"><span data-i18n="critical-confirm">Crit Confirm</span>:<span class="sheet-right">{{crit_confirm4}}{{^vsother}}{{#vs}}&nbsp;{{#vsac}}<span class="sheet-vs" data-i18n="versus-armor-class">vs AC</span>{{/vsac}}{{#vstouch}}<span class="sheet-vs" data-i18n="versus-touch">vs Touch</span>{{/vstouch}}{{#vsff}}<span class="sheet-vs" data-i18n="versus-flat-footed">vs FF</span>{{/vsff}}{{#vsfft}}<span class="sheet-vs" data-i18n="versus-flat-footed-touch">vs FF Touch</span>{{/vsfft}}{{#vscmd}}<span class="sheet-vs" data-i18n="versus-combat-maneuver-defense">vs CMD</span>{{/vscmd}}{{#vscmb}}<span class="sheet-vs" data-i18n="versus-combat-maneuver-bonus">vs CMB</span>{{/vscmb}}{{/vs}}{{/vsother}}</span></label>{{/crit_confirm4}}
				{{#crit_damage4}}<label class="sheet-atksbkg sheet-crit-dmg"><span data-i18n="critical-damage">Crit Damage</span>:<span class="sheet-right">+{{crit_damage4}}</span></label>{{/crit_damage4}}
				{{#critical_dmg41}}<label class="sheet-atksbkg sheet-crit-dmg-x">{{#critical_dmg1_type}}<span data-i18n-title="extra-critical-damage" data-i18n-aria-label="extra-critical-damage">{{critical_dmg1_type}}</span>{{/critical_dmg1_type}}{{^critical_dmg1_type}}<span data-i18n="extra-critical-damage">Xtra Crit Dmg</span>{{/critical_dmg1_type}}:<span class="sheet-right">+{{critical_dmg41}}</span></label>{{/critical_dmg41}}
				{{#critical_dmg42}}<label class="sheet-atksbkg sheet-crit-dmg-x">{{#critical_dmg2_type}}<span data-i18n-title="extra-critical-damage" data-i18n-aria-label="extra-critical-damage">{{critical_dmg2_type}}</span>{{/critical_dmg2_type}}{{^critical_dmg2_type}}<span data-i18n="extra-critical-damage">Xtra Crit Dmg</span>{{/critical_dmg2_type}}:<span class="sheet-right">+{{critical_dmg42}}</span></label>{{/critical_dmg42}}
				{{/rollWasCrit() attack4}}{{/no_attack_roll}}
				{{^no_attack_roll}}{{#attack5}}<label class="sheet-atksbkg sheet-atk-i sheet-atk">{{^attack5name}}<span data-i18n="attack-5-ordinal">5rd attack</span>{{/attack5name}}{{#attack5name}}<span class="sheet-atk">{{attack5name}}</span>{{/attack5name}}:<span class="sheet-right">{{^attack5}}+{{/attack5}}{{attack5}}{{^vsother}}{{#vs}}&nbsp;{{#vsac}}<span class="sheet-vs" data-i18n="versus-armor-class">vs AC</span>{{/vsac}}{{#vstouch}}<span class="sheet-vs" data-i18n="versus-touch">vs Touch</span>{{/vstouch}}{{#vsff}}<span class="sheet-vs" data-i18n="versus-flat-footed">vs FF</span>{{/vsff}}{{#vsfft}}<span class="sheet-vs" data-i18n="versus-flat-footed-touch">vs FF Touch</span>{{/vsfft}}{{#vscmd}}<span class="sheet-vs" data-i18n="versus-combat-maneuver-defense">vs CMD</span>{{/vscmd}}{{#vscmb}}<span class="sheet-vs" data-i18n="versus-combat-maneuver-bonus">vs CMB</span>{{/vscmb}}{{/vs}}{{/vsother}}</span></label>{{/attack5}}{{/no_attack_roll}}
				{{^no_damage}}{{#damage5}}<label class="sheet-atksbkg sheet-dmg"><span data-i18n="damage">Damage</span><span class="sheet-right">{{damage5}}</span></label>{{/damage5}}{{/no_damage}}
				{{#precision_dmg51}}<label class="sheet-atksbkg sheet-dmg-x">{{#precision_dmg1_type}}<span data-i18n-title="extra-damage" data-i18n-aria-label="extra-damage">{{precision_dmg1_type}}</span>{{/precision_dmg1_type}}{{^precision_dmg1_type}}<span data-i18n="extra-damage">Precision Dmg</span>{{/precision_dmg1_type}}:<span class="sheet-right">{{precision_dmg51}}</span></label>{{/precision_dmg51}}
				{{#precision_dmg52}}<label class="sheet-atksbkg sheet-dmg-x">{{#precision_dmg2_type}}<span data-i18n-title="extra-damage" data-i18n-aria-label="extra-damage">{{precision_dmg2_type}}</span>{{/precision_dmg2_type}}{{^precision_dmg2_type}}<span data-i18n="extra-damage">Precision Dmg</span>{{/precision_dmg2_type}}:<span class="sheet-right">{{precision_dmg52}}</span></label>{{/precision_dmg52}}
				{{^no_attack_roll}}{{#rollWasCrit() attack5}}
				{{#crit_confirm5}}<label class="sheet-atksbkg sheet-atk-c sheet-confirm"><span data-i18n="critical-confirm">Crit Confirm</span>:<span class="sheet-right">{{crit_confirm5}}{{^vsother}}{{#vs}}&nbsp;{{#vsac}}<span class="sheet-vs" data-i18n="versus-armor-class">vs AC</span>{{/vsac}}{{#vstouch}}<span class="sheet-vs" data-i18n="versus-touch">vs Touch</span>{{/vstouch}}{{#vsff}}<span class="sheet-vs" data-i18n="versus-flat-footed">vs FF</span>{{/vsff}}{{#vsfft}}<span class="sheet-vs" data-i18n="versus-flat-footed-touch">vs FF Touch</span>{{/vsfft}}{{#vscmd}}<span class="sheet-vs" data-i18n="versus-combat-maneuver-defense">vs CMD</span>{{/vscmd}}{{#vscmb}}<span class="sheet-vs" data-i18n="versus-combat-maneuver-bonus">vs CMB</span>{{/vscmb}}{{/vs}}{{/vsother}}</span></label>{{/crit_confirm5}}
				{{#crit_damage5}}<label class="sheet-atksbkg sheet-crit-dmg"><span data-i18n="critical-damage">Crit Damage</span>:<span class="sheet-right">+{{crit_damage5}}</span></label>{{/crit_damage5}}
				{{#critical_dmg51}}<label class="sheet-atksbkg sheet-crit-dmg-x">{{#critical_dmg1_type}}<span data-i18n-title="extra-critical-damage" data-i18n-aria-label="extra-critical-damage">{{critical_dmg1_type}}</span>{{/critical_dmg1_type}}{{^critical_dmg1_type}}<span data-i18n="extra-critical-damage">Xtra Crit Dmg</span>{{/critical_dmg1_type}}:<span class="sheet-right">+{{critical_dmg51}}</span></label>{{/critical_dmg51}}
				{{#critical_dmg52}}<label class="sheet-atksbkg sheet-crit-dmg-x">{{#critical_dmg2_type}}<span data-i18n-title="extra-critical-damage" data-i18n-aria-label="extra-critical-damage">{{critical_dmg2_type}}</span>{{/critical_dmg2_type}}{{^critical_dmg2_type}}<span data-i18n="extra-critical-damage">Xtra Crit Dmg</span>{{/critical_dmg2_type}}:<span class="sheet-right">+{{critical_dmg52}}</span></label>{{/critical_dmg52}}
				{{/rollWasCrit() attack5}}{{/no_attack_roll}}
				{{^no_attack_roll}}{{#attack6}}<label class="sheet-atksbkg sheet-atk-i sheet-atk">{{^attack6name}}<span data-i18n="attack-6-ordinal">6rd attack</span>{{/attack6name}}{{#attack6name}}<span class="sheet-atk">{{attack6name}}</span>{{/attack6name}}:<span class="sheet-right">{{^attack6}}+{{/attack6}}{{attack6}}{{^vsother}}{{#vs}}&nbsp;{{#vsac}}<span class="sheet-vs" data-i18n="versus-armor-class">vs AC</span>{{/vsac}}{{#vstouch}}<span class="sheet-vs" data-i18n="versus-touch">vs Touch</span>{{/vstouch}}{{#vsff}}<span class="sheet-vs" data-i18n="versus-flat-footed">vs FF</span>{{/vsff}}{{#vsfft}}<span class="sheet-vs" data-i18n="versus-flat-footed-touch">vs FF Touch</span>{{/vsfft}}{{#vscmd}}<span class="sheet-vs" data-i18n="versus-combat-maneuver-defense">vs CMD</span>{{/vscmd}}{{#vscmb}}<span class="sheet-vs" data-i18n="versus-combat-maneuver-bonus">vs CMB</span>{{/vscmb}}{{/vs}}{{/vsother}}</span></label>{{/attack6}}{{/no_attack_roll}}
				{{^no_damage}}{{#damage6}}<label class="sheet-atksbkg sheet-dmg"><span data-i18n="damage">Damage</span><span class="sheet-right">{{damage6}}</span></label>{{/damage6}}{{/no_damage}}
				{{#precision_dmg61}}<label class="sheet-atksbkg sheet-dmg-x">{{#precision_dmg1_type}}<span data-i18n-title="extra-damage" data-i18n-aria-label="extra-damage">{{precision_dmg1_type}}</span>{{/precision_dmg1_type}}{{^precision_dmg1_type}}<span data-i18n="extra-damage">Precision Dmg</span>{{/precision_dmg1_type}}:<span class="sheet-right">{{precision_dmg61}}</span></label>{{/precision_dmg61}}
				{{#precision_dmg62}}<label class="sheet-atksbkg sheet-dmg-x">{{#precision_dmg2_type}}<span data-i18n-title="extra-damage" data-i18n-aria-label="extra-damage">{{precision_dmg2_type}}</span>{{/precision_dmg2_type}}{{^precision_dmg2_type}}<span data-i18n="extra-damage">Precision Dmg</span>{{/precision_dmg2_type}}:<span class="sheet-right">{{precision_dmg62}}</span></label>{{/precision_dmg62}}
				{{^no_attack_roll}}{{#rollWasCrit() attack6}}
				{{#crit_confirm6}}<label class="sheet-atksbkg sheet-atk-c sheet-confirm"><span data-i18n="critical-confirm">Crit Confirm</span>:<span class="sheet-right">{{crit_confirm6}}{{^vsother}}{{#vs}}&nbsp;{{#vsac}}<span class="sheet-vs" data-i18n="versus-armor-class">vs AC</span>{{/vsac}}{{#vstouch}}<span class="sheet-vs" data-i18n="versus-touch">vs Touch</span>{{/vstouch}}{{#vsff}}<span class="sheet-vs" data-i18n="versus-flat-footed">vs FF</span>{{/vsff}}{{#vsfft}}<span class="sheet-vs" data-i18n="versus-flat-footed-touch">vs FF Touch</span>{{/vsfft}}{{#vscmd}}<span class="sheet-vs" data-i18n="versus-combat-maneuver-defense">vs CMD</span>{{/vscmd}}{{#vscmb}}<span class="sheet-vs" data-i18n="versus-combat-maneuver-bonus">vs CMB</span>{{/vscmb}}{{/vs}}{{/vsother}}</span></label>{{/crit_confirm6}}
				{{#crit_damage6}}<label class="sheet-atksbkg sheet-crit-dmg"><span data-i18n="critical-damage">Crit Damage</span>:<span class="sheet-right">+{{crit_damage6}}</span></label>{{/crit_damage6}}
				{{#critical_dmg61}}<label class="sheet-atksbkg sheet-crit-dmg-x">{{#critical_dmg1_type}}<span data-i18n-title="extra-critical-damage" data-i18n-aria-label="extra-critical-damage">{{critical_dmg1_type}}</span>{{/critical_dmg1_type}}{{^critical_dmg1_type}}<span data-i18n="extra-critical-damage">Xtra Crit Dmg</span>{{/critical_dmg1_type}}:<span class="sheet-right">+{{critical_dmg61}}</span></label>{{/critical_dmg61}}
				{{#critical_dmg62}}<label class="sheet-atksbkg sheet-crit-dmg-x">{{#critical_dmg2_type}}<span data-i18n-title="extra-critical-damage" data-i18n-aria-label="extra-critical-damage">{{critical_dmg2_type}}</span>{{/critical_dmg2_type}}{{^critical_dmg2_type}}<span data-i18n="extra-critical-damage">Xtra Crit Dmg</span>{{/critical_dmg2_type}}:<span class="sheet-right">+{{critical_dmg62}}</span></label>{{/critical_dmg62}}
				{{/rollWasCrit() attack6}}{{/no_attack_roll}}
				{{^no_attack_roll}}{{#attack7}}<label class="sheet-atksbkg sheet-atk-i sheet-atk">{{^attack7name}}<span data-i18n="attack-7-ordinal">7rd attack</span>{{/attack7name}}{{#attack7name}}<span class="sheet-atk">{{attack7name}}</span>{{/attack7name}}:<span class="sheet-right">{{^attack7}}+{{/attack7}}{{attack7}}{{^vsother}}{{#vs}}&nbsp;{{#vsac}}<span class="sheet-vs" data-i18n="versus-armor-class">vs AC</span>{{/vsac}}{{#vstouch}}<span class="sheet-vs" data-i18n="versus-touch">vs Touch</span>{{/vstouch}}{{#vsff}}<span class="sheet-vs" data-i18n="versus-flat-footed">vs FF</span>{{/vsff}}{{#vsfft}}<span class="sheet-vs" data-i18n="versus-flat-footed-touch">vs FF Touch</span>{{/vsfft}}{{#vscmd}}<span class="sheet-vs" data-i18n="versus-combat-maneuver-defense">vs CMD</span>{{/vscmd}}{{#vscmb}}<span class="sheet-vs" data-i18n="versus-combat-maneuver-bonus">vs CMB</span>{{/vscmb}}{{/vs}}{{/vsother}}</span></label>{{/attack7}}{{/no_attack_roll}}
				{{^no_damage}}{{#damage7}}<label class="sheet-atksbkg sheet-dmg"><span data-i18n="damage">Damage</span><span class="sheet-right">{{damage7}}</span></label>{{/damage7}}{{/no_damage}}
				{{#precision_dmg71}}<label class="sheet-atksbkg sheet-dmg-x">{{#precision_dmg1_type}}<span data-i18n-title="extra-damage" data-i18n-aria-label="extra-damage">{{precision_dmg1_type}}</span>{{/precision_dmg1_type}}{{^precision_dmg1_type}}<span data-i18n="extra-damage">Precision Dmg</span>{{/precision_dmg1_type}}:<span class="sheet-right">{{precision_dmg71}}</span></label>{{/precision_dmg71}}
				{{#precision_dmg72}}<label class="sheet-atksbkg sheet-dmg-x">{{#precision_dmg2_type}}<span data-i18n-title="extra-damage" data-i18n-aria-label="extra-damage">{{precision_dmg2_type}}</span>{{/precision_dmg2_type}}{{^precision_dmg2_type}}<span data-i18n="extra-damage">Precision Dmg</span>{{/precision_dmg2_type}}:<span class="sheet-right">{{precision_dmg72}}</span></label>{{/precision_dmg72}}
				{{^no_attack_roll}}{{#rollWasCrit() attack7}}
				{{#crit_confirm7}}<label class="sheet-atksbkg sheet-atk-c sheet-confirm"><span data-i18n="critical-confirm">Crit Confirm</span>:<span class="sheet-right">{{crit_confirm7}}{{^vsother}}{{#vs}}&nbsp;{{#vsac}}<span class="sheet-vs" data-i18n="versus-armor-class">vs AC</span>{{/vsac}}{{#vstouch}}<span class="sheet-vs" data-i18n="versus-touch">vs Touch</span>{{/vstouch}}{{#vsff}}<span class="sheet-vs" data-i18n="versus-flat-footed">vs FF</span>{{/vsff}}{{#vsfft}}<span class="sheet-vs" data-i18n="versus-flat-footed-touch">vs FF Touch</span>{{/vsfft}}{{#vscmd}}<span class="sheet-vs" data-i18n="versus-combat-maneuver-defense">vs CMD</span>{{/vscmd}}{{#vscmb}}<span class="sheet-vs" data-i18n="versus-combat-maneuver-bonus">vs CMB</span>{{/vscmb}}{{/vs}}{{/vsother}}</span></label>{{/crit_confirm7}}
				{{#crit_damage7}}<label class="sheet-atksbkg sheet-crit-dmg"><span data-i18n="critical-damage">Crit Damage</span>:<span class="sheet-right">+{{crit_damage7}}</span></label>{{/crit_damage7}}
				{{#critical_dmg71}}<label class="sheet-atksbkg sheet-crit-dmg-x">{{#critical_dmg1_type}}<span data-i18n-title="extra-critical-damage" data-i18n-aria-label="extra-critical-damage">{{critical_dmg1_type}}</span>{{/critical_dmg1_type}}{{^critical_dmg1_type}}<span data-i18n="extra-critical-damage">Xtra Crit Dmg</span>{{/critical_dmg1_type}}:<span class="sheet-right">+{{critical_dmg71}}</span></label>{{/critical_dmg71}}
				{{#critical_dmg72}}<label class="sheet-atksbkg sheet-crit-dmg-x">{{#critical_dmg2_type}}<span data-i18n-title="extra-critical-damage" data-i18n-aria-label="extra-critical-damage">{{critical_dmg2_type}}</span>{{/critical_dmg2_type}}{{^critical_dmg2_type}}<span data-i18n="extra-critical-damage">Xtra Crit Dmg</span>{{/critical_dmg2_type}}:<span class="sheet-right">+{{critical_dmg72}}</span></label>{{/critical_dmg72}}
				{{/rollWasCrit() attack7}}{{/no_attack_roll}}
				{{^no_attack_roll}}{{#attack8}}<label class="sheet-atksbkg sheet-atk-i sheet-atk">{{^attack8name}}<span data-i18n="attack-8-ordinal">8rd attack</span>{{/attack8name}}{{#attack8name}}<span class="sheet-atk">{{attack8name}}</span>{{/attack8name}}:<span class="sheet-right">{{^attack8}}+{{/attack8}}{{attack8}}{{^vsother}}{{#vs}}&nbsp;{{#vsac}}<span class="sheet-vs" data-i18n="versus-armor-class">vs AC</span>{{/vsac}}{{#vstouch}}<span class="sheet-vs" data-i18n="versus-touch">vs Touch</span>{{/vstouch}}{{#vsff}}<span class="sheet-vs" data-i18n="versus-flat-footed">vs FF</span>{{/vsff}}{{#vsfft}}<span class="sheet-vs" data-i18n="versus-flat-footed-touch">vs FF Touch</span>{{/vsfft}}{{#vscmd}}<span class="sheet-vs" data-i18n="versus-combat-maneuver-defense">vs CMD</span>{{/vscmd}}{{#vscmb}}<span class="sheet-vs" data-i18n="versus-combat-maneuver-bonus">vs CMB</span>{{/vscmb}}{{/vs}}{{/vsother}}</span></label>{{/attack8}}{{/no_attack_roll}}
				{{^no_damage}}{{#damage8}}<label class="sheet-atksbkg sheet-dmg"><span data-i18n="damage">Damage</span><span class="sheet-right">{{damage8}}</span></label>{{/damage8}}{{/no_damage}}
				{{#precision_dmg81}}<label class="sheet-atksbkg sheet-dmg-x">{{#precision_dmg1_type}}<span data-i18n-title="extra-damage" data-i18n-aria-label="extra-damage">{{precision_dmg1_type}}</span>{{/precision_dmg1_type}}{{^precision_dmg1_type}}<span data-i18n="extra-damage">Precision Dmg</span>{{/precision_dmg1_type}}:<span class="sheet-right">{{precision_dmg81}}</span></label>{{/precision_dmg81}}
				{{#precision_dmg82}}<label class="sheet-atksbkg sheet-dmg-x">{{#precision_dmg2_type}}<span data-i18n-title="extra-damage" data-i18n-aria-label="extra-damage">{{precision_dmg2_type}}</span>{{/precision_dmg2_type}}{{^precision_dmg2_type}}<span data-i18n="extra-damage">Precision Dmg</span>{{/precision_dmg2_type}}:<span class="sheet-right">{{precision_dmg82}}</span></label>{{/precision_dmg82}}
				{{^no_attack_roll}}{{#rollWasCrit() attack8}}
				{{#crit_confirm8}}<label class="sheet-atksbkg sheet-atk-c sheet-confirm"><span data-i18n="critical-confirm">Crit Confirm</span>:<span class="sheet-right">{{crit_confirm8}}{{^vsother}}{{#vs}}&nbsp;{{#vsac}}<span class="sheet-vs" data-i18n="versus-armor-class">vs AC</span>{{/vsac}}{{#vstouch}}<span class="sheet-vs" data-i18n="versus-touch">vs Touch</span>{{/vstouch}}{{#vsff}}<span class="sheet-vs" data-i18n="versus-flat-footed">vs FF</span>{{/vsff}}{{#vsfft}}<span class="sheet-vs" data-i18n="versus-flat-footed-touch">vs FF Touch</span>{{/vsfft}}{{#vscmd}}<span class="sheet-vs" data-i18n="versus-combat-maneuver-defense">vs CMD</span>{{/vscmd}}{{#vscmb}}<span class="sheet-vs" data-i18n="versus-combat-maneuver-bonus">vs CMB</span>{{/vscmb}}{{/vs}}{{/vsother}}</span></label>{{/crit_confirm8}}
				{{#crit_damage8}}<label class="sheet-atksbkg sheet-crit-dmg"><span data-i18n="critical-damage">Crit Damage</span>:<span class="sheet-right">+{{crit_damage8}}</span></label>{{/crit_damage8}}
				{{#critical_dmg81}}<label class="sheet-atksbkg sheet-crit-dmg-x">{{#critical_dmg1_type}}<span data-i18n-title="extra-critical-damage" data-i18n-aria-label="extra-critical-damage">{{critical_dmg1_type}}</span>{{/critical_dmg1_type}}{{^critical_dmg1_type}}<span data-i18n="extra-critical-damage">Xtra Crit Dmg</span>{{/critical_dmg1_type}}:<span class="sheet-right">+{{critical_dmg81}}</span></label>{{/critical_dmg81}}
				{{#critical_dmg82}}<label class="sheet-atksbkg sheet-crit-dmg-x">{{#critical_dmg2_type}}<span data-i18n-title="extra-critical-damage" data-i18n-aria-label="extra-critical-damage">{{critical_dmg2_type}}</span>{{/critical_dmg2_type}}{{^critical_dmg2_type}}<span data-i18n="extra-critical-damage">Xtra Crit Dmg</span>{{/critical_dmg2_type}}:<span class="sheet-right">+{{critical_dmg82}}</span></label>{{/critical_dmg82}}
				{{/rollWasCrit() attack8}}{{/no_attack_roll}}
				{{#allprops() color accessible rounded header_image character_name character_id name_link subtitle attack damage crit_confirm crit_damage description attack2 damage2 crit_confirm2 crit_damage2 attack3 damage3 crit_confirm3 crit_damage3 attack4 damage4 crit_confirm4 crit_damage4 attack5 damage5 crit_confirm5 crit_damage5 attack6 damage6 crit_confirm6 crit_damage6 attack7 damage7 crit_confirm7 crit_damage7 attack8 damage8 crit_confirm8 crit_damage8 melee_notes ranged_notes CMB_notes attack_notes type weapon_notes generic_note precision_dmg1 precision_dmg1_type precision_dmg2 precision_dmg2_type critical_dmg1 critical_dmg1_type critical_dmg2 critical_dmg2_type precision_dmg21 critical_dmg21 precision_dmg22 critical_dmg22 precision_dmg31 critical_dmg31 precision_dmg32 critical_dmg32 precision_dmg41 critical_dmg41 precision_dmg42 critical_dmg42 precision_dmg51 critical_dmg51 precision_dmg52 critical_dmg52 precision_dmg61 critical_dmg61 precision_dmg62 critical_dmg62 precision_dmg71 critical_dmg71 precision_dmg72 critical_dmg72 precision_dmg81 critical_dmg81 precision_dmg82 critical_dmg82 attack1name attack2name attack3name attack4name attack5name attack6name attack7name attack8name vs vsac vstouch vsff vsfft vscmd vscmb vsother no_attack_roll no_damage}}
				<label><span>{{key}}</span>:<span class="sheet-right">{{value}}</span></label>
				{{/allprops() color accessible rounded header_image character_name character_id name_link subtitle attack damage crit_confirm crit_damage description attack2 damage2 crit_confirm2 crit_damage2 attack3 damage3 crit_confirm3 crit_damage3 attack4 damage4 crit_confirm4 crit_damage4 attack5 damage5 crit_confirm5 crit_damage5 attack6 damage6 crit_confirm6 crit_damage6 attack7 damage7 crit_confirm7 crit_damage7 attack8 damage8 crit_confirm8 crit_damage8 melee_notes ranged_notes CMB_notes attack_notes type weapon_notes generic_note precision_dmg1 precision_dmg1_type precision_dmg2 precision_dmg2_type critical_dmg1 critical_dmg1_type critical_dmg2 critical_dmg2_type precision_dmg21 critical_dmg21 precision_dmg22 critical_dmg22 precision_dmg31 critical_dmg31 precision_dmg32 critical_dmg32 precision_dmg41 critical_dmg41 precision_dmg42 critical_dmg42 precision_dmg51 critical_dmg51 precision_dmg52 critical_dmg52 precision_dmg61 critical_dmg61 precision_dmg62 critical_dmg62 precision_dmg71 critical_dmg71 precision_dmg72 critical_dmg72 precision_dmg81 critical_dmg81 precision_dmg82 critical_dmg82 attack1name attack2name attack3name attack4name attack5name attack6name attack7name attack8name vs vsac vstouch vsff vsfft vscmd vscmb vsother no_attack_roll no_damage}}
				{{#type}}<label><span data-i18n="type">Type</span>:<span class="sheet-right">{{type}}</span></label>{{/type}}
				{{#melee_notes}}<label><span data-i18n="melee-notes">Melee Notes</span>:<span>{{melee_notes}}</span></label>{{/melee_notes}}
				{{#ranged_notes}}<label><span data-i18n="ranged-notes">Ranged Notes</span>:<span>{{ranged_notes}}</span></label>{{/ranged_notes}}
				{{#CMB_notes}}<label><span data-i18n="combat-maneuver-base-notes">CMB Notes</span>:<span>{{CMB_notes}}</span></label>{{/CMB_notes}}
				{{#attack_notes}}<label><span data-i18n="attack">Attack Notes</span>:<span>{{attack_notes}}</span></label>{{/attack_notes}}
				{{#weapon_notes}}<label><span data-i18n="weapon-notes">Weapon Notes</span>:<span>{{weapon_notes}}</span></label>{{/weapon_notes}}
				{{#description}}<span class="sheet-roll-description">{{description}}</span>{{/description}}
				{{#generic_note}}<span class="sheet-roll-description">{{generic_note}}</span>{{/generic_note}}
			</div>
			{{/accessible}}
		</rolltemplate>
		<!-- Defense Roll Templates -->
		<rolltemplate class="sheet-rolltemplate-pf_defense">
			<input type="checkbox" name="attr_use_specfont" value="1" class="sheet-accessible sheet-noshow" role="presentation" />
			<input type="checkbox" name="attr_use_specfont" value="2" class="sheet-comid-sans sheet-noshow" role="presentation" />
			<input type="checkbox" name="attr_use_specfont" value="3" class="sheet-segoe sheet-noshow" role="presentation" />
			<input type="checkbox" name="attr_use_specfont" value="4" class="sheet-lucida sheet-noshow" role="presentation" />
			<input type="checkbox" name="attr_use_specfont" value="5" class="sheet-fantasy sheet-noshow" role="presentation" />
			{{^accessible}}
			<div class="sheet-roll-table sheet-rolltemplate-pf_defense {{#color}}color-{{color}}{{/color}} {{#rounded}}rounded{{/rounded}}" role="presentation">
				<div class="sheet-roll-header" style="width:100%;">
					{{#header_image}}<span class="sheet-header-image">{{header_image}}</span>{{/header_image}}
					<span class="sheet-left">
						{{#character_name}}
						{{#character_id}}[{{character_name}}](https://journal.roll20.net/character/{{character_id}}){{/character_id}}
						{{^character_id}}{{character_name}}{{/character_id}}
						{{#name}}:{{/name}}
						{{/character_name}}
						{{#name}}
						{{#name_link}}[{{name}}]({{name_link}}){{/name_link}}
						{{^name_link}}{{name}}{{/name_link}}
						{{/name}}
					</span>
					{{#subtitle}}<span class="sheet-subtitle">{{subtitle}}</span>{{/subtitle}}
				</div>
				<div class="sheet-roll-group">
					{{#buttons}}<div class="sheet-roll-row sheet-roll-description"><div class="sheet-roll-cell">{{buttons}}</div></div>{{/buttons}}
				</div>					
				<div style="display:table;width:100%;">
					<div class="sheet-roll-group2">
						{{#allprops() spellfail showdefenses showsaves showspecialdefenses buttons ac touch flat_footed cmd fort ref will color accessible rounded header_image character_name character_id name_link subtitle defensive-abilities_notes dr_notes resistances_notes immunities_notes weaknesses_notes sr0_notes armor_notes save_notes cmd_notes defense_notes description generic_note}}
						<div class="sheet-roll-row"><div class="sheet-roll-cell">**{{key}}**:</div><div class="sheet-roll-cell">{{value}}</div></div>
						{{/allprops() spellfail showdefenses showsaves showspecialdefenses buttons ac touch flat_footed cmd fort ref will color accessible rounded header_image character_name character_id name_link subtitle defensive-abilities_notes dr_notes resistances_notes immunities_notes weaknesses_notes sr0_notes armor_notes save_notes cmd_notes defense_notes description generic_note}}
					</div>
				</div>
				<div class="sheet-roll-group">
					{{#showdefenses}}
					<div class="sheet-roll-row"><div class="sheet-roll-cell">**<span data-i18n="defenses">Defenses</span>** </div></div>
					<div class="sheet-roll-row"><div class="sheet-roll-cell">{{#ac}}**<span data-i18n="armor-class-abbrv">AC</span>:** {{ac}}, {{/ac}}
					{{#touch}}**<span data-i18n="touch">Touch</span>:** {{touch}}, {{/touch}}
					{{#flat_footed}}**<span data-i18n="flat-footed">Flat Footed</span>:** {{flat_footed}}, {{/flat_footed}}
					{{#cmd}}**<span data-i18n="combat-maneuver-defense-abbrv">CMD</span>:** {{cmd}}{{/cmd}}
					{{#dr_notes}}, **<span data-i18n="damage-resistance-abbrv">DR</span>:** {{dr_notes}}{{/dr_notes}}</div></div>
					{{#armor_notes}}<div class="sheet-roll-row"><div class="sheet-roll-cell">**<span data-i18n="armor-notes">Armor Notes</span>:** {{armor_notes}}</div></div>{{/armor_notes}}
					{{#cmd_notes}}<div class="sheet-roll-row"><div class="sheet-roll-cell">**<span data-i18n="combat-maneuver-defense-notes">CMD Notes</span>:** {{cmd_notes}}</div></div>{{/cmd_notes}}
					{{/showdefenses}}
					{{#showsaves}}
					<div class="sheet-roll-row"><div class="sheet-roll-cell">**<span data-i18n="saving-throws">Saving Throws</span>** </div></div>
					<div class="sheet-roll-row"><div class="sheet-roll-cell">{{#fort}}**<span data-i18n="fortitude-abbrv">Fort</span>:** {{fort}}, {{/fort}}
					{{#ref}}**<span data-i18n="reflex-abbrv">Ref</span>:** {{ref}}, {{/ref}}
					{{#will}}**<span data-i18n="willpower-abbrv">Will</span>:** {{will}}{{/will}}
					{{#sr0_notes}}, **<span data-i18n="spell-resistance-abbrv">Spell Resistances</span>:** {{sr0_notes}}{{/sr0_notes}}</div></div>
					{{/showsaves}}
					{{#save_notes}}<div class="sheet-roll-row"><div class="sheet-roll-cell">**<span data-i18n="save-notes">Save Notes</span>:** {{save_notes}}</div></div>{{/save_notes}}
					{{#showspecialdefenses}}
					<div class="sheet-roll-row"><div class="sheet-roll-cell">**<span data-i18n="special-defense-notes">Special Defenses and Notes</span>** </div></div>
					{{#spellfail}}<div class="sheet-roll-row"><div class="sheet-roll-cell">**<span data-i18n="spell-failure">spell failure</span>:** {{spellfail}}%</div></div>{{/spellfail}}
					{{#resistances_notes}}<div class="sheet-roll-row"><div class="sheet-roll-cell">**<span data-i18n="resistance">Resistances</span>:** {{resistances_notes}}</div></div>{{/resistances_notes}}
					{{#immunities_notes}}<div class="sheet-roll-row"><div class="sheet-roll-cell">**<span data-i18n="immunities">Immunities</span>:** {{immunities_notes}}</div></div>{{/immunities_notes}}
					{{#weaknesses_notes}}<div class="sheet-roll-row"><div class="sheet-roll-cell">**<span data-i18n="weaknesses">Weaknesses</span>:** {{weaknesses_notes}}</div></div>{{/weaknesses_notes}}
					{{#defense_notes}}<div class="sheet-roll-row"><div class="sheet-roll-cell">**<span data-i18n="defense-notes">Defensive Notes</span>:** {{defense_notes}}</div></div>{{/defense_notes}}
					{{#defensive-abilities_notes}}<div class="sheet-roll-row"><div class="sheet-roll-cell">**<span data-i18n="defensive-abilities">Defensive Abilities</span>:** {{defensive-abilities_notes}}</div></div>{{/defensive-abilities_notes}}
					{{/showspecialdefenses}}
					{{#description}}<div class="sheet-roll-row sheet-roll-description"><div class="sheet-roll-cell">{{description}}</div></div>{{/description}}
					{{#generic_note}}<div class="sheet-roll-row sheet-roll-description"><div class="sheet-roll-cell">{{generic_note}}</div></div>{{/generic_note}}
				</div>
			</div>
			{{/accessible}}
			{{#accessible}}
			<div class="sheet-roll-accessible {{#color}}color-{{color}}{{/color}}" role="presentation">
				<h3 class="sheet-roll-header">
					{{#character_name}}{{character_name}}{{#name}}: {{/name}}{{/character_name}}
					{{#name}}{{name}}{{/name}}
				</h3>
				{{#subtitle}}<h4>{{subtitle}}</h4>{{/subtitle}}
				{{#buttons}}<span class="sheet-roll-description">{{buttons}}</span>{{/buttons}}
				{{#allprops() spellfail showdefenses showsaves showspecialdefenses buttons ac touch flat_footed cmd fort ref will color accessible rounded header_image character_name character_id name_link subtitle defensive-abilities_notes dr_notes resistances_notes immunities_notes weaknesses_notes sr0_notes armor_notes save_notes cmd_notes defense_notes description generic_note}}
				<label>**{{key}}**:<span>{{value}}</span></label>
				{{/allprops() spellfail showdefenses showsaves showspecialdefenses buttons ac touch flat_footed cmd fort ref will color accessible rounded header_image character_name character_id name_link subtitle defensive-abilities_notes dr_notes resistances_notes immunities_notes weaknesses_notes sr0_notes armor_notes save_notes cmd_notes defense_notes description generic_note}}
				{{#showdefenses}}
				<h4><span>**<span data-i18n="defenses">Defenses</span>** </span></h4>
				<label><span>{{#ac}}<span style="white-space:nowrap;"><span data-i18n="armor-class-abbrv">AC</span>: {{ac}},</span> {{/ac}}
				{{#touch}}<span style="white-space:nowrap;"><span data-i18n="touch">Touch</span>: {{touch}},</span> {{/touch}}
				{{#flat_footed}}<span style="white-space:nowrap;"><span data-i18n="flat-footed">Flat Footed</span>: {{flat_footed}},</span> {{/flat_footed}}
				{{#cmd}}<span style="white-space:nowrap;"><span data-i18n="combat-maneuver-defense-abbrv">CMD</span>: {{cmd}}</span>{{/cmd}}
				{{#dr_notes}}, <span style="white-space:nowrap;"><span data-i18n="damage-resistance-abbrv">DR</span>: {{dr_notes}}</span>{{/dr_notes}}</span></label>
				{{#armor_notes}}<label><span>**<span data-i18n="armor-notes">Armor Notes</span>:** {{armor_notes}}</span></label>{{/armor_notes}}
				{{#cmd_notes}}<label><span>**<span data-i18n="combat-maneuver-defense-notes">CMD Notes</span>:** {{cmd_notes}}</span></label>{{/cmd_notes}}
				{{/showdefenses}}
				{{#showsaves}}
				<h4><span>**<span data-i18n="saving-throws">Saving Throws</span>** </span></h4>
				<label><span>{{#fort}}<span style="white-space:nowrap;"><span data-i18n="fortitude-abbrv">Fort</span>: {{fort}},</span> {{/fort}}
				{{#ref}}<span style="white-space:nowrap;"><span data-i18n="reflex-abbrv">Ref</span>: {{ref}},</span> {{/ref}}
				{{#will}}<span style="white-space:nowrap;"><span data-i18n="willpower-abbrv">Will</span>: {{will}}</span>{{/will}}</span></label>
				{{#sr0_notes}}, <span style="white-space:nowrap;"><span data-i18n="spell-resistance-abbrv2">Spell Resist</span>: {{sr0_notes}}</span>{{/sr0_notes}}
				{{/showsaves}}
				{{#save_notes}}<label><span>**<span data-i18n="save-notes">Saves</span>:** {{save_notes}}</span></label>{{/save_notes}}
				{{#showspecialdefenses}}
				<h4><span>**<span data-i18n="special-defense-notes">Special Defenses and Notes</span>** </span></h4>
				{{#spellfail}}<label><span>**<span data-i18n="spell-failure">Spell Failure</span>:** {{spellfail}}</span></label>{{/spellfail}}
				{{#resistances_notes}}<label><span>**<span data-i18n="resistances">Resistances</span>:** {{resistances_notes}}</span></label>{{/resistances_notes}}
				{{#immunities_notes}}<label><span>**<span data-i18n="immunities">Immunities</span>:** {{immunities_notes}}</span></label>{{/immunities_notes}}
				{{#weaknesses_notes}}<label><span>**<span data-i18n="weaknesses">Weaknesses</span>:** {{weaknesses_notes}}</span></label>{{/weaknesses_notes}}
				{{#defense_notes}}<label><span>**<span data-i18n="defense-notes">Defenses</span>:** {{defense_notes}}</span></label>{{/defense_notes}}
				{{#defensive-abilities_notes}}<label><span>**<span data-i18n="defensive-abilities">Defensive Abilities</span>:** {{defensive-abilities_notes}}</span></label>{{/defensive-abilities_notes}}
				{{/showspecialdefenses}}
				{{#description}}<span class="sheet-roll-description">{{description}}</span>{{/description}}
				{{#generic_note}}<span class="sheet-roll-description">{{generic_note}}</span>{{/generic_note}}
			</div>
			{{/accessible}}
		</rolltemplate>
		<!-- Ability Roll Templates -->
		<rolltemplate class="sheet-rolltemplate-pf_ability">
			<input type="checkbox" name="attr_use_specfont" value="1" class="sheet-accessible sheet-noshow" role="presentation" />
			<input type="checkbox" name="attr_use_specfont" value="2" class="sheet-comid-sans sheet-noshow" role="presentation" />
			<input type="checkbox" name="attr_use_specfont" value="3" class="sheet-segoe sheet-noshow" role="presentation" />
			<input type="checkbox" name="attr_use_specfont" value="4" class="sheet-lucida sheet-noshow" role="presentation" />
			<input type="checkbox" name="attr_use_specfont" value="5" class="sheet-fantasy sheet-noshow" role="presentation" />
			{{^accessible}}
			<div class="sheet-roll-table sheet-rolltemplate-pf_ability {{#color}}color-{{color}}{{/color}} {{#rounded}}rounded{{/rounded}}" role="presentation">
				<div class="sheet-roll-header">
					{{#header_image}}<span class="sheet-header-image">{{header_image}}</span>{{/header_image}}
					<span class="sheet-left">
						{{#character_name}}
						{{#character_id}}[{{character_name}}](https://journal.roll20.net/character/{{character_id}}){{/character_id}}
						{{^character_id}}{{character_name}}{{/character_id}}
						{{#name}}:{{/name}}
						{{/character_name}}
						{{#name}}
						{{#name_link}}[{{name}}]({{name_link}}){{/name_link}}
						{{^name_link}}{{name}}{{/name_link}}
						{{/name}}{{#ability_type}} ({{ability_type}}){{/ability_type}}
					</span>
					{{#rule_category}}{{#subtitle}}<span class="sheet-subtitle">{{subtitle}}</span>{{/subtitle}}{{/rule_category}}
				</div>
				<div class="sheet-roll-group">
					{{#source}}<div class="sheet-roll-row sheet-roll-description"><div class="sheet-roll-cell">**<span data-i18n="source">Source</span>** {{source}}{{#casterlevel}} ({{casterlevel}}){{/casterlevel}}</div></div>{{/source}}
					{{#cust_category}}<div class="sheet-roll-row sheet-roll-description"><div class="sheet-roll-cell">{{cust_category}}</div></div>{{/cust_category}}
				</div>
				<div style="display:table;width:100%;">
					<div class="sheet-roll-group2">
						{{#hasfrequency}}{{#frequency}}
							<div class="sheet-roll-row"><div class="sheet-roll-cell">**<span data-i18n="frequency">Frequency</span>**</div>
							<div class="sheet-roll-cell">{{#hasuses}}{{#uses}}{{uses}}{{/uses}}{{#uses_max}}/{{uses_max}}{{/uses_max}}{{/hasuses}}
							{{frequency}}{{#next_cast}}, <span data-i18n="next-cast">Next Cast</span>: {{next_cast}}{{/next_cast}}</div></div>
						{{/frequency}}{{/hasfrequency}}
						{{#save}}<div class="sheet-roll-row"><div class="sheet-roll-cell">**<span data-i18n="save">Save</span>**</div><div class="sheet-roll-cell">{{save}}{{#savedc}} <span data-i18n="difficulty-class-abbrv">DC</span>{{savedc}}{{/savedc}}</div></div>{{/save}}
						{{#is_sp}}
							{{#casterlevel}}<div class="sheet-roll-row"><div class="sheet-roll-cell">**<span data-i18n="caster-level">casterlevel</span>**</div><div class="sheet-roll-cell">{{casterlevel}}</div></div>{{/casterlevel}}
							{{#spell_level}}<div class="sheet-roll-row"><div class="sheet-roll-cell">**<span data-i18n="spell-level">spell_level</span>**</div><div class="sheet-roll-cell">{{spell_level}}</div></div>{{/spell_level}}
							{{#hassr}}{{#sr}}<div class="sheet-roll-row"><div class="sheet-roll-cell">**<span data-i18n="spell-resistance">Spell Resistance</span>**</div><div class="sheet-roll-cell">{{sr}}</div></div>{{/sr}}{{/hassr}}
							{{#concentration}}<div class="sheet-roll-row"><div class="sheet-roll-cell">**<span data-i18n="concentration">Concentration</span>**</div><div class="sheet-roll-cell">**+**{{concentration}}</div></div>{{/concentration}}
							{{#hasspellrange}}{{#spell_range}}<div class="sheet-roll-row"><div class="sheet-roll-cell">**<span data-i18n="range">Range</span>**</div><div class="sheet-roll-cell">{{spell_range}}{{#hasposrange}}{{#range}} ({{range}} <span data-i18n="feet-abbrv">ft.</span>){{/range}}{{/hasposrange}}</div></div>{{/spell_range}}{{/hasspellrange}}
						{{/is_sp}}
						{{^is_sp}}{{#hasposrange}}<div class="sheet-roll-row"><div class="sheet-roll-cell">**<span data-i18n="range">Range</span>**</div><div class="sheet-roll-cell">{{#range}}{{range}}{{/range}}</div></div>{{/hasposrange}}{{/is_sp}}
						{{#hasattack}}<div class="sheet-roll-row"><div class="sheet-roll-cell">**<span data-i18n="attack-type">Attack type</span>**</div><div class="sheet-roll-cell">{{#attacktype}}{{attacktype}}{{/attacktype}}</div></div>{{/hasattack}}
						{{#targetarea}}<div class="sheet-roll-row"><div class="sheet-roll-cell">**<span data-i18n="targets-area-effect">Targets/Area/Effect</span>**</div><div class="sheet-roll-cell">{{targetarea}}</div></div>{{/targetarea}}
						{{#damage}}<div class="sheet-roll-row"><div class="sheet-roll-cell">**<span data-i18n="damage">Damage</span>**</div><div class="sheet-roll-cell">{{damage}}{{#damagetype}} {{damagetype}}{{/damagetype}}</div></div>{{/damage}}
						{{#check}}<div class="sheet-roll-row"><div class="sheet-roll-cell">**<span data-i18n="check">Check</span>**</div><div class="sheet-roll-cell">{{check}}</div></div>{{/check}}
						{{#duration}}<div class="sheet-roll-row"><div class="sheet-roll-cell">**<span data-i18n="duration">Duration</span>**</div><div class="sheet-roll-cell">{{duration}}</div></div>{{/duration}}														
						{{#allprops() color accessible rounded header_image character_name name character_id name_link subtitle casterlevel check shortdesc description class generic_note source rule_category cust_category hasfrequency frequency hasuses uses uses_max next_cast save savedc hasspellrange spell_range custrange hasposrange range is_sp hassr sr concentration hasattack attacktype targetarea damage damagetype deafened_note duration casterlevel spell_level }}
						<div class="sheet-roll-row"><div class="sheet-roll-cell">**{{key}}**</div><div class="sheet-roll-cell">{{value}}</div></div>
						{{/allprops() color accessible rounded header_image character_name name character_id name_link subtitle casterlevel check shortdesc description class generic_note source rule_category cust_category hasfrequency frequency hasuses uses uses_max next_cast save savedc hasspellrange spell_range custrange hasposrange range is_sp hassr sr concentration hasattack attacktype targetarea damage damagetype deafened_note duration casterlevel spell_level }}
					</div>
				</div>
				<div class="sheet-roll-group">
					{{#shortdesc}}<div class="sheet-roll-row sheet-roll-description"><div class="sheet-roll-cell">{{shortdesc}}</div></div>{{/shortdesc}}
					{{#description}}<div class="sheet-roll-row sheet-roll-description"><div class="sheet-roll-cell">**<span data-i18n="description">Description</span>:**{{description}}</div></div>{{/description}}
					{{#generic_note}}<div class="sheet-roll-row sheet-roll-description"><div class="sheet-roll-cell">{{generic_note}}</div></div>{{/generic_note}}
					{{#is_sp}}{{#deafened_note}}<div class="sheet-roll-row sheet-roll-description"><div class="sheet-roll-cell">**<span data-i18n="deafened">Deafened</span>:**<span data-i18n="condition-deafened-spellonly">Has a 20% chance of spell failure when casting spells with verbal components.</span></div></div>{{/deafened_note}}{{/is_sp}}
				</div>
			</div>
			{{/accessible}}
			{{#accessible}}
			<div class="sheet-roll-accessible {{#color}}color-{{color}}{{/color}}" role="presentation">
				<h3 class="sheet-roll-header">
					{{#character_name}}{{character_name}}{{#name}}: {{/name}}{{/character_name}}
					{{#name}}{{name}}{{/name}}{{#ability_type}} ({{ability_type}}){{/ability_type}}
				</h3>
				{{#rule_category}}{{#subtitle}}<h4>{{subtitle}}</h4>{{/subtitle}}{{/rule_category}}
				{{#source}}<label>**<span data-i18n="source">Source</span>**<span class="sheet-right">{{source}}{{#casterlevel}} ({{casterlevel}}){{/casterlevel}}</span></label>{{/source}}
				{{#cust_category}}<span class="sheet-roll-description">{{cust_category}}</span>{{/cust_category}}
				{{#hasfrequency}}{{#frequency}}
					<label>**<span data-i18n="frequency">Frequency</span>**
					<span class="sheet-right">{{#hasuses}}{{#uses}}{{uses}}{{/uses}}{{#uses_max}}/{{uses_max}}{{/uses_max}}{{/hasuses}}
					{{frequency}}{{#next_cast}}, <span data-i18n="next-cast">{{next_cast}}</span>{{/next_cast}}</span></label>
				{{/frequency}}{{/hasfrequency}}
				{{#save}}<label>**<span data-i18n="save">Save</span>**<span class="sheet-right">{{save}}{{#savedc}} <span data-i18n="difficulty-class-abbrv">DC</span>{{savedc}}{{/savedc}}</span></label>{{/save}}
				{{#is_sp}}
					{{#casterlevel}}<label>**<span data-i18n="caster-level">casterlevel</span>**<span class="sheet-right">{{casterlevel}}</span></label>{{/casterlevel}}
					{{#spell_level}}<label>**<span data-i18n="spell-level">spell_level</span>**<span class="sheet-right">{{spell_level}}</span></label>{{/spell_level}}
					{{#hassr}}{{#sr}}<label>**<span data-i18n="spell-resistance">Spell Resistance</span>**<span class="sheet-right">{{sr}}</span></label>{{/sr}}{{/hassr}}
					{{#concentration}}<label>**<span data-i18n="concentration">Concentration</span>**<span class="sheet-right">**+**{{concentration}}</span></label>{{/concentration}}
					{{#hasspellrange}}{{#spell_range}}<label>**<span data-i18n="range">Range</span>**<span class="sheet-right">{{spell_range}}{{#hasposrange}} ({{range}} <span data-i18n="feet-abbrv">ft.</span>){{/hasposrange}}</span></label>{{/spell_range}}{{/hasspellrange}}
				{{/is_sp}}
				{{^is_sp}}{{#hasposrange}}<label>**<span data-i18n="range">Range</span>**<span class="sheet-right">{{#range}}{{range}}{{/range}}</span></label>{{/hasposrange}}{{/is_sp}}
				{{#hasattack}}<label>**<span data-i18n="attack-type">Attack type</span>**<span class="sheet-right">{{#attacktype}}{{attacktype}}{{/attacktype}} <span data-i18n="versus-touch">vs Touch</span></label>{{/hasattack}}
				{{#targetarea}}<label>**<span data-i18n="targets-area-effect">Target/Area/Effect</span>**</span><span class="sheet-right">{{targetarea}}</span></label>{{/targetarea}}
				{{#damage}}<label>**<span data-i18n="damage">Damage</span>**<span class="sheet-right">{{damage}}{{#damagetype}} {{damagetype}}{{/damagetype}}</span></label>{{/damage}}
				{{#check}}<label>**<span data-i18n="check">Check</span>**<span class="sheet-right">{{check}}</span></label>{{/check}}
				{{#duration}}<label>**<span data-i18n="duration">Duration</span>**<span class="sheet-right">{{duration}}</span></label>{{/duration}}
				{{#allprops() color accessible rounded header_image character_name name character_id name_link subtitle check shortdesc description untrained class generic_note source cust_cataegory rule_category cust_category hasfrequency frequency hasuses uses uses_max next_cast save savedc hasspellrange spell_range custrange hasposrange range is_sp hassr sr concentration hasattack attacktype targetarea damage damagetype deafened_note duration casterlevel spell_level }}
				<label><span>**{{key}}**</span><span class="sheet-right">{{value}}</span></label>
				{{/allprops() color accessible rounded header_image character_name name character_id name_link subtitle check shortdesc description untrained class generic_note source cust_cataegory rule_category cust_category hasfrequency frequency hasuses uses uses_max next_cast save savedc hasspellrange spell_range custrange hasposrange range is_sp hassr sr concentration hasattack attacktype targetarea damage damagetype deafened_note duration casterlevel spell_level }}
				{{#generic_note}}<span class="sheet-roll-description">{{generic_note}}</span>{{/generic_note}}
				{{#shortdesc}}<span class="sheet-roll-description">{{shortdesc}}</span>{{/shortdesc}}
				{{#description}}<h4 data-i18n="description">Description</h4><span class="sheet-roll-description">{{description}}</span>{{/description}}
				{{#is_sp}}{{#deafened_note}}<h4 data-i18n="deafened">Deafened</h4><label><span data-i18n="condition-deafened-spellonly">Has a 20% chance of spell failure when casting spells with verbal components.</span></label>{{/deafened_note}}{{/is_sp}}
			</div>
			{{/accessible}}
		</rolltemplate>
		<!-- Generic Roll Templates -->
		<rolltemplate class="sheet-rolltemplate-pf_generic">
			<input type="checkbox" name="attr_use_specfont" value="1" class="sheet-accessible sheet-noshow" role="presentation" />
			<input type="checkbox" name="attr_use_specfont" value="2" class="sheet-comid-sans sheet-noshow" role="presentation" />
			<input type="checkbox" name="attr_use_specfont" value="3" class="sheet-segoe sheet-noshow" role="presentation" />
			<input type="checkbox" name="attr_use_specfont" value="4" class="sheet-lucida sheet-noshow" role="presentation" />
			<input type="checkbox" name="attr_use_specfont" value="5" class="sheet-fantasy sheet-noshow" role="presentation" />
			{{^accessible}}
			<div class="sheet-roll-table sheet-rolltemplate-pf_generic {{#color}}color-{{color}}{{/color}} {{#rounded}}rounded{{/rounded}}" role="presentation">
				<div class="sheet-roll-header">
					{{#header_image}}<span class="sheet-header-image">{{header_image}}</span>{{/header_image}}
					<span class="sheet-left">
						{{#character_name}}
						{{#character_id}}[{{character_name}}](https://journal.roll20.net/character/{{character_id}}){{/character_id}}
						{{^character_id}}{{character_name}}{{/character_id}}
						{{#name}}:{{/name}}
						{{/character_name}}
						{{#name}}
						{{#name_link}}[{{name}}]({{name_link}}){{/name_link}}
						{{^name_link}}{{name}}{{/name_link}}
						{{/name}}
					</span>
					{{#subtitle}}<span class="sheet-subtitle">{{subtitle}}</span>{{/subtitle}}
				</div>
				<div style="display:table;width:100%;">
					<div class="sheet-roll-group2">
						{{#check}}<div class="sheet-roll-row"><div class="sheet-roll-cell">**<span data-i18n="check"></span>:**</div><div class="sheet-roll-cell">{{check}}</div></div>{{/check}}
						{{#class}}<div class="sheet-roll-row"><div class="sheet-roll-cell">**<span data-i18n="class"></span>:**</div><div class="sheet-roll-cell">{{class}}</div></div>{{/class}}
						{{#testrange}}<div class="sheet-roll-row"><div class="sheet-roll-cell">**<span data-i18n="range"></span>:**</div><div class="sheet-roll-cell">^{{{testrange}}}</div></div>{{/testrange}}
					</div>
				</div>
				<div class="sheet-roll-group">
					{{#lefttext_1}}<div class="sheet-roll-row"><div class="sheet-roll-cell">{{lefttext_1}}</div></div>{{/lefttext_1}}
					{{#righttext_1}}<div class="sheet-roll-row"><div class="sheet-roll-cell sheet-right">{{righttext_1}}</div></div>{{/righttext_1}}
					{{#lefttext_2}}<div class="sheet-roll-row"><div class="sheet-roll-cell">{{lefttext_2}}</div></div>{{/lefttext_2}}
					{{#righttext_2}}<div class="sheet-roll-row"><div class="sheet-roll-cell sheet-right">{{righttext_2}}</div></div>{{/righttext_2}}
					{{#lefttext_3}}<div class="sheet-roll-row"><div class="sheet-roll-cell">{{lefttext_3}}</div></div>{{/lefttext_3}}
					{{#righttext_3}}<div class="sheet-roll-row"><div class="sheet-roll-cell sheet-right">{{righttext_3}}</div></div>{{/righttext_3}}
					{{#lefttext_4}}<div class="sheet-roll-row"><div class="sheet-roll-cell">{{lefttext_4}}</div></div>{{/lefttext_4}}
					{{#righttext_4}}<div class="sheet-roll-row"><div class="sheet-roll-cell sheet-right">{{righttext_4}}</div></div>{{/righttext_4}}
					{{#lefttext_5}}<div class="sheet-roll-row"><div class="sheet-roll-cell">{{lefttext_5}}</div></div>{{/lefttext_5}}
					{{#righttext_5}}<div class="sheet-roll-row"><div class="sheet-roll-cell sheet-right">{{righttext_5}}</div></div>{{/righttext_5}}
				</div>
				<div style="display:table;width:100%;">
					<div class="sheet-roll-group2">
						{{#allprops() color accessible rounded header_image character_name name character_id name_link subtitle check init_notes description untrained class generic_note righttext_1 lefttext_1 righttext_2 lefttext_2 righttext_3 lefttext_3 righttext_4 lefttext_4 righttext_5 lefttext_5 righttext_6 lefttext_6 righttext_7 lefttext_7 righttext_8 lefttext_8 righttext_9 lefttext_9 righttext_10 lefttext_10 whisper switch }}
						<div class="sheet-roll-row"><div class="sheet-roll-cell">**{{key}}**</div><div class="sheet-roll-cell">{{value}}</div></div>
						{{/allprops() color accessible rounded header_image character_name name character_id name_link subtitle check init_notes description untrained class generic_note righttext_1 lefttext_1 righttext_2 lefttext_2 righttext_3 lefttext_3 righttext_4 lefttext_4 righttext_5 lefttext_5 righttext_6 lefttext_6 righttext_7 lefttext_7 righttext_8 lefttext_8 righttext_9 lefttext_9 righttext_10 lefttext_10 whisper switch }}
					</div>
				</div>
				<div class="sheet-roll-group">
					{{#lefttext_6}}<div class="sheet-roll-row"><div class="sheet-roll-cell">{{lefttext_6}}</div></div>{{/lefttext_6}}
					{{#righttext_6}}<div class="sheet-roll-row"><div class="sheet-roll-cell sheet-right">{{righttext_6}}</div></div>{{/righttext_6}}
					{{#lefttext_7}}<div class="sheet-roll-row"><div class="sheet-roll-cell">{{lefttext_7}}</div></div>{{/lefttext_7}}
					{{#righttext_7}}<div class="sheet-roll-row"><div class="sheet-roll-cell sheet-right">{{righttext_7}}</div></div>{{/righttext_7}}
					{{#lefttext_8}}<div class="sheet-roll-row"><div class="sheet-roll-cell">{{lefttext_8}}</div></div>{{/lefttext_8}}
					{{#righttext_8}}<div class="sheet-roll-row"><div class="sheet-roll-cell sheet-right">{{righttext_8}}</div></div>{{/righttext_8}}
					{{#lefttext_9}}<div class="sheet-roll-row"><div class="sheet-roll-cell">{{lefttext_9}}</div></div>{{/lefttext_9}}
					{{#righttext_9}}<div class="sheet-roll-row"><div class="sheet-roll-cell sheet-right">{{righttext_9}}</div></div>{{/righttext_9}}
					{{#lefttext_10}}<div class="sheet-roll-row"><div class="sheet-roll-cell">{{lefttext_10}}</div></div>{{/lefttext_10}}
					{{#righttext_10}}<div class="sheet-roll-row"><div class="sheet-roll-cell sheet-right">{{righttext_10}}</div></div>{{/righttext_10}}
					{{#untrained}}<div class="sheet-roll-row"><div class="sheet-roll-cell">**<span data-i18n="skill-untrained"></span>**</div></div>{{/untrained}}
					{{#description}}<div class="sheet-roll-row sheet-roll-description"><div class="sheet-roll-cell">{{description}}</div></div>{{/description}}
					{{#generic_note}}<div class="sheet-roll-row sheet-roll-description"><div class="sheet-roll-cell">{{generic_note}}</div></div>{{/generic_note}}
				</div>
			</div>
			{{/accessible}}
			{{#accessible}}
			<div class="sheet-roll-accessible {{#color}}color-{{color}}{{/color}}" role="presentation">
				<h3 class="sheet-roll-header">
					{{#character_name}}{{character_name}}{{#name}}: {{/name}}{{/character_name}}
					{{#name}}{{name}}{{/name}}
				</h3>
				{{#subtitle}}<h4>{{subtitle}}</h4>{{/subtitle}}
				{{#check}}<label style="display:inline-block;"><span class="sheet-right">**<span data-i18n="check"></span>:** {{check}}</span></label>{{/check}}
				{{#class}}<label style="display:inline-block;"><span class="sheet-right">**<span data-i18n="class"></span>:** {{class}}</span></label>{{/class}}
				{{#lefttext_1}}<label><span>{{lefttext_1}}</span></label>{{/lefttext_1}}
				{{#righttext_1}}<label><span class="sheet-right">{{righttext_1}}</span></label>{{/righttext_1}}
				{{#lefttext_2}}<label><span>{{lefttext_2}}</span></label>{{/lefttext_2}}
				{{#righttext_2}}<label><span class="sheet-right">{{righttext_2}}</span></label>{{/righttext_2}}
				{{#lefttext_3}}<label><span>{{lefttext_3}}</span></label>{{/lefttext_3}}
				{{#righttext_3}}<label><span class="sheet-right">{{righttext_3}}</span></label>{{/righttext_3}}
				{{#lefttext_4}}<label><span>{{lefttext_4}}</span></label>{{/lefttext_4}}
				{{#righttext_4}}<label><span class="sheet-right">{{righttext_4}}</span></label>{{/righttext_4}}
				{{#lefttext_5}}<label><span>{{lefttext_5}}</span></label>{{/lefttext_5}}
				{{#righttext_5}}<label><span class="sheet-right">{{righttext_5}}</span></label>{{/righttext_5}}
				{{#allprops() color accessible rounded header_image character_name name character_id name_link subtitle check init_notes description untrained class generic_note righttext_1 lefttext_1 righttext_2 lefttext_2 righttext_3 lefttext_3 righttext_4 lefttext_4 righttext_5 lefttext_5 righttext_6 lefttext_6 righttext_7 lefttext_7 righttext_8 lefttext_8 righttext_9 lefttext_9 righttext_10 lefttext_10 whisper switch }}
				<label><span>**{{key}}**</span><span class="sheet-right">{{value}}</span></label>
				{{/allprops() color accessible rounded header_image character_name name character_id name_link subtitle check init_notes description untrained class generic_note righttext_1 lefttext_1 righttext_2 lefttext_2 righttext_3 lefttext_3 righttext_4 lefttext_4 righttext_5 lefttext_5 righttext_6 lefttext_6 righttext_7 lefttext_7 righttext_8 lefttext_8 righttext_9 lefttext_9 righttext_10 lefttext_10 whisper switch }}
				{{#lefttext_6}}<label><span>{{lefttext_6}}</span></label>{{/lefttext_6}}
				{{#righttext_6}}<label><span class="sheet-right">{{righttext_6}}</span></label>{{/righttext_6}}
				{{#lefttext_7}}<label><span>{{lefttext_7}}</span></label>{{/lefttext_7}}
				{{#righttext_7}}<label><span class="sheet-right">{{righttext_7}}</span></label>{{/righttext_7}}
				{{#lefttext_8}}<label><span>{{lefttext_8}}</span></label>{{/lefttext_8}}
				{{#righttext_8}}<label><span class="sheet-right">{{righttext_8}}</span></label>{{/righttext_8}}
				{{#lefttext_9}}<label><span>{{lefttext_9}}</span></label>{{/lefttext_9}}
				{{#righttext_9}}<label><span class="sheet-right">{{righttext_9}}</span></label>{{/righttext_9}}
				{{#lefttext_10}}<label><span>{{lefttext_10}}</span></label>{{/lefttext_10}}
				{{#righttext_10}}<label><span class="sheet-right">{{righttext_10}}</span></label>{{/righttext_10}}
				{{#untrained}}<label>**<span data-i18n="skill-untrained"></span>**</label>{{/untrained}}
				{{#generic_note}}<span class="sheet-roll-description">{{generic_note}}</span>{{/generic_note}}
				{{#description}}<span class="sheet-roll-description">{{description}}</span>{{/description}}
			</div>
			{{/accessible}}
		</rolltemplate>
		<!-- Block Text Roll Templates -->
		<rolltemplate class="sheet-rolltemplate-pf_block">
			<input type="checkbox" name="attr_use_specfont" value="1" class="sheet-accessible sheet-noshow" role="presentation" />
			<input type="checkbox" name="attr_use_specfont" value="2" class="sheet-comid-sans sheet-noshow" role="presentation" />
			<input type="checkbox" name="attr_use_specfont" value="3" class="sheet-segoe sheet-noshow" role="presentation" />
			<input type="checkbox" name="attr_use_specfont" value="4" class="sheet-lucida sheet-noshow" role="presentation" />
			<input type="checkbox" name="attr_use_specfont" value="5" class="sheet-fantasy sheet-noshow" role="presentation" />
			{{^accessible}}
			<div class="sheet-roll-table sheet-rolltemplate-pf_block {{#color}}color-{{color}}{{/color}} {{#rounded}}rounded{{/rounded}}" role="menu" >
				<div class="sheet-roll-header" style="width:100%;">
					{{#header_image}}<span class="sheet-header-image">{{header_image}}</span>{{/header_image}}
					<span class="sheet-left">
						{{#character_name}}
						{{#character_id}}[{{character_name}}](https://journal.roll20.net/character/{{character_id}}){{/character_id}}
						{{^character_id}}{{character_name}}{{/character_id}}
						{{#name}}:{{/name}}
						{{/character_name}}
						{{#name}}
						{{#name_link}}[{{name}}]({{name_link}}){{/name_link}}
						{{^name_link}}{{name}}{{/name_link}}
						{{/name}}
					</span>
					{{#subtitle}}<span class="sheet-subtitle">{{subtitle}}</span>{{/subtitle}}
				</div>
				<div class="sheet-roll-group">
					{{#class}}<div class="sheet-roll-row"><div class="sheet-roll-cell">{{class}}</div></div>{{/class}}
					{{#hasuses}}<div class="sheet-roll-row"><div class="sheet-roll-cell"><span data-i18n="quantity-abbrv">Qty</span>: {{#qty}}{{qty}}{{/qty}}/{{#qty_max}}{{qty_max}}{{/qty_max}}</div></div>{{/hasuses}}
					{{#allprops() whisper switch hasuses qty qty_max shortdesc color accessible rounded name header_image character_name character_id name_link subtitle description class generic_note}}
					<div class="sheet-roll-row"><div class="sheet-roll-cell">{{value}}</div></div>
					{{/allprops() whisper switch hasuses qty qty_max shortdesc color accessible rounded name header_image character_name character_id name_link subtitle description class generic_note}}
				</div>
				<div class="sheet-roll-group">
					{{#shortdesc}}<div class="sheet-roll-row sheet-roll-description"><div class="sheet-roll-cell">{{shortdesc}}</div></div>{{/shortdesc}}
					{{#description}}<div class="sheet-roll-row sheet-roll-description"><div class="sheet-roll-cell">{{description}}</div></div>{{/description}}
					{{#generic_note}}<div class="sheet-roll-row sheet-roll-description"><div class="sheet-roll-cell">{{generic_note}}</div></div>{{/generic_note}}
				</div>
			</div>
			{{/accessible}}
			{{#accessible}}
			<div class="sheet-roll-accessible {{#color}}color-{{color}}{{/color}}" role="menu">
				<h3 class="sheet-roll-header">
					{{#character_name}}{{character_name}}{{#name}}: {{/name}}{{/character_name}}
					{{#name}}{{name}}{{/name}}
				</h3>
				{{#subtitle}}<h4>{{subtitle}}</h4>{{/subtitle}}
				{{#class}}<label><span>{{class}}</span></label>{{/class}}
				{{#hasuses}}<label><span><span data-i18n="quantity-abbrv">qty</span>: {{#qty}}{{qty}}{{/qty}}/{{#qty_max}}{{qty_max}}{{/qty_max}}</span></label>{{/hasuses}}
				{{#allprops() whisper switch hasuses qty qty_max shortdesc color accessible rounded name header_image character_name character_id name_link subtitle description class generic_note}}
				<label><span>{{value}}</span></label>
				{{/allprops() whisper switch hasuses qty qty_max shortdesc color accessible rounded name header_image character_name character_id name_link subtitle description class generic_note}}
				{{#shortdesc}}<span class="sheet-roll-description">{{shortdesc}}</span>{{/shortdesc}}
				{{#description}}<h4 data-i18n="description">Description</h4><span class="sheet-roll-description">{{description}}</span>{{/description}}
				{{#generic_note}}<span class="sheet-roll-description">{{generic_note}}</span>{{/generic_note}}
			</div>
			{{/accessible}}
		</rolltemplate>
	</div>
</div><script type="text/worker">/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};

/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {

/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId])
/******/ 			return installedModules[moduleId].exports;

/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};

/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);

/******/ 		// Flag the module as loaded
/******/ 		module.l = true;

/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}


/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;

/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;

/******/ 	// identity function for calling harmony imports with the correct context
/******/ 	__webpack_require__.i = function(value) { return value; };

/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, {
/******/ 				configurable: false,
/******/ 				enumerable: true,
/******/ 				get: getter
/******/ 			});
/******/ 		}
/******/ 	};

/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};

/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };

/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";

/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = 39);
/******/ })
/************************************************************************/
/******/ ([
/* 0 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
var PFLog = exports.PFLog = {
  // PFLog just a little helper to write to console using fancy type
  l: '%cס§₪₪₪₪§|(Ξ≥≤≥≤≥≤ΞΞΞΞΞΞΞΞΞΞ>    ',
  r: '    <ΞΞΞΞΞΞΞΞΞΞ≥≤≥≤≥≤Ξ)|§₪₪₪₪§ס',
  bg: 'background: linear-gradient(to right,green,white,white,green); color:black;text-shadow: 0 0 8px white;',
  modulecount: 0
};

var PFConsole = exports.PFConsole = {
  log: function log(text) {
    console.log(PFLog.l + text + PFLog.r, PFLog.bg);
  }
};

/***/ }),
/* 1 */
/***/ (function(module, exports) {

/* ---- BEGIN: TheAaronSheet.js ---- */
// Github:   https://github.com/shdwjk/TheAaronSheet/blob/master/TheAaronSheet.js
// By:       The Aaron, Arcane Scriptomancer
// Contact:  https://app.roll20.net/users/104025/the-aaron

var TAS = TAS || (function(){
    'use strict';

    var version = '0.2.4',
        lastUpdate = 1457098091,

        loggingSettings = {
            debug: {
                key:     'debug',
                title:   'DEBUG',
                color: {
                    bgLabel: '#7732A2',
                    label:   '#F2EF40',
                    bgText:  '#FFFEB7',
                    text:    '#7732A2'
                }
            },
            error: {
                key:     'error',
                title:   'Error',
                color: {
                    bgLabel: '#C11713',
                    label:   'white',
                    bgText:  '#C11713',
                    text:    'white'
                }
            },
            warn: {
                key:     'warn',
                title:   'Warning',
                color: {
                    bgLabel: '#F29140',
                    label:   'white',
                    bgText:  '#FFD8B7',
                    text:    'black'
                }
            },
            info: {
                key:     'info',
                title:   'Info',
                color: {
                    bgLabel: '#413FA9',
                    label:   'white',
                    bgText:  '#B3B2EB',
                    text:    'black'
                }
            },
            notice: {
                key:     'notice',
                title:   'Notice',
                color: {
                    bgLabel: '#33C133',
                    label:   'white',
                    bgText:  '#ADF1AD',
                    text:    'black'
                }
            },
            log: {
                key:     'log',
                title:   'Log',
                color: {
                    bgLabel: '#f2f240',
                    label:   'black',
                    bgText:  '#ffff90',
                    text:    'black'
                }
            },
            callstack: {
                key:     'TAS',
                title:   'function',
                color: {
                    bgLabel: '#413FA9',
                    label:   'white',
                    bgText:  '#B3B2EB',
                    text:    'black'
                }
            },
            callstack_async: {
                key:     'TAS',
                title:   'ASYNC CALL',
                color: {
                    bgLabel: '#413FA9',
                    label:   'white',
                    bgText:  '#413FA9',
                    text:    'white'
                }
            },
            TAS: {
                key:     'TAS',
                title:   'TAS',
                color: {
                    bgLabel: 'grey',
                    label:   'black;background:linear-gradient(#304352,#d7d2cc,#d7d2cc,#d7d2cc,#304352)',
                    bgText:  'grey',
                    text:    'black;background:linear-gradient(#304352,#d7d2cc,#d7d2cc,#d7d2cc,#304352)'
                }
            }
        },


        config = {
            debugMode: false,
            logging: {
                log: true,
                notice: true,
                info: true,
                warn: true,
                error: true,
                debug: false
            }
        },

        callstackRegistry = [],
		queuedUpdates = {}, //< Used for delaying saves till the last momment.

    complexType = function(o){
        switch(typeof o){
            case 'string':
                return 'string';
            case 'boolean':
                return 'boolean';
            case 'number':
                return (_.isNaN(o) ? 'NaN' : (o.toString().match(/\./) ? 'decimal' : 'integer'));
            case 'function':
                return 'function: '+(o.name ? o.name+'()' : '(anonymous)');
            case 'object':
                return (_.isArray(o) ? 'array' : (_.isArguments(o) ? 'arguments' : ( _.isNull(o) ? 'null' : 'object')));
            default:
                return typeof o;
        }
    },

	dataLogger = function(primaryLogger,secondaryLogger,data){
        _.each(data,function(m){
            var type = complexType(m);
            switch(type){
                case 'string':
                    primaryLogger(m);
                    break;
                case 'undefined':
                case 'null':
                case 'NaN':
                    primaryLogger('['+type+']');
                    break;
                case 'number':
                case 'not a number':
                case 'integer':
                case 'decimal':
                case 'boolean':
                    primaryLogger('['+type+']: '+m);
                    break;
                default:
                    primaryLogger('['+type+']:=========================================');
                    secondaryLogger(m);
                    primaryLogger('=========================================================');
                    break;
            }
        });
	},


    colorLog = function(options){
        var coloredLoggerFunction,
            key = options.key,
            label = options.title || 'TAS',
            lBGColor = (options.color && options.color.bgLabel) || 'blue',
            lTxtColor = (options.color && options.color.label) || 'white',
            mBGColor = (options.color && options.color.bgText) || 'blue',
            mTxtColor = (options.color && options.color.text) || 'white';

        coloredLoggerFunction = function(message){
            console.log(
                '%c '+label+': %c '+message + ' ',
                'background-color: '+lBGColor+';color: '+lTxtColor+'; font-weight:bold;',
                'background-color: '+mBGColor+';color: '+mTxtColor+';'
            ); 
        };
        return function(){
            if('TAS'===key || config.logging[key]){
               dataLogger(coloredLoggerFunction,function(m){console.log(m);},_.toArray(arguments)); 
            }
        };
    },

    logDebug  = colorLog(loggingSettings.debug),
    logError  = colorLog(loggingSettings.error),
    logWarn   = colorLog(loggingSettings.warn),
    logInfo   = colorLog(loggingSettings.info),
    logNotice = colorLog(loggingSettings.notice),
    logLog    = colorLog(loggingSettings.log),
    log       = colorLog(loggingSettings.TAS),
    logCS     = colorLog(loggingSettings.callstack),
    logCSA    = colorLog(loggingSettings.callstack_async),

    registerCallstack = function(callstack,label){
        var idx=_.findIndex(callstackRegistry,function(o){
            return (_.difference(o.stack,callstack).length === _.difference(callstack,o.stack).length) &&
                _.difference(o.stack,callstack).length === 0 &&
                o.label === label;
        });
        if(-1 === idx){
            idx=callstackRegistry.length;
            callstackRegistry.push({
                stack: callstack,
                label: label
            });
        }
        return idx;
    },

    setConfigOption = function(options){
        var newconf =_.defaults(options,config);
        newconf.logging=_.defaults(
            (options && options.logging)||{},
            config.logging
        );
        config=newconf;
    },
    
    debugMode = function(){
        config.logging.debug=true;
        config.debugMode = true;
    },

    getCallstack = function(){
        var e = new Error('dummy'),
            stack = _.map(_.rest(e.stack.replace(/^[^\(]+?[\n$]/gm, '')
            .replace(/^\s+at\s+/gm, '')
            .replace(/^Object.<anonymous>\s*\(/gm, '{anonymous}()@')
            .split('\n')),function(l){
                return l.replace(/\s+.*$/,'');
            });
        return stack;
    },
    logCallstackSub = function(cs){
        var matches, csa;
        _.find(cs,function(line){
            matches = line.match(/TAS_CALLSTACK_(\d+)/);
            if(matches){
               csa=callstackRegistry[matches[1]];
               logCSA( '===================='+(csa.label ? '> '+csa.label+' <' : '')+'====================');
               logCallstackSub(csa.stack);
               return true;
            } 
            logCS(line);
            return false;
        });
    },
    logCallstack = function(){
        var cs;
        if(config.debugMode){
            cs = getCallstack();
            cs.shift();
            log('==============================> CALLSTACK <==============================');
            logCallstackSub(cs);
            log('=========================================================================');
        }
    },


    wrapCallback = function (label, callback, context){
        var callstack;
        if('function' === typeof label){
            context=callback;
            callback=label;
            label=undefined;
        }
        if(!config.debugMode){
            return (function(cb,ctx){
                return function(){
                    cb.apply(ctx||{},arguments);
                };
            }(callback,context));
        }
        
        callstack = getCallstack();
        callstack.shift();
        
        return (function(cb,ctx,cs,lbl){
            var ctxref=registerCallstack(cs,lbl);

            /*jshint -W054 */
            return new Function('cb','ctx','TASlog',
                "return function TAS_CALLSTACK_"+ctxref+"(){"+
                    "TASlog('Entering: '+(cb.name||'(anonymous function)'));"+
                    "cb.apply(ctx||{},arguments);"+
                    "TASlog('Exiting: '+(cb.name||'(anonymous function)'));"+
                "};")(cb,ctx,log);
            /*jshint +W054 */
        }(callback,context,callstack,label));
    },


    prepareUpdate = function( attribute, value ){
        queuedUpdates[attribute]=value;
    },

    applyQueuedUpdates = function() {
      setAttrs(queuedUpdates);
      queuedUpdates = {};
    },

	namesFromArgs = function(args,base){
        return _.chain(args)
            .reduce(function(memo,attr){
                if('string' === typeof attr) {
                    memo.push(attr);
                } else if(_.isArray(args) || _.isArguments(args)){
                    memo = namesFromArgs(attr,memo);
                }
                return memo;
            },(_.isArray(base) && base) || [])
            .uniq()
            .value();
	},

	addId = function(obj,value){
		Object.defineProperty(obj,'id',{
			value: value,
			writeable: false,
			enumerable: false
		});
	},

	addProp = function(obj,prop,value,fullname){
		(function(){
            var pname=(_.contains(['S','F','I','D'],prop) ? '_'+prop : prop),
			    full_pname = fullname || prop,
                pvalue=value;

            _.each(['S','I','F'],function(p){
                if( !_.has(obj,p)){
                    Object.defineProperty(obj, p, {
                        value: {},
                        enumerable: false,
                        readonly: true
                    });
                }
            });
            if( !_.has(obj,'D')){
                Object.defineProperty(obj, 'D', {
                    value: _.reduce(_.range(10),function(m,d){
                            Object.defineProperty(m, d, {
                                value: {},
                                enumerable: true,
                                readonly: true
                            });
                            return m;
                        },{}),
                    enumerable: false,
                    readonly: true
                });
            }


            // Raw value
			Object.defineProperty(obj, pname, {
                enumerable: true,
				set: function(v){
                    if(v!==pvalue) {
                        pvalue=v;
                        prepareUpdate(full_pname,v);
                    }
				},
				get: function(){
					return pvalue;
				}
			});
            
            // string value
			Object.defineProperty(obj.S, pname, {
                enumerable: true,
				set: function(v){
                    var val=v.toString();
                    if(val !== pvalue) {
                        pvalue=val;
                        prepareUpdate(full_pname,val);
                    }
				},
				get: function(){
					return pvalue.toString();
				}
			});

            // int value
			Object.defineProperty(obj.I, pname, {
                enumerable: true,
				set: function(v){
                    var val=parseInt(v,10) || 0;
                    if(val !== pvalue){
                        pvalue=val;
                        prepareUpdate(full_pname,val);
                    }
				},
				get: function(){
					return parseInt(pvalue,10) || 0;
				}
			});

            // float value
			Object.defineProperty(obj.F, pname, {
                enumerable: true,
				set: function(v){
                    var val=parseFloat(v) || 0;
                    if(val !== pvalue) {
                        pvalue=val;
                        prepareUpdate(full_pname,val);
                    }
				},
				get: function(){
					return parseFloat(pvalue) || 0;
				}
			});
            _.each(_.range(10),function(d){
                Object.defineProperty(obj.D[d], pname, {
                    enumerable: true,
                    set: function(v){
                        var val=(parseFloat(v) || 0).toFixed(d);
                        if(val !== pvalue){
                            pvalue=val;
                            prepareUpdate(full_pname,val);
                        }
                    },
                    get: function(){
                        return (parseFloat(pvalue) || 0).toFixed(d);
                    }
                });
            });

		}());
	},
	
	repeating = function( section ) {
		return (function(s){
			var sectionName = s,
				attrNames = [],
				fieldNames = [],
				operations = [],
                after = [],
			
			repAttrs = function TAS_Repeating_Attrs(){
				attrNames = namesFromArgs(arguments,attrNames);
				return this;
			},
			repFields = function TAS_Repeating_Fields(){
				fieldNames = namesFromArgs(arguments,fieldNames);
				return this;
			},
			repReduce = function TAS_Repeating_Reduce(func, initial, final, context) { 
				operations.push({
                    type: 'reduce',
                    func: (func && _.isFunction(func) && func) || _.noop,
                    memo: (_.isUndefined(initial) && 0) || initial,
                    final: (final && _.isFunction(final) && final) || _.noop,
                    context: context || {}
                });
				return this;
			},
			repMap = function TAS_Repeating_Map(func, final, context) {
				operations.push({
                    type: 'map',
                    func: (func && _.isFunction(func) && func) || _.noop,
                    final: (final && _.isFunction(final) && final) || _.noop,
                    context: context || {}
                });
				return this;
			},
            repEach = function TAS_Repeating_Each(func, final, context) {
				operations.push({
                    type: 'each',
                    func: (func && _.isFunction(func) && func) || _.noop,
                    final: (final && _.isFunction(final) && final) || _.noop,
                    context: context || {}
                });
				return this;
            },
            repTap = function TAS_Repeating_Tap(final, context) {
				operations.push({
                    type: 'tap',
                    final: (final && _.isFunction(final) && final) || _.noop,
                    context: context || {}
                });
				return this;
            },
            repAfter = function TAS_Repeating_After(callback,context) {
				after.push({
                    callback: (callback && _.isFunction(callback) && callback) || _.noop,
                    context: context || {}
                });
				return this;
            },
			repExecute = function TAS_Repeating_Execute(callback,context){
				var rowSet = {},
					attrSet = {},
					fieldIds = [],
					fullFieldNames = [];

                repAfter(callback,context);

				// call each operation per row.
				// call each operation's final
				getSectionIDs("repeating_"+sectionName,function(ids){
					fieldIds = ids;
					fullFieldNames = _.reduce(fieldIds,function(memo,id){
						return memo.concat(_.map(fieldNames,function(name){
							return 'repeating_'+sectionName+'_'+id+'_'+name;  
						}));
					},[]);
					getAttrs( _.uniq(attrNames.concat(fullFieldNames)), function(values){
						_.each(attrNames,function(aname){
							if(values.hasOwnProperty(aname)){
								addProp(attrSet,aname,values[aname]);
							}
						});

						rowSet = _.reduce(fieldIds,function(memo,id){
							var r={};
							addId(r,id);
							_.each(fieldNames,function(name){
								var fn = 'repeating_'+sectionName+'_'+id+'_'+name;  
								addProp(r,name,values[fn],fn);
							});

							memo[id]=r;

							return memo;
						},{});

                        _.each(operations,function(op){
                            var res;
                            switch(op.type){
                                case 'tap':
                                    _.bind(op.final,op.context,rowSet,attrSet)();
                                    break;

                                case 'each':
                                    _.each(rowSet,function(r){
                                        _.bind(op.func,op.context,r,attrSet,r.id,rowSet)();
                                    });
                                    _.bind(op.final,op.context,rowSet,attrSet)();
                                    break;

                                case 'map':
                                    res = _.map(rowSet,function(r){
                                        return _.bind(op.func,op.context,r,attrSet,r.id,rowSet)();
                                    });
                                    _.bind(op.final,op.context,res,rowSet,attrSet)();
                                    break;

                                case 'reduce':
                                    res = op.memo;
                                    _.each(rowSet,function(r){
                                        res = _.bind(op.func,op.context,res,r,attrSet,r.id,rowSet)();
                                    });
                                    _.bind(op.final,op.context,res,rowSet,attrSet)();
                                    break;
                            }
                        });

                        // finalize attrs
                        applyQueuedUpdates();
                        _.each(after,function(op){
                            _.bind(op.callback,op.context)();
                        });
					});
				});
			};
				
			return {
				attrs: repAttrs,
				attr: repAttrs,

				column: repFields,
				columns: repFields,
				field: repFields,
				fields: repFields,

				reduce: repReduce,
				inject: repReduce,
				foldl: repReduce,

				map: repMap,
				collect: repMap,

				each: repEach,
                forEach: repEach,

                tap: repTap,
                'do': repTap,

				after: repAfter,
				last: repAfter,
				done: repAfter,

				execute: repExecute,
				go: repExecute,
				run: repExecute
			};
		}(section));
	},


    repeatingSimpleSum = function(section, field, destination){
        repeating(section)
            .attr(destination)
            .field(field)
            .reduce(function(m,r){
                return m + (r.F[field]);
            },0,function(t,r,a){
                a.S[destination]=t;
            })
            .execute();
    };

	console.log('%c•.¸¸.•*´¨`*•.¸¸.•*´¨`*•.¸  The Aaron Sheet  v'+version+'  ¸.•*´¨`*•.¸¸.•*´¨`*•.¸¸.•','background: linear-gradient(to right,green,white,white,green); color:black;text-shadow: 0 0 8px white;');
	console.log('%c•.¸¸.•*´¨`*•.¸¸.•*´¨`*•.¸  Last update: '+(new Date(lastUpdate*1000))+'  ¸.•*´¨`*•.¸¸.•*´¨`*•.¸¸.•','background: linear-gradient(to right,green,white,white,green); color:black;text-shadow: 0 0 8px white;');


    return {
        /* Repeating Sections */
        repeatingSimpleSum: repeatingSimpleSum,
		repeating: repeating,

        /* Configuration */
        config: setConfigOption,

        /* Debugging */
        callback: wrapCallback,
        callstack: logCallstack,
        debugMode: debugMode,
        _fn: wrapCallback,

        /* Logging */
        debug: logDebug,
        error: logError,
        warn: logWarn,
        info: logInfo,
        notice: logNotice,
        log: logLog
    };
}());

/* ---- END: TheAaronSheet.js ---- */



/*** EXPORTS FROM exports-loader ***/
module.exports = TAS;

/***/ }),
/* 2 */
/***/ (function(module, exports, __webpack_require__) {

module.exports = window._

/***/ }),
/* 3 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
	value: true
});
exports.default = {
	/* Pathfinder SHEET constants */
	version: 1.42,
	/***************************************Lists of Fields ************************************************************/
	//add any new repeating sections here. This is the word after "repeating_"
	repeatingSections: ["weapon", "ability", "class-ability", "feat", "racial-trait", "trait", "item", "npc-spell-like-abilities", "mythic-ability", "mythic-feat", "buff", "spells"],
	//repeating sections that have used and used|max and max-calculation fields
	repeatingMaxUseSections: ["class-ability", "feat", "racial-trait", "trait", "mythic-ability", "mythic-feat", "ability"],

	//attribute of a dropdown mapped to attribute to write evaluated number to.
	//all simple dropdowns that do not need to call any other function when evaluating besides setDropdownValue and findAbilityInString
	dropdowns: {
		"HP-ability": "HP-ability-mod",
		"init-ability": "init-ability-mod",
		"Fort-ability": "Fort-ability-mod",
		"Ref-ability": "Ref-ability-mod",
		"Will-ability": "Will-ability-mod",
		"melee-ability": "melee-ability-mod",
		"melee2-ability": "melee2-ability-mod",
		"ranged-ability": "ranged-ability-mod",
		"ranged2-ability": "ranged2-ability-mod",
		"CMB-ability": "CMB-ability-mod",
		"CMB2-ability": "CMB2-ability-mod"
	},
	//attribute of a macro, mapped to attribute to write evaluation to
	//all simple macros that do not need to call other functions besides evaluateAndSetNumber
	equationMacros: {
		"init-misc": "init-misc-mod",
		"HP-formula-macro-text": "HP-formula-mod",
		"Max-Skill-Ranks-Misc": "Max-Skill-Ranks-mod",
		"SR-macro-text": "SR",
		"spellclass-0-SP_misc": "spellclass-0-SP-mod",
		"spellclass-1-SP_misc": "spellclass-1-SP-mod",
		"spellclass-2-SP_misc": "spellclass-2-SP-mod",
		"customa1": "customa1-mod",
		"customa2": "customa2-mod",
		"customa3": "customa3-mod",
		"customa4": "customa4-mod_max",
		"customa5": "customa5-mod_max",
		"customa6": "customa6-mod_max",
		"customa7": "customa7-mod_max",
		"customa8": "customa8-mod_max",
		"customa9": "customa9-mod_max",
		"customa10": "customa10-mod",
		"customa11": "customa11-mod",
		"customa12": "customa12-mod"
	},
	//the 3 spell classes at top of spells page
	spellClassIndexes: ["0", "1", "2"],
	silentParams: { silent: true },
	minusreg: /\-|\u2013|\u2014|\u2212|\u02d7/,
	critreg: /(\d+)[\-|\u2013|\u2014|\u2212|\u02d7]20\/[x\u00d7](\d+)/,
	diceDiereg: /(\d+)d(\d+)\s*([\+|\-|\u2013|\u2014|\u2212|\u02d7]{0,1})\s*(\d*)/
};

/***/ }),
/* 4 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
	value: true
});
exports.findAndReplaceFields = findAndReplaceFields;
exports.evaluateExpression = evaluateExpression;
exports.evaluateAndSetNumber = evaluateAndSetNumber;
exports.getDropdownValue = getDropdownValue;
exports.setDropdownValue = setDropdownValue;
exports.getRowTotal = getRowTotal;
exports.updateRowTotal = updateRowTotal;
exports.escapeForRegExp = escapeForRegExp;
exports.escapeForMacroCall = escapeForMacroCall;
exports.escapeForRollTemplate = escapeForRollTemplate;
exports.escapeForChatLinkButton = escapeForChatLinkButton;
exports.getRowId = getRowId;
exports.getAttributeName = getAttributeName;
exports.getRepeatingIDStr = getRepeatingIDStr;
exports.cartesianAppend = cartesianAppend;
exports.cartesianProduct = cartesianProduct;
exports.trimBoth = trimBoth;
exports.splitByCommaIgnoreParens = splitByCommaIgnoreParens;
exports.deleteRepeating = deleteRepeating;

var _underscore = __webpack_require__(2);

var _underscore2 = _interopRequireDefault(_underscore);

var _PFLog = __webpack_require__(0);

var _exportsLoaderTASTheAaronSheet = __webpack_require__(1);

var _exportsLoaderTASTheAaronSheet2 = _interopRequireDefault(_exportsLoaderTASTheAaronSheet);

var _ExExp = __webpack_require__(32);

var ExExp = _interopRequireWildcard(_ExExp);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

/* for interaction with ExExp, and some basic utils that have nothing to do with Pathfinder rules. */
/** Determines if string can be evaluated to a number
 * ensures:  no macro calls, dropdowns, or keep highest/lowest more than 1
 * allows: floor, abs, kh1, kl1,  ceil, round, max, min
 *@param {string} preeval string to examine
 *@returns {boolean} true if string will evaluate to a number.
 */
function validNumericStr(preeval) {
	var anyIllegal = preeval.match(/\||\?|&|\{|\}|k[h,l][^1]/);
	if (anyIllegal) {
		return false;
	}
	anyIllegal = preeval.replace(/floor|ceil|round|abs|max|min|kh1|kl1/g, '');
	anyIllegal = anyIllegal.match(/[a-zA-Z]/);
	if (anyIllegal) {
		return false;
	}
	return true;
}
/** searches a string for @{attribute} and replaces those with their values, passes result to the callback
 * if error then passes null
 * @param {string} stringToSearch = string containing one or more @{fieldname}
 * @param {function(string)} callback when done passes resultant string to callback
 */
function findAndReplaceFields(stringToSearch, callback) {
	var fieldnames;
	if (typeof callback !== "function") {
		return;
	}
	if (!stringToSearch) {
		callback(null);
		return;
	}
	try {
		stringToSearch = stringToSearch.split("selected|").join("");
		stringToSearch = stringToSearch.split("target|").join("");
		stringToSearch = stringToSearch.replace(/\|max\}/g, '_max}');
		fieldnames = stringToSearch.match(/\@\{[^}]+\}/g);
		if (!fieldnames) {
			callback(stringToSearch);
			return;
		}
		fieldnames = fieldnames.sort();
		fieldnames = _underscore2.default.uniq(fieldnames, true);
		fieldnames = _underscore2.default.map(fieldnames, function (field) {
			return field.slice(2, -1);
		});
		getAttrs(fieldnames, function (values) {
			var evalstr = stringToSearch,
			    innermatches = null,
			    initialsplit;
			try {
				_underscore2.default.each(fieldnames, function (field) {
					//evalstr = evalstr.replace(  new RegExp(escapeForRegExp('@{'+field+'}'),'g'), values[field]);
					initialsplit = evalstr.split('@{' + field + '}');
					evalstr = initialsplit.join(values[field]);
				});
				innermatches = evalstr.match(/\@\{[^}]+\}/g);
			} catch (err2) {
				_exportsLoaderTASTheAaronSheet2.default.error("SWUtils.findAndReplaceFields err2", err2);
				evalstr = null;
			} finally {
				if (innermatches) {
					findAndReplaceFields(evalstr, callback);
				} else {
					callback(evalstr);
				}
			}
		});
	} catch (err) {
		_exportsLoaderTASTheAaronSheet2.default.error("SWUtils.findAndReplaceFields", err);
		callback(null);
	}
}
/** Replaces kl1 and kh1 with min and max
 * example: replaces {x,y}kh1 with min(x,y)
 * @param {string} str the string to search
 * @returns {string} the resultant string after performing the replace
 */
function convertKL1KH1toMinMax(str) {
	var matches;
	//TAS.debug("at convertKL1KH1toMinMax for "+str) ;
	if (str) {
		matches = str.match(/(\{[^}]+\})(kh1|kl1)(?!.*\1)/g);
		//TAS.debug("matches are:",matches);
		if (matches && matches.length > 0) {
			str = _underscore2.default.reduce(matches, function (memo, match) {
				var isMin = /kl1$/.test(match),
				    isMax = /kh1$/.test(match),
				    newFunc = isMin ? "min" : isMax ? "max" : "",
				    newMatch = match.slice(1, match.length - 4),
				    replaceStr = newFunc + "(" + newMatch + ")";
				return memo.replace(match, replaceStr);
			}, str);
		}
	}
	return str;
}
/** Reads in the string, evaluates it to a single number, passes that number to a callback
 * calls callback with: the number, 0 (if exprStr empty), or null if an error is encountered
 *@param {string} exprStr A string containing a mathematical expression, possibly containing references to fields such as @{myfield}
 *@param {function(Number)} callback a function taking one parameter - could be int or float
 */
function evaluateExpression(exprStr, callback) {
	var bmatches1 = 0,
	    bmatches2 = 0,
	    pmatches1 = 0,
	    pmatches2 = 0,
	    smatches1 = 0,
	    smatches2 = 0;
	if (typeof callback !== "function") {
		return;
	}
	if (exprStr === "" || exprStr === null || exprStr === undefined) {
		callback(0);
		return;
	}
	//verify that same number of parenthesis exists
	bmatches1 = (exprStr.match(/\(/g) || []).length;
	bmatches2 = (exprStr.match(/\)/g) || []).length;
	pmatches1 = (exprStr.match(/\{/g) || []).length;
	pmatches2 = (exprStr.match(/\}/g) || []).length;
	smatches1 = (exprStr.match(/\[/g) || []).length;
	smatches2 = (exprStr.match(/\]/g) || []).length;
	if (bmatches1 !== bmatches2 || pmatches1 !== pmatches2 || smatches1 !== smatches2) {
		_exportsLoaderTASTheAaronSheet2.default.warn("evaluateExpression: Mismatched brackets, cannot evaluate:" + exprStr);
		callback(null);
		return;
	}

	findAndReplaceFields(exprStr, function (replacedStr) {
		var evaluated, newexprStr;
		//TAS.debug("search and replace of " + exprStr + " resulted in " + replacedStr);
		if (replacedStr === null || replacedStr === undefined) {
			callback(null);
			return;
		}
		try {
			replacedStr = replacedStr.replace(/\s+/g, '').replace(/\[\[/g, "(").replace(/\]\]/g, ")").replace(/\[/g, "(").replace(/\]/g, ")");
			newexprStr = convertKL1KH1toMinMax(replacedStr);
			//TAS.debug("replacedStr is now "+newexprStr);
			if (newexprStr !== replacedStr) {
				replacedStr = newexprStr;
			}
			if (!isNaN(Number(replacedStr)) && isFinite(replacedStr)) {
				evaluated = parseFloat(replacedStr);
				if (!isNaN(evaluated)) {
					callback(evaluated);
					return;
				}
			}
			if (typeof replacedStr !== "undefined" && replacedStr !== null && validNumericStr(replacedStr)) {
				evaluated = ExExp.handleExpression(replacedStr);
				if (!isNaN(evaluated)) {
					callback(evaluated);
				} else {
					_exportsLoaderTASTheAaronSheet2.default.warn("cannot evaluate this to number: " + exprStr + " came back with " + replacedStr);
					callback(null);
				}
			} else {
				_exportsLoaderTASTheAaronSheet2.default.warn("cannot evaluate this to number: " + exprStr + " came back with " + replacedStr);
				callback(null);
			}
		} catch (err3) {
			_exportsLoaderTASTheAaronSheet2.default.error("error trying to convert to number:" + err3);
			callback(null);
		}
	});
}
/** evaluateAndSetNumber
 * Examines the string in readField, and tests to see if it is a number
 * if it's a number immediately write it to writeField.
 * if not, then replace any @{field} references with numbers, and then evaluate it
 * as a mathematical expression till we find a number.
 *
 * note this is NOT recursive, you can't point one field of
 *
 * @param {string} readField= field to read containing string to parse
 * @param {string} writeField= field to write to
 * @param {number} defaultVal= optional, default to set if we cannot evaluate the field. If not supplied assume 0
 * @param {function} callback - function(newval, oldval, ischanged)
 * @param {boolean} silently if true set new val with {silent:true}
 * @param {boolean} dontSetErrorFlag if true and we could not evaluate, then set attribute named writeField+"_error" to 1
 * @param {function} errcallback  call if there was an error parsing string function(newval, oldval, ischanged)
 */
function evaluateAndSetNumber(readField, writeField, defaultVal, callback, silently, errcallback) {
	var done = function done(a, b, c, currError) {
		var donesetter = {};
		if (currError) {
			donesetter[writeField + '_error'] = 0;
			setAttrs(donesetter, { silent: true });
		}
		if (typeof callback === "function") {
			callback(a, b, c);
		}
	},
	    errordone = function errordone(a, b, c, currError) {
		var donesetter = {};
		//TAS.debug("leaving set of "+ writeField+" with old:"+b+", new:"+c+" is changed:"+ c+" and curreerror:"+currError);
		if (!currError) {
			donesetter[writeField + '_error'] = 1;
			setAttrs(donesetter, { silent: true });
		}
		if (typeof errcallback === "function") {
			errcallback(a, b, c);
		} else if (typeof callback === "function") {
			callback(a, b, c);
		}
	};
	getAttrs([readField, writeField, writeField + "_error"], function (values) {
		var setter = {},
		    params = {},
		    trueDefault = 0,
		    currVal = 0,
		    isError = 0,
		    currError = 0,
		    isChanged = false,
		    value = 0;
		try {
			if (silently) {
				params.silent = true;
			}
			currError = parseInt(values[writeField + "_error"], 10) || 0;
			trueDefault = defaultVal || 0;
			currVal = parseInt(values[writeField], 10);
			value = Number(values[readField]);
			//check for blank
			if (typeof values[readField] === "undefined" || !values[readField] || values[readField] === null || values[readField] === "") {
				//if value of readField is blank then set to defaultval.
				value = trueDefault;
				if (currVal !== value || isNaN(currVal)) {
					setter[writeField] = value;
					setAttrs(setter, params, function () {
						done(value, currVal, true, currError);
					});
				} else {
					done(value, currVal, false, currError);
				}
			} else if (!isNaN(value)) {
				//check for number
				if (currVal !== value) {
					setter[writeField] = value;
					setAttrs(setter, params, function () {
						done(value, currVal, true);
					});
				} else {
					done(value, currVal, false, currError);
				}
			} else {
				//pass to evaluateExpression 
				evaluateExpression(values[readField], function (value2) {
					try {
						if (value2 === null || value2 === undefined || isNaN(value2)) {
							isError = 1;
							value2 = trueDefault;
							//TAS.debug("setting "+ writeField+" to " +value2);
						}
						if (isNaN(currVal) || currVal !== value2) {
							setter[writeField] = value2;
						}
						if (_underscore2.default.size(setter) > 0) {
							isChanged = true;
						}
					} catch (err2) {
						_exportsLoaderTASTheAaronSheet2.default.error("SWUtils.evaluateAndSetNumber error after call to evaluateExpression ", err2);
						isError = 1;
					} finally {
						setAttrs(setter, params, function () {
							if (!isError) {
								done(value2, currVal, isChanged, currError);
							} else {
								errordone(value2, currVal, isChanged, currError);
							}
						});
					}
				});
			}
		} catch (err) {
			_exportsLoaderTASTheAaronSheet2.default.error("SWUtils.evaluateAndSetNumber", err);
			setter[writeField + '_error'] = 1;
			setAttrs(setter, { silent: true }, function () {
				errordone(value, currVal, false, currError);
			});
		}
	});
}
/** Reads dropdown value
 * determines attribute referenced, gets that attribute value, passes it to callback.
 * similar to evaluateAndSetNumber but uses a synchronus function to perform search and replace, and assumes the string is only one value not an expression.
 * necessary because some dropdowns have other text in the dropdowns, so we can't use the dropdown value exactly as is.
 * called by setDropdownValue
 * @param {string} readField the attribute name of dropdown we are looking at
 * @param {function} synchrousFindAttributeFunc reads in the value of the dropdown field, and returns the exact name of the attribute to look up (since some dropdowns have other text in value)
 * @param {function(int)} callback pass the value the dropdown selection represents
 *   exceptions: if readField is not found pass in "", if readField is 0 or starts with 0 pass in 0.
 */
function getDropdownValue(readField, synchrousFindAttributeFunc, callback) {
	if (!readField || callback && typeof callback !== "function" || typeof synchrousFindAttributeFunc !== "function") {
		return;
	}
	getAttrs([readField], function (values) {
		var fieldToFind = values[readField],
		    foundField = "";
		if (typeof fieldToFind === "undefined" || fieldToFind === null) {
			callback("");
		} else if (fieldToFind === "0" || fieldToFind === 0 || fieldToFind.indexOf("0") === 0) {
			//select = none
			callback(0);
		} else {
			foundField = synchrousFindAttributeFunc(fieldToFind);
			getAttrs([foundField], function (v) {
				var valueOf = parseInt(v[foundField], 10) || 0;
				callback(valueOf, foundField);
			});
		}
	});
}
/** Looks at a dropdown value, and sets writeField(s) with the number to which selected option refers.
 * calls getDropdownValue
 * @param {string} readField the dropdown field
 * @param {string_or_Array} writeFields Field(s) to write the value to
 * @param {function} synchrousFindAttributeFunc takes value of @readField and says what the lookup field is.
 * @param {function(int)} callback (optional) if we need to update the field, call this function
 *         with the value we set as the only parameter.
 * @param {boolean} silently if true call setAttrs with {silent:true}
 */
function setDropdownValue(readField, writeFields, synchrousFindAttributeFunc, callback, silently) {
	var done = function done(newval, currval, changed) {
		if (typeof callback === "function") {
			callback(newval, currval, changed);
		}
	};
	getDropdownValue(readField, synchrousFindAttributeFunc, function (valueOf) {
		var params = {};
		if (silently) {
			params.silent = true;
		}
		if (Array.isArray(writeFields) && writeFields.length === 1) {
			writeFields = writeFields[0];
		}
		if (typeof writeFields === "string") {
			getAttrs([writeFields], function (v) {
				var currValue = parseInt(v[writeFields], 10),
				    setter = {};
				//TAS.debug("setDropdownValue, readField:" + readField + ", currValue:" + currValue + ", newValue:" + valueOf);
				if (currValue !== valueOf || isNaN(currValue)) {
					setter[writeFields] = valueOf;
					setAttrs(setter, params, function () {
						done(valueOf, currValue, true);
					});
				} else {
					done(valueOf, currValue, false);
				}
			});
		} else if (Array.isArray(writeFields)) {
			getAttrs(writeFields, function (v) {
				var i = 0,
				    setter = {};
				for (i = 0; i < writeFields.length; i++) {
					if (parseInt(v[writeFields[i]], 10) !== valueOf) {
						setter[writeFields[i]] = valueOf;
					}
				}
				if (_underscore2.default.size(setter) > 0) {
					setAttrs(setter, params, function () {
						done(valueOf, 0, true);
					});
				} else {
					done(valueOf, 0, false);
				}
			});
		}
	});
}
/** getRowTotal return newvalue, currentvalue, allvalues in callback. Summed up floats and round total to int. 
 * THIS IS PROBABLY SLOWER THAN DOING IT YOURSELF, just wrote to make things simpler.
 * @param {Array} fields array of field names to be added up, EXCEPT the first field which is ignored (at index 0) which is the total current value
 * @param {number} bonus a number that is added to the other fields.
 * @param {Array} penalties array of fieldnames whose values are to be subtracted from the total
 * @param {boolean} totalIsFloat true if we should not round the total to int.
 * @param {function(number,number)} callback call this with: new total, current total
 * @param {function} errorCallback call if error attempting to add.
 */
function getRowTotal(fields, bonus, penalties, totalIsFloat, callback, errorCallback) {
	var readFields;
	if (typeof callback !== "function" || typeof errorCallback !== "function") {
		return;
	}
	try {
		if (!fields || !Array.isArray(fields) || fields.length === 0) {
			return;
		}
		if (penalties && Array.isArray(penalties) && penalties.length > 0) {
			readFields = fields.concat(penalties);
		} else {
			readFields = fields;
		}
	} catch (err2) {
		_exportsLoaderTASTheAaronSheet2.default.error("SWUtils.getRowTotal catastrophic error: ", err2);
		errorCallback();
		return;
	}
	getAttrs(readFields, function (v) {
		var currValue = totalIsFloat ? parseFloat(v[fields[0]]) : parseInt(v[fields[0]], 10),
		    newValue = 0,
		    penalty = 0,
		    i; //, setter = {}
		try {
			//remember start at 1
			for (i = 1; i < fields.length; i++) {
				newValue += parseFloat(v[fields[i]]) || 0;
			}
			if (bonus && !isNaN(parseInt(bonus, 10))) {
				newValue += parseFloat(bonus);
			}
			if (penalties) {
				for (i = 0; i < penalties.length; i++) {
					penalty += parseFloat(v[penalties[i]]) || 0;
				}
				newValue -= penalty;
			}
			if (!totalIsFloat) {
				newValue = Math.floor(newValue);
			}
			callback(newValue, currValue);
		} catch (err) {
			_exportsLoaderTASTheAaronSheet2.default.error("SWUtils.getRowTotal", err);
			errorCallback();
		}
	});
}
/** Adds up numbers and puts it in the first field of the fields array.
 * All numbers are added up as FLOATS, and then FLOOR is used to round the sum down
 * @param {Array} fields array of field names to be added up, EXCEPT the first field. fields[0] MUST be the total field
 * @param {number} bonus a number that is added to the other fields.
 * @param {Array} penalties array of fieldnames whose values are to be subtracted from the total
 * @param {boolean} totalIsFloat true if we should not round the total to int.
 * @param {function(number,number)} callback optional call this with two values: the new total, old total
 * @param {boolean} silently if true call setAttrs with {silent:true}
 */
function updateRowTotal(fields, bonus, penalties, totalIsFloat, callback, silently, force) {
	var done = function done() {
		if (typeof callback === "function") {
			callback();
		}
	};
	getRowTotal(fields, bonus, penalties, totalIsFloat, function (newValue, currValue) {
		var setter = {},
		    params = {};
		if (force || newValue !== currValue) {
			setter[fields[0]] = newValue;
		}
		if (_underscore2.default.size(setter) > 0) {
			if (silently) {
				params.silent = true;
			}
			setAttrs(setter, params, done);
		} else {
			done();
		}
	}, done);
}
/** Escapes special chars for regex
 *@param {string} str the string to examine
 *@param {boolean} escapeSpaces if we should replace any space with \s* (caller can use it for matching purposes)
 *@returns {string} resultant string after search and replace
 */
function escapeForRegExp(str, escapeSpaces) {
	var regexEscapes = /[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|\~\!\@\#]/g,
	    tempstr = '';
	if (str) {
		tempstr = str.replace(regexEscapes, "\\$&");
		if (escapeSpaces) {
			//replace space plus multiple spaces with non escaped 0 or * space.
			tempstr = tempstr.replace(/\t+|\s+/g, '\\s*');
		}
	}
	return tempstr;
}
/** Escapes special chars for macros - to create sub queries - this is not used currently
 *@param {string} str the string to examine
 *@returns {string} resultant string after search and replace
 */
function escapeForMacroCall(str) {
	var macroCallEscapes = [[/\{\{/g, '&#123;&#123;'], [/\}\}/g, '&#125;&#125;'], [/\(/g, '&#40;'], [/\)/g, '&#41;'], [/\,/g, '&#44;'], [/\?/g, '&#63;'], [/'/g, '&#39;'], [/"/g, '&#34;'], [/\=/g, '&#61;']];
	if (str) {
		return _underscore2.default.reduce(macroCallEscapes, function (currStr, pair) {
			return currStr.replace(pair[0], pair[1]);
		}, str);
	}
	return "";
}
/** Escapes '{{' for passing to a rolltemplate
 *@param {string} str the string to examine
 *@returns {string} resultant string after search and replace
 */
function escapeForRollTemplate(str) {
	if (!str) {
		return str;
	}
	return str.replace(/\{\{/g, '&#123;&#123;');
}
/** escapes string so it can be used in the name section of another link button
 *if it finds [name](link) in a string it will remove the [ and ] and the (link)
 * replaces [ and ] with escaped versions everywhere else.
 *@param {string] str the string we want to use inside a link button
 *@returns {string} safe to use new name for button
 */
function escapeForChatLinkButton(str) {
	var markdownLinkreg = /^([^\[]*?)\[([^\]]*?)\]\(([^\)]*?)\)(.*)$/,
	    retstr = "",
	    matches;
	if (!str) {
		return str;
	}
	matches = markdownLinkreg.exec(str);
	if (matches) {
		if (matches[1]) {
			retstr += matches[1];
		}
		if (matches[2]) {
			retstr += matches[2];
		}
		if (matches[4]) {
			retstr += matches[4];
		}
	} else {
		retstr = str;
	}
	retstr = retstr.replace(/\[/g, '&#91;').replace(/\]/g, '&#93;');
	return retstr;
}
/** returns id portion of a source Attribute or repeating row attribute name
 * @param {string} sourceAttribute from eventInfo object
 * @returns {string} the id portion of string, or blank.
 */
function getRowId(sourceAttribute) {
	if (!sourceAttribute) {
		return "";
	}
	var strs = sourceAttribute.split('_');
	if (strs && _underscore2.default.size(strs) >= 4) {
		return strs[2];
	}
	return "";
}
function getAttributeName(source) {
	if (!source) {
		return "";
	}
	var itemId = getRowId(source),
	    attrib = "";
	if (itemId) {
		attrib = source.substring(source.indexOf(itemId) + itemId.length + 1, source.length);
	}
	return attrib;
}
/** getRepeatingIDStr - if id is not empty, then returns the ID with an underscore on the right. else returns empty string
 * this is used so the same function can be written for loops from getIDs or direct from the event with no ID
 *@param {string} id the id of the row or blank
 *@returns {string} id_  or blank
 */
function getRepeatingIDStr(id) {
	var idStr = "";
	if (!(id === null || id === undefined)) {
		idStr = id + "_";
	}
	return idStr;
}
/** Append values of multiple arrays of strings together to return one NEW array of strings that is the cartesian product.
 * @example cartesianAppend(["a","b"],["c","d"], ["e","f"]);
 * // returns ["ace","acf","ade","adf","bce","bcf","bde","bdf"]
 * @example cartesianAppend(["pre_"] , ["a","b","c"], ["_post"] );
 * //returns ["pre_a_post","pre_b_post","pre_c_post"]
 * @param {Array} [...] Arrays of strings
 * @returns {Array} of all values in other arrays
 */
function cartesianAppend() {
	return _underscore2.default.reduce(arguments, function (a, b) {
		return _underscore2.default.flatten(_underscore2.default.map(a, function (x) {
			return _underscore2.default.map(b, function (y) {
				return String(x) + String(y);
			});
		}), true);
	}, [[]]);
}
/** Concatenates cartesian product of all arrays together returns one flattened NEW array.
 * @param {Array} [...] Arrays
 * @returns {Array} cartesian product of all arrays (concatenated nothing else)
 */
function cartesianProduct() {
	return _underscore2.default.reduce(arguments, function (a, b) {
		return _underscore2.default.flatten(_underscore2.default.map(a, function (x) {
			return _underscore2.default.map(b, function (y) {
				return x.concat([y]);
			});
		}), true);
	}, [[]]);
}
/** trimBoth removes spaces at beginning and end of string, or of each string in an array.
 * performs a deep match, so if array is of arrays, will call trim on every string. 
 * if object is not an array or string, just return object.
 * therefore, non immutable objects are not cloned and array will contain links to them.
 *@param {Array or string} val string or array of strings
 *@returns {Array or string} same object type as passed in 
 */
function trimBoth(val) {
	if (Array.isArray(val)) {
		return _underscore2.default.map(val, trimBoth);
	}
	if (typeof val === 'string') {
		return val.replace(/^\s*|\s*$/g, '');
	}
	return val;
}
/** Splits string into array, based on commas (ignoring commas between parenthesis) 
 * @param {string} str 
 * @returns {[string]} array of items
 */
function splitByCommaIgnoreParens(str) {
	var ret = [];
	if (!str) {
		return [];
	}
	ret = str.match(/((?:[^(),]|\([^()]*\))+)/g);
	ret = trimBoth(ret);
	return ret;
}
function deleteRepeating(callback, section) {
	var done = _underscore2.default.once(function () {
		if (typeof callback === "function") {
			callback();
		}
	});
	if (!section) {
		done();
		return;
	}
	_exportsLoaderTASTheAaronSheet2.default.debug("SWUtils.deleteFeatures", section);
	getSectionIDs(section, function (ids) {
		var prefix = "repeating_" + section + "_";
		if (ids && _underscore2.default.size(ids)) {
			ids.forEach(function (id) {
				_exportsLoaderTASTheAaronSheet2.default.debug("deleting " + prefix + id);
				removeRepeatingRow(prefix + id);
			});
			done();
		} else {
			done();
		}
	});
}

_PFLog.PFConsole.log('   SWUtils module loaded          ');
_PFLog.PFLog.modulecount++;

/***/ }),
/* 5 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.findAbilityInString = findAbilityInString;
exports.calculateSpellRanges = calculateSpellRanges;
exports.findSpellRange = findSpellRange;
exports.getWoundPenalty = getWoundPenalty;
exports.isOptionTemplateReversed = isOptionTemplateReversed;
exports.getOptionsCompiledRegexMap = getOptionsCompiledRegexMap;
exports.shouldNotDisplayOption = shouldNotDisplayOption;
exports.deleteOption = deleteOption;
exports.getAvgHP = getAvgHP;
exports.getAutoHPPercentMultiplier = getAutoHPPercentMultiplier;
exports.parseSpellRangeText = parseSpellRangeText;
exports.getCostInGP = getCostInGP;
exports.getIntFromString = getIntFromString;
exports.getCritFromString = getCritFromString;
exports.getDiceDieFromString = getDiceDieFromString;
exports.getSpecialAbilityTypeFromString = getSpecialAbilityTypeFromString;
exports.removeUptoFirstComma = removeUptoFirstComma;
exports.replaceDiceDieString = replaceDiceDieString;
exports.getDiceDieString = getDiceDieString;
exports.getDCString = getDCString;
exports.replaceDCString = replaceDCString;
exports.getNoteAfterNumber = getNoteAfterNumber;
exports.getCompendiumFunctionSet = getCompendiumFunctionSet;
exports.getCompendiumIntSet = getCompendiumIntSet;
exports.removeWhisperFromMacro = removeWhisperFromMacro;

var _underscore = __webpack_require__(2);

var _underscore2 = _interopRequireDefault(_underscore);

var _PFLog = __webpack_require__(0);

var _exportsLoaderTASTheAaronSheet = __webpack_require__(1);

var _exportsLoaderTASTheAaronSheet2 = _interopRequireDefault(_exportsLoaderTASTheAaronSheet);

var _SWUtils = __webpack_require__(4);

var _SWUtils2 = _interopRequireDefault(_SWUtils);

var _PFConst = __webpack_require__(3);

var PFConst = _interopRequireWildcard(_PFConst);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

/****************************SYNCHRONOUS UTILITIES ***********************************
NO asynchronous FUNCTIONS SHOULD GO HERE
************************************************************************************** */
/** findAbilityInString - returns the attribute referenced by a dropdown option value.
 * Looks at a string for instances of an ability modifier DEX-mod, STR-mod,  etc and returns the modifier it finds.
 * if none are found, or if the first character is "0", return ""
 * NOTE: YOU MUST PUT ANY NEW DROPDOWN VALUES HERE! 
 * (if they are references to other fields. obviously, dropdowns with 0, 1, 2 as values are not needed here)
 *@param {string} stringToSearch the value of the dropdown option selected
 *@returns {string} the attribute referenced by a dropdown option value.
 */
function findAbilityInString(stringToSearch) {
    if (!stringToSearch) {
        return "";
    }
    if (stringToSearch.slice(0, 1) === "0") {
        return "";
    }
    if (/str.mod/i.test(stringToSearch)) {
        return "STR-mod";
    }
    if (/dex.mod/i.test(stringToSearch)) {
        return "DEX-mod";
    }
    if (/con.mod/i.test(stringToSearch)) {
        return "CON-mod";
    }
    if (/int.mod/i.test(stringToSearch)) {
        return "INT-mod";
    }
    if (/wis.mod/i.test(stringToSearch)) {
        return "WIS-mod";
    }
    if (/cha.mod/i.test(stringToSearch)) {
        return "CHA-mod";
    }
    if (/melee2/i.test(stringToSearch)) {
        return "attk-melee2";
    }
    if (/melee/i.test(stringToSearch)) {
        return "attk-melee";
    }
    if (/ranged2/i.test(stringToSearch)) {
        return "attk-ranged2";
    }
    if (/ranged/i.test(stringToSearch)) {
        return "attk-ranged";
    }
    if (/cmb2/i.test(stringToSearch)) {
        return "CMB2";
    }
    if (/cmb/i.test(stringToSearch)) {
        return "CMB";
    }
    if (/str/i.test(stringToSearch)) {
        return "STR";
    }
    if (/dex/i.test(stringToSearch)) {
        return "DEX";
    }
    if (/con/i.test(stringToSearch)) {
        return "CON";
    }
    if (/int/i.test(stringToSearch)) {
        return "INT";
    }
    if (/wis/i.test(stringToSearch)) {
        return "WIS";
    }
    if (/cha/i.test(stringToSearch)) {
        return "CHA";
    }
    if (/npc.type/i.test(stringToSearch)) {
        return "npc-type";
    }
    if (/race/i.test(stringToSearch)) {
        return "race";
    }
    if (/class.0.level/i.test(stringToSearch)) {
        return "class-0-level";
    }
    if (/\{level\}/i.test(stringToSearch)) {
        return "level";
    }
    if (/npc.hd.num/i.test(stringToSearch)) {
        return "npc-hd-num";
    }
    if (/class.1.level/i.test(stringToSearch)) {
        return "class-1-level";
    }
    if (/class.2.level/i.test(stringToSearch)) {
        return "class-2-level";
    }
    if (/class.3.level/i.test(stringToSearch)) {
        return "class-3-level";
    }
    if (/class.4.level/i.test(stringToSearch)) {
        return "class-4-level";
    }
    if (/class.5.level/i.test(stringToSearch)) {
        return "class-5-level";
    }
}
/** calculateSpellRanges - returns {close:x, medium:y , long:z} for casterlevel 
 *@param {int} casterlevel level of caster
 *@returns {jsobject} mapping like this: {close:int,medium:int,long:int}
 */
function calculateSpellRanges(casterlevel) {
    casterlevel = casterlevel || 0;
    return {
        close: 25 + 5 * Math.floor(casterlevel / 2),
        medium: 100 + 10 * casterlevel,
        "long": 400 + 40 * casterlevel
    };
}
/**findSpellRange -  calculates range number based on spell settings
 * @param {int} customRangeVal value that is in the custom range field, for "per level" or "custom" choices
 * @param {string} rangeDropdown selected value from spell range dropdown
 * @param {int} casterlevel the level of caster
 * @returns {int_or_""} the spell range
 */
function findSpellRange(customRangeVal, rangeDropdown, casterlevel) {
    var newRange = 0,
        ranges = calculateSpellRanges(casterlevel);
    casterlevel = casterlevel || 0;
    rangeDropdown = rangeDropdown || 'blank';
    if (rangeDropdown[0] === "{") {
        rangeDropdown = rangeDropdown.slice(2, rangeDropdown.indexOf("="));
    }
    //TAS.debug("at find SpellRange. rangetext:"+customRangeVal +", rangeDropdown:"+rangeDropdown+", area:"+area+", casterlevel:"+casterlevel);
    switch (rangeDropdown) {
        case 'number':
        case 'custom':
            newRange = parseInt(customRangeVal, 10) || 0;
            break;
        case 'perlevel':
            newRange = (parseInt(customRangeVal, 10) || 0) * casterlevel;
            break;
        case 'close':
            newRange = ranges.close;
            break;
        case 'medium':
            newRange = ranges.medium;
            break;
        case 'long':
            newRange = ranges["long"];
            break;
        case 'see text':
        case 'touch':
        case 'personal':
        case 'blank':
        default:
            newRange = 0;
            break;
    }
    //TAS.debug("returning customRangeVal "+newRange+" for "+rangeDropdown);
    return newRange;
}
/** getWoundPenalty - applies Endurance feat or Gritty Mode to wound level.
 *@param {int} woundLevel value of wounds attribute
 *@param {boolean} hasEndurance if char has Endurance feat (lessens penalty by 1)
 *@param {boolean} grittyMode if using grittyMode (doubles penalty, applied before hasEndurance)
 *@returns {int} value to apply.
 */
function getWoundPenalty(woundLevel, hasEndurance, grittyMode) {
    return woundLevel !== 0 ? -1 * (woundLevel * (grittyMode + 1) - hasEndurance) : 0;
}

function isOptionTemplateReversed(spellOptionKey) {
    return spellOptionKey === "range_pick";
}
/** getOptionsCompiledRegexMap - finds {{key=*}} in a string to search rolltemplate macros
 * uses lookahead and lookbehind  to ensure must be preceeded by start or }} , followed by end or {{ 
 * @param {jsobj map} options map {} of key , only key looked at.
 * @returns {jsobj map} of key to "{{key=*}}" but as a compiled regex 
 */
function getOptionsCompiledRegexMap(options) {
    return _underscore2.default.mapObject(options, function (outputstr, key) {
        if (!isOptionTemplateReversed(key)) {
            return new RegExp("\\s*((?=\\{\\{)|(?=^))\\{\\{" + key + "\\=.*?\\}\\}\\s*((?=\\{\\{)|(?=$))");
        }
        return new RegExp("((?=\\{\\{)|(?=^))\\s*\\{\\{\\.*?\\=" + key + "\\}\\}\\s*((?=\\{\\{)|(?=$))");
    });
}
/** shouldNotDisplayOption- returns true if the value is the default so we know not to bother displaying in roll.
 * @param {string} attr: can pass either the attribute or the option name it will be sent to
 * @param {string} val : the value of the attribute
 * @returns {boolean}
 */
function shouldNotDisplayOption(attr, val) {
    if (!val) {
        return true;
    }
    switch (attr) {
        case 'sr':
            return !/^y/i.test(val);
        case 'save':
        case 'saving_throw':
            return (/^n/i.test(val) || /harmless/i.test(val)) && !/and|or/i.test(val);
        case 'spell_fail':
            return (parseInt(val, 10) || 0) !== 0;
        default:
            return false;
    }
}
/** deleteOption - removes option text from string and adds {{optionKey=}}
 * @param {string} optionText the string of a rolltemplate macro
 * @param {string} optionKey the key from rolltemplate setting, as in: {{optionKey=xxxx}}
 * @param {string} regexMap output of keys, what to search for from getOptionsCompiledRegexMap()
 * @returns {string} optionText with the optionKey portion of macro replaced with empty value
 */
function deleteOption(optionText, optionKey, regexMap) {
    var repStr = isOptionTemplateReversed(optionKey) ? "{{=" + optionKey + "}}" : "{{" + optionKey + "=}}";
    //TAS.debug("deleteOption optionKey"+optionKey+", regexMap[optionKey]:"+regexMap[optionKey]+", repStr:"+repStr);
    if (optionKey && optionText && regexMap[optionKey]) {
        optionText = optionText.replace(regexMap[optionKey], repStr);
    }
    return optionText;
}
/**getAvgHP returns average hp for given hit dice and die
 * also can return 75% or 100% of max hp
 * @param {int} hdice # of dice
 * @param {int} hdie # of sides (4,6,8,10,12,etc)
 * @param {float} mult optional percent of max to average, must be .5 (average), .75, or 1. If null then assume .5
 * @param {boolean} firstMax if true then 1st level gets 100% hp
 * @param {boolean} ispfs if true then round up EVERY level.
 * @returns {int} hit point average. 
 */
function getAvgHP(hdice, hdie, mult, firstMax, ispfs) {
    var hp = 0,
        bonus = 1;
    //TAS.debug("PFUtils.getAvgHP called with hdice:"+hdice+", hdie:"+hdie+", mult:"+mult+", firstMax:"+firstMax);
    if (hdie === 0) {
        return 0;
    }
    if (!(mult === 0.5 || mult === 0.75 || mult === 1)) {
        mult = 0.5;
    }
    if (ispfs) {
        bonus = 2;
        mult = 0.5;
    }
    if (mult === 1) {
        hp = hdie * hdice;
    } else {
        if (firstMax) {
            hdice--;
        }
        hp = Math.floor(100 * (hdie + bonus) * mult * hdice / 100);
        if (firstMax) {
            hp += hdie;
        }
    }
    return hp;
}
/** takes value of auto hit point radio and returns percent it represents 50,75,100.
 * @param {int} autohp_percent the value of attr_autohp_percent 
 * @returns {decimal} either 0.5, 0.75,  or 1.00
 */
function getAutoHPPercentMultiplier(autohp_percent) {
    var newhealth = 0;
    autohp_percent = parseInt(autohp_percent, 10) || 0;
    switch (autohp_percent) {
        case 1:
            newhealth = 0.5;break;
        case 2:
            newhealth = 0.75;break;
        case 3:
            newhealth = 1;break;
        default:
            newhealth = 0.5;break;
    }
    //TAS.debug("at getAutoHPPercentMultiplier called with "+autohp_percent+", returning with :" + newhealth);
    return newhealth;
}
/** parseSpellRangeText - Initial parse of a string from spell , it returns the value to set in the dropdown,
 * plus whether to run the range text through a secondary parse for numbers.
 * returns object with keys: dropdown, useorig, number, rangetext
 * (number only returned if number is a flat number)
 * @param {string} range the range string from a spell
 * @param {string} area the area or target string from a spell (whichever filled in, only 1 will be)
 * @returns {jsobj} map format: {"dropdown":newRangeDropdown,"useorig":useOrigRangeText if special,"number":flatRange,"rangetext":newRangeText if we need to fill in text}
 */
function parseSpellRangeText(range, area) {
    var newRangeDropdown = "",
        tempRange = 0,
        tempMatches,
        tempMatches2,
        useOrigRangeText = false,
        flatRange = -1,
        areaRange,
        newRangeText = "";
    //TAS.debug("at parseSpellRangeText: range:"+range+", area:"+area);
    try {
        if (!range) {
            //if range is blank, use the number in area/effect/targets since it will be "30ft emanation" or something similar
            if (!area) {
                return {
                    "dropdown": "blank",
                    "useorig": false,
                    "rangetext": "",
                    "number": 0
                };
            }
            areaRange = parseSpellRangeText(area, null);
            if (areaRange.dropdown === "unknownrange") {
                areaRange.dropdown = "blank";
            }
            if (!(areaRange.dropdown === "number" || areaRange.dropdown === "perlevel")) {
                areaRange.useorig = false;
                areaRange.rangetext = "";
            }
            return areaRange;
        }
        //begin
        range = range.toLowerCase();
        //if unlimited use area/target field
        if (!newRangeDropdown && range === "unlimited") {
            areaRange = parseSpellRangeText(area, null);
            if (areaRange.dropdown === "unknownrange") {
                newRangeDropdown = "blank";
            } else {
                newRangeDropdown = areaRange.dropdown;
                if (!/short|medium|long/.test(newRangeDropdown)) {
                    useOrigRangeText = areaRange.useorig;
                    if (useOrigRangeText && areaRange.rangetext) {
                        range = areaRange.rangetext;
                    }
                }
            }
        }
        if (!newRangeDropdown) {
            //and or or - use the value after and/or if there is one, and keep rangetext
            tempMatches = range.match(/(.*?)\s+(or|and)\s+/);
            if (tempMatches && tempMatches[1]) {
                areaRange = parseSpellRangeText(range.substring(tempMatches[0].length), null);
                if (areaRange && !(areaRange.dropdown === "unknownrange" || areaRange.dropdown === "blank")) {
                    newRangeDropdown = areaRange.dropdown;
                    if (areaRange.rangetext) {
                        //If second value is a flat number or per level
                        // then move it BEFORE the and/or so parseInt on rangetext works.
                        if (newRangeDropdown === "number") {
                            if (areaRange.rangetext) {
                                range = areaRange.rangetext + " " + tempMatches[2] + " " + tempMatches[1];
                            } else {
                                range = areaRange.number + " ft. " + tempMatches[2] + " " + tempMatches[1];
                            }
                        } else if (newRangeDropdown === "perlevel") {
                            //must add /level when it is and/or but otherwise not.
                            if (areaRange.rangetext) {
                                range = areaRange.rangetext + "/level " + tempMatches[2] + " " + tempMatches[1];
                            } else {
                                range = areaRange.number + "ft. /level  " + tempMatches[2] + " " + tempMatches[1];
                            }
                        } else {
                            range = tempMatches[1] + " " + tempMatches[2] + " " + areaRange.rangetext;
                        }
                    }
                    useOrigRangeText = true;
                }
            }
        }
        if (!newRangeDropdown) {
            if (range === "you") {
                newRangeDropdown = "personal";
            } else {
                tempMatches = range.match(/close|short|medium|long|touch|see text|personal|special|\/level/);
                if (tempMatches && tempMatches[0]) {
                    switch (tempMatches[0]) {
                        case 'close':
                        case 'medium':
                        case 'long':
                        case 'personal':
                        case 'touch':
                        case 'see text':
                            newRangeDropdown = tempMatches[0];
                            break;
                        case 'short':
                            newRangeDropdown = "close";
                            break;
                        case 'special':
                            newRangeDropdown = "see_text";
                            break;
                        case '/level':
                            tempMatches2 = range.match(/(\d+)(\D*)\/level/);
                            if (tempMatches2 && tempMatches2[1]) {
                                tempRange = parseInt(tempMatches2[1], 10) || 0;
                                range = tempMatches2[1] + (tempMatches2[2] || "");
                                useOrigRangeText = true;
                                newRangeDropdown = "perlevel";
                                flatRange = tempRange;
                            }
                            break;
                    }
                }
            }
        }
        if (!newRangeDropdown) {
            //number in front usually emanation, line, cone, etc
            tempRange = parseInt(range, 10);
            if (!isNaN(tempRange) && tempRange > 0) {
                newRangeDropdown = "number";
                flatRange = tempRange;
                useOrigRangeText = true;
            } else {
                //number in middle after "more than" or "within"
                tempMatches2 = range.match(/within\s|more\sthan\s/);
                if (tempMatches2 && tempMatches2[0]) {
                    range = range.substring(tempMatches2[0].index + tempMatches2[0].length);
                    tempRange = parseInt(range, 10);
                    if (!isNaN(tempRange) && tempRange > 0) {
                        newRangeDropdown = "number";
                        flatRange = tempRange;
                        useOrigRangeText = true;
                    }
                }
            }
        }
        if (!newRangeDropdown && area) {
            //give up , retry using the text in area/target/effect
            areaRange = parseSpellRangeText(area, null);
            newRangeDropdown = areaRange.dropdown;
            if (newRangeDropdown === "number" || newRangeDropdown === "perlevel") {
                useOrigRangeText = true;
                range = areaRange.rangetext;
            }
        }
    } catch (errorParsing) {
        _exportsLoaderTASTheAaronSheet2.default.error("parseSpellRangeText, error", errorParsing);
        newRangeDropdown = "unknownrange";
        useOrigRangeText = true;
    }
    if (!newRangeDropdown) {
        newRangeDropdown = "unknownrange";
        useOrigRangeText = true;
    }
    if (useOrigRangeText === true) {
        if (newRangeDropdown !== "unknownrange") {
            //erase everything in parenthesis - also ltrim and rtrim
            newRangeText = range.replace(/\s*\(.*?\)/, '').replace(/^\s+/, '').replace(/\s+$/, '').replace('feet', 'ft.');
        } else {
            newRangeText = range;
        }
    }
    return {
        "dropdown": newRangeDropdown,
        "useorig": useOrigRangeText,
        "number": flatRange,
        "rangetext": newRangeText
    };
}
/** parseCost gets cost in gp 
 * @param {string} str the string containing the cost: 35gp, 20sp, etc 
 * @returns {int} cost in gp.
 */
function getCostInGP(str) {
    var temp = 0,
        matches = str.match(/(\d+)/);
    if (matches) {
        temp = parseInt(matches[1], 10) || 0;
        matches = str.match(/(gp|cp|sp|pp)/i);
        if (matches) {
            switch (matches[1]) {
                case 'pp':
                    temp = temp * 10;
                    break;
                case 'sp':
                    temp = temp / 10;
                    break;
                case 'cp':
                    temp = temp / 100;
                    break;
            }
        }
    }
    return temp;
}
function getIntFromString(str) {
    var temp = 0,
        sign = 1,
        matches;
    matches = PFConst.minusreg.exec(str);
    if (matches) {
        sign = -1;
        str = str.replace(matches[0], '');
    }
    matches = str.match(/(\d+)/);
    if (matches) {
        temp = sign * (parseInt(matches[1], 10) || 0);
    }
    return temp;
}
function getCritFromString(str) {
    var ret = { 'crit': 20, 'critmult': 2 },
        matches;
    matches = PFConst.critreg.exec(str);
    //TAS.debug("at getCritFromString:"+str+", matches:",matches);
    if (matches) {
        ret.crit = matches[1];
        ret.critmult = matches[2];
    }
    return ret;
}
function getDiceDieFromString(str) {
    var matches,
        ret = { 'dice': 0, 'die': 0, 'plus': 0 },
        sign = 1;
    matches = PFConst.diceDiereg.exec(str);
    if (matches) {
        ret.dice = parseInt(matches[1], 10) || 0;
        ret.die = parseInt(matches[2], 10) || 0;
        try {
            if (matches[3] && PFConst.minusreg.test(matches[3])) {
                sign = -1;
            }
            if (matches[4]) {
                ret.plus = sign * (parseInt(matches[4], 10) || 0);
            }
        } catch (err) {
            _exportsLoaderTASTheAaronSheet2.default.error("getDiceDieFromString error finding plus ", err);
        }
    }
    //TAS.debug("at getDiceDieFromString parsing "+str,matches);
    return ret;
}
function getSpecialAbilityTypeFromString(str) {
    var ret = '',
        matches;
    if (!str) {
        return '';
    }
    matches = /\b(Su|Ex|Sp)\b/i.exec(str);
    if (matches) {
        return matches[1][0].toUpperCase() + matches[1][2].toLowerCase();
    }
    return '';
}
/** returns string after first comma ( that is after an opening parenthesis )
* or after first comma if there is no opening parenthesis
* @param {string} str the string to split
* @param {boolean} putOutside if true then return whateever is before first comma and after opening paren.
*      if false, then return everything up to first paren then between 1st and 2nd comma. why? who the hell knows?
* @returns {?} ?
*/
function removeUptoFirstComma(str, putOutside) {
    var parensplit, commasplit, retstr, i;
    if (str.indexOf('(') < 0 || str.indexOf(',') < 0) {
        return str;
    }
    parensplit = str.split(/\s*\(\s*/);
    if (parensplit.length > 1) {
        commasplit = parensplit[1].split(/,\s*/);
    } else {
        commasplit = str.split(/,\s*/);
    }
    retstr = putOutside ? commasplit[0] : parensplit[0] + '(' + commasplit[1];
    //rejoin rest of string this is really slow, why bother doing it this way?
    if (commasplit.length > 2) {
        for (i = 2; i < commasplit.length; i++) {
            retstr += ',' + commasplit[i];
        }
    }
    return retstr;
}
/**replaceDiceDieString puts inline roll brackets [[ ]] around 'xdy +z' dice strings (z exists or not)
*@param {string} str a string which includes a diceroll substring xdy or xdy +/-z
*@returns {string} same string with brackets around dice roll
*/
function replaceDiceDieString(str) {
    var tempstr = "",
        tempstrs = str.split(/(\d+d\d+\s*[+\-]??\d*)/i);
    tempstr = _underscore2.default.reduce(tempstrs, function (memo, splitted) {
        //TAS.debug('at ' + splitted);
        if (/(\d+d\d+\s*[+\-]??\d*)/i.test(splitted)) {
            return memo + "(" + splitted + "): [[" + splitted + "]] ";
        }
        return memo + splitted;
    }, "");
    return tempstr;
}
function getDiceDieString(str) {
    var reg = /(\d+d\d+\s*[+\-]??\d*)/i,
        matches;
    matches = reg.exec(str);
    if (matches) {
        return "[[" + matches[0] + "]]";
    }
    return "";
}
/**getDCString - gets macro formula for special ability calculating DC using ability score, what the level attribute is, and 
* whether to divide that level by 2 or not.
* @param {string} ability the ability score string the DC is based on. Usually CON for special abilities.
* @param {string} levelAttr optional the level attribute , either "level" or "class-0-level" or "npc-hd-num" etc
* @param {boolean} isUndead flag if undead, if true, then if ability is 'CON' change to 'CHA'
* @param {int} miscBonus a flat number to add in
* @param {boolean} doNotDivideByTwo if true then do not divide level attr value by 2 
* @returns {string} default is: "DC [[ 10 + @{" + ability + "-mod} + floor(@{"+levelAttr+"}/2) ]]";
*/
function getDCString(ability, levelAttr, isUndead, miscBonus, doNotDivideByTwo) {
    var tempstr = '',
        pre = 'floor(',
        post = '/2)';

    tempstr = "DC [[ 10 ";
    if (ability) {
        if (isUndead && ability === 'CON') {
            ability = 'CHA';
        }
        tempstr += "+ @{" + ability + "-mod} ";
    }
    if (levelAttr) {
        if (doNotDivideByTwo) {
            pre = '';post = '';
        } else {
            tempstr += "+ " + pre + "@{" + levelAttr + "}" + post + " ";
        }
    }
    if (miscBonus) {
        tempstr += "+ " + miscBonus;
    }
    tempstr += " ]]";

    return tempstr;
}
/**replaceDCString looks for DC n, and replaces "n" with the [[ calculated DC  ]] by calling getDCString
* @param {string} str the string to search and replace
* @param {string} ability the ability score string the DC is based on. Usually CON for special abilities.
* @param {string} levelAttr optional the level attribute , either "level" or "class-0-level" or "npc-hd" etc
* @param {boolean} isUndead flag if undead, if true, then if ability is 'CON' change to 'CHA'
* @param {int} levelFlatNum optional the level, if levelAttr is blank, this must be filled in, or vice versa
* @param {boolean} doNotDivideByTwo if true then do not divide level by 2 to calculate DC
* @returns {string} default is: "DC [[ 10 + @{" + ability + "-mod} + floor(@{"+levelAttr+"}/2) ]]"
*/
function replaceDCString(str, ability, levelAttr, isUndead, levelFlatNum, doNotDivideByTwo) {
    var tempstr = '',
        matches,
        pre = '',
        post = '',
        retstr = str,
        rawDC = 10;
    try {
        matches = str.match(/D[Cc]\s*\d+/);
        if (matches) {
            tempstr = matches[0].match(/\d+/);
            rawDC = parseInt(tempstr, 10) || 0;
            tempstr = getDCString(ability, levelAttr, isUndead, levelFlatNum, doNotDivideByTwo);
            pre = str.slice(0, matches.index) || '';
            post = str.slice(matches.index + matches[0].length) || '';
            retstr = pre + tempstr + post;
        }
    } catch (er) {
        _exportsLoaderTASTheAaronSheet2.default.error("at replaceDCString, cannot find DC string in " + str, er);
    } finally {
        return retstr;
    }
}
/** returns rest of string after number 
*@param {string} str the string
*@returns {string} rest of string after finding a number.
*/
function getNoteAfterNumber(str) {
    str = str.slice(str.indexOf(/\d+/));
    return str;
}
/**gets value 'field_compendium' from v,passes it to synchronous methodToCall mapping function, then sets in 'field' 
*@param {string} prefix the repeating_section_id_  string
*@param {string} field the name of compendium field , must have _compendium at end. Without '_compendium' this is the write field
*@param {function} methodToCall synchronous function that maps value of field_compendium to another val to set
*@param {jsmap} v the values returned from getAttrs
*@param {jsmap} setter to pass to setAttrs
*@param {string} setField optional if the attr to write to is not 'field' it will be prefix+setField
*/
function getCompendiumFunctionSet(prefix, field, methodToCall, v, setter, setField) {
    var temp = 0,
        attr = v[prefix + field + '_compendium'];
    if (attr) {
        temp = methodToCall(attr);
        if (temp) {
            setField = setField || field;
            setter[prefix + field] = temp;
        }
    }
    return setter;
}
/**gets int value 'field_compendium' from v, then sets in 'field' 
*@param {string} prefix the repeating_section_id_  string
*@param {string} field the name of compendium field , must have _compendium at end. Without '_compendium' this is the write field
*@param {jsmap} v the values returned from getAttrs
*@param {jsmap} setter to pass to setAttrs
*@param {string} setField optional if the attr to write to is not 'field' it will be prefix+setField
*/
function getCompendiumIntSet(prefix, field, v, setter, setField) {
    var tempInt = 0,
        attr;
    try {
        attr = v[prefix + field + '_compendium'];
        if (attr) {
            tempInt = getIntFromString(attr);
            //TAS.debug("get int field:"+field+", val="+attr+", int:"+tempInt);
            if (tempInt) {
                setField = setField || field;
                setter[prefix + field] = tempInt;
            }
        }
    } catch (err) {
        _exportsLoaderTASTheAaronSheet2.default.error("getCompendiumIntSet error on :" + prefix + ", field:" + field + ", setField:" + setField, err);
    } finally {
        return setter;
    }
}

function removeWhisperFromMacro(macrostr) {
    var matches;
    if (!macrostr) {
        return macrostr;
    }
    //use hisper since some have capital W others not
    matches = macrostr.match(/whisper\}/i);
    if (matches) {
        return _SWUtils2.default.trimBoth(macrostr.slice(matches.index + matches[0].length));
    }
    return macrostr;
}

_PFLog.PFConsole.log('   PFUtils module loaded          ');
_PFLog.PFLog.modulecount++;

/***/ }),
/* 6 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.migrateRepeatingDamage = migrateRepeatingDamage;
exports.migrateMaxDexAndACP = migrateMaxDexAndACP;
exports.migrateSpellRanges = migrateSpellRanges;
exports.migrateSpells = migrateSpells;
exports.migrateRollTemplateImages = migrateRollTemplateImages;
exports.addNumberToMacro = addNumberToMacro;
exports.migrateMoveIntIntoMacro = migrateMoveIntIntoMacro;
exports.migrateHPMisc = migrateHPMisc;
exports.migrateMaxSkills = migrateMaxSkills;
exports.migrateNPC = migrateNPC;
exports.migrateAltAttackGridrowFlags = migrateAltAttackGridrowFlags;
exports.migrateExperience = migrateExperience;
exports.migrateUsesSpellFlag = migrateUsesSpellFlag;
exports.migrateSize = migrateSize;
exports.migrateRepeatingItemAttributes = migrateRepeatingItemAttributes;
exports.migrateAbilityListFlags = migrateAbilityListFlags;
exports.migrateSpellPointFlag = migrateSpellPointFlag;
exports.migrateWhisperDropdowns = migrateWhisperDropdowns;
exports.migrateConfigFlags = migrateConfigFlags;
exports.getAllMigrateFlags = getAllMigrateFlags;
exports.setAllMigrateFlags = setAllMigrateFlags;

var _underscore = __webpack_require__(2);

var _underscore2 = _interopRequireDefault(_underscore);

var _exportsLoaderTASTheAaronSheet = __webpack_require__(1);

var _exportsLoaderTASTheAaronSheet2 = _interopRequireDefault(_exportsLoaderTASTheAaronSheet);

var _PFLog = __webpack_require__(0);

var _PFConst = __webpack_require__(3);

var _PFConst2 = _interopRequireDefault(_PFConst);

var _SWUtils = __webpack_require__(4);

var SWUtils = _interopRequireWildcard(_SWUtils);

var _PFUtils = __webpack_require__(5);

var PFUtils = _interopRequireWildcard(_PFUtils);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

//all user editable fields at the time
var oldSpellUserFieldDefaults = {
    "spellclass_number": {
        "type": "int",
        "val": 0
    },
    "used": {
        "type": "int",
        "val": 0
    },
    "spell_level": {
        "type": "int",
        "val": -1
    },
    "CL_misc": {
        "type": "int",
        "val": 0
    },
    "SP_misc": {
        "type": "int",
        "val": 0
    },
    "Concentration_misc": {
        "type": "int",
        "val": 0
    },
    "range": {
        "type": "text",
        "val": ""
    },
    "name": {
        "type": "text",
        "val": ""
    },
    "school": {
        "type": "text",
        "val": ""
    },
    "cast-time": {
        "type": "text",
        "val": ""
    },
    "components": {
        "type": "text",
        "val": ""
    },
    "targets": {
        "type": "text",
        "val": ""
    },
    "duration": {
        "type": "text",
        "val": ""
    },
    "save": {
        "type": "text",
        "val": ""
    },
    "sr": {
        "type": "text",
        "val": ""
    },
    "description": {
        "type": "text",
        "val": ""
    },
    "macro-text": {
        "type": "text",
        "val": "@{PC-whisper} &{template:pf_spell} {{color}} {{header_image=@{header_image-pf_spell}}} {{name=@{name}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle}} @{spell_options}"
    },
    "npc-macro-text": {
        "type": "text",
        "val": "@{NPC-whisper} &{template:pf_spell} {{color}} {{header_image=@{header_image-pf_spell}}} {{name=@{name}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle}} @{spell_options}"
    },
    "isDomain": {
        "type": "checkbox",
        "val": "0"
    }
};

/** breaks the damage dropdown into 2 dropdowns, one for the multiplier and one for the attribute
 * done as part of migration to .60
 *@param {Array} ids array of strings which are the row ids
 *@param {function} callback when done
 */
function migrateRepeatingDamage(ids, callback) {
    var done = _underscore2.default.once(function () {
        if (typeof callback === "function") {
            callback();
        }
    }),
        setter = {},
        fields = [],

    /** findMultiplier - OLD not used anymore  - returns old damage multiplier when it was in the dropdown.
    * @param {string} str = the value of the damage ability
    * @returns {float} a number indicating the multiplier for the ability mod. Must be 1, .5, 1.5, 2. 
    */
    findMultiplier = function findMultiplier(str) {
        var retNum;
        if (!str) {
            return 0;
        }
        if (str.indexOf("1.5") >= 0) {
            retNum = 1.5;
        } else if (str.indexOf(".5") >= 0) {
            retNum = 0.5;
        } else if (str.indexOf("1/2") >= 0) {
            retNum = 0.5;
        } else if (str.indexOf("3/2") >= 0) {
            retNum = 1.5;
        } else if (str.indexOf("1 1/2") >= 0) {
            retNum = 1.5;
        } else if (str.indexOf("2") >= 0) {
            retNum = 2;
        } else {
            retNum = 1;
        }
        return retNum;
    };
    _underscore2.default.each(ids, function (id) {
        var dmgDropdownField = "repeating_weapon_" + id + "_damage-ability",
            abilityMultField = "repeating_weapon_" + id + "_damage_ability_mult";
        fields.push(dmgDropdownField);
        fields.push(abilityMultField);
    });
    getAttrs(fields, function (v) {
        var setter = {};
        try {
            //TAS.debug("migrateRepeatingDamage", "values", v);
            _underscore2.default.each(ids, function (id) {
                var dmgDropdownField = "repeating_weapon_" + id + "_damage-ability",
                    abilityMultField = "repeating_weapon_" + id + "_damage_ability_mult",
                    ability,
                    multStr,
                    strToSet,
                    multval;
                try {
                    ability = PFUtils.findAbilityInString(v[dmgDropdownField]);
                    multStr = findMultiplier(v[dmgDropdownField]);
                    strToSet = "@{" + ability + "}";
                    multval = parseFloat(multStr, 10);
                    //multfield is blank but multstr is not.
                    if (!v[abilityMultField] && multStr && ability) {
                        if (!isNaN(multval)) {
                            if (multval !== 1.0) {
                                setter[abilityMultField] = multStr;
                            }
                        }
                        if (ability) {
                            setter[dmgDropdownField] = strToSet;
                        }
                    }
                } catch (errinner) {
                    _exportsLoaderTASTheAaronSheet2.default.error("migrateRepeatingDamage dropdown to mult: could not migrate str " + v[dmgDropdownField] + " in attack row " + id, errinner);
                }
            });
            setter["migrated_damage-multiplier"] = "1";
        } catch (err) {
            _exportsLoaderTASTheAaronSheet2.default.error("migrateRepeatingDamage outer error!? SHOULD NOT HAPPEN", err);
        } finally {
            if (_underscore2.default.size(setter) > 0) {
                setAttrs(setter, _PFConst2.default.silentParams, done);
            } else {
                done();
            }
        }
    });
}
/** sets old dropdown  max dex and acp values to new ones for Magik's updates. 
 * because old values were so different, new values are set to either "none" or "armor and load"
 */
function migrateMaxDexAndACP() {
    getAttrs(["max-dex-source"], function (v) {
        var newMaxDex = 0,
            currMaxDex = parseInt(v["max-dex-source"], 10) || 0,
            setter = {};
        if (currMaxDex >= 99) {
            setAttrs(setter, { silent: true });
        }
    });
}
/** updates repeating_spells ranges from text to dropdown and custom text field, and range number 
 * @param {function} callback call after finishing */
function migrateSpellRanges(callback) {
    var done = function done() {
        if (typeof callback === "function") {
            callback();
        }
    };
    getAttrs(["spellranges_migrated"], function (m) {
        var rangeFields = ["casterlevel", "range", "range_numeric", "range_pick", "targets", "name"];
        if (parseInt(m["spellranges_migrated"], 10) === 1) {
            done();
            return;
        }
        getSectionIDs("repeating_spells", function (ids) {
            var fields = [];
            fields = _underscore2.default.reduce(ids, function (memo, id) {
                var prefix = "repeating_spells_" + SWUtils.getRepeatingIDStr(id),
                    row = _underscore2.default.map(rangeFields, function (field) {
                    return prefix + field;
                });
                return memo.concat(row);
            }, []);
            getAttrs(fields, function (v) {
                var setter = {};
                _underscore2.default.each(ids, function (id) {
                    var prefix = "repeating_spells_" + SWUtils.getRepeatingIDStr(id),
                        casterlevel = parseInt(v[prefix + "casterlevel"], 10) || 1,
                        chosenRange = v[prefix + "range_pick"],
                        rangeText = v[prefix + "range"] || "",
                        areaEffect = v[prefix + "targets"] || "",
                        name = v[prefix + "name"],
                        newRange = 0,
                        rangeUpdates,
                        resetDropdown = false;
                    //if dropdown is blank but text filled in try to migrate
                    if (!chosenRange && !rangeText) {
                        setter[prefix + "range"] = "";
                        setter[prefix + "range_numeric"] = 0;
                        setter[prefix + "range_pick"] = "blank";
                    } else if ((!chosenRange || chosenRange === "blank") && rangeText) {
                        rangeUpdates = PFUtils.parseSpellRangeText(rangeText, areaEffect);
                        chosenRange = rangeUpdates.dropdown;
                        if (chosenRange === "number" || chosenRange === "perlevel" || rangeUpdates.useorig) {
                            rangeText = rangeUpdates.rangeText;
                        }
                        //otherwise leave it in case user had something they wanted.
                        newRange = PFUtils.findSpellRange(rangeText, chosenRange, casterlevel) || 0;
                        setter[prefix + "range"] = rangeText;
                        setter[prefix + "range_numeric"] = newRange;
                        setter[prefix + "range_pick"] = chosenRange;
                    } else if (resetDropdown) {
                        newRange = PFUtils.findSpellRange(rangeText, chosenRange, casterlevel) || 0;
                        setter[prefix + "range_numeric"] = newRange;
                        setter[prefix + "range_pick"] = chosenRange;
                    }
                });
                setter["spellranges_migrated"] = "1";
                if (_underscore2.default.size(setter) > 0) {
                    setAttrs(setter, {
                        silent: true
                    }, callback);
                } else {
                    done();
                }
            });
        });
    });
}
/** copies spells from repeating-lvl-*-spells and npc spells to repeating_spells 
 * there are bugs in this, but it's so old we never were able to find them all and fix them. 
 * @param {function} callback call when done
 * @param {boolean} silently if true call setAttrs with PFConst.silentParams 
 */
function migrateSpells(callback) {
    var done = function done() {
        if (typeof callback === "function") {
            callback();
        }
    },

    /* determines spell class from class dropdown in the spell repeating row 
    * this is not a migrate function, just an old utility function  called by migrate
    */
    handleOldSpellClassDropdown = function handleOldSpellClassDropdown(selected, class0name, class1name, class2name) {
        if (!selected) {
            return 0;
        } //it is undefined if it is default set to the first one
        if (selected.indexOf("0") >= 0) {
            return 0;
        }
        if (selected.indexOf("1") >= 0) {
            return 1;
        }
        if (selected.indexOf("2") >= 0) {
            return 2;
        }
        if (selected === class0name) {
            return 0;
        }
        if (selected === class1name) {
            return 1;
        }
        if (selected === class2name) {
            return 2;
        }
        return 0;
    },

    /** this is the old version of updateSpell. This also is not a migrate function but called by migrate 
    * @param {string} section the repeating_*** name since old spells had 10 different repeating lists
    * @param {string} id the id of row to update
    * @param {eventInfo} eventInfo object from on method, not used in this.
    * @param {boolean} forceRange if true recalculate range
    * @param {function} callback call when done
    */
    updateOldSpell = function updateOldSpell(section, id, eventInfo, forceRange, callback) {
        if (section.indexOf("lvl") !== 0 && section.indexOf("npc") !== 0) {
            return;
        }
        var idStr = SWUtils.getRepeatingIDStr(id),
            isNPC = section.indexOf("npc") >= 0 ? 1 : 0,
            prefix = "repeating_" + section + "_" + idStr,
            spellclassField = prefix + "spellclass",
            spellLevelField = isNPC ? prefix + "level" : prefix + "spell_level";
        getAttrs([spellLevelField, spellclassField, "spellclass-0-name", "spellclass-1-name", "spellclass-2-name"], function (va) {
            var currSpellLevel = parseInt(va[spellLevelField], 10),
                spellLevel = isNPC ? isNaN(currSpellLevel) ? 0 : currSpellLevel : isNaN(currSpellLevel) ? parseInt(section.substring(4), 10) : currSpellLevel,
                classNum = isNPC ? section.indexOf("1") >= 0 ? 0 : section.indexOf("2") >= 0 ? 1 : 0 : handleOldSpellClassDropdown(va[spellclassField], va["spellclass-0-name"], va["spellclass-1-name"], va["spellclass-2-name"]) || 0,
                hiddenclassNumField = prefix + "spellclass_number",
                spellDefCastDCField = prefix + "cast_def_dc",
                spellDefConField = prefix + "cast_def-mod",
                spellDCField = prefix + "savedc",
                spellDCUserField = prefix + "DC_misc",
                spellCLField = prefix + "casterlevel",
                spellCLUserField = prefix + "CL_misc",
                spellConField = prefix + "Concentration-mod",
                spellConUserField = prefix + "Concentration_misc",
                spellSpellPenField = prefix + "SP-mod",
                spellSpellPenUserField = prefix + "SP_misc",
                classCLField = "spellclass-" + classNum + "-level-total",
                classDCField = "spellclass-" + classNum + "-level-" + spellLevel + "-savedc",
                classConField = "Concentration-" + classNum,
                classDefConField = "Concentration-" + classNum + "-def",
                classSpellPenField = "spellclass-" + classNum + "-SP-mod",
                spellRangeText = prefix + "range",
                spellRangeNum = prefix + "range_numeric",
                spellRangeTarget = prefix + "targets";
            getAttrs([hiddenclassNumField, spellDCField, spellDCUserField, spellCLField, spellCLUserField, spellConField, spellConUserField, spellDefConField, spellDefCastDCField, spellSpellPenField, spellSpellPenUserField, classDCField, classCLField, classConField, classDefConField, classSpellPenField, spellRangeText, spellRangeNum, spellRangeTarget], function (v) {
                var newDC,
                    newCL,
                    newCon,
                    newDefCon,
                    newSpellPen,
                    currDC = parseInt(v[spellDCField], 10),
                    currCL = parseInt(v[spellCLField], 10),
                    currCon = parseInt(v[spellConField], 10),
                    currDefCon = parseInt(v[spellDefConField], 10),
                    currdefDC = parseInt(v[spellDefCastDCField], 10),
                    currSpellPen = parseInt(v[spellSpellPenField], 10),
                    classDC = parseInt(v[classDCField], 10) || 0,
                    classCL = parseInt(v[classCLField], 10) || 0,
                    classCon = parseInt(v[classConField], 10) || 0,
                    classDefConMod = parseInt(v[classDefConField], 10) || 0,
                    classSpellPen = classCL + (parseInt(v[classSpellPenField], 10) || 0),
                    defDC = 15 + spellLevel * 2,
                    currClassNum = parseInt(v[hiddenclassNumField], 10),
                    currRange = parseInt(v[spellRangeNum], 10),
                    newRange = 0,
                    setter = {},
                    setAny = 0,
                    classLevelDelta = 0,
                    updateRange = false;
                if (classNum !== currClassNum || isNaN(currClassNum)) {
                    setter[hiddenclassNumField] = classNum;
                    setAny = 1;
                    //updateRange = true;
                }
                //prepare for migration of npc spells
                if (isNPC) {
                    if (classNum === 0) {
                        //set dropdown
                        setter["spellclass"] = "@{spellclass-0-name}";
                        if (!va["spellclass-0-name"]) {
                            setter["spellclass-0-name"] = "NPC 1";
                        }
                        setAny = 1;
                    } else if (classNum === 1) {
                        setter["spellclass"] = "@{spellclass-1-name}";
                        if (!va["spellclass-1-name"]) {
                            setter["spellclass-1-name"] = "NPC 2";
                        }
                        setAny = 1;
                    }
                }
                if (!isNaN(spellLevel) && (currSpellLevel !== spellLevel || isNaN(currSpellLevel))) {
                    setter[spellLevelField] = spellLevel;
                    setAny = 1;
                }
                newCL = (parseInt(v[spellCLUserField], 10) || 0) + classCL;
                if (newCL !== currCL || isNaN(currCL)) {
                    setter[spellCLField] = newCL;
                    setAny = 1;
                    updateRange = true;
                }
                if (defDC !== currdefDC || isNaN(currdefDC)) {
                    setter[spellDefCastDCField] = defDC;
                    setAny = 1;
                }
                classLevelDelta = newCL - classCL;
                newDC = (parseInt(v[spellDCUserField], 10) || 0) + classDC;
                if (newDC !== currDC || isNaN(currDC)) {
                    setter[spellDCField] = newDC;
                    setAny = 1;
                }
                newCon = (parseInt(v[spellConUserField], 10) || 0) + classCon + classLevelDelta;
                if (newCon !== currCon || isNaN(currCon)) {
                    setter[spellConField] = newCon;
                    setAny = 1;
                }
                newDefCon = newCon + classDefConMod;
                if (newDefCon !== currDefCon || isNaN(currDefCon)) {
                    setter[spellDefConField] = newDefCon;
                    setAny = 1;
                }
                newSpellPen = classSpellPen + (parseInt(v[spellSpellPenUserField], 10) || 0) + classLevelDelta;
                if (newSpellPen !== currSpellPen || isNaN(currSpellPen)) {
                    setter[spellSpellPenField] = newSpellPen;
                    setAny = 1;
                }
                if (updateRange || forceRange || isNaN(currRange)) {
                    newRange = PFUtils.findSpellRange(v[spellRangeText], newCL);
                    if (isNaN(newRange)) {
                        if (isNaN(currRange)) {
                            newRange = -1;
                        } else {
                            newRange = currRange;
                            currRange--;
                        }
                    }
                    if (newRange !== currRange || isNaN(currRange)) {
                        setter[spellRangeNum] = newRange;
                        setAny = 1;
                    }
                }
                if (setAny) {
                    setAttrs(setter, {
                        silent: true
                    });
                }
                //cannot wait for callback of setAttrs since it will not call if there were no changes.
                if (typeof callback === "function") {
                    callback();
                }
            });
        });
    },
        migrateCheckedSpells = function migrateCheckedSpells() {
        var countofSpells = 0,
            spellsUpdated = 0,
            spellUserFields = [],
            countofSections = 12,
            sectionsCounted = 0,
            idmap = {},
            sectionsToMigrate = ["lvl-0-spells", "lvl-1-spells", "lvl-2-spells", "lvl-3-spells", "lvl-4-spells", "lvl-5-spells", "lvl-6-spells", "lvl-7-spells", "lvl-8-spells", "lvl-9-spells", "npc-spells1", "npc-spells2"],
            finishUp = function finishUp() {
            var params = {};
            setAttrs({
                "spellmap": JSON.stringify(idmap),
                "migrated_spells": "1"
            }, _PFConst2.default.silentParams, done);
        },
            updateAtEnd,
            migrateSpell = function migrateSpell(section, id, callback) {
            var prefix = "",
                prefixLen = 0,
                oldAttribList = [];
            if (id === undefined || id === null || section === undefined || section === null) {
                callback();
                return;
            }
            prefix = "repeating_" + section + "_" + id + "_";
            prefixLen = prefix.length;
            _underscore2.default.each(spellUserFields, function (field) {
                oldAttribList.push(prefix + field);
            });
            //TAS.debug(oldAttribList);
            getAttrs(oldAttribList, function (v) {
                var spellLevel = 0,
                    newId = "",
                    newPrefix = "",
                    setter = {},
                    allNonBlank = true;
                //undefined for any attribute indicates it is outlined in red
                //for some reason checking name and === works better than checking typeof
                if (v[prefix + "name"] === undefined) {
                    _exportsLoaderTASTheAaronSheet2.default.error("cannot migrate " + id);
                    updateAtEnd();
                    return;
                }
                //if any are null or undefined skip this row,
                _underscore2.default.each(v, function (val) {
                    //saw some that were undefined but typeof came back something else? how?
                    if (val === undefined || val === null || typeof val === "undefined") {
                        _exportsLoaderTASTheAaronSheet2.default.error("cannot migrate " + id);
                        updateAtEnd();
                        return;
                    }
                    if (val !== "" || (parseInt(val, 10) || 0) !== 0) {
                        allNonBlank = false;
                    }
                });
                //if all are blank or zero then skip this row
                if (allNonBlank) {
                    _exportsLoaderTASTheAaronSheet2.default.error("cannot migrate " + id);
                    updateAtEnd();
                    return;
                }
                //passed check, so generate new id and attribute list
                newId = generateRowID();
                //TAS.debug("Passed test, migrating " + id +" to new "+newId);
                newPrefix = "repeating_spells_" + newId + "_";
                idmap["repeating_" + section + "_" + id + "_"] = "repeating_spells_" + newId + "_";
                _underscore2.default.each(v, function (val, field) {
                    var col = field.substring(prefixLen);
                    switch (oldSpellUserFieldDefaults[col].type) {
                        case 'int':
                            setter[newPrefix + col] = parseInt(val, 10) || 0;
                            break;
                        case 'text':
                            if (col !== "macro-text" && col !== "npc-macro-text") {
                                setter[newPrefix + col] = val;
                            } else {
                                try {
                                    if (val !== oldSpellUserFieldDefaults[col].val) {
                                        setter[newPrefix + col] = val;
                                    }
                                } catch (errrrr) {}
                            }
                            break;
                        case 'checkbox':
                            setter[newPrefix + col] = val;
                            break;
                        default:
                            setter[newPrefix + col] = val;
                    }
                });
                spellLevel = parseInt(v[prefix + "spell_level"], 10);
                //redo spell level since default is -1 instead of 0
                if (isNaN(spellLevel)) {
                    setter[newPrefix + "spell_level"] = "";
                    setter[newPrefix + "spell_level_r"] = -1;
                } else {
                    setter[newPrefix + "spell_level"] = spellLevel;
                    setter[newPrefix + "spell_level_r"] = spellLevel;
                }
                setter[newPrefix + "spell_class_r"] = parseInt(v[prefix + "spellclass_number"], 10) || 0;
                //TAS.debug("Setting "+newPrefix+"spellclass_number:"+ setter[newPrefix+"spellclass_number"] +", spell_level_r:"+setter[newPrefix+"spell_level"]+" and ensure undefined old level "+ setter[prefix+"spell_level"]+" for spell new "+setter[newPrefix+"name"]+", old:" + v[prefix+"name"]);
                //TAS.log(setter);
                setAttrs(setter, {
                    silent: true
                }, function () {
                    updateAtEnd();
                    return;
                });
            });
        },
            migrateUpdatedSpells = function migrateUpdatedSpells() {
            _underscore2.default.each(sectionsToMigrate, function (section) {
                var repeatingsection = "repeating_" + section;
                getSectionIDs(repeatingsection, function (ids) {
                    _underscore2.default.each(ids, function (id) {
                        migrateSpell(section, id);
                    });
                });
            });
        },
            updateOldSpells = function updateOldSpells() {
            //re-update each spell before migrating, in case some are very old.
            _underscore2.default.each(sectionsToMigrate, function (section) {
                var repeatingsection = "repeating_" + section;
                getSectionIDs(repeatingsection, function (ids) {
                    _underscore2.default.each(ids, function (id) {
                        updateOldSpell(section, id, null, true, function () {
                            spellsUpdated++;
                            if (spellsUpdated === countofSpells) {
                                migrateUpdatedSpells();
                            }
                        });
                    });
                });
            });
        };
        //create array from keys from oldSpellUserFieldDefaults
        _underscore2.default.each(oldSpellUserFieldDefaults, function (defMap, field) {
            spellUserFields.push(field);
        });
        //get total count of spells to migrate
        _underscore2.default.each(sectionsToMigrate, function (section) {
            getSectionIDs("repeating_" + section, function (ids) {
                countofSpells += ids.length;
                sectionsCounted++;
                if (sectionsCounted === countofSections) {
                    updateAtEnd = _underscore2.default.after(countofSpells, function () {
                        finishUp();
                    });
                    updateOldSpells();
                }
            });
        });
    };
    getAttrs(["migrated_spells"], function (vm) {
        if (parseInt(vm["migrated_spells"], 10) === 1) {
            done();
        } else {
            migrateCheckedSpells();
        }
    });
}
/* fixes rolltemplate image urls in dropdown to update urls from solid bkg to transparent. (from old to new val) */
function migrateRollTemplateImages() {
    getAttrs(['migrated_rolltemplateimages', 'header_image-pf_spell', 'header_image-pf_attack-melee', 'header_image-pf_attack-ranged', 'header_image-pf_attack-cmb', 'header_image-pf_defense'], function (v) {
        var isMigrated = parseInt(v.migrated_rolltemplateimages, 10) || 0,
            setter = {};
        try {
            if (!isMigrated) {
                setter = _underscore2.default.chain(v).filter(function (val, attr) {
                    return (/\[default\]/.test(val)
                    );
                }).reduce(function (memo, val, attr) {
                    var newval = "";
                    try {
                        switch (attr) {
                            case 'header_image-pf_spell':
                                if (val !== "[default](http://imgur.com/9yjOsAD.png)") {
                                    newval = "[default](http://imgur.com/9yjOsAD.png)";
                                }
                                break;
                            case 'header_image-pf_attack-melee':
                                if (val !== "[default](http://i.imgur.com/AGq5VBG.png)") {
                                    newval = "[default](http://i.imgur.com/AGq5VBG.png)";
                                }
                                break;
                            case 'header_image-pf_attack-ranged':
                                if (val !== "[default](http://imgur.com/58j2e8P.png)") {
                                    newval = "[default](http://imgur.com/58j2e8P.png)";
                                }
                                break;
                            case 'header_image-pf_attack-cmb':
                                if (val !== "[default](http://imgur.com/RUJfMGe.png)") {
                                    newval = "[default](http://imgur.com/RUJfMGe.png)";
                                }
                                break;
                            case 'header_image-pf_defense':
                                if (val !== "[default](http://imgur.com/02fV6wh.png)") {
                                    newval = "[default](http://imgur.com/02fV6wh.png)";
                                }
                                break;
                        }
                        if (newval) {
                            memo[attr] = newval;
                        }
                    } catch (err) {
                        _exportsLoaderTASTheAaronSheet2.default.error("migrateRollTemplateImages: inner error on " + attr, err);
                    }
                    return memo;
                }, {}).value();
            }
        } catch (erro) {
            _exportsLoaderTASTheAaronSheet2.default.error("migrateRollTemplateImages outer error", erro);
        } finally {
            setter['migrated_rolltemplateimages'] = 1;
            if (_underscore2.default.size(setter) > 0) {
                setAttrs(setter, _PFConst2.default.silentParams);
            }
        }
    });
}
/**addNumberToMacro adds the value to the end of the macro string. 
 * so the evaluated value of the returned string equals macroVal + miscVal
 * either "macroText + miscVal" or "macroText - miscVal"
 * This is for conversions only, if we are removing the miscfield. it is pretty useless otherwise.
 *@param {string} macroText the text of the macro to add to. if it is wrapped in [[ ]] make sure to remove that before passing macro in or it will be added outside of the brackets!
 *@param {int} macroVal the value the macro currently evaluates to.
 *@param {string} miscMacroText text of 2nd macro to add to macroText if there is one
 *@param {int} miscVal the value we are adding to macroText , it is value of miscMacroText if there is a macro
 *@returns {string} the resulting new macro text
 */
function addNumberToMacro(macroText, macroVal, miscMacroText, miscVal) {
    //TAS.debug("at addNumberToMacro:" );
    macroText = macroText || "";
    miscMacroText = miscMacroText || "";
    if (macroText || macroVal) {
        macroVal += miscVal;
        if (miscMacroText) {
            macroText += " " + miscMacroText;
        } else if (miscVal) {
            if (miscVal > 0) {
                macroText += " + ";
            } else {
                macroText += " - ";
            }
            macroText += String(Math.abs(miscVal));
        }
    } else if (miscVal) {
        macroText = String(miscVal);
        macroVal = miscVal;
    } else {
        macroText = "";
        macroVal = 0;
    }
    return { 'macroText': macroText, 'macroVal': macroVal };
}
/** adds the value to the end of the macro string. either "macro + miscVal" or "macro - miscVal"
 * saves new macro to the sheet
 *@param {function} callback call when done
 *@param {migrateFlag} the sheet attribute to check, if 1 do nothing, if 1 then perform migration then set to 1
 *@param {string} macroAttr the attribute name of macro we will update
 *@param {string} modAttr the attribute name containing the # evaluated from macroAttr
 *@param {string} miscMacroAttr the attribute name of macro to remove and whose value to add to macroAttr
 *@param {string} miscAttr the attribute name of a number field, standalone if macroAttr is null, or it is the 
            field containing evaluted number of miscMacroAttr
 */
function migrateMoveIntIntoMacro(callback, migrateFlag, macroAttr, modAttr, miscMacroAttr, miscAttr) {
    var done = _underscore2.default.once(function () {
        //TAS.debug("leaving PFMigrate.migrateMoveIntIntoMacro: "+ macroAttr);
        if (typeof callback === "function") {
            callback();
        }
    }),
        fields = [macroAttr, modAttr, miscAttr, migrateFlag];
    if (miscMacroAttr) {
        fields.push(miscMacroAttr);
    }
    getAttrs(fields, function (v) {
        var miscVal = 0,
            formVal = 0,
            newFormula = {},
            setter = {},
            miscFormula = "";
        try {
            //TAS.debug("PFMigrate.migrateMoveIntIntoMacro: ",v);
            if (!parseInt(v[migrateFlag], 10)) {
                miscVal = parseInt(v[miscAttr], 10) || 0;
                formVal = parseInt(v[modAttr], 10) || 0;
                if (miscMacroAttr) {
                    miscFormula = v[miscMacroAttr];
                }
                newFormula = addNumberToMacro(v[macroAttr], formVal, miscFormula, miscVal);
                if (newFormula.macroText && newFormula.macroText !== v[macroAttr]) {
                    setter[macroAttr] = newFormula.macroText;
                    setter[modAttr] = newFormula.macroVal;
                }
                setter[migrateFlag] = 1;
                setter[miscAttr] = "";
                if (miscMacroAttr) {
                    setter[miscMacroAttr] = "";
                }
            }
        } catch (err) {
            _exportsLoaderTASTheAaronSheet2.default.error("PFMigrate.migrateMoveIntIntoMacro:" + migrateFlag, err);
        } finally {
            if (_underscore2.default.size(setter) > 0) {
                setAttrs(setter, _PFConst2.default.silentParams, done);
            } else {
                done();
            }
        }
    });
}
/**migrateHPMisc copies HP-misc into HP-formula-macro-text and HP-formula-mod 
 * This modifies the same fields aas migrateNPC so make sure to call them in sequence not at the same time!
 *@param {function} callback when done.
 */
function migrateHPMisc(callback) {
    //TAS.debug("at migrateHPMisc");
    migrateMoveIntIntoMacro(callback, "migrated_hp_misc", "HP-formula-macro-text", "HP-formula-mod", "", "HP-misc");
}
/**migrateHPMisc copies Max-Skill-Ranks-Misc2 into Max-Skill-Ranks-Misc
 *@param {function} callback when done.
 */
function migrateMaxSkills(callback) {
    //TAS.debug("at migrateMaxSkills");
    migrateMoveIntIntoMacro(callback, "migrated_maxskill_misc", "Max-Skill-Ranks-Misc", "Max-Skill-Ranks-mod", "", "Max-Skill-Ranks-Misc2");
}
/** updates NPC from pre v 1.00 to version 1.00 
 * @param {function} callback call when done
 * @param {number} oldversion the sheet attribute PFVersion.
 */
function migrateNPC(callback, oldversion) {
    var done = _underscore2.default.once(function () {
        _exportsLoaderTASTheAaronSheet2.default.debug("Leaving migrateNPC");
        if (typeof callback === "function") {
            callback();
        }
    }),
        migrateNPCConfig = function migrateNPCConfig(callback) {
        setAttrs({ 'normal_macro_show': 1,
            'use_traits': 0, 'use_racial_traits': 0, 'npc-compimport-show': 0 }, _PFConst2.default.silentParams, callback);
    },

    /* updates hp and hp|max, resets npc-hp as avg of hit dice only (npc-hd and npc-hd-num) ,
    * sets class-0-hd and class-0-level to values of  npc-hd2 and npc-hd-num2 
    * if undead then sets ability to CHA */
    migrateNPCHP = function migrateNPCHP(callback) {
        var done = _underscore2.default.once(function () {
            _exportsLoaderTASTheAaronSheet2.default.debug("Leaving PFMigrate.migrateNPCHP");
            if (typeof callback === "function") {
                callback();
            }
        });
        getAttrs(["HP-ability", "HP-ability-mod", "npc-type", "CON-mod", "CHA-mod", "total-hp", "level", "bab", "HP-formula-macro-text", "HP-formula-mod", "class-0-level", "class-1-level", "class-2-level", "class-3-level", "class-4-level", "class-5-level", "class-0-hp", "class-1-hp", "class-2-hp", "class-3-hp", "class-4-hp", "class-5-hp", "is_undead", "npc-hd-misc", "npc-hd-misc-mod", "npc-hd", "npc-hd-num", "npc-hd2", "npc-hd-num2", 'npc-bab'], function (v) {
            var isUndead = 0,
                abilityMod = 0,
                ability = '',
                classLevels = 0,
                classhd = 0,
                level = 0,
                totalhp = 0,
                hitdice = 0,
                hitdie = 0,
                basehp = 0,
                tempInt = 0,
                classhp = 0,
                classNum = 0,
                abilityModTot = 0,
                tempLvl = 0,
                temphp = 0,
                currLevel = 0,
                currHP = 0,
                setter = {},
                bab = 0,
                npcbab = 0,
                newbab = 0,
                newFormula = {},
                hdMiscVal = 0,
                currhpFormVal = 0;
            try {
                hitdice = parseInt(v['npc-hd-num'], 10) || 0;
                hitdie = parseInt(v["npc-hd"], 10) || 0;
                if (hitdice > 0 && hitdie > 0) {
                    setter["auto_calc_hp"] = "1";
                }
                classLevels = parseInt(v['npc-hd-num2'], 10) || 0;
                classhd = parseInt(v['npc-hd2'], 10) || 0;

                //get basic numbers
                isUndead = /undead/i.test(v["npc-type"]) || parseInt(v.is_undead, 10) || 0;
                setter["is_undead"] = isUndead;

                currLevel = parseInt(v.level, 10) || 0;
                currHP = parseInt(v.HP, 10) || 0;

                bab = parseInt(v.bab, 10) || 0;
                npcbab = parseInt(v['npc-bab'], 10) || 0;
                newbab = bab + npcbab;
                if (newbab !== bab) {
                    setter["bab"] = newbab;
                }

                abilityMod = isUndead ? parseInt(v["CHA-mod"], 10) || 0 : parseInt(v["HP-ability-mod"], 10) || 0;
                abilityModTot = abilityMod * (currLevel || hitdice);
                ability = isUndead ? '@{CHA-mod}' : '@{CON-mod}';
                setter["HP-ability"] = ability;
                setter["HP-ability-mod"] = abilityMod;

                //get the +xx portion and move to correct field.
                hdMiscVal = parseInt(v["npc-hd-misc-mod"], 10) || 0;
                currhpFormVal = parseInt(v["HP-formula-mod"], 10) || 0;
                if (hdMiscVal || v["HP-formula-macro-text"]) {
                    setter["npc-hd-misc"] = "";
                    setter["npc-hd-misc-mod"] = "";
                }
                if (hdMiscVal) {
                    hdMiscVal -= abilityModTot;
                }
                newFormula = addNumberToMacro(v["HP-formula-macro-text"], currhpFormVal, v["npc-hd-misc"], hdMiscVal);
                if (newFormula.macroText && newFormula.macroText !== v["HP-formula-macro-text"]) {
                    setter["HP-formula-macro-text"] = newFormula.macroText;
                    setter["HP-formula-mod"] = newFormula.macroVal;
                }
                basehp = PFUtils.getAvgHP(hitdice, hitdie);
                setter["NPC-HP"] = basehp;

                if (classLevels > 0) {
                    //should be class-0-name, if not, something is really wrong.
                    for (classNum = 0; classNum < 6; classNum++) {
                        tempInt = parseInt(v['class-' + classNum + '-level'], 10);
                        temphp = parseInt(v['class-' + classNum + '-hp'], 10);
                        if (!tempInt && !temphp) {
                            break;
                        }
                    }
                    if (classNum < 6) {
                        classhp = PFUtils.getAvgHP(classLevels, classhd);
                        setter['class-' + classNum + '-hp'] = classhp;
                        setter['class-' + classNum + '-level'] = classLevels;
                        setter['class-' + classNum + '-hd'] = classhd;
                    } else {
                        _exportsLoaderTASTheAaronSheet2.default.error("Cannot convert npc class hit dice, the class grid is full! class levels:" + classLevels + ", class hit die:" + classhd);
                        classLevels = 0;
                    }
                }
                totalhp = currHP + basehp + classhp;
                level = currLevel + classLevels + hitdice;
                if (totalhp !== currHP) {
                    setter['total-hp'] = totalhp;
                }
                if (level !== currLevel) {
                    setter['level'] = level;
                }
            } catch (err) {
                _exportsLoaderTASTheAaronSheet2.default.error("PFMigrate.MigrateNPC", err);
            } finally {
                setter["migrated_npc"] = 1;
                if (_underscore2.default.size(setter) > 0) {
                    setAttrs(setter, _PFConst2.default.silentParams, done);
                } else {
                    done();
                }
            }
        });
    },

    /* copies or appends sense to vision */
    migrateNPCSenses = function migrateNPCSenses(callback) {
        var done = function done() {
            if (typeof callback === "function") {
                callback();
            }
        };
        getAttrs(["senses", "vision", "character-description"], function (v) {
            var a = '',
                b = '',
                c = '',
                setter = {};
            try {
                a = v.senses || '';
                b = v.vision || '';
                if (a && b) {
                    c = a + ', ' + b;
                } else {
                    c = a || b;
                }
                if (c) {
                    setter.vision = c;
                }
                if (a) {
                    setter.senses = '';
                }
            } catch (err) {
                _exportsLoaderTASTheAaronSheet2.default.error("migrateNPCSenses", err);
            } finally {
                if (_underscore2.default.size(setter) > 0) {
                    setAttrs(setter, _PFConst2.default.silentParams, done);
                } else {
                    done();
                }
            }
        });
    };

    getAttrs(["migrated_npc", "is_npc"], function (v) {
        var isNPC = 0,
            isMigrated = 0,
            doneSub = _underscore2.default.after(3, done);
        try {
            isNPC = parseInt(v["is_npc"], 10) || 0;
            isMigrated = parseInt(v["migrated_npc"], 10) || 0;
            if (!isNPC) {
                if (!isMigrated) {
                    setAttrs({ "migrated_npc": 1 }, _PFConst2.default.silentParams, done);
                } else {
                    done();
                }
            }
            if (!isMigrated) {
                migrateNPCSenses(doneSub);
                migrateNPCConfig(doneSub);
                migrateNPCHP(doneSub);
            } else {
                done();
            }
        } catch (err) {
            _exportsLoaderTASTheAaronSheet2.default.error("PFMigrate.migrateNPC", err);
            done();
        }
    });
}
/** looks at dropdowns for cmb2 and ranged2 and if they are set to anything then check the 'show' checkboxes on config 
 * @param {function} callback call when done */
function migrateAltAttackGridrowFlags(callback) {
    var done = function done() {
        if (typeof callback === "function") {
            callback();
        }
    };
    getAttrs(["ranged_2_show", "cmb_2_show", "ranged2-ability", "CMB2-ability", "migratedAttack2row"], function (v) {
        var setter = {};
        try {
            if ((parseInt(v['migratedAttack2row'], 10) || 0) === 0) {
                if (PFUtils.findAbilityInString(v["ranged2-ability"]) && parseInt(v.ranged_2_show, 10) !== 1) {
                    setter.ranged_2_show = 1;
                }
                if (PFUtils.findAbilityInString(v["CMB2-ability"]) && parseInt(v.cmb_2_show, 10) !== 1) {
                    setter.cmb_2_show = 1;
                }
                setter["migratedAttack2row"] = 1;
            }
        } catch (err) {
            _exportsLoaderTASTheAaronSheet2.default.error("PFMigrate.migrateAltAttackGridrowFlags", err);
        } finally {
            if (_underscore2.default.size(setter) > 0) {
                setAttrs(setter, { silent: true }, done);
            } else {
                done();
            }
        }
    });
}
function migrateExperience(callback) {
    var done = _underscore2.default.once(function () {
        _exportsLoaderTASTheAaronSheet2.default.debug("leaving migrateExperience");
        if (typeof callback === "function") {
            callback();
        }
    });
    getAttrs(['migrated_experience', 'use_prestige_fame', 'use_hero_points', 'prestige', 'fame', 'hero-points', 'faction_notes'], function (v) {
        var mig = parseInt(v.migrated_experience, 10) || 0,
            setter = {};
        if (mig) {
            done();
            return;
        }
        if ((parseInt(v.prestige, 10) || 0 || parseInt(v.fame, 10) || 0 || v.faction_notes) && !parseInt(v.use_prestige_fame, 10)) {
            setter.use_prestige_fame = 1;
        }
        if ((parseInt(v['hero-points'], 10) || 0) && !parseInt(v.use_hero_points, 10)) {
            setter.use_hero_points = 1;
        }
        setter.skill_onetimecolumns_show = 1;
        setter.misc_skill_num_show = 1;
        setter.migrated_experience = 1;
        setter.custom_skill_num_show = 1;
        setAttrs(setter, { silent: true }, done);
    });
}
function migrateUsesSpellFlag(callback) {
    var done = _underscore2.default.once(function () {
        _exportsLoaderTASTheAaronSheet2.default.debug("leaving migrateUsesSpellFlag");
        if (typeof callback === "function") {
            callback();
        }
    }),
        setFlag = function setFlag() {
        setAttrs({ 'migrated_spellflag': 1 }, _PFConst2.default.silentParams, done);
    },
        tryTwoJustCountRows = function tryTwoJustCountRows() {
        getSectionIDs('repeating_spells', function (ids) {
            if (ids && _underscore2.default.size(ids) > 0) {
                setAttrs({ 'use_spells': 1 }, _PFConst2.default.silentParams, setFlag);
            } else {
                setAttrs({ 'use_spells': 0 }, _PFConst2.default.silentParams, setFlag);
            }
        });
    };
    getAttrs(['spellclass-0-level', 'spellclass-1-level', 'spellclass-2-level', 'use_spells', 'migrated_spellflag'], function (v) {
        var lvl1 = 0,
            lvl2 = 0,
            lvl3 = 0,
            usesSpells = 0,
            setter = {};
        try {
            usesSpells = parseInt(v.use_spells, 10) || 0;
            if ((parseInt(v.migrated_spellflag, 10) || 0) !== 1 && !usesSpells) {
                lvl1 = parseInt(v['spellclass-0-level'], 10) || 0;
                lvl2 = parseInt(v['spellclass-1-level'], 10) || 0;
                lvl3 = parseInt(v['spellclass-3-level'], 10) || 0;
                if (lvl1 || lvl2 || lvl3) {
                    usesSpells = 1;
                    setter['use_spells'] = 1;
                }
                if (lvl1 && lvl2 || lvl2 && lvl3 || lvl1 && lvl3) {
                    setter['spellclasses_multiclassed'] = 1;
                }
            }
        } catch (err) {
            _exportsLoaderTASTheAaronSheet2.default.error("FMigrate.migrateUsesSpellFlag", err);
        } finally {
            if (usesSpells) {
                setAttrs(setter, _PFConst2.default.silentParams, setFlag);
            } else {
                tryTwoJustCountRows();
            }
        }
    });
}
function migrateSize(callback) {
    getAttrs(['size', 'old_size', 'default_char_size'], function (v) {
        var size = parseInt(v.size, 10) || 0;
        if (v.old_size === 'x') {
            setAttrs({ 'old_size': size, 'default_char_size': size });
        }
    });
}
/** migrates repeating_item name, short-description, type, and weight to have item- prefix to avoid duplicate attributes
 * @param {function} callback call after finishing */
function migrateRepeatingItemAttributes(callback) {
    var done = function done() {
        if (typeof callback === "function") {
            callback();
        }
    };
    getAttrs(["migrated_repeating_item_attributes"], function (m) {
        var duplicateFields = ["weight", "hp", "hp_max"],
            // repeating fields can have duplicate attrbitues with other repeating lists, but not non-repeating list attrbiutes
        resetFields = ["qty", "qty_max"];
        if (parseInt(m["migrated_repeating_item_attributes"], 10)) {
            //TAS.debug"Duplicate repeating_item attributes already migrated; exiting");
            done();
            return;
        }
        getSectionIDs("repeating_item", function (ids) {
            var fields = [];
            if (!(ids && _underscore2.default.size(ids) > 0)) {
                setAttrs({ 'migrated_repeating_item_attributes': 1 }, _PFConst2.default.silentParams, done);
                return;
            }
            fields = _underscore2.default.reduce(ids, function (memo, id) {
                var prefix = "repeating_item_" + SWUtils.getRepeatingIDStr(id),
                    row = [];
                _underscore2.default.each(duplicateFields, function (field) {
                    row.push(prefix + field);
                });
                _underscore2.default.each(resetFields, function (field) {
                    row.push(prefix + field);
                });
                return memo.concat(row);
            }, []);

            getAttrs(fields, function (v) {
                var setter = {};
                try {
                    _underscore2.default.each(ids, function (id) {
                        var prefix = "repeating_item_" + SWUtils.getRepeatingIDStr(id);
                        duplicateFields.forEach(function (attr) {
                            var newInt = parseInt(v[prefix + attr], 10) || 0;
                            if (v[prefix + attr] && newInt !== 0) {
                                setter[prefix + "item-" + attr] = newInt;
                                setter[prefix + attr] = "";
                            }
                        });

                        //new default is 1, old was undefined 
                        if (isNaN(parseInt(v[prefix + "qty"], 10))) {
                            setter[prefix + "qty"] = 1;
                        }
                        if (isNaN(parseInt(v[prefix + "qty_max"], 10))) {
                            setter[prefix + "qty_max"] = 0;
                        }
                    });
                    setter["migrated_repeating_item_attributes"] = "1";
                } catch (err) {
                    _exportsLoaderTASTheAaronSheet2.default.error("migrateRepeatingItemAttributes", err);
                } finally {
                    _exportsLoaderTASTheAaronSheet2.default.debug("##### PFMigrate.migrateRepeatingItemAttributes setting  ", setter);
                    if (_underscore2.default.size(setter) > 0) {
                        setAttrs(setter, {}, done);
                    } else {
                        done();
                    }
                }
            });
        });
    });
}
function migrateAbilityListFlags(callback) {
    var done = _underscore2.default.once(function () {
        _exportsLoaderTASTheAaronSheet2.default.debug("leaving migrateAbilityListFlags");
        if (typeof callback === "function") {
            callback();
        }
    }),
        setFlag = _underscore2.default.after(5, function () {
        setAttrs({ 'migrated_abilityflags109': 1 }, _PFConst2.default.silentParams, done);
    });
    getAttrs(['migrated_abilityflags109', 'uses_feats', 'uses_traits', 'use_racial_traits', 'use_class_features', 'use_npc-spell-like-abilities'], function (vm) {
        if (!parseInt(vm['migrated_abilityflags109'], 10)) {
            getSectionIDs('repeating_npc-spell-like-abilities', function (ids) {
                if (ids && _underscore2.default.size(ids) > 0) {
                    setAttrs({ 'use_npc-spell-like-abilities': 1 }, _PFConst2.default.silentParams, setFlag);
                } else {
                    setAttrs({ 'use_npc-spell-like-abilities': 0 }, _PFConst2.default.silentParams, setFlag);
                }
            });
            getSectionIDs('repeating_feat', function (ids) {
                if (ids && _underscore2.default.size(ids) > 0) {
                    setAttrs({ 'use_feats': 1 }, _PFConst2.default.silentParams, setFlag);
                } else {
                    setAttrs({ 'use_feats': 0 }, _PFConst2.default.silentParams, setFlag);
                }
            });
            getSectionIDs('repeating_class-ability', function (ids) {
                if (ids && _underscore2.default.size(ids) > 0) {
                    setAttrs({ 'use_class_features': 1 }, _PFConst2.default.silentParams, setFlag);
                } else {
                    setAttrs({ 'use_class_features': 0 }, _PFConst2.default.silentParams, setFlag);
                }
            });
            getSectionIDs('repeating_trait', function (ids) {
                if (ids && _underscore2.default.size(ids) > 0) {
                    setAttrs({ 'use_traits': 1 }, _PFConst2.default.silentParams, setFlag);
                } else {
                    setAttrs({ 'use_traits': 0 }, _PFConst2.default.silentParams, setFlag);
                }
            });
            getSectionIDs('repeating_racial-trait', function (ids) {
                if (ids && _underscore2.default.size(ids) > 0) {
                    setAttrs({ 'use_racial_traits': 1 }, _PFConst2.default.silentParams, setFlag);
                } else {
                    setAttrs({ 'use_racial_traits': 0 }, _PFConst2.default.silentParams, setFlag);
                }
            });
        } else {
            done();
        }
    });
}
function migrateSpellPointFlag(callback, oldversion) {
    var done = _underscore2.default.once(function () {
        if (typeof callback === "function") {
            callback();
        }
    });
    _exportsLoaderTASTheAaronSheet2.default.debug("AT PFMigrate.migrateSpellPointFlag: oldversion:" + oldversion);
    if (oldversion > 1.18) {
        done();
    }
    getAttrs(['spellclass-0-spell-points-class', 'spellclass-0-spell-points-bonus', 'spellclass-0-spell-points-misc', 'spellclass-1-spell-points-class', 'spellclass-1-spell-points-bonus', 'spellclass-1-spell-points-misc', 'spellclass-2-spell-points-class', 'spellclass-2-spell-points-bonus', 'spellclass-2-spell-points-misc', 'use_spell_points'], function (v) {
        var usesPoints = parseInt('spellclass-0-spell-points-class', 10) || parseInt('spellclass-0-spell-points-bonus', 10) || parseInt('spellclass-0-spell-points-misc', 10) || parseInt('spellclass-1-spell-points-class', 10) || parseInt('spellclass-1-spell-points-bonus', 10) || parseInt('spellclass-1-spell-points-misc', 10) || parseInt('spellclass-2-spell-points-class', 10) || parseInt('spellclass-2-spell-points-bonus', 10) || parseInt('spellclass-2-spell-points-misc', 10);
        _exportsLoaderTASTheAaronSheet2.default.debug("PFMigrate.migrateSpellPointFlag found ", v);
        if (usesPoints && !parseInt(v.use_spell_points, 10)) {
            setAttrs({ 'uses_spell_points': 1 }, _PFConst2.default.silentParams, done);
        } else {
            done();
        }
    });
}

function migrateWhisperDropdowns(callback) {
    var done = _underscore2.default.once(function () {
        _exportsLoaderTASTheAaronSheet2.default.debug("leaving PFMigrate migrateConfigFlags");
        if (typeof callback === "function") {
            callback();
        }
    });
    getAttrs(['migrated_whispers', 'PC-whisper', 'NPC-whisper'], function (v) {
        var setter = {};
        try {
            if (!parseInt(v.migrated_whispers, 10)) {
                if (v['PC-whisper'] === '&nbsp;' || v['PC-whisper'] === ' ' || v['PC-whisper'] && v['PC-whisper'] !== '/w gm') {
                    setter['PC-whisper'] = '';
                }
                if (v['NPC-whisper'] === '&nbsp;' || v['NPC-whisper'] === ' ' || v['NPC-whisper'] && v['NPC-whisper'] !== '/w gm') {
                    setter['NPC-whisper'] = '';
                }
            }
        } catch (err) {
            _exportsLoaderTASTheAaronSheet2.default.error("PFMigrate.migrateWhispers", err);
        } finally {
            if (_underscore2.default.size(setter)) {
                setAttrs(setter, _PFConst2.default.silentParams, done);
            } else {
                done();
            }
        }
    });
}

function migrateConfigFlags(callback, oldversion) {
    var done = _underscore2.default.once(function () {
        _exportsLoaderTASTheAaronSheet2.default.debug("leaving PFMigrate migrateConfigFlags");
        if (typeof callback === "function") {
            callback();
        }
    });
    migrateNPC(function () {
        migrateHPMisc(done);
    });
    migrateRollTemplateImages();
    migrateAltAttackGridrowFlags();
    migrateSize();
    migrateUsesSpellFlag();
    migrateAbilityListFlags();
    migrateExperience();
    migrateSpellPointFlag(null, oldversion);
    migrateWhisperDropdowns();
}

function getAllMigrateFlags(v) {
    _exportsLoaderTASTheAaronSheet2.default.debug("at PFMigrate.getAllMigrateFlags");
    v = v || {};
    v['migrated_buffs'] = 1;
    v['migrated_effects'] = 1;
    v['classSkillsMigrated'] = 1;
    v['migrated_spells'] = 1;
    v['spellranges_migrated'] = 1;
    v['migrated_damage-multiplier'] = 1;
    v['migrated_experience'] = 1;
    v['migrated_spellflag'] = 1;
    v['migratedAttack2row'] = 1;
    v['migrated_npc'] = 1;
    v['migrated_worn_equipment'] = 1;
    v['migrated_repeating_item_attributes'] = 1;
    v['migrated_skill_macrosv1'] = 1;
    v['migrated_attack_macrosv1'] = 1;
    v['migrated_spells_macrosv1'] = 1;
    v['migrated_feature_macrosv109'] = 1;
    v['migrated_ability_macrosv112'] = 1;
    v['migrated_item_macrosv1'] = 1;
    v['migrated_hp_misc'] = 1;
    v['migrated_maxskill_misc'] = 1;
    v['migrated_featurelists_defaults'] = 1;
    v['migrated_attacklist_defaults111'] = 1;
    v['migrated_itemlist_defaults'] = 1;
    v['migrated_abilityflags109'] = 1;
    return v;
}
function setAllMigrateFlags(callback) {
    var done = _underscore2.default.once(function () {
        _exportsLoaderTASTheAaronSheet2.default.debug("leaving PFMigrate setAllMigrateFlags");
        if (typeof callback === "function") {
            callback();
        }
    });
    setAttrs(getAllMigrateFlags(), _PFConst2.default.silentParams, done);
}

_PFLog.PFConsole.log('   PFMigrate module loaded        ');
_PFLog.PFLog.modulecount++;

/***/ }),
/* 7 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.attackGridFields = undefined;
exports.updateDamage = updateDamage;
exports.applyConditions = applyConditions;
exports.updateAttack = updateAttack;
exports.setTopMacros = setTopMacros;
exports.resetCommandMacro = resetCommandMacro;
exports.migrate = migrate;
exports.recalculate = recalculate;

var _underscore = __webpack_require__(2);

var _underscore2 = _interopRequireDefault(_underscore);

var _PFLog = __webpack_require__(0);

var _exportsLoaderTASTheAaronSheet = __webpack_require__(1);

var _exportsLoaderTASTheAaronSheet2 = _interopRequireDefault(_exportsLoaderTASTheAaronSheet);

var _PFConst = __webpack_require__(3);

var _PFConst2 = _interopRequireDefault(_PFConst);

var _SWUtils = __webpack_require__(4);

var SWUtils = _interopRequireWildcard(_SWUtils);

var _PFUtils = __webpack_require__(5);

var PFUtils = _interopRequireWildcard(_PFUtils);

var _PFMigrate = __webpack_require__(6);

var PFMigrate = _interopRequireWildcard(_PFMigrate);

var _PFMenus = __webpack_require__(13);

var PFMenus = _interopRequireWildcard(_PFMenus);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var attackGridFields = exports.attackGridFields = {
    "melee": {
        "size": "size",
        "atk": "attk-melee",
        "buff": "buff_Melee-total",
        "abilityMod": "melee-ability-mod",
        "misc": "attk-melee-misc",
        "crit": "attk_melee_crit_conf",
        "attackmacro": "@{toggle_global_melee_macro_insert}",
        "damagemacro": "@{toggle_global_melee_damage_macro_insert}"
    },
    "melee2": {
        "size": "size",
        "atk": "attk-melee2",
        "buff": "buff_Melee-total",
        "abilityMod": "melee2-ability-mod",
        "misc": "attk-melee2-misc",
        "crit": "attk_melee2_crit_conf",
        "attackmacro": "@{toggle_global_melee_macro_insert}",
        "damagemacro": "@{toggle_global_melee_damage_macro_insert}"
    },
    "ranged": {
        "size": "size",
        "atk": "attk-ranged",
        "buff": "buff_Ranged-total",
        "abilityMod": "ranged-ability-mod",
        "misc": "attk-ranged-misc",
        "crit": "attk_ranged_crit_conf",
        "attackmacro": "@{toggle_global_ranged_macro_insert}",
        "damagemacro": "@{toggle_global_ranged_damage_macro_insert}"
    },
    "ranged2": {
        "size": "size",
        "atk": "attk-ranged2",
        "buff": "buff_Ranged-total",
        "abilityMod": "ranged2-ability-mod",
        "misc": "attk-ranged2-misc",
        "crit": "attk_ranged2_crit_conf",
        "attackmacro": "@{toggle_global_ranged_macro_insert}",
        "damagemacro": "@{toggle_global_ranged_damage_macro_insert}"
    },
    "CMB": {
        "size": "CMD-size",
        "atk": "CMB",
        "buff": "buff_Melee-total",
        "abilityMod": "CMB-ability-mod",
        "misc": "attk-CMB-misc",
        "crit": "attk_cmb_crit_conf",
        "attackmacro": "@{toggle_global_cmb_macro_insert}",
        "damagemacro": "@{toggle_global_cmb_damage_macro_insert}"
    },
    "CMB2": {
        "size": "CMD-size",
        "atk": "CMB2",
        "buff": "buff_Melee-total",
        "abilityMod": "CMB2-ability-mod",
        "misc": "attk-CMB2-misc",
        "crit": "attk_cmb2_crit_conf",
        "attackmacro": "@{toggle_global_cmb_macro_insert}",
        "damagemacro": "@{toggle_global_cmb_damage_macro_insert}"
    }
};
var attkpenaltyAddToFields = ["condition-Invisible", "acp-attack-mod", "condition-Drained"],
    attkpenaltySubtractFromFields = ["condition-Dazzled", "condition-Entangled", "condition-Grappled", "condition-Fear", "condition-Prone", "condition-Sickened", "condition-Wounds"],
    attkpenaltySumRow = ["attk-penalty"].concat(attkpenaltyAddToFields),
    groupMapForMenu = { '0': 'none', '@{attk-melee}': 'melee', '@{attk-melee2}': 'melee',
    '@{attk-ranged}': 'ranged', '@{attk-ranged2}': 'ranged2',
    '@{CMB}': 'combat-maneuver-bonus-abbrv', '@{CMB2}': 'combat-maneuver-bonus-abbrv' };

/** updates DMG-mod
 * @param {function} callback optional call when done
 * @param {boolean} silently optional if true call setAttrs with PFConst.silentParams
 */
function updateDamage(callback, silently) {
    SWUtils.updateRowTotal(["DMG-mod", "buff_DMG-total"], 0, ["condition-Sickened"], false, callback, silently);
}
/** updates the attk-penalty for attacks based on conditions including wearing armor you are not proficient in 
 *@param {function} callback optional call when done
 *@param {boolean} silently optional if true call setAttrs with PFConst.silentParams
 *@param {eventInfo} eventInfo unused eventInfo from on method
 */
function applyConditions(callback, silently, eventInfo) {
    var done = _underscore2.default.once(function () {
        if (typeof callback === "function") {
            callback();
        }
    });
    SWUtils.updateRowTotal(attkpenaltySumRow, 0, attkpenaltySubtractFromFields, false, done, silently);
}
/** updateAttack - updates one row of attack grid (left most column in grid)
 * Updates the attack type totals at top of attack page for one row of grid
 * @param {string} attype = key for attackGridFields to indicate which row from attack grid
 * @param {eventInfo } eventInfo unused
 * @param {function} callback optional call when done
 * @param {boolean} silently optional if true call setAttrs with PFConst.silentParams
 */
function updateAttack(attype, eventInfo, callback, silently) {
    var done = _underscore2.default.once(function () {
        if (typeof callback === "function") {
            callback();
        }
    });
    if (attackGridFields[attype]) {
        SWUtils.updateRowTotal([attackGridFields[attype].atk, "bab", "attk-penalty", attackGridFields[attype].abilityMod, attackGridFields[attype].misc, attackGridFields[attype].size, attackGridFields[attype].buff], 0, [], false, done, silently);
    } else {
        _exportsLoaderTASTheAaronSheet2.default.error("PFAttackGrid.updateAttack attack grid fields do not exist for: " + attype);
        done();
    }
}

function getTopMacros(setter, v) {
    var header = "{{row01= **^{base-attacks}** }} {{row02=[^{melee}](~@{character_id}|Melee-Attack-Roll) [^{ranged}](~@{character_id}|Ranged-Attack-Roll) [^{combat-maneuver-bonus-abbrv}](~@{character_id}|CMB-Check) [^{melee2}](~@{character_id}|Melee2-Attack-Roll)",
        npcHeader = "{{row01= **^{base-attacks}** }} {{row02=[^{melee}](~@{character_id}|NPC-Melee-Attack-Roll) [^{ranged}](~@{character_id}|NPC-Ranged-Attack-Roll) [^{combat-maneuver-bonus-abbrv}](~@{character_id}|NPC-CMB-Check) [^{melee2}](~@{character_id}|NPC-Melee2-Attack-Roll)",
        extraattacks = "",
        npcextraattacks = "",
        ranged2BaseAttacks = " [^{ranged2}](~@{character_id}|Ranged2-Attack-Roll)",
        cmb2BaseAttacks = " [^{combat-maneuver-bonus-abbrv2}](~@{character_id}|CMB2-Check)",
        npcranged2BaseAttacks = " [^{ranged2}](~@{character_id}|npc-Ranged2-Attack-Roll)",
        npccmb2BaseAttacks = " [^{combat-maneuver-bonus-abbrv2}](~@{character_id}|npc-CMB2-Check)";
    try {
        _exportsLoaderTASTheAaronSheet2.default.debug("at PFAttackGrid.getTopMacros", v);
        setter = setter || {};
        if (parseInt(v.ranged_2_show, 10)) {
            extraattacks += ranged2BaseAttacks;
            npcextraattacks += npcranged2BaseAttacks;
        }
        if (parseInt(v.cmb_2_show, 10)) {
            extraattacks += cmb2BaseAttacks;
            npcextraattacks += npccmb2BaseAttacks;
        }
        header += extraattacks + " }}";
        npcHeader += npcextraattacks + " }}";
        //TAS.debug("PFAtackGrid.getTopMenus new macros are: ", header, npcHeader);
        if (v.attacks_header_macro !== header || v["NPC-attacks_header_macro"] !== npcHeader) {
            setter.attacks_header_macro = header;
            setter["NPC-attacks_header_macro"] = npcHeader;
        }
    } catch (err) {
        _exportsLoaderTASTheAaronSheet2.default.error("PFAttackGrid.getTopMacros", err);
    } finally {
        return setter;
    }
}
function setTopMacros(callback) {
    var done = _underscore2.default.once(function () {
        if (typeof callback === "function") {
            callback();
        }
    });
    //TAS.debug("at PFAttackGrid.setTopMacros");
    getAttrs(["attacks_header_macro", "NPC-attacks_header_macro", "ranged_2_show", "cmb_2_show"], function (v) {
        var setter = {};
        getTopMacros(setter, v);
        if (_underscore2.default.size(setter) && (v.attacks_header_macro !== setter.attacks_header_macro || v["NPC-attacks_header_macro"] !== setter["NPC-attacks_header_macro"])) {
            setAttrs(setter, _PFConst2.default.silentParams, done);
        } else {
            done();
        }
    });
}

function resetCommandMacro(callback) {
    var done = _underscore2.default.after(2, function () {
        if (typeof callback === "function") {
            callback();
        }
    });
    _exportsLoaderTASTheAaronSheet2.default.debug("at PFAttackGrid.resetCommandMacro");
    PFMenus.resetOneCommandMacro('attacks', false, done, " @{attacks_header_macro}", groupMapForMenu);
    PFMenus.resetOneCommandMacro('attacks', true, done, " @{NPC-attacks_header_macro}", groupMapForMenu);
}

function migrate(callback, oldversion) {
    var done = function done() {
        _exportsLoaderTASTheAaronSheet2.default.debug("leaving PFAttackGrid.migrate");
        if (typeof callback === "function") {
            callback();
        }
    };
    PFMigrate.migrateAltAttackGridrowFlags();
    done();
}
/** recalculates all write-to fields in module 
 * @param {function} callback optional call when done
 * @param {boolean} silently optional if true call setAttrs with PFConst.silentParams
 * @param {number} oldversion the version upgrading from 
 */
function recalculate(callback, silently, oldversion) {
    var done = function done() {
        _exportsLoaderTASTheAaronSheet2.default.debug("leaving PFAttackGrid.recalculate");
        if (typeof callback === "function") {
            callback();
        }
    },
        doneAttack = _underscore2.default.after(7, done),
        callUpdateAttacksAndDamage = _underscore2.default.once(function () {
        _underscore2.default.each(attackGridFields, function (attrMap, attack) {
            updateAttack(attack, null, doneAttack, silently);
        });
        updateDamage(doneAttack, silently);
    }),
        callApplyConditions = _underscore2.default.once(function () {
        applyConditions(callUpdateAttacksAndDamage, silently);
    });
    //TAS.debug"At PFAttackGrid.recalculate");
    migrate(callApplyConditions, oldversion);
    setTopMacros();
}
function registerEventHandlers() {
    _underscore2.default.each(attackGridFields, function (attackFields, attack) {
        on("change:bab change:" + attackFields.size, _exportsLoaderTASTheAaronSheet2.default.callback(function eventBABSizeAbilityModchange(eventInfo) {
            _exportsLoaderTASTheAaronSheet2.default.debug("caught " + eventInfo.sourceAttribute + " event: " + eventInfo.sourceType);
            updateAttack(attack);
        }));
        on("change:" + attackFields.misc, _exportsLoaderTASTheAaronSheet2.default.callback(function eventAttackMisc(eventInfo) {
            if (eventInfo.sourceType === "player" || eventInfo.sourceType === "api") {
                _exportsLoaderTASTheAaronSheet2.default.debug("caught " + eventInfo.sourceAttribute + " event: " + eventInfo.sourceType);
                updateAttack(attack);
            }
        }));
        on("change:attk-penalty change:" + attackFields.abilityMod + " change:" + attackFields.buff, _exportsLoaderTASTheAaronSheet2.default.callback(function eventAttackPenalty(eventInfo) {
            if (eventInfo.sourceType === "sheetworker") {
                _exportsLoaderTASTheAaronSheet2.default.debug("caught " + eventInfo.sourceAttribute + " event: " + eventInfo.sourceType);
                updateAttack(attack);
            }
        }));
    });
    on("change:buff_Melee-total", _exportsLoaderTASTheAaronSheet2.default.callback(function meleebuffEventMelee(eventInfo) {
        _exportsLoaderTASTheAaronSheet2.default.debug("caught " + eventInfo.sourceAttribute + " event: " + eventInfo.sourceType);
        if (eventInfo.sourceType === "sheetworker") {
            updateAttack('melee', eventInfo);
            updateAttack('melee2', eventInfo);
            updateAttack('CMB', eventInfo);
            updateAttack('CMB2', eventInfo);
        }
    }));
    on("change:buff_Ranged-total", _exportsLoaderTASTheAaronSheet2.default.callback(function meleebuffEventRanged(eventInfo) {
        _exportsLoaderTASTheAaronSheet2.default.debug("caught " + eventInfo.sourceAttribute + " event: " + eventInfo.sourceType);
        if (eventInfo.sourceType === "sheetworker") {
            updateAttack('ranged', eventInfo);
            updateAttack('ranged2', eventInfo);
        }
    }));
    on("change:acp-attack-mod", _exportsLoaderTASTheAaronSheet2.default.callback(function PFAttackGrid_applyConditions(eventInfo) {
        _exportsLoaderTASTheAaronSheet2.default.debug("caught " + eventInfo.sourceAttribute + " event: " + eventInfo.sourceType);
        applyConditions();
    }));
    on("change:cmb_2_show change:ranged_2_show", _exportsLoaderTASTheAaronSheet2.default.callback(function displayRangedOrCMB2(eventInfo) {
        _exportsLoaderTASTheAaronSheet2.default.debug("caught " + eventInfo.sourceAttribute + " event: " + eventInfo.sourceType);
        if (eventInfo.sourceType === "player" || eventInfo.sourceType === "api") {
            setTopMacros();
        }
    }));
}
registerEventHandlers();
_PFLog.PFConsole.log('   PFAttackGrid module loaded     ');
_PFLog.PFLog.modulecount++;

/***/ }),
/* 8 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.setDropdownValue = setDropdownValue;
exports.setRepeatingDropdownValue = setRepeatingDropdownValue;
exports.setRowIds = setRowIds;
exports.registerEventHandlers = registerEventHandlers;

var _underscore = __webpack_require__(2);

var _underscore2 = _interopRequireDefault(_underscore);

var _PFLog = __webpack_require__(0);

var _exportsLoaderTASTheAaronSheet = __webpack_require__(1);

var _exportsLoaderTASTheAaronSheet2 = _interopRequireDefault(_exportsLoaderTASTheAaronSheet);

var _SWUtils = __webpack_require__(4);

var SWUtils = _interopRequireWildcard(_SWUtils);

var _PFConst = __webpack_require__(3);

var _PFConst2 = _interopRequireDefault(_PFConst);

var _PFUtils = __webpack_require__(5);

var PFUtils = _interopRequireWildcard(_PFUtils);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

/****************************ASYNCRHOUNOUS UTILITIES ***********************************
 ***************************************************************************************/
/* setDropdownValue
 * Looks at a dropdown selected value, finds the matching attribute value, and then
 * sets the writeFields with that number.
 *
 * @readField {string} = the dropdpown field
 * @writeFields {string or Array} = One string or an array of strings that are fields to write the value to
 * @callback {function} optional = if we need to update the field, call this function
 *       callback(newvalue,oldvalue,ischanged)
 *  If writeField is a string not an Array, then set old value as 2nd param (could be NaN)
 */
function setDropdownValue(readField, writeFields, callback, silently) {
    SWUtils.setDropdownValue(readField, writeFields, PFUtils.findAbilityInString, callback, silently);
}
/** calls setDropdownValue for a dropdown in a repeating section
 *@param {string} section the string between "repeating_" and "_<id>"
 *@param {string} id optional- the id of this row, blank if in context of the current row 
 *@param {string} from the attribute name of the dropdown , string after "repeating_section_id_"
 *@param {string} to the attribute to write to, string after "repeating_section_id_"
 *@param {function} callback - the function passed to setDropdownValue as its callback, that function calls it
 */
function setRepeatingDropdownValue(section, id, from, to, callback, silently) {
    var idStr = SWUtils.getRepeatingIDStr(id),
        prefix = "repeating_" + section + "_" + idStr;
    setDropdownValue(prefix + from, prefix + to, callback, silently);
}
/** setRowIds
 * sets the ID fields and new_flag fields for all rows in the section
 * @param {string} section  = the fieldset name after "section_"
 */
function setRowIds(section) {
    getSectionIDs("repeating_" + section, function (ids) {
        var setter = {};
        _underscore2.default.each(ids, function (id) {
            setter["repeating_" + section + "_" + id + "_row_id"] = id;
        });
        setAttrs(setter);
    });
}
function registerEventHandlers() {
    //REPEATING SECTIONS set IDs
    _underscore2.default.each(_PFConst2.default.repeatingSections, function (section) {
        var eventToWatch = "change:repeating_" + section + ":ids-show";
        on(eventToWatch, _exportsLoaderTASTheAaronSheet2.default.callback(function eventCheckIsNewRow(eventInfo) {
            var setter = {},
                id;
            _exportsLoaderTASTheAaronSheet2.default.debug("caught " + eventInfo.sourceAttribute + " event: " + eventInfo.sourceType);
            if (eventInfo.sourceType === "player" || eventInfo.sourceType === "api") {
                id = SWUtils.getRowId(eventInfo.sourceAttribute);
                setter["repeating_" + section + "_" + id + "_row_id"] = id;
                setAttrs(setter, _PFConst2.default.silentParams);
            }
        }));
    });
}

registerEventHandlers();
_PFLog.PFConsole.log('   PFUtilsAsync module loaded     ');
_PFLog.PFLog.modulecount++;

/***/ }),
/* 9 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.migrateMacro = migrateMacro;
exports.migrateRepeatingMacros = migrateRepeatingMacros;
exports.migrateRepeatingMacrosMult = migrateRepeatingMacrosMult;
exports.migrateStaticMacro = migrateStaticMacro;
exports.migrateStaticMacros = migrateStaticMacros;
exports.migrateStaticMacrosMult = migrateStaticMacrosMult;

var _underscore = __webpack_require__(2);

var _underscore2 = _interopRequireDefault(_underscore);

var _PFLog = __webpack_require__(0);

var _exportsLoaderTASTheAaronSheet = __webpack_require__(1);

var _exportsLoaderTASTheAaronSheet2 = _interopRequireDefault(_exportsLoaderTASTheAaronSheet);

var _SWUtils = __webpack_require__(4);

var SWUtils = _interopRequireWildcard(_SWUtils);

var _PFConst = __webpack_require__(3);

var _PFConst2 = _interopRequireDefault(_PFConst);

var _PFUtils = __webpack_require__(5);

var PFUtils = _interopRequireWildcard(_PFUtils);

var _PFUtilsAsync = __webpack_require__(8);

var PFUtilsAsync = _interopRequireWildcard(_PFUtilsAsync);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

/** splitMacro Splits macro into {{x=y}} components
 * and @{attr} if at top level (not inside a {{x=@{attr}}})
 * @param {string} macrostr the macro-text from a repeating row
 * @returns {Array} of strings comprising macro
 */
function splitMacro(macrostr) {
    var splitted, newsplit, lastclosing;
    if (!macrostr) {
        return "";
    }
    splitted = macrostr.split(/(?=\{\{)/);
    splitted = SWUtils.trimBoth(splitted);
    newsplit = _underscore2.default.reduce(splitted, function (memo, val) {
        try {
            if (val.slice(0, 2) === '{{') {
                if (val.slice(-2) === '}}') {
                    memo.push(val);
                } else {
                    lastclosing = val.lastIndexOf('}}');
                    if (lastclosing < 0) {
                        _exportsLoaderTASTheAaronSheet2.default.error("error! no closing brackets for ", val);
                        //just fix it
                        val += '}}';
                        lastclosing = val.lastIndexOf('}}');
                        memo.push(val);
                    } else {
                        memo.push(SWUtils.trimBoth(val.slice(0, lastclosing + 2)));
                        memo = memo.concat(SWUtils.trimBoth(SWUtils.trimBoth(val.slice(lastclosing + 2)).replace('&amp;', '&').split(/(?=[\@\&]\{)/)));
                    }
                }
            } else {
                val = val.replace('&amp;', '&');
                memo = memo.concat(SWUtils.trimBoth(val.split(/(?=[\@\&]\{)/)));
            }
        } catch (err) {
            _exportsLoaderTASTheAaronSheet2.default.error("splitmacro", err);
        } finally {
            return memo;
        }
    }, []);
    return newsplit;
}
/** arrayToMap Splits array of {{x=y}} to mapping of '{{x=': 'y}}' 
 * and splits &{template:templatename} on the :
 * unless the item has no equals sign then the value = map.
 *    e.g. @{option}  is returned as @{option}=@{option}
 *@param {Array} currArray of strings for rolltemplate {{key=value}}
 *@returns {jsobj} of each array entry split in half
 */
function arrayToMap(currArray, removeWhisper) {
    return _underscore2.default.reduce(currArray, function (memo, val) {
        var spliteq = val.split('=');
        if (val) {
            if (spliteq.length === 2) {
                memo[spliteq[0] + '='] = spliteq[1];
            } else if (spliteq.length > 2) {
                memo[spliteq[0] + '='] = _underscore2.default.rest(spliteq, 1).join('=');
            } else if (/template:/.test(val)) {
                memo['&{template:'] = val.slice(val.indexOf(':') + 1);
            } else if (!(removeWhisper && /whisper/i.test(val))) {
                memo[val] = val;
            }
        }
        return memo;
    }, {});
}
/**mergeMacroMaps merges currMap into defaultMap 
 *@param {jsobj} currMap map of the current macro text on a sheet created by arrayToMap:
                            {rollqueryleft: rollqueryright}
 *@param {jsobj} defaultMap {rollqueryleft : {
                            current:rollqueryright, 
                            old:[  oldrollqueryright1, oldrollqueryright2 ], 
                            replacements:[  { from: fromstring, to:tostring}, {from:fromstring, to:tostring}] 
                            }
                        }
 *@param {Array} sameAsKeys array of strings of keys in defaultMap where value.current is the same string as the key
 *@returns {Array} of strings for macro entries.
 */
function mergeMacroMaps(currMap, defaultMap, sameAsKeys) {
    var currKeys = [],
        newKeys = [],
        customKeys = [],
        newArray = [],
        customizedMap = {},
        userDefinedMap = {};
    try {
        currKeys = _underscore2.default.keys(currMap).sort();
        customKeys = _underscore2.default.difference(currKeys, _underscore2.default.keys(defaultMap)).sort();
        if (!sameAsKeys || _underscore2.default.size(sameAsKeys) === 0) {
            sameAsKeys = _underscore2.default.reduce(defaultMap, function (memo, val, key) {
                if (val.current === key) {
                    memo.push(key);
                }
                return memo;
            }, []).sort();
        }
        //TAS.debug("at mergeMacroMaps comparing: ",currMap,defaultMap,sameAsKeys);
        customizedMap = _underscore2.default.chain(defaultMap).pick(function (compareobj, defaultKey) {
            //intersection
            return _underscore2.default.indexOf(currKeys, defaultKey, true) >= 0;
        }).omit(function (compareobj, defaultKey) {
            //difference
            return _underscore2.default.indexOf(sameAsKeys, defaultKey, true) >= 0;
        }).omit(function (compareobj, defaultKey) {
            //user val = new
            return compareobj.current === currMap[defaultKey];
        }).omit(function (compareobj, defaultKey) {
            //user val = one of old vals
            return !compareobj.old || _underscore2.default.indexOf(compareobj.old, currMap[defaultKey]) >= 0;
        }).mapObject(function (compareobj, defaultKey) {
            //only customized values left, if any
            var newString = '';
            try {
                newString = currMap[defaultKey];
                if (newString) {
                    if (compareobj.replacements) {
                        newString = _underscore2.default.reduce(compareobj.replacements, function (memo, replacer) {
                            return memo.replace(replacer.from, replacer.to);
                        }, newString);
                    }
                    newString = defaultKey + newString;
                }
            } catch (erri) {
                _exportsLoaderTASTheAaronSheet2.default.error('mergeMacroMaps  erri on ' + defaultKey, erri);
            } finally {
                return newString;
            }
        }).value();

        //extra stuff from user.
        userDefinedMap = _underscore2.default.reduce(customKeys, function (memo, currKey) {
            if (currKey !== currMap[currKey]) {
                memo[currKey] = currKey + currMap[currKey];
            } else {
                memo[currKey] = currKey;
            }
            return memo;
        }, {});

        //TAS.info("joining ",defaultMap,customizedMap,userDefinedMap);
        //array in order of defaultMap, add in custom values, then turn to array
        newArray = _underscore2.default.chain(defaultMap).mapObject(function (compareobj, defaultKey) {
            if (_underscore2.default.indexOf(sameAsKeys, defaultKey) >= 0) {

                return defaultKey;
            }
            return defaultKey + compareobj.current;
        }).extend(customizedMap).extend(userDefinedMap).values().value();
    } catch (err3) {
        _exportsLoaderTASTheAaronSheet2.default.error("getNewArray outer error", err3);
    } finally {
        return newArray;
    }
}
/**migrateMacro makes sure one macro is up to date, synchronous.
 *@param {string} currMacro current macro from sheet
 *@param {string} defaultMacro default / new correct macro string
 *@param {{string : {current:string,  old:[  string ],  replacements:[  { from: string, to:string}]  }
                        }} defaultMap {rollqueryleft : {
                            current:rollqueryright, 
                            old:[  oldrollqueryright1, oldrollqueryright2 ], 
                            replacements:[  { from: fromstring, to:tostring}, {from:fromstring, to:tostring}] 
                            }
                        }
 *@param {[string]} deleteArray array of strings to just delete from the currMacro.
 *@param {[string]} sameAsKeys array of strings of keys in defaultMap where value.current is the same string as the key
 *@returns {string} one of 3 values:
            null if caller should NOT update macro, 
            "BLANK" if caller should update macro attribute with "" to reset it.
            any other string: the new macro (if the user customized it, then this is the new one with updates)
 */
function migrateMacro(currMacro, defaultMacro, defaultMap, deleteArray, sameAsKeys) {
    var currMacroArray,
        currMacroMap,
        newMacroArray,
        newMacroString = null;
    try {
        if (currMacro !== defaultMacro) {
            if (deleteArray && Array.isArray(deleteArray)) {
                _underscore2.default.each(deleteArray, function (strToDelete) {
                    currMacro = currMacro.replace(strToDelete, '');
                });
            }
            if (currMacro === defaultMacro) {
                newMacroString = null;
            } else {
                currMacroArray = splitMacro(currMacro);
                currMacroArray = _underscore2.default.reject(currMacroArray, function (val) {
                    return !val || val === "0" || val === "1" || val.indexOf("undefined") >= 0;
                });
                currMacroMap = arrayToMap(currMacroArray, true);
                //TAS.info("migrateMacro calling map with ",currMacroMap,defaultMap,sameAsKeys);
                newMacroArray = mergeMacroMaps(currMacroMap, defaultMap, sameAsKeys);
                //TAS.debug("migrateMacro received back ",newMacroArray);
                newMacroArray = _underscore2.default.reject(newMacroArray, function (val) {
                    return !val || val === "0" || val === "1" || val.indexOf("undefined") >= 0;
                });
                newMacroString = newMacroArray.join(' ');
                if (newMacroString === defaultMacro) {
                    newMacroString = 'BLANK';
                }
            }
        }
    } catch (err) {
        _exportsLoaderTASTheAaronSheet2.default.error("PFMacros.migrateMacro error on " + currMacro, err);
    } finally {
        return newMacroString;
    }
}
/** migrateRepeatingMacros updates all macros in the section 
 * @param {function} callback after calling setAttrs with the new macros
 * @param {string} section  name after "repeating_"
 * @param {string} fieldname  the attribute name containing the macro after "id_"
 * @param {string} defaultMacro the current Macro in the page
 * @param {jsobj} defaultMap map of "{{rolltemplatekey=" to right side "var}}"
        {rollqueryleft : {
            current:rollqueryright, 
            old:[  oldrollqueryright1, oldrollqueryright2 ], 
            replacements:[  { from: fromstring, to:tostring}, {from:fromstring, to:tostring}] 
            }
        }
 * @param {Array} deleteArray  array of strings of old rolltemplate entries that are not used (entire entry not just left side )
 */
function migrateRepeatingMacros(callback, section, fieldname, defaultMacro, defaultMap, deleteArray, whisper) {
    var done = _underscore2.default.once(function () {
        _exportsLoaderTASTheAaronSheet2.default.debug("leaving migrateRepeatingMacros for " + section + ", " + fieldname);
        if (typeof callback === "function") {
            callback();
        }
    });
    whisper = whisper || '';
    if (whisper) {
        whisper += ' ';
    }
    getSectionIDs('repeating_' + section, function (ids) {
        var fields = [],
            prefix = 'repeating_' + section + '_';
        if (!ids || _underscore2.default.size(ids) === 0) {
            done();
            return;
        }
        _underscore2.default.each(ids, function (id) {
            fields.push(prefix + id + '_' + fieldname);
        });
        getAttrs(fields, function (v) {
            var setter = {},
                sameAsKeys = [];
            sameAsKeys = _underscore2.default.reduce(defaultMap, function (memo, val, key) {
                if (val.current === key) {
                    memo.push(key);
                }
                return memo;
            }, []).sort();
            setter = _underscore2.default.reduce(v, function (memo, currMacro, key) {
                var newMacro = "";
                try {
                    if (!currMacro) {
                        //setting to blank does not seem to work, it keeps coming back as undefined, so set to default.
                        memo[key] = whisper + defaultMacro;
                    } else {
                        currMacro = PFUtils.removeWhisperFromMacro(currMacro);
                        newMacro = migrateMacro(currMacro, defaultMacro, defaultMap, deleteArray, sameAsKeys);
                        if (newMacro === "BLANK") {
                            memo[key] = "";
                        } else if (newMacro) {
                            memo[key] = whisper + newMacro;
                        }
                    }
                } catch (innererr) {
                    _exportsLoaderTASTheAaronSheet2.default.error("migrateRepeatingMacros error migrating " + key, innererr);
                } finally {
                    return memo;
                }
            }, {});
            if (_underscore2.default.size(setter) > 0) {
                setAttrs(setter, {}, done);
            } else {
                done();
            }
        });
    });
}
/**Calls migrateRepeatingMacros once for each version of the parameters in replaceArray
 * each parameter below potentially has the word 'REPLACE' in it, for each element in replaceArray,
 * replace the word REPLACE with that element.
 * This is not the most efficient, but it was alot easier than rewriting migrateRepeatingMacros 
 *@param {function} callback after calling setAttrs with the new macros
 *@param {string} section  name after "repeating_"
 *@param {string} fieldname  the attribute name containing the macro after "id_"
 *@param {string} defaultMacro the current Macro in the page
 *@param {jsobj} defaultMap map of "{{rolltemplatekey=" to right side "var}}"
        {rollqueryleft : {
            current:rollqueryright, 
            old:[  oldrollqueryright1, oldrollqueryright2 ], 
            replacements:[  { from: fromstring, to:tostring}, {from:fromstring, to:tostring}] 
            }
        }
 *@param {Array} deleteArray array of strings of old rolltemplate entries that are not used (entire entry not just left side )
 *@param {Array} replaceArray array of strings to replace the word 'REPLACE' with that are found in the other params.
 */
function migrateRepeatingMacrosMult(callback, section, fieldname, defaultMacro, defaultMap, deleteArray, replaceArray, whisper) {
    var done = _underscore2.default.once(function () {
        _exportsLoaderTASTheAaronSheet2.default.debug("leaving migrateRepeatingMacrosMult for " + section + "_" + fieldname);
        if (typeof callback === "function") {
            callback();
        }
    }),
        fieldnames = {},
        defaultMacros = {},
        defaultMaps = {},
        deleteArrays = {},
        numTimes,
        doneOnce;
    try {
        if (!(replaceArray && Array.isArray(replaceArray) && _underscore2.default.size(replaceArray) > 0)) {
            _exportsLoaderTASTheAaronSheet2.default.warn("migrateRepeatingMacrosMult no replace array for " + section + ", " + fieldname);
            done();
            return;
        }
        numTimes = _underscore2.default.size(replaceArray);
        doneOnce = _underscore2.default.after(numTimes, done);
        //create new mappings of fieldname, defaultMacro, defaultMap, deleteArray
        //one new version of each per element in replaceArray.
        fieldnames = _underscore2.default.reduce(replaceArray, function (m, val) {
            m[val] = fieldname.replace(/REPLACE/g, val);
            return m;
        }, {});
        defaultMacros = _underscore2.default.reduce(replaceArray, function (m, val) {
            m[val] = defaultMacro.replace(/REPLACE/g, val);
            return m;
        }, {});
        defaultMaps = _underscore2.default.reduce(replaceArray, function (replaceMemo, val) {
            var newMap = {};
            try {
                newMap = _underscore2.default.reduce(defaultMap, function (m, currobj, key) {
                    var newkey,
                        newobj = {};
                    try {
                        newkey = key.replace(/REPLACE/g, val);
                        newobj.current = currobj.current.replace(/REPLACE/g, val);
                        if (currobj.old) {
                            newobj.old = _underscore2.default.map(currobj.old, function (oldmacro) {
                                return oldmacro.replace(/REPLACE/g, val);
                            });
                        }
                        if (currobj.replacements) {
                            newobj.replacements = _underscore2.default.map(currobj.replacements, function (replacementobj) {
                                var newreplacement = {};
                                newreplacement.from = replacementobj.from.replace(/REPLACE/g, val);
                                newreplacement.to = replacementobj.to.replace(/REPLACE/g, val);
                                return newreplacement;
                            });
                        }
                        m[newkey] = newobj;
                    } catch (innererr) {
                        _exportsLoaderTASTheAaronSheet2.default.error("migrateRepeatingMacrosMult, error creating defaultMaps: replaceval" + val + ", key=" + key + ", matching obj:", currobj);
                    } finally {
                        return m;
                    }
                }, {});
                replaceMemo[val] = newMap;
            } catch (errineer2) {
                _exportsLoaderTASTheAaronSheet2.default.error("error building map of defaultMap : replaceval:" + val);
            } finally {
                return replaceMemo;
            }
        }, {});
        if (deleteArray) {
            deleteArrays = _underscore2.default.reduce(replaceArray, function (m, val) {
                m[val] = _underscore2.default.map(deleteArray, function (delstr) {
                    return delstr.replace(/REPLACE/g, val);
                });
                return m;
            }, {});
        }
        _underscore2.default.each(replaceArray, function (val) {
            var delArray;
            try {
                if (fieldnames[val] && defaultMacros[val] && defaultMaps[val]) {
                    delArray = deleteArrays[val] || null;
                    migrateRepeatingMacros(doneOnce, section, fieldnames[val], defaultMacros[val], defaultMaps[val], delArray, whisper);
                } else {
                    doneOnce();
                }
            } catch (err) {
                _exportsLoaderTASTheAaronSheet2.default.error("migrateRepeatingMacrosMult error calling migrateRepeatingMacros for " + val, err);
                doneOnce();
            }
        });
    } catch (outererr) {
        _exportsLoaderTASTheAaronSheet2.default.ERROR("migrateRepeatingMacrosMult error in outermost section SHOULD NOT HAPPEN ", outererr);
        done();
    }
}
/**
 * 
 * 
 * @export
 * @param {any} callback 
 * @param {any} fieldname 
 * @param {any} defaultMacro 
 * @param {any} defaultMap 
 * @param {any} deleteArray 
 * @param {any} sameAsKeys 
 * @param {any} whisper 
 */
function migrateStaticMacro(callback, fieldname, defaultMacro, defaultMap, deleteArray, sameAsKeys, whisper) {
    var done = _underscore2.default.once(function () {
        _exportsLoaderTASTheAaronSheet2.default.debug("leaving migrateRepeatingMacros for " + fieldname);
        if (typeof callback === "function") {
            callback();
        }
    });
    whisper = whisper || '';
    if (whisper) {
        whisper += ' ';
    }
    //TAS.debug("at PFMacros.migrateStaticMacro for repeating_"+ fieldname);
    getAttrs([fieldname], function (v) {
        var setter = {},
            newMacro = '',
            currMacro = '';
        try {
            if (!sameAsKeys) {
                sameAsKeys = _underscore2.default.reduce(defaultMap, function (memo, val, key) {
                    if (val.current === key) {
                        memo.push(key);
                    }
                    return memo;
                }, []).sort();
            }
            currMacro = v[fieldname];
            if (!currMacro) {
                setter[fieldname] = whisper + defaultMacro;
            } else {
                currMacro = PFUtils.removeWhisperFromMacro(currMacro);
                newMacro = migrateMacro(currMacro, defaultMacro, defaultMap, deleteArray, sameAsKeys);
                if (newMacro) {
                    if (newMacro === 'BLANK') {
                        setter[fieldname] = "";
                    } else {
                        setter[fieldname] = whisper + newMacro;
                    }
                }
            }
        } catch (innererr) {
            _exportsLoaderTASTheAaronSheet2.default.error("migrateRepeatingMacros error migrating " + fieldname + ", " + currMacro, innererr);
        } finally {
            if (_underscore2.default.size(setter) > 0) {
                setAttrs(setter, {}, done);
            } else {
                done();
            }
        }
    });
}
/**
 * 
 * @param {any} callback 
 * @param {any} fieldnames 
 * @param {any} defaultMacros 
 * @param {any} defaultMaps 
 * @param {any} deleteArrays 
 * @param {any} sameAsKeys 
 * @param {any} whisper 
 */
function migrateStaticMacros(callback, fieldnames, defaultMacros, defaultMaps, deleteArrays, sameAsKeys, whisper) {
    var done = _underscore2.default.once(function () {
        _exportsLoaderTASTheAaronSheet2.default.debug("leaving migrateStaticMacros ");
        if (typeof callback === "function") {
            callback();
        }
    }),
        fields = [],
        keys = [];
    whisper = whisper || '';
    if (whisper) {
        whisper += ' ';
    }
    fields = _underscore2.default.values(fieldnames);
    keys = _underscore2.default.keys(fieldnames);
    getAttrs(fields, function (v) {
        var setter = {};
        if (!sameAsKeys || !Array.isArray(sameAsKeys) || _underscore2.default.size(sameAsKeys) === 0) {
            sameAsKeys = _underscore2.default.reduce(defaultMaps[0], function (memo, val, key) {
                if (val.current === key) {
                    memo.push(key);
                }
                return memo;
            }, []).sort();
        }
        setter = _underscore2.default.reduce(keys, function (memo, key) {
            var newMacro = "",
                currMacro = "",
                delArray = null,
                field = '';
            try {
                field = fieldnames[key];
                currMacro = v[field];
                if (!currMacro) {
                    memo[field] = defaultMacros[key];
                } else {
                    if (deleteArrays && deleteArrays[key]) {
                        delArray = deleteArrays[key];
                    }
                    if (currMacro) {
                        newMacro = migrateMacro(currMacro, defaultMacros[key], defaultMaps[key], delArray, sameAsKeys);
                        if (newMacro === "BLANK") {
                            memo[field] = "";
                        } else if (newMacro) {
                            memo[field] = newMacro;
                        }
                    }
                }
            } catch (innererr) {
                _exportsLoaderTASTheAaronSheet2.default.error("migrateStaticMacros error migrating " + key, innererr);
            } finally {
                return memo;
            }
        }, {});
        //TAS.debug("migrateStaticMacros setting ", setter);
        if (_underscore2.default.size(setter) > 0) {
            setAttrs(setter, {}, done);
        } else {
            done();
        }
    });
}
/** migrateStaticMacrosMult migrate many static macros with names following a pattern (skills)
 * fieldname can have the following keys in it:
 * REPLACE  - replace this with string from replaceArray
 * REPLACELOWER - replace this with lowercase of string from replaceArray
 * REPLACEREMOVENUMBER - replace this with: strip out digit chars from string from replaceArray
 * REPLACELOWERREMOVENUMBER - replace this with: strip out digit chars from lowercase string from replaceArray
 * 
 * if any of the "REMOVENUMBER" values are used, then caller should set useNoNumber to true
 * 
 * @param {function} callback after calling setAttrs with the new macros
 * @param {string} fieldname string pattern of attr we are saving to. Should have one of 'REPLACE','REPLACELOWER','REPLACEREMOVENUMBER','REPLACELOWERREMOVENUMBER' in it, which will be replaced by values in replaceArray
 * @param {string} defaultMacro default macro with REPLACE strings
 * @param {{string : {current:string,  old:[  string ],  replacements:[  { from: string, to:string}]  }
                        }} defaultMap a map of key and values for the rolltemplate.  
                         {rollqueryleft : {current:rollqueryright, old:[  oldrollqueryright1, oldrollqueryright2 ], 
                            replacements:[  { from: fromstring, to:tostring}, {from:fromstring, to:tostring}] } }
 * @param {[string]} deleteArray Strings to delete from the macro (such as @{PC-Whisper} or other @{attrname}) that do not correspond to key-value pair in defaultMacro
 * @param {[string]} replaceArray values to insert in place of "REPLACEx" strings found in fieldname
 * @param {[string]} keysToReplaceShortcut array of keys from defaultMacro, if not supplied will be built
 * @param {[string]} valsToReplaceShortcut 
 * @param {boolean} useNoNumber When matching replaceArray, whether to try to strip numbers from replace strings as well as use the whole string
 * @param {string} whisper Either @{PC-Whisper} or @{NPC-Whisper}
 */
function migrateStaticMacrosMult(callback, fieldname, defaultMacro, defaultMap, deleteArray, replaceArray, keysToReplaceShortcut, valsToReplaceShortcut, useNoNumber, whisper) {
    var done = _underscore2.default.once(function () {
        _exportsLoaderTASTheAaronSheet2.default.debug("leaving migrateRepeatingMacrosMult for " + fieldname);
        if (typeof callback === "function") {
            callback();
        }
    }),
        fieldnames = {},
        replacers = {},
        defaultMacros = {},
        defaultMaps = {},
        deleteArrays = {},
        numTimes,
        doneOnce,
        sameAsKeys,
        replaceStrings = function replaceStrings(str, val) {
        var fromAndTos = [];
        try {
            fromAndTos = replacers[val];
            //TAS.debug("now using replacer to replace :"+val+" in "+str,fromAndTos);
            if (fromAndTos) {
                _underscore2.default.each(fromAndTos, function (replacer) {
                    str = str.replace(replacer.from, replacer.to);
                });
            }
        } catch (err) {
            _exportsLoaderTASTheAaronSheet2.default.error("PFMacros migrateStaticMacrosMult replaceStrings error replacing  " + val + " in " + str, replacers[val], err);
        } finally {
            return str;
        }
    };
    try {
        whisper = whisper || '';
        if (whisper) {
            whisper += ' ';
        }
        if (!(replaceArray && Array.isArray(replaceArray))) {
            _exportsLoaderTASTheAaronSheet2.default.warn("migrateStaticMacrosMult no replace array for  " + fieldname);
            done();
            return;
        }
        numTimes = _underscore2.default.size(replaceArray);
        doneOnce = _underscore2.default.after(numTimes, done);
        //create new mappings of fieldname, defaultMacro, defaultMap, deleteArray
        //one new version of each per element in replaceArray.
        if (useNoNumber) {
            replacers = _underscore2.default.reduce(replaceArray, function (m, val) {
                var valNoNum = val.replace(/\d+/g, '').replace(/\-+$/, '');
                m[val] = [{ 'from': /REPLACELOWERREMOVENUMBER/g, 'to': valNoNum.toLowerCase() }, { 'from': /REPLACELOWER/g, 'to': val.toLowerCase() }, { 'from': /REPLACEREMOVENUMBER/g, 'to': valNoNum }, { 'from': /REPLACE/g, 'to': val }];
                return m;
            }, {});
        } else {
            replacers = _underscore2.default.reduce(replaceArray, function (m, val) {
                m[val] = [{ 'from': /REPLACELOWER/g, 'to': val.toLowerCase() }, { 'from': /REPLACE/g, 'to': val }];
                return m;
            }, {});
        }
        fieldnames = _underscore2.default.reduce(replaceArray, function (m, val) {
            m[val] = fieldname.replace(/REPLACE/g, val);
            return m;
        }, {});
        sameAsKeys = _underscore2.default.reduce(defaultMap, function (memo, compObj, key) {
            var replacedKeys = [];
            if (compObj.current === key) {
                //see if this needs replacing.
                if (_underscore2.default.indexOf(keysToReplaceShortcut, key, true) >= 0) {
                    replacedKeys = _underscore2.default.map(replaceArray, function (replaceKey) {
                        return key.replace(/REPLACE/g, replaceKey);
                    });
                    memo = memo.concat(replacedKeys);
                } else {
                    memo.push(key);
                }
            }
            return memo;
        }, []).sort();

        defaultMacros = _underscore2.default.reduce(replaceArray, function (m, val) {
            var newMacro = replaceStrings(defaultMacro, val);
            m[val] = newMacro;
            return m;
        }, {});
        defaultMaps = _underscore2.default.reduce(replaceArray, function (replaceMemo, val) {
            var newMap = {};
            try {
                newMap = _underscore2.default.reduce(defaultMap, function (memo, currobj, key) {
                    var newkey,
                        newobj = {};
                    try {
                        if (_underscore2.default.indexOf(keysToReplaceShortcut, key, true) >= 0) {
                            newkey = key.replace(/REPLACE/g, val);
                        } else {
                            newkey = key;
                        }
                        if (_underscore2.default.indexOf(valsToReplaceShortcut, key, true) >= 0) {
                            newobj.current = replaceStrings(currobj.current, val);
                            if (currobj.old) {
                                newobj.old = _underscore2.default.map(currobj.old, function (oldmacro) {
                                    return replaceStrings(oldmacro, val);
                                });
                            }
                        } else {
                            newobj.current = currobj.current;
                            if (currobj.old) {
                                newobj.old = currobj.old;
                            }
                        }
                        if (currobj.replacements) {
                            newobj.replacements = currobj.replacements;
                        }
                        memo[newkey] = newobj;
                    } catch (innererr) {
                        _exportsLoaderTASTheAaronSheet2.default.error("migrateStaticMacrosMult error creating defaultMaps: replaceval" + val + ", key=" + key + ", matching obj:", currobj);
                    } finally {
                        return memo;
                    }
                }, {});
                replaceMemo[val] = newMap;
            } catch (errineer2) {
                _exportsLoaderTASTheAaronSheet2.default.error("migrateStaticMacrosMult error building map of defaultMap : replaceval:" + val);
            } finally {
                return replaceMemo;
            }
        }, {});

        if (deleteArray) {
            deleteArrays = _underscore2.default.reduce(replaceArray, function (m, val) {
                m[val] = _underscore2.default.map(deleteArray, function (delstr) {
                    return replaceStrings(delstr, val);
                });
                return m;
            }, {});
        }
        migrateStaticMacros(done, fieldnames, defaultMacros, defaultMaps, deleteArrays, sameAsKeys, whisper);
    } catch (outererr) {
        _exportsLoaderTASTheAaronSheet2.default.ERROR("migrateStaticMacrosMult error in outermost section SHOULD NOT HAPPEN ", outererr);
        done();
    }
}
_PFLog.PFConsole.log('   PFMacros module loaded         ');
_PFLog.PFLog.modulecount++;

/***/ }),
/* 10 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.abilitymods = exports.abilities = undefined;
exports.getAttributes = getAttributes;
exports.getAllAttributes = getAllAttributes;
exports.getAbilityScore = getAbilityScore;
exports.updateAbilityScore = updateAbilityScore;
exports.updateAbilityScores = updateAbilityScores;
exports.applyConditions = applyConditions;
exports.migrate = migrate;
exports.recalculate = recalculate;

var _underscore = __webpack_require__(2);

var _underscore2 = _interopRequireDefault(_underscore);

var _exportsLoaderTASTheAaronSheet = __webpack_require__(1);

var _exportsLoaderTASTheAaronSheet2 = _interopRequireDefault(_exportsLoaderTASTheAaronSheet);

var _PFLog = __webpack_require__(0);

var _SWUtils = __webpack_require__(4);

var SWUtils = _interopRequireWildcard(_SWUtils);

var _PFConst = __webpack_require__(3);

var _PFConst2 = _interopRequireDefault(_PFConst);

var _PFUtils = __webpack_require__(5);

var PFUtils = _interopRequireWildcard(_PFUtils);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var abilities = exports.abilities = ["STR", "DEX", "CON", "INT", "WIS", "CHA"];
var abilitymods = exports.abilitymods = ["STR-mod", "DEX-mod", "CON-mod", "INT-mod", "WIS-mod", "CHA-mod"];
var columnMods = ["-base", "-enhance", "-inherent", "-misc", "-damage", "-penalty", "-drain", "-mod", "-cond", "-modded"],
    columnBuffMods = ["-total", "-total_penalty"],
    columnModHelpers = ["condition-Helpless"],

/** map of event types to event string for 'on' function to look for */
events = {
    abilityEventsAuto: "change:REPLACE-cond", //buffs events handled in PFBuffs
    abilityEventsPlayer: "change:REPLACE-base change:REPLACE-enhance change:REPLACE-inherent change:REPLACE-misc change:REPLACE-temp change:REPLACE-damage change:REPLACE-penalty change:REPLACE-drain"
};

function getAttributes(ability) {
    var fields = _underscore2.default.map(columnMods, function (col) {
        return ability + col;
    });
    fields.push(ability);
    fields = fields.concat(_underscore2.default.map(columnBuffMods, function (col) {
        return 'buff_' + ability + col;
    }));
    fields = fields.concat(columnModHelpers);
    return fields;
}

function getAllAttributes() {
    var fields = SWUtils.cartesianAppend(abilities, columnMods);
    fields = fields.concat(abilities);
    fields = fields.concat(SWUtils.cartesianAppend(['buff_'], abilities, columnBuffMods));
    fields = fields.concat(columnModHelpers);
    return fields;
}

/** Looks at current values and calculates new ability , ability-mod and ability-modded values
 * @param {string} ability string matching a value in abilities
 * @param {Map} values map of return values from getAttrs
 * @param {Map} setter map of values to pass to setAttrs. or null
 * @returns {Map}  same setter passed in, with added values if necessary
 */
function getAbilityScore(ability, values, setter) {
    var base = 0,
        newVal = 0,
        rawDmg = 0,
        rawPen = 0,
        dmgAndPen = 0,
        rawCond = 0,
        helpless = 0,
        penalized = 0,
        rawDmgAndPen = 0,
        currAbility = 0,
        currMod = 0,
        currPenalized = 0,
        mod = 0;
    try {
        setter = setter || {};
        base = parseInt(values[ability + "-base"], 10);
        //if NaN, make sure it's either empty or has a minus
        if (isNaN(base) && !_PFConst2.default.minusreg.test(values[ability + '-base'])) {
            return setter;
        }
        currMod = parseInt(values[ability + "-mod"], 10);
        currPenalized = parseInt(values[ability + "-modded"], 10) || 0;
        currAbility = parseInt(values[ability], 10);
        if (isNaN(base)) {
            newVal = "-";
            mod = 0;
            penalized = 0;
        } else {
            helpless = parseInt(values["condition-Helpless"], 10) || 0;
            if (ability === "DEX" && helpless) {
                newVal = 0;
                mod = -5;
                penalized = 1;
            } else {
                newVal = base + (parseInt(values[ability + "-enhance"], 10) || 0) + (parseInt(values[ability + "-inherent"], 10) || 0) + (parseInt(values[ability + "-misc"], 10) || 0) + (parseInt(values[ability + "-drain"], 10) || 0) + (parseInt(values["buff_" + ability + "-total"], 10) || 0);
                rawDmg = Math.abs(parseInt(values[ability + "-damage"], 10) || 0);
                if (rawDmg >= newVal || newVal <= 0) {
                    newVal = 0;
                    mod = -5;
                    penalized = 1;
                } else {
                    rawPen = Math.abs(parseInt(values[ability + "-penalty"], 10) || 0) + Math.abs(parseInt(values["buff_" + ability + "-total_penalty"], 10) || 0);
                    rawCond = Math.abs(parseInt(values[ability + "-cond"], 10) || 0);
                    rawDmgAndPen = rawDmg + rawPen + rawCond;
                    if (rawDmgAndPen >= newVal) {
                        newVal = currAbility;
                        mod = -5;
                        penalized = 1;
                    } else {
                        //normal
                        if (rawDmgAndPen !== 0) {
                            penalized = 1;
                        }
                        dmgAndPen = Math.floor(rawDmgAndPen / 2);
                        mod = Math.max(-5, Math.floor((newVal - 10) / 2) - dmgAndPen);
                    }
                }
            }
        }
        if (currAbility !== newVal) {
            setter[ability] = newVal;
        }
        if (currMod !== mod || isNaN(currMod)) {
            setter[ability + "-mod"] = mod;
        }
        if (penalized !== currPenalized) {
            setter[ability + "-modded"] = penalized;
        }
    } catch (err) {
        _exportsLoaderTASTheAaronSheet2.default.error("updateAbilityScore:" + ability, err);
    } finally {
        return setter;
    }
}

/** updateAbilityScore - Updates the final ability score, ability modifier, condition column based on entries in ability grid plus conditions and buffs.
 * Note: Ability value is not affected by damage and penalties, instead only modifier is affected.
 * @param {string} ability 3 letter abbreviation for one of the 6 ability scores, member of PFAbilityScores.abilities
 * @param {eventInfo} eventInfo unused eventinfo from 'on' method
 * @param {function} callback when done
 * @param {boolean} silently if silent:true or not
 */
function updateAbilityScore(ability, eventInfo, callback, silently) {
    var done = _underscore2.default.once(function () {
        if (typeof callback === "function") {
            callback();
        }
    }),
        fields = getAttributes(ability);
    getAttrs(fields, function (v) {
        var params = {},
            setter = {};
        getAbilityScore(ability, v, setter);
        if (_underscore2.default.size(setter)) {
            if (silently) {
                params = _PFConst2.default.silentParams;
            }
            setAttrs(setter, params, done);
        } else {
            done();
        }
    });
}
/** calls getAbilityScore for all abilities
 * @param {function} callback when done
 * @param {boolean} silently if silent:true or not
 */
function updateAbilityScores(callback, silently) {
    var done = _underscore2.default.once(function () {
        if (typeof callback === "function") {
            callback();
        }
    }),
        fields = getAllAttributes();
    getAttrs(fields, function (v) {
        var params = {},
            setter = {};
        setter = _underscore2.default.reduce(abilities, function (m, a) {
            getAbilityScore(a, v, m);
            return m;
        }, {});
        if (_underscore2.default.size(setter)) {
            if (silently) {
                params = _PFConst2.default.silentParams;
            }
            setAttrs(setter, params, done);
        } else {
            done();
        }
    });
}

/** Sets ability penalties, not "ability check" penalties 
 * Sets DEX-cond and STR-cond for fatigued, entangled, and grappled  
 *@param {function} callback to call when done.
 *@param {boolean} silently if true update with PFConst.silentParams
 */
function applyConditions(callback, silently) {
    //TAS.debug("at PFAbilityScores.applyConditions");
    getAttrs(["STR-cond", "DEX-cond", "condition-Fatigued", "condition-Entangled", "condition-Grappled", "condition-Helpless"], function (v) {
        var done = function done() {
            if (typeof callback === "function") {
                callback();
            }
        },
            setter = {},
            params = {},
            helpless = parseInt(v["condition-Helpless"], 10) || 0,
            strMod = parseInt(v["condition-Fatigued"], 10) || 0,
            dexMod = 0,
            dexAbMod = 0,
            strAbMod = 0;
        try {
            dexMod = strMod + (parseInt(v["condition-Entangled"], 10) || 0) + (parseInt(v["condition-Grappled"], 10) || 0);
            dexAbMod = dexMod * -2;
            strAbMod = strMod * -2;
            if (!helpless) {
                if (dexAbMod !== (parseInt(v["DEX-cond"], 10) || 0)) {
                    setter["DEX-cond"] = dexAbMod;
                }
                if (strAbMod !== (parseInt(v["STR-cond"], 10) || 0)) {
                    setter["STR-cond"] = strAbMod;
                }
            } else {
                setter["DEX"] = 0;
                setter["DEX-mod"] = -5;
            }
        } catch (err) {
            _exportsLoaderTASTheAaronSheet2.default.error("PFAbilityScores.applyConditions", err);
        } finally {
            if (_underscore2.default.size(setter) > 0) {
                if (silently) {
                    params = _PFConst2.default.silentParams;
                }
                setAttrs(setter, params, done);
            } else {
                done();
            }
        }
    });
}
/** migrate (currently empty just calls callback
 * @param {function} callback when done
 * @param {Number} oldversion
 */
function migrate(callback, oldversion) {
    if (typeof callback === "function") {
        callback();
    }
}
/** recalculates all attributes written to by this module.
 *@param {function()} callback to call when done.
 *@param {boolean} silently if true update with PFConst.silentParams
 *@param {float} oldversion the current @{PFVersion} in the attributes
 */
function recalculate(callback, silently, oldversion) {
    var done = _underscore2.default.once(function () {
        _exportsLoaderTASTheAaronSheet2.default.debug("leaving PFAbilityScores.recalculate");
        if (typeof callback === "function") {
            callback();
        }
    }),
        updateScoresOnce = _underscore2.default.once(function () {
        updateAbilityScores(done, silently);
    });
    applyConditions(updateScoresOnce, silently);
}

/** Calls 'on' function for everything related to this module */
function registerEventHandlers() {
    //register event handlers **********************************************
    _underscore2.default.each(abilities, function (ability) {
        on(events.abilityEventsAuto.replace(/REPLACE/g, ability), _exportsLoaderTASTheAaronSheet2.default.callback(function eventUpdateAbility(eventInfo) {
            _exportsLoaderTASTheAaronSheet2.default.debug("caught " + eventInfo.sourceAttribute + " event: " + eventInfo.sourceType);
            if (eventInfo.sourceType === "sheetworker") {
                updateAbilityScore(ability, eventInfo);
            }
        }));
        on(events.abilityEventsPlayer.replace(/REPLACE/g, ability), _exportsLoaderTASTheAaronSheet2.default.callback(function eventUpdateAbilityPlayerUpdated(eventInfo) {
            _exportsLoaderTASTheAaronSheet2.default.debug("caught " + eventInfo.sourceAttribute + " event: " + eventInfo.sourceType);
            if (eventInfo.sourceType === "player" || eventInfo.sourceType === "api") {
                updateAbilityScore(ability, eventInfo);
            }
        }));
    });
    on("change:condition-Helpless", _exportsLoaderTASTheAaronSheet2.default.callback(function eventUpdateAbilityHelpless(eventInfo) {
        _exportsLoaderTASTheAaronSheet2.default.debug("caught " + eventInfo.sourceAttribute + " event: " + eventInfo.sourceType);
        if (eventInfo.sourceType === "player" || eventInfo.sourceType === "api") {
            updateAbilityScore("DEX", eventInfo);
        }
    }));
}
registerEventHandlers();
_PFLog.PFConsole.log('   PFAbilityScores module loaded  ');
_PFLog.PFLog.modulecount++;

/***/ }),
/* 11 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.getOptionText = getOptionText;
exports.resetOption = resetOption;
exports.resetSomeOptions = resetSomeOptions;
exports.resetOptions = resetOptions;
exports.migrate = migrate;
exports.recalculate = recalculate;

var _underscore = __webpack_require__(2);

var _underscore2 = _interopRequireDefault(_underscore);

var _PFLog = __webpack_require__(0);

var _exportsLoaderTASTheAaronSheet = __webpack_require__(1);

var _exportsLoaderTASTheAaronSheet2 = _interopRequireDefault(_exportsLoaderTASTheAaronSheet);

var _SWUtils = __webpack_require__(4);

var SWUtils = _interopRequireWildcard(_SWUtils);

var _PFConst = __webpack_require__(3);

var _PFConst2 = _interopRequireDefault(_PFConst);

var _PFUtils = __webpack_require__(5);

var PFUtils = _interopRequireWildcard(_PFUtils);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var optionTemplates = {
    melee_notes: "{{melee_notes=REPLACE}}",
    ranged_notes: "{{ranged_notes=REPLACE}}",
    CMB_notes: "{{CMB_notes=REPLACE}}",
    attack_notes: "{{attack_notes=REPLACE}}",
    header_image: "{{header_image=REPLACE}}"
},
    optionDefaults = {
    notes: {
        melee: "@{melee-attack-notes}",
        ranged: "@{ranged-attack-notes}",
        CMB: "@{CMB-notes}",
        attack: "@{attack-notes}"
    },
    image: {
        melee: "@{header_image-pf_attack-melee}",
        ranged: "@{header_image-pf_attack-ranged}",
        CMB: "@{header_image-pf_attack-cmb}"
    }
},

//not used since melee options field actually look at the text..
//optionAttrs = ["melee-attack-notes", "ranged-attack-notes", "CMB-notes", "attack-notes", "header_image-pf_attack-melee", "header_image-pf_attack-ranged", "header_image-pf_attack-cmb"],
optionToggles = ["toggle_attack_melee_notes", "toggle_attack_ranged_notes", "toggle_attack_CMB_notes", "toggle_attack_attack_notes", "toggle_attack_header_image"],

//attackOptionRegex = PFUtils.getOptionsCompiledRegexMap(optionTemplates),
repeatingOptionAttrs = ["attack-type", "damage-ability", "damage-dice-num", "damage-die", "damage", "attack"],
    repeatingOptionHelperAttrs = [""],
    // ["damage-mod", "attack-mod"],
repeatingOptionGetAttrs = repeatingOptionAttrs.concat(repeatingOptionHelperAttrs),
    repeatingOptionGetAttrsLU = _underscore2.default.map(repeatingOptionGetAttrs, function (field) {
    return '_' + field;
}),
    events = {
    attackOptionEventsPlayer: repeatingOptionAttrs,
    attackOptionEventsAuto: repeatingOptionHelperAttrs
};

/********* REPEATING WEAPON FIELDSET *********/
/** getOptionText - resets entire macro options text for a repeating_weapon row
 *@param {string} prefix repeating_weapon_id_
 *@param {map} toggleValues map of ".showxxxx" where xxxx is what to display, already calculated for us
 *@param {map} rowValues output from getAttrs
 */
function getOptionText(prefix, toggleValues, rowValues) {
    var attackType = PFUtils.findAbilityInString(rowValues[prefix + "attack-type"]),
        damageAbility = PFUtils.findAbilityInString(rowValues[prefix + "damage-ability"]),
        optionText = "";
    if (!(attackType || rowValues[prefix + "attack"])) {
        optionText += "{{no_attack_roll=1}}";
    } else if (attackType) {
        attackType = attackType.replace('attk-', '').replace('2', '') || "";
        if (toggleValues['show' + attackType.toLowerCase()]) {
            optionText += optionTemplates[attackType + "_notes"].replace("REPLACE", optionDefaults.notes[attackType]) || "";
        }
    }
    if (toggleValues.showheader_image) {
        optionText += optionTemplates.header_image.replace("REPLACE", optionDefaults.image[attackType || 'melee']) || "";
    }
    if (!(damageAbility || rowValues[prefix + "damage"] || parseInt(rowValues[prefix + "damage-dice-num"], 10) && parseInt(rowValues[prefix + "damage-die"], 10))) {
        optionText += "{{no_damage=1}}";
    }
    if (toggleValues.showattack) {
        optionText += optionTemplates.attack_notes.replace("REPLACE", optionDefaults.notes.attack) || "";
    }
    return optionText;
}
/* resets one row of repeating_weapons
 * note this is almost exactly like resetOption suggesting there is a way to refactor these*/
function resetOption(id, eventInfo, callback) {
    var done = _underscore2.default.once(function () {
        _exportsLoaderTASTheAaronSheet2.default.debug("leaving PFAttackOptions.resetOption, rowid: " + id);
        if (typeof callback === "function") {
            callback();
        }
    }),
        prefix = "repeating_weapon_" + SWUtils.getRepeatingIDStr(id),
        rowfields = _underscore2.default.map(repeatingOptionGetAttrs, function (attr) {
        return prefix + attr;
    }),
        allFields = optionToggles;
    allFields = allFields.concat(rowfields);
    //TAS.log("resetOption, fields to get",allFields);
    getAttrs(allFields, function (v) {
        var toggleValues = _underscore2.default.reduce(optionToggles, function (memo, attr) {
            memo['show' + attr.toLowerCase().slice(14).replace('_notes', '')] = parseInt(v[attr], 10) || 0;
            return memo;
        }, {}),
            optionText = "",
            setter = {};
        optionText = getOptionText(prefix, toggleValues, v) || "";
        if (typeof optionText !== "undefined" && optionText !== null) {
            setter[prefix + "macro_options"] = optionText;
        }
        if (_underscore2.default.size(setter) > 0) {
            setAttrs(setter, _PFConst2.default.silentParams, done);
        } else {
            done();
        }
    });
}
function resetSomeOptions(ids, eventInfo, callback) {
    var done = _underscore2.default.once(function () {
        if (typeof callback === 'function') {
            callback();
        }
    });
    if (!(ids && _underscore2.default.size(ids))) {
        done();
        return;
    }
    getAttrs(optionToggles, function (vout) {
        var fields,
            toggleValues = _underscore2.default.reduce(optionToggles, function (memo, attr) {
            memo['show' + attr.toLowerCase().slice(14).replace('_notes', '')] = parseInt(vout[attr], 10) || 0;
            return memo;
        }, {});
        fields = SWUtils.cartesianAppend(["repeating_weapon_"], ids, repeatingOptionGetAttrsLU);
        getAttrs(fields, function (v) {
            var setter = _underscore2.default.reduce(ids, function (memo, id) {
                var prefix = 'repeating_weapon_' + id + '_',
                    tempstr = '';
                try {
                    tempstr = getOptionText(prefix, toggleValues, v);
                    //tempstr= getOptionTextNew(prefix,toggleValues,v)||'';
                    if (tempstr !== v[prefix + 'macro_options']) {
                        memo[prefix + 'macro_options'] = tempstr;
                    }
                } finally {
                    return memo;
                }
            }, {});
            if (_underscore2.default.size(setter)) {
                setAttrs(setter, _PFConst2.default.silentParams, done);
            } else {
                done();
            }
        });
    });
}
/*resetOptions - updates repeating_weapon_ attack _options for all attacks.*/
function resetOptions(callback, eventInfo) {
    getSectionIDs("repeating_weapon", function (ids) {
        resetSomeOptions(ids, eventInfo, callback);
    });
}
function migrate(callback) {
    if (typeof callback === "function") {
        callback();
    }
}
function recalculate(callback) {
    resetOptions(callback);
}
function registerEventHandlers() {
    _underscore2.default.each(optionToggles, function (toggleField) {
        on("change:" + toggleField, _exportsLoaderTASTheAaronSheet2.default.callback(function toggleAttackNoteOption(eventInfo) {
            if (eventInfo.sourceType === "player" || eventInfo.sourceType === "api") {
                _exportsLoaderTASTheAaronSheet2.default.debug("caught " + eventInfo.sourceAttribute + " event: " + eventInfo.sourceType);
                resetOptions(null, eventInfo);
            }
        }));
    });
    //attack options for one row
    _underscore2.default.each(events.attackOptionEventsAuto, function (fieldToWatch) {
        var eventToWatch = "change:repeating_weapon:" + fieldToWatch;
        on(eventToWatch, _exportsLoaderTASTheAaronSheet2.default.callback(function eventUpdateAttackTypeOptionSheet(eventInfo) {
            if (eventInfo.sourceType === "sheetworker") {
                _exportsLoaderTASTheAaronSheet2.default.debug("caught " + eventInfo.sourceAttribute + " event: " + eventInfo.sourceType);
                resetOption(null, eventInfo);
            }
        }));
    });
    _underscore2.default.each(events.attackOptionEventsPlayer, function (fieldToWatch) {
        var eventToWatch = "change:repeating_weapon:" + fieldToWatch;
        on(eventToWatch, _exportsLoaderTASTheAaronSheet2.default.callback(function eventUpdateAttackTypeOptionPlayer(eventInfo) {
            if (eventInfo.sourceType === "player" || eventInfo.sourceType === "api") {
                _exportsLoaderTASTheAaronSheet2.default.debug("caught " + eventInfo.sourceAttribute + " event: " + eventInfo.sourceType);
                resetOption(null, eventInfo);
            }
        }));
    });
}
registerEventHandlers();
_PFLog.PFConsole.log('   PFAttackOptions module loaded  ');
_PFLog.PFLog.modulecount++;

/***/ }),
/* 12 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.events = exports.defenseArmorFields = exports.defenseFieldTotals = exports.defenseArmorShieldColumns = exports.defenseArmorShieldRows = exports.defenseArmorShieldRowsOld = exports.defenseLowerToMixed = exports.defenseDropdowns = undefined;
exports.updateDefenses = updateDefenses;
exports.setDefenseDropdownMod = setDefenseDropdownMod;
exports.updateArmor = updateArmor;
exports.applyConditions = applyConditions;
exports.migrate = migrate;
exports.recalculate = recalculate;

var _underscore = __webpack_require__(2);

var _underscore2 = _interopRequireDefault(_underscore);

var _exportsLoaderTASTheAaronSheet = __webpack_require__(1);

var _exportsLoaderTASTheAaronSheet2 = _interopRequireDefault(_exportsLoaderTASTheAaronSheet);

var _PFLog = __webpack_require__(0);

var _PFConst = __webpack_require__(3);

var _PFConst2 = _interopRequireDefault(_PFConst);

var _SWUtils = __webpack_require__(4);

var SWUtils = _interopRequireWildcard(_SWUtils);

var _PFUtils = __webpack_require__(5);

var PFUtils = _interopRequireWildcard(_PFUtils);

var _PFUtilsAsync = __webpack_require__(8);

var PFUtilsAsync = _interopRequireWildcard(_PFUtilsAsync);

var _PFMigrate = __webpack_require__(6);

var PFMigrate = _interopRequireWildcard(_PFMigrate);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var defenseDropdowns = exports.defenseDropdowns = {
    "AC-ability": "AC-ability-mod",
    "FF-ability": "FF-DEX",
    "CMD-ability1": "CMD-STR",
    "CMD-ability2": "CMD-DEX",
    "CMD-ability": "FF-CMD-DEX"
},
    defenseLowerToMixed = exports.defenseLowerToMixed = {
    "ac-ability": "AC-ability",
    "ff-ability": "FF-ability",
    "cmd-ability1": "CMD-ability1",
    "cmd-ability2": "CMD-ability2",
    "cmd-ability": "CMD-ability"
},

//reverse order to do worn first:
defenseArmorShieldRowsOld = exports.defenseArmorShieldRowsOld = ["armor3", "armor2", "armor", "shield3", "shield2", "shield"],
    defenseArmorShieldRows = exports.defenseArmorShieldRows = ["armor3", "shield3"],
    defenseArmorShieldColumns = exports.defenseArmorShieldColumns = ["equipped", "acbonus", "enhance", "max-dex", "acp", "spell-fail", "proficiency", "type"],
    defenseFieldTotals = exports.defenseFieldTotals = ["acp", "max-dex", "AC-armor", "AC-shield", "spell-fail", "acp-attack-mod", "max-dex-source", "current-load"],
    defenseArmorFields = exports.defenseArmorFields = SWUtils.cartesianAppend(defenseArmorShieldRows, ['-'], defenseArmorShieldColumns).concat(defenseFieldTotals),
    events = exports.events = {
    defenseEventsAuto: "change:bab change:ac-penalty change:cmd-penalty change:size change:ac-shield change:ac-armor change:ac-ability-mod change:ff-dex change:cmd-dex change:ff-cmd-dex change:cmd-str change:max-dex",
    defenseEventsPlayer: "change:ff-dex change:ac-penalty change:cmd-penalty change:size change:ac-dodge change:ac-natural change:ac-deflect change:ac-misc change:cmd-misc",
    defenseEventsEither: "change:size change:AC-ability change:FF-ability change:CMD-ability1 change:CMD-ability2 change:CMD-ability"
};

/** updateDefenses updates the top grid of AC, Touch AC, Flat Footed AC, CMD, Flat Footed CMD
 * http://paizo.com/pathfinderRPG/prd/coreRulebook/combat.html#combat-maneuver-defense
 * Any penalties to a creature's AC also apply to its CMD
 *@param {function} callback optional call when done
 *@param {boolean} silently optional if true call setAttrs with PFConst.silentParams
 *@param {eventInfo} eventInfo unused eventInfo from on method
 */
function updateDefenses(callback, silently, eventInfo) {
    var done = _underscore2.default.once(function () {
        _exportsLoaderTASTheAaronSheet2.default.debug("leaving PFDefense.updateDefenses");
        if (typeof callback === "function") {
            callback();
        }
    });
    getAttrs(["AC-ability-mod", "FF-DEX", "AC-penalty", "CMD-penalty", "size", "max-dex", "AC-dodge", "AC-natural", "AC-deflect", "AC-misc", "buff_AC-total", "buff_Touch-total", "buff_CMD-total", "CMD-DEX", "FF-CMD-DEX", "CMD-STR", "bab", "CMD-misc", "AC", "Touch", "Flat-Footed", "CMD", "FF-CMD", "AC-ability", "FF-ability", "CMD-ability", "CMD-ability1", "CMD-ability2", "AC-armor", "AC-shield", "condition-Blinded", "condition-Pinned", "condition-Stunned", "condition-Cowering", "condition-Drained", "condition-Flat-Footed", "AC-ability-display", "FF-DEX-display", "CMD-DEX-display", "FF-CMD-DEX-display", "maxdex-toggle", "nodex-toggle", "uncanny_dodge", "unlock_def_ability", "hd_not_bab", "level", "current-load", "max-dex-source"], function (v) {
        var size = parseInt(v["size"], 10) || 0,
            dodge = parseInt(v["AC-dodge"], 10) || 0,
            deflect = parseInt(v["AC-deflect"], 10) || 0,
            miscAC = parseInt(v["AC-misc"], 10) || 0,
            condPenalty = parseInt(v["AC-penalty"], 10) || 0,
            buffs = parseInt(v["buff_AC-total"], 10) || 0,
            buffsTouch = parseInt(v["buff_Touch-total"], 10) || 0,
            buffsCMD = parseInt(v["buff_CMD-total"], 10) || 0,
            armor = parseInt(v["AC-armor"], 10) || 0,
            shield = parseInt(v["AC-shield"], 10) || 0,
            natural = parseInt(v["AC-natural"], 10) || 0,
            bab = parseInt(v["bab"], 10) || 0,
            miscCMD = parseInt(v["CMD-misc"], 10) || 0,
            maxDex = parseInt(v["max-dex"], 10),
            cmdPenalty = parseInt(v["CMD-penalty"], 10) || 0,
            blinded = parseInt(v["condition-Blinded"], 10) || 0 ? 1 : 0,
            pinned = parseInt(v["condition-Pinned"], 10) || 0 ? 1 : 0,
            stunned = parseInt(v["condition-Stunned"], 10) || 0 ? 1 : 0,
            ffed = parseInt(v["condition-Flat-Footed"], 10) || 0 ? 1 : 0,
            cowering = parseInt(v["condition-Cowering"], 10) || 0 ? 1 : 0,
            maxDexSource = parseInt(v["max-dex-source"], 10) || 0,
            currload = parseInt(v["current-load"], 10) || 0,
            dexModShowLimit = 0,
            currDexModLimit = parseInt(v["maxdex-toggle"], 10) || 0,
            noDexShowLimit = 0,
            currNoDexLimit = parseInt(v["nodex-toggle"], 10) || 0,
            unlockDefAbility = parseInt(v.unlock_def_ability, 10) || 0,
            lockDefAbility = unlockDefAbility ? 0 : 1,
            ac = 10,
            touch = 10,
            ff = 10,
            cmd = 10,
            cmdFF = 10,
            currAC = parseInt(v["AC"], 10),
            currTouch = parseInt(v["Touch"], 10),
            currFF = parseInt(v["Flat-Footed"], 10),
            currCMD = parseInt(v["CMD"], 10),
            currCMDFF = parseInt(v["FF-CMD"], 10),
            currUncanny = parseInt(v["uncanny_dodge"], 10) || 0,
            currCMDUncanny = lockDefAbility ? currUncanny : parseInt(v["uncanny_cmd_dodge"], 10) || 0,
            acAbilityName = PFUtils.findAbilityInString(v["AC-ability"]),
            uncannyAbilityName = currUncanny ? acAbilityName : PFUtils.findAbilityInString(v["FF-ability"]),
            uncannyCMDabilityName = lockDefAbility ? uncannyAbilityName : PFUtils.findAbilityInString(v["CMD-ability"]),
            cmdAbilityDDvalName = lockDefAbility ? acAbilityName : PFUtils.findAbilityInString(v["CMD-ability2"]),
            ability = parseInt(v["AC-ability-mod"], 10) || 0,
            ffAbility = currUncanny && lockDefAbility ? ability : parseInt(v["FF-DEX"], 10) || 0,
            cmdAbility1 = parseInt(v["CMD-STR"], 10) || 0,
            cmdAbility2 = lockDefAbility ? ability : parseInt(v["CMD-DEX"], 10) || 0,
            cmdFFAbility2 = lockDefAbility ? ffAbility : parseInt(v["FF-CMD-DEX"], 10) || 0,
            setter = {},
            params = {},
            loseDex = 0,
            immobilized = 0,
            setAny = 0;
        try {
            //TAS.debug(v);
            maxDex = isNaN(maxDex) ? 99 : maxDex; //cannot do "||0" since 0 is falsy but a valid number
            if (maxDex < ability) {
                //assume ability, FF-ability, CMD-ability2 all set the same (or to "none" for ff)
                dexModShowLimit = 1;
            }
            if (acAbilityName === "DEX-mod" && maxDex < 99 && maxDex >= 0) {
                ability = Math.min(ability, maxDex);
            }
            if (uncannyAbilityName === "DEX-mod" && maxDex < 99 && maxDex >= 0) {
                ffAbility = Math.min(ffAbility, maxDex);
            }
            if (cmdAbilityDDvalName === "DEX-mod" && maxDex < 99 && maxDex >= 0) {
                cmdAbility2 = Math.min(cmdAbility2, maxDex);
            }
            if (uncannyCMDabilityName === "DEX-mod" && maxDex < 99 && maxDex >= 0) {
                cmdFFAbility2 = Math.min(cmdFFAbility2, maxDex);
            }

            //if ability is below zero, FF dex adj must be set to negative too
            //assume ffability dropdown should be None or the same as dex ability
            //because if not then it doesn't make sense
            if (ability < 0 && ffAbility > ability) {
                ffAbility = ability;
            }
            if (cmdAbility2 < 0 && cmdFFAbility2 > cmdAbility2) {
                cmdFFAbility2 = cmdAbility2;
            }
            if (unlockDefAbility) {
                if (uncannyAbilityName && currUncanny === 0) {
                    //TAS.debug("switching to uncanny");
                    setter["uncanny_dodge"] = "1";
                    setAny = 1;
                    currUncanny = 1;
                } else if (!uncannyAbilityName && currUncanny === 1) {
                    //TAS.debug("switching from uncanny");
                    setter["uncanny_dodge"] = "0";
                    setAny = 1;
                    currUncanny = 0;
                }
                if (uncannyCMDabilityName && currCMDUncanny === 0) {
                    //TAS.debug("switching to cmd uncanny");
                    setter["uncanny_cmd_dodge"] = "1";
                    setAny = 1;
                    currCMDUncanny = 1;
                } else if (!uncannyCMDabilityName && currCMDUncanny === 1) {
                    //TAS.debug("switching from cmd uncanny");
                    setter["uncanny_cmd_dodge"] = "0";
                    setAny = 1;
                    currCMDUncanny = 0;
                }
            }
            //lose Dex: you lose your bonus (and dodge) - not the same as flat footed
            //Must be applied even if your bonus is not dex :
            //http://paizo.com/paizo/faq/v5748nruor1fm#v5748eaic9qdi
            //flat footed : lose dex unless uncanny
            //blinded: lose dex unless uncanny
            //pinned, cowering, stunned : always lose dex
            if (pinned || cowering || stunned || currload === 4 && (maxDexSource === 0 || maxDexSource === 2)) {
                immobilized = 1;
            } else if (blinded || ffed || currload === 3 && (maxDexSource === 0 || maxDexSource === 2)) {
                loseDex = 1;
            }

            if (immobilized) {
                if (currUncanny) {
                    ffAbility = Math.min(0, ffAbility);
                }
                if (currCMDUncanny) {
                    cmdFFAbility2 = Math.min(0, cmdFFAbility2);
                }
                //dexModShowLimit=1;
                ability = Math.min(0, ability);
                cmdAbility2 = Math.min(0, cmdAbility2);
                dodge = 0;
                noDexShowLimit = 1;
            } else if (loseDex) {
                //TAS.debug("we are blinded or flat footed uncanny:"+currUncanny+", cmd uncan:"+currCMDUncanny);
                if (!currUncanny || !currCMDUncanny) {
                    //dexModShowLimit=1;
                    dodge = 0;
                    noDexShowLimit = 1;
                }
                //set to same as flat footed (probably 0) or less than if ability already under 10.
                ability = Math.min(ability, ffAbility);
                cmdAbility2 = Math.min(cmdAbility2, cmdFFAbility2);
            }
            if (parseInt(v.hd_not_bab, 10)) {
                bab = parseInt(v.level, 10) || 0;
            }
            ac = 10 + armor + shield + natural + size + dodge + ability + deflect + miscAC + condPenalty + buffs;
            touch = 10 + size + dodge + ability + deflect + miscAC + condPenalty + buffsTouch;
            ff = 10 + armor + shield + natural + size + ffAbility + deflect + miscAC + condPenalty + buffs + (currUncanny ? dodge : 0);
            cmd = 10 + bab + cmdAbility1 + cmdAbility2 + -1 * size + dodge + deflect + miscCMD + cmdPenalty + buffsCMD;
            cmdFF = 10 + bab + cmdAbility1 + cmdFFAbility2 + -1 * size + deflect + miscCMD + cmdPenalty + buffsCMD + (currCMDUncanny ? dodge : 0);
            if (ac !== currAC || isNaN(currAC)) {
                setter["AC"] = ac;
                setAny += 1;
            }
            if (touch !== currTouch || isNaN(currTouch)) {
                setter["Touch"] = touch;
                setAny += 1;
            }
            if (ff !== currFF || isNaN(currFF)) {
                setter["Flat-Footed"] = ff;
                setAny += 1;
            }
            //TAS.debug("PFDefense.updateDefenses currcmd is :"+ currCMD +", new cmd is:"+ cmd);
            if (cmd !== currCMD || isNaN(currCMD)) {
                setter["CMD"] = cmd;
                setAny += 1;
            }
            if (cmdFF !== currCMDFF || isNaN(currCMDFF)) {
                setter["FF-CMD"] = cmdFF;
                setAny += 1;
            }
            if (ability !== parseInt(v["AC-ability-display"], 10)) {
                setter["AC-ability-display"] = ability;
            }
            if (ffAbility !== parseInt(v["FF-DEX-display"], 10)) {
                setter["FF-DEX-display"] = ffAbility;
            }
            if (cmdAbility2 !== parseInt(v["CMD-DEX-display"], 10)) {
                setter["CMD-DEX-display"] = cmdAbility2;
            }
            if (cmdFFAbility2 !== parseInt(v["FF-CMD-DEX-display"], 10)) {
                setter["FF-CMD-DEX-display"] = cmdFFAbility2;
            }
            if (dexModShowLimit !== currDexModLimit) {
                setter["maxdex-toggle"] = dexModShowLimit;
            }
            if (noDexShowLimit !== currNoDexLimit) {
                setter["nodex-toggle"] = noDexShowLimit;
            }
        } catch (err) {
            _exportsLoaderTASTheAaronSheet2.default.error("PFDefense.updateDefenses:", err);
        } finally {
            if (_underscore2.default.size(setter) > 0) {
                if (silently) {
                    params = _PFConst2.default.silentParams;
                }
                setAttrs(setter, params, done);
            } else {
                done();
            }
        }
    });
}
/** setDefenseDropdownMod
 * All dropdowns in the defense grid: AC, flat footed AC, touch, CMD, flat footed CMD.
 * calls handledropdown then calls updateDefenses.
 *
 * NOTE: due to the way eventInfo.sourceAttribute is populated if the change comes from the autocalc code, the value is
 * lower case, so you must check either BOTH the regular and all lowercase, or just change it to lower case before comparing to be sure
 *
 *@param {string} dropdownField fieldname of dropdown to set 
 *@param {function} callback callback
 *@param {boolean} silently if true set silently make sure to call updateDefenses after!
 *@param {object} the eventInfo object USED, this is checked for uncanny_dodge flag 
 *@param {boolean} doNotCallUpdateDefenseAfter if not set call updateDefenses after updating dropdown mod.
 */
function setDefenseDropdownMod(dropdownField, callback, silently, eventInfo, doNotCallUpdateDefenseAfter) {
    var done = _underscore2.default.once(function () {
        _exportsLoaderTASTheAaronSheet2.default.debug("leaving PFDefense.setDefenseDropdownMod");
        if (typeof callback === "function") {
            callback();
        }
    }),
        updateAndDone = _underscore2.default.once(function () {
        if (!doNotCallUpdateDefenseAfter) {
            updateDefenses(done, silently);
        } else {
            done();
        }
    }),
        dropdownLower = "",
        dropdownMixed = "";
    //TAS.debug"PFDefense.setDefenseDropdownMod called with "+dropdownField +", lower:"+ dropdownLower);
    try {
        if (dropdownField) {
            dropdownLower = dropdownField.toLowerCase();
            dropdownMixed = defenseLowerToMixed[dropdownLower];
            if (dropdownMixed) {
                getAttrs(['unlock_def_ability', 'uncanny_dodge'], function (v) {
                    if (parseInt(v['unlock_def_ability'], 10) || dropdownLower === 'ac-ability' || dropdownLower === 'cmd-ability1') {
                        PFUtilsAsync.setDropdownValue(dropdownMixed, defenseDropdowns[dropdownMixed], function (newv, oldv) {
                            if (newv !== oldv || newv < 0 || oldv < 0 || dropdownLower === "ff-ability" || dropdownLower === "cmd-ability") {
                                updateAndDone();
                            } else {
                                done();
                            }
                        }, silently);
                    } else {
                        done();
                    }
                });
            } else {
                _exportsLoaderTASTheAaronSheet2.default.warn("PFDefense.updateDefenses, called with invalid dropdown: " + dropdownField);
                done();
            }
        } else if (eventInfo && eventInfo.sourceAttribute === 'uncanny_dodge') {
            getAttrs(['unlock_def_ability', 'uncanny_dodge', 'AC-ability', defenseDropdowns['AC-ability']], function (v) {
                var unlockAbilityDD = 0,
                    currACmod = 0,
                    setter = {};
                try {
                    unlockAbilityDD = parseInt(v.unlock_def_ability, 10) || 0;
                    if (unlockAbilityDD) {
                        //TAS.debug("at PFDefense.setDefenseDropdownMod",v);
                        currACmod = parseInt(v['AC-ability'], 10) || 0;
                        //we came here because uncanny dodge was checked
                        if (!parseInt(v.uncanny_dodge, 10)) {
                            //turn uncanny off
                            setter["FF-ability"] = "0";
                            setter[defenseDropdowns["FF-ability"]] = 0;
                            setter["CMD-ability"] = "0";
                            setter[defenseDropdowns["CMD-ability"]] = 0;
                        } else {
                            //turned uncanny on
                            //TAS.debug("set FF_ability to " +v['AC-ability'] );
                            setter["FF-ability"] = v['AC-ability'];
                            setter[defenseDropdowns["FF-ability"]] = currACmod;
                            setter["CMD-ability"] = v['AC-ability'];
                            setter[defenseDropdowns["CMD-ability"]] = currACmod;
                        }
                        setAttrs(setter, _PFConst2.default.silentParams, updateAndDone);
                    } else {
                        updateAndDone();
                    }
                } catch (err2) {
                    _exportsLoaderTASTheAaronSheet2.default.error("PFDefense.setDefenseDropdownMod inner error for : " + dropdownField, err2);
                    done();
                }
            });
        }
    } catch (err) {
        _exportsLoaderTASTheAaronSheet2.default.error("PFDefense.setDefenseDropdownMod error for: " + dropdownField, err);
        done();
    }
}
/** updates total AC and penalty and max dex
 * if not proficient sets attack penalty
 * for backward compatibility, proficiency is string and 0 is proficient, anything else non proficient
 *@param {function} callback optional call when done
 *@param {boolean} silently optional if true call setAttrs with PFConst.silentParams
 *@param {eventInfo} eventInfo unused eventInfo from on method
 */
function updateArmor(callback, silently, eventInfo) {
    var done = function done() {
        if (typeof callback === "function") {
            callback();
        }
    },
        params = {};
    getAttrs(defenseArmorFields, function (v) {
        var acp = 0,
            minAcp = 0,
            acA = 0,
            acS = 0,
            sp = 0,
            atk = 0,
            subAC = 0,
            subD = 0,
            subAcp = 0,
            nonProf = 0,
            subsp = 0,
            maxDex = 99,
            subE = 0,
            currACP = 0,
            currMaxDex = 99,
            currACArmor = 0,
            currACShield = 0,
            currSpellFail = 0,
            currAtkMod = 0,
            encumbranceDD = parseInt(v["max-dex-source"], 10) || 0,
            currentLoad = parseInt(v["current-load"], 10) || 0,
            setter = {};
        try {
            //TAS.debug("at updateArmor ",v);
            defenseArmorShieldRows.forEach(function (row) {
                if (parseInt(v[row + "-equipped"], 10) === 1) {
                    subAC = parseInt(v[row + "-acbonus"], 10) || 0;
                    subE = parseInt(v[row + "-enhance"], 10) || 0;
                    subsp = parseInt(v[row + "-spell-fail"], 10) || 0;
                    sp += subsp;
                    if (row.indexOf("armor") >= 0) {
                        acA += subAC + subE;
                    } else {
                        acS += subAC + subE;
                    }
                    subAcp = parseInt(v[row + "-acp"], 10) || 0;
                    if (encumbranceDD < 2) {
                        subD = parseInt(v[row + "-max-dex"], 10);
                        if (v[row + "-max-dex"] === "-" || isNaN(subD)) {
                            subD = 99;
                        }
                        maxDex = Math.min(subD, maxDex);
                        acp += subAcp;
                    }
                    nonProf = parseInt(v[row + "-proficiency"], 10) || 0;
                    if (nonProf) {
                        atk += subAcp;
                    }
                    if (/tower/i.test(v[row + "-type"])) {
                        atk -= 2;
                    }
                    //TAS.debug("row=" + row + ", subAC=" + subAC + ", subD=" + subD + ", subAcp=" + subAcp + ", nonProf=" + nonProf + ", subsp=" + subsp + ", acA=" + acA + ", maxDex=" + maxDex + ", acp=" + acp + ", sp=" + sp + ", atk=" + atk);
                }
            });
            minAcp = acp;
            // #0: Armor, Shield & Load
            // #1: Armor & Shield only
            // #2: Load only
            // #3: None
            if (encumbranceDD === 0 || encumbranceDD === 2) {
                if (currentLoad === 1) {
                    // under medium encumbrance load
                    maxDex = Math.min(maxDex, 3);
                    minAcp = Math.min(minAcp, -3);
                } else if (currentLoad === 2) {
                    // under heavy encumbrance load
                    maxDex = Math.min(maxDex, 1);
                    minAcp = Math.min(minAcp, -6);
                } else if (currentLoad > 2) {
                    maxDex = 0;
                    minAcp = Math.min(minAcp, -6);
                }
            }

            currACP = parseInt(v.acp, 10) || 0;
            currMaxDex = parseInt(v["max-dex"], 10); //cannot do "||0" since 0 is valid but falsy
            currMaxDex = isNaN(currMaxDex) ? 99 : currMaxDex;
            currACArmor = parseInt(v["AC-armor"], 10) || 0;
            currACShield = parseInt(v["AC-shield"], 10) || 0;
            currSpellFail = parseInt(v["spell-fail"], 10) || 0;
            currAtkMod = parseInt(v["acp-attack-mod"], 10) || 0;
            if (currACP !== minAcp) {
                setter["acp"] = minAcp;
            }
            if (currMaxDex !== maxDex) {
                setter["max-dex"] = maxDex;
            }
            if (currACArmor !== acA) {
                setter["AC-armor"] = acA;
            }
            if (currACShield !== acS) {
                setter["AC-shield"] = acS;
            }
            if (currSpellFail !== sp) {
                setter["spell-fail"] = sp;
            }
            if (currAtkMod !== atk) {
                setter["acp-attack-mod"] = atk;
            }
        } catch (err) {
            _exportsLoaderTASTheAaronSheet2.default.error("PFDefense.updateArmor", err);
        } finally {
            if (_underscore2.default.size(setter) > 0) {
                if (silently) {
                    params = _PFConst2.default.silentParams;
                }
                setAttrs(setter, params, done);
            } else {
                done();
            }
        }
    });
}
/** applyConditions Updates the AC-penalty and CMD-penalty field based on conditions
 *only difference is CMD penalty affected by energy drain for some reason
 *@param {function} callback optional call when done
 *@param {boolean} silently optional if true call setAttrs with PFConst.silentParams
 *@param {eventInfo} eventInfo unused eventInfo from on method
 */
function applyConditions(callback, silently, eventInfo) {
    var done = _underscore2.default.once(function () {
        _exportsLoaderTASTheAaronSheet2.default.debug("leaving PFDefense.applyConditions");
        if (typeof callback === "function") {
            callback();
        }
    });
    getAttrs(["AC-penalty", "CMD-penalty", "condition-Blinded", "condition-Cowering", "condition-Stunned", "condition-Pinned", "condition-Wounds", "condition-Drained", "has_endurance_feat", "wounds_gritty_mode"], function (v) {
        var subTotPenalty = 0,
            drained = 0,
            woundLevel = 0,
            AC = 0,
            CMD = 0,
            newCMD = 0,
            woundPenalty = 0,
            hasEndurance = 0,
            grittyMode = 0,
            setter = {},
            params = {};
        try {
            drained = parseInt(v["condition-Drained"], 10) || 0;
            woundLevel = parseInt(v["condition-Wounds"], 10) || 0;
            AC = parseInt(v["AC-penalty"], 10) || 0;
            CMD = parseInt(v["CMD-penalty"], 10) || 0;
            hasEndurance = parseInt(v.has_endurance_feat, 10) || 0;
            grittyMode = parseInt(v.wounds_gritty_mode, 10) || 0;
            woundPenalty = PFUtils.getWoundPenalty(woundLevel, hasEndurance, grittyMode);
            subTotPenalty = -1 * ((parseInt(v["condition-Blinded"], 10) || 0) + (parseInt(v["condition-Pinned"], 10) || 0) + (parseInt(v["condition-Cowering"], 10) || 0) + (parseInt(v["condition-Stunned"], 10) || 0));
            subTotPenalty += woundPenalty;
            newCMD = drained + subTotPenalty;
            if (AC !== subTotPenalty) {
                setter["AC-penalty"] = subTotPenalty;
            }
            if (CMD !== newCMD) {
                setter["CMD-penalty"] = newCMD;
            }
        } catch (err) {
            _exportsLoaderTASTheAaronSheet2.default.error("PFDefense.applyConditions:", err);
        } finally {
            if (_underscore2.default.size(setter) > 0) {
                if (silently) {
                    params = _PFConst2.default.silentParams;
                }
                setAttrs(setter, params, done);
            } else {
                done();
            }
        }
    });
}

/** migrate from old versions
 * @param {function} callback guaranteed call when done
 * @param {number} oldversion 
 */
function migrate(callback, oldversion) {
    var done = _underscore2.default.once(function () {
        _exportsLoaderTASTheAaronSheet2.default.debug("leaving PFDefense.migrate");
        if (typeof callback === "function") {
            callback();
        }
    });
    if (oldversion > 0 && oldversion < 0.50) {
        PFMigrate.migrateMaxDexAndACP();
    }
    getAttrs(['CMD-ability2', 'unlock_def_ability', 'AC-ability'], function (v) {
        var ac = '',
            cmd = '',
            configflag = 0,
            setter = {};
        try {
            ac = PFUtils.findAbilityInString(v['AC-ability']);
            cmd = PFUtils.findAbilityInString(v['CMD-ability2']);
            configflag = parseInt(v.unlock_def_ability, 10) || 0;
            if (ac && cmd && ac !== cmd && !configflag) {
                setter.unlock_def_ability = 1;
            } else if (configflag) {
                setter.unlock_def_ability = 0;
            }
        } catch (err) {
            _exportsLoaderTASTheAaronSheet2.default.error("PFDefense.migrate", err);
        } finally {
            if (_underscore2.default.size(setter) > 0) {
                setAttrs(setter, _PFConst2.default.silentParams, done);
            } else {
                done();
            }
        }
    });
}

/** recalculate defense grid
 * @param {function} callback guaranteed call when done
 * @param {boolean} silently optional if true call setAttrs with PFConst.silentParams
 * @param {number} oldversion 
 */
function recalculate(callback, silently, oldversion) {
    var done = _underscore2.default.once(function () {
        _exportsLoaderTASTheAaronSheet2.default.debug("leaving PFDefense.recalculate");
        if (typeof callback === "function") {
            callback();
        }
    }),
        numDropdowns = _underscore2.default.size(defenseDropdowns),
        doneOneDefenseDropdown = _underscore2.default.after(numDropdowns, function () {
        updateDefenses(done, true);
    });

    migrate(function () {
        applyConditions(function () {
            updateArmor(function () {
                _underscore2.default.each(defenseDropdowns, function (value, key) {
                    setDefenseDropdownMod(key, doneOneDefenseDropdown, true, null, true);
                });
            }, silently);
        }, silently);
    }, silently);
}

function registerEventHandlers() {
    _underscore2.default.each(defenseDropdowns, function (write, read) {
        on("change:" + read, _exportsLoaderTASTheAaronSheet2.default.callback(function eventsetDefenseDropdownMod(eventInfo) {
            _exportsLoaderTASTheAaronSheet2.default.debug("caught " + eventInfo.sourceAttribute + " event: " + eventInfo.sourceType);
            setDefenseDropdownMod(read, null, null, eventInfo);
        }));
    });
    on("change:uncanny_dodge", _exportsLoaderTASTheAaronSheet2.default.callback(function eventUncannyDodgeUpdate(eventInfo) {
        _exportsLoaderTASTheAaronSheet2.default.debug("caught " + eventInfo.sourceAttribute + " event: " + eventInfo.sourceType);
        if (eventInfo.sourceType === "player" || eventInfo.sourceType === "api") {
            setDefenseDropdownMod(null, null, null, eventInfo);
        }
    }));
    on("change:hd_not_bab", _exportsLoaderTASTheAaronSheet2.default.callback(function eventCMDSwitchHDandBAB(eventInfo) {
        _exportsLoaderTASTheAaronSheet2.default.debug("caught " + eventInfo.sourceAttribute + " event: " + eventInfo.sourceType);
        if (eventInfo.sourceType === "player" || eventInfo.sourceType === "api") {
            updateDefenses(null, null, eventInfo);
        }
    }));
    on(events.defenseEventsAuto, _exportsLoaderTASTheAaronSheet2.default.callback(function eventUpdateDefensesAuto(eventInfo) {
        _exportsLoaderTASTheAaronSheet2.default.debug("caught " + eventInfo.sourceAttribute + " event: " + eventInfo.sourceType);
        if (eventInfo.sourceType === "sheetworker") {
            updateDefenses(null, null, eventInfo);
        }
    }));
    on(events.defenseEventsPlayer, _exportsLoaderTASTheAaronSheet2.default.callback(function eventUpdateDefensesPlayer(eventInfo) {
        _exportsLoaderTASTheAaronSheet2.default.debug("caught " + eventInfo.sourceAttribute + " event: " + eventInfo.sourceType);
        if (eventInfo.sourceType === "player" || eventInfo.sourceType === "api") {
            updateDefenses(null, null, eventInfo);
        }
    }));
    on(events.defenseEventsEither, _exportsLoaderTASTheAaronSheet2.default.callback(function eventUpdateDefensesEither(eventInfo) {
        _exportsLoaderTASTheAaronSheet2.default.debug("caught " + eventInfo.sourceAttribute + " event: " + eventInfo.sourceType);
        updateDefenses(null, null, eventInfo);
    }));
    on("change:max-dex-source change:current-load", _exportsLoaderTASTheAaronSheet2.default.callback(function eventUpdateArmor(eventInfo) {
        _exportsLoaderTASTheAaronSheet2.default.debug("caught " + eventInfo.sourceAttribute + " event: " + eventInfo.sourceType);
        updateArmor(null, null, eventInfo);
    }));
    _underscore2.default.each(defenseArmorShieldRows, function (row) {
        _underscore2.default.each(defenseArmorShieldColumns, function (column) {
            var eventToWatch = "change:" + row + "-" + column;
            on(eventToWatch, _exportsLoaderTASTheAaronSheet2.default.callback(function eventUpdateDefenseArmorShield(eventInfo) {
                _exportsLoaderTASTheAaronSheet2.default.debug("caught " + eventInfo.sourceAttribute + " event: " + eventInfo.sourceType);
                updateArmor(null, null, eventInfo);
            }));
        });
    });
}
registerEventHandlers();
_PFLog.PFConsole.log('   PFDefense module loaded        ');
_PFLog.PFLog.modulecount++;

/***/ }),
/* 13 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.getRepeatingCommandMacro = getRepeatingCommandMacro;
exports.resetOneCommandMacro = resetOneCommandMacro;
exports.resetOneCommandMacroNoNPC = resetOneCommandMacroNoNPC;

var _underscore = __webpack_require__(2);

var _underscore2 = _interopRequireDefault(_underscore);

var _exportsLoaderTASTheAaronSheet = __webpack_require__(1);

var _exportsLoaderTASTheAaronSheet2 = _interopRequireDefault(_exportsLoaderTASTheAaronSheet);

var _PFLog = __webpack_require__(0);

var _PFConst = __webpack_require__(3);

var _PFConst2 = _interopRequireDefault(_PFConst);

var _SWUtils = __webpack_require__(4);

var SWUtils = _interopRequireWildcard(_SWUtils);

var _PFUtils = __webpack_require__(5);

var PFUtils = _interopRequireWildcard(_PFUtils);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var menuMap = {
    'class-ability': { 'name': 'original-class-features-list', 'section': 'class-ability', 'useshowinmenu': 1 },
    'feat': { 'npcMacroName': 'NPC-feat', 'npcName': ' ^{npc} ', 'name': 'original-feats-list', 'section': 'feat', 'npcLinkField': 'npc-roll', 'useshowinmenu': 1 },
    'racial-trait': { 'npcMacroName': 'NPC-racial-trait', 'npcName': ' ^{npc} ', 'name': 'original-racial-traits-list', 'section': 'racial-trait', 'npcLinkField': 'npc-roll', 'useshowinmenu': 1 },
    'trait': { 'name': 'original-traits-list', 'section': 'trait', 'useshowinmenu': 1 },
    'mythic-ability': { 'name': 'mythic-abilities', 'section': 'mythic-ability', 'useshowinmenu': 1 },
    'mythic-feat': { 'name': 'mythic-feats', 'section': 'mythic-feat', 'useshowinmenu': 1 },
    'npc-spell-like-abilities': { 'name': 'original-spell-like-abilities-list', 'section': 'npc-spell-like-abilities', 'useshowinmenu': 1 },
    'ability': { 'npcMacroName': 'NPC-ability', 'npcName': ' ^{npc} ', 'name': 'abilities', 'section': 'ability', 'groupBy': 'rule_category', 'translateGroup': 1, 'npcLinkField': 'npc-roll', 'useshowinmenu': 1 },
    'ex': { 'npcMacroName': 'NPC-ex', 'npcName': ' ^{npc} ', 'name': 'extraordinary-abilities-menu', 'section': 'ability', 'filterField': 'ability_type', 'filterValue': 'Ex', 'groupBy': 'frequency', 'translateGroup': 1, 'altUsesField': 'rounds_between', 'npcLinkField': 'npc-roll', 'useshowinmenu': 1 },
    'sp': { 'npcMacroName': 'NPC-sp', 'npcName': ' ^{npc} ', 'name': 'spell-like-abilities-menu', 'section': 'ability', 'filterField': 'ability_type', 'filterValue': 'Sp', 'groupBy': 'frequency', 'translateGroup': 1, 'altUsesField': 'rounds_between', 'npcLinkField': 'npc-roll', 'useshowinmenu': 1 },
    'su': { 'npcMacroName': 'NPC-su', 'npcName': ' ^{npc} ', 'name': 'supernatural-abilities-menu', 'section': 'ability', 'filterField': 'ability_type', 'filterValue': 'Su', 'groupBy': 'frequency', 'translateGroup': 1, 'altUsesField': 'rounds_between', 'npcLinkField': 'npc-roll', 'useshowinmenu': 1 },
    'item': { 'npcMacroName': 'NPC-item', 'npcName': ' ^{npc} ', 'name': 'items', 'section': 'item', 'usesField': '', 'bonusField': '', 'groupBy': 'equip-type', 'translateGroup': 1, 'npcLinkField': 'npc-roll', 'useshowinmenu': 1 },
    'attacks': { 'macroSuffix': '-macro', 'npcMacroSuffix': '-macro-npc', 'npcName': ' ^{npc} ', 'section': 'weapon', 'name': 'attacks', 'usesField': '', 'bonusField': '', 'groupBy': 'attack-type', 'altGroupBy': 'group', 'translateGroup': 1, 'npcLinkField': 'attack-npc-roll', 'linkField': 'attack-roll' }
};

/** creates a command macro button for a repeating section
 * it also extends to add old lists using "extendbysections"
 * @param {jsmap} baseAttribs object of schema:
 *  name:string ex:'abilities',
 *  template:string ex:'pf_generic',
 *  header:string ex:'header_image-pf_generic',
 *  section:string the name after 'repeating_' e.g. weapon,item, spells, etc
 *  bonusField:string bonus attr to add at the end of the name attr of each row, put into parenthesis, such as Burning Hands (Sp),
 *  usesField:string used or attr name with |max if instead to print uses/max,
 *  nameField:string name of header of menu written to {{#name}}
 *  linkField:string the attr of the roll button 'roll'
 *  npclinkField:string if necessary, different link field to use if the char is an NPC
 *  filterField:string optional attr to pass to _.filter or _.pick , if 1 then display, if 0 then don't , ex:'showinmenu'
 *  filterValue:string if filter should be custom (not 1/0) then fill in value ex: 'Sp', cannot be '0' (zero)
 *  groupByField:string optional name of attr to group by
 *  translateGroup: if ^{} should be placed around groupby field value
 *  translateBonus: if ^{} should be placed around bonus field value
 *  groupMap:{key:string,key:string} if instead of grouping by the groupField itself, pass the value to a map and group by the result.
 * @param {function(string)} callback Pass string for command macro as first param, or ""
 */
function getRepeatingCommandMacro(baseAttribs, callback, header) {
    var done = function done(macro) {
        if (typeof callback === "function") {
            callback(macro);
        }
    },
        defaultTemplate = "pf_block",
        defaultHeader = "header_image-pf_block",
        defaultName = "ability-menus",
        nameField = "name",
        bonusField = "",
        usesField = "",
        altUsesField = "",
        groupByField = "",
        altGroupByField = "",
        linkField = "roll",
        filterField = "",
        filterValue = "",
        baseMacro = "&{template:REPLACETEMPLATE} @{toggle_attack_accessible} @{toggle_rounded_flag}{{color=@{rolltemplate_color}}} {{header_image=@{REPLACEHEADER}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle=REPLACESUBTITLE}} {{name=REPLACENPC^{REPLACENAME}}}",
        baseCommand = " [ REPLACEBUTTON ](~@{character_id}|REPLACELINK)",
        noRows = " {{description=^{none-available} }}";
    if (!baseAttribs || !baseAttribs.section || !baseAttribs.linkField) {
        _exportsLoaderTASTheAaronSheet2.default.error("PFMenus.getRepeatingCommandMacro cannot process", baseAttribs);
        done("");
        return;
    }
    try {
        header = header || "";
        baseMacro = baseMacro.replace('REPLACETEMPLATE', baseAttribs.template || defaultTemplate);
        baseMacro = baseMacro.replace('REPLACEHEADER', baseAttribs.header || defaultHeader);
        baseMacro = baseMacro.replace('REPLACENAME', baseAttribs.name || defaultName);
        baseMacro = baseMacro.replace('REPLACESUBTITLE', '');
        baseMacro = baseMacro.replace(/REPLACENPC/g, baseAttribs.npcName || '');
        baseMacro += header;
        nameField = baseAttribs.nameField || nameField;
        bonusField = baseAttribs.bonusField || bonusField;
        usesField = baseAttribs.usesField || usesField;
        linkField = baseAttribs.linkField || linkField;
        groupByField = baseAttribs.groupBy || groupByField;
        filterField = baseAttribs.filterField || filterField;
        altUsesField = baseAttribs.altUsesField || altUsesField;
        altGroupByField = baseAttribs.altGroupBy || '';
        // TAS.debug("PFMenus.getRepeatingCommandMacro attribs, menu so far:",baseAttribs,baseMacro);
    } catch (outerErr) {
        _exportsLoaderTASTheAaronSheet2.default.error("PFMenus.getRepeatingCommandMacro outererror for " + baseAttribs.section, outerErr);
        done("");
        return;
    }
    getSectionIDs("repeating_" + baseAttribs.section, function (ids) {
        var fields = [],
            prefix = "repeating_" + baseAttribs.section + "_";
        try {
            if (!ids || _underscore2.default.size(ids) <= 0) {
                done(baseMacro + noRows);
                return;
            }
            _underscore2.default.each(ids, function (id) {
                var linePrefix = prefix + id + "_";
                fields.push(linePrefix + nameField);
                if (baseAttribs.useshowinmenu) {
                    fields.push(linePrefix + 'showinmenu');
                }
                if (altGroupByField) {
                    fields.push(linePrefix + altGroupByField);
                }
                if (bonusField) {
                    fields.push(linePrefix + bonusField);
                }
                if (usesField) {
                    fields.push(linePrefix + usesField);
                    fields.push(linePrefix + usesField + "_max");
                }
                if (filterField) {
                    fields.push(linePrefix + filterField);
                }
                if (groupByField) {
                    fields.push(linePrefix + groupByField);
                }
                if (altUsesField) {
                    fields.push(linePrefix + altUsesField);
                }
            });
        } catch (outerError2) {
            _exportsLoaderTASTheAaronSheet2.default.error("PFMenus.getRepeatingCommandMacro outererror 2 assembling all attrs in rows for " + baseAttribs.section, outerError2);
            done("");
            return;
        }
        fields.push('_reporder_repeating_' + baseAttribs.section);
        getAttrs(fields, function (v) {
            var restOfMacro = "",
                totalMacro = "",
                orderedList,
                repList,
                customSorted = 0,
                rowCounter = 20;
            try {
                _exportsLoaderTASTheAaronSheet2.default.debug('PFMenus.getRepeatingCommandMacro returned with', v);
                if (v['_reporder_repeating_' + baseAttribs.section]) {
                    repList = v['_reporder_repeating_' + baseAttribs.section].split(",");
                    repList = _underscore2.default.map(repList, function (ID) {
                        return ID.toLowerCase();
                    });
                    orderedList = _underscore2.default.intersection(_underscore2.default.union(repList, ids), ids);
                    customSorted = 1;
                } else {
                    orderedList = ids;
                }
                restOfMacro = _underscore2.default.chain(orderedList).map(function (id) {
                    var linePrefix = prefix + id + '_',
                        buttonName = '',
                        bonus = '',
                        uses = '',
                        max = '',
                        usesStr = '',
                        tempshow = 0,
                        retObj = {
                        'id': id,
                        'name': v[linePrefix + 'name'] || id,
                        'showinmenu': 1
                    };
                    try {
                        if (usesField) {
                            uses = v[linePrefix + usesField] || '';
                            max = v[linePrefix + usesField + "_max"] || '';
                        }
                        if (altGroupByField && v[linePrefix + altGroupByField]) {
                            retObj.group = v[linePrefix + altGroupByField];
                            retObj.doNotTranslate = true;
                        } else if (groupByField && v[linePrefix + groupByField]) {
                            if (baseAttribs.groupMap) {
                                if (baseAttribs.groupMap[v[linePrefix + groupByField]]) {
                                    retObj.group = baseAttribs.groupMap[v[linePrefix + groupByField]];
                                } else {
                                    retObj.group = 'AAAAAA';
                                }
                            } else if (groupByField === 'frequency') {
                                switch (v[linePrefix + groupByField]) {
                                    case 'perday':
                                        retObj.group = '';
                                        if (max) {
                                            retObj.group = max + ' ';
                                        }
                                        retObj.group += (baseAttribs.translateGroup ? '^{' : '') + v[linePrefix + groupByField] + (baseAttribs.translateGroup ? '}' : '');
                                        retObj.doNotTranslate = 1;
                                        break;
                                    case 'not-applicable':
                                        retObj.group = 'AAAAAA';
                                        uses = 0;
                                        max = 0;
                                        break;
                                    case 'constant':
                                    case 'atwill':
                                        retObj.group = v[linePrefix + groupByField];
                                        uses = 0;
                                        max = 0;
                                        break;
                                    case 'hexfreq':
                                    case 'other':
                                        retObj.group = v[linePrefix + groupByField];
                                        break;
                                    case 'everyrounds':
                                        retObj.group = v[linePrefix + groupByField];
                                        if (v[linePrefix + altUsesField]) {
                                            uses = v[linePrefix + altUsesField];
                                            max = 0;
                                        }
                                        break;
                                    default:
                                        retObj.group = v[linePrefix + groupByField];
                                        break;
                                }
                            } else {
                                retObj.group = v[linePrefix + groupByField];
                            }
                        } else {
                            retObj.group = 'AAAAAA';
                        }
                        if (retObj.group !== 'AAAAAA' && baseAttribs.translateGroup && !retObj.doNotTranslate) {
                            retObj.group = '^{' + retObj.group + '}';
                        }
                        if (usesField) {
                            if (uses && max) {
                                usesStr = ' (' + uses + '/' + max + ')';
                            } else if (uses) {
                                usesStr = ' (' + uses + ')';
                            }
                        }
                        if (filterField) {
                            if (baseAttribs.filterValue) {
                                if (String(v[linePrefix + filterField]) === String(baseAttribs.filterValue)) {
                                    retObj.showinmenu = 1;
                                } else {
                                    retObj.showinmenu = 0;
                                }
                            } else {
                                retObj.showinmenu = parseInt(v[linePrefix + filterField], 10) || 0;
                            }
                        } else {
                            retObj.showinmenu = 1;
                        }
                        if (retObj.filterField !== 'showinmenu' && baseAttribs.useshowinmenu) {
                            tempshow = parseInt(v[linePrefix + 'showinmenu'], 10) || 0;
                            retObj.showinmenu = retObj.showinmenu && tempshow;
                        }
                        if (bonusField && v[linePrefix + bonusField] && v[linePrefix + bonusField] !== 'not-applicable') {
                            bonus = ' (' + (baseAttribs.translateBonus ? '^{' : '') + v[linePrefix + bonusField] + (baseAttribs.translateBonus ? '}' : '') + ')';
                        }
                        buttonName = retObj.name + bonus + usesStr;
                        retObj.chatLink = '[' + SWUtils.escapeForRollTemplate(SWUtils.escapeForChatLinkButton(buttonName)) + '](~@{character_id}|' + linePrefix + linkField + ')';
                    } catch (builderr) {
                        _exportsLoaderTASTheAaronSheet2.default.error("PFMenus.getRepeatingCommandMacro builderr object for id " + id, builderr);
                    } finally {
                        return retObj;
                    }
                }).filter(function (o) {
                    return o.showinmenu;
                }).sortBy('group');
                if (groupByField === 'frequency') {
                    restOfMacro = restOfMacro.reverse();
                }
                restOfMacro = restOfMacro.groupBy('group').reduce(function (m, rowList, groupName) {
                    var restOflink = '';
                    try {
                        if (groupName !== 'AAAAAA' && _underscore2.default.size(rowList) > 0) {
                            m += ' {{row' + String(rowCounter) + '=' + SWUtils.escapeForRollTemplate(groupName) + '}}';
                            rowCounter++;
                        }
                        restOflink = _underscore2.default.reduce(rowList, function (mi, o) {
                            mi += ' ' + o.chatLink;
                            return mi;
                        }, ' {{row' + String(rowCounter) + '=');
                        m += restOflink + '}}';
                        rowCounter++;
                    } catch (strerror) {
                        _exportsLoaderTASTheAaronSheet2.default.error("PFMenus.getRepeatingCommandMacro strerror creating string for group " + groupName, strerror);
                    } finally {
                        return m;
                    }
                }, "").value();
            } catch (innererror2) {
                _exportsLoaderTASTheAaronSheet2.default.error("PFMenus.getRepeatingCommandMacro innererror2 for " + baseAttribs.section, innererror2);
            } finally {
                if (restOfMacro) {
                    totalMacro = baseMacro + restOfMacro;
                } else {
                    totalMacro = baseMacro + noRows;
                }
                done(totalMacro);
            }
        });
    });
}
/**resetOneCommandMacro sets command button macro with all rows from one ability list.
 * calls PFMenus.getRepeatingCommandMacro
 * sets the returned string to macro with attribute name: section+"_buttons_macro"
 *@param {string} section name after "repeating_"
 *@param {boolean} isNPC  true if npc false or not needed otherwise.
 *@param {function} callback  when done
 */
function resetOneCommandMacro(menuName, isNPC, callback, header, groupMap) {
    var done = _underscore2.default.once(function () {
        //TAS.debug("leaving PFMenus.resetOneCommandMacro: " + menuName);
        if (typeof callback === "function") {
            callback();
        }
    }),
        params = {},
        macroName = menuName;
    try {
        //this is here because putting it above cloning was not working, 
        //so this makes sure new instance gets created each time
        params = {
            'usesField': 'used',
            'linkField': 'roll',
            'nameField': 'name',
            'bonusField': 'ability_type',
            'translateBonus': 1,
            'macroSuffix': '_buttons_macro'
        };
        if (menuMap[menuName]) {
            params = _underscore2.default.extend(params, menuMap[menuName]);
            if (isNPC) {
                if (menuMap[menuName].npcLinkField) {
                    params.linkField = menuMap[menuName].npcLinkField;
                }
                if (menuMap[menuName].npcMacroName) {
                    macroName = menuMap[menuName].npcMacroName;
                }
                if (menuMap[menuName].npcMacroSuffix) {
                    params.macroSuffix = menuMap[menuName].npcMacroSuffix;
                }
            } else {
                if (params.npcName) {
                    params.npcName = '';
                }
            }
        } else {
            _exportsLoaderTASTheAaronSheet2.default.error("PFMenus.resetOneCommandMacro Could not find parameters for menu " + menuName);
            done();
            return;
        }
        if (groupMap && params.groupBy) {
            params.groupMap = groupMap;
        }
        //TAS.debug("PFMenus.resetOneCommandMacro getting rollmenu for "+menuName,params);
        getRepeatingCommandMacro(params, function (newMacro) {
            var setter = {};
            //TAS.debug("PFMenus.resetOneCommandMacro returned with "+menuName+", writing to "+macroName + params.macroSuffix,newMacro);
            setter[macroName + params.macroSuffix] = newMacro || "";
            setAttrs(setter, _PFConst2.default.silentParams, done);
        }, header);
    } catch (errouter) {
        _exportsLoaderTASTheAaronSheet2.default.error("PFMenus.resetOnceCommandMacro, errouter :", errouter);
    }
}
/** same as resetOneCommandMacro if you do not know the npc status 
 *@param {string} section name after "repeating_"
 *@param {function} callback  when done
 */
function resetOneCommandMacroNoNPC(section, callback, header) {
    getAttrs(['is_npc'], function (v) {
        resetOneCommandMacro(section, parseInt(v.is_npc, 10) || 0, callback, header);
    });
}

_PFLog.PFConsole.log('   PFMenus module loaded          ');
_PFLog.PFLog.modulecount++;

/***/ }),
/* 14 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.classesUsingOtherSpellLists = exports.spellLevels = undefined;
exports.resetCommandMacro = resetCommandMacro;
exports.createAttackEntryFromRow = createAttackEntryFromRow;
exports.updateAssociatedAttack = updateAssociatedAttack;
exports.updateSpellsCasterLevelRelated = updateSpellsCasterLevelRelated;
exports.updateSpellsCasterAbilityRelated = updateSpellsCasterAbilityRelated;
exports.importFromCompendium = importFromCompendium;
exports.migrateRepeatingMacros = migrateRepeatingMacros;
exports.migrate = migrate;
exports.recalculate = recalculate;

var _underscore = __webpack_require__(2);

var _underscore2 = _interopRequireDefault(_underscore);

var _exportsLoaderTASTheAaronSheet = __webpack_require__(1);

var _exportsLoaderTASTheAaronSheet2 = _interopRequireDefault(_exportsLoaderTASTheAaronSheet);

var _PFLog = __webpack_require__(0);

var _PFConst = __webpack_require__(3);

var _PFConst2 = _interopRequireDefault(_PFConst);

var _SWUtils = __webpack_require__(4);

var SWUtils = _interopRequireWildcard(_SWUtils);

var _PFUtils = __webpack_require__(5);

var PFUtils = _interopRequireWildcard(_PFUtils);

var _PFMigrate = __webpack_require__(6);

var PFMigrate = _interopRequireWildcard(_PFMigrate);

var _PFMacros = __webpack_require__(9);

var PFMacros = _interopRequireWildcard(_PFMacros);

var _PFSpellOptions = __webpack_require__(38);

var PFSpellOptions = _interopRequireWildcard(_PFSpellOptions);

var _PFAttackOptions = __webpack_require__(11);

var PFAttackOptions = _interopRequireWildcard(_PFAttackOptions);

var _PFAttackGrid = __webpack_require__(7);

var PFAttackGrid = _interopRequireWildcard(_PFAttackGrid);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var
//spell levels for repeating spell sections
spellLevels = exports.spellLevels = ["0", "1", "2", "3", "4", "5", "6", "7", "8", "9"],

//for parsing: classes without their own spell lists plus bloodrager as sorcerer, whose list is not in compendium - hunter handled special
classesUsingOtherSpellLists = exports.classesUsingOtherSpellLists = {
    "arcanist": "wizard",
    "investigator": "alchemist",
    "warpriest": "cleric",
    "skald": "bard",
    "bloodrager": "sorcerer"
};
var defaultRepeatingMacro = '&{template:pf_spell} @{toggle_spell_accessible} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_spell}}} {{name=@{name}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle}} {{deafened_note=@{SpellFailureNote}}} @{spell_options}',
    defaultRepeatingMacroMap = {
    '&{template:': { 'current': 'pf_spell}', old: ['pf_generic}', 'pf_block}'] },
    '@{toggle_spell_accessible}': { 'current': '@{toggle_spell_accessible}' },
    '@{toggle_rounded_flag}': { 'current': '@{toggle_rounded_flag}' },
    '{{color=': { 'current': '@{rolltemplate_color}}}' },
    '{{header_image=': { 'current': '@{header_image-pf_spell}}}' },
    '{{name=': { 'current': '@{name}}}' },
    '{{character_name=': { 'current': '@{character_name}}}' },
    '{{character_id=': { 'current': '@{character_id}}}' },
    '{{subtitle}}': { 'current': '{{subtitle}}' },
    '{{deafened_note=': { 'current': '@{SpellFailureNote}}}' },
    '@{spell_options}': { 'current': '@{spell_options}' } },
    defaultDeletedMacroAttrs = ['@{toggle_accessible_flag}'];

function resetCommandMacro(eventInfo, callback) {
    //TAS.debug("at PFSpells.resetCommandMacro");
    var done = _underscore2.default.once(function () {
        if (typeof callback === "function") {
            callback();
        }
    }),
        repeatingSpellAttrs = ["spell_level", "spellclass_number", "name", "school", "slot", "metamagic", "used", "isDomain", "isMythic"],
        class0BaseMacro = "&{template:pf_block} @{toggle_spell_accessible} @{toggle_rounded_flag}{{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_block}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle}} {{name=@{spellclass-0-name} ^{spells}}} {{row01=**^{checks}**}} {{row02=[^{caster-level-check}](~@{character_id}|Spell-Class-0-CL-Check) [^{concentration-check}](~@{character_id}|Concentration-Check-0) [^{spell-failure}](~@{character_id}|Spell-Fail-Check)}}",
        class1BaseMacro = "&{template:pf_block} @{toggle_spell_accessible} @{toggle_rounded_flag}{{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_block}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle}} {{name=@{spellclass-1-name} ^{spells}}} {{row01=**^{checks}**}} {{row02=[^{caster-level-check}](~@{character_id}|Spell-Class-1-CL-Check) [^{concentration-check}](~@{character_id}|Concentration-Check-1) [^{spell-failure}](~@{character_id}|Spell-Fail-Check)}}",
        class2BaseMacro = "&{template:pf_block} @{toggle_spell_accessible} @{toggle_rounded_flag}{{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_block}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle}} {{name=@{spellclass-2-name} ^{spells}}} {{row01=**^{checks}**}} {{row02=[^{caster-level-check}](~@{character_id}|Spell-Class-2-CL-Check) [^{concentration-check}](~@{character_id}|Concentration-Check-2) [^{spell-failure}](~@{character_id}|Spell-Fail-Check)}}",
        npcClass0BaseMacro = "&{template:pf_block} @{toggle_spell_accessible} @{toggle_rounded_flag}{{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_block}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle}} {{name=^{npc} @{spellclass-0-name} ^{spells}}} {{row01=**^{checks}**}} {{row02=[^{caster-level-check}](~@{character_id}|Spell-Class-0-CL-Check) [^{concentration-check}](~@{character_id}|Concentration-Check-0) [^{spell-failure}](~@{character_id}|Spell-Fail-Check)}}",
        npcClass1BaseMacro = "&{template:pf_block} @{toggle_spell_accessible} @{toggle_rounded_flag}{{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_block}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle}} {{name=^{npc} @{spellclass-1-name} ^{spells}}} {{row01=**^{checks}**}} {{row02=[^{caster-level-check}](~@{character_id}|Spell-Class-1-CL-Check) [^{concentration-check}](~@{character_id}|Concentration-Check-1) [^{spell-failure}](~@{character_id}|Spell-Fail-Check)}}",
        npcClass2BaseMacro = "&{template:pf_block} @{toggle_spell_accessible} @{toggle_rounded_flag}{{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_block}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle}} {{name=^{npc} @{spellclass-2-name} ^{spells}}} {{row01=**^{checks}**}} {{row02=[^{caster-level-check}](~@{character_id}|Spell-Class-2-CL-Check) [^{concentration-check}](~@{character_id}|Concentration-Check-2) [^{spell-failure}](~@{character_id}|Spell-Fail-Check)}}",
        pcBaseMacro = [class0BaseMacro, class1BaseMacro, class2BaseMacro],
        npcBaseMacro = [npcClass0BaseMacro, npcClass1BaseMacro, npcClass2BaseMacro],
        resetToDefault = function resetToDefault(configV) {
        var attrs = [],
            i = 0;
        for (i = 0; i < 3; i++) {
            if (configV["spellclass-" + i + "-book"].slice(13) !== pcBaseMacro[i].slice(13)) {
                attrs["spellclass-" + i + "-book"] = pcBaseMacro[i];
            }
            if (configV["spellclass-" + i + "-book-npc"].slice(13) !== npcBaseMacro[i].slice(13)) {
                attrs["spellclass-" + i + "-book-npc"] = npcBaseMacro[i];
            }
        }
        if (_underscore2.default.size(attrs) > 0) {
            setAttrs(attrs, {
                silent: true
            }, done);
        } else {
            done();
        }
    };
    getAttrs(["spellclass-0-casting_type", "spellclass-1-casting_type", "spellclass-2-casting_type", "spellclass-0-hide_unprepared", "spellclass-1-hide_unprepared", "spellclass-2-hide_unprepared", "spellclass-0-book", "spellclass-1-book", "spellclass-2-book", "spellclass-0-book-npc", "spellclass-1-book-npc", "spellclass-2-book-npc", "spellclass-0-show_domain_spells", "spellclass-1-show_domain_spells", "spellclass-2-show_domain_spells", "spellmenu_groupby_school", "spellmenu_show_uses", "mythic-adventures-show"], function (configV) {
        var isPrepared = [],
            showDomain = [],
            hideUnprepared = [],
            groupBySchool = 0,
            showUses = 0,
            usesMythic = 0;
        try {
            isPrepared = [parseInt(configV["spellclass-0-casting_type"], 10) === 2, parseInt(configV["spellclass-1-casting_type"], 10) === 2, parseInt(configV["spellclass-2-casting_type"], 10) === 2];
            showDomain = [parseInt(configV["spellclass-0-show_domain_spells"], 10) || 0, parseInt(configV["spellclass-1-show_domain_spells"], 10) || 0, parseInt(configV["spellclass-2-show_domain_spells"], 10) || 0];
            hideUnprepared = [parseInt(configV["spellclass-0-hide_unprepared"], 10) || 0, parseInt(configV["spellclass-1-hide_unprepared"], 10) || 0, parseInt(configV["spellclass-2-hide_unprepared"], 10) || 0];
            groupBySchool = parseInt(configV["spellmenu_groupby_school"], 10) || 0;
            showUses = parseInt(configV["spellmenu_show_uses"], 10) || 0;
            usesMythic = parseInt(configV["mythic-adventures-show"], 10) || 0;
        } catch (outererr) {
            _exportsLoaderTASTheAaronSheet2.default.error("PFSpells.resetCommandMacro, error assembling global vars", outererr);
            done();
            return;
        }
        getSectionIDs("repeating_spells", function (idarray) {
            var attrs = {};
            //TAS.debug(idarray);
            if (!idarray || idarray.length === 0) {
                resetToDefault(configV);
                return;
            }
            getAttrs(["_reporder_repeating_spells"], function (repValues) {
                //TAS.debug("PFSpells.resetCommandMacro order repValues:",repValues);
                var spellAttrs;
                try {
                    spellAttrs = _underscore2.default.chain(idarray).map(function (id) {
                        var prefix = 'repeating_spells_' + SWUtils.getRepeatingIDStr(id),
                            retVal = [];
                        _underscore2.default.each(repeatingSpellAttrs, function (attr) {
                            retVal.push(prefix + attr);
                        });
                        return retVal;
                    }).flatten().value();
                } catch (errouter2) {
                    _exportsLoaderTASTheAaronSheet2.default.error("PFSpells.resetCommandMacro errouter", errouter2);
                    done();
                    return;
                }
                getAttrs(spellAttrs, function (values) {
                    //TAS.debug(values);
                    var orderedList,
                        repList,
                        filteredIds,
                        spellsByClass,
                        npcSpellsArray,
                        customSorted = 0,
                        spellsPC,
                        spellsNPC,
                        i,
                        groups = [],
                        spellSchoolReg = /[^\(\[]*/,
                        attrs = {},
                        rollTemplateCounter = 0,
                        tempstr;
                    try {
                        if (!_underscore2.default.isUndefined(repValues._reporder_repeating_spells) && repValues._reporder_repeating_spells !== "") {
                            repList = repValues._reporder_repeating_spells.split(",");
                            repList = _underscore2.default.map(repList, function (ID) {
                                return ID.toLowerCase();
                            });
                            orderedList = _underscore2.default.intersection(_underscore2.default.union(repList, idarray), idarray);
                            customSorted = 1;
                        } else {
                            orderedList = idarray;
                        }
                        spellsByClass = _underscore2.default.chain(orderedList).map(function (id) {
                            var prefix = '',
                                metaMagic = 0,
                                spellSlot = 0,
                                matches,
                                schoolForGroup = '',
                                levelstr = '',
                                rawlevel = 0,
                                spellClass = '',
                                classStr = '',
                                isDomain = 0,
                                isMythic = 0,
                                uses = 0,
                                name = '';
                            try {
                                prefix = "repeating_spells_" + SWUtils.getRepeatingIDStr(id);
                                metaMagic = parseInt(values[prefix + "metamagic"], 10) || 0;
                                spellSlot = metaMagic ? values[prefix + "slot"] || values[prefix + "spell_level"] : values[prefix + "spell_level"];
                                schoolForGroup = values[prefix + "school"] || "";
                                matches = spellSchoolReg.exec(values[prefix + "school"] || "");
                                if (matches && matches[0]) {
                                    schoolForGroup = SWUtils.trimBoth(matches[0]);
                                    schoolForGroup = schoolForGroup[0].toUpperCase() + schoolForGroup.slice(1).toLowerCase();
                                }
                                levelstr = "^{level} " + String(spellSlot);
                                rawlevel = parseInt(values[prefix + "spell_level"], 10) || 0;
                                spellClass = parseInt(values[prefix + "spellclass_number"], 10) || 0;
                                classStr = "class" + (values[prefix + "spellclass_number"] || "0");
                                isDomain = parseInt(values[prefix + "isDomain"], 10) || 0;
                                isMythic = usesMythic * parseInt(values[prefix + "isMythic"], 10) || 0;
                                uses = parseInt(values[prefix + "used"], 10) || 0;
                                name = values[prefix + "name"] || "";
                            } catch (errmap) {
                                _exportsLoaderTASTheAaronSheet2.default.error("PFSpells.resetCommandMacro errmap on id " + id, errmap);
                            } finally {
                                return { 'id': id,
                                    'level': spellSlot,
                                    'levelstr': levelstr,
                                    'rawlevel': rawlevel,
                                    'school': schoolForGroup,
                                    'spellClass': spellClass,
                                    'spellClassstr': classStr,
                                    'isDomain': isDomain,
                                    'isMythic': isMythic,
                                    'uses': uses,
                                    'name': name
                                };
                            }
                        }).omit(function (spellObj) {
                            return hideUnprepared[spellObj.spellClass] && isPrepared[spellObj.spellClass] && spellObj.uses === 0 && !(showDomain[spellObj.spellClass] && spellObj.isDomain);
                        }).map(function (spellObj) {
                            var spellName = spellObj.name,
                                usesStr = "",
                                dstr = "",
                                mystr = "",
                                lvlstr = "",
                                spacestr = "";
                            try {
                                spellName = SWUtils.escapeForChatLinkButton(spellName);
                                spellName = SWUtils.escapeForRollTemplate(spellName);
                                spellName = SWUtils.trimBoth(spellName);
                                usesStr = showUses ? "(" + spellObj.uses + ")" : "";
                                if (showUses && isPrepared[spellObj.spellClass] && spellObj.isDomain) {
                                    usesStr = "";
                                }
                                mystr = spellObj.isMythic ? "&#x1f11c;" : ""; //   // "&#x24A8;":"";//"(m)":"";//
                                dstr = spellObj.isDomain ? "&#x1f113;" : ""; // "";  //"&#x249F;":"";//"(d)":"";//
                                lvlstr = groupBySchool ? spellObj.level + ":" : "";
                                spacestr = usesStr || mystr || dstr ? " " : "";
                                spellName = " [" + lvlstr + spellName + spacestr + dstr + mystr + usesStr + "]";
                            } catch (maperr) {
                                _exportsLoaderTASTheAaronSheet2.default.error("PFSpells.resetCommandMacro error creating link name:", maperr);
                            } finally {
                                spellObj.pcChatLink = spellName + "(~@{character_id}|repeating_spells_" + spellObj.id + "_roll)";
                                spellObj.npcChatLink = spellName + "(~@{character_id}|repeating_spells_" + spellObj.id + "_npc-roll)";
                                return spellObj;
                            }
                        }).value();
                        if (!customSorted) {
                            spellsByClass = _underscore2.default.sortBy(spellsByClass, 'level');
                        }
                        spellsByClass = _underscore2.default.chain(spellsByClass).groupBy('spellClassstr').mapObject(function (classArray) {
                            return _underscore2.default.chain(classArray).sortBy(groupBySchool ? 'school' : 'levelstr').groupBy(groupBySchool ? 'school' : 'levelstr').value();
                        }).value();

                        //TAS.debug("#############################");
                        //TAS.debug(spellsByClass);
                        //TAS.debug("#############################");

                        //was 2 sets of 3 reduces but can do this faster with 3 each loops and populating both at once 
                        spellsPC = {};
                        spellsNPC = {};
                        rollTemplateCounter = 10;
                        _underscore2.default.each(spellsByClass, function (groupList, classGroup) {
                            var pcstr = "",
                                npcstr = "";
                            _underscore2.default.each(groupList, function (spellList, groupName) {
                                rollTemplateCounter++;
                                pcstr += " {{row" + rollTemplateCounter + "=**" + groupName + "**}}";
                                npcstr += " {{row" + rollTemplateCounter + "=**" + groupName + "**}}";
                                rollTemplateCounter++;
                                pcstr += " {{row" + rollTemplateCounter + "=";
                                npcstr += " {{row" + rollTemplateCounter + "=";
                                _underscore2.default.each(spellList, function (spellObj) {
                                    pcstr += spellObj.pcChatLink;
                                    npcstr += spellObj.npcChatLink;
                                });
                                pcstr += "}}";
                                npcstr += "}}";
                            });
                            spellsPC[classGroup] = pcstr;
                            spellsNPC[classGroup] = npcstr;
                        });
                        //TAS.debug("#############################");
                        //TAS.debug(spellsPC,spellsNPC);
                        //TAS.debug("#############################");

                        for (i = 0; i < 3; i++) {
                            tempstr = pcBaseMacro[i] + spellsPC['class' + i];
                            if (tempstr && configV["spellclass-" + i + "-book"].slice(13) !== tempstr.slice(13)) {
                                attrs["spellclass-" + i + "-book"] = tempstr;
                            } else if (!tempstr && configV["spellclass-" + i + "-book"].slice(13) !== pcBaseMacro[i].slice(13)) {
                                attrs["spellclass-" + i + "-book"] = "";
                            }
                            tempstr = npcBaseMacro[i] + spellsNPC['class' + i];
                            if (tempstr && configV["spellclass-" + i + "-book-npc"].slice(13) !== tempstr.slice(13)) {
                                attrs["spellclass-" + i + "-book-npc"] = tempstr;
                            } else if (!tempstr && configV["spellclass-" + i + "-book-npc"].slice(13) !== npcBaseMacro[i].slice(13)) {
                                attrs["spellclass-" + i + "-book-npc"] = "";
                            }
                        }
                        if (_underscore2.default.size(attrs) > 0) {
                            setAttrs(attrs, {
                                silent: true
                            }, done);
                        } else {
                            done();
                        }
                    } catch (err) {
                        _exportsLoaderTASTheAaronSheet2.default.error("PFSpells.resetCommandMacro", err);
                        done();
                    }
                });
            });
        });
    });
}

function getSpellTotals(ids, v, setter) {
    var doNotProcess = 0,
        casterTypes = [0, 0, 0],
        totalPrepped = [[0, 0, 0, 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0, 0, 0, 0]],
        totalListed = [[0, 0, 0, 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0, 0, 0, 0]];
    try {
        doNotProcess = parseInt(v.total_spells_manually, 10) || 0;
        casterTypes[0] = parseInt(v['spellclass-0-casting_type'], 10) || 0;
        if (parseInt(v.spellclasses_multiclassed, 10)) {
            casterTypes[1] = parseInt(v['spellclass-1-casting_type'], 10) || 0;
            casterTypes[2] = parseInt(v['spellclass-2-casting_type'], 10) || 0;
            if (doNotProcess) {
                if (casterTypes[0] === 1 && casterTypes[1] < 2 && casterTypes[2] < 2) {
                    return setter;
                }
            }
        } else {
            if (doNotProcess && casterTypes[0] === 1) {
                return setter;
            }
        }

        /*       totalPrepped = _.reduce(PFConst.spellClassIndexes, function (memo, classidx) {
                   memo[classidx] = _.reduce(spellLevels, function (imemo, spelllevel) {
                       imemo[spelllevel] = 0;
                       return imemo;
                   }, {});
                   return memo;
               }, {});
               totalListed =  _.mapObject(totalPrepped, _.clone);*/

        _underscore2.default.each(ids, function (id) {
            var prefix = "repeating_spells_" + SWUtils.getRepeatingIDStr(id),
                spellLevel,
                classNum = 0,
                metamagic = 0,
                slot = 0,
                truelevel = 0,
                uses = 0;
            spellLevel = parseInt(v[prefix + "spell_level"], 10);
            if (!isNaN(spellLevel)) {
                classNum = parseInt(v[prefix + "spellclass_number"], 10) || 0;
                metamagic = parseInt(v[prefix + "metamagic"], 10) || 0;
                slot = isNaN(parseInt(v[prefix + "slot"], 10)) ? spellLevel : parseInt(v[prefix + "slot"], 10);
                truelevel = metamagic ? slot : spellLevel;
                //TAS.debug("getSpellTotals", "spellLevel", spellLevel, "classNum", classNum, "metamagic", metamagic, "slot", slot, truelevel, "truelevel", uses, "uses");
                if (!doNotProcess) {
                    uses = parseInt(v[prefix + "used"], 10) || 0;
                    totalPrepped[classNum][truelevel] += uses;
                    totalListed[classNum][truelevel] += 1;
                } else if (casterTypes[classNum] !== 1) {
                    //if do not total,no need tosee total listed if not spontaneous
                    totalListed[classNum][truelevel] += 1;
                }
            } else {
                _exportsLoaderTASTheAaronSheet2.default.warn("PFSpells.getSpellTotals: Spelllevel NAN: spellLevel:" + spellLevel);
            }
        });

        _underscore2.default.each(_PFConst2.default.spellClassIndexes, function (classidx) {
            _underscore2.default.each(spellLevels, function (spellLevel) {
                var prefix = "spellclass-" + classidx + "-level-" + spellLevel;
                if ((parseInt(v[prefix + "-total-listed"], 10) || 0) !== totalListed[classidx][spellLevel]) {
                    setter[prefix + "-total-listed"] = totalListed[classidx][spellLevel];
                }
                if ((parseInt(v[prefix + "-spells-prepared"], 10) || 0) !== totalPrepped[classidx][spellLevel]) {
                    setter[prefix + "-spells-prepared"] = totalPrepped[classidx][spellLevel];
                    setter[prefix + spellLevel + "-spells-per-day"] = totalPrepped[classidx][spellLevel];
                }
            });
        });
    } catch (err) {
        _exportsLoaderTASTheAaronSheet2.default.error("PFSpells.getSpellTotals", err);
    } finally {
        return setter;
    }
}
function resetSpellsTotals(dummy, eventInfo, callback, silently) {
    var done = _underscore2.default.once(function () {
        _exportsLoaderTASTheAaronSheet2.default.debug("leaving PFSpells.resetSpellsTotals");
        if (typeof callback === "function") {
            callback();
        }
    });

    getSectionIDs("repeating_spells", function (ids) {
        var fields = ['total_spells_manually', 'spellclasses_multiclassed', 'spellclass-0-casting_type', 'spellclass-1-casting_type', 'spellclass-2-casting_type'],
            rowattrs = ['spellclass_number', 'spell_level', 'slot', 'metamagic', 'used'];
        try {
            _underscore2.default.each(ids, function (id) {
                var prefix = "repeating_spells_" + SWUtils.getRepeatingIDStr(id);
                _underscore2.default.each(rowattrs, function (attr) {
                    fields.push(prefix + attr);
                });
            });
            _underscore2.default.each(_PFConst2.default.spellClassIndexes, function (classidx) {
                _underscore2.default.each(spellLevels, function (spellLevel) {
                    fields.push("spellclass-" + classidx + "-level-" + spellLevel + "-total-listed");
                    fields.push("spellclass-" + classidx + "-level-" + spellLevel + "-spells-prepared");
                });
            });
            getAttrs(fields, function (v) {
                var setter = {};
                try {
                    setter = getSpellTotals(ids, v, setter);
                    if (_underscore2.default.size(setter)) {
                        setAttrs(setter, _PFConst2.default.silentParams, done);
                    } else {
                        done();
                    }
                } catch (innererr) {
                    _exportsLoaderTASTheAaronSheet2.default.error("PFSpells.resetSpellsTotals innererror:", innererr);
                    done();
                }
            });
        } catch (err) {
            _exportsLoaderTASTheAaronSheet2.default.error("PFSpells.resetSpellsTotals:", err);
            done();
        }
    });
}
/* ******************************** REPEATING SPELL FUNCTIONS ********************************** */
function setAttackEntryVals(spellPrefix, weaponPrefix, v, setter, noName) {
    var notes = "",
        attackType = "";
    setter = setter || {};
    try {
        attackType = PFUtils.findAbilityInString(v[spellPrefix + "spell-attack-type"]);
        if (v[spellPrefix + "name"]) {
            if (!noName) {
                setter[weaponPrefix + "name"] = v[spellPrefix + "name"];
            }
            setter[weaponPrefix + "source-spell-name"] = v[spellPrefix + "name"];
        }
        if (attackType) {
            setter[weaponPrefix + "attack-type"] = v[spellPrefix + "spell-attack-type"];
            if (/CMB/i.test(attackType)) {
                setter[weaponPrefix + "vs"] = "cmd";
            } else {
                setter[weaponPrefix + "vs"] = "touch";
            }
        }
        if (v[spellPrefix + "range_numeric"]) {
            setter[weaponPrefix + "range"] = v[spellPrefix + "range_numeric"];
        }
        if (v[spellPrefix + "range"] && v[spellPrefix + "range_pick"] === "see_text") {
            notes += "Range:" + v[spellPrefix + "range"];
        }

        if (v[spellPrefix + "damage-macro-text"]) {
            setter[weaponPrefix + "precision_dmg_macro"] = v[spellPrefix + "damage-macro-text"];
            if (attackType) {
                setter[weaponPrefix + "critical_dmg_macro"] = v[spellPrefix + "damage-macro-text"];
            }
        }
        if (v[spellPrefix + "damage-type"]) {
            setter[weaponPrefix + "precision_dmg_type"] = v[spellPrefix + "damage-type"];
            if (attackType) {
                setter[weaponPrefix + "critical_dmg_type"] = v[spellPrefix + "damage-type"];
            }
        }
        if (v[spellPrefix + "save"]) {
            notes += "Save: " + v[spellPrefix + "save"] + " DC: " + v[spellPrefix + "savedc"];
        }
        if (v[spellPrefix + "sr"]) {
            if (notes) {
                notes += ", ";
            }
            notes += "Spell resist:" + v[spellPrefix + "sr"];
        }
        if (notes) {
            setter[weaponPrefix + "notes"] = notes;
        }
    } catch (err) {
        _exportsLoaderTASTheAaronSheet2.default.error("PFSpells.setAttackEntryVals", err);
    } finally {
        return setter;
    }
}
/*Triggered from a button in repeating spells */
function createAttackEntryFromRow(id, callback, silently, eventInfo, weaponId) {
    var done = _underscore2.default.once(function () {
        _exportsLoaderTASTheAaronSheet2.default.debug("leaving PFSpells.createAttackEntryFromRow");
        if (typeof callback === "function") {
            callback();
        }
    }),
        attribList = [],
        itemId = id || (eventInfo ? SWUtils.getRowId(eventInfo.sourceAttribute) : ""),
        idStr = SWUtils.getRepeatingIDStr(id),
        item_entry = 'repeating_spells_' + idStr,
        attributes = ["range_pick", "range", "range_numeric", "damage-macro-text", "damage-type", "sr", "savedc", "save"],
        commonAttributes = ["spell-attack-type", "name"];

    //TAS.debug("at PFSpells creatattack entry ");
    attributes.forEach(function (attr) {
        attribList.push(item_entry + attr);
    });
    commonAttributes.forEach(function (attr) {
        attribList.push(item_entry + attr);
    });
    //TAS.debug("attribList=" + attribList);
    getAttrs(attribList, function (v) {
        var newRowId = "",
            setter = {},
            prefix = "repeating_weapon_",
            idStr = "",
            params = {};
        try {
            //TAS.debug("at PFSpells.createAttackEntryFromRow",v);
            if (!PFUtils.findAbilityInString(v[item_entry + "spell-attack-type"]) && !v[item_entry + "damage-macro-text"]) {
                _exportsLoaderTASTheAaronSheet2.default.warn("no attack to create for spell " + v[item_entry + "name"] + ", " + itemId);
            } else {
                if (!weaponId) {
                    newRowId = generateRowID();
                } else {
                    newRowId = weaponId;
                }
                idStr = newRowId + "_";
                prefix += idStr;
                setter = setAttackEntryVals(item_entry, prefix, v, setter, weaponId);
                setter[prefix + "source-spell"] = itemId;
                setter[prefix + "group"] = "Spell";
            }
        } catch (err) {
            _exportsLoaderTASTheAaronSheet2.default.error("PFSpells.createAttackEntryFromRow", err);
        } finally {
            if (_underscore2.default.size(setter) > 0) {
                setter[item_entry + "create-attack-entry"] = 0;
                if (silently) {
                    params = _PFConst2.default.silentParams;
                }
                setAttrs(setter, {}, function () {
                    //can do these in parallel
                    PFAttackOptions.resetOption(newRowId);
                    PFAttackGrid.resetCommandMacro();
                    done();
                });
            } else {
                setter[item_entry + "create-attack-entry"] = 0;
                setAttrs(setter, _PFConst2.default.silentParams, done);
            }
        }
    });
}
function updateAssociatedAttack(id, callback, silently, eventInfo) {
    var done = _underscore2.default.once(function () {
        //TAS.debug("leaving PFSpells.updateAssociatedAttack");
        if (typeof callback === "function") {
            callback();
        }
    }),
        itemId = id || (eventInfo ? SWUtils.getRowId(eventInfo.sourceAttribute) : ""),
        item_entry = 'repeating_spells_' + SWUtils.getRepeatingIDStr(itemId),
        attrib = eventInfo ? SWUtils.getAttributeName(eventInfo.sourceAttribute) : "",
        attributes = [];
    if (attrib) {
        attributes = [item_entry + attrib];
        if (/range/i.test(attrib)) {
            attributes = [item_entry + 'range_pick', item_entry + 'range', item_entry + 'range_numeric'];
        }
    } else {
        attributes = ["range_pick", "range", "range_numeric", "damage-macro-text", "damage-type", "sr", "savedc", "save", "spell-attack-type", "name"];
    }
    getAttrs(attributes, function (spellVal) {
        getSectionIDs("repeating_weapon", function (idarray) {
            // get the repeating set
            var spellsourcesFields = [];
            spellsourcesFields = _underscore2.default.reduce(idarray, function (memo, currentID) {
                memo.push("repeating_weapon_" + currentID + "_source-spell");
                return memo;
            }, []);
            getAttrs(spellsourcesFields, function (v) {
                var setter = {},
                    params = {},
                    idlist = [];
                try {
                    _underscore2.default.each(idarray, function (currentID) {
                        var prefix = "repeating_weapon_" + currentID + "_";
                        if (v[prefix + "source-spell"] === itemId) {
                            idlist.push(currentID);
                            setter = setAttackEntryVals(item_entry, prefix, spellVal, setter);
                        }
                    });
                    if (silently) {
                        params = _PFConst2.default.silentParams;
                    }
                } catch (err) {
                    _exportsLoaderTASTheAaronSheet2.default.error("PFSpells.updateAssociatedAttack", err);
                } finally {
                    if (_underscore2.default.size(setter) > 0) {
                        setAttrs(setter, params, function () {
                            PFAttackOptions.resetSomeOptions(idlist);
                        });
                    } else {
                        done();
                    }
                }
            });
        });
    });
}
function updatePreparedSpellState(id, eventInfo) {
    getAttrs(["repeating_spells_used", "repeating_spells_spellclass_number", "repeating_spells_prepared_state", "spellclass-0-hide_unprepared", "spellclass-1-hide_unprepared", "spellclass-2-hide_unprepared"], function (values) {
        var uses = parseInt(values.repeating_spells_used, 10) || 0,
            preparedState = parseInt(values.repeating_spells_prepared_state, 10) || 0,
            classnum = values["repeating_spells_spellclass_number"],
            isPrepared = (parseInt(values["spellclass-" + classnum + "-casting_type"], 10) || 0) === 2 ? 1 : 0,
            hideUnprepared = isPrepared * (parseInt(values["spellclass-" + classnum + "-hide_unprepared"], 10) || 0),
            setter = {};
        if (uses > 0 && preparedState === 0) {
            setter["repeating_spells_prepared_state"] = "1";
        } else if (uses < 1 && preparedState !== 0) {
            setter["repeating_spells_prepared_state"] = "0";
        }
        if (_underscore2.default.size(setter)) {
            if (hideUnprepared) {
                setAttrs(setter, _PFConst2.default.silentParams, resetCommandMacro());
            } else {
                setAttrs(setter, {
                    silent: true
                });
            }
        }
    });
}
/** - sets prepared_state to 1 if used has a value > 0 */
function resetSpellsPrepared() {
    getSectionIDs("repeating_spells", function (ids) {
        var fieldarray = [];
        _underscore2.default.each(ids, function (id) {
            var idStr = SWUtils.getRepeatingIDStr(id),
                prefix = "repeating_spells_" + idStr;
            fieldarray.push(prefix + "used");
            fieldarray.push(prefix + "prepared_state");
        });
        getAttrs(fieldarray, function (v) {
            var setter = {};
            _underscore2.default.each(ids, function (id) {
                var idStr = SWUtils.getRepeatingIDStr(id),
                    prefix = "repeating_spells_" + idStr,
                    uses = parseInt(v[prefix + "used"], 10) || 0,
                    preparedState = parseInt(v[prefix + "prepared_state"], 10) || 0,
                    setter = {};
                if (uses > 0 && preparedState === 0) {
                    setter[prefix + "prepared_state"] = "1";
                    //TAS.debug("resetSpellsPrepared, setting to 1:" + prefix);
                } else if (uses < 1 && preparedState !== 0) {
                    setter[prefix + "prepared_state"] = "0";
                }
            });
            if (_underscore2.default.size(setter)) {
                setAttrs(setter, {
                    silent: true
                });
            }
        });
    });
}
/************* SPELL OPTIONS *********************/
/** updates all spells when level or concentration or spell penetration is updated 
*@param {int} classIdx 0..2
*@param {object} eventInfo from on event 
*@param {function} callback when done
*/
function updateSpellsCasterLevelRelated(classIdx, eventInfo, callback) {
    var done = _underscore2.default.once(function () {
        if (typeof callback === "function") {
            callback();
        }
    });
    //TAS.debug("updateSpellsCasterLevelRelated", eventInfo);
    if (!(classIdx >= 0 && classIdx <= 2) || isNaN(parseInt(classIdx, 10))) {
        done();
        return;
    }
    getAttrs(["spellclass-" + classIdx + "-level-total", "spellclasses_multiclassed", "Concentration-" + classIdx + "-misc", "spellclass-" + classIdx + "-name", "spellclass-" + classIdx + "-SP-mod", "Concentration-" + classIdx + "-def", "Concentration-" + classIdx + "-mod"], function (vout) {
        var classLevel = parseInt(vout["spellclass-" + classIdx + "-level-total"], 10) || 0,
            abilityMod = parseInt(vout["Concentration-" + classIdx + "-mod"], 10) || 0,
            multiclassed = parseInt(vout["spellclasses_multiclassed"], 10) || 0,
            defMod = parseInt(vout["Concentration-" + classIdx + "-def"], 10),
            classConcentrationMisc = parseInt(vout["Concentration-" + classIdx + "-misc"], 10) || 0,
            classSPMisc = parseInt(vout["spellclass-" + classIdx + "-SP-mod"], 10) || 0,
            newClassName = vout["spellclass-" + classIdx + "-name"],
            updateDefensiveCasting = eventInfo ? /\-def$/i.test(eventInfo.sourceAttribute) : false;
        if (classLevel <= 0) {
            done();
            return;
        }
        //TAS.debug("updateSpellsCasterLevelRelated,class:"+classIdx+", class values:",vout);				
        getSectionIDs("repeating_spells", function (ids) {
            var rowFieldAppnd = ['casterlevel', 'CL_misc', 'spell_class_r', 'spellclass_number', 'spellclass', 'range', 'range_numeric', 'range_pick', 'SP-mod', 'SP_misc', 'Concentration_misc', 'Concentration-mod', 'spell_options'],
                fields = _underscore2.default.reduce(ids, function (memo, id) {
                var prefix = "repeating_spells_" + SWUtils.getRepeatingIDStr(id),
                    row;
                row = _underscore2.default.map(rowFieldAppnd, function (field) {
                    return prefix + field;
                });
                return memo.concat(row);
            }, ['spellclass-0-name']);
            getAttrs(fields, function (v) {
                var doneOneRow = _underscore2.default.after(_underscore2.default.size(ids), done),
                    classNumSetter = {},
                    setter = {};
                try {
                    //TAS.debug("updateSpellsCasterLevelRelated,class:"+classIdx+", spells:",v);
                    _underscore2.default.each(ids, function (id) {
                        var prefix = "repeating_spells_" + SWUtils.getRepeatingIDStr(id),
                            classNum = parseInt(v[prefix + "spellclass_number"], 10),
                            classRadio = parseInt(v[prefix + "spell_class_r"], 10),
                            chosenRange = v[prefix + "range_pick"] || "",
                            currRange = parseInt(v[prefix + "range_numeric"], 10) || 0,
                            spellConcentrationMisc = parseInt(v[prefix + "Concentration_misc"], 10) || 0,
                            optionText = v[prefix + "spell_options"],
                            setOption = 0,
                            tempstr = "",
                            casterlevel = 0,
                            newcasterlevel = 0,
                            newConcentration = 0,
                            newSP = 0,
                            newClassName = "",
                            newRange = 0;
                        try {
                            if (isNaN(classNum)) {
                                classNum = 0;
                                classNumSetter[prefix + "spellclass_number"] = 0;
                                classNumSetter[prefix + "spellclass"] = v['spellclass-0-name'];
                            } else if (!multiclassed || classNum === classIdx) {
                                if (classNum !== classRadio || isNaN(classRadio)) {
                                    setter[prefix + "spell_class_r"] = classNum;
                                }
                                newClassName = v['spellclass-' + classNum + '-name'];
                                if (newClassName !== v[prefix + "spellclass"]) {
                                    setter[prefix + "spellclass"] = newClassName;
                                    if (optionText) {
                                        optionText = optionText.replace(PFSpellOptions.optionTemplateRegexes.spellclass, PFSpellOptions.optionTemplates.spellclass.replace("REPLACE", SWUtils.escapeForRollTemplate(v[prefix + "spellclass"])));
                                        setOption = 1;
                                    }
                                }
                                casterlevel = parseInt(v[prefix + "casterlevel"], 10);
                                newcasterlevel = classLevel + (parseInt(v[prefix + "CL_misc"], 10) || 0);
                                if (newcasterlevel < 1) {
                                    newcasterlevel = 1;
                                }
                                if (newcasterlevel !== casterlevel || isNaN(casterlevel)) {
                                    casterlevel = newcasterlevel;
                                    setter[prefix + "casterlevel"] = newcasterlevel;
                                    if (optionText) {
                                        optionText = optionText.replace(PFSpellOptions.optionTemplateRegexes.casterlevel, PFSpellOptions.optionTemplates.casterlevel.replace("REPLACE", newcasterlevel));
                                        optionText = optionText.replace(PFSpellOptions.optionTemplateRegexes.casterlevel_chk, PFSpellOptions.optionTemplates.casterlevel_chk.replace("REPLACE", newcasterlevel));
                                        setOption = 1;
                                    }
                                }
                                newRange = PFUtils.findSpellRange(v[prefix + "range"], chosenRange, casterlevel) || 0;
                                if (newRange !== currRange) {
                                    setter[prefix + "range_numeric"] = newRange;
                                    if (optionText) {
                                        optionText = optionText.replace(PFSpellOptions.optionTemplateRegexes.range, PFSpellOptions.optionTemplates.range.replace("REPLACE", newRange));
                                        setOption = 1;
                                    }
                                }
                                if (updateDefensiveCasting && optionText) {
                                    if (defMod > 0) {
                                        tempstr = PFSpellOptions.optionTemplates.cast_def.replace("REPLACE", defMod);
                                    } else {
                                        tempstr = "{{cast_def=}}";
                                    }
                                    if (optionText.indexOf("{{cast_def=") >= 0) {
                                        optionText = optionText.replace(PFSpellOptions.optionTemplateRegexes.cast_def, tempstr);
                                    } else {
                                        optionText += tempstr;
                                    }
                                    setOption = 1;
                                }
                                newConcentration = newcasterlevel + abilityMod + classConcentrationMisc + spellConcentrationMisc;
                                if (newConcentration !== (parseInt(v[prefix + "Concentration-mod"], 10) || 0)) {
                                    setter[prefix + "Concentration-mod"] = newConcentration;
                                    if (optionText) {
                                        optionText = optionText.replace(PFSpellOptions.optionTemplateRegexes.Concentration, PFSpellOptions.optionTemplates.Concentration.replace("REPLACE", newConcentration));
                                        optionText = optionText.replace(PFSpellOptions.optionTemplateRegexes.Concentration_chk, PFSpellOptions.optionTemplates.Concentration_chk.replace("REPLACE", newConcentration));
                                        setOption = 1;
                                    }
                                }
                                newSP = classSPMisc + (parseInt(v[prefix + "SP_misc"], 10) || 0);
                                if (newSP !== (parseInt(v[prefix + "SP-mod"], 10) || 0)) {
                                    setter[prefix + "SP-mod"] = newSP;
                                    if (optionText) {
                                        optionText = optionText.replace(PFSpellOptions.optionTemplateRegexes.spellPen, PFSpellOptions.optionTemplates.spellPen.replace("REPLACE", newSP));
                                        setOption = 1;
                                    }
                                }
                                if (setOption) {
                                    setter[prefix + "spell_options"] = optionText;
                                }
                            }
                        } catch (innererror) {
                            _exportsLoaderTASTheAaronSheet2.default.error("updateSpellsCasterLevelRelated innererror on id: " + id, innererror);
                        }
                    });
                } catch (err) {
                    _exportsLoaderTASTheAaronSheet2.default.error("updateSpellsCasterLevelRelated error:", err);
                } finally {
                    if (_underscore2.default.size(setter) > 0 || _underscore2.default.size(classNumSetter) > 0) {
                        //TAS.debug"updateSpellsCasterLevelRelated, setting:",classNumSetter,setter);
                        if (_underscore2.default.size(classNumSetter) > 0) {
                            setAttrs(classNumSetter, {}, done);
                        }
                        if (_underscore2.default.size(setter) > 0) {
                            setAttrs(setter, _PFConst2.default.silentParams, done);
                        }
                    } else {
                        done();
                    }
                }
            });
        });
    });
}
/** updates all spells when caster ability or DCs are updated 
*@param {int} classIdx 0..2
*@param {object} eventInfo from on event 
*@param {function} callback when done
*/
function updateSpellsCasterAbilityRelated(classIdx, eventInfo, callback) {
    var done = _underscore2.default.once(function () {
        if (typeof callback === "function") {
            callback();
        }
    });
    //TAS.debug("updateSpellsCasterAbilityRelated", eventInfo);
    if (!(classIdx >= 0 && classIdx <= 2) || isNaN(parseInt(classIdx, 10))) {
        done();
        return;
    }
    getAttrs(["spellclass-" + classIdx + "-level-total", "Concentration-" + classIdx + "-mod", "Concentration-" + classIdx + "-misc", "spellclasses_multiclassed"], function (vout) {
        var abilityMod,
            classConcentrationMisc,
            multiclassed,
            setter = {};
        try {
            abilityMod = parseInt(vout["Concentration-" + classIdx + "-mod"], 10) || 0;
            classConcentrationMisc = parseInt(vout["Concentration-" + classIdx + "-misc"], 10) || 0;
            multiclassed = parseInt(vout["spellclasses_multiclassed"], 10) || 0;
            if (!parseInt(vout["spellclass-" + classIdx + "-level-total"], 10)) {
                done();
                return;
            }
            //var updateAbilityScore = eventInfo?(/concentration\-[012]\-mod/i.test(eventInfo.sourceAttribute)):true;
            getSectionIDs("repeating_spells", function (ids) {
                var fields = [];
                //TAS.debug("updateSpellsCasterAbilityRelated",classIdx,eventInfo);
                //TAS.debug(ids);
                _underscore2.default.each(ids, function (id) {
                    var prefix = "repeating_spells_" + SWUtils.getRepeatingIDStr(id);
                    fields = fields.concat([prefix + "spellclass_number", prefix + "spell_level", prefix + "spell_level_r", prefix + "spellclass_number", prefix + "casterlevel", prefix + "DC_misc", prefix + "savedc", prefix + "Concentration-mod", prefix + "Concentration_misc", prefix + "spell_options"]);
                });
                getAttrs(fields, function (v) {
                    var newConcentration = 0,
                        casterlevel = 0;
                    //TAS.debug("updateSpellsCasterAbilityRelated,class:"+classIdx+", spells:",v);
                    _underscore2.default.each(ids, function (id) {
                        var spellLevel = 0,
                            spellLevelRadio = 0,
                            newDC = 0,
                            setOption = 0,
                            prefix = "repeating_spells_" + SWUtils.getRepeatingIDStr(id),
                            optionText = v[prefix + "spell_options"],
                            spellConcentrationMisc = parseInt(v[prefix + "Concentration_misc"], 10) || 0;
                        try {
                            if (!multiclassed || parseInt(v[prefix + "spellclass_number"], 10) === classIdx) {
                                spellLevel = parseInt(v[prefix + "spell_level"], 10);
                                spellLevelRadio = parseInt(v[prefix + "spell_level_r"], 10);
                                if (isNaN(spellLevel)) {
                                    _exportsLoaderTASTheAaronSheet2.default.warn("spell level is NaN for " + prefix);
                                    if (spellLevelRadio !== -1 || isNaN(spellLevelRadio)) {
                                        setter[prefix + "spell_level_r"] = "-1";
                                        setter[prefix + "savedc"] = "";
                                    }
                                } else {
                                    if (spellLevel !== spellLevelRadio || isNaN(spellLevelRadio)) {
                                        setter[prefix + "spell_level_r"] = spellLevel;
                                    }
                                    newDC = 10 + spellLevel + abilityMod + (parseInt(v[prefix + "DC_misc"], 10) || 0);
                                    if (newDC !== (parseInt(v[prefix + "savedc"], 10) || 0)) {
                                        setter[prefix + "savedc"] = newDC;
                                        if (optionText) {
                                            optionText = optionText.replace(PFSpellOptions.optionTemplateRegexes.dc, PFSpellOptions.optionTemplates.dc.replace("REPLACE", newDC));
                                            setOption = 1;
                                        }
                                    }
                                    casterlevel = parseInt(v[prefix + "casterlevel"], 10) || 0;
                                    if (!isNaN(casterlevel)) {
                                        newConcentration = casterlevel + abilityMod + classConcentrationMisc + spellConcentrationMisc;
                                        if (newConcentration !== (parseInt(v[prefix + "Concentration-mod"], 10) || 0)) {
                                            setter[prefix + "Concentration-mod"] = newConcentration;
                                            if (optionText) {
                                                optionText = optionText.replace(PFSpellOptions.optionTemplateRegexes.Concentration, PFSpellOptions.optionTemplates.Concentration.replace("REPLACE", newConcentration));
                                                optionText = optionText.replace(PFSpellOptions.optionTemplateRegexes.Concentration_chk, PFSpellOptions.optionTemplates.Concentration_chk.replace("REPLACE", newConcentration));
                                                setOption = 1;
                                            }
                                        }
                                    } else {
                                        _exportsLoaderTASTheAaronSheet2.default.warn("spell casterlevel is NaN for " + prefix);
                                        if ((parseInt(v[prefix + "Concentration-mod"], 10) || 0) !== 0) {
                                            setter[prefix + "Concentration-mod"] = "";
                                        }
                                    }
                                }
                                if (setOption) {
                                    //TAS.debug("setting option for id "+ id +" to "+optionText);
                                    setter[prefix + "spell_options"] = optionText;
                                }
                            }
                        } catch (innererror) {
                            _exportsLoaderTASTheAaronSheet2.default.error("updateSpellsCasterAbilityRelated innererror on id:" + id, innererror);
                        }
                    });
                });
            });
        } catch (err) {
            _exportsLoaderTASTheAaronSheet2.default.error("updateSpellsCasterAbilityRelated outer error:", err);
        } finally {
            if (_underscore2.default.size(setter) > 0) {
                //TAS.debug("updateSpellsCasterAbilityRelated setting:",setter);
                setAttrs(setter, _PFConst2.default.silentParams, done());
            } else if (typeof callback === "function") {
                done();
            }
        }
    });
}
//faster smaller than updateSpell
function updateSpellSlot(id, eventInfo, callback) {
    var outerdone = _underscore2.default.once(function () {
        if (typeof callback === "function") {
            callback();
        }
    }),
        done = _underscore2.default.once(function () {
        resetCommandMacro(eventInfo, outerdone);
    }),
        idStr = SWUtils.getRepeatingIDStr(id),
        prefix = "repeating_spells_" + idStr,
        spellLevelRadioField = prefix + "spell_level_r",
        spellSlotField = prefix + "slot",
        spellLevelField = prefix + "spell_level",
        metamagicField = prefix + "metamagic";
    //TAS.debug("updateSpellSlot", eventInfo, id);
    getAttrs([spellSlotField, spellLevelField, spellLevelRadioField], function (v) {
        var slot = parseInt(v[spellSlotField], 10),
            level = parseInt(v[spellLevelField], 10),
            metamagic = parseInt(v[metamagicField], 10) || 0,
            spellLevelRadio = parseInt(v[spellLevelRadioField], 10) || 0,
            setter = {};
        try {
            //TAS.debug("updateSpellSlot", v);
            if (metamagic) {
                if (isNaN(level)) {
                    slot = -1;
                }
                if (isNaN(slot)) {
                    slot = level;
                    setter[spellSlotField] = level;
                    setAttrs(setter, {
                        silent: true
                    }, done);
                    return;
                }
                if (slot !== spellLevelRadio) {
                    //TAS.debug("updating slot to " + slot);
                    setter[spellLevelRadioField] = slot;
                    if (spellLevelRadio === -1) {
                        setter["spells_tab"] = slot;
                    }
                    setAttrs(setter, {
                        silent: true
                    }, done);
                    return;
                }
            }
            outerdone();
        } catch (err) {
            _exportsLoaderTASTheAaronSheet2.default.error("updateSpellSlot", err);
            outerdone();
        }
    });
}
/** updates a spell
*@param {string} id optional, pass id if looping through list of IDs. Null if context is row itself. 
*@param {eventInfo} eventInfo ACTUALLY USED : if not present forces recalc of everything
*@param {function} callback - to call when done.
*@param {bool} doNotUpdateTotals - if true do NOT call resetSpellsTotals() and resetCommandMacro() at end, otherwise do.
*/
function updateSpell(id, eventInfo, callback, doNotUpdateTotals) {
    var spellLevelUndefined = false,
        classNumWasUndefined = false,
        done = _underscore2.default.once(function () {
        //TAS.debug("leaving PFSpells.updateSpell: id:" + id + " spelllevelundefined=" + spellLevelUndefined);
        //these asynchronous functions can be called at same time as callback.
        if (!spellLevelUndefined) {
            PFSpellOptions.resetOption(id, eventInfo);
            if (!doNotUpdateTotals) {
                resetSpellsTotals();
                resetCommandMacro();
            }
        }
        if (typeof callback === "function") {
            callback();
        }
    }),
        idStr = SWUtils.getRepeatingIDStr(id),
        prefix = "repeating_spells_" + idStr,
        classNameField = prefix + "spellclass",
        classRadioField = prefix + "spell_class_r",
        classNumberField = prefix + "spellclass_number",
        casterlevelField = prefix + "casterlevel",
        spellLevelField = prefix + "spell_level",
        spellLevelRadioField = prefix + "spell_level_r",
        dcMiscField = prefix + "DC_misc",
        currDCField = prefix + "savedc",
        fields = [classNumberField, classRadioField, classNameField, casterlevelField, prefix + "CL_misc", prefix + "spellclass_number", prefix + "range_pick", prefix + "range", prefix + "range_numeric", prefix + "SP-mod", prefix + "SP_misc", prefix + "Concentration_misc", prefix + "Concentration-mod", prefix + "spell_options", prefix + "used", prefix + "slot", prefix + "metamagic", spellLevelField, spellLevelRadioField, dcMiscField, currDCField, "spellclass-0-level-total", "spellclass-1-level-total", "spellclass-2-level-total", "spellclass-0-SP-mod", "spellclass-1-SP-mod", "spellclass-2-SP-mod", "Concentration-0-mod", "Concentration-1-mod", "Concentration-2-mod", "Concentration-0-misc", "Concentration-1-misc", "Concentration-2-misc", "Concentration-0-def", "Concentration-1-def", "Concentration-2-def", "spellclass-0-name", "spellclass-1-name", "spellclass-2-name"];
    getAttrs(fields, function (v) {
        var setter = {},
            baseClassNum,
            classNum = 0,
            classRadio,
            currClassName = "",
            className = "",
            baseSpellLevel,
            spellLevel,
            spellSlot,
            metaMagic,
            spellLevelRadio,
            currCasterLevel,
            casterlevel,
            spellAbilityMod,
            newDC = 10,
            levelSlot,
            currRange,
            currChosenRange,
            newSP = 0,
            newConcentration = 0,
            updateClass = false,
            updateClassLevel = false,
            updateRange = false,
            updateSP = false,
            updateConcentration = false,
            updateSpellLevel = false,
            updateDC = false,
            updateSlot = false,
            updateStr = "",
            tempMatches,
            hadToSetClass = false,
            newRange = 0;
        try {
            baseClassNum = parseInt(v[classNumberField], 10);
            classNum = baseClassNum || 0;
            classRadio = parseInt(v[classRadioField], 10);
            baseSpellLevel = parseInt(v[spellLevelField], 10);
            spellLevel = baseSpellLevel || 0;
            spellSlot = parseInt(v[prefix + "slot"], 10);
            metaMagic = parseInt(v[prefix + "metamagic"], 10) || 0;
            spellLevelRadio = parseInt(v[spellLevelRadioField], 10);
            currCasterLevel = parseInt(v[casterlevelField], 10);
            casterlevel = currCasterLevel || 0;
            spellAbilityMod = parseInt(v["Concentration-" + classNum + "-mod"], 10) || 0;
            levelSlot = metaMagic ? spellSlot : spellLevel;
            currRange = parseInt(v[prefix + "range_numeric"], 10) || 0;
            currChosenRange = v[prefix + "range_pick"] || "blank";
            //cannot perform calculations
            if (isNaN(baseClassNum) && isNaN(baseSpellLevel)) {
                _exportsLoaderTASTheAaronSheet2.default.warn("cannot update spell! id:" + id + " both class and level are not numbers", v);
                return;
            }
            //TAS.debug("spell slot:" + spellSlot + ", metamagic:" + metaMagic + ", spelllevel:" + spellLevel + ", radio:" + spellLevelRadio);
            //if looping through with id then force update of all fields.
            if (!eventInfo) {
                updateClass = true;
            }
            //if class is not set, then set to default class 0
            if (isNaN(baseClassNum)) {
                //force to zero?
                classNumWasUndefined = true;
                _exportsLoaderTASTheAaronSheet2.default.debug("#########################", "Forcing spell " + id + " to class 0");
                setter[classNumberField] = String(classNum);
                updateClass = true;
                hadToSetClass = true;
            }
            if (classNum !== classRadio) {
                setter[classRadioField] = classNum;
                updateClass = true;
            }
            if (!updateClass && eventInfo && eventInfo.sourceAttribute) {
                updateStr = eventInfo.sourceAttribute.toLowerCase();
                tempMatches = updateStr.match(/lvlstr|range_pick|range|sp_misc|cl_misc|spellclass_number|spell_level|dc_misc|concen|slot/);
                if (tempMatches && tempMatches[0]) {
                    switch (tempMatches[0]) {
                        case 'range_pick':
                        case 'range':
                            updateRange = true;
                            break;
                        case 'sp_misc':
                            updateSP = true;
                            break;
                        case 'cl_misc':
                            updateClassLevel = true;
                            break;
                        case 'spellclass_number':
                            updateClass = true;
                            break;
                        case 'concen':
                            updateConcentration = true;
                            break;
                        case 'spell_level':
                            updateSpellLevel = true;
                            break;
                        case 'dc_misc':
                            updateDC = true;
                            break;
                        case 'slot':
                            updateSlot = true;
                            break;
                        case 'lvlstr':
                            updateClass = true;
                            updateClassLevel = true;
                            updateConcentration = true;
                            updateSP = true;
                            updateDC = true;
                            updateRange = true;
                            break;
                        default:
                            updateClass = true; //unknown just update all
                    }
                } else {
                    //if we called from importFromCompendium then it's lvlstr
                    _exportsLoaderTASTheAaronSheet2.default.warn("Unimportant field updated, do not update row: " + eventInfo.sourceAttribute);
                    done();
                    return;
                }
            }
            if (isNaN(baseSpellLevel)) {
                if (spellLevelRadio !== -1) {
                    setter[spellLevelRadioField] = "-1";
                    setter[prefix + "slot"] = "";
                }
                spellLevelUndefined = true;
            } else if (!metaMagic && (updateSpellLevel || spellLevel !== spellLevelRadio)) {
                //TAS.debug("reset radio field after spell update");
                setter[spellLevelRadioField] = spellLevel;
                if (spellLevelRadio === -1) {
                    setter["spells_tab"] = spellLevel;
                }
                updateSpellLevel = true;
            } else if (metaMagic && !isNaN(spellSlot) && (updateSlot || spellSlot !== spellLevelRadio)) {
                //TAS.debug("reset radio field after spell SLOT update");
                setter[spellLevelRadioField] = spellSlot;
                if (spellLevelRadio === -1) {
                    setter["spells_tab"] = spellSlot;
                }
            }
            //keep slot in sync
            if (!spellLevelUndefined) {
                if (isNaN(spellSlot)) {
                    setter[prefix + "slot"] = spellLevel;
                    spellSlot = spellLevel;
                    updateSlot = true;
                } else if (!metaMagic && (updateSpellLevel || spellSlot !== spellLevel)) {
                    setter[prefix + "slot"] = spellLevel;
                }
            }
            //classname
            className = v["spellclass-" + classNum + "-name"];
            if (updateClass) {
                currClassName = v[classNameField];
                if (currClassName !== className) {
                    _exportsLoaderTASTheAaronSheet2.default.debug("setting class name field, should be doing this if classnum was undefined");
                    setter[classNameField] = className;
                }
            }
            if (isNaN(currCasterLevel)) {
                updateClassLevel = true;
            }
            //set caster level
            if (updateClass || updateClassLevel) {
                casterlevel = (parseInt(v["spellclass-" + classNum + "-level-total"], 10) || 0) + (parseInt(v[prefix + "CL_misc"], 10) || 0);
                if (casterlevel < 1) {
                    casterlevel = 1;
                }
                if (currCasterLevel !== casterlevel || isNaN(currCasterLevel)) {
                    setter[prefix + "casterlevel"] = casterlevel;
                    updateClassLevel = true;
                }
            }
            if (!spellLevelUndefined && (updateClass || updateSpellLevel || updateDC)) {
                newDC = 10 + spellLevel + spellAbilityMod + (parseInt(v[dcMiscField], 10) || 0);
                if (newDC !== (parseInt(v[currDCField], 10) || 0)) {
                    setter[currDCField] = newDC;
                }
            }
            if (updateClass || updateClassLevel || updateConcentration) {
                newConcentration = casterlevel + spellAbilityMod + (parseInt(v["Concentration-" + classNum + "-misc"], 10) || 0) + (parseInt(v[prefix + "Concentration_misc"], 10) || 0);
                if (newConcentration !== (parseInt(v[prefix + "Concentration-mod"], 10) || 0)) {
                    setter[prefix + "Concentration-mod"] = newConcentration;
                }
            }
            if (updateClass || updateRange || updateClassLevel) {
                newRange = PFUtils.findSpellRange(v[prefix + "range"], currChosenRange, casterlevel) || 0;
                if (newRange !== currRange) {
                    setter[prefix + "range_numeric"] = newRange;
                }
            }
            if (updateClass || updateSP || updateClassLevel) {
                newSP = (parseInt(v["spellclass-" + classNum + "-SP-mod"], 10) || 0) + (parseInt(v[prefix + "SP_misc"], 10) || 0);
                if (newSP !== (parseInt(v[prefix + "SP-mod"], 10) || 0)) {
                    setter[prefix + "SP-mod"] = newSP;
                }
            }
        } catch (err) {
            _exportsLoaderTASTheAaronSheet2.default.error("PFSpells.updateSpell:" + id, err);
        } finally {
            if (_underscore2.default.size(setter) > 0) {
                setAttrs(setter, {
                    silent: true
                }, done);
            } else {
                done();
            }
        }
    });
}
/** - updates all spells
*@param {function} callback when done
*@param {silently} if should call setAttrs with {silent:true}
*@param {object} eventInfo not used
*/
function updateSpells(callback, silently, eventInfo) {
    var done = _underscore2.default.once(function () {
        _exportsLoaderTASTheAaronSheet2.default.debug("leaving PFSpells.updateSpells");
        if (typeof callback === "function") {
            callback();
        }
    }),
        doneOne = _underscore2.default.after(3, done);
    getAttrs(['use_spells', 'spellclass-0-exists', 'spellclass-1-exists', 'spellclass-2-exists'], function (v) {
        //TAS.debug"at PFSpells.updateSpells. Existing classes:",v);
        if (parseInt(v.use_spells, 10)) {
            _underscore2.default.times(3, function (n) {
                //TAS.debug("###############", "PFSpells.updateSpells index is: "+n);
                if (parseInt(v['spellclass-' + n + '-exists'], 10)) {
                    updateSpellsCasterAbilityRelated(n, null, function () {
                        updateSpellsCasterLevelRelated(n, null, doneOne);
                    });
                } else {
                    doneOne();
                }
            });
        } else {
            done();
        }
    });
}

function updateSpellsOld(callback, silently, eventInfo) {
    getSectionIDs("repeating_spells", function (ids) {
        var done = _underscore2.default.after(_underscore2.default.size(ids), function () {
            _exportsLoaderTASTheAaronSheet2.default.debug("leaving PFSpells.updateSpells after " + _underscore2.default.size(ids) + " rows");
            if (typeof callback === "function") {
                callback();
            }
        });
        _underscore2.default.each(ids, function (id) {
            try {
                updateSpell(id, eventInfo, done, true);
            } catch (err) {
                _exportsLoaderTASTheAaronSheet2.default.error("PFSpells.updateSpells error - should never happen!", err);
                done();
            }
        });
    });
}

/** gets level and class from repeating_spells_spell_lvlstr then updates spell
* matches class name in compendium against current spell classes in this order:
* spell class already selected by spell dropdown, spellclass0, spellclass1, spellclass2
* then sets spell level to the matching level for that class
* if it cannot find then sets class name to the class level string and updates silently.
*@param {string} id the id of the row
*@param {object} eventInfo used to find row id since id param will be null
*/
function importFromCompendium(id, eventInfo) {
    var trueId = "";

    trueId = id || (eventInfo ? SWUtils.getRowId(eventInfo.sourceAttribute) : "");

    getAttrs(["repeating_spells_compendium_category", "repeating_spells_spell_lvlstr", "spellclass-0-name", "spellclass-1-name", "spellclass-2-name", "repeating_spells_range_from_compendium", "repeating_spells_target_from_compendium", "repeating_spells_area_from_compendium", "repeating_spells_effect_from_compendium", "repeating_spells_description"], function (v) {
        var levelStrBase = v["repeating_spells_spell_lvlstr"],
            rangeText = v["repeating_spells_range_from_compendium"],
            areaEffectText = (v["repeating_spells_target_from_compendium"] || "") + (v["repeating_spells_area_from_compendium"] || "") + (v["repeating_spells_effect_from_compendium"] || ""),
            classesInital = [],
            classes = [],
            originalClasses = ["", "", ""],
            classMatch = "",
            level = 0,
            idx = -1,
            foundMatch = false,
            setSilent = {},
            i = 0,
            classesToMatch = {},
            tempclassname = "",
            newRangeSettings,
            hasHunter = false,
            hasDruid = false,
            hasRanger = false,
            minHunterSpellLevel = 99,
            hunterIdx = 99,
            isAttack = false,
            allSame = 1,
            modeLevel = -1,
            counter = 0,
            callUpdateSpell = true;
        //TAS.debug("at pfspells.importFromCompendium",v);
        if (levelStrBase) {
            try {
                levelStrBase = levelStrBase.toLowerCase();
                //get first word in names of classes (since users may put archetypes or other variables in)
                //if (currClass) {classesToMatch[0]=currClass.toLowerCase().replace(/^\s+/,"").match(/\w[^\d]+/)[0];}
                if (v["spellclass-0-name"]) {
                    tempclassname = v["spellclass-0-name"].toLowerCase().replace(/^\s+/, "").match(/\w+/)[0];
                    classesToMatch[tempclassname] = 0;
                    originalClasses[0] = tempclassname;
                    if (/hunter/.test(tempclassname)) {
                        hasHunter = true;
                        hunterIdx = 0;
                    } else if (/druid/.test(tempclassname)) {
                        hasDruid = true;
                    } else if (/ranger/.test(tempclassname)) {
                        hasRanger = true;
                    }
                }
                if (v["spellclass-1-name"]) {
                    tempclassname = v["spellclass-1-name"].toLowerCase().replace(/^\s+/, "").match(/\w+/)[0];
                    classesToMatch[tempclassname] = 1;
                    originalClasses[1] = tempclassname;
                    if (/hunter/.test(tempclassname)) {
                        hasHunter = true;
                        hunterIdx = 1;
                    } else if (/druid/.test(tempclassname)) {
                        hasDruid = true;
                    } else if (/ranger/.test(tempclassname)) {
                        hasRanger = true;
                    }
                }
                if (v["spellclass-2-name"]) {
                    tempclassname = v["spellclass-2-name"].toLowerCase().replace(/^\s+/, "").match(/\w+/)[0];
                    classesToMatch[tempclassname] = 2;
                    originalClasses[2] = tempclassname;
                    if (/hunter/.test(tempclassname)) {
                        hasHunter = true;
                        hunterIdx = 2;
                    } else if (/druid/.test(tempclassname)) {
                        hasDruid = true;
                    } else if (/ranger/.test(tempclassname)) {
                        hasRanger = true;
                    }
                }
                if (!(hasHunter && (hasDruid || hasRanger))) {
                    //if user is hunter AND other class it's based on then can't tell.
                    if (_underscore2.default.size(classesToMatch) > 0) {
                        //add the translated classes from classesUsingOtherSpellLists
                        _underscore2.default.each(classesToMatch, function (classindex, classname) {
                            _underscore2.default.each(classesUsingOtherSpellLists, function (toclass, fromclass) {
                                if (classname.indexOf(fromclass) >= 0) {
                                    classesToMatch[toclass] = classindex;
                                }
                            });
                        });
                        //from spell: first split on comma between classes, then on spaces between classname and level
                        classesInital = levelStrBase.split(/\s*,\s*/);
                        classes = _underscore2.default.map(classesInital, function (a) {
                            return a.split(/\s+/);
                        });
                        for (i = 0; i < classes.length; i++) {
                            classes[i][1] = parseInt(classes[i][1], 10) || 0;
                            if (i === 0) {
                                modeLevel = classes[i][1];
                            } else {
                                if (modeLevel !== classes[i][1]) {
                                    allSame = 0;
                                }
                            }
                        }
                        //classes example: [["sorcerer/wizard","2"],["summoner","1"],["inquisitor","3"],["magus","2"]]
                        if (hasHunter) {
                            for (i = 0; i < classes.length; i++) {
                                if (/druid|ranger/.test(classes[i][0]) && classes[i][1] < minHunterSpellLevel) {
                                    minHunterSpellLevel = classes[i][1];
                                    classMatch = classes[i][0];
                                }
                            }
                            if (minHunterSpellLevel < 99) {
                                counter++;
                                foundMatch = true;
                                level = minHunterSpellLevel;
                                idx = hunterIdx;
                            }
                        }
                        _underscore2.default.each(classesToMatch, function (classindex, classname) {
                            for (i = 0; i < classes.length; i++) {
                                //classes on left because it can be longer and have multiple class names such as cleric/druid
                                if (classes[i][0].indexOf(classname) >= 0) {
                                    counter++;
                                    if (!foundMatch) {
                                        classMatch = originalClasses[classindex];
                                        level = classes[i][1];
                                        idx = classindex;
                                        foundMatch = true;
                                    }
                                }
                            }
                        });
                    }
                }
            } catch (err) {
                classMatch = "";
            }
            if (counter > 1 || !foundMatch) {
                _exportsLoaderTASTheAaronSheet2.default.warn("importFromCompendium: did not find class match");
                //leave at current choice if there is one
                setSilent["repeating_spells_spell_level"] = "";
                setSilent["repeating_spells_spell_level_r"] = -1;
                setSilent["repeating_spells_spell_class_r"] = -1;
                setSilent["repeating_spells_spellclass_number"] = "";
                setSilent["repeating_spells_spellclass"] = levelStrBase;
                callUpdateSpell = false;
            } else {
                setSilent["repeating_spells_spellclass_number"] = idx;
                setSilent["repeating_spells_spell_level"] = level;
                setSilent["repeating_spells_spell_level_r"] = level;
                setSilent["repeating_spells_spellclass"] = classMatch;
                setSilent["repeating_spells_spell_class_r"] = idx;
                //change tab so spell doesn't disappear.
                setSilent["spells_tab"] = level;
            }
        }
        if (rangeText) {
            try {
                newRangeSettings = PFUtils.parseSpellRangeText(rangeText, areaEffectText);
                setSilent["repeating_spells_range_pick"] = newRangeSettings.dropdown;
                setSilent["repeating_spells_range"] = newRangeSettings.rangetext;
                if (newRangeSettings.dropdown === 'touch') {
                    isAttack = true;
                    setSilent["repeating_spells_attack-type"] = 'attk-melee';
                } else if (/ranged touch|ray\s/i.test(v["repeating_spells_description"])) {
                    isAttack = true;
                    setSilent["repeating_spells_attack-type"] = 'attk-ranged';
                }
            } catch (err2) {
                _exportsLoaderTASTheAaronSheet2.default.error(err2);
                setSilent["repeating_spells_range"] = rangeText.replace(/\s*\(..*/, '');
                setSilent["repeating_spells_range_pick"] = "unknownrange";
            }
        }
        if (areaEffectText) {
            setSilent["repeating_spells_targets"] = areaEffectText;
        }
        setSilent["repeating_spells_spell_lvlstr"] = "";
        setSilent["repeating_spells_range_from_compendium"] = "";
        setSilent["repeating_spells_target_from_compendium"] = "";
        setSilent["repeating_spells_area_from_compendium"] = "";
        setSilent["repeating_spells_effect_from_compendium"] = "";
        if (_underscore2.default.size(setSilent) > 0) {
            setAttrs(setSilent, _PFConst2.default.silentParams, function () {
                if (callUpdateSpell) {
                    updateSpell(null, eventInfo);
                }
            });
        }
    });
}
function migrateRepeatingMacros(callback) {
    var done = _underscore2.default.once(function () {
        _exportsLoaderTASTheAaronSheet2.default.debug("leaving PFSpells.migrateRepeatingMacros");
        if (typeof callback === "function") {
            callback();
        }
    }),
        migrated = _underscore2.default.after(2, function () {
        resetCommandMacro();
        setAttrs({ 'migrated_spells_macrosv1': 1 }, _PFConst2.default.silentParams, done);
    });
    //TAS.debug("at PFSpells.migrateRepeatingMacros");
    getAttrs(['migrated_spells_macrosv1'], function (v) {
        if (parseInt(v.migrated_spells_macrosv1, 10) !== 1) {
            PFMacros.migrateRepeatingMacros(migrated, 'spells', 'npc-macro-text', defaultRepeatingMacro, defaultRepeatingMacroMap, defaultDeletedMacroAttrs, '@{NPC-Whisper}');
            PFMacros.migrateRepeatingMacros(migrated, 'spells', 'macro-text', defaultRepeatingMacro, defaultRepeatingMacroMap, defaultDeletedMacroAttrs, '@{PC-Whisper}');
        } else {
            done();
        }
    });
}
function migrate(callback) {
    PFMigrate.migrateSpells(function () {
        PFMigrate.migrateSpellRanges(function () {
            migrateRepeatingMacros(function () {
                if (typeof callback === "function") {
                    callback();
                }
            });
        });
    });
}

function recalculate(callback, silently, oldversion) {
    var done = _underscore2.default.once(function () {
        _exportsLoaderTASTheAaronSheet2.default.debug("leaving PFSpells.recalculate");
        if (typeof callback === "function") {
            callback();
        }
    }),
        recalcTotals = _underscore2.default.once(function () {
        //TAS.debug("at PFSpells.recalculate.recalcTotals");
        resetSpellsPrepared();
        resetSpellsTotals(null, null, null, silently);
        resetCommandMacro();
        //do not call because updateSpells already calls update options
        done();
    }),
        callUpdateSpells = _underscore2.default.once(function () {
        getAttrs(["use_spells"], function (v) {
            if (parseInt(v.use_spells, 10)) {
                updateSpells(recalcTotals, silently);
            } else {
                done();
            }
        });
    });
    migrate(callUpdateSpells);
}
var events = {
    //events for spell repeating rows
    repeatingSpellEventsPlayer: {
        "change:repeating_spells:DC_misc change:repeating_spells:slot change:repeating_spells:Concentration_misc change:repeating_spells:range change:repeating_spells:range_pick change:repeating_spells:CL_misc change:repeating_spells:SP_misc": [updateSpell],
        "change:repeating_spells:spell_lvlstr": [importFromCompendium],
        "change:repeating_spells:used": [resetSpellsTotals, updatePreparedSpellState],
        "change:repeating_spells:slot": [updateSpellSlot]
    },
    repeatingSpellEventsEither: {
        "change:repeating_spells:spellclass_number change:repeating_spells:spell_level": [updateSpell]
    },
    repeatingSpellAttackEvents: ["range_pick", "range", "range_numeric", "damage-macro-text", "damage-type", "sr", "savedc", "save", "spell-attack-type", "name"]
};
function registerEventHandlers() {
    //SPELLS
    //all repeating spell updates
    var tempstr = "";
    _underscore2.default.each(events.repeatingSpellEventsPlayer, function (functions, eventToWatch) {
        _underscore2.default.each(functions, function (methodToCall) {
            on(eventToWatch, _exportsLoaderTASTheAaronSheet2.default.callback(function eventRepeatingSpellsPlayer(eventInfo) {
                if (eventInfo.sourceType === "player" || eventInfo.sourceType === "api") {
                    _exportsLoaderTASTheAaronSheet2.default.debug("caught " + eventInfo.sourceAttribute + " event: " + eventInfo.sourceType);
                    methodToCall(null, eventInfo);
                }
            }));
        });
    });
    _underscore2.default.each(events.repeatingSpellEventsEither, function (functions, eventToWatch) {
        _underscore2.default.each(functions, function (methodToCall) {
            on(eventToWatch, _exportsLoaderTASTheAaronSheet2.default.callback(function eventRepeatingSpellsEither(eventInfo) {
                _exportsLoaderTASTheAaronSheet2.default.debug("caught " + eventInfo.sourceAttribute + " event: " + eventInfo.sourceType);
                methodToCall(null, eventInfo);
            }));
        });
    });
    on("change:spellmenu_groupby_school change:spellmenu_show_uses change:spellclass-0-hide_unprepared change:spellclass-1-hide_unprepared change:spellclass-2-hide_unprepared change:spellclass-0-show_domain_spells change:spellclass-1-show_domain_spells change:spellclass-2-show_domain_spells", _exportsLoaderTASTheAaronSheet2.default.callback(function eventUnpreparedSpellCommandChange(eventInfo) {
        _exportsLoaderTASTheAaronSheet2.default.debug("caught " + eventInfo.sourceAttribute + " event: " + eventInfo.sourceType);
        if (eventInfo.sourceType === "player" || eventInfo.sourceType === "api") {
            resetCommandMacro();
        }
    }));
    on("remove:repeating_spells change:repeating_spells:spellclass_number change:repeating_spells:spell_level change:repeating_spells:slot change:repeating_spells:used change:repeating_spells:school change:repeating_spells:metamagic change:repeating_spells:isDomain change:repeating_spells:isMythic change:_reporder_repeating_spells", _exportsLoaderTASTheAaronSheet2.default.callback(function eventRepeatingSpellAffectingMenu(eventInfo) {
        _exportsLoaderTASTheAaronSheet2.default.debug("caught " + eventInfo.sourceAttribute + " event: " + eventInfo.sourceType);
        if (eventInfo.sourceType === "player" || eventInfo.sourceType === "api") {
            resetCommandMacro();
        }
    }));
    on("remove:repeating_spells change:repeating_spells:spellclass_number change:repeating_spells:spell_level", _exportsLoaderTASTheAaronSheet2.default.callback(function eventRepeatingSpellsTotals(eventInfo) {
        if (eventInfo.sourceType === "player" || eventInfo.sourceType === "api") {
            _exportsLoaderTASTheAaronSheet2.default.debug("caught " + eventInfo.sourceAttribute + " event: " + eventInfo.sourceType);
            resetSpellsTotals();
        }
    }));
    on("change:repeating_spells:create-attack-entry", _exportsLoaderTASTheAaronSheet2.default.callback(function eventcreateAttackEntryFromSpell(eventInfo) {
        _exportsLoaderTASTheAaronSheet2.default.debug("caught " + eventInfo.sourceAttribute + " event: " + eventInfo.sourceType);
        if (eventInfo.sourceType === "player" || eventInfo.sourceType === "api") {
            createAttackEntryFromRow(null, null, false, eventInfo);
        }
    }));
    tempstr = _underscore2.default.reduce(events.repeatingSpellAttackEvents, function (memo, attr) {
        memo += "change:repeating_spells:" + attr + " ";
        return memo;
    }, "");
    on(tempstr, _exportsLoaderTASTheAaronSheet2.default.callback(function eventupdateAssociatedSpellAttack(eventInfo) {
        var attr;
        _exportsLoaderTASTheAaronSheet2.default.debug("caught " + eventInfo.sourceAttribute + " event" + eventInfo.sourceType);
        attr = SWUtils.getAttributeName(eventInfo.sourceAttribute);
        if (eventInfo.sourceType === "player" || eventInfo.sourceType === "api" || attr === 'attack-type') {
            updateAssociatedAttack(null, null, null, eventInfo);
        }
    }));
}
registerEventHandlers();
_PFLog.PFConsole.log('   PFSpells module loaded         ');
_PFLog.PFLog.modulecount++;

/***/ }),
/* 15 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
	value: true
});
exports.copyToAbilities = copyToAbilities;
exports.resetCommandMacro = resetCommandMacro;
exports.importFromCompendium = importFromCompendium;
exports.setAttackEntryVals = setAttackEntryVals;
exports.createAttackEntryFromRow = createAttackEntryFromRow;
exports.updateAssociatedAttack = updateAssociatedAttack;
exports.migrateRepeatingMacros = migrateRepeatingMacros;
exports.migrate = migrate;
exports.recalculate = recalculate;

var _underscore = __webpack_require__(2);

var _underscore2 = _interopRequireDefault(_underscore);

var _PFLog = __webpack_require__(0);

var _exportsLoaderTASTheAaronSheet = __webpack_require__(1);

var _exportsLoaderTASTheAaronSheet2 = _interopRequireDefault(_exportsLoaderTASTheAaronSheet);

var _SWUtils = __webpack_require__(4);

var SWUtils = _interopRequireWildcard(_SWUtils);

var _PFConst = __webpack_require__(3);

var _PFConst2 = _interopRequireDefault(_PFConst);

var _PFUtils = __webpack_require__(5);

var PFUtils = _interopRequireWildcard(_PFUtils);

var _PFUtilsAsync = __webpack_require__(8);

var PFUtilsAsync = _interopRequireWildcard(_PFUtilsAsync);

var _PFMacros = __webpack_require__(9);

var PFMacros = _interopRequireWildcard(_PFMacros);

var _PFMenus = __webpack_require__(13);

var PFMenus = _interopRequireWildcard(_PFMenus);

var _PFDB = __webpack_require__(26);

var PFDB = _interopRequireWildcard(_PFDB);

var _PFAttackOptions = __webpack_require__(11);

var PFAttackOptions = _interopRequireWildcard(_PFAttackOptions);

var _PFAttackGrid = __webpack_require__(7);

var PFAttackGrid = _interopRequireWildcard(_PFAttackGrid);

var _PFFeatures = __webpack_require__(28);

var PFFeatures = _interopRequireWildcard(_PFFeatures);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var optionFields = ['is_sp', 'hasposrange', 'hasuses', 'hasattack', 'abil-attacktypestr'],
    optionRepeatingHelperFields = ['ability_type', 'range_numeric', 'frequency', 'abil-attack-type'],
    allOptionRepeatingFields = optionFields.concat(optionRepeatingHelperFields),
    tabRuleSorted = {
	'class-features': 0,
	'feats': 1,
	'monster-rule': 8,
	'mythic-abilities': 3,
	'mythic-feats': 1,
	'other': 8,
	'racial-traits': 2,
	'special-abilities': 5,
	'special-attacks': 4,
	'special-qualities': 7,
	'spell-like-abilities': 6,
	'traits': 2
},
    tabTypeSorted = {
	'Ex': 9,
	'Sp': 10,
	'Su': 11
},
    categoryAttrs = ['tabcat-1', 'tabcat0', 'tabcat1', 'tabcat2', 'tabcat3', 'tabcat4', 'tabcat5', 'tabcat6', 'tabcat7', 'tabcat8', 'tabcat9', 'tabcat10', 'tabcat11'],
    otherCommandMacros = {
	'ex': " [^{extraordinary-abilities-menu}](~@{character_id}|NPCPREFIXex_button)",
	'sp': " [^{spell-like-abilities-menu}](~@{character_id}|NPCPREFIXsp_button)",
	'su': " [^{supernatural-abilities-menu}](~@{character_id}|NPCPREFIXsu_button)"
},
    defaultMacroMap = {
	'abilities': 'default'
},
    defaultMacros = {
	'default': {
		defaultRepeatingMacro: '&{template:pf_ability} @{toggle_accessible_flag} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_ability}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle=^{@{rule_category}}}} {{name=@{name}}} {{rule_category=@{rule_category}}} {{source=@{class-name}}} {{is_sp=@{is_sp}}} {{hasspellrange=@{range_pick}}} {{spell_range=^{@{range_pick}}}} {{casterlevel=[[@{casterlevel}]]}} {{spell_level=[[@{spell_level}]]}} {{hasposrange=@{hasposrange}}} {{custrange=@{range}}} {{range=[[@{range_numeric}]]}} {{save=@{save}}} {{savedc=[[@{savedc}]]}} {{hassr=@{abil-sr}}} {{sr=^{@{abil-sr}}}} {{hasfrequency=@{hasfrequency}}} {{frequency=^{@{frequency}}}} {{next_cast=@{rounds_between}}} {{hasuses=@{hasuses}}} {{uses=@{used}}} {{uses_max=@{used|max}}} {{cust_category=@{cust-category}}} {{concentration=[[@{Concentration-mod}]]}} {{damage=@{damage-macro-text}}} {{damagetype=@{damage-type}}} {{hasattack=@{hasattack}}} {{attacktype=^{@{abil-attacktypestr}}}} {{targetarea=@{targets}}} {{duration=@{duration}}} {{shortdesc=@{short-description}}} {{description=@{description}}} {{deafened_note=@{SpellFailureNote}}}',
		defaultRepeatingMacroMap: {
			'&{template:': { 'current': 'pf_ability}' },
			'@{toggle_accessible_flag}': { 'current': '@{toggle_accessible_flag}' },
			'@{toggle_rounded_flag}': { 'current': '@{toggle_rounded_flag}' },
			'{{color=': { 'current': '@{rolltemplate_color}}}' },
			'{{header_image=': { 'current': '@{header_image-pf_ability}}}', 'old': ['@{header_image-pf_block}}}'] },
			'{{character_name=': { 'current': '@{character_name}}}' },
			'{{character_id=': { 'current': '@{character_id}}}' },
			'{{subtitle=': { 'current': '^{@{rule_category}}}}' },
			'{{name=': { 'current': '@{name}}}' },
			'{{rule_category=': { 'current': '@{rule_category}}}' },
			'{{source=': { 'current': '@{class-name}}}' },
			'{{is_sp=': { 'current': '=@{is_sp}}}' },
			'{{hasspellrange=': { 'current': '@{range_pick}}}' },
			'{{hassave=': { 'current': '@{save}}}' },
			'{{spell_range=': { 'current': '^{@{range_pick}}}}' },
			'{{hasposrange=': { 'current': '@{hasposrange}}}' },
			'{{custrange=': { 'current': '@{range}}}' },
			'{{range=': { 'current': '[[@{range_numeric}]]}}' },
			'{{save=': { 'current': '@{save}}}' },
			'{{savedc=': { 'current': '[[@{savedc}]]}}', 'old': ['@{savedc}}}'] },
			'{{casterlevel=': { 'current': '[[@{casterlevel}]]}}' },
			'{{spell_level=': { 'current': '[[@{spell_level}]]}}' },
			'{{hassr=': { 'current': '@{abil-sr}}}' },
			'{{sr=': { 'current': '^{@{abil-sr}}}}' },
			'{{^{duration}=': { 'current': '@{duration}}}' },
			'{{hasfrequency=': { 'current': '@{frequency}}}' },
			'{{frequency=': { 'current': '^{@{frequency}}}}' },
			'{{next_cast=': { 'current': '@{rounds_between}}}' },
			'{{hasuses=': { 'current': '@{hasuses}}}' },
			'{{uses=': { 'current': '@{used}}}' },
			'{{uses_max=': { 'current': '@{used|max}}}' },
			'{{cust_category=': { 'current': '@{cust-category}}}' },
			'{{concentration=': { 'current': '[[@{Concentration-mod}]]}}', 'old': ['@{Concentration-mod}}', '@{Concentration-mod}}}'] },
			'{{damage=': { 'current': '@{damage-macro-text}}}' },
			'{{damagetype=': { 'current': '@{damage-type}}}' },
			'{{hasattack=': { 'current': '@{hasattack}}}' },
			'{{attacktype=': { 'current': '^{@{abil-attacktypestr}}}}' },
			'{{targetarea=': { 'current': '@{targets}}}' },
			'{{shortdesc=': { 'current': '@{short-description}}}' },
			'{{description=': { 'current': '@{description}}}' },
			'{{deafened_note=': { 'current': '@{SpellFailureNote}}}' }
		},
		defaultDeletedArray: null
	}
},
    events = {
	attackEventsSLA: ["damage-macro-text", "damage-type", "abil-sr", "save", "abil-attack-type", "name", "range_numeric"],
	commandMacroFields: ["name", "used", "used_max", "showinmenu", "ability_type", "frequency", "rule_category"]
};
/** sets tab for an ability. these have multiple checkboxes, not a radio
 *@param {string} id optional id of row
 *@param {function} callback call when done
 *@param {obj} eventInfo from 'on' event change:rule_category
 */
function setRuleTab(id, callback, eventInfo) {
	var idStr = SWUtils.getRepeatingIDStr(id),
	    prefix = "repeating_ability_" + idStr,
	    catfields = [],
	    ruleCategoryField = prefix + "rule_category",
	    abilityTypeField = prefix + 'ability_type',
	    fields = [ruleCategoryField, abilityTypeField];
	catfields = _underscore2.default.map(categoryAttrs, function (attr) {
		return prefix + attr;
	});
	fields = fields.concat(catfields);
	getAttrs(fields, function (v) {
		var setter,
		    ruleType = 0,
		    abilityType = 0;
		setter = _underscore2.default.reduce(catfields, function (m, attr) {
			m[attr] = 0;
			return m;
		}, {});
		if (v[abilityTypeField]) {
			abilityType = tabTypeSorted[v[abilityTypeField]];
			setter[prefix + 'tabcat' + abilityType] = 1;
		}
		if (v[ruleCategoryField]) {
			ruleType = tabRuleSorted[v[ruleCategoryField]];
			setter[prefix + 'tabcat' + ruleType] = 1;
			setter[prefix + 'tabcat-1'] = 0;
		} else {
			setter[prefix + 'tabcat-1'] = 1;
		}

		//TAS.debug("PFAbility.setRuleTab, setting",setter);
		setAttrs(setter, _PFConst2.default.silentParams);
	});
}
function setRuleTabs() {
	getSectionIDs("repeating_ability", function (ids) {
		_underscore2.default.each(ids, function (id) {
			setRuleTab(id);
		});
	});
}

/** returns all rule_category and ability_type used
 * @returns {jsobj} {'rules':[values of rule_category], 'types':[valuesof ability_type]}
 */
function getAbilityTypes(callback) {
	var done = function done(typeObj) {
		//TAS.debug('Ability.getAbilityTypes returning with ',typeObj);
		if (typeof callback === "function") {
			callback(typeObj);
		}
	};
	getSectionIDs('repeating_ability', function (ids) {
		var fields = [];
		if (!ids || _underscore2.default.size(ids) === 0) {
			done({ 'rules': [], 'types': [] });
			return;
		}
		_underscore2.default.each(ids, function (id) {
			var prefix = 'repeating_ability_' + id + '_';
			fields.push(prefix + 'rule_category');
			fields.push(prefix + 'showinmenu');
			fields.push(prefix + 'ability_type');
		});
		getAttrs(fields, function (v) {
			var basearray = [],
			    rulearray = [],
			    typearray = [];
			basearray = _underscore2.default.chain(ids).map(function (id) {
				var retObj = {},
				    prefix = 'repeating_ability_' + id + '_';
				retObj.id = id;
				retObj.showinmenu = parseInt(v[prefix + 'showinmenu'], 10) || 0;
				retObj.rule_category = v[prefix + 'rule_category'] || '';
				retObj.ability_type = (v[prefix + 'ability_type'] || '').toLowerCase();
				//TAS.debug("row "+id+" is ",retObj);
				return retObj;
			}).filter(function (o) {
				return o.showinmenu;
			}).value();

			if (basearray) {
				rulearray = _underscore2.default.chain(basearray).groupBy('rule_category').keys().compact().value();
				typearray = _underscore2.default.chain(basearray).groupBy('ability_type').keys().compact().value();
			}
			if (!rulearray) {
				rulearray = [];
			}
			if (!typearray) {
				typearray = [];
			}
			done({ 'rules': rulearray, 'types': typearray });
		});
	});
}
function getNewAbilityAttrs(ability) {
	var setter = {},
	    id = '',
	    prefix = '',
	    matches;
	try {
		id = generateRowID();
		prefix = 'repeating_ability_' + id + '_';
		setter[prefix + 'row_id'] = id;
		setter[prefix + 'showinmenu'] = ability['showinmenu'] || 0;
		setter[prefix + 'name'] = ability.name || '';
		setter[prefix + 'used'] = ability['used'] || '';
		setter[prefix + 'used_max'] = ability['used_max'] || '';
		setter[prefix + 'max-calculation'] = ability['max-calculation'] || '';
		setter[prefix + 'short-description'] = ability['short-description'] || '';
		setter[prefix + 'description'] = ability['description'] || '';
		setter[prefix + 'rule_category'] = ability['rule_category'] || '';
		setter[prefix + 'CL-basis'] = ability['CL-basis'] || '0';
		setter[prefix + 'class-name'] = ability['class-name'] || '';
		if (ability.rule_category === 'spell-like-abilities') {
			setter[prefix + 'ability_type'] = 'Sp';
			if (ability['spell_level-misc']) {
				setter[prefix + 'spell_level-misc'] = ability['spell_level-misc'];
				setter[prefix + 'spell_level-misc-mod'] = ability['spell_level-misc-mod'];
				setter[prefix + 'spell_level-basis'] = ability['spell_level-basis'];
			}
			if (ability['range_numeric']) {
				setter[prefix + 'range'] = ability['range'];
				setter[prefix + 'range_numeric'] = ability['range_numeric'];
				setter[prefix + 'range_pick'] = ability['range_pick'];
			}
			if (ability["abil-sr"]) {
				setter[prefix + 'abil-sr'] = ability["abil-sr"];
			}
			if (ability['save']) {
				setter[prefix + 'save'] = ability['save'];
			}
		} else {
			matches = ability.name.match(/\b(Sp|Su|Ex)\b/i);
			if (matches && matches[1]) {
				setter[prefix + 'ability_type'] = matches[0][0].toUpperCase() + matches[0][1].toLowerCase();
			} else {
				setter[prefix + 'ability_type'] = '';
			}
		}
		setter[prefix + 'macro-text'] = ability['macro-text'] || '';
	} catch (err) {
		_exportsLoaderTASTheAaronSheet2.default.error("PFAbility.getNewAbilityAttrs", err, ability);
	} finally {
		return setter;
	}
}
function copyToAbilities(callback, abilities) {
	var done = _underscore2.default.once(function () {
		_exportsLoaderTASTheAaronSheet2.default.debug("leaving PFAbility.copyToAbilities");
		if (typeof callback === "function") {
			callback();
		}
	}),
	    setter = {};
	_exportsLoaderTASTheAaronSheet2.default.debug("At PFAbility.copyToAbilities");
	if (_underscore2.default.size(abilities)) {
		_underscore2.default.each(abilities, function (ability) {
			var xtra = getNewAbilityAttrs(ability);
			_exportsLoaderTASTheAaronSheet2.default.debug("PFAbility.copyToAbilities adding ", xtra);
			_underscore2.default.extend(setter, xtra);
		});
		_exportsLoaderTASTheAaronSheet2.default.debug("##########################", "PFAbility.copyToAbilities setting", setter);
	}
	if (_underscore2.default.size(setter)) {
		setAttrs(setter, _PFConst2.default.silentParams, done);
	} else {
		done();
	}
}

/** resetTopCommandMacro sets all-abilities_buttons_macro (menu of ability menus)
 *@param {function} callback call when done	
 */
function getTopOfMenu(callback, isNPC) {
	var done = function done(str) {
		_exportsLoaderTASTheAaronSheet2.default.debug("leaving PFAbility.getTopOfMenu");
		if (typeof callback === "function") {
			callback(str);
		}
	},
	    newMacro = "",
	    setter = {};
	try {
		newMacro = " @{orig_ability_header_macro}";
		getAbilityTypes(function (used) {
			var addlMacros = "",
			    prefix = "";
			try {
				if (isNPC) {
					prefix = "NPC-";
				}
				if (used.types) {
					_underscore2.default.each(used.types, function (type) {
						if (otherCommandMacros[type]) {
							addlMacros += otherCommandMacros[type].replace("NPCPREFIX", prefix);
						} else if (type) {
							_exportsLoaderTASTheAaronSheet2.default.warn("cound not find top macro for " + type);
						}
					});
				}
				if (addlMacros) {
					newMacro += " {{row03=^{ability-menus}}} {{row04=" + addlMacros + "}}";
				}
				//TAS.debug("PFAbility.getTopOfMenu: done building top macro it is :",newMacro);
			} catch (innererr) {
				_exportsLoaderTASTheAaronSheet2.default.error("PFAbility.getTopOfMenu innererr", innererr);
			} finally {
				done(newMacro);
			}
		});
	} catch (err) {
		_exportsLoaderTASTheAaronSheet2.default.error("PFAbility.getTopOfMenu", err);
		done(newMacro);
	}
}
function resetCommandMacro(callback) {
	var done = _underscore2.default.once(function () {
		if (typeof callback === "function") {
			callback();
		}
	}),
	    doneOne = _underscore2.default.after(8, done);

	getTopOfMenu(function (header) {
		PFMenus.resetOneCommandMacro('ability', true, doneOne, header);
	}, true);
	getTopOfMenu(function (header) {
		PFMenus.resetOneCommandMacro('ability', false, doneOne, header);
	}, false);
	PFMenus.resetOneCommandMacro('ex', true, doneOne);
	PFMenus.resetOneCommandMacro('sp', true, doneOne);
	PFMenus.resetOneCommandMacro('su', true, doneOne);
	PFMenus.resetOneCommandMacro('ex', false, doneOne);
	PFMenus.resetOneCommandMacro('sp', false, doneOne);
	PFMenus.resetOneCommandMacro('su', false, doneOne);
}
function importFromCompendium(callback, eventInfo) {
	var done = _underscore2.default.once(function () {
		resetCommandMacro();
		_exportsLoaderTASTheAaronSheet2.default.debug("leaving PFAbility.importFromCompendium");
		if (typeof callback === "function") {
			callback();
		}
	}),
	    id = SWUtils.getRowId(eventInfo.sourceAttribute),
	    //row doesn't really exist yet so get id from event
	prefix = 'repeating_ability_' + id + '_';
	//TAS.debug"at PFAbility.importFromCompendium for "+ prefix);
	getAttrs(['is_undead', prefix + 'name', prefix + 'compendium_category', prefix + 'rule_category', prefix + 'ability_type_compendium', prefix + 'ability_type', prefix + 'description', prefix + 'range_from_compendium', prefix + 'target_from_compendium', prefix + 'area_from_compendium', prefix + 'effect_from_compendium'], function (v) {
		var compcat = '',
		    abilitytype = '',
		    ability_basis = '',
		    location = '',
		    setter = {},
		    newcat = '',
		    abilname = '',
		    silentSetter = {},
		    match,
		    note = '',
		    areaEffectText = '',
		    newRangeSettings;
		try {
			//TAS.debug("PFAbility.importFromCompendium got values: ",v);
			if (v[prefix + 'ability_type_compendium']) {
				abilitytype = v[prefix + 'ability_type_compendium'];
				setter[prefix + 'ability_type'] = abilitytype;
				silentSetter[prefix + 'ability_type_compendium'] = "";
			}
			compcat = v[prefix + 'compendium_category'];
			silentSetter[prefix + 'compendium_category'] = "";
			if (compcat) {
				compcat = compcat.toLowerCase();
				if (compcat === 'feats') {
					newcat = 'feats';
				} else if (compcat === 'monster rule') {
					newcat = 'monster-rule';
				} else if (compcat === 'spell') {
					newcat = 'spell-like-abilities';
				}
				if (newcat === 'monster-rule') {
					if (v[prefix + 'description']) {
						match = v[prefix + 'description'].match(/Location\:\s*(.*)$/i);
						//TAS.debug"matching "+match);
						if (match && match[1]) {
							location = SWUtils.trimBoth(match[1].toLowerCase());
							match = location.match(/special qual|sq|special att|special abil|defens|spell/i);
							if (match) {
								switch (match[0]) {
									case 'special qual':
									case 'sq':
										newcat = 'special-qualities';break;
									case 'special att':
										newcat = 'special-attacks';break;
									case 'special abil':
										newcat = 'special-abilities';break;
									case 'defens':
										newcat = 'defensive-abilities';break;
									case 'spell':
										newcat = 'spell-like-abilities';break;
								}
							}
						}
					}
				}
				if (abilitytype === 'Sp' && !newcat) {
					newcat = 'spell-like-abilities';
				}
				if (!abilitytype && newcat === 'spell-like-abilities') {
					abilitytype = 'Sp';
					setter[prefix + 'ability_type'] = 'Sp';
				} else if (abilitytype === 'Sp' && !newcat) {
					newcat = 'spell-like-abilities';
				}

				if (newcat) {
					setter[prefix + 'rule_category'] = newcat;
				} else {
					note += compcat;
				}
				if (abilitytype === 'Sp') {
					areaEffectText = v[prefix + 'target_from_compendium'] || v[prefix + 'area_from_compendium'] || v[prefix + 'effect_from_compendium'] || "";
					setter[prefix + 'targets'] = areaEffectText;
					if (v[prefix + 'range_from_compendium']) {
						newRangeSettings = PFUtils.parseSpellRangeText(v[prefix + 'range_from_compendium'], areaEffectText);
						setter[prefix + "range_pick"] = newRangeSettings.dropdown;
						setter[prefix + "range"] = newRangeSettings.rangetext;
					}
					setter[prefix + 'ability-basis'] = '@{CHA-mod}';
				} else if (v[prefix + 'name']) {
					abilname = v[prefix + 'name'].tolowercase();
					abilname = abilname.match(/^[^(]+/);
					if (PFDB.specialAttackDCAbilityBase[abilname]) {
						ability_basis = PFDB.specialAttackDCAbilityBase[abilname];
					} else {
						ability_basis = 'CON';
					}
					if (ability_basis === 'CON' && parseInt(v.is_undead, 10)) {
						ability_basis = 'CHA';
					}
					ability_basis = '@{' + ability_basis + '}';
					setter[prefix + 'ability-basis'] = ability_basis;
				}
			}
		} catch (err) {
			_exportsLoaderTASTheAaronSheet2.default.error("PFAbility.importFromCompendium", err);
		} finally {
			if (_underscore2.default.size(silentSetter) > 0) {
				setAttrs(silentSetter, _PFConst2.default.silentParams);
			}
			//TAS.debug"PFAbility.importFromCompendium, setting",setter);
			if (_underscore2.default.size(setter) > 0) {
				setAttrs(setter, {}, done);
			} else {
				done();
			}
		}
	});
}
function setClassName(id, callback, eventInfo) {
	var done = _underscore2.default.once(function () {
		if (typeof callback === "function") {
			callback();
		}
	}),
	    idStr = SWUtils.getRepeatingIDStr(id),
	    prefix = "repeating_ability_" + idStr,
	    clbasisField = prefix + "CL-basis";
	getAttrs([prefix + 'CL-basis', prefix + 'class-name', "race", "class-0-name", "class-1-name", "class-2-name", "class-3-name", "class-4-name", "class-5-name"], function (v) {
		var clBase = '',
		    setter = {},
		    match;
		try {
			if (v[clbasisField]) {
				if (v[clbasisField] === "@{level}") {
					clBase = v["race"];
				} else if (v[clbasisField] === "@{npc-hd-num}") {
					clBase = v["race"];
				} else if (parseInt(v[clbasisField], 10) === 0) {
					clBase = "";
				} else {
					match = v[prefix + "CL-basis"].match(/\d+/);
					if (match) {
						clBase = v["class-" + match[0] + "-name"];
					}
				}
				if (v[prefix + 'class-name'] !== clBase) {
					setter[prefix + 'class-name'] = clBase;
				}
			}
		} catch (err) {
			_exportsLoaderTASTheAaronSheet2.default.error("PFAbility.setClassName", err);
		} finally {
			if (_underscore2.default.size(setter) > 0) {
				setAttrs(setter, _PFConst2.default.silentParams, done);
			} else {
				done();
			}
		}
	});
}
function setAttackEntryVals(spellPrefix, weaponPrefix, v, setter, noName) {
	var notes = "",
	    attackType = "";
	setter = setter || {};
	try {
		attackType = PFUtils.findAbilityInString(v[spellPrefix + "abil-attack-type"]);
		if (v[spellPrefix + "name"]) {
			if (!noName) {
				setter[weaponPrefix + "name"] = v[spellPrefix + "name"];
			}
			setter[weaponPrefix + "source-spell-name"] = v[spellPrefix + "name"];
		}
		if (attackType) {
			setter[weaponPrefix + "attack-type"] = v[spellPrefix + "abil-attack-type"];
			if (/CMB/i.test(attackType)) {
				setter[weaponPrefix + "vs"] = "cmd";
			} else if (/ranged/i.test(attackType)) {
				setter[weaponPrefix + "vs"] = "touch";
				setter[weaponPrefix + "isranged"] = 1;
				setter[weaponPrefix + "range"] = v[spellPrefix + "range_numeric"];
			} else {
				setter[weaponPrefix + "vs"] = "touch";
			}
		}

		if (v[spellPrefix + "damage-macro-text"]) {
			setter[weaponPrefix + "precision_dmg_macro"] = v[spellPrefix + "damage-macro-text"];
			if (attackType) {
				setter[weaponPrefix + "critical_dmg_macro"] = v[spellPrefix + "damage-macro-text"];
			} else {
				setter[weaponPrefix + "critical_dmg_macro"] = "";
			}
		}
		if (v[spellPrefix + "damage-type"]) {
			setter[weaponPrefix + "precision_dmg_type"] = v[spellPrefix + "damage-type"];
			if (attackType) {
				setter[weaponPrefix + "critical_dmg_type"] = v[spellPrefix + "damage-type"];
			} else {
				setter[weaponPrefix + "critical_dmg_type"] = "";
			}
		}

		if (v[spellPrefix + "save"]) {
			if (notes) {
				notes += ", ";
			}
			notes += "Save: " + v[spellPrefix + "save"] + " DC: [[@{" + spellPrefix + "savedc}]]";
		}
		if (v[spellPrefix + "sr"]) {
			if (notes) {
				notes += ", ";
			}
			notes += "Spell resist:" + v[spellPrefix + "abil-sr"];
		}
		if (notes) {
			setter[weaponPrefix + "notes"] = notes;
		}
	} catch (err) {
		_exportsLoaderTASTheAaronSheet2.default.error("PFAbility.setAttackEntryVals", err);
	} finally {
		return setter;
	}
}
/**Triggered from a button in repeating spells 
 *@param {string} id the row id or null
 *@param {function} callback when done
 *@param {boolean} silently setattrs silent:true
 *@param {object} eventInfo if id is null get id from here.
 */
function createAttackEntryFromRow(id, callback, silently, eventInfo, weaponId) {
	var done = _underscore2.default.once(function () {
		_exportsLoaderTASTheAaronSheet2.default.debug("leaving PFAbility.createAttackEntryFromRow");
		if (typeof callback === "function") {
			callback();
		}
	}),
	    attribList = [],
	    itemId = id || (eventInfo ? SWUtils.getRowId(eventInfo.sourceAttribute) : ""),

	//idStr = SWUtils.getRepeatingIDStr(itemId),
	item_entry = 'repeating_ability_' + itemId + '_',
	    slaPrefix = item_entry,
	    //'repeating_ability_' + idStr,
	attributes = ["range_numeric", "damage-macro-text", "damage-type", "abil-sr", "savedc", "save", "abil-attack-type", "name"];
	if (!itemId) {
		_exportsLoaderTASTheAaronSheet2.default.warn("Cannot create usable attack entry from SLA since we cannot identify the row id");
	}
	attributes.forEach(function (attr) {
		attribList.push(slaPrefix + attr);
	});

	//TAS.debug("PFAbility.createAttackEntryFromRow: attribList=" + attribList);
	getAttrs(attribList, function (v) {
		var newRowId = "",
		    setter = {},
		    prefix = "repeating_weapon_",
		    idStr = "",
		    params = {};
		try {
			//TAS.debug("at PFAbility.createAttackEntryFromRow",v);
			if (!PFUtils.findAbilityInString(v[slaPrefix + "abil-attack-type"]) && !v[slaPrefix + "damage-macro-text"]) {
				_exportsLoaderTASTheAaronSheet2.default.warn("no attack to create for ability " + v[slaPrefix + "name"] + ", " + itemId);
			} else {
				if (!weaponId) {
					newRowId = generateRowID();
				} else {
					newRowId = weaponId;
				}
				idStr = newRowId + "_";
				prefix += idStr;
				setter = setAttackEntryVals(item_entry, prefix, v, setter, weaponId);
				setter[prefix + "source-ability"] = itemId;
				setter[prefix + "group"] = "Special";
			}
		} catch (err) {
			_exportsLoaderTASTheAaronSheet2.default.error("PFAbility.createAttackEntryFromRow", err);
		} finally {
			if (_underscore2.default.size(setter) > 0) {
				setter[slaPrefix + "create-attack-entry"] = 0;
				if (silently) {
					params = _PFConst2.default.silentParams;
				}
				//TAS.debug("PFAbility.createAttackEntryFromRow setting:",setter);
				setAttrs(setter, {}, function () {
					//can do these in parallel
					//TAS.debug("PFAbility.createAttackEntryFromRow came back from setter ");
					PFAttackOptions.resetOption(newRowId);
					PFAttackGrid.resetCommandMacro();
					done();
				});
			} else {
				setter[slaPrefix + "create-attack-entry"] = 0;
				setAttrs(setter, _PFConst2.default.silentParams, done);
			}
		}
	});
}
function updateAssociatedAttack(id, callback, silently, eventInfo) {
	var done = _underscore2.default.once(function () {
		_exportsLoaderTASTheAaronSheet2.default.debug("leaving PFAbility.updateAssociatedAttack");
		if (typeof callback === "function") {
			callback();
		}
	}),
	    itemId = "",
	    item_entry = "",
	    attrib = "",
	    attributes = [];
	itemId = id || (eventInfo ? SWUtils.getRowId(eventInfo.sourceAttribute) : "");
	item_entry = 'repeating_spells_' + SWUtils.getRepeatingIDStr(itemId);
	attrib = eventInfo ? SWUtils.getAttributeName(eventInfo.sourceAttribute) : "";
	attributes = [];
	//TAS.debug("at PF Spell like abilities updateAssociatedAttack: for row" + id   );
	if (attrib) {
		attributes = [item_entry + attrib];
		if (/range/i.test(attrib)) {
			attributes = [item_entry + 'range_pick', item_entry + 'range', item_entry + 'range_numeric'];
		}
	} else {
		attributes = ["range_pick", "range", "range_numeric", "damage-macro-text", "damage-type", "sr", "savedc", "save", "abil-attack-type", "name"];
	}
	getAttrs(attributes, function (spellVal) {
		getSectionIDs("repeating_weapon", function (idarray) {
			// get the repeating set
			var spellsourcesFields = [];
			spellsourcesFields = _underscore2.default.reduce(idarray, function (memo, currentID) {
				memo.push("repeating_weapon_" + currentID + "_source-ability");
				return memo;
			}, []);
			getAttrs(spellsourcesFields, function (v) {
				var setter = {},
				    params = {},
				    idlist = [];
				try {
					_underscore2.default.each(idarray, function (currentID) {
						var prefix = "repeating_weapon_" + currentID + "_";
						if (v[prefix + "source-ability"] === itemId) {
							idlist.push(currentID);
							setter = setAttackEntryVals(item_entry, prefix, spellVal, setter);
						}
					});
				} catch (err) {
					_exportsLoaderTASTheAaronSheet2.default.error("PFAbility.updateAssociatedAttack", err);
				} finally {
					if (_underscore2.default.size(setter) > 0) {
						if (silently) {
							params = _PFConst2.default.silentParams;
						}
						setAttrs(setter, params, function () {
							PFAttackOptions.resetSomeOptions(idlist);
						});
					} else {
						done();
					}
				}
			});
		});
	});
}
function updateCharLevel(id, callback, eventInfo) {
	var done = _underscore2.default.once(function () {
		_exportsLoaderTASTheAaronSheet2.default.debug("leaving updateCharLevel");
		if (typeof callback === "function") {
			callback();
		}
	}),
	    idStr = SWUtils.getRepeatingIDStr(id),
	    prefix = "repeating_ability_" + idStr;
	getAttrs([prefix + "CL-misc-mod", prefix + "CL-basis-mod", prefix + "casterlevel", prefix + "ability_type", "buff_CasterLevel-total", "CasterLevel-Penalty"], function (v) {
		var clBase = 0,
		    cl = 0,
		    misc = 0,
		    pen = 0,
		    isSP = 0,
		    setter = {};
		try {
			isSP = parseInt(v[prefix + "ability_type"], 10) || 0;
			clBase = parseInt(v[prefix + "CL-basis-mod"], 10) || 0;
			misc = parseInt(v[prefix + "CL-misc-mod"], 10) || 0;
			pen = parseInt(v["CasterLevel-Penalty"], 10) || 0;
			cl = clBase + misc + pen;
			if (isSP) {
				cl += parseInt(v["buff_CasterLevel-total"], 10) || 0;
			}
			if (cl !== parseInt(v[prefix + 'casterlevel'], 10)) {
				setter[prefix + 'casterlevel'] = cl;
			}
		} catch (err) {
			_exportsLoaderTASTheAaronSheet2.default.error("PFAbility.updateCharLevel", err);
		} finally {
			if (_underscore2.default.size(setter)) {
				setAttrs(setter, {}, done);
			} else {
				done();
			}
		}
	});
}
function updateAbilityRange(id, callback, silently, eventInfo) {
	var done = _underscore2.default.once(function () {
		_exportsLoaderTASTheAaronSheet2.default.debug("leaving updateAbilityRange");
		if (typeof callback === "function") {
			callback();
		}
	}),
	    idStr = SWUtils.getRepeatingIDStr(id),
	    prefix = "repeating_ability_" + idStr;
	getAttrs([prefix + "range_pick", prefix + "range", prefix + "range_numeric", prefix + "casterlevel", prefix + "ability_type"], function (v) {
		var newRange = 0,
		    currRange = 0,
		    cl = 0,
		    setter = {},
		    isSP = 0,
		    currPosRange = 0;
		try {
			isSP = v[prefix + 'ability_type'] === 'Sp' ? 1 : 0;
			currRange = parseInt(v[prefix + "range_numeric"], 10) || 0;
			if (isSP) {
				cl = parseInt(v[prefix + 'casterlevel'], 10) || 0;
				newRange = PFUtils.findSpellRange(v[prefix + "range"], v[prefix + "range_pick"], cl) || 0;
			} else {
				newRange = parseInt(SWUtils.trimBoth(v[prefix + 'range']), 10) || 0;
			}
			if (newRange !== currRange) {
				//TAS.debug("updating range");
				setter[prefix + "range_numeric"] = newRange;
			}
			currPosRange = parseInt(v[prefix + 'hasposrange'], 10) || 0;
			if (newRange > 0 && !currPosRange) {
				setter[prefix + 'hasposrange'] = 1;
			} else if (currPosRange) {
				setter[prefix + 'hasposrange'] = 0;
			}
		} catch (err) {
			_exportsLoaderTASTheAaronSheet2.default.error("updateAbilityRange", err);
		} finally {
			if (_underscore2.default.size(setter)) {
				setAttrs(setter, {}, done);
			} else {
				done();
			}
		}
	});
}
/** to use in calls to _.invoke or otherwise, sets switch variables to setter for given row
 * @param {jsobj} setter to pass in first var of setAttrs
 * @param {string} id the id of this row, or null if we are within the row context already
 * @param {jsobj} v the values needed returned by getAttrs
 */
function resetOption(setter, id, v, eventInfo) {
	var idStr = SWUtils.getRepeatingIDStr(id),
	    prefix = 'repeating_ability_' + idStr,
	    isSP = '',
	    posRange = '',
	    hasUses = '',
	    hasFrequency = '',
	    hasAttack = '',
	    atkstr = '',
	    attackStrForDisplay = '';
	setter = setter || {};
	try {
		if (!v) {
			return setter;
		}
		isSP = v[prefix + 'ability_type'] === 'Sp' ? '1' : '';

		if (isSP !== v[prefix + 'is_sp']) {
			setter[prefix + 'is_sp'] = isSP;
		}
		posRange = (parseInt(v[prefix + 'range_numeric'], 10) || 0) > 0 ? '1' : '';
		if (posRange !== v[prefix + 'hasposrange']) {
			setter[prefix + 'hasposrange'] = posRange;
		}
		if (v[prefix + 'frequency'] && v[prefix + 'frequency'] !== 'not-applicable') {
			hasFrequency = '1';
			switch (v[prefix + 'frequency']) {
				case 'perday':
				case 'permonth':
				case 'hexfreq':
				case 'other':
					hasUses = '1';
					break;
			}
		}
		if (hasFrequency !== v[prefix + 'hasfrequency']) {
			setter[prefix + 'hasfrequency'] = hasFrequency;
		}
		if (hasUses !== v[prefix + 'hasuses']) {
			setter[prefix + 'hasuses'] = hasUses;
		}
		if (PFUtils.findAbilityInString(v[prefix + 'abil-attack-type'])) {
			hasAttack = '1';
		}
		if (hasAttack !== v[prefix + 'hasattack']) {
			setter[prefix + 'hasattack'] = hasAttack;
		}
		if (hasAttack) {
			atkstr = v[prefix + 'abil-attack-type'].toLowerCase();
			if (atkstr.indexOf('melee') >= 0) {
				attackStrForDisplay = 'touch';
			} else if (atkstr.indexOf('range') >= 0) {
				attackStrForDisplay = 'ranged-touch-ray';
			} else if (atkstr.indexOf('cmb') >= 0) {
				attackStrForDisplay = 'combat-maneuver-bonus-abbrv';
			}
		}
		if (attackStrForDisplay !== v[prefix + 'abil-attacktypestr']) {
			setter[prefix + 'abil-attacktypestr'] = attackStrForDisplay;
		}
	} catch (err) {
		_exportsLoaderTASTheAaronSheet2.default.error("PFAbility.recalcAbilities", err);
	} finally {
		return setter;
	}
}
function resetOptionAsync(id, callback, eventInfo) {
	var done = _underscore2.default.once(function () {
		_exportsLoaderTASTheAaronSheet2.default.debug("leaving PFAbility.resetOption");
		if (typeof callback === "function") {
			callback();
		}
	}),
	    idStr = SWUtils.getRepeatingIDStr(id),
	    prefix = 'repeating_ability_' + idStr,
	    fields = [];
	fields = _underscore2.default.map(allOptionRepeatingFields, function (attr) {
		return prefix + attr;
	});
	getAttrs(fields, function (v) {
		var setter = {};
		try {
			setter = resetOption(setter, id, v);
		} catch (err) {
			_exportsLoaderTASTheAaronSheet2.default.error("PFAbility.recalcAbilities", err);
		} finally {
			if (_underscore2.default.size(setter)) {
				setAttrs(setter, _PFConst2.default.silentParams, done, eventInfo);
			} else {
				done();
			}
		}
	});
}

function recalcAbilities(callback, silently, eventInfo, levelOnly) {
	var done = _underscore2.default.once(function () {
		_exportsLoaderTASTheAaronSheet2.default.debug("leaving PFAbility.recalcAbilities");
		if (typeof callback === "function") {
			callback();
		}
	});
	getSectionIDs('repeating_ability', function (ids) {
		var numids = _underscore2.default.size(ids),
		    doneOne,
		    calllevel;
		if (numids === 0) {
			done();
			return;
		}
		//TAS.debug("there are "+ numids+" rows to recalc");
		doneOne = _underscore2.default.after(numids, done);
		//refactor to do all rows at once
		calllevel = function calllevel(id) {
			PFUtilsAsync.setRepeatingDropdownValue('ability', id, 'CL-basis', 'CL-basis-mod', function () {
				//TAS.debug("PFAbility.recalcAbilities calling updateCharLevel for "+id);
				updateCharLevel(id, function () {
					_exportsLoaderTASTheAaronSheet2.default.debug("PFAbility.recalcAbilities calling updateAbilityRange for " + id);
					updateAbilityRange(id, function () {
						//	TAS.debug("PFAbility.recalcAbilities calling updateAssociatedAttack for "+id);
						//	updateAssociatedAttack(id,null,false,null);
						doneOne();
					});
				});
			});
		};
		_underscore2.default.each(ids, function (id) {
			calllevel(id);
			if (!levelOnly) {
				resetOptionAsync(id);
			}
		});
	});
}
function migrateRepeatingMacros(callback) {
	var done = _underscore2.default.once(function () {
		_exportsLoaderTASTheAaronSheet2.default.debug("leaving PFAbility.migrateRepeatingMacros");
		if (typeof callback === "function") {
			callback();
		}
	}),
	    migrated = _underscore2.default.once(function () {
		setAttrs({ 'migrated_ability_macrosv112': 1 }, _PFConst2.default.silentParams);
		done();
	}),
	    defaultName = '',
	    defaultMacro = '',
	    section = 'ability';
	getAttrs(['migrated_ability_macrosv112'], function (v) {
		try {
			if (!parseInt(v.migrated_ability_macrosv112, 10)) {

				defaultName = defaultMacroMap[section] || 'default';
				defaultMacro = defaultMacros[defaultName];
				if (!defaultMacro) {
					_exportsLoaderTASTheAaronSheet2.default.error("cannot find default macro for section " + section);
					done();
					return;
				}
				//TAS.debug("PFAbility.migrateRepeatingMacros about to call PFMacros",defaultMacro);
				PFMacros.migrateRepeatingMacros(migrated, section, 'macro-text', defaultMacro.defaultRepeatingMacro, defaultMacro.defaultRepeatingMacroMap, defaultMacro.defaultDeletedArray, '@{NPC-whisper}');
			} else {
				migrated();
			}
		} catch (err) {
			_exportsLoaderTASTheAaronSheet2.default.error("PFAbility.migrateRepeatingMacros error setting up " + section, err);
			done();
		}
	});
}
function migrate(callback) {
	var done = function done() {
		_exportsLoaderTASTheAaronSheet2.default.debug("leaving PFAbility.migrate");
		if (typeof callback === "function") {
			callback();
		}
	};
	migrateRepeatingMacros(done);
}
function recalculate(callback, silently, oldversion) {
	var done = _underscore2.default.once(function () {
		_exportsLoaderTASTheAaronSheet2.default.info("leaving PFAbility.recalculate");
		if (typeof callback === "function") {
			callback();
		}
	}),
	    doneWithList = function doneWithList() {
		//TAS.debug("now calling resetcommandmacro");
		resetCommandMacro();
		done();
	},
	    callRecalcAbilities = function callRecalcAbilities() {
		//TAS.debug("PF1 calling recalcAbilities");
		recalcAbilities(_exportsLoaderTASTheAaronSheet2.default.callback(doneWithList));
		setRuleTabs();
	};
	try {
		//TAS.debug("at PFAbility.recalculate");
		migrate(_exportsLoaderTASTheAaronSheet2.default.callback(callRecalcAbilities));
	} catch (err) {
		_exportsLoaderTASTheAaronSheet2.default.error("PFAbility.recalculate, ", err);
		done();
	}
}
function registerEventHandlers() {
	var eventToWatch = "",
	    macroEvent = "remove:repeating_ability ",
	    singleEvent = "change:repeating_ability:";

	macroEvent = _underscore2.default.reduce(events.commandMacroFields, function (m, a) {
		m += singleEvent + a + " ";
		return m;
	}, macroEvent);
	on(macroEvent, _exportsLoaderTASTheAaronSheet2.default.callback(function eventRepeatingCommandMacroUpdate(eventInfo) {
		var attr;
		attr = SWUtils.getAttributeName(eventInfo.sourceAttribute);
		if (eventInfo.sourceType === "player" || eventInfo.sourceType === "api" || eventInfo.sourceType === "sheetworker" && attr === 'used_max') {
			PFFeatures.resetTopCommandMacro(null, eventInfo);
			resetCommandMacro();
		}
	}));
	on("change:repeating_ability:CL-basis", _exportsLoaderTASTheAaronSheet2.default.callback(function eventAbilityClassDropdown(eventInfo) {
		_exportsLoaderTASTheAaronSheet2.default.debug("caught " + eventInfo.sourceAttribute + " event: " + eventInfo.sourceType);
		SWUtils.evaluateAndSetNumber('repeating_ability_CL-basis', 'repeating_ability_CL-basis-mod');
		if (eventInfo.sourceType === "player" || eventInfo.sourceType === "api") {
			setClassName(null, null, eventInfo);
		}
	}));
	eventToWatch = _underscore2.default.reduce(optionRepeatingHelperFields, function (m, a) {
		m += 'change:repeating_ability:' + a + ' ';
		return m;
	}, "");
	on(eventToWatch, _exportsLoaderTASTheAaronSheet2.default.callback(function eventChangeAbilityTypeFrequencyOrRange(eventInfo) {
		_exportsLoaderTASTheAaronSheet2.default.debug("caught " + eventInfo.sourceAttribute + " event: " + eventInfo.sourceType);
		if (eventInfo.sourceType === "player" || eventInfo.sourceType === "api" || eventInfo.sourceAttribute.indexOf('range') > 0) {
			resetOptionAsync();
		}
	}));
	on("change:repeating_ability:CL-misc change:repeating_ability:spell_level-misc", _exportsLoaderTASTheAaronSheet2.default.callback(function eventSLAEquationMacro(eventInfo) {
		_exportsLoaderTASTheAaronSheet2.default.debug("caught " + eventInfo.sourceAttribute + " event: " + eventInfo.sourceType);
		SWUtils.evaluateAndSetNumber(eventInfo.sourceAttribute, eventInfo.sourceAttribute + "-mod");
	}));
	on("change:buff_CasterLevel-total change:CasterLevel-Penalty", _exportsLoaderTASTheAaronSheet2.default.callback(function eventAbilityLevelChange(eventInfo) {
		if (eventInfo.sourceType === "sheetworker") {
			_exportsLoaderTASTheAaronSheet2.default.debug("caught " + eventInfo.sourceAttribute + " event: " + eventInfo.sourceType);
			recalcAbilities(null, null, eventInfo, true);
		}
	}));
	on("change:repeating_ability:CL-basis-mod change:repeating_ability:CL-misc-mod", _exportsLoaderTASTheAaronSheet2.default.callback(function eventAbilityLevelChange(eventInfo) {
		if (eventInfo.sourceType === "sheetworker") {
			_exportsLoaderTASTheAaronSheet2.default.debug("caught " + eventInfo.sourceAttribute + " event: " + eventInfo.sourceType);
			updateCharLevel(null, null, eventInfo);
		}
	}));
	on("change:repeating_ability:compendium_category", _exportsLoaderTASTheAaronSheet2.default.callback(function eventAbilityCompendium(eventInfo) {
		if (eventInfo.sourceAttribute !== "sheetworker") {
			_exportsLoaderTASTheAaronSheet2.default.debug("caught " + eventInfo.sourceAttribute + " event: " + eventInfo.sourceType);
			importFromCompendium(null, eventInfo);
		}
	}));
	on("change:repeating_ability:create-attack-entry", _exportsLoaderTASTheAaronSheet2.default.callback(function eventcreateAttackEntryFromSLA(eventInfo) {
		_exportsLoaderTASTheAaronSheet2.default.debug("caught " + eventInfo.sourceAttribute + " event: " + eventInfo.sourceType);
		if (eventInfo.sourceType === "player" || eventInfo.sourceType === "api") {
			createAttackEntryFromRow(null, null, false, eventInfo);
		}
	}));
	on("change:repeating_ability:CL-misc-mod change:repeating_ability:CL-basis-mod change:repeating_ability:range_pick change:repeating_ability:range", _exportsLoaderTASTheAaronSheet2.default.callback(function eventClassRangeMod(eventInfo) {
		_exportsLoaderTASTheAaronSheet2.default.debug("caught " + eventInfo.sourceAttribute + " event: " + eventInfo.sourceType);
		//cl-misc-mod, cl-basis-mod  is sheetworker, range_pick and range must be player
		if (/range/i.test(eventInfo.sourceAttribute) && (eventInfo.sourceType === "player" || eventInfo.sourceType === "api") || /CL/i.test(eventInfo.sourceAttribute) && eventInfo.sourceType === "sheetworker") {
			updateAbilityRange(null, null, false, eventInfo);
		}
	}));
	eventToWatch = _underscore2.default.reduce(events.attackEventsSLA, function (memo, attr) {
		memo += "change:repeating_ability:" + attr + " ";
		return memo;
	}, "");
	on(eventToWatch, _exportsLoaderTASTheAaronSheet2.default.callback(function eventupdateAssociatedSLAttackAttack(eventInfo) {
		_exportsLoaderTASTheAaronSheet2.default.debug("caught " + eventInfo.sourceAttribute + " event" + eventInfo.sourceType);
		if (eventInfo.sourceType === "player" || eventInfo.sourceType === "api" || eventInfo.sourceType === "sheetworker" && !/attack\-type/i.test(eventInfo.sourceAttribute)) {
			updateAssociatedAttack(null, null, null, eventInfo);
		}
	}));
	on("change:repeating_ability:rule_category change:repeating_ability:ability_type", _exportsLoaderTASTheAaronSheet2.default.callback(function eventUpdateSLARuleCat(eventInfo) {
		_exportsLoaderTASTheAaronSheet2.default.debug("caught " + eventInfo.sourceAttribute + " event" + eventInfo.sourceType);
		setRuleTab(null, null, eventInfo);
	}));
}
registerEventHandlers();
_PFLog.PFConsole.log('   PFAbility module loaded        ');
_PFLog.PFLog.modulecount++;

/***/ }),
/* 16 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
	value: true
});
exports.applyConditions = applyConditions;

var _underscore = __webpack_require__(2);

var _underscore2 = _interopRequireDefault(_underscore);

var _PFLog = __webpack_require__(0);

var _exportsLoaderTASTheAaronSheet = __webpack_require__(1);

var _exportsLoaderTASTheAaronSheet2 = _interopRequireDefault(_exportsLoaderTASTheAaronSheet);

var _PFUtils = __webpack_require__(5);

var PFUtils = _interopRequireWildcard(_PFUtils);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

/* PFChecks.applyConditions - handles changes to skill and ability checks due to conditions AND buffs.
 * Reads in condition that affect Ability and Skill checks and updates condition fields.
 * checks-cond, Phys-skills-cond, Perception-cond.
 */
function applyConditions(callback, silently) {
	var done = function done() {
		if (typeof callback === "function") {
			callback();
		}
	};
	getAttrs(["condition-Blinded", "condition-Fear", "condition-Drained", "condition-Sickened", "condition-Wounds", "has_endurance_feat", "wounds_gritty_mode", "checks-cond", "Phys-skills-cond", "Perception-cond", "buff_Check-total", "wound_threshold-show", "CasterLevel-Penalty"], function (v) {
		//there is no Fascinated, if we add it then:
		//,"condition-Fascinated" -4 to perception
		var setter = {},
		    params = {},
		    buffCheck = 0,
		    drained = 0,
		    fear = 0,
		    sick = 0,
		    woundPenalty = 0,
		    wounds = 0,
		    allSkillsMod = 0,
		    casterlevel = 0,
		    blindedMod = 0,
		    currAllSkills = 0,
		    currPhysSkills = 0,
		    currPerSkills = 0,
		    currCaster = 0;
		try {
			buffCheck = parseInt(v["buff_Check-total"], 10) || 0;
			drained = parseInt(v["condition-Drained"], 10) || 0;
			fear = -1 * (parseInt(v["condition-Fear"], 10) || 0);
			sick = -1 * (parseInt(v["condition-Sickened"], 10) || 0);
			woundPenalty = PFUtils.getWoundPenalty(parseInt(v["condition-Wounds"], 10) || 0, parseInt(v.has_endurance_feat, 10) || 0, parseInt(v.wounds_gritty_mode, 10) || 0);
			wounds = (parseInt(v["wound_threshold-show"], 10) || 0) * woundPenalty;
			allSkillsMod = buffCheck + drained + fear + sick + wounds;
			casterlevel = drained + wounds;
			blindedMod = -2 * (parseInt(v["condition-Blinded"], 10) || 0);
			currAllSkills = parseInt(v["checks-cond"], 10) || 0;
			currPhysSkills = parseInt(v["Phys-skills-cond"], 10) || 0;
			currPerSkills = parseInt(v["Perception-cond"], 10) || 0;
			currCaster = parseInt(v["CasterLevel-Penalty"], 10) || 0;
			if (allSkillsMod !== currAllSkills || isNaN(currAllSkills)) {
				setter["checks-cond"] = allSkillsMod;
			}
			if (blindedMod !== currPhysSkills || isNaN(currPhysSkills)) {
				setter["Phys-skills-cond"] = blindedMod;
			}
			if (blindedMod !== currPerSkills || isNaN(currPerSkills)) {
				setter["Perception-cond"] = blindedMod;
			}
			if (casterlevel !== currCaster || isNaN(currCaster)) {
				setter["CasterLevel-Penalty"] = casterlevel;
			}
		} catch (err) {
			_exportsLoaderTASTheAaronSheet2.default.error("PFChecks.applyConditions", err);
		} finally {
			if (_underscore2.default.size(setter) > 0) {
				setAttrs(setter, {}, done);
			} else {
				done();
			}
		}
	});
}
_PFLog.PFConsole.log('   PFChecks module loaded         ');
_PFLog.PFLog.modulecount++;

/***/ }),
/* 17 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
	value: true
});
exports.setWoundThreshholdsLookup = setWoundThreshholdsLookup;
exports.updateCurrHPLookup = updateCurrHPLookup;
exports.updateMaxHPLookup = updateMaxHPLookup;
exports.updateTempMaxHP = updateTempMaxHP;
exports.setToPFS = setToPFS;
exports.ensureNPCHPZero = ensureNPCHPZero;
exports.migrate = migrate;
exports.recalculate = recalculate;

var _underscore = __webpack_require__(2);

var _underscore2 = _interopRequireDefault(_underscore);

var _PFLog = __webpack_require__(0);

var _exportsLoaderTASTheAaronSheet = __webpack_require__(1);

var _exportsLoaderTASTheAaronSheet2 = _interopRequireDefault(_exportsLoaderTASTheAaronSheet);

var _PFConst = __webpack_require__(3);

var _PFConst2 = _interopRequireDefault(_PFConst);

var _PFMigrate = __webpack_require__(6);

var PFMigrate = _interopRequireWildcard(_PFMigrate);

var _PFClassRaceGrid = __webpack_require__(25);

var PFClassRaceGrid = _interopRequireWildcard(_PFClassRaceGrid);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

/*setWoundLevel sets would level based on current HP when you already have all fields.
 * sets  @{condition-Wounds} based on :
 *@hp current hp
 *@grazed {int} hp  value for grazed level
 *@wounded {int} hp value for wounded level
 *@critical {int} hp value for critical level
 *@currWounds {int}  value of @{condition-Wounds}
 */
function setWoundLevel(hp, grazed, wounded, critical, currWounds) {
	var setWounds = 0;
	_exportsLoaderTASTheAaronSheet2.default.debug("at PFHealth.setWoundLevel, hp is " + hp);
	if (hp <= grazed) {
		if (hp > wounded) {
			setWounds = 1;
		} else if (hp > critical) {
			setWounds = 2;
		} else {
			setWounds = 3;
		}
	}
	//TAS.debug("PFHealth.setWoundLevel, hp:"+hp+", currWounds:"+currWounds+", setWounds:"+setWounds);
	if (setWounds !== currWounds) {
		setAttrs({
			"condition-Wounds": setWounds
		});
	}
}
/*setWoundLevelLookup - looks up data needed to set current would level.
 * calls setWoundLevel
 * @hp {int} the current hit points. will look up if this is not set.
 */
function setWoundLevelLookup(hp) {
	//TAS.debug"PFHealth.setWoundLevelLookup, hp passed in is:" + hp);
	_exportsLoaderTASTheAaronSheet2.default.debug("at PFHealth.setWoundLevelLookup, hp is " + hp);
	getAttrs(["HP", "HP_grazed", "HP_wounded", "HP_critical", "condition-Wounds", "wound_threshold-show"], function (v) {
		if (parseInt(v["wound_threshold-show"], 10)) {
			if (isNaN(parseInt(hp, 10))) {
				hp = parseInt(v["HP"], 10) || 0;
			}
			//TAS.debug("PFHealth.setWoundLevelLookup",v);
			setWoundLevel(hp, parseInt(v["HP_grazed"], 10) || 0, parseInt(v["HP_wounded"], 10) || 0, parseInt(v["HP_critical"], 10) || 0, parseInt(v["condition-Wounds"], 10) || 0);
		}
	});
}
/*setWoundThreshholds - sets wound thresholds when you already have hp data.
 * Also calls setWoundLevel
 * @hp {int} = current hit points @{HP}
 * @maxHP {int} = max hp @{HP|max}
 * @currWoundLevel {int} = @{condition-Wounds}
 * @abilityMod {int} = usually @{CON-mod} or mod of whataver ability is used. 0 if no ability (like undead)
 */
function setWoundThreshholds(hp, maxHP, currWoundLevel, abilityMod, v) {
	var setter = {},
	    grazed = 0,
	    wounded = 0,
	    critical = 0,
	    disabled = 0;
	try {
		_exportsLoaderTASTheAaronSheet2.default.debug("at PFHealth.setWoundThreshholds, hp is" + hp);
		grazed = Math.floor(maxHP * 0.75);
		wounded = Math.floor(maxHP * 0.5);
		critical = Math.floor(maxHP * 0.25);
		disabled = (abilityMod > 0 ? abilityMod : 0) * -1;
		if ((parseInt(v["HP_grazed"], 10) || 0) !== grazed) {
			setter["HP_grazed"] = grazed;
		}
		if ((parseInt(v["HP_wounded"], 10) || 0) !== wounded) {
			setter["HP_wounded"] = wounded;
		}
		if ((parseInt(v["HP_critical"], 10) || 0) !== critical) {
			setter["HP_critical"] = critical;
		}
		if ((parseInt(v["HP_disabled"], 10) || 0) !== disabled) {
			setter["HP_disabled"] = disabled;
		}
	} catch (err) {
		_exportsLoaderTASTheAaronSheet2.default.error("PFHealth.setWoundThresholds", err);
	} finally {
		if (_underscore2.default.size(setter) > 0) {
			setAttrs(setter, _PFConst2.default.silentParams, function () {
				setWoundLevel(hp, grazed, wounded, critical, currWoundLevel);
			});
		} else {
			setWoundLevel(hp, grazed, wounded, critical, currWoundLevel);
		}
	}
}
/*setWoundThreshholdsLookup
 * Sets wound thresholds by looking up values for "are we even useing wound threshold rules?" and the max hit points.
 * Calls the other setWoundThresholds
 * If Wound Threshholds are not used, makes sure that condition-Wounds is set to 0.
 */
function setWoundThreshholdsLookup() {
	_exportsLoaderTASTheAaronSheet2.default.debug("at PFHealth.setWoundThreshholdsLookup");
	getAttrs(["HP", "HP_max", "wound_threshold-show", "condition-Wounds", "HP-ability-mod", "HP_grazed", "HP_wounded", "HP_critical", "HP_disabled"], function (v) {
		if (parseInt(v["wound_threshold-show"], 10) === 1) {
			setWoundThreshholds(parseInt(v["HP"], 10) || 0, parseInt(v["HP_max"], 10) || 0, parseInt(v["condition-Wounds"], 10) || 0, parseInt(v["HP-ability-mod"], 10) || 0, v);
		} else if ((parseInt(v["condition-Wounds"], 10) || 0) !== 0) {
			setAttrs({
				"condition-Wounds": "0"
			});
		}
	});
}
/** updateCurrHP- when updating hp, check nonLethalDmg level and wound threshold levels
 * 
 * @param {int} hp 
 * @param {int} temphp 
 * @param {int} nonLethalDmg 
 * @param {boolean} usesWounds 
 * @param {string} hpAbility value of hp dropdown 
 * @param {int} hpAbilityMod 
 * @param {boolean} staggered 
 */
function updateCurrHP(hp, temphp, nonLethalDmg, usesWounds, hpAbility, hpAbilityMod, staggered) {
	if (hpAbility !== "0") {
		if (nonLethalDmg >= hp + temphp + (usesWounds ? 1 + hpAbilityMod : 0)) {
			setAttrs({
				"condition-Staggered": "1"
			});
		} else if (staggered) {
			setAttrs({
				"condition-Staggered": "0"
			});
		}
	}
	if (usesWounds) {
		setWoundLevelLookup(hp);
	}
}
/* updateCurrHPLookup - looks up data and calls updateCurrHP */
function updateCurrHPLookup() {
	getAttrs(["HP", "HP-temp", "non-lethal-damage", "wound_threshold-show", "HP-ability", "HP-ability-mod", "condition-Staggered"], function (v) {
		//TAS.debug("PFHealth.updateCurrHPLookup",v);
		updateCurrHP(parseInt(v["HP"], 10) || 0, parseInt(v["HP-temp"], 10) || 0, parseInt(v["non-lethal-damage"], 10) || 0, parseInt(v["wound_threshold-show"], 10) || 0, v["HP-ability"], parseInt(v["HP-ability-mod"], 10) || 0, parseInt(v["condition-Staggered"], 10) || 0);
	});
}
/** updateMaxHPLookup
 * sets max HP
 * @param {function} callback when done
 * @param {boolean} silently if T then call setAttrs with {silent:True}
 * @param {boolean} forceReset recalculates max HP and sets HP to it.
 * @param {object} eventInfo unused
 */
function updateMaxHPLookup(callback, silently, forceReset, eventInfo) {
	var done = _underscore2.default.once(function () {
		_exportsLoaderTASTheAaronSheet2.default.debug("leaving updateMaxHPLookup");
		if (typeof callback === "function") {
			callback();
		}
	});
	getAttrs(["HP", "HP_max", "HP-ability", "HP-ability-mod", "level", "total-hp", "total-mythic-hp", "condition-Drained", "HP-formula-mod", "HP-temp", "mythic-adventures-show", "wound_threshold-show", "condition-Wounds", "non-lethal-damage", "non-lethal-damage_max", "condition-Staggered", "hp_ability_bonus", "HP_grazed", "HP_wounded", "HP_critical", "HP_disabled", "increase_hp"], function (v) {
		var abilityMod = 0,
		    abilityBonus = 0,
		    currHPMax = 0,
		    currHP = 0,
		    tempHP = 0,
		    newHP = 0,
		    increaseHPWhenMaxHPIncreases = 0,
		    nonLethal = 0,
		    newHPMax = 0,
		    mythic = 0,
		    currWoundLevel = 0,
		    usesWounds = 0,
		    setter = {};
		try {
			increaseHPWhenMaxHPIncreases = parseInt(v.increase_hp, 10) || 0;
			abilityMod = parseInt(v["HP-ability-mod"], 10) || 0;
			abilityBonus = abilityMod * (parseInt(v["level"], 10) || 0);
			currHPMax = parseInt(v["HP_max"], 10) || 0;
			currHP = parseInt(v["HP"], 10) || 0;
			tempHP = parseInt(v["HP-temp"], 10) || 0;
			usesWounds = parseInt(v["wound_threshold-show"], 10) || 0;
			newHP = currHP;
			nonLethal = parseInt(v["non-lethal-damage"], 10) || 0;
			mythic = parseInt(v["mythic-adventures-show"], 10) || 0;
			//TAS.debug("at updateMaxHPLookup",v);
			newHPMax = abilityBonus + (parseInt(v["total-hp"], 10) || 0) + (parseInt(v["HP-formula-mod"], 10) || 0) + 5 * (parseInt(v["condition-Drained"], 10) || 0) + (mythic ? parseInt(v["total-mythic-hp"], 10) || 0 : 0);
			if (usesWounds) {
				currWoundLevel = parseInt(v["condition-Wounds"], 10) || 0;
			}
			if (forceReset) {
				newHP = newHPMax;
				if (nonLethal !== 0) {
					setter["non-lethal-damage"] = 0;
					setter["condition-Staggered"] = 0;
				}
				if (usesWounds) {
					setter["condition-Wounds"] = 0;
				}
			} else {
				newHP = currHP + newHPMax - currHPMax;
			}
			if (abilityBonus !== parseInt(v.hp_ability_bonus, 10)) {
				setter["hp_ability_bonus"] = abilityBonus;
			}
			if (increaseHPWhenMaxHPIncreases && newHP !== currHP) {
				setter.HP = newHP;
			} else if (!increaseHPWhenMaxHPIncreases) {
				newHP = currHP;
			}
			if (currHPMax !== newHPMax) {
				setter.HP_max = newHPMax;
			}
			if (newHPMax !== parseInt(v["non-lethal-damage_max"], 10)) {
				setter["non-lethal-damage_max"] = newHPMax;
			}
		} catch (err) {
			_exportsLoaderTASTheAaronSheet2.default.error("PFHealth.updateMaxHPLookup", err);
		} finally {
			if (_underscore2.default.size(setter) > 0) {
				setAttrs(setter, _PFConst2.default.silentParams, function () {
					if (increaseHPWhenMaxHPIncreases && !(forceReset || currHPMax === newHPMax)) {
						updateCurrHP(newHP, tempHP, nonLethal, 0, v["HP-ability"], abilityMod, v["condition-Staggered"]);
						if (usesWounds) {
							setWoundThreshholds(newHP + tempHP, newHPMax, currWoundLevel, abilityMod, v);
						}
					}
					done();
				});
			} else {
				done();
			}
		}
	});
}
/* updateTempMaxHP
 * sets temp hp
 */
function updateTempMaxHP(callback, silently, forceReset) {
	var done = _underscore2.default.once(function () {
		if (typeof callback === "function") {
			callback();
		}
	});
	getAttrs(["HP-temp", "HP-temp_max", "HP-temp-misc", "buff_HP-temp-total"], function (v) {
		var newHPTempMax,
		    currHPTemp,
		    newHPTemp,
		    params = {};
		try {
			//TAS.debug("at updateTempMaxHP",v);
			newHPTempMax = (parseInt(v["HP-temp-misc"], 10) || 0) + (parseInt(v["buff_HP-temp-total"], 10) || 0);
			currHPTemp = parseInt(v["HP-temp"], 10) || 0;
			newHPTemp = forceReset ? newHPTempMax : currHPTemp + newHPTempMax - currHPTemp;
			if (forceReset || newHPTemp !== currHPTemp) {
				if (silently) {
					params = _PFConst2.default.silentParams;
				}
				setAttrs({
					"HP-temp": newHPTemp,
					"HP-temp_max": newHPTempMax
				}, params, function () {
					updateCurrHPLookup(); //check for change due to non lethal
					done();
				});
			} else {
				done();
			}
		} catch (err) {
			_exportsLoaderTASTheAaronSheet2.default.error("updateTempMaxHP", err);
			done();
		}
	});
}
function setToPFS(callback, eventInfo) {
	var done = _underscore2.default.once(function () {
		if (typeof callback === "function") {
			callback();
		}
	});
	setAttrs({ 'use_prestige_fame': 1, 'auto_calc_hp': 1, 'autohp_percent': 1, 'maxhp_lvl1': 1 }, _PFConst2.default.silentParams, function () {
		if (eventInfo) {
			PFClassRaceGrid.setHitPoints(done, false, eventInfo);
		}
	});
}
function ensureNPCHPZero(callback) {
	getAttrs(['npc-hd', 'npc-hd-num', 'NPC-HP', 'is_npc'], function (v) {
		var npcHD = parseInt(v['npc-hd'], 10) || 0,
		    npcLevels = parseInt(v['npc-hd-num'], 10) || 0,
		    npcHP = parseInt(v['NPC-HP'], 10) || 0,
		    isNPC = parseInt(v.is_npc, 10) || 0;
		if (!isNPC) {
			if (!npcHD && !npcLevels && npcHP) {
				setAttrs({ 'npc-hd-num': '', 'NPC-HP': 0 });
			}
		} else {
			setAttrs({
				'npc-hd-num2': 0,
				'npc-hd2': 0,
				'HP-misc': '',
				'HP-misc-mod': 0
			});
		}
	});
}
function migrate(callback, oldversion) {
	var done = _underscore2.default.once(function () {
		_exportsLoaderTASTheAaronSheet2.default.debug("leaving PFHealth.migrate 2");
		if (typeof callback === "function") {
			callback();
		}
	});
	PFMigrate.migrateHPMisc(done);
	if (oldversion < 1.18) {
		ensureNPCHPZero();
	}
}
function recalculate(callback, silently, oldversion) {
	var done = _underscore2.default.once(function () {
		_exportsLoaderTASTheAaronSheet2.default.debug("leaving PFHealth.recalculate");
		if (typeof callback === "function") {
			callback();
		}
	}),
	    resetWounds = _underscore2.default.once(function () {
		setWoundThreshholdsLookup();
		done();
	}),
	    callUpdateMaxHPLookup = _underscore2.default.once(function () {
		updateMaxHPLookup(resetWounds, silently);
	}),
	    callUpdateTempHP = _underscore2.default.once(function () {
		updateTempMaxHP(callUpdateMaxHPLookup);
	});
	_exportsLoaderTASTheAaronSheet2.default.debug("at PFHealth.recalculate");
	migrate(callUpdateTempHP, oldversion);
}
function registerEventHandlers() {
	on("change:set_pfs", _exportsLoaderTASTheAaronSheet2.default.callback(function eventsetPFSFlag(eventInfo) {
		_exportsLoaderTASTheAaronSheet2.default.debug("caught " + eventInfo.sourceAttribute + " event: " + eventInfo.sourceType);
		if (eventInfo.sourceType === "player" || eventInfo.sourceType === "api") {
			getAttrs(["set_pfs"], function (v) {
				if (parseInt(v.set_pfs, 10)) {
					setToPFS(null, eventInfo);
				}
			});
		}
	}));
	//hp************************************************************************
	on("change:hp-ability-mod change:level change:total-hp change:total-mythic-hp change:hp-formula-mod change:HP-misc", _exportsLoaderTASTheAaronSheet2.default.callback(function eventUpdateHPPlayerMisc(eventInfo) {
		_exportsLoaderTASTheAaronSheet2.default.debug("caught " + eventInfo.sourceAttribute + " event: " + eventInfo.sourceType);
		if (eventInfo.sourceType === "player" || eventInfo.sourceType === "api" || eventInfo.sourceType === "sheetworker" && eventInfo.sourceAttribute !== "hp-misc") {
			updateMaxHPLookup();
		}
	}));
	on("change:mythic-adventures-show", _exportsLoaderTASTheAaronSheet2.default.callback(function eventUpdateHPPlayer(eventInfo) {
		_exportsLoaderTASTheAaronSheet2.default.debug("caught " + eventInfo.sourceAttribute + " event: " + eventInfo.sourceType);
		if (eventInfo.sourceType === "player" || eventInfo.sourceType === "api") {
			getAttrs(["total-mythic-hp"], function (v) {
				if ((parseInt(v["total-mythic-hp"], 10) || 0) > 0) {
					updateMaxHPLookup();
				}
			});
		}
	}));
	on("change:hp-temp-misc", _exportsLoaderTASTheAaronSheet2.default.callback(function eventUpdateTempHP(eventInfo) {
		_exportsLoaderTASTheAaronSheet2.default.debug("caught " + eventInfo.sourceAttribute + " event: " + eventInfo.sourceType);
		if (eventInfo.sourceType === "player" || eventInfo.sourceType === "api") {
			updateTempMaxHP();
		}
	}));
	on("change:HP_reset", _exportsLoaderTASTheAaronSheet2.default.callback(function eventResetHP(eventInfo) {
		_exportsLoaderTASTheAaronSheet2.default.debug("caught " + eventInfo.sourceAttribute + " event: " + eventInfo.sourceType);
		if (eventInfo.sourceType === "player" || eventInfo.sourceType === "api") {
			updateMaxHPLookup(null, null, true);
			updateTempMaxHP(null, null, true);
			setAttrs({
				"HP_reset": "0"
			}, _PFConst2.default.silentParams);
		}
	}));
	on("change:HP change:non-lethal-damage", _exportsLoaderTASTheAaronSheet2.default.callback(function eventUpdateHPCurr(eventInfo) {
		if (eventInfo.sourceType === "player" || eventInfo.sourceType === "api") {
			_exportsLoaderTASTheAaronSheet2.default.debug("caught " + eventInfo.sourceAttribute + " event: " + eventInfo.sourceType);
			updateCurrHPLookup(eventInfo);
		}
	}));
	on("change:wound_threshold-show", _exportsLoaderTASTheAaronSheet2.default.callback(function eventResetConditionWounds(eventInfo) {
		_exportsLoaderTASTheAaronSheet2.default.debug("caught " + eventInfo.sourceAttribute + " event: " + eventInfo.sourceType);
		if (eventInfo.sourceType === "player" || eventInfo.sourceType === "api") {
			setWoundThreshholdsLookup(eventInfo);
		}
	}));
}
registerEventHandlers();
_PFLog.PFConsole.log('   PFHealth module loaded         ');
_PFLog.PFLog.modulecount++;

/***/ }),
/* 18 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
	value: true
});
exports.saveTypes = undefined;
exports.applyConditions = applyConditions;
exports.updateSave = updateSave;
exports.recalculate = recalculate;

var _underscore = __webpack_require__(2);

var _underscore2 = _interopRequireDefault(_underscore);

var _PFLog = __webpack_require__(0);

var _exportsLoaderTASTheAaronSheet = __webpack_require__(1);

var _exportsLoaderTASTheAaronSheet2 = _interopRequireDefault(_exportsLoaderTASTheAaronSheet);

var _SWUtils = __webpack_require__(4);

var SWUtils = _interopRequireWildcard(_SWUtils);

var _PFConst = __webpack_require__(3);

var _PFConst2 = _interopRequireDefault(_PFConst);

var _PFUtils = __webpack_require__(5);

var PFUtils = _interopRequireWildcard(_PFUtils);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var saveTypes = exports.saveTypes = ["Fort", "Ref", "Will"];
var events = {
	saveEventsAuto: "change:saves-cond change:total-REPLACE change:REPLACE-ability-mod",
	saveEventsPlayer: "change:REPLACE-trait change:REPLACE-enhance change:REPLACE-resist change:REPLACE-misc"
};

function applyConditions(callback, silently) {
	var done = _underscore2.default.once(function () {
		if (typeof callback === "function") {
			callback();
		}
	});
	getAttrs(["condition-Fear", "condition-Sickened", "condition-Drained", "condition-Wounds", "saves-cond", "has_endurance_feat", "wounds_gritty_mode", "wound_threshold-show"], function (v) {
		var fear = 0,
		    sickened = 0,
		    drained = 0,
		    wounds = 0,
		    currCond = 0,
		    newCond = 0,
		    params = {},
		    setter = {};
		try {
			fear = parseInt(v["condition-Fear"], 10) || 0;
			sickened = parseInt(v["condition-Sickened"], 10) || 0;
			drained = parseInt(v["condition-Drained"], 10) || 0;
			wounds = (parseInt(v["wound_threshold-show"], 10) || 0) * PFUtils.getWoundPenalty(parseInt(v["condition-Wounds"], 10) || 0, parseInt(v.has_endurance_feat, 10) || 0, parseInt(v.wounds_gritty_mode, 10) || 0);
			currCond = parseInt(v["saves-cond"], 10) || 0;
			newCond = drained - fear - sickened + wounds;
			if (currCond !== newCond) {
				setter["saves-cond"] = newCond;
			}
		} catch (err) {
			_exportsLoaderTASTheAaronSheet2.default.error("PFSaves.applyConditions", err);
		} finally {
			if (_underscore2.default.size(setter) > 0) {
				if (silently) {
					params = _PFConst2.default.silentParams;
				}
				setAttrs(setter, params, done);
			} else {
				done();
			}
		}
	});
}
/* updateSave - updates the saves for a character
* @save = type of save: Fort, Ref, Will  (first character capitalized)
*/
function updateSave(save, callback, silently) {
	var fields = [save, "total-" + save, save + "-ability-mod", save + "-trait", save + "-enhance", save + "-resist", save + "-misc", "saves-cond", "buff_" + save + "-total"];
	SWUtils.updateRowTotal(fields, 0, [], false, callback, silently);
}
function recalculate(callback, silently, oldversion) {
	var done = _underscore2.default.once(function () {
		_exportsLoaderTASTheAaronSheet2.default.info("leaving PFSaves.recalculate");
		if (typeof callback === "function") {
			callback();
		}
	}),
	    saved = _underscore2.default.after(3, function () {
		//TAS.debug"finished 3 saves");
		done();
	});
	_exportsLoaderTASTheAaronSheet2.default.debug("at PFSaves.recalculate");
	try {
		applyConditions(function () {
			try {
				updateSave("Fort", saved, silently);
				updateSave("Ref", saved, silently);
				updateSave("Will", saved, silently);
			} catch (err2) {
				_exportsLoaderTASTheAaronSheet2.default.error("PFSaves.recalculate inner saves", err2);
				done();
			}
		}, silently);
	} catch (err) {
		_exportsLoaderTASTheAaronSheet2.default.error("PFSaves.recalculate OUTER", err);
		done();
	}
}
function registerEventHandlers() {
	_underscore2.default.each(saveTypes, function (save) {
		var eventToWatch = events.saveEventsAuto.replace(/REPLACE/g, save);
		on(eventToWatch, _exportsLoaderTASTheAaronSheet2.default.callback(function eventUpdateSaveAuto(eventInfo) {
			if (eventInfo.sourceType === "sheetworker") {
				_exportsLoaderTASTheAaronSheet2.default.debug("caught " + eventInfo.sourceAttribute + " event for " + save + ": " + eventInfo.sourceType);
				updateSave(save, eventInfo);
			}
		}));
	});
	_underscore2.default.each(saveTypes, function (save) {
		var eventToWatch = events.saveEventsPlayer.replace(/REPLACE/g, save);
		on(eventToWatch, _exportsLoaderTASTheAaronSheet2.default.callback(function eventUpdateSavePlayer(eventInfo) {
			if (eventInfo.sourceType === "player" || eventInfo.sourceType === "api") {
				_exportsLoaderTASTheAaronSheet2.default.debug("caught " + eventInfo.sourceAttribute + " event for " + save + ": " + eventInfo.sourceType);
				updateSave(save, eventInfo);
			}
		}));
	});
}
registerEventHandlers();
_PFLog.PFConsole.log('   PFSaves module loaded          ');
_PFLog.PFLog.modulecount++;

/***/ }),
/* 19 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
	value: true
});
exports.sizeModToEasySizeMap = undefined;
exports.getSizeFromText = getSizeFromText;
exports.getSizeLevelChange = getSizeLevelChange;
exports.updateDamageDice = updateDamageDice;
exports.updateSize = updateSize;
exports.migrate = migrate;
exports.recalculate = recalculate;

var _underscore = __webpack_require__(2);

var _underscore2 = _interopRequireDefault(_underscore);

var _PFLog = __webpack_require__(0);

var _exportsLoaderTASTheAaronSheet = __webpack_require__(1);

var _exportsLoaderTASTheAaronSheet2 = _interopRequireDefault(_exportsLoaderTASTheAaronSheet);

var _SWUtils = __webpack_require__(4);

var SWUtils = _interopRequireWildcard(_SWUtils);

var _PFConst = __webpack_require__(3);

var _PFConst2 = _interopRequireDefault(_PFConst);

var _PFUtils = __webpack_require__(5);

var PFUtils = _interopRequireWildcard(_PFUtils);

var _PFMigrate = __webpack_require__(6);

var PFMigrate = _interopRequireWildcard(_PFMigrate);

var _PFEncumbrance = __webpack_require__(27);

var PFEncumbrance = _interopRequireWildcard(_PFEncumbrance);

var _PFAttacks = __webpack_require__(23);

var PFAttacks = _interopRequireWildcard(_PFAttacks);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var sizeModToEasySizeMap = exports.sizeModToEasySizeMap = {
	'-8': 8,
	'-4': 7,
	'-2': 6,
	'-1': 5,
	'0': 4,
	'1': 3,
	'2': 2,
	'4': 1,
	'8': 0
};
/** getSizeFromText - returns size mod based on size display name
 * @param {string} sizeDisplay size in english (medium, large, gargantuan, tiny, etc)
 * @returns {jsobj} map of {"size":size mod for AC,"skillSize": size mod for fly}
 */
function getSizeFromText(sizeDisplay) {
	var sizeMap = {
		"size": 0,
		"skillSize": 0
	};
	try {
		if (sizeDisplay) {
			sizeDisplay = sizeDisplay.toLowerCase();
			switch (sizeDisplay) {
				case "medium":
					break;
				case "colossal":
					sizeMap.size = -8;
					sizeMap.skillSize = -8;
					break;
				case "gargantuan":
					sizeMap.size = -4;
					sizeMap.skillSize = -6;
					break;
				case "huge":
					sizeMap.size = -2;
					sizeMap.skillSize = -4;
					break;
				case "large":
					sizeMap.size = -1;
					sizeMap.skillSize = -2;
					break;
				case "small":
					sizeMap.size = 1;
					sizeMap.skillSize = 2;
					break;
				case "tiny":
					sizeMap.size = 2;
					sizeMap.skillSize = 4;
					break;
				case "diminutive":
					sizeMap.size = 4;
					sizeMap.skillSize = 6;
					break;
				case "fine":
					sizeMap.size = 8;
					sizeMap.skillSize = 8;
					break;
				default:
					break;
			}
		}
	} catch (err) {
		_exportsLoaderTASTheAaronSheet2.default.error("get size from text:" + sizeDisplay, err);
		sizeMap.size = 0;
		sizeMap.skillSize = 0;
	} finally {
		return sizeMap;
	}
}
/**returns number of levels size went up or down
 * ex: Med to Lg is +1, Med to Sm is -1, Md to Tiny is -2, etc
 * @param {int} currSize new size mod , usually value of @{size}
 * @param {int} defaultSize default size mod, for sheet it is value of @{default_char_size}
 * 		  for weapon it is @{repeating_weapon_$X_default_size}
 * @returns {int} difference in sizes (not difference in size mods)
 */
function getSizeLevelChange(currSize, defaultSize) {
	var newSize, oldSize, levelChange;
	newSize = sizeModToEasySizeMap[String(currSize)];
	oldSize = sizeModToEasySizeMap[String(defaultSize)];
	levelChange = oldSize - newSize;
	return levelChange;
}
/**updateDamageDice returns new dice for weapon/attack damage change due to size
 *@param {int} sizediff difference in LEVELS of size (Medium to Large is 1, Medium to Small is -1)
 *@param {int} defaultSize size modifier, necessary since different rules for small
 *@param {int} currDice num dice from 1 to n
 *@param {int} currDie num sides of die : valid only from 1 to 12
 *@returns {jsobj} {dice:n,die:n}
 */
function updateDamageDice(sizediff, defaultSize, currDice, currDie) {
	var diceSizes = { 1: ["1d1"], 2: ["1d2"], 3: ["1d3"],
		4: ["1d4"],
		5: ["1d6"],
		6: ["1d8", "2d4"],
		7: ["1d10"],
		8: ["2d6", "3d4", "1d12"],
		9: ["2d8", "4d4"], 10: ["3d6", "5d4"], 11: ["3d8", "6d4", "2d10"],
		12: ["4d6", "7d4", "2d12"], 13: ["4d8", "8d4", "9d4", "5d6", "3d10"],
		14: ["6d6", "5d8", "10d4", "11d4", "9d4", "3d12"],
		15: ["6d8", "7d6", "12d4", "13d4", "4d10"],
		16: ["8d6", "7d8", "14d4", "15d4", "4d12"],
		17: ["8d8", "16d4", "9d6", "10d6", "11d6", "5d10", "17d4", "18d4", "19d4", "5d12"],
		18: ["12d6", "20d4", "9d8", "7d10", "6d12", "21d4", "22d4", "23d4"],
		19: ["12d8", "24d4", "13d6", "14d6", "15d6", "8d10"],
		20: ["16d6", "13d8", "10d10", "8d12"]
	},
	    currSize = 0,
	    dicestring = "",
	    newDice = 0,
	    newDie = 0,
	    matches,
	    rowdiff = 0,
	    currow = 0,
	    newrow = 0,
	    newrowstring = "",
	    reversedDiceSizes = _underscore2.default.reduce(diceSizes, function (memo, pairs, idx) {
		_underscore2.default.each(pairs, function (pair) {
			memo[pair] = idx;
		});
		return memo;
	}, {});
	try {
		currDice = parseInt(currDice, 10);
		currDie = parseInt(currDie, 10);
		if (!(isNaN(currDice) || isNaN(currDie))) {
			dicestring = currDice + "d" + currDie;
			currSize = sizeModToEasySizeMap[String(defaultSize)];
			if (currDice <= 0 || currDie > 12) {
				return null;
			}
			if (currDie === 4 && currDice > 24) {
				currDice = 24;
			} else if (currDie === 6 && currDice > 16) {
				currDice = 16;
			} else if (currDie === 8 && currDice > 13) {
				currDice = 13;
			} else if (currDie === 10 && currDice > 10) {
				currDice = 10;
			} else if (currDie === 12 && currDice > 8) {
				currDice = 8;
			}
			currow = parseInt(reversedDiceSizes[dicestring], 10) || 0;
			if (!currow) {
				return null;
			}
			while (sizediff !== 0) {
				if (sizediff > 0) {
					if (currDie <= 6 && currDice === 1 || currSize <= 3) {
						rowdiff = 1;
					} else {
						rowdiff = 2;
					}
				} else if (sizediff < 0) {
					if (currDie <= 8 && currDice === 1 || currSize <= 4) {
						rowdiff = -1;
					} else {
						rowdiff = -2;
					}
				}
				newrow = currow + rowdiff;
				newrow = Math.min(Math.max(newrow, 1), 20);
				dicestring = diceSizes[newrow][0];
				matches = dicestring.match(/(\d+)d(\d+)/);
				currDice = parseInt(matches[1], 10);
				currDie = parseInt(matches[2], 10);
				currow = newrow;
				if (sizediff > 0) {
					sizediff--;
					if (currow === 20) {
						break;
					}
				} else {
					sizediff++;
					if (currow === 1) {
						break;
					}
				}
				_exportsLoaderTASTheAaronSheet2.default.debug("updateDamageDice: currow is now" + currow + ", diff still:" + sizediff);
			}
		}
	} catch (err) {
		_exportsLoaderTASTheAaronSheet2.default.error("updateDamageDice: ", err);
	} finally {
		return { "dice": currDice, "die": currDie };
	}
}
function updateSize(eventInfo, callback, silently) {
	var done = _underscore2.default.once(function () {
		if (typeof callback === "function") {
			callback();
		}
	});
	getAttrs(["size", "old_size", "default_char_size", "CMD-size", "size_display"], function (v) {
		var size = 0,
		    oldSize = 0,
		    defaultSize = 0,
		    currSize = 0,
		    cmbsize = 0,
		    levelChange = 0,
		    skillSize = 0,
		    doubleSkill = 0,
		    sizeDisplay = "Medium",
		    forceCurr = 0,
		    params = {},
		    setter = {};
		try {
			//TAS.debug("At PFSize.updateSize",v);
			size = parseInt(v.size, 10) || 0;
			if (v.old_size === 'x') {
				forceCurr = true;
				currSize = (parseInt(v["CMD-size"], 10) || 0) * -1;
				defaultSize = currSize;
			} else {
				currSize = parseInt(v.old_size, 10) || 0;
				defaultSize = parseInt(v.default_char_size, 10) || 0;
			}

			switch (size) {
				case 0:
					break;
				case -8:
					skillSize = -8;
					sizeDisplay = "Colossal";
					break;
				case -4:
					skillSize = -6;
					sizeDisplay = "Gargantuan";
					break;
				case -2:
					skillSize = -4;
					sizeDisplay = "Huge";
					break;
				case -1:
					skillSize = -2;
					sizeDisplay = "Large";
					break;
				case 1:
					skillSize = 2;
					sizeDisplay = "Small";
					break;
				case 2:
					skillSize = 4;
					sizeDisplay = "Tiny";
					break;
				case 4:
					skillSize = 6;
					sizeDisplay = "Diminutive";
					break;
				case 8:
					skillSize = 8;
					sizeDisplay = "Fine";
					break;
			}
			doubleSkill = 2 * skillSize;
			cmbsize = size * -1;
			//here is where we tell attacks damage dice to change.
			levelChange = getSizeLevelChange(currSize, defaultSize);
			if (size !== currSize) {
				setter.size_skill = skillSize;
				setter.old_size = size;
				setter["CMD-size"] = cmbsize;
				setter.size_skill_double = doubleSkill;
				setter.size_display = sizeDisplay;
			} else if (forceCurr) {
				setter.old_size = size;
				setter.default_char_size = size;
			} else if (v["size_display"] !== sizeDisplay) {
				setter.size_display = sizeDisplay;
			}
		} catch (err) {
			_exportsLoaderTASTheAaronSheet2.default.error("PFSize.updateSize", err);
		} finally {
			if (_underscore2.default.size(setter) > 0) {
				if (silently) {
					params = _PFConst2.default.silentParams;
				}
				setAttrs(setter, params, done);
			} else {
				done();
			}
		}
	});
}
function migrate(callback) {
	PFMigrate.migrateSize(callback);
}
function recalculate(callback, silently, oldversion) {
	var done = _underscore2.default.once(function () {
		_exportsLoaderTASTheAaronSheet2.default.debug("Leaving PFSize.recalculate");
		if (typeof callback === "function") {
			callback();
		}
	});
	_exportsLoaderTASTheAaronSheet2.default.debug("At PFSize.recalculate");
	updateSize(null, done, silently);
}
function registerEventHandlers() {
	//size
	on("change:size", _exportsLoaderTASTheAaronSheet2.default.callback(function eventUpdateSize(eventInfo) {
		_exportsLoaderTASTheAaronSheet2.default.debug("caught " + eventInfo.sourceAttribute + " event: " + eventInfo.sourceType);
		updateSize();
		PFEncumbrance.updateLoadsAndLift();
		PFAttacks.adjustAllDamageDiceAsync(null, eventInfo);
	}));
}
registerEventHandlers();
_PFLog.PFConsole.log('   PFSize module loaded           ');
_PFLog.PFLog.modulecount++;

/***/ }),
/* 20 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
	value: true
});
exports.events = exports.valsNeedingReplacing = exports.keysNeedingReplacing = exports.defaultSkillAttrName = exports.defaultSkillDeletedMacroAttrs = exports.defaultMiscSkillMacroMap = exports.defaultMiscSkillMacro = exports.defaultFillInSkillMacroMap = exports.defaultFillInSkillMacro = exports.defaultSkillMacroMap = exports.defaultSkillMacro = exports.coreSkillAbilityDefaults = exports.allTheSkills = exports.allFillInSkillInstances = exports.miscFillInSkillsInstances = exports.nonMiscFillInSkillsInstances = exports.allNonFillInSkills = exports.consolidatedSkills = exports.allCoreSkills = exports.backgroundSkills = exports.knowledgeSkills = exports.skillsWithSpaces = exports.knowledgeSubSkillsTranslateKeys = exports.sizeSkills = exports.npcSkillHeaderMacro = exports.skillHeaderMacro = exports.baseGenMacro = exports.checkRTArray = exports.adventureSkills = exports.backgroundCoreSkills = exports.subskillArrays = exports.knowledgeSkillAppends = exports.skillsWithSubSkills = exports.coreSkillsWithSubSkills = exports.knowledgeSubSkills = exports.backgroundOnlySkills = exports.skillsWithFillInNames = exports.backgroundOnlySkillsWithFillinNames = exports.coreSkillsWithFillInNames = exports.miscSkillAppendNums = exports.skillAppendNums = exports.regularAdventurePlusKnow = exports.regularBackgroundSkillsPlusKnow = exports.regularAdventureSkills = exports.regularBackgroundSkills = exports.regularCoreSkills = undefined;
exports.verifyHasSkill = verifyHasSkill;
exports.updateSkill = updateSkill;
exports.resetCommandMacro = resetCommandMacro;
exports.applyConditions = applyConditions;
exports.migrate = migrate;
exports.recalculate = recalculate;

var _underscore = __webpack_require__(2);

var _underscore2 = _interopRequireDefault(_underscore);

var _exportsLoaderTASTheAaronSheet = __webpack_require__(1);

var _exportsLoaderTASTheAaronSheet2 = _interopRequireDefault(_exportsLoaderTASTheAaronSheet);

var _PFLog = __webpack_require__(0);

var _PFConst = __webpack_require__(3);

var _PFConst2 = _interopRequireDefault(_PFConst);

var _SWUtils = __webpack_require__(4);

var SWUtils = _interopRequireWildcard(_SWUtils);

var _PFUtils = __webpack_require__(5);

var PFUtils = _interopRequireWildcard(_PFUtils);

var _PFMacros = __webpack_require__(9);

var PFMacros = _interopRequireWildcard(_PFMacros);

var _PFMigrate = __webpack_require__(6);

var PFMigrate = _interopRequireWildcard(_PFMigrate);

var _PFUtilsAsync = __webpack_require__(8);

var PFUtilsAsync = _interopRequireWildcard(_PFUtilsAsync);

var _PFAbilityScores = __webpack_require__(10);

var PFAbilityScores = _interopRequireWildcard(_PFAbilityScores);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var regularCoreSkills = exports.regularCoreSkills = ["Appraise", "Acrobatics", "Bluff", "Climb", "Diplomacy", "Disable-Device", "Disguise", "Escape-Artist", "Fly", "Handle-Animal", "Heal", "Intimidate", "Linguistics", "Perception", "Ride", "Sense-Motive", "Sleight-of-Hand", "Spellcraft", "Stealth", "Survival", "Swim", "Use-Magic-Device"],
    regularBackgroundSkills = exports.regularBackgroundSkills = ["Appraise", "Handle-Animal", "Linguistics", "Sleight-of-Hand"],
    regularAdventureSkills = exports.regularAdventureSkills = ["Acrobatics", "Bluff", "Climb", "Diplomacy", "Disable-Device", "Disguise", "Escape-Artist", "Fly", "Heal", "Intimidate", "Perception", "Ride", "Sense-Motive", "Spellcraft", "Stealth", "Survival", "Swim", "Use-Magic-Device"],
    regularBackgroundSkillsPlusKnow = exports.regularBackgroundSkillsPlusKnow = regularBackgroundSkills.concat(["Knowledge-Engineering", "Knowledge-Geography", "Knowledge-History", "Knowledge-Nobility"]).sort(),
    regularAdventurePlusKnow = exports.regularAdventurePlusKnow = regularAdventureSkills.concat(["Knowledge-Arcana", "Knowledge-Dungeoneering", "Knowledge-Local", "Knowledge-Nature", "Knowledge-Planes", "Knowledge-Religion"]).sort(),

//number that is appended to 10 versions of skills with subskills.
skillAppendNums = exports.skillAppendNums = ["", "2", "3", "4", "5", "6", "7", "8", "9", "10"],

//same but for misc-skill
miscSkillAppendNums = exports.miscSkillAppendNums = ["-0", "-1", "-2", "-3", "-4", "-5", "-6", "-7", "-8", "-9"],
    coreSkillsWithFillInNames = exports.coreSkillsWithFillInNames = ["Craft", "Misc-Skill", "Perform", "Profession"],
    backgroundOnlySkillsWithFillinNames = exports.backgroundOnlySkillsWithFillinNames = ["Artistry", "Lore"],
    skillsWithFillInNames = exports.skillsWithFillInNames = coreSkillsWithFillInNames.concat(backgroundOnlySkillsWithFillinNames).sort(),
    backgroundOnlySkills = exports.backgroundOnlySkills = SWUtils.cartesianAppend(backgroundOnlySkillsWithFillinNames, skillAppendNums),
    knowledgeSubSkills = exports.knowledgeSubSkills = ["Arcana", "Dungeoneering", "Engineering", "Geography", "History", "Local", "Nature", "Nobility", "Planes", "Religion"],
    coreSkillsWithSubSkills = exports.coreSkillsWithSubSkills = coreSkillsWithFillInNames.concat(["Knowledge"]).sort(),
    skillsWithSubSkills = exports.skillsWithSubSkills = skillsWithFillInNames.concat(["Knowledge"]).sort(),
    knowledgeSkillAppends = exports.knowledgeSkillAppends = _underscore2.default.map(knowledgeSubSkills, function (subskill) {
	return "-" + subskill;
}),

//for each skill array of the possible skills {"Craft":["Craft","Craft2"...],"Perform":["Perform","Perform2"...] }
subskillArrays = exports.subskillArrays = _underscore2.default.reduce(skillsWithSubSkills, function (memo, skill) {
	var appenders = skill === "Misc-Skill" ? miscSkillAppendNums : skill === "Knowledge" ? knowledgeSkillAppends : skillAppendNums;
	memo[skill] = SWUtils.cartesianAppend([skill], skillAppendNums);
	return memo;
}, {}),
    backgroundCoreSkills = exports.backgroundCoreSkills = regularBackgroundSkillsPlusKnow.concat(subskillArrays["Craft"]).concat(subskillArrays["Perform"]).concat(subskillArrays["Profession"]).concat(["Misc-Skill-5", "Misc-Skill-6", "Misc-Skill-7", "Misc-Skill-8", "Misc-Skill-9"]).sort(),
    adventureSkills = exports.adventureSkills = regularAdventurePlusKnow.concat(["Misc-Skill-0", "Misc-Skill-1", "Misc-Skill-2", "Misc-Skill-3", "Misc-Skill-4"]).sort(),
    checkRTArray = exports.checkRTArray = ["-ReqTrain", "-ranks"],
    baseGenMacro = exports.baseGenMacro = "&{template:pf_generic} @{toggle_accessible_flag} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_generic-skill}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle}} ",
    skillHeaderMacro = exports.skillHeaderMacro = "{{name=^{REPLACELOWER} ^{skills} }} ",
    npcSkillHeaderMacro = exports.npcSkillHeaderMacro = "{{name=^{npc} ^{REPLACELOWER} ^{skills} }} ",

//  1 is the normal size modifier in size_skill, 2 is size_skill_double
sizeSkills = exports.sizeSkills = {
	"Fly": 1,
	"Stealth": 2,
	"CS-Stealth": 2
},

//these are for building the macros
knowledgeSubSkillsTranslateKeys = exports.knowledgeSubSkillsTranslateKeys = _underscore2.default.map(knowledgeSubSkills, function (key) {
	return key.toLowerCase();
}),
    skillsWithSpaces = exports.skillsWithSpaces = ["disable device", "escape artist", "sense motive", "handle animal", "use magic device", "sleight of hand"],
    knowledgeSkills = exports.knowledgeSkills = _underscore2.default.map(knowledgeSubSkills, function (subskill) {
	return "Knowledge-" + subskill;
}),
    backgroundSkills = exports.backgroundSkills = backgroundCoreSkills.concat(backgroundOnlySkills).sort(),
    allCoreSkills = exports.allCoreSkills = adventureSkills.concat(backgroundCoreSkills).sort(),
    consolidatedSkills = exports.consolidatedSkills = ["CS-Acrobatics", "CS-Athletics", "CS-Finesse", "CS-Influence", "CS-Nature", "CS-Perception", "CS-Performance", "CS-Religion", "CS-Society", "CS-Spellcraft", "CS-Stealth", "CS-Survival"],
    allNonFillInSkills = exports.allNonFillInSkills = regularCoreSkills.concat(knowledgeSkills).concat(consolidatedSkills).sort(),
    nonMiscFillInSkillsInstances = exports.nonMiscFillInSkillsInstances = SWUtils.cartesianAppend(["Craft", "Perform", "Profession", "Artistry", "Lore"], skillAppendNums),
    miscFillInSkillsInstances = exports.miscFillInSkillsInstances = SWUtils.cartesianAppend(["Misc-Skill"], miscSkillAppendNums),
    allFillInSkillInstances = exports.allFillInSkillInstances = nonMiscFillInSkillsInstances.concat(miscFillInSkillsInstances).sort(),
    allTheSkills = exports.allTheSkills = allNonFillInSkills.concat(allFillInSkillInstances).sort(),
    coreSkillAbilityDefaults = exports.coreSkillAbilityDefaults = {
	"Acrobatics": "dex",
	"Appraise": "int",
	"Bluff": "cha",
	"Climb": "str",
	"Craft": "int",
	"Diplomacy": "cha",
	"Disable-Device": "dex",
	"Disguise": "cha",
	"Escape-Artist": "dex",
	"Fly": "dex",
	"Handle-Animal": "cha",
	"Heal": "wis",
	"Intimidate": "cha",
	"Knowledge-Arcana": "int",
	"Knowledge-Dungeoneering": "int",
	"Knowledge-Engineering": "int",
	"Knowledge-Geography": "int",
	"Knowledge-History": "int",
	"Knowledge-Local": "int",
	"Knowledge-Nature": "int",
	"Knowledge-Nobility": "int",
	"Knowledge": "int",
	"Knowledge-Planes": "int",
	"Knowledge-Religion": "int",
	"Linguistics": "int",
	"Perception": "wis",
	"Perform": "cha",
	"Profession": "wis",
	"Ride": "dex",
	"Sense-Motive": "wis",
	"Sleight-of-Hand": "dex",
	"Spellcraft": "int",
	"Stealth": "dex",
	"Survival": "wis",
	"Swim": "str",
	"Use-Magic-Device": "cha"
},
    defaultSkillMacro = exports.defaultSkillMacro = '&{template:pf_generic} @{toggle_accessible_flag} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_generic-skill}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle}} {{name=^{REPLACELOWER}}} {{check=[[ @{skill-query} + [[ @{REPLACE} ]] ]]}} @{REPLACE-ut} @{skill_options} @{REPLACE-cond-notes} {{generic_note=@{REPLACE-note}}}',
    defaultSkillMacroMap = exports.defaultSkillMacroMap = {
	'&{template:': { 'current': 'pf_generic}' },
	'@{toggle_accessible_flag}': { 'current': '@{toggle_accessible_flag}' },
	'@{toggle_rounded_flag}': { 'current': '@{toggle_rounded_flag}' },
	'{{color=': { 'current': '@{rolltemplate_color}}}' },
	'{{header_image=': { 'current': '@{header_image-pf_generic-skill}}}', 'old': ['@{header_image-pf_generic}}}'] },
	'{{character_name=': { 'current': '@{character_name}}}' },
	'{{character_id=': { 'current': '@{character_id}}}' },
	'{{subtitle}}': { 'current': '{{subtitle}}' },
	'{{name=': { 'current': '^{REPLACELOWER}}}', 'old': ['REPLACE}}', '@{REPLACE-name}}}', '^{REPLACE}}}'] },
	'{{Check=': { 'current': '[[ @{skill-query} + [[ @{REPLACE} ]] ]]}}', 'old': ['[[ 1d20 + [[ @{REPLACE} ]] ]]}}'], 'replacements': [{ 'from': '1d20', 'to': '@{skill-query}' }] },
	'@{REPLACE-ut}': { 'current': '@{REPLACE-ut}' },
	'@{skill_options}': { 'current': '@{skill_options}' },
	'@{REPLACE-cond-notes}': { 'current': '@{REPLACE-cond-notes}' },
	'{{generic_note=': { 'current': '@{REPLACE-note}}}' }
},
    defaultFillInSkillMacro = exports.defaultFillInSkillMacro = '&{template:pf_generic} @{toggle_accessible_flag} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_generic-skill}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle}} {{name=^{REPLACELOWERREMOVENUMBER} @{REPLACE-name}}} {{check=[[ @{skill-query} + [[ @{REPLACE} ]] ]]}} @{REPLACE-ut} @{skill_options} @{REPLACE-cond-notes} {{generic_note=@{REPLACE-note}}}',
    defaultFillInSkillMacroMap = exports.defaultFillInSkillMacroMap = _underscore2.default.extend(_underscore2.default.clone(defaultSkillMacroMap), {
	'{{name=': { 'current': '^{REPLACELOWERREMOVENUMBER} (@{REPLACE-name})}}', 'old': ['REPLACEREMOVENUMBER (@{REPLACE-name})}}', 'REPLACE}}', '@{REPLACE-name}}}'], 'replacements': [{ 'from': 'REPLACEREMOVENUMBER', 'to': '^{REPLACELOWERREMOVENUMBER}' }] }
}),
    defaultMiscSkillMacro = exports.defaultMiscSkillMacro = '&{template:pf_generic} @{toggle_accessible_flag} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_generic-skill}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle}} {{name=@{REPLACE}}} {{check=[[ @{skill-query} + [[ @{REPLACE} ]] ]]}} @{REPLACE-ut} @{skill_options} @{REPLACE-cond-notes} {{generic_note=@{REPLACE-note}}}',
    defaultMiscSkillMacroMap = exports.defaultMiscSkillMacroMap = _underscore2.default.extend(_underscore2.default.clone(defaultSkillMacroMap), {
	'{{name=': { 'current': '@{REPLACE}}}', 'old': ['Misc-Skill (@{REPLACE-name})}}'] }
}),
    defaultSkillDeletedMacroAttrs = exports.defaultSkillDeletedMacroAttrs = ['{{check=[[ @{skill-query} + [[ @{REPLACE} ]] ]]}}'],
    defaultSkillAttrName = exports.defaultSkillAttrName = 'REPLACE-macro',
    keysNeedingReplacing = exports.keysNeedingReplacing = ['@{REPLACE-cond-notes}', '@{REPLACE-ut}'],
    valsNeedingReplacing = exports.valsNeedingReplacing = ['@{REPLACE-cond-notes}', '@{REPLACE-ut}', '{{check=', '{{generic_note=', '{{name='],
    events = exports.events = {
	skillGlobalEventAuto: "change:checks-cond change:phys-skills-cond change:acp",
	skillEventsAuto: "change:REPLACE-ability-mod change:REPLACE-misc-mod",
	skillEventsPlayer: "change:REPLACE-cs change:REPLACE-ranks change:REPLACE-racial change:REPLACE-trait change:REPLACE-feat change:REPLACE-item change:REPLACE-ReqTrain"
};

function migrateMacros(callback) {
	var done = _underscore2.default.once(function () {
		_exportsLoaderTASTheAaronSheet2.default.debug("leaving PFSkills.migrateMacros");
		if (typeof callback === "function") {
			callback();
		}
	}),
	    doneOne = _underscore2.default.after(3, function () {
		setAttrs({ 'migrated_skill_macrosv1': 1 }, _PFConst2.default.silentParams, done);
	});
	try {
		_exportsLoaderTASTheAaronSheet2.default.debug("at PFSkills.migrateMacros");
		getAttrs(['migrated_skill_macrosv1'], function (v) {
			if (!parseInt(v.migrated_skill_macrosv1, 10)) {
				//TAS.debug"migrateMacros, calling migrateStaticMacrosMult on regular skills ");
				PFMacros.migrateStaticMacrosMult(doneOne, defaultSkillAttrName, defaultSkillMacro, defaultSkillMacroMap, null, allNonFillInSkills, keysNeedingReplacing, valsNeedingReplacing, false);
				PFMacros.migrateStaticMacrosMult(doneOne, defaultSkillAttrName, defaultFillInSkillMacro, defaultFillInSkillMacroMap, null, nonMiscFillInSkillsInstances, keysNeedingReplacing, valsNeedingReplacing, true);
				PFMacros.migrateStaticMacrosMult(doneOne, defaultSkillAttrName, defaultMiscSkillMacro, defaultMiscSkillMacroMap, null, miscFillInSkillsInstances, keysNeedingReplacing, valsNeedingReplacing, true);
			} else {
				done();
			}
		});
	} catch (err) {
		done();
	}
}

/**appendToSubSkills - util to append the string to all 10 names of one type of skill (perform, craft, knowledge, etc)
 * adds the numbers from 0-9 or 1-10 or knowledge, then appends the string , to generate all 10 versions.
 * @param {string} skilllist The name of the skill in, member of skillsWithSubSkills
 * @param {string} appendToEnd The string to append.
 * @returns {Array[string]} array of skill names
 */
function appendToSubSkills(skilllist, appendToEnd) {
	return _underscore2.default.reduce(skilllist, function (memo, skill) {
		var appendnums = skill === "Misc-Skill" ? miscSkillAppendNums : skill === "Knowledge" ? knowledgeSkillAppends : skillAppendNums,
		    appendArray = SWUtils.cartesianAppend([skill], appendnums, appendToEnd);
		return memo.concat(appendArray);
	}, []);
}
/* updateMaxSkills Calculates and sets maximum skill ranks. Minimum 1 per level.
 *  divides by 2 if using consolidated skills
 * @param {event} eventInfo - from event 
 * @callback {function} - callback when done
 */
function updateMaxSkills(eventInfo, callback) {
	var done = _underscore2.default.once(function () {
		if (typeof callback === "function") {
			callback();
		}
	}),
	    fields = ["total-skill", "total-fcskill", "INT-mod", "level", "Max-Skill-Ranks-mod", "Max-Skill-Ranks", "unchained_skills-show", "BG-Skill-Use", "npc-skill", "npc-hd-num", "class-0-skill", "class-1-skill", "class-2-skill", "class-3-skill", "class-4-skill", "class-5-skill", "class-0-level", "class-1-level", "class-2-level", "class-3-level", "class-4-level", "class-5-level"];
	getAttrs(fields, function (v) {
		var intMod = parseInt(v["INT-mod"], 10) || 0,
		    classSkills = parseInt(v["total-skill"], 10) || 0,
		    level = parseInt(v.level, 10) || 0,
		    fcSkills = parseInt(v["total-fcskill"], 10) || 0,
		    extra = parseInt(v["Max-Skill-Ranks-mod"], 10) || 0,
		    currSkills = parseInt(v["Max-Skill-Ranks"], 10) || 0,
		    totIntMod = 0,
		    minSkills = 0,
		    i = 0,
		    thislvl = 0,
		    classPlusInt = 0,
		    thisSkill = 0,
		    totAllSkills = 0,
		    setter = {};
		try {
			for (i = 0; i < 6; i++) {
				thislvl = parseInt(v['class-' + i + '-level'], 10) || 0;
				if (thislvl > 0) {
					thisSkill = (parseInt(v['class-' + i + '-skill'], 10) || 0) * thislvl + intMod * thislvl;
					if (thisSkill < thislvl) {
						thisSkill = thislvl;
					}
					classPlusInt += thisSkill;
				}
			}
			thislvl = parseInt(v['npc-hd-num'], 10) || 0;
			thisSkill = parseInt(v['npc-skill'], 10) || 0;
			if (thislvl && thisSkill) {
				thisSkill = thislvl * thisSkill + intMod * thislvl;
				if (thisSkill < thislvl) {
					thisSkill = thislvl;
				}
				classPlusInt += thisSkill;
			}
			if (v["unchained_skills-show"] == "1" && (!v["BG-Skill-Use"] || v["BG-Skill-Use"] == "0")) {
				classPlusInt = Math.floor(classPlusInt / 2);
			}
			totAllSkills = classPlusInt + extra;
			if (totAllSkills < level) {
				totAllSkills = level;
			}
			totAllSkills += fcSkills;
			if (currSkills !== totAllSkills) {
				setter["Max-Skill-Ranks"] = totAllSkills;
			}
		} catch (err) {
			_exportsLoaderTASTheAaronSheet2.default.error("PFSkills.updateMaxSkills", err);
		} finally {
			if (_underscore2.default.size(setter) > 0) {
				setAttrs(setter, {
					silent: true
				}, done);
			} else {
				done();
			}
		}
	});
}
/** verifyHasSkill - Checks to see if skill is in list of valid skills for this character (consolidated, background, core).
 * @param {string} skill = the skill name
 * @param {function} callback = a function that takes a a boolean as a first parameter.
 *   called with true if skill is part of valid list, or false if not.
 */
function verifyHasSkill(skill, callback) {
	var first3 = '',
	    first4 = '',
	    core = false,
	    bg = false,
	    cs = false,
	    isSub = false,
	    fields = ["BG-Skill-Use", "unchained_skills-show"];
	try {
		if (skill && typeof callback === "function") {
			first4 = skill.slice(0, 4).toLowerCase();
			first3 = first4.slice(0, 3);
			if (first3 === 'cs-') {
				cs = true;
			} else if (first4 === 'arti' || first4 === 'lore') {
				bg = true;
			} else {
				core = true;
			}
			if (_underscore2.default.contains(allFillInSkillInstances, skill)) {
				isSub = true;
				fields = fields.concat([skill + "-name", skill + "-ranks"]);
			}
			getAttrs(fields, function (v) {
				var retval = false,
				    usesBG = parseInt(v["BG-Skill-Use"], 10) || 0,
				    usesUnchained = parseInt(v["unchained_skills-show"], 10) || 0;
				if (!isSub || v[skill + "-name"] || (parseInt(v[skill + "-ranks"], 10) || 0) > 0) {
					if (core) {
						if (!usesUnchained || usesBG) {
							retval = true;
						}
					} else if (bg) {
						if (usesUnchained && usesBG) {
							retval = true;
						}
					} else {
						if (usesUnchained && !usesBG) {
							retval = true;
						}
					}
				}
				callback(retval);
			});
		}
	} catch (err) {
		_exportsLoaderTASTheAaronSheet2.default.error("PFSkills.verifyHasSkill", err);
		callback(false);
	}
}
/** updates one  skill row
 * @param {string} skill to update, must have same capitalization as on HTML
 * @param {function} callback = callback after done with params newvalue, oldvalue.
 * @param {boolean} silently = whether to update silently or not. ignored, always silent.
 */
function updateSkill(skill, callback, silently) {
	var done = function done(newVal, oldVal) {
		if (typeof callback === "function") {
			callback(newVal, oldVal);
		}
	},
	    csNm = skill + "-cs",
	    ranksNm = skill + "-ranks",
	    classNm = skill + "-class",
	    abNm = skill + "-ability",
	    modNm = skill + "-ability-mod",
	    racialNm = skill + "-racial",
	    traitNm = skill + "-trait",
	    featNm = skill + "-feat",
	    itemNm = skill + "-item",
	    miscNm = skill + "-misc-mod",
	    utNm = skill + "-ut",
	    rtNm = skill + "-ReqTrain";
	getAttrs([skill, csNm, ranksNm, classNm, abNm, modNm, racialNm, traitNm, featNm, itemNm, miscNm, rtNm, utNm, "enforce_requires_training", "size_skill", "size_skill_double", "acp", "checks-cond", "Phys-skills-cond", "Perception-cond"], function (v) {
		var skillSize = 0,
		    adj,
		    skillTot = 0,
		    setter = {},
		    params = {},
		    mods = "",
		    setAny = 0,
		    cond = 0,
		    cs = parseInt(v[csNm], 10) || 0,
		    currSkill = parseInt(v[skill], 10),
		    //no default
		ranks = parseInt(v[ranksNm], 10) || 0,
		    rt = parseInt(v[rtNm], 10) || 0,
		    allCond = parseInt(v["checks-cond"], 10) || 0,
		    abilityName = '',
		    physCond = 0,
		    perCond = 0,
		    watchrt = parseInt(v["enforce_requires_training"], 10) || 0;
		try {
			abilityName = PFUtils.findAbilityInString(v[abNm]);
			if (rt && ranks === 0) {
				if (v[utNm] !== "{{untrained=1}}") {
					setter[utNm] = "{{untrained=1}}";
				}
			} else if (v[utNm] !== "{{untrained=}}") {
				setter[utNm] = "{{untrained=}}"; //cannot set to "" because then it chooses the default which is "{{untrained=1}}"
			}
			if (ranks && cs) {
				skillTot += 3;
				mods = "3/";
			} else {
				mods = "0/";
			}
			if (abilityName === "DEX-mod" || abilityName === "STR-mod") {
				adj = parseInt(v["acp"], 10) || 0;
				skillTot += adj;
				mods += adj + "/";
			} else {
				mods += "0/";
			}
			skillSize = sizeSkills[skill];
			if (skillSize) {
				if (skillSize === 1) {
					adj = parseInt(v["size_skill"], 10) || 0;
					skillTot += adj;
					mods += adj + "/";
				} else if (skillSize === 2) {
					adj = parseInt(v["size_skill_double"], 10) || 0;
					skillTot += adj;
					mods += adj + "/";
				}
			} else {
				mods += "0/";
			}
			if (abilityName === "DEX-mod" || abilityName === "STR-mod") {
				physCond = parseInt(v["Phys-skills-cond"], 10) || 0;
			}
			if (skill === "Perception" || skill === "CS-Perception") {
				perCond = parseInt(v["Perception-cond"], 10) || 0;
			}
			cond = allCond + physCond + perCond;
			mods += cond;
			skillTot += ranks + cond + (parseInt(v[modNm], 10) || 0) + (parseInt(v[racialNm], 10) || 0) + (parseInt(v[traitNm], 10) || 0) + (parseInt(v[featNm], 10) || 0) + (parseInt(v[itemNm], 10) || 0) + (parseInt(v[miscNm], 10) || 0);
			if (currSkill !== skillTot) {
				setter[skill] = skillTot;
			}
			if (v[classNm] !== mods) {
				setter[classNm] = mods;
			}
		} catch (err) {
			_exportsLoaderTASTheAaronSheet2.default.error(err);
		} finally {
			if (_underscore2.default.size(setter) > 0) {
				setAttrs(setter, {
					silently: true
				}, function () {
					done(skillTot, currSkill);
				});
			} else {
				done(currSkill, currSkill);
			}
		}
	});
}
/**recalculateSkillDropdowns recalculates ability dropdowns for all skills in list silently
 * @param {Array} skills list of skills
 * @param {function} callback callback when done
 * @param {function} errorCallback callback if error encountered creating field list to get.
 */
function recalculateSkillDropdowns(skills, callback, errorCallback) {
	var doneDrop = _underscore2.default.once(function () {
		_exportsLoaderTASTheAaronSheet2.default.debug("Leaving PFSkills.recalculateSkillDropdowns");
		if (typeof callback === "function") {
			callback();
		}
	}),
	    fields = ["STR-mod", "DEX-mod", "CON-mod", "INT-mod", "WIS-mod", "CHA-mod"];
	try {
		fields = _underscore2.default.reduce(skills, function (memo, skill) {
			memo.push(skill + "-ability");
			memo.push(skill + "-ability-mod");
			return memo;
		}, fields);
	} catch (err) {
		_exportsLoaderTASTheAaronSheet2.default.error("PFSkills.recalculateSkillDropdowns could not create field list", err);
		if (typeof errorCallback === "function") {
			errorCallback();
		}
		return;
	}
	//first do all dropdowns at once
	getAttrs(fields, function (v) {
		var setter = {},
		    abilityMods;
		try {
			//TAS.debug("PFSkills.recalculateSkillDropdowns got attrs",v);
			//create short list of 6 modifiers. 
			abilityMods = _underscore2.default.reduce(PFAbilityScores.abilitymods, function (memo, mod) {
				memo[mod] = parseInt(v[mod], 10) || 0;
				return memo;
			}, {});
			//TAS.debug("at PFSkills.recalculateSkillDropdowns abilities are ",abilityMods);
			setter = _underscore2.default.reduce(skills, function (memo, skill) {
				var ability = '',
				    newval = 0,
				    currVal = 0;
				try {
					ability = PFUtils.findAbilityInString(v[skill + "-ability"]);
					if (ability) {
						newval = abilityMods[ability];
						currVal = parseInt(v[skill + "-ability-mod"], 10);
						//TAS.debug("examining skill:"+skill+", ability:"+ability+", currVal:"+currVal+", newval:"+newval);
						if (isNaN(currVal) || newval !== currVal) {
							//TAS.info("setting "+skill + "-ability-mod to "+newval);
							memo[skill + "-ability-mod"] = newval;
						}
					}
				} catch (err) {
					_exportsLoaderTASTheAaronSheet2.default.error("PFSkills.recalculateSkillDropdowns INSIDE REDUCE " + skill, err);
				} finally {
					return memo;
				}
			}, {});
		} catch (err2) {
			_exportsLoaderTASTheAaronSheet2.default.error("PFSkills.recalculateSkillDropdowns inner", err2);
		} finally {
			try {
				//TAS.debug("PFSkills.recalculateSkillDropdowns about to set ");
				//TAS.debug("PFSkills.recalculateSkillDropdowns setting",setter);
				if (_underscore2.default.size(setter) > 0) {
					setAttrs(setter, _PFConst2.default.silentParams, function () {
						//TAS.debug("PFSkills.recalculateSkillDropdowns resturned from setAttrs!");
						doneDrop();
					});
				} else {
					doneDrop();
				}
			} catch (err3) {
				_exportsLoaderTASTheAaronSheet2.default.error("PFSkills.recalculateSkillDropdowns err3", err3);
				doneDrop();
			}
		}
	});
}
/** recalculateSkillArray recalculates skills first dropdown, then misc mod, then skill total.
 * calls updateSkill for each. Does all dropdowns at once since they are easy to merge into one.
 * @param {Array} skills array of skills to update.
 * @param {function} callback when done
 * @param {boolean} silently whether to call setAttrs of skill total with silent or not.
 */
function recalculateSkillArray(skills, callback, silently) {
	var done = _underscore2.default.once(function () {
		if (typeof callback === "function") {
			callback();
		}
	}),
	    skillCount = _underscore2.default.size(skills),
	    skillsHandled = 0,
	    doneMisc = function doneMisc(skill) {
		//TAS.debug("PFSkills.recalculateSkillArray done with misc skills call updateSkill on "+skill);
		//final: update each skill
		updateSkill(skill, done, silently);
	},
	    doneDrop = function doneDrop() {
		//second do misc one by one (since it is asynchronous)
		_underscore2.default.each(skills, function (skill) {
			SWUtils.evaluateAndSetNumber(skill + "-misc", skill + "-misc-mod", 0, function () {
				doneMisc(skill);
			}, true);
		});
	};
	//TAS.debug("at PFSkills.recalculateSkillArray for ",skills);
	recalculateSkillDropdowns(skills, doneDrop, done);
}
function recalculateSkills(callback, silently) {
	var done = _underscore2.default.once(function () {
		if (typeof callback === "function") {
			callback();
		}
	});
	getAttrs(["unchained_skills-show", "BG-Skill-Use"], function (v) {
		try {
			if (v["unchained_skills-show"] == "1") {
				if (v["BG-Skill-Use"] == "1") {
					_exportsLoaderTASTheAaronSheet2.default.debug("PFSkills.recalculate: has background skills");
					recalculateSkillArray(backgroundOnlySkills, null, silently);
					//return after long one
					recalculateSkillArray(allCoreSkills, done, silently);
				} else {
					_exportsLoaderTASTheAaronSheet2.default.debug("PFSkills.recalculate: has consolidatedSkills skills");
					recalculateSkillArray(consolidatedSkills, done, silently);
				}
			} else {
				_exportsLoaderTASTheAaronSheet2.default.debug("PFSkills.recalculate: has core skills skills");
				recalculateSkillArray(allCoreSkills, done, silently);
			}
		} catch (err) {
			_exportsLoaderTASTheAaronSheet2.default.error("PFSKills.recalculate", err);
			done();
		}
	});
}
/** updates the macros for only the 7 subskill rolltemplates 
 * @param {boolean} background -if background skills turned on
 * @param {boolean} rt - if Enforce Requires Training checked 
 * @param {event} eventInfo ?
 * @param {jsobject_map} currMacros map of parent skill button name to command macro. (knowledge, Perform, etc)
 * @param {boolean} isNPC - if sheet is NPC
 * @param {boolean} showBonus - if skill total should be displayed on button.
 */
function updateSubSkillMacroBook(background, rt, eventInfo, currMacros, isNPC, showBonus) {
	var headerString = isNPC ? npcSkillHeaderMacro : skillHeaderMacro,
	    skillPrefix = isNPC ? "NPC-" : "",
	    assembleSubSkillButtonArray = function assembleSubSkillButtonArray(skill, shouldEnforce, v) {
		var appendnums = skill === "Misc-Skill" ? miscSkillAppendNums : skill === "Knowledge" ? knowledgeSkillAppends : skillAppendNums,
		    subskills = SWUtils.cartesianAppend([skill], appendnums),
		    firstPass = [];
		if (skill === "Knowledge") {
			firstPass = subskills;
			return firstPass; //knowledge rollable even if untrained
		}
		firstPass = _underscore2.default.filter(subskills, function (subskill) {
			if (v[subskill + "-name"]) {
				return true;
			}
			return false;
		});
		if (!shouldEnforce) {
			return firstPass;
		}
		return _underscore2.default.filter(firstPass, function (skill) {
			if ((parseInt(v[skill + "-ReqTrain"], 10) || 0) === 0 || (parseInt(v[skill + "-ranks"], 10) || 0) > 0) {
				return true;
			}
			return false;
		});
	},
	    getKnowledgeButtonMacro = function getKnowledgeButtonMacro(showBonus) {
		var bonusStr = showBonus ? "+ @{REPLACE}" : "",
		    knowledgebutton = "[^{REPLACENAME}" + bonusStr + "](~@{character_id}|" + skillPrefix + "REPLACE-check) ";
		return headerString.replace('REPLACELOWER', 'knowledge') + "{{ " + _underscore2.default.reduce(knowledgeSubSkillsTranslateKeys, function (memo, subskill, idx) {
			memo += knowledgebutton.replace(/REPLACENAME/g, subskill).replace(/REPLACE/g, knowledgeSkills[idx]);
			return memo;
		}, "") + " }}";
	},
	    getSubSkillButtonMacro = function getSubSkillButtonMacro(skill, skillArray, showBonus, v) {
		var skillTransKey = skill.toLowerCase(),
		    bonusStr = showBonus ? "+ @{REPLACE}" : "",
		    baseMacro = headerString.replace('REPLACELOWER', skillTransKey),
		    singleRowButton = "[REPLACENAME" + bonusStr + "](~@{character_id}|" + skillPrefix + "REPLACE-check) ",
		    tempstr = "";
		if (skill === "Knowledge") {
			return getKnowledgeButtonMacro();
		}
		tempstr = _underscore2.default.reduce(skillArray, function (memo, subskill, idx) {
			var buttonName = v[subskill + "-name"];
			if (buttonName) {
				buttonName = SWUtils.escapeForChatLinkButton(buttonName);
				buttonName = SWUtils.escapeForRollTemplate(buttonName);
			} else {
				buttonName = "@{" + subskill + "-name}";
			}
			memo += singleRowButton.replace(/REPLACENAME/g, buttonName).replace(/REPLACE/g, subskill);
			return memo;
		}, "");
		if (!tempstr) {
			tempstr = "description = ^{no-skills-available}";
		}
		return baseMacro + "{{ " + tempstr + " }}";
	},
	    subskillParents = background ? skillsWithFillInNames : coreSkillsWithFillInNames,
	    allsubskillFields = appendToSubSkills(subskillParents, ["-name"]);
	if (rt) {
		allsubskillFields = allsubskillFields.concat(appendToSubSkills(subskillParents, checkRTArray));
		allsubskillFields = allsubskillFields.sort();
		//allsubskillFields.concat(appendToSubSkills(subskillParents, checkRTArray)).sort();
	}
	//TAS.debug("updateSubSkillMacroBook: allsubskillFields are:", allsubskillFields);
	getAttrs(allsubskillFields, function (v) {
		var setter = {},
		    tempKMac = "";
		//TAS.debug("updateSubSkillMacroBook: event and data are:", eventInfo, v);
		_underscore2.default.each(subskillParents, function (skill) {
			var canshowarray = assembleSubSkillButtonArray(skill, rt, v),
			    tempMacro = getSubSkillButtonMacro(skill, canshowarray, showBonus, v);
			tempMacro = baseGenMacro + tempMacro;
			if (currMacros[skillPrefix + skill.toLowerCase() + "_skills-macro"] !== tempMacro) {
				setter[skillPrefix + skill.toLowerCase() + "_skills-macro"] = tempMacro;
			}
		});
		if (currMacros[skillPrefix + "knowledge_skills-macro"]) {
			tempKMac = baseGenMacro + getKnowledgeButtonMacro(showBonus);
			if (currMacros[skillPrefix + "knowledge_skills-macro"] !== tempKMac) {
				setter[skillPrefix + "knowledge_skills-macro"] = tempKMac;
			}
		}
		if (_underscore2.default.size(setter) > 0) {
			setAttrs(setter, _PFConst2.default.silentParams);
		}
	});
}
function assembleSkillButtonArray(skills, shouldEnforce, sv) {
	if (!shouldEnforce) {
		return skills;
	}
	return _underscore2.default.filter(skills, function (skill) {
		if (/^Knowled|^Linguis|^Sleight/i.test(skill.slice(0, 7)) || (parseInt(sv[skill + "-ReqTrain"], 10) || 0) !== 1 || (parseInt(sv[skill + "-ranks"], 10) || 0) > 0) {
			return true;
		}
		return false;
	});
}
function getSkillButtonMacro(name, skillArray, showBonus, isNPC) {
	var skillTransKey = name.toLowerCase(),
	    skillPrefix = isNPC ? "NPC-" : "",
	    bonusStr = showBonus ? " + @{REPLACE}" : "",
	    baseMacro = "{{name= ^{" + skillTransKey + "} }} ",
	    npcBaseMacro = "{{name= ^{npc} ^{" + skillTransKey + "} }} ",
	    rowbutton = "[^{REPLACELOWER}" + bonusStr + "](~@{character_id}|" + skillPrefix + "REPLACE-check) ",
	    subskillbutton = "[^{REPLACELOWER}](~@{character_id}|" + skillPrefix + "REPLACELOWERMAC_skills_buttons_macro) ",
	    baseToSend = isNPC ? npcBaseMacro : baseMacro,
	    tempstr = "";
	try {
		tempstr = _underscore2.default.reduce(skillArray, function (memo, skill, idx) {
			var thistranskey = skill.toLowerCase(),
			    thisbutton = _underscore2.default.contains(skillsWithSubSkills, skill) ? subskillbutton : rowbutton;
			thisbutton = thisbutton.replace(/REPLACELOWERMAC/g, thistranskey);
			thisbutton = thisbutton.replace(/REPLACELOWER/g, thistranskey);
			thisbutton = thisbutton.replace(/REPLACE/g, skill);
			memo += thisbutton + " ";
			return memo;
		}, "");
		if (!tempstr) {
			tempstr = "^{no-skills-available} ";
		}
	} finally {
		return baseToSend + "{{ " + tempstr + "}}";
	}
}
function resetOneCommandMacro(callback, eventInfo, isNPC, showBonus, unchained, background, consolidated, rt) {
	var done = _underscore2.default.once(function () {
		if (typeof callback === "function") {
			callback();
		}
	}),
	    skillPrefix = isNPC ? "NPC-" : "";
	getAttrs([skillPrefix + "skills-macro", skillPrefix + "background_skills-macro", skillPrefix + "adventure_skills-macro", skillPrefix + "artistry_skills-macro", skillPrefix + "lore_skills-macro", skillPrefix + "craft_skills-macro", skillPrefix + "knowledge_skills-macro", skillPrefix + "perform_skills-macro", skillPrefix + "profession_skills-macro", skillPrefix + "misc-skill_skills-macro"], function (v) {
		var i = 0,
		    setter = {},
		    tempSkillArray = [],
		    tempMacro = "",
		    allskillstitle = "skills",
		    coreArray;
		if (!consolidated) {
			updateSubSkillMacroBook(background, rt, eventInfo, v, isNPC, showBonus);
			//skills without sub skills
			if (rt) {
				getAttrs(SWUtils.cartesianAppend(regularCoreSkills, checkRTArray), function (v) {
					var canshowarray = [],
					    tempRTMacro = "",
					    temparray = [];
					try {
						if (background) {
							canshowarray = assembleSkillButtonArray(regularBackgroundSkills, rt, v) || [];
							temparray = temparray.concat(canshowarray);
							canshowarray = canshowarray.concat(skillsWithSubSkills).sort();
							tempRTMacro = baseGenMacro + getSkillButtonMacro("background-skills", canshowarray, showBonus, isNPC);
							if (v[skillPrefix + "background_skills-macro"] !== tempRTMacro) {
								setter[skillPrefix + "background_skills-macro"] = tempRTMacro;
							}
							canshowarray = assembleSkillButtonArray(regularAdventureSkills, rt, v) || [];
							temparray = temparray.concat(canshowarray);
							canshowarray = canshowarray.concat(["Knowledge", "Misc-Skill"]).sort();
							tempRTMacro = baseGenMacro + getSkillButtonMacro("adventure-skills", canshowarray, showBonus, isNPC);
							if (v[skillPrefix + "adventure_skills-macro"] !== tempRTMacro) {
								setter[skillPrefix + "adventure_skills-macro"] = tempRTMacro;
							}
							temparray = temparray.concat(skillsWithSubSkills).sort();
						} else {
							canshowarray = assembleSkillButtonArray(regularCoreSkills, rt, v) || [];
							temparray = temparray.concat(canshowarray).concat(coreSkillsWithSubSkills).sort();
						}
						tempRTMacro = baseGenMacro + getSkillButtonMacro("skills", temparray, showBonus, isNPC);
						if (v[skillPrefix + "skills-macro"] !== tempRTMacro) {
							setter[skillPrefix + "skills-macro"] = tempRTMacro;
						}
					} catch (errRT) {
						_exportsLoaderTASTheAaronSheet2.default.error("PFSkills.resetOneCommandMacro errRT", errRT);
					} finally {
						if (_underscore2.default.size(setter) > 0) {
							setAttrs(setter, _PFConst2.default.silentParams, done);
						} else {
							done();
						}
					}
				});
			} else {
				try {
					coreArray = regularCoreSkills.concat(coreSkillsWithSubSkills);
					//no require training
					if (background) {
						coreArray = coreArray.concat(["Artistry", "Lore"]).sort();
						allskillstitle = "all-skills";
						tempSkillArray = regularBackgroundSkills.concat(skillsWithSubSkills).sort();
						tempMacro = getSkillButtonMacro("background-skills", tempSkillArray, showBonus, isNPC);
						setter[skillPrefix + "background_skills-macro"] = baseGenMacro + tempMacro;
						tempSkillArray = regularAdventureSkills.concat(["Knowledge"]).sort();
						tempMacro = getSkillButtonMacro("adventure-skills", tempSkillArray, showBonus, isNPC);
						setter[skillPrefix + "adventure_skills-macro"] = baseGenMacro + tempMacro;
					}
					tempMacro = baseGenMacro + getSkillButtonMacro(allskillstitle, coreArray, showBonus, isNPC);
					if (v[skillPrefix + "skills-macro"] !== tempMacro) {
						setter[skillPrefix + "skills-macro"] = tempMacro;
					}
				} catch (errReg) {
					_exportsLoaderTASTheAaronSheet2.default.error("PFSkills.resetOneCommandMacro errReg", errReg);
				} finally {
					if (_underscore2.default.size(setter > 0)) {
						setAttrs(setter, _PFConst2.default.silentParams, done);
					} else {
						done();
					}
				}
			}
		} else {
			//consolidated
			if (rt) {
				getAttrs(SWUtils.cartesianAppend(consolidatedSkills, ["-ReqTrain", "-ranks"]), function (sv) {
					var canshowarray,
					    setter = {},
					    tempMacro;
					canshowarray = assembleSkillButtonArray(consolidatedSkills, rt, sv);
					tempMacro = getSkillButtonMacro("skills", canshowarray, showBonus);
					setter[skillPrefix + "consolidated_skills-macro"] = baseGenMacro + tempMacro;
					setAttrs(setter, _PFConst2.default.silentParams, done);
				});
			} else {
				tempMacro = getSkillButtonMacro("skills", consolidatedSkills, showBonus);
				setter[skillPrefix + "consolidated_skills-macro"] = baseGenMacro + tempMacro;
				setAttrs(setter, _PFConst2.default.silentParams, done);
			}
		}
	});
}
function resetCommandMacro(eventInfo, callback) {
	var done = _underscore2.default.once(function () {
		if (typeof callback === "function") {
			callback();
		}
	});
	getAttrs(["BG-Skill-Use", "unchained_skills-show", "enforce_requires_training", "is_npc", "include_skill_totals"], function (vout) {
		var isNPC = parseInt(vout["is_npc"], 10) || 0,
		    skillPrefix = isNPC ? "NPC-" : "",
		    showBonus = parseInt(vout.include_skill_totals, 10) || 0,
		    unchained = parseInt(vout["unchained_skills-show"], 10) || 0,
		    background = unchained && (parseInt(vout["BG-Skill-Use"], 10) || 0),
		    consolidated = unchained && !background,
		    rt = parseInt(vout["enforce_requires_training"], 10) || 0;
		resetOneCommandMacro(done, eventInfo, isNPC, showBonus, unchained, background, consolidated, rt);
		if (isNPC) {
			resetOneCommandMacro(done, eventInfo, false, showBonus, unchained, background, consolidated, rt);
		}
	});
}
function applyConditions(callback, silently, eventInfo) {
	var done = function done() {
		if (typeof callback === "function") {
			callback();
		}
	},
	    updateSkillArray = function updateSkillArray(skills) {
		_underscore2.default.each(skills, function (skill) {
			updateSkill(skill);
		});
	};
	//TAS.debug("at apply conditions");
	getAttrs(["unchained_skills-show", "BG-Skill-Use"], function (v) {
		try {
			if (v["unchained_skills-show"] == "1") {
				if (v["BG-Skill-Use"] == "1") {
					//TAS.debug("PFSkills.recalculate: has background skills");
					updateSkillArray(backgroundOnlySkills);
					//return after long one
					updateSkillArray(allCoreSkills);
				} else {
					//TAS.debug("PFSkills.recalculate: has consolidatedSkills skills");
					updateSkillArray(consolidatedSkills);
				}
			} else {
				//TAS.debug("PFSkills.recalculate: has core skills skills");
				updateSkillArray(allCoreSkills);
			}
		} catch (err) {
			_exportsLoaderTASTheAaronSheet2.default.error("PFSKills.applyConditions", err);
			done();
		}
	});
}
/** migrate skills
 * @param {function} callback callback when done
 * @param {number} oldversion old version , -1 if hit recalc
 */
function migrate(callback, oldversion) {
	var done = _underscore2.default.once(function () {
		_exportsLoaderTASTheAaronSheet2.default.debug("leaving PFSkills.migrate");
		if (typeof callback === "function") {
			callback();
		}
	}),
	    doneOne = _underscore2.default.after(3, done),

	/** migrateOldClassSkillValue - converts class skill checkboxes from old autocalc string to number "" or 3.
 * @param {function} callback ?
 * @param {number} oldversion ?
 */
	migrateOldClassSkillValue = function migrateOldClassSkillValue(callback, oldversion) {
		var done = _underscore2.default.once(function () {
			if (typeof callback === "function") {
				callback();
			}
		}),
		    migrateClassSkill = function migrateClassSkill(skill) {
			var csNm = skill + "-cs";
			getAttrs([csNm], function (v) {
				var setter = {};
				if (isNaN(parseInt(v[csNm], 10))) {
					if (!(!v[csNm] || v[csNm] == "0")) {
						//TAS.debug({"function":"migrateClassSkill","raw":v[csNm],"cs":cs});
						setter[csNm] = 3;
						setAttrs(setter, _PFConst2.default.silentParams);
					}
				}
			});
		},
		    migrateClassSkillArray = function migrateClassSkillArray(skills) {
			skills.forEach(function (skill) {
				migrateClassSkill(skill);
			});
		},
		    determineArray = function determineArray() {
			migrateClassSkillArray(allTheSkills);
			//not bothering to code correctly to wait since this is almost a year old.
			setAttrs({ classSkillsMigrated: 1 }, _PFConst2.default.silentParams, done);
		};
		getAttrs(["classSkillsMigrated"], function (vm) {
			if (!(parseInt(vm.classSkillsMigrated, 10) || 0)) {
				determineArray();
			}
			done();
		});
	},

	/** setAdvancedMacroCheckbox - part of migrate .66 to 1.00 sets checkbox to unhide advanced
 * skillmacro (investigator) if character sheet already using it.)
 * @param {function} callback ?
 */
	setAdvancedMacroCheckbox = function setAdvancedMacroCheckbox(callback) {
		var done = _underscore2.default.once(function () {
			if (typeof callback === "function") {
				callback();
			}
		});
		getAttrs(["adv_macro_show", "skill-invest-query"], function (v) {
			var showAdv = parseInt(v.adv_macro_show, 10) || 0;
			if (v["skill-invest-query"] && !showAdv) {
				setAttrs({ adv_macro_show: 1 }, _PFConst2.default.silentParams, done);
			}
		});
	};
	//TAS.debug("at PFSkills.migrate");
	migrateOldClassSkillValue(doneOne);
	migrateMacros(doneOne);
	PFMigrate.migrateMaxSkills(doneOne);
}
/* recalculate - updates ALL skills  - calls PFUtilsAsync.setDropdownValue for ability then updateSkill */
function recalculate(callback, silently, oldversion) {
	var done = _underscore2.default.once(function () {
		_exportsLoaderTASTheAaronSheet2.default.info("leaving PFSkills.recalculate");
		resetCommandMacro();
		if (typeof callback === "function") {
			callback();
		}
	});
	_exportsLoaderTASTheAaronSheet2.default.debug("PFSkills.recalculate");
	migrate(function () {
		//TAS.debug"PFSkills.recalculate back from PFSkills.migrate");
		updateMaxSkills();
		recalculateSkills(done, silently);
	}, oldversion);
}
function registerEventHandlers() {
	//SKILLS************************************************************************
	on("change:total-skill change:total-fcskill change:int-mod change:level change:max-skill-ranks-mod change:unchained_skills-show change:BG-Skill-Use", _exportsLoaderTASTheAaronSheet2.default.callback(function eventUpdateMaxSkills(eventInfo) {
		_exportsLoaderTASTheAaronSheet2.default.debug("caught " + eventInfo.sourceAttribute + " event: " + eventInfo.sourceType);
		if (eventInfo.sourceType === "sheetworker") {
			updateMaxSkills(eventInfo);
		}
	}));
	on(events.skillGlobalEventAuto, _exportsLoaderTASTheAaronSheet2.default.callback(function eventGlobalConditionAffectingSkill(eventInfo) {
		_exportsLoaderTASTheAaronSheet2.default.debug("caught " + eventInfo.sourceAttribute + " event for " + eventInfo.sourceType);
		if (eventInfo.sourceType === "sheetworker") {
			applyConditions(null, null, eventInfo);
		}
	}));
	//each skill has a dropdown handler and a skill update handler
	//concat them all up, only happens once so no big deal
	_underscore2.default.each(allTheSkills, function (skill) {
		on(events.skillEventsAuto.replace(/REPLACE/g, skill), _exportsLoaderTASTheAaronSheet2.default.callback(function eventSkillsAuto(eventInfo) {
			_exportsLoaderTASTheAaronSheet2.default.debug("caught " + eventInfo.sourceAttribute + " event for " + skill + ", " + eventInfo.sourceType);
			if (eventInfo.sourceType === "sheetworker") {
				verifyHasSkill(skill, function (hasSkill) {
					if (hasSkill) {
						updateSkill(skill, eventInfo);
					}
				});
			}
		}));
		on(events.skillEventsPlayer.replace(/REPLACE/g, skill), _exportsLoaderTASTheAaronSheet2.default.callback(function eventSkillsPlayer(eventInfo) {
			_exportsLoaderTASTheAaronSheet2.default.debug("caught " + eventInfo.sourceAttribute + " event for " + skill + ", " + eventInfo.sourceType);
			if (eventInfo.sourceType === "player" || eventInfo.sourceType === "api") {
				verifyHasSkill(skill, function (hasSkill) {
					if (hasSkill) {
						updateSkill(skill, eventInfo);
					}
				});
			}
		}));
		on("change:" + skill + "-ability", _exportsLoaderTASTheAaronSheet2.default.callback(function eventSkillDropdownAbility(eventInfo) {
			_exportsLoaderTASTheAaronSheet2.default.debug("caught " + eventInfo.sourceAttribute + " event: " + eventInfo.sourceType);
			verifyHasSkill(skill, function (hasSkill) {
				if (hasSkill) {
					PFUtilsAsync.setDropdownValue(skill + "-ability", skill + "-ability-mod");
				}
			});
		}));
		on("change:" + skill + "-misc", _exportsLoaderTASTheAaronSheet2.default.callback(function eventSkillMacroAbility(eventInfo) {
			_exportsLoaderTASTheAaronSheet2.default.debug("caught " + eventInfo.sourceAttribute + " event: " + eventInfo.sourceType);
			verifyHasSkill(skill, function (hasSkill) {
				if (hasSkill) {
					SWUtils.evaluateAndSetNumber(skill + "-misc", skill + "-misc-mod");
				}
			});
		}));
		//these always displayed if rt or not
		if (skill.slice(0, 9) !== "Knowledge" && skill !== "Linguistics" && skill !== "Sleight-of-Hand") {
			on("change:" + skill + "-ReqTrain change:" + skill + "-ranks", _exportsLoaderTASTheAaronSheet2.default.callback(function eventSkillRequiresTrainingRanks(eventInfo) {
				_exportsLoaderTASTheAaronSheet2.default.debug("caught " + eventInfo.sourceAttribute + " event for " + skill + ", " + eventInfo.sourceType);
				if (eventInfo.sourceType === "player" || eventInfo.sourceType === "api") {
					verifyHasSkill(skill, function (hasSkill) {
						getAttrs(["enforce_requires_training"], function (v) {
							if (v.enforce_requires_training == "1") {
								resetCommandMacro(eventInfo);
							}
						});
					});
				}
			}));
		}
		//end of skill loop
	});
	//skills affected by size
	_underscore2.default.each(sizeSkills, function (mult, skill) {
		if (mult === 1) {
			on("change:size_skill", _exportsLoaderTASTheAaronSheet2.default.callback(function eventUpdateSizeSkill(eventInfo) {
				if (eventInfo.sourceType === "sheetworker") {
					_exportsLoaderTASTheAaronSheet2.default.debug("caught " + eventInfo.sourceAttribute + " event: " + eventInfo.sourceType);
					updateSkill(skill, eventInfo);
				}
			}));
		} else if (mult === 2) {
			on("change:size_skill_double", _exportsLoaderTASTheAaronSheet2.default.callback(function eventUpdateSizeSkillDouble(eventInfo) {
				_exportsLoaderTASTheAaronSheet2.default.debug("caught " + eventInfo.sourceAttribute + " event: " + eventInfo.sourceType);
				if (eventInfo.sourceType === "sheetworker") {
					updateSkill(skill, eventInfo);
				}
			}));
		}
	});
	on("change:enforce_requires_training", _exportsLoaderTASTheAaronSheet2.default.callback(function eventRequiresTraining(eventInfo) {
		if (eventInfo.sourceType === "player" || eventInfo.sourceType === "api") {
			_exportsLoaderTASTheAaronSheet2.default.debug("caught " + eventInfo.sourceAttribute + " event: " + eventInfo.sourceType);
			resetCommandMacro(eventInfo);
		}
	}));
	_underscore2.default.each(SWUtils.cartesianAppend(allFillInSkillInstances, ["-name"]), function (skill) {
		on("change:" + skill, _exportsLoaderTASTheAaronSheet2.default.callback(function eventSkillsWithFillInNames(eventInfo) {
			if (eventInfo.sourceType === "player" || eventInfo.sourceType === "api") {
				_exportsLoaderTASTheAaronSheet2.default.debug("caught " + eventInfo.sourceAttribute + " event: " + eventInfo.sourceType);
				var rt = skill.slice(0, -4) + "ReqTrain",
				    r = skill.slice(0, -4) + "ranks";
				//if we changed name on a skill that isn't choosable don't bother.
				getAttrs(["enforce_requires_training", rt, r, "unchained_skills-show", "BG-Skill-Use", "artistry_skills-macro", "lore_skills-macro", "craft_skills-macro", "knowledge_skills-macro", "perform_skills-macro", "profession_skills-macro", "misc-skill_skills-macro", "is_npc", "include_skill_totals", "NPC-craft_skills-macro", "NPC-knowledge_skills-macro", "NPC-perform_skills-macro", "NPC-profession_skills-macro", "NPC-misc-skill_skills-macro"], function (v) {
					var isrt = parseInt(v.enforce_requires_training, 10),
					    bg = 0,
					    isNPC = parseInt(v.is_npc, 10) || 0,
					    showBonus = parseInt(v.include_skill_totals, 10) || 0;
					if (!(isrt && parseInt(v[rt], 10) && isNaN(parseInt(v[r], 10)))) {
						bg = isNPC ? 0 : (parseInt(v["unchained_skills-show"], 10) || 0) && (parseInt(v["BG-Skill-Use"], 10) || 0);
						//TAS.debug"calling updatesubskillmacro: bg:" + bg + ",isrt:" + isrt);
						updateSubSkillMacroBook(bg, isrt, eventInfo, v, isNPC, showBonus);
					}
				});
			}
		}));
	});
	//reset based on config changes
	on("change:unchained_skills-show change:BG-Skill-Use change:include_skill_totals", _exportsLoaderTASTheAaronSheet2.default.callback(function eventResetUnchainedSkills(eventInfo) {
		_exportsLoaderTASTheAaronSheet2.default.debug("caught " + eventInfo.sourceAttribute + " event: " + eventInfo.sourceType);
		if (eventInfo.sourceType === "player" || eventInfo.sourceType === "api") {
			recalculate(eventInfo, function () {
				resetCommandMacro(eventInfo);
			});
		}
	}));
}
registerEventHandlers();
_PFLog.PFConsole.log('   PFSkills module loaded         ');
_PFLog.PFLog.modulecount++;

/***/ }),
/* 21 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.ifSpellClassExists = ifSpellClassExists;
exports.updateMultiClassedCasterFlag = updateMultiClassedCasterFlag;
exports.applyConditions = applyConditions;
exports.setCasterClassFromDropdown = setCasterClassFromDropdown;
exports.updateCasterFromClassLevel = updateCasterFromClassLevel;
exports.migrate = migrate;
exports.recalculate = recalculate;

var _underscore = __webpack_require__(2);

var _underscore2 = _interopRequireDefault(_underscore);

var _exportsLoaderTASTheAaronSheet = __webpack_require__(1);

var _exportsLoaderTASTheAaronSheet2 = _interopRequireDefault(_exportsLoaderTASTheAaronSheet);

var _PFLog = __webpack_require__(0);

var _PFConst = __webpack_require__(3);

var _PFConst2 = _interopRequireDefault(_PFConst);

var _SWUtils = __webpack_require__(4);

var SWUtils = _interopRequireWildcard(_SWUtils);

var _PFUtils = __webpack_require__(5);

var PFUtils = _interopRequireWildcard(_PFUtils);

var _PFUtilsAsync = __webpack_require__(8);

var PFUtilsAsync = _interopRequireWildcard(_PFUtilsAsync);

var _PFMigrate = __webpack_require__(6);

var PFMigrate = _interopRequireWildcard(_PFMigrate);

var _PFSpells = __webpack_require__(14);

var PFSpells = _interopRequireWildcard(_PFSpells);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

//the 3 spell classes at top of spells page

/**  returns whether a base spell level is filled in or not
*@param {int} spellclassidx 0,1,2 sellcasting class
*@param {function} callback - to call if exists
*@param {function} noExistCallback - to call if not exists
*/
function ifSpellClassExists(spellclassidx, callback, noExistCallback) {
    getAttrs(["use_spells", "spellclass-" + spellclassidx + "-exists"], function (v) {
        try {
            if (!parseInt(v.use_spells, 10)) {
                if (typeof noExistCallback === "function") {
                    noExistCallback();
                }
            } else if (parseInt(v["spellclass-" + spellclassidx + "-exists"], 10)) {
                if (typeof callback === "function") {
                    callback();
                }
            } else {
                if (typeof noExistCallback === "function") {
                    noExistCallback();
                }
            }
        } catch (err) {
            _exportsLoaderTASTheAaronSheet2.default.error("PFSpellCasterClasses.ifSpellClassExists", err);
            if (typeof noExistCallback === "function") {
                noExistCallback();
            }
        }
    });
}
/**  sets {spellclasses_multiclassed} to 1 if more than one spellclass-X-exists is 1
*@param {nothing} dummy - only here so eventhandlers can call it, since spellclass index is in this position.
*@param {eventinfo} eventInfo  unused eventinfo from 'on' method
*/
function updateMultiClassedCasterFlag(dummy, eventInfo, callback) {
    var done = _underscore2.default.once(function () {
        _exportsLoaderTASTheAaronSheet2.default.debug("leaving updateMultiClassedCasterFlag");
        if (typeof callback === "function") {
            callback();
        }
    });
    getAttrs(["spellclass-0-exists", "spellclass-1-exists", "spellclass-2-exists"], function (v) {
        var multiclassed = parseInt(v["spellclasses_multiclassed"], 10) || 0,
            setter = {};
        if ((parseInt(v["spellclass-0-exists"], 10) || 0) + (parseInt(v["spellclass-1-exists"], 10) || 0) + (parseInt(v["spellclass-2-exists"], 10) || 0) > 1) {
            if (!multiclassed) {
                setter.spellclasses_multiclassed = 1;
            }
        } else if (multiclassed) {
            setter.spellclasses_multiclassed = 0;
        }
        if (_underscore2.default.size(setter) > 0) {
            setAttrs(setter, _PFConst2.default.silentParams, done);
        } else {
            done();
        }
    });
}
/** updates the ranges at the top for this spellcasting class
*@param {int} spellclassidx 0,1,2 the spell casting tab
*@param {eventinfo} eventInfo unused eventinfo from 'on' method
*@param {bool} force if true update no matter if new ranges are same or not.
*@param {function} callback - to call when done.
*@param {bool} silently if true update with PFConst.silentParams
*/
function updateCasterRanges(spellclassidx, eventInfo, force, callback, silently) {
    var done = function done() {
        if (typeof callback === "function") {
            callback();
        }
    },
        prefix = "spellclass-" + spellclassidx,
        lvlField = prefix + "-level-total",
        closeField = prefix + "-close",
        medField = prefix + "-medium",
        longField = prefix + "-long";
    getAttrs([lvlField, closeField, medField, longField], function (v) {
        var level = parseInt(v[lvlField], 10) || 0,
            closeRng = parseInt(v[closeField], 10) || 0,
            medRng = parseInt(v[medField], 10) || 0,
            longRng = parseInt(v[longField], 10) || 0,
            ranges = {},
            setter = {},
            params = {};
        try {
            ranges = PFUtils.calculateSpellRanges(level);
            if (force || ranges.close !== closeRng || ranges.medium !== medRng || ranges["long"] !== longRng) {
                setter[closeField] = ranges.close;
                setter[medField] = ranges.medium;
                setter[longField] = ranges["long"];
            }
        } catch (err) {
            _exportsLoaderTASTheAaronSheet2.default.error("PFSpellCasterClasses.updateCasterRanges", err);
        } finally {
            if (_underscore2.default.size(setter) > 0) {
                if (silently) {
                    params = _PFConst2.default.silentParams;
                }
                setAttrs(setter, params, done);
            } else {
                done();
            }
        }
    });
}
/** updateConcentration - updates concentration for spellclass
*@param {int} classidx 0,1,2 the spellclass
*@param {eventinfo} eventInfo unused eventinfo from 'on' method
*@param {function} callback - to call when done.
*@param {bool} silently if true update with PFConst.silentParams
*/
function updateConcentration(classidx, eventInfo, callback, silently) {
    //TAS.debug("at PFSpellCasterClasses.updateConcentration");
    SWUtils.updateRowTotal(["Concentration-" + classidx, "spellclass-" + classidx + "-level-total", "Concentration-" + classidx + "-mod", "Concentration-" + classidx + "-misc"], 0, null, false, callback, silently);
}
/*********************************** SPELLS PER DAY section *************************************/
/** updateSaveDCs - update save DCs on left  column of Spells Per Day grid
*@param {int} classidx 0,1,2 the spellclass
*@param {eventinfo} eventInfo unused eventinfo from 'on' method
*@param {function} callback - to call when done.
*@param {bool} silently if true update with PFConst.silentParams
*/
function updateSaveDCs(classidx, eventInfo, callback, silently) {
    var done = _underscore2.default.once(function () {
        if (typeof callback === "function") {
            callback();
        }
    });
    getAttrs(["Concentration-" + classidx + "-mod", "spellclass-" + classidx + "-level-0-savedc"], function (v) {
        var mod = parseInt(v["Concentration-" + classidx + "-mod"], 10) || 0,
            dcLvlZero = 10 + mod,
            currDC = parseInt(v["spellclass-" + classidx + "-level-0-savedc"], 10),
            setter = {},
            params = {},
            i;
        try {
            //if 0 is different then rest are different. if 0 is same, rest are same.
            if (currDC !== dcLvlZero || isNaN(currDC)) {
                setter["spellclass-" + classidx + "-level-0-savedc"] = dcLvlZero;
                for (i = 1; i < 10; i++) {
                    setter["spellclass-" + classidx + "-level-" + i + "-savedc"] = dcLvlZero + i;
                }
            }
        } catch (err) {
            _exportsLoaderTASTheAaronSheet2.default.error("PFSpellCasterClasses.updateSaveDCs", err);
        } finally {
            if (_underscore2.default.size(setter) > 0) {
                if (silently) {
                    params = _PFConst2.default.silentParams;
                }
                setAttrs(setter, params, done);
            } else {
                done();
            }
        }
    });
}
/** updateBonusSpells - updates Bonus Spells for the class
* Uses attribute, not the attribute-mod. So it does not change with ability damage or penalties.
*@param {number} classidx 0,1,2 the spellclass
*@param {eventinfo} eventInfo unused eventinfo from 'on' method
*@param {function} callback - to call when done.
*@param {bool} silently if true update with PFConst.silentParams
*/
function updateBonusSpells(classidx, eventInfo, callback, silently) {
    var done = _underscore2.default.once(function () {
        if (typeof callback === "function") {
            callback();
        }
    }),
        conAbility = "Concentration-" + classidx + "-ability";
    getAttrs([conAbility, "INT", "WIS", "CHA", "STR", "DEX", "CON"], function (v) {
        //eliminate the modifier, we just want @{INT} not @{INT-mod}
        var abilityName = PFUtils.findAbilityInString(v[conAbility]).replace("-mod", ""),
            abilityVal = parseInt(v[abilityName], 10),
            setter = {},
            params = {
            silent: true
        },
            bonusSpells,
            bonusName,
            i,
            prefix = "spellclass-" + classidx + "-level-";
        try {
            if (!isNaN(abilityVal)) {
                if (abilityVal >= 12) {
                    for (i = 1; i < 10; i++) {
                        bonusSpells = Math.floor(Math.max(Math.floor((abilityVal - 10) / 2) + 4 - i, 0) / 4);
                        bonusName = prefix + i + "-bonus";
                        setter[bonusName] = bonusSpells;
                    }
                } else {
                    for (i = 1; i < 10; i++) {
                        bonusName = prefix + i + "-bonus";
                        setter[bonusName] = 0;
                    }
                }
            }
        } catch (err) {
            _exportsLoaderTASTheAaronSheet2.default.error("PFSpellCasterClasses.updateBonusSpells", err);
        } finally {
            if (_underscore2.default.size(setter) > 0) {
                setAttrs(setter, params, done);
            } else {
                done();
            }
        }
    });
}
/* updateMaxSpellsPerDay */
function updateMaxSpellsPerDay(classidx, spelllvl, callback, silently) {
    var done = _underscore2.default.once(function () {
        if (typeof callback === "function") {
            callback();
        }
    });
    getAttrs(["spellclass-" + classidx + "-level-" + spelllvl + "-spells-per-day_max", "spellclass-" + classidx + "-level-" + spelllvl + "-class", "spellclass-" + classidx + "-level-" + spelllvl + "-bonus", "spellclass-" + classidx + "-level-" + spelllvl + "-misc"], function (v) {
        var newCount = 0,
            base = 0,
            rest = 0,
            total = 0,
            curr = 0,
            setter = {};
        base = parseInt(v["spellclass-" + classidx + "-level-" + spelllvl + "-class"], 10);
        curr = parseInt(v["spellclass-" + classidx + "-level-" + spelllvl + "-spells-per-day_max"], 10) || 0;
        if (isNaN(base)) {
            newCount = 0;
        } else {
            rest = (parseInt(v["spellclass-" + classidx + "-level-" + spelllvl + "-bonus"], 10) || 0) + (parseInt(v["spellclass-" + classidx + "-level-" + spelllvl + "-misc"], 10) || 0);
            newCount = base + rest;
        }
        if (newCount !== curr) {
            setter["spellclass-" + classidx + "-level-" + spelllvl + "-spells-per-day_max"] = newCount;
            setAttrs(setter, {}, done);
        } else {
            done();
        }
    });
    //SWUtils.updateRowTotal(["spellclass-" + classidx + "-level-" + spelllvl + "-spells-per-day_max", "spellclass-" + classidx + "-level-" + spelllvl + "-class", "spellclass-" + classidx + "-level-" + spelllvl + "-bonus", "spellclass-" + classidx + "-level-" + spelllvl + "-misc"], 0, [], false, callback, silently);
}
/**  applyConditions - for condition deafened update {SpellFailureNote} on DEFENSE PAGE
* note drain should have already been applied
*@param {function} callback - to call when done.
*@param {bool} silently if true update with PFConst.silentParams
*/
function applyConditions(callback, silently) {
    var done = _underscore2.default.once(function () {
        if (typeof callback === "function") {
            callback();
        }
    });
    //TAS.debug("at PFSpellCasterClasses.applyConditions");
    getAttrs(["condition-Deafened", "SpellFailureNote"], function (v) {
        var setter = {},
            params = {};
        try {
            if (parseInt(v["condition-Deafened"], 10) === 4) {
                if (!v["SpellFailureNote"]) {
                    setter["SpellFailureNote"] = "Yes";
                }
            } else {
                if (v["SpellFailureNote"]) {
                    setter["SpellFailureNote"] = "";
                }
            }
        } catch (err) {
            _exportsLoaderTASTheAaronSheet2.default.error("PFSpellCasterClasses.applyConditions", err);
        } finally {
            if (_underscore2.default.size(setter) > 0) {
                if (silently) {
                    params = _PFConst2.default.silentParams;
                }
                setAttrs(setter, params, done);
            } else {
                done();
            }
        }
    });
}
function recalcOneClass(spellClassIdx, callback, silently) {
    var done = _underscore2.default.once(function () {
        _exportsLoaderTASTheAaronSheet2.default.debug("leaving PFSpells.recalculate.recalcOneClass");
        if (typeof callback === "function") {
            callback();
        }
    }),
        doneOne = _underscore2.default.after(4, done);
    //TAS.debug("at PFSpellCasterClasses.recalcOneClass");
    _underscore2.default.times(10, function (spelllvl) {
        updateMaxSpellsPerDay(spellClassIdx, spelllvl);
    });

    updateConcentration(spellClassIdx, null, doneOne, silently);
    updateSaveDCs(spellClassIdx, null, doneOne, silently);
    updateCasterRanges(spellClassIdx, null, true, doneOne, silently);
    updateBonusSpells(spellClassIdx, null, doneOne, silently);
}
/** updates {spellclass-X-level-total}, sets minimum of 1 if {spellclass-X-level} is > 0
*@param {int} spellclassidx 0,1,2 the spell casting tab
*@param {eventInfo} eventInfo unused eventinfo from 'on' method
*@param {int} classlevel optional override for class level, use this if you know it and sheet attribute might not be updated yet.
*@param {function} callback - to call when done.
*@param {bool} silently if true update with PFConst.silentParams
*/
function updateCasterLevel(spellclassidx, eventInfo, classlevel, callback, silently) {
    var done = _underscore2.default.once(function () {
        _exportsLoaderTASTheAaronSheet2.default.debug("leaving updateCasterLevel " + spellclassidx);
        if (typeof callback === "function") {
            callback();
        }
    });
    getAttrs(["spellclass-" + spellclassidx + "-level", "spellclass-" + spellclassidx + "-level-total", "spellclass-" + spellclassidx + "-level-misc", "buff_CasterLevel-total", "CasterLevel-Penalty", "spellclass-" + spellclassidx + "-exists"], function (v) {
        var baseLevel = classlevel || parseInt(v["spellclass-" + spellclassidx + "-level"], 10) || 0,
            totalLevel = parseInt(v["spellclass-" + spellclassidx + "-level-total"], 10) || 0,
            spellClassExists = parseInt(v["spellclass-" + spellclassidx + "-exists"], 10) || 0,
            casterlevel = 0,
            setter = {},
            recalcAfter = 0,
            params = {};
        try {
            casterlevel = baseLevel + (parseInt(v["spellclass-" + spellclassidx + "-level-misc"], 10) || 0) + (parseInt(v["buff_CasterLevel-total"], 10) || 0) + (parseInt(v["CasterLevel-Penalty"], 10) || 0);
            //if has spells then minimum level is 1 no matter what minuses apply
            if (casterlevel <= 0) {
                if (baseLevel > 0) {
                    casterlevel = 1;
                } else {
                    casterlevel = 0;
                }
            }
            if (casterlevel !== totalLevel) {
                setter["spellclass-" + spellclassidx + "-level-total"] = casterlevel;
                if (totalLevel === 0 && eventInfo) {
                    recalcAfter = 1;
                }
            }
            if (baseLevel > 0) {
                if (spellClassExists === 0) {
                    setter["spellclass-" + spellclassidx + "-exists"] = "1";
                    recalcAfter = 1;
                }
            } else if (spellClassExists === 1) {
                setter["spellclass-" + spellclassidx + "-exists"] = "0";
            }
        } catch (err) {
            _exportsLoaderTASTheAaronSheet2.default.error("PFSpellCasterClasses.updateCasterLevel", err);
        } finally {
            if (_underscore2.default.size(setter) > 0) {
                if (silently) {
                    params = _PFConst2.default.silentParams;
                }
                setAttrs(setter, params, function () {
                    if (recalcAfter) {
                        recalcOneClass(spellclassidx, done, silently);
                    } else {
                        done();
                    }
                });
            } else {
                done();
            }
        }
    });
}
/** updates all 3 caster class levels, usually due to change in buffs or debuffs 
*@param {nothing} dummy - only here so eventhandlers can call it, since spellclass index is in this position.
*@param {eventinfo} eventInfo unused eventinfo from 'on' method
*@param {function} callback - to call when done.
*@param {bool} silently if true update with PFConst.silentParams
*/
function updateCasterLevels(dummy, eventInfo, callback, silently) {
    updateCasterLevel(0, eventInfo, 0, callback, silently);
    updateCasterLevel(1, eventInfo, 0, callback, silently);
    updateCasterLevel(2, eventInfo, 0, callback, silently);
}
/** sets {spellclass-X-name} and {spellclass-X-level} from the class dropdown {spellclass-X}
* called when the class dropdown is changed.
*@param {int} spellclassidx 0,1,2 the spell casting tab
*@param {eventinfo} eventInfo unused eventinfo from 'on' method
*@param {function} callback - to call when done.
*@param {bool} silently if true update with PFConst.silentParams
*/
function setCasterClassFromDropdown(spellclassidx, eventInfo, callback, silently) {
    var done = _underscore2.default.once(function () {
        if (typeof callback === "function") {
            callback();
        }
    }),
        spellclassdropdown = "spellclass-" + spellclassidx,
        spellclasslevel = "spellclass-" + spellclassidx + "-level";
    getAttrs([spellclassdropdown, spellclasslevel], function (va) {
        var classidx = parseInt(va[spellclassdropdown], 10),
            currClassLevel = parseInt(va[spellclasslevel], 10),
            spellclassname,
            classname,
            classlevel;
        try {
            if (isNaN(classidx) || !va[spellclassdropdown] || parseInt(va[spellclassdropdown], 10) === -1) {
                done();
                return;
            }
            spellclassname = "spellclass-" + spellclassidx + "-name";
            classname = "class-" + classidx + "-name";
            classlevel = "class-" + classidx + "-level";
            //if race indicated: use race and HD
            if (classidx === 6) {
                classname = "race";
                classlevel = "npc-hd-num";
            }
            getAttrs([classname, classlevel, spellclassname], function (v) {
                var setter = {},
                    setAny = 0,
                    updateLevel = 0,
                    newClassLevel = parseInt(v[classlevel], 10) || 0;
                try {
                    if (currClassLevel !== newClassLevel || isNaN(currClassLevel)) {
                        setter[spellclasslevel] = newClassLevel;
                        updateLevel = 1;
                    }
                    if (v[classname] && v[classname] !== v[spellclassname]) {
                        setter[spellclassname] = v[classname];
                    }
                } catch (err) {
                    _exportsLoaderTASTheAaronSheet2.default.error("PFSpellCasterClasses.setCasterClassFromDropdown", err);
                } finally {
                    if (_underscore2.default.size(setter) > 0) {
                        setAttrs(setter, {
                            silent: true
                        }, done);
                        if (updateLevel) {
                            updateCasterLevel(spellclassidx, eventInfo, newClassLevel);
                        }
                    } else {
                        done();
                    }
                }
            });
        } catch (errOuter) {
            _exportsLoaderTASTheAaronSheet2.default.error("PFSpellCasterClasses.setCasterClassFromDropdown outer", errOuter);
            done();
        }
    });
}
/** update level on SPELL page when updated on CLASS page, but not vice versa
*@param {int} classidx 0..6 the row on the CLASS GRID starting with 0 to grab level from, or 6 if {npc-hd-num}
*@param {eventinfo} eventInfo unused eventinfo from 'on' method
*@param {bool} force if true update no matter if new ranges are same or not.
*@param {function} callback - to call when done.
*@param {bool} silently if true update with PFConst.silentParams
*/
function updateCasterFromClassLevel(classidx, eventInfo, force, callback, silently) {
    var done = _underscore2.default.once(function () {
        if (typeof callback === "function") {
            callback();
        }
    }),
        spellclassdropdown0 = "spellclass-0",
        spellclassdropdown1 = "spellclass-1",
        spellclassdropdown2 = "spellclass-2";
    if (classidx === "npc-hd-num") {
        classidx = 6;
    } else {
        classidx = parseInt(classidx, 10) || 0;
    }
    getAttrs([spellclassdropdown0, spellclassdropdown1, spellclassdropdown2], function (va) {
        var spellclassidx, spellclasslevelField, classlevelField, prefix, classNameField;
        if (parseInt(va[spellclassdropdown0], 10) === classidx) {
            spellclassidx = 0;
        } else if (parseInt(va[spellclassdropdown1], 10) === classidx) {
            spellclassidx = 1;
        } else if (parseInt(va[spellclassdropdown2], 10) === classidx) {
            spellclassidx = 2;
        } else {
            return;
        }
        prefix = "spellclass-" + spellclassidx;
        spellclasslevelField = prefix + "-level";
        classlevelField = "class-" + classidx + "-level";
        classNameField = "class-" + classidx + "-name";
        getAttrs([spellclasslevelField, classlevelField, classNameField], function (v) {
            var setter = {},
                newCasterLevel = parseInt(v[classlevelField], 10) || 0,
                currCasterLevel = parseInt(v[spellclasslevelField], 10);
            if (newCasterLevel !== currCasterLevel || isNaN(currCasterLevel) || force) {
                setter[spellclasslevelField] = newCasterLevel;
                setter[prefix + "-name"] = v[classNameField];
                setAttrs(setter, {
                    silent: true
                });
                updateCasterLevel(classidx, eventInfo, newCasterLevel);
            }
        });
    });
}
function migrate(callback, oldversion) {
    //TAS.debug("At PFSpellCasterClasses.migrate");
    PFMigrate.migrateUsesSpellFlag(callback);
}
function recalculate(callback, silently, oldversion) {
    var done = _underscore2.default.once(function () {
        _exportsLoaderTASTheAaronSheet2.default.info("leaving PFSpellCasterClasses.recalculate");
        if (typeof callback === "function") {
            callback();
        }
    }),
        recalcTopSection = function recalcTopSection(callback, silently) {
        var done = _underscore2.default.once(function () {
            _exportsLoaderTASTheAaronSheet2.default.debug("leaving PFSpellCasterClasses.recalculate.recalcTopSection");
            if (typeof callback === "function") {
                callback();
            }
        }),
            doneOne = _underscore2.default.after(3, done);
        //TAS.debug("at PFSpellCasterClasses.recalculate.recalcTopSection");
        _underscore2.default.each(_PFConst2.default.spellClassIndexes, function (spellClassIdx) {
            try {
                setCasterClassFromDropdown(spellClassIdx, null, function () {
                    updateCasterLevel(spellClassIdx, null, 0, function () {
                        ifSpellClassExists(spellClassIdx, function () {
                            recalcOneClass(spellClassIdx, doneOne, silently);
                        }, doneOne);
                    }, silently);
                }, silently);
            } catch (err) {
                _exportsLoaderTASTheAaronSheet2.default.error("PFSpellCasterClasses.recalculate_recalcTopSection", err);
                doneOne();
            }
        });
    },
        finishAndLeave = _underscore2.default.once(function () {
        updateMultiClassedCasterFlag(null, null, function () {
            PFSpells.recalculate(done, silently, oldversion);
        });
    }),
        callTopSection = _underscore2.default.once(function () {
        recalcTopSection(finishAndLeave, silently);
    }),
        callApplyConditions = _underscore2.default.once(function () {
        applyConditions(callTopSection, silently);
    });
    migrate(function () {
        callApplyConditions();
    }, oldversion);
}
var events = {
    // events for updates to top of class page, each one calls isSpellClassExists
    spellcastingClassEventsAuto: {
        "change:concentration-REPLACE-mod": [updateBonusSpells, updateSaveDCs, updateConcentration, PFSpells.updateSpellsCasterAbilityRelated],
        "change:spellclass-REPLACE-level-total": [updateConcentration, updateCasterRanges, PFSpells.updateSpellsCasterLevelRelated],
        "change:spellclass-REPLACE-SP-mod": [PFSpells.updateSpellsCasterLevelRelated]
    },
    spellcastingClassEventsPlayer: {
        "change:concentration-REPLACE-misc": [updateConcentration, PFSpells.updateSpellsCasterLevelRelated],
        "change:concentration-REPLACE-def": [PFSpells.updateSpellsCasterLevelRelated]
    },
    // events for updates to top of class page even if no spellcasting class exists
    spellcastingClassEventsIgnoreLevel: {
        "change:spellclass-REPLACE-level-misc": [updateCasterLevel],
        "change:spellclass-REPLACE": [setCasterClassFromDropdown],
        "change:spellclass-REPLACE-level": [updateCasterLevel, updateMultiClassedCasterFlag],
        "change:buff_CasterLevel-total change:condition-Drained change:CasterLevel-Penalty": [updateCasterLevels]
    },
    //events for updateBonusSpells section CLASSIDX is the 0-2 classes, SPELLLEVEL is 0-9
    spellcastingClassEventsPerSpellLevel: "change:spellclass-CLASSIDX-level-SPELLLEVEL-class change:spellclass-CLASSIDX-level-SPELLLEVEL-bonus change:spellclass-CLASSIDX-level-SPELLLEVEL-misc"
};
function registerEventHandlers() {
    //spellclass section (3 tabs at top of spell page)
    _underscore2.default.each(_PFConst2.default.spellClassIndexes, function (spellClassIdx) {
        var numberIdx = parseInt(spellClassIdx, 10) || 0;
        on("change:Concentration-" + numberIdx + "-ability", _exportsLoaderTASTheAaronSheet2.default.callback(function eventChangeSpellDropdown(eventInfo) {
            _exportsLoaderTASTheAaronSheet2.default.debug("caught " + eventInfo.sourceAttribute + " event: " + eventInfo.sourceType);
            PFUtilsAsync.setDropdownValue("Concentration-" + numberIdx + "-ability", "Concentration-" + numberIdx + "-mod");
        }));
        _underscore2.default.each(events.spellcastingClassEventsPlayer, function (functions, event) {
            var eventToWatch = event.replace(/REPLACE/g, numberIdx);
            _underscore2.default.each(functions, function (methodToCall) {
                on(eventToWatch, _exportsLoaderTASTheAaronSheet2.default.callback(function eventSpellcasterClassSpecificUpdatePlayerOnly(eventInfo) {
                    if (eventInfo.sourceType === "player" || eventInfo.sourceType === "api") {
                        _exportsLoaderTASTheAaronSheet2.default.debug("caught " + eventInfo.sourceAttribute + " event: " + eventInfo.sourceType);
                        ifSpellClassExists(numberIdx, function () {
                            methodToCall(numberIdx, eventInfo);
                        });
                    }
                }));
            });
        });
        _underscore2.default.each(events.spellcastingClassEventsAuto, function (functions, event) {
            var eventToWatch = event.replace(/REPLACE/g, numberIdx);
            _underscore2.default.each(functions, function (methodToCall) {
                on(eventToWatch, _exportsLoaderTASTheAaronSheet2.default.callback(function eventSpellcasterClassSpecificUpdateAuto(eventInfo) {
                    if (eventInfo.sourceType === "sheetworker") {
                        _exportsLoaderTASTheAaronSheet2.default.debug("caught " + eventInfo.sourceAttribute + " event: " + eventInfo.sourceType);
                        ifSpellClassExists(numberIdx, function () {
                            methodToCall(numberIdx, eventInfo);
                        });
                    }
                }));
            });
        });
        //ignore level means do not call "ifSpellClassExists" first
        _underscore2.default.each(events.spellcastingClassEventsIgnoreLevel, function (functions, event) {
            var eventToWatch = event.replace(/REPLACE/g, numberIdx);
            _underscore2.default.each(functions, function (methodToCall) {
                on(eventToWatch, _exportsLoaderTASTheAaronSheet2.default.callback(function eventSpellcasterClassUpdate(eventInfo) {
                    _exportsLoaderTASTheAaronSheet2.default.debug("caught " + eventInfo.sourceAttribute + " event: " + eventInfo.sourceType);
                    methodToCall(numberIdx, eventInfo);
                }));
            });
        });
        //spells per day
        _underscore2.default.each(PFSpells.spellLevels, function (spellLevel) {
            var spellNumber = parseInt(spellLevel, 10),
                eventToWatch = events.spellcastingClassEventsPerSpellLevel.replace(/CLASSIDX/g, numberIdx).replace(/SPELLLEVEL/g, spellNumber);
            on(eventToWatch, _exportsLoaderTASTheAaronSheet2.default.callback(function eventSpellsPerDay(eventInfo) {
                _exportsLoaderTASTheAaronSheet2.default.debug("caught " + eventInfo.sourceAttribute + " event: " + eventInfo.sourceType);
                ifSpellClassExists(numberIdx, function () {
                    updateMaxSpellsPerDay(numberIdx, spellNumber);
                });
            }));
        });
    }); //end of spell classes
}
registerEventHandlers();
_PFLog.PFConsole.log('PFSpellCasterClasses module loaded');
_PFLog.PFLog.modulecount++;

/***/ }),
/* 22 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
	value: true
});
exports.migrate = migrate;
exports.recalculate = recalculate;

var _underscore = __webpack_require__(2);

var _underscore2 = _interopRequireDefault(_underscore);

var _PFLog = __webpack_require__(0);

var _exportsLoaderTASTheAaronSheet = __webpack_require__(1);

var _exportsLoaderTASTheAaronSheet2 = _interopRequireDefault(_exportsLoaderTASTheAaronSheet);

var _SWUtils = __webpack_require__(4);

var SWUtils = _interopRequireWildcard(_SWUtils);

var _PFConst = __webpack_require__(3);

var _PFConst2 = _interopRequireDefault(_PFConst);

var _PFUtils = __webpack_require__(5);

var PFUtils = _interopRequireWildcard(_PFUtils);

var _PFMigrate = __webpack_require__(6);

var PFMigrate = _interopRequireWildcard(_PFMigrate);

var _PFDefense = __webpack_require__(12);

var PFDefense = _interopRequireWildcard(_PFDefense);

var _PFSize = __webpack_require__(19);

var PFSize = _interopRequireWildcard(_PFSize);

var _PFUtilsAsync = __webpack_require__(8);

var PFUtilsAsync = _interopRequireWildcard(_PFUtilsAsync);

var _PFInitiative = __webpack_require__(29);

var PFInitiative = _interopRequireWildcard(_PFInitiative);

var _PFSkills = __webpack_require__(20);

var PFSkills = _interopRequireWildcard(_PFSkills);

var _PFEncumbrance = __webpack_require__(27);

var PFEncumbrance = _interopRequireWildcard(_PFEncumbrance);

var _PFInventory = __webpack_require__(30);

var PFInventory = _interopRequireWildcard(_PFInventory);

var _PFAbilityScores = __webpack_require__(10);

var PFAbilityScores = _interopRequireWildcard(_PFAbilityScores);

var _PFBuffs = __webpack_require__(24);

var PFBuffs = _interopRequireWildcard(_PFBuffs);

var _PFSaves = __webpack_require__(18);

var PFSaves = _interopRequireWildcard(_PFSaves);

var _PFHealth = __webpack_require__(17);

var PFHealth = _interopRequireWildcard(_PFHealth);

var _PFChecks = __webpack_require__(16);

var PFChecks = _interopRequireWildcard(_PFChecks);

var _PFAbility = __webpack_require__(15);

var PFAbility = _interopRequireWildcard(_PFAbility);

var _PFNPC = __webpack_require__(35);

var PFNPC = _interopRequireWildcard(_PFNPC);

var _PFAttackGrid = __webpack_require__(7);

var PFAttackGrid = _interopRequireWildcard(_PFAttackGrid);

var _PFAttackOptions = __webpack_require__(11);

var PFAttackOptions = _interopRequireWildcard(_PFAttackOptions);

var _PFAttacks = __webpack_require__(23);

var PFAttacks = _interopRequireWildcard(_PFAttacks);

var _PFFeatures = __webpack_require__(28);

var PFFeatures = _interopRequireWildcard(_PFFeatures);

var _PFSpells = __webpack_require__(14);

var PFSpells = _interopRequireWildcard(_PFSpells);

var _PFSpellCasterClasses = __webpack_require__(21);

var PFSpellCasterClasses = _interopRequireWildcard(_PFSpellCasterClasses);

var _PFPsionic = __webpack_require__(37);

var PFPsionic = _interopRequireWildcard(_PFPsionic);

var _PFMythic = __webpack_require__(34);

var PFMythic = _interopRequireWildcard(_PFMythic);

var _PFClassRaceGrid = __webpack_require__(25);

var PFClassRaceGrid = _interopRequireWildcard(_PFClassRaceGrid);

var _PFConditions = __webpack_require__(33);

var PFConditions = _interopRequireWildcard(_PFConditions);

var _PFNPCParser = __webpack_require__(36);

var PFNPCParser = _interopRequireWildcard(_PFNPCParser);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

//import * as PFMacros from './PFMacros';
//import * as PFMenus from './PFMenus';
function expandAll() {
	getAttrs(["expandall"], function (v) {
		var skilltab = "4",
		    setter = {};
		if (parseInt(v["expandall"], 10)) {
			//set expandall to 0
			//set tabs to "all"
			//set conditions and buffs to "show"
			//set all others to default (which is "show")
			setAttrs({
				"expandall": "0",
				pagetab: "99",
				abilities_tab: "99",
				skills_tab: "99",
				spellclass_tab: "99",
				spells_tab: "99",
				npc_spellclass_tab: "0",
				equipment_tab: "99",
				"conditions-show": "1",
				"buffstop-show": "1",
				"character-details-show": "",
				"ability-scores-show": "",
				"health-and-wounds-show": "",
				"initiative-and-speeds-show": "",
				"experience-and-hero-points-show": "",
				"class-info-show": "",
				"mythic-info-show": "",
				"psionic-info-show": "",
				"abilities-show": "",
				"defense-values-show": "",
				"special-defenses-show": "",
				"armor-penalties-show": "",
				"saves-show": "",
				"armor-shield-show": "",
				"defense-notes-show": "",
				"attack-bonuses-show": "",
				"attack-notes-show": "",
				"attack-options-show": "",
				"attacks-show": "",
				"skills-show": "",
				"skill_options-show": "",
				"skill-ranks-show": "",
				"skill-notes-show": "",
				"artistry-show": "",
				"craft-show": "",
				"knowledge-show": "",
				"lore-show": "",
				"perform-show": "",
				"profession-show": "",
				"misc-show": "",
				"currency-show": "",
				"inventory-show": "",
				"carried-weight-show": "",
				"loads-show": "",
				"domains0-show": "",
				"spellsPerDay0-show": "",
				"spell_ranges0-show": "",
				"domains1-show": "",
				"spellsPerDay1-show": "",
				"spell_ranges1-show": "",
				"domains2-show": "",
				"spellsPerDay2-show": "",
				"spell_ranges2-show": "",
				"spelloptions-show": "",
				"newspells-show": "",
				"npc-quick_stats-show": "",
				"npc-defense-show": "",
				"options_defense_options-show": "",
				"npc-offense-show": "",
				"npc-speed-show": "",
				"npc-space-show": "",
				"npc-special-attacks-show": "",
				"npc-repeating_weapons-show": "",
				"npc-spell-like-abilities-show": "",
				"npc-spells-show": "",
				"npc-tactics-show": "",
				"npc-before-combat-show": "",
				"npc-during-combat-show": "",
				"npc-morale-show": "",
				"npc-base-statistics-show": "",
				"npc-statistics-show": "",
				"npc-feats-show": "",
				"npc-mythic-feats-show": "",
				"npc-skills-show": "",
				"npc-cgear-show": "",
				"npc-ogear-show": "",
				"npc-special-abilities-show": "",
				"header-image-show": "",
				"pathfinder-unchained-show": "",
				"pathfinder-mythic-adventures-show": "",
				"pathfinder-psionics-show": "",
				"roll-template-info-show": "",
				"sheet-config-show": "",
				"sheetcleanup-show": "",
				"buff-min-show": "",
				"buff-expand-show": "",
				"buff-column-show": "",
				"class-ability-min-show": "",
				"class-ability-expand-show": "",
				"class-ability-column-show": "",
				"feat-min-show": "",
				"feat-expand-show": "",
				"feat-column-show": "",
				"racial-trait-min-show": "0",
				"racial-trait-expand-show": "",
				"racial-trait-column-show": "",
				"traits-min-show": "0",
				"traits-expand-show": "",
				"traits-column-show": "",
				"mythic-min-show": "0",
				"mythic-expand-show": "",
				"mythic-column-show": "",
				"mythic-feats-min-show": "",
				"mythic-feats-expand-show": "",
				"mythic-feats-column-show": "",
				"weapon-min-show": "",
				"weapon-expand-show": "",
				"weapon-column-show": "",
				"item-min-show": "",
				"item-expand-show": "",
				"item-column-show": "",
				"newspells-min-show": "",
				"newspells-expand-show": "",
				"newspells-column-show": "",
				"npcweapon-min-show": "",
				"npcweapon-expand-show": "",
				"npcweapon-column-show": "",
				"npc-spell-like-abilities-min-show": "",
				"npc-spell-like-abilities-expand-show": "",
				"npc-spell-like-abilities-column-show": "",
				"npcnewspells-min-show": "",
				"npcnewspells-expand-show": "",
				"npcnewspells-column-show": "",
				"npcfeat-min-show": "",
				"npcfeat-expand-show": "",
				"npcfeat-column-show": "",
				"npcmythic-feats-min-show": "",
				"npcmythic-feats-expand-show": "",
				"npcmythic-feats-column-show": "",
				"npc-special-abilities-min-show": "",
				"npc-special-abilities-expand-show": "",
				"npc-special-abilities-column-show": ""
			});
			//now go through repeating sections and expand those to be sure users can see them.
			_underscore2.default.each(_PFConst2.default.repeatingSections, function (section) {
				var rsection = "repeating_" + section;
				getSectionIDs(rsection, function (ids) {
					var setter = _underscore2.default.reduce(ids, function (memo, id) {
						var prefix = rsection + "_" + id + "_";
						switch (section) {
							case 'weapon':
								memo[prefix + "add-damage-show"] = "";
								memo[prefix + "iterative-attacks-show"] = "";
								memo[prefix + "macro-text-show"] = "";
								break;
							case 'buff':
								memo[prefix + "options-show"] = "";
								memo[prefix + "description-show"] = "";
								break;
							case 'spells':
								memo[prefix + "spell-misc-show"] = "";
								memo[prefix + "description-show"] = "";
								memo[prefix + "macro-text-show"] = "";
								break;
							case 'class-ability':
							case 'feat':
							case 'racial-trait':
							case 'trait':
							case 'mythic-ability':
							case 'mythic-feat':
							case 'item':
								memo[prefix + "description-show"] = "";
								memo[prefix + "macro-text-show"] = "";
								break;
							case 'npc-spell-like-abilities':
								memo[prefix + "macro-text-show"] = "";
								break;
						}
						memo[prefix + "row-show"] = "";
						memo[prefix + "ids-show"] = "";
						return memo;
					}, {});
					setAttrs(setter, {
						silent: true
					});
				});
			});
		}
	});
}

/** Sets any values if sheet created brand new. Makes sure all migrations up to date.
* makes sure NPC value set. 
*/
function setupNewSheet(callback) {
	var done = _underscore2.default.once(function () {
		setAttrs({ 'is_newsheet': 0, 'is_v1': 1, 'use_advanced_options': 0, 'PFSheet_Version': String(_PFConst2.default.version.toFixed(2)) }, _PFConst2.default.silentParams, function () {
			if (typeof callback === "function") {
				callback();
			}
		});
	});

	getAttrs(['is_npc', 'set_pfs'], function (v) {
		var isNPC = parseInt(v.is_npc, 10) || 0,
		    isPFS = parseInt(v.set_pfs, 10) || 0;
		PFMigrate.setAllMigrateFlags(function () {
			if (isNPC) {
				PFNPC.setToNPC(done);
			} else if (isPFS) {
				PFHealth.setToPFS(done);
			} else {
				done();
			}
		});
	});
}
function recalcExpressions(callback, silently, oldversion) {
	var countEqs = _underscore2.default.size(_PFConst2.default.equationMacros),
	    done = _underscore2.default.once(function () {
		_exportsLoaderTASTheAaronSheet2.default.debug("leaving PFSheet.recalcExpressions");
		if (typeof callback === "function") {
			callback();
		}
	}),
	    doneOne = _underscore2.default.after(countEqs, done);
	try {
		_underscore2.default.each(_PFConst2.default.equationMacros, function (writeField, readField) {
			try {
				SWUtils.evaluateAndSetNumber(readField, writeField, 0, doneOne, silently);
			} catch (err) {
				_exportsLoaderTASTheAaronSheet2.default.error("PFSheet.recalcExpressions", err);
				doneOne();
			}
		});
	} catch (err2) {
		_exportsLoaderTASTheAaronSheet2.default.error("PFSheet.recalcExpressions OUTER wtf how did this happen?", err2);
	} finally {
		done();
	}
}
function recalcDropdowns(callback, silently, oldversion) {
	var countEqs = _underscore2.default.size(_PFConst2.default.dropdowns),
	    done = _underscore2.default.once(function () {
		if (typeof callback === "function") {
			callback();
		}
	}),
	    doneOne = _underscore2.default.after(countEqs, done);
	try {
		_underscore2.default.each(_PFConst2.default.dropdowns, function (writeField, readField) {
			try {
				PFUtilsAsync.setDropdownValue(readField, writeField, doneOne, silently);
			} catch (err) {
				_exportsLoaderTASTheAaronSheet2.default.error("PFSheet.recalcDropdowns", err);
				doneOne();
			}
		});
	} catch (err2) {
		_exportsLoaderTASTheAaronSheet2.default.error("PFSheet.recalcDropdowns OUTER wtf how did this happen?", err2);
	} finally {
		done();
	}
}
function migrate(oldversion, callback, errorCallback) {
	var done = _underscore2.default.once(function () {
		_exportsLoaderTASTheAaronSheet2.default.debug("leaving PFSheet.migrate");
		if (typeof callback === "function") {
			callback();
		}
	}),
	    errorDone = _underscore2.default.once(function () {
		_exportsLoaderTASTheAaronSheet2.default.warn("leaving migrate ERROR UPGRADE NOT FINISHED");
		if (typeof errorCallback === "function") {
			errorCallback();
		} else {
			done();
		}
	}),
	    doneOne;
	try {
		//don't need to check if oldversion > 0 since this is only called if it is.
		_exportsLoaderTASTheAaronSheet2.default.debug("At PFSheet.migrate from oldversion:" + oldversion);
		if (oldversion < 1.0) {
			doneOne = _underscore2.default.after(7, function () {
				_exportsLoaderTASTheAaronSheet2.default.info("we finished calling all the migrates");
				done();
			});
			PFMigrate.migrateConfigFlags(_exportsLoaderTASTheAaronSheet2.default.callback(function () {
				PFInventory.migrate(doneOne, oldversion);
				PFSkills.migrate(doneOne, oldversion);
				PFHealth.migrate(doneOne, oldversion);
				PFAttacks.migrate(doneOne, oldversion);
				PFAbility.migrate(doneOne, oldversion);
				PFFeatures.migrate(doneOne, oldversion);
				PFSpells.migrate(doneOne, oldversion);
			}), oldversion);
		} else if (oldversion < 1.17) {
			if (oldversion < 1.02) {
				PFAbility.migrate(null, oldversion);
				PFFeatures.migrate(null, oldversion);
			}
			if (oldversion < 1.05) {
				PFAttackOptions.resetOptions();
			}
			if (oldversion < 1.07) {
				PFInventory.migrate(null, oldversion);
			}
			if (oldversion < 1.10) {
				PFMigrate.migrateAbilityListFlags();
				PFFeatures.migrate(null, oldversion);
			}
			if (oldversion < 1.12) {
				PFAbility.migrate(null, oldversion);
			}
			if (oldversion < 1.17) {
				PFInventory.migrate(function () {
					PFInventory.resetCommandMacro();
				});
			}
		} else {
			if (oldversion < 1.18) {
				//future updates here. any above will recalc whole sheet after callback
				PFInitiative.recalculate(null, false, oldversion);
				PFHealth.recalculate(null, false, oldversion);
				PFMigrate.migrateSpellPointFlag(null, oldversion);
			}
			if (oldversion < 1.19) {
				PFAttackGrid.setTopMacros();
			}
			if (oldversion < 1.20) {
				PFHealth.recalculate();
				PFSpells.resetSpellsTotals(null, null, null, true);
			}
			if (oldversion < 1.40) {
				PFMigrate.migrateWhisperDropdowns();
				PFInventory.resetCommandMacro();
				PFAttackGrid.resetCommandMacro();
				PFSkills.resetCommandMacro();
				PFAbility.resetCommandMacro();
				PFFeatures.resetCommandMacro();
				PFAttacks.recalculate();
				PFClassRaceGrid.setHitPoints();
			}
		}
	} catch (err) {
		_exportsLoaderTASTheAaronSheet2.default.error("PFSheet.migrate", err);
		//errorDone();
	} finally {
		done();
	}
}
function recalculateParallelModules(callback, silently, oldversion) {
	var done = _underscore2.default.once(function () {
		_exportsLoaderTASTheAaronSheet2.default.debug("leaving PFSheet.recalculateParallelModules");
		if (typeof callback === "function") {
			callback();
		}
	}),
	    parallelRecalcFuncs = [PFSpellCasterClasses.recalculate, PFSaves.recalculate, PFFeatures.recalculate, PFPsionic.recalculate, PFSkills.recalculate, PFAbility.recalculate, PFInitiative.recalculate, PFAttacks.recalculate],
	    numberModules = _underscore2.default.size(parallelRecalcFuncs),
	    doneOneModuleInner = _underscore2.default.after(numberModules, done),
	    curr = 0,
	    currstarted = 0,
	    doneOneModule = function doneOneModule() {
		curr++;
		_exportsLoaderTASTheAaronSheet2.default.info("PFSheet.recalculateParallelModules, finished " + curr + " modules");
		doneOneModuleInner();
	};

	_exportsLoaderTASTheAaronSheet2.default.debug("at recalculateParallelModules! there are " + numberModules + " modules");
	try {
		_underscore2.default.each(parallelRecalcFuncs, function (methodToCall) {
			try {
				currstarted++;
				_exportsLoaderTASTheAaronSheet2.default.info("starting " + currstarted + " parallel modules");
				methodToCall(doneOneModule, silently, oldversion);
			} catch (err) {
				_exportsLoaderTASTheAaronSheet2.default.error("PFSheet.recalculateParallelModules", err);
				doneOneModule();
			}
		});
	} catch (err2) {
		_exportsLoaderTASTheAaronSheet2.default.error("PFSheet.recalculateParallelModules OUTER error!", err2);
		done();
	}
}
function recalculateDefenseAndEncumbrance(callback, silently, oldversion) {
	var done = _underscore2.default.once(function () {
		_exportsLoaderTASTheAaronSheet2.default.debug("leaving PFSheet.recalculateDefenseAndEncumbrance");
		if (typeof callback === "function") {
			callback();
		}
	}),
	    callEncumbrance = function callEncumbrance() {
		PFEncumbrance.recalculate(done, silently, oldversion);
	},
	    doneBeforeEncumbrance = _underscore2.default.after(2, callEncumbrance);
	try {
		PFInventory.recalculate(doneBeforeEncumbrance, silently, oldversion);
		PFDefense.recalculate(doneBeforeEncumbrance, silently, oldversion);
	} catch (err) {
		_exportsLoaderTASTheAaronSheet2.default.error("pfsheet.recalculateDefenseAndEncumbrance", err);
		callEncumbrance();
	}
}
function recalculateCore(callback, silently, oldversion) {
	var done = _underscore2.default.once(function () {
		_exportsLoaderTASTheAaronSheet2.default.debug("leaving PFSheet.recalculateCore");
		if (typeof callback === "function") {
			callback();
		}
	}),
	    sizeOnce = _underscore2.default.once(function () {
		PFSize.recalculate(done, silently, oldversion);
	}),
	    healthOnce = _underscore2.default.once(function () {
		PFHealth.recalculate(sizeOnce, silently, oldversion);
	}),
	    npcOnce = _underscore2.default.once(function () {
		PFNPC.recalculate(healthOnce, silently, oldversion);
	}),
	    mythicOnce = _underscore2.default.once(function () {
		PFMythic.recalculate(npcOnce, silently, oldversion);
	}),
	    expressionsOnce = _underscore2.default.once(function () {
		recalcExpressions(mythicOnce, silently, oldversion);
	}),
	    dropdownsOnce = _underscore2.default.once(function () {
		recalcDropdowns(expressionsOnce, silently, oldversion);
	}),
	    conditioncheckOnce = _underscore2.default.once(function () {
		PFChecks.applyConditions(dropdownsOnce, silently, oldversion);
	}),
	    classOnce = _underscore2.default.once(function () {
		PFClassRaceGrid.recalculate(conditioncheckOnce, silently, oldversion);
	}),
	    abilityScoresOnce = _underscore2.default.once(function () {
		PFAbilityScores.recalculate(classOnce, silently, oldversion);
	}),
	    abilityAffectingConditionsOnce = _underscore2.default.once(function () {
		PFConditions.recalculate(abilityScoresOnce, silently, oldversion);
	}),
	    buffsOnce = _underscore2.default.once(function () {
		PFBuffs.recalculate(abilityAffectingConditionsOnce, silently, oldversion);
	});

	PFMigrate.migrateConfigFlags(buffsOnce, oldversion);

	//TAS.debug("at recalculateCore!!!!");
}
/** recalculate - all pages in sheet!  
*@param {number} oldversion the current version attribute
*@param {function} callback when done if no errors
*@param {function} errorCallback  call this if we get an error
*/
function recalculate(oldversion, callback, silently) {
	var done = function done() {
		_exportsLoaderTASTheAaronSheet2.default.info("leaving PFSheet.recalculate");
		if (typeof callback === "function") {
			callback();
		}
	},
	    callParallel = _exportsLoaderTASTheAaronSheet2.default.callback(function callRecalculateParallelModules() {
		recalculateParallelModules(_exportsLoaderTASTheAaronSheet2.default.callback(done), silently, oldversion);
	}),
	    callEncumbrance = _exportsLoaderTASTheAaronSheet2.default.callback(function callRecalculateDefenseAndEncumbrance() {
		recalculateDefenseAndEncumbrance(_exportsLoaderTASTheAaronSheet2.default.callback(callParallel), silently, oldversion);
	});
	silently = true;
	recalculateCore(callEncumbrance, silently, oldversion);
}
/* checkForUpdate looks at current version of page in PFSheet_Version and compares to code PFConst.version
*  calls recalulateSheet if versions don't match or if recalculate button was pressed.*/
function checkForUpdate() {
	var done = function done() {
		setAttrs({ recalc1: 0, migrate1: 0, is_newsheet: 0 }, _PFConst2.default.silentParams);
	},
	    errorDone = _underscore2.default.once(function () {
		_exportsLoaderTASTheAaronSheet2.default.warn("leaving checkForUpdate ERROR UPGRADE NOT FINISHED DO NOT RESET VERSION");
		setAttrs({ recalc1: 0, migrate1: 0 }, { silent: true });
	});
	getAttrs(['PFSheet_Version', 'migrate1', 'recalc1', 'is_newsheet', 'is_v1', 'hp', 'hp_max', 'npc-hd', 'npc-hd-num', 'race', 'class-0-name', 'npc-type', 'level'], function (v) {
		var setter = {},
		    setAny = 0,
		    migrateSheet = false,
		    newSheet = false,
		    recalc = false,
		    currVer = parseFloat(v.PFSheet_Version, 10) || 0,
		    setUpgradeFinished = function setUpgradeFinished() {
			setAttrs({ recalc1: 0, migrate1: 0, is_newsheet: 0,
				character_sheet: 'Pathinder_Neceros v' + String(_PFConst2.default.version),
				PFSheet_Version: String(_PFConst2.default.version.toFixed(2)) }, _PFConst2.default.silentParams, function () {
				if (currVer < 1.17) {
					recalculate(currVer, null, false);
				}
			});
		};
		_exportsLoaderTASTheAaronSheet2.default.notice("Attributes at version: " + currVer);
		if (parseInt(v["recalc1"], 10)) {
			//HIT RECALC
			recalc = true;
		}
		if (parseInt(v["migrate1"], 10)) {
			migrateSheet = true;
		}
		if (parseInt(v["is_newsheet"], 10) || currVer === 0 && (parseInt(v.is_v1, 10) || !(parseInt(v.hp, 10) || parseInt(v.hp_max, 10) || parseInt(v['npc-hd'], 10) || parseInt(v['npc-hd-num'], 10) || v.race || v['class-0-name'] || v['npc-type'] || parseInt(v['level'], 10)))) {
			//NEW SHEET:
			newSheet = true;
		}
		if (currVer !== _PFConst2.default.version) {
			migrateSheet = true;
		}
		if (newSheet) {
			setupNewSheet(done);
		} else if (migrateSheet) {
			migrate(currVer, setUpgradeFinished, errorDone);
		} else if (recalc) {
			currVer = -1;
			recalculate(currVer, done, true);
		} else {
			done();
		}
	});
}
function registerEventHandlers() {
	on("sheet:opened", _exportsLoaderTASTheAaronSheet2.default.callback(function eventSheetOpened() {
		//eventInfo has undefined values for this event.
		checkForUpdate();
	}));
	on("change:recalc1 change:migrate1", _exportsLoaderTASTheAaronSheet2.default.callback(function eventRecaluateSheet(eventInfo) {
		_exportsLoaderTASTheAaronSheet2.default.debug("caught " + eventInfo.sourceAttribute + " event: " + eventInfo.sourceType);
		if (eventInfo.sourceType === "player" || eventInfo.sourceType === "api") {
			checkForUpdate();
		}
	}));
	on("change:expandall", function (eventInfo) {
		_exportsLoaderTASTheAaronSheet2.default.debug("caught " + eventInfo.sourceAttribute + " event: " + eventInfo.sourceType);
		if (eventInfo.sourceType === "player" || eventInfo.sourceType === "api") {
			expandAll();
		}
	});
	//GENERIC DROPDOWNS
	_underscore2.default.each(_PFConst2.default.dropdowns, function (write, read) {
		on("change:" + read, _exportsLoaderTASTheAaronSheet2.default.callback(function eventGenericDropdowns(eventInfo) {
			_exportsLoaderTASTheAaronSheet2.default.debug("caught " + eventInfo.sourceAttribute + " event: " + eventInfo.sourceType);
			PFUtilsAsync.setDropdownValue(read, write);
		}));
	});
	//GENERIC EQUATIONS
	_underscore2.default.each(_PFConst2.default.equationMacros, function (write, read) {
		on("change:" + read, _exportsLoaderTASTheAaronSheet2.default.callback(function eventGenericEquationMacro(eventInfo) {
			_exportsLoaderTASTheAaronSheet2.default.debug("caught " + eventInfo.sourceAttribute + " event: " + eventInfo.sourceType);
			SWUtils.evaluateAndSetNumber(read, write);
		}));
	});
	on("change:repeating_weapon:source-item", _exportsLoaderTASTheAaronSheet2.default.callback(function eventUpdateAttackSourceItem(eventInfo) {
		if (eventInfo.sourceType === "player" || eventInfo.sourceType === "api") {
			_exportsLoaderTASTheAaronSheet2.default.debug("caught " + eventInfo.sourceAttribute + " event: " + eventInfo.sourceType);
			getAttrs([eventInfo.sourceAttribute], function (v) {
				var weaponId = SWUtils.getRowId(eventInfo.sourceAttribute),
				    sourceId = v[eventInfo.sourceAttribute];
				//TAS.debug("PFSheet new item id: " + sourceId + " this row weapon id: "+weaponId, v);
				if (sourceId) {
					sourceId = 'repeating_item_' + sourceId + '_create-attack-entry';
					PFInventory.createAttackEntryFromRow(sourceId, null, false, weaponId);
				}
			});
		}
	}));
	on("change:repeating_weapon:source-ability", _exportsLoaderTASTheAaronSheet2.default.callback(function eventUpdateAttackSourceAbility(eventInfo) {
		if (eventInfo.sourceType === "player" || eventInfo.sourceType === "api") {
			_exportsLoaderTASTheAaronSheet2.default.debug("caught " + eventInfo.sourceAttribute + " event: " + eventInfo.sourceType);
			getAttrs([eventInfo.sourceAttribute], function (v) {
				var weaponId = SWUtils.getRowId(eventInfo.sourceAttribute),
				    sourceId = v[eventInfo.sourceAttribute];
				if (sourceId) {
					PFAbility.createAttackEntryFromRow(sourceId, null, false, null, weaponId);
				}
			});
		}
	}));
	on("change:repeating_weapon:source-spell", _exportsLoaderTASTheAaronSheet2.default.callback(function eventUpdateAttackSourceSpell(eventInfo) {
		if (eventInfo.sourceType === "player" || eventInfo.sourceType === "api") {
			_exportsLoaderTASTheAaronSheet2.default.debug("caught " + eventInfo.sourceAttribute + " event: " + eventInfo.sourceType);
			getAttrs([eventInfo.sourceAttribute], function (v) {
				var weaponId = SWUtils.getRowId(eventInfo.sourceAttribute),
				    sourceId = v[eventInfo.sourceAttribute];
				if (sourceId) {
					PFSpells.createAttackEntryFromRow(sourceId, null, false, null, weaponId);
				}
			});
		}
	}));

	// PARSE CREATE NPC MONSTER
	on("change:npc_import_now", _exportsLoaderTASTheAaronSheet2.default.callback(function eventParseMonsterImport(eventInfo) {
		_exportsLoaderTASTheAaronSheet2.default.debug("caught " + eventInfo.sourceAttribute + " event: " + eventInfo.sourceType);
		if (eventInfo.sourceType === "player" || eventInfo.sourceType === "api") {
			getAttrs(['npc_import_now'], function (v) {
				if ((parseInt(v.npc_import_now, 10) || 0) === 1) {
					PFNPCParser.importFromCompendium(eventInfo, function () {
						//instead of just calling recalculate set recalc button and call checkforupdate
						//so users sees something is happening.
						setAttrs({ recalc1: 1 }, _PFConst2.default.silentParams, function () {
							checkForUpdate();
						});
					});
				}
			});
		}
	}));
	on("change:delete_repeating_spells change:delete_repeating_weapon change:delete_repeating_item change:delete_repeating_ability change:delete_repeating_mythic-feat change:delete_repeating_mythic-ability change:delete_repeating_buff change:delete_repeating_trait change:delete_repeating_racial-trait change:delete_repeating_feat change:delete_repeating_class-ability change:delete_repeating_npc-spell-like-abilities", _exportsLoaderTASTheAaronSheet2.default.callback(function eventDeleteOldList(eventInfo) {
		_exportsLoaderTASTheAaronSheet2.default.debug("caught " + eventInfo.sourceAttribute + " event: " + eventInfo.sourceType);
		if (eventInfo.sourceType === "player" || eventInfo.sourceType === "api") {
			getAttrs([eventInfo.sourceAttribute], function (v) {
				var section = "";
				if (parseInt(v[eventInfo.sourceAttribute], 10)) {
					section = eventInfo.sourceAttribute.replace('delete_repeating_', '');
					SWUtils.deleteRepeating(function () {
						var setter;
						setter = {};
						setter[eventInfo.sourceAttribute] = 0;
						setter[eventInfo.sourceAttribute + '_btn'] = 0;
						setAttrs(setter, { silent: true });
					}, section);
				}
			});
		}
	}));
}
registerEventHandlers();

/***/ }),
/* 23 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
	value: true
});
exports.updateCharAttrs = exports.sizeFieldsLU = exports.sizeFields = exports.updateRowAttrsLU = exports.updateRowAttrs = exports.damageRowAttrsLU = exports.damageRowAttrs = undefined;
exports.updateAssociatedAttacksFromParents = updateAssociatedAttacksFromParents;
exports.getRecalculatedAttack = getRecalculatedAttack;
exports.syncAllDefaultDamageDiceAsync = syncAllDefaultDamageDiceAsync;
exports.adjustAllDamageDiceAsync = adjustAllDamageDiceAsync;
exports.recalculateRepeatingWeapons = recalculateRepeatingWeapons;
exports.getNewDefaults = getNewDefaults;
exports.setNewDefaults = setNewDefaults;
exports.migrateRepeatingMacro = migrateRepeatingMacro;
exports.migrate = migrate;
exports.recalculate = recalculate;

var _underscore = __webpack_require__(2);

var _underscore2 = _interopRequireDefault(_underscore);

var _PFLog = __webpack_require__(0);

var _exportsLoaderTASTheAaronSheet = __webpack_require__(1);

var _exportsLoaderTASTheAaronSheet2 = _interopRequireDefault(_exportsLoaderTASTheAaronSheet);

var _SWUtils = __webpack_require__(4);

var SWUtils = _interopRequireWildcard(_SWUtils);

var _PFConst = __webpack_require__(3);

var _PFConst2 = _interopRequireDefault(_PFConst);

var _PFUtils = __webpack_require__(5);

var PFUtils = _interopRequireWildcard(_PFUtils);

var _PFUtilsAsync = __webpack_require__(8);

var PFUtilsAsync = _interopRequireWildcard(_PFUtilsAsync);

var _PFMacros = __webpack_require__(9);

var PFMacros = _interopRequireWildcard(_PFMacros);

var _PFMenus = __webpack_require__(13);

var PFMenus = _interopRequireWildcard(_PFMenus);

var _PFMigrate = __webpack_require__(6);

var PFMigrate = _interopRequireWildcard(_PFMigrate);

var _PFAttackOptions = __webpack_require__(11);

var PFAttackOptions = _interopRequireWildcard(_PFAttackOptions);

var _PFAttackGrid = __webpack_require__(7);

var PFAttackGrid = _interopRequireWildcard(_PFAttackGrid);

var _PFInventory = __webpack_require__(30);

var PFInventory = _interopRequireWildcard(_PFInventory);

var _PFSpells = __webpack_require__(14);

var PFSpells = _interopRequireWildcard(_PFSpells);

var _PFAbility = __webpack_require__(15);

var PFAbility = _interopRequireWildcard(_PFAbility);

var _PFSize = __webpack_require__(19);

var PFSize = _interopRequireWildcard(_PFSize);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

/** module for repeating_weapon section  */
/* **********************************ATTACKS PAGE ********************************** */
var damageRowAttrs = exports.damageRowAttrs = ["damage-ability-max", "damage-ability-mod", "damage-mod", "damage_ability_mult", "enhance", "total-damage"],
    damageRowAttrsLU = exports.damageRowAttrsLU = _underscore2.default.map(damageRowAttrs, function (a) {
	return '_' + a;
}),
    updateRowAttrs = exports.updateRowAttrs = ["attack-mod", "attack-type", "attack-type-mod", "crit_conf_mod", "crit_confirm", "isranged", "masterwork", "proficiency", "total-attack", "attack-type_macro_insert", "damage-type_macro_insert"].concat(damageRowAttrs),
    updateRowAttrsLU = exports.updateRowAttrsLU = _underscore2.default.map(updateRowAttrs, function (a) {
	return '_' + a;
}),
    sizeFields = exports.sizeFields = ['default_damage-dice-num', 'default_damage-die', 'default_size', 'not_default_size', 'damage-dice-num', 'damage-die', 'size_affects'],
    sizeFieldsLU = exports.sizeFieldsLU = ['_default_damage-dice-num', '_default_damage-die', '_default_size', '_not_default_size', '_damage-dice-num', '_damage-die', '_size_affects'],
    updateCharAttrs = exports.updateCharAttrs = ["attk_ranged_crit_conf", "attk_ranged2_crit_conf", "attk_melee_crit_conf", "attk_melee2_crit_conf", "attk_cmb_crit_conf", "attk_cmb2_crit_conf", "DMG-mod", "size", "modify_dmg_by_size"];

var defaultRepeatingMacro = '&{template:pf_attack} @{toggle_attack_accessible} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle}} {{name=@{name}}} {{attack=[[ 1d20cs>[[ @{crit-target} ]] + @{attack_macro} ]]}} {{damage=[[@{damage-dice-num}d@{damage-die} + @{damage_macro}]]}} {{crit_confirm=[[ 1d20 + @{attack_macro} + [[ @{crit_conf_mod} ]] ]]}} {{crit_damage=[[ [[ @{damage-dice-num} * (@{crit-multiplier} - 1) ]]d@{damage-die} + ((@{damage_macro}) * [[ @{crit-multiplier} - 1 ]]) ]]}} {{type=@{type}}} {{weapon_notes=@{notes}}} @{iterative_attacks} @{macro_options} {{vs=@{vs}}} {{vs@{vs}=@{vs}}} {{precision_dmg1=@{precision_dmg_macro}}} {{precision_dmg1_type=@{precision_dmg_type}}} {{precision_dmg2=@{global_precision_dmg_macro}}} {{precision_dmg2_type=@{global_precision_dmg_type}}} {{critical_dmg1=@{critical_dmg_macro}}} {{critical_dmg1_type=@{critical_dmg_type}}} {{critical_dmg2=@{global_critical_dmg_macro}}} {{critical_dmg2_type=@{global_critical_dmg_type}}} {{attack1name=@{iterative_attack1_name}}}',
    defaultRepeatingMacroMap = {
	'&{template:': { 'current': 'pf_attack}', old: ['pf_generic}', 'pf_block}'] },
	'@{toggle_attack_accessible}': { 'current': '@{toggle_attack_accessible}' },
	'@{toggle_rounded_flag}': { 'current': '@{toggle_rounded_flag}' },
	'{{color=': { 'current': '@{rolltemplate_color}}}' },
	'{{character_name=': { 'current': '@{character_name}}}' },
	'{{character_id=': { 'current': '@{character_id}}}' },
	'{{subtitle}}': { 'current': '{{subtitle}}' },
	'{{name=': { 'current': '@{name}}}' },
	'{{attack=': { 'current': '[[ 1d20cs>[[ @{crit-target} ]] + @{attack_macro} ]]}}', 'old': ['{{attack=[[ 1d20cs>[[ @{crit-target} ]] + [[ @{total-attack} ]] ]]}}'], 'replacements': [{ 'from': '[[ @{total-attack} ]]', 'to': '@{attack_macro}' }, { 'from': '@{total-attack}', 'to': '@{attack_macro}' }] },
	'{{damage=': { 'current': '[[@{damage-dice-num}d@{damage-die} + @{damage_macro}]]}}', 'old': ['[[ @{damage-dice-num}d@{damage-die} + [[ @{total-damage} ]] ]]}}'], 'replacements': [{ 'from': '[[ @{total-damage} ]]', 'to': '@{damage_macro}' }, { 'from': '@{total-damage}', 'to': '@{damage_macro}' }] },
	'{{crit_confirm=': { 'current': '[[ 1d20 + @{attack_macro} + [[ @{crit_conf_mod} ]] ]]}}', 'old': ['[[ 1d20 + [[ @{total-attack} ]] ]]}}'], 'replacements': [{ 'from': '[[ @{total-attack} ]]', 'to': '@{attack_macro} + [[ @{crit_conf_mod} ]]' }, { 'from': '@{total-attack}', 'to': '@{attack_macro} + [[ @{crit_conf_mod} ]]' }] },
	'{{crit_damage=': { 'current': '[[ [[ @{damage-dice-num} * (@{crit-multiplier} - 1) ]]d@{damage-die} + ((@{damage_macro}) * [[ @{crit-multiplier} - 1 ]]) ]]}}', 'old': ['[[ [[ (@{damage-dice-num} * (@{crit-multiplier} - 1)) ]]d@{damage-die} + [[ (@{total-damage} * (@{crit-multiplier} - 1)) ]] ]]}}'], 'replacements': [{ 'from': '@{total-damage}', 'to': '(@{damage_macro})' }] },
	'{{type=': { 'current': '@{type}}}' },
	'{{weapon_notes=': { 'current': '@{notes}}}' },
	'@{iterative_attacks}': { 'current': '@{iterative_attacks}' },
	'@{macro_options}': { 'current': '@{macro_options}' },
	'{{vs=': { 'current': '@{vs}}}' },
	'{{vs@{vs}=': { 'current': '@{vs}}}' },
	'{{precision_dmg1=': { 'current': '@{precision_dmg_macro}}}' },
	'{{precision_dmg1_type=': { 'current': '@{precision_dmg_type}}}' },
	'{{precision_dmg2=': { 'current': '@{global_precision_dmg_macro}}}' },
	'{{precision_dmg2_type=': { 'current': '@{global_precision_dmg_type}}}' },
	'{{critical_dmg1=': { 'current': '@{critical_dmg_macro}}}' },
	'{{critical_dmg1_type=': { 'current': '@{critical_dmg_type}}}' },
	'{{critical_dmg2=': { 'current': '@{global_critical_dmg_macro}}}' },
	'{{critical_dmg2_type=': { 'current': '@{global_critical_dmg_type}}}' },
	'{{attack1name=': { 'current': '@{iterative_attack1_name}}}' }
},
    defaultDeletedMacroAttrs = ['{{description=@{notes}}}', '@{toggle_accessible_flag}'],
    defaultIterativeRepeatingMacro = '{{attackREPLACE=[[ 1d20cs>[[ @{crit-target} ]] + [[ @{attack_macro} + @{iterative_attackREPLACE_value} ]] [iterative] ]]}} {{damageREPLACE=[[ @{damage-dice-num}d@{damage-die} + @{damage_macro} ]]}} {{crit_confirmREPLACE=[[ 1d20 + [[ @{attack_macro} + @{iterative_attackREPLACE_value} ]] [iterative] + [[ @{crit_conf_mod} ]] ]]}} {{crit_damageREPLACE=[[ [[ @{damage-dice-num} * [[ @{crit-multiplier} - 1 ]] ]]d@{damage-die} + ((@{damage_macro}) * [[ @{crit-multiplier} - 1 ]]) ]]}} {{precision_dmgREPLACE1=@{precision_dmg_macro}}} {{precision_dmgREPLACE2=@{global_precision_dmg_macro}}} {{critical_dmgREPLACE1=@{critical_dmg_macro}}} {{critical_dmgREPLACE2=@{global_critical_dmg_macro}}} {{attackREPLACEname=@{iterative_attackREPLACE_name}}}',
    defaultIterativeRepeatingMacroMap = {
	'{{attackREPLACE=': { 'current': '[[ 1d20cs>[[ @{crit-target} ]] + [[ @{attack_macro} + @{iterative_attackREPLACE_value} ]] [iterative] ]]}}', 'old': ['[[ 1d20cs>[[ @{crit-target} ]] + [[ @{total-attack} + @{iterative_attackREPLACE_value} ]] ]]}}'], 'replacements': [{ 'from': '[[ @{total-attack} ]]', 'to': '@{attack_macro}' }, { 'from': '@{total-attack}', 'to': '@{attack_macro}' }] },
	'{{damageREPLACE=': { 'current': '[[ @{damage-dice-num}d@{damage-die} + @{damage_macro} ]]}}', 'old': ['[[ @{damage-dice-num}d@{damage-die} + [[ @{total-damage} ]] ]]}}'], 'replacements': [{ 'from': '[[ @{total-damage} ]]', 'to': '@{damage_macro}' }, { 'from': '@{total-damage}', 'to': '@{damage_macro}' }] },
	'{{crit_confirmREPLACE=': { 'current': '[[ 1d20 + [[ @{attack_macro} + @{iterative_attackREPLACE_value} ]] [iterative] + [[ @{crit_conf_mod} ]] ]]}}', 'old': ['[[ 1d20 + [[ @{total-attack} + @{iterative_attackREPLACE_value} ]] ]]}}'], 'replacements': [{ 'from': '[[ @{total-attack} + @{iterative_attackREPLACE_value} ]]', 'to': '[[ @{attack_macro} + @{iterative_attackREPLACE_value} ]] [iterative] + [[ @{crit_conf_mod} ]]' }, { 'from': '@{total-attack} + @{iterative_attackREPLACE_value}', 'to': '@{attack_macro} + @{iterative_attackREPLACE_value} + @{crit_conf_mod}' }] },
	'{{crit_damageREPLACE=': { 'current': '[[ [[ @{damage-dice-num} * [[ @{crit-multiplier} - 1 ]] ]]d@{damage-die} + ((@{damage_macro}) * [[ @{crit-multiplier} - 1 ]]) ]]}}', 'old': ['[[ [[ (@{damage-dice-num} * (@{crit-multiplier} - 1)) ]]d@{damage-die} + [[ (@{total-damage} * (@{crit-multiplier} - 1)) ]] ]]}}'], 'replacements': [{ 'from': '@{total-damage}', 'to': '(@{damage_macro})' }] },
	'{{precision_dmgREPLACE1=': { 'current': '@{precision_dmg_macro}}}' },
	'{{precision_dmgREPLACE2=': { 'current': '@{global_precision_dmg_macro}}}' },
	'{{critical_dmgREPLACE1=': { 'current': '@{critical_dmg_macro}}}' },
	'{{critical_dmgREPLACE2=': { 'current': '@{global_critical_dmg_macro}}}' },
	'{{attackREPLACEname=': { 'current': '@{iterative_attackREPLACE_name}}}' }
},
    defaultIterativeDeletedMacroAttrs = null,
    defaultIterativeAttrName = 'var_iterative_attackREPLACE_macro',
    defaultIterativeReplaceArray = ['2', '3', '4', '5', '6', '7', '8'];

function getRepeatingAddInMacroPortion(macro, toggle, portion) {
	if (!(macro === "" || macro === "0" || macro === undefined || macro === null || toggle === "" || toggle === "0" || toggle === undefined || toggle === null)) {
		return " " + portion;
	}
	return "";
}
function updateRepeatingAddInMacro(id, eventInfo) {
	var idStr = SWUtils.getRepeatingIDStr(id),
	    prefix = "repeating_weapon_" + idStr,
	    attackType = prefix + "attack-type",
	    tattackPlusNm = prefix + "toggle_attack_macro_insert",
	    tdamagePlusNm = prefix + "toggle_damage_macro_insert",
	    attackPlusNm = prefix + "attack_macro_insert",
	    damagePlusNm = prefix + "damage_macro_insert",
	    tattackGlobalNm = "toggle_global_attack_macro_insert",
	    tdamageGlobalNm = "toggle_global_damage_macro_insert",
	    attackGlobalNm = "global_attack_macro_insert",
	    damageGlobalNm = "global_damage_macro_insert",
	    attackMacroNm = prefix + "attack_macro",
	    damageMacroNm = prefix + "damage_macro",
	    fields = ["adv_macro_show", attackType, attackGlobalNm, damageGlobalNm, attackPlusNm, damagePlusNm, attackMacroNm, damageMacroNm];
	getAttrs(fields, function (v) {
		var showMacros = parseInt(v.adv_macro_show, 10) || 0,
		    newAtkMacro = "[[ @{total-attack} ]]",
		    newDmgMacro = "[[ @{total-damage} ]]",
		    setter = {};
		if (showMacros) {
			newAtkMacro += getRepeatingAddInMacroPortion(v[attackPlusNm], v[tattackPlusNm], "@{toggle_attack_macro_insert}");
			newAtkMacro += " @{attack-type_macro_insert}";
			newAtkMacro += getRepeatingAddInMacroPortion(v[attackGlobalNm], v[tattackGlobalNm], "@{toggle_global_attack_macro_insert}");
			newDmgMacro += " @{damage-type_macro_insert}";
			newDmgMacro += getRepeatingAddInMacroPortion(v[damagePlusNm], v[tdamagePlusNm], "@{toggle_damage_macro_insert}");
			newDmgMacro += getRepeatingAddInMacroPortion(v[damageGlobalNm], v[tdamageGlobalNm], "@{toggle_global_damage_macro_insert}");
		}
		if (newAtkMacro !== v[attackMacroNm]) {
			setter[attackMacroNm] = newAtkMacro;
		}
		if (newDmgMacro !== v[damageMacroNm]) {
			setter[damageMacroNm] = newDmgMacro;
		}
		if (_underscore2.default.size(setter)) {
			setAttrs(setter);
		}
	});
}
function setAdvancedMacroCheckbox() {
	getAttrs(["adv_macro_show", "global_melee_macro_insert", "global_ranged_macro_insert", "global_cmb_macro_insert", "global_attack_macro_insert", "global_melee_damage_macro_insert", "global_ranged_damage_macro_insert", "global_cmb_damage_macro_insert", "global_damage_macro_insert"], function (v) {
		var showAdv = parseInt(v.adv_macro_show, 10) || 0,
		    hasAnyMacros = _underscore2.default.reduce(v, function (tot, value, fieldname) {
			if (fieldname !== "adv_macro_show" && !(value === "" || value === "0" || value === undefined || value === null)) {
				tot += 1;
			}
			return tot;
		}, 0);
		//TAS.debug("setAdvancedMacroCheckbox, checked:" + showAdv + " , has macros:" + hasAnyMacros);
		if (hasAnyMacros && !showAdv) {
			setAttrs({
				adv_macro_show: 1
			}, _PFConst2.default.silentParams);
		}
	});
}
/********* REPEATING WEAPON FIELDSET *********/
function setRepeatingWeaponInsertMacro(id, eventInfo) {
	var done = function done() {},
	    //updateRepeatingAddInMacro(id,eventInfo);},
	idStr = SWUtils.getRepeatingIDStr(id),
	    prefix = "repeating_weapon_" + idStr,
	    attkTypeField = prefix + "attack-type";
	getAttrs([attkTypeField], function (v) {
		var attkType = PFUtils.findAbilityInString(v[attkTypeField]),
		    setter = {};
		if (attkType) {
			attkType = attkType.replace('attk-', '');
			setter[prefix + "attack-type_macro_insert"] = PFAttackGrid.attackGridFields[attkType].attackmacro;
			setter[prefix + "damage-type_macro_insert"] = PFAttackGrid.attackGridFields[attkType].damagemacro;
		} else {
			setter[prefix + "attack-type_macro_insert"] = "0";
		}
		//TAS.debug("setRepeatingWeaponInsertMacro",setter);
		setAttrs(setter, {
			silent: true
		}, done);
	});
}
/* updateRepeatingWeaponAttack - calculates total-attack
 * also updates attk-effect-total-copy
 * @id {string} optional = id of row, if blank we are within the context of the row
 * @overrideAttr {string} optional = if we are passing in a value this is the fieldname after "repeating_weapon_"
 * @overrideValue {number} optional = if overrideAttr then this should be a number usually int but it won't check
 */
function updateRepeatingWeaponAttack(id, eventInfo) {
	//is it faster to not do the idstr each time? try it with ?:
	var resetOptionsWhenDone = function resetOptionsWhenDone() {
		PFAttackOptions.resetOption(id, eventInfo);
	},
	    idStr = SWUtils.getRepeatingIDStr(id),
	    enhanceField = "repeating_weapon_" + idStr + "enhance",
	    mwkField = "repeating_weapon_" + idStr + "masterwork",
	    attkTypeModField = "repeating_weapon_" + idStr + "attack-type-mod",
	    profField = "repeating_weapon_" + idStr + "proficiency",
	    attkMacroModField = "repeating_weapon_" + idStr + "attack-mod",
	    totalAttackField = "repeating_weapon_" + idStr + "total-attack";
	getAttrs([enhanceField, mwkField, attkTypeModField, profField, attkMacroModField, totalAttackField], function (v) {
		var enhance = parseInt(v[enhanceField], 10) || 0,
		    masterwork = parseInt(v[mwkField], 10) || 0,
		    attkTypeMod = parseInt(v[attkTypeModField], 10) || 0,
		    prof = parseInt(v[profField], 10) || 0,
		    attkMacroMod = parseInt(v[attkMacroModField], 10) || 0,
		    currTotalAttack = parseInt(v[totalAttackField], 10) || 0,
		    newTotalAttack = 0,
		    setter = {};
		newTotalAttack = Math.max(enhance, masterwork) + attkTypeMod + prof + attkMacroMod;
		if (newTotalAttack !== currTotalAttack || isNaN(currTotalAttack)) {
			setter[totalAttackField] = newTotalAttack;
			setAttrs(setter, _PFConst2.default.silentParams, resetOptionsWhenDone);
		}
	});
}
/* updateRepeatingWeaponDamage - updates total-damage*/
function updateRepeatingWeaponDamage(id, eventInfo) {
	var resetOptionsWhenDone = function resetOptionsWhenDone() {
		PFAttackOptions.resetOption(id, eventInfo);
	},
	    idStr = SWUtils.getRepeatingIDStr(id),
	    maxname = "repeating_weapon_" + idStr + "damage-ability-max",
	    modname = "repeating_weapon_" + idStr + "damage-ability-mod",
	    totalDamageField = "repeating_weapon_" + idStr + "total-damage",
	    enhanceField = "repeating_weapon_" + idStr + "enhance",
	    miscDmgField = "repeating_weapon_" + idStr + "damage-mod",
	    abilityMultField = "repeating_weapon_" + idStr + "damage_ability_mult";
	getAttrs([maxname, modname, "DMG-mod", totalDamageField, enhanceField, miscDmgField, abilityMultField], function (v) {
		var maxA,
		    ability = parseInt(v[modname], 10) || 0,
		    abilityMult = parseFloat(v[abilityMultField], 10) || 1,
		    abilityTot,
		    globalBuffConds = parseInt(v["DMG-mod"], 10) || 0,
		    currTotalDmg = parseInt(v[totalDamageField], 10),
		    miscDmg = parseInt(v[miscDmgField], 10) || 0,
		    enhance = parseInt(v[enhanceField], 10) || 0,
		    totalDamage,
		    setter = {};
		maxA = parseInt(v[maxname], 10);
		if (isNaN(maxA)) {
			maxA = 99;
		}
		abilityTot = Math.floor(Math.min(abilityMult * ability, maxA));
		totalDamage = abilityTot + globalBuffConds + miscDmg + enhance;

		if (totalDamage !== currTotalDmg || isNaN(currTotalDmg)) {
			//TAS.debug("setting damage to "+totalDamage);
			setter[totalDamageField] = totalDamage;
		}
		if (_underscore2.default.size(setter)) {
			setAttrs(setter, _PFConst2.default.silentParams, resetOptionsWhenDone);
		}
	});
}
function updateRepeatingWeaponCrit(id, eventInfo) {
	var idStr = SWUtils.getRepeatingIDStr(id),
	    critConfirmTotalField = "repeating_weapon_" + idStr + "crit_conf_mod",
	    critConfirmField = "repeating_weapon_" + idStr + "crit_confirm",
	    attkTypeField = "repeating_weapon_" + idStr + "attack-type",
	    attrs = ["attk_ranged_crit_conf", "attk_ranged2_crit_conf", "attk_melee_crit_conf", "attk_melee2_crit_conf", "attk_cmb_crit_conf", "attk_cmb2_crit_conf", critConfirmTotalField, critConfirmField, attkTypeField];
	getAttrs(attrs, function (v) {
		try {
			var currCritBonus = parseInt(v[critConfirmTotalField], 10) || 0,
			    critConfirmBonus = parseInt(v[critConfirmField], 10) || 0,
			    attkType = PFUtils.findAbilityInString(v[attkTypeField]),
			    attkTypeForGrid = !attkType ? "" : attkType.replace('attk-', ''),
			    attackTypeBonusField = !attkTypeForGrid ? "" : PFAttackGrid.attackGridFields[attkTypeForGrid].crit,
			    attackTypeBonus = !attackTypeBonusField ? 0 : parseInt(v[attackTypeBonusField], 10) || 0,
			    newBonus = critConfirmBonus + attackTypeBonus,
			    setter = {};
			if (newBonus !== currCritBonus) {
				setter[critConfirmTotalField] = newBonus;
				setAttrs(setter, {
					silent: true
				});
			}
		} catch (err) {
			_exportsLoaderTASTheAaronSheet2.default.error("updateRepeatingWeaponCrit:cannot find " + v[attkTypeField] + " in grid");
		}
	});
}
function updateRepeatingWeaponsFromCrit(attacktype, eventInfo) {
	var globalCritBonusField = PFAttackGrid.attackGridFields[attacktype].crit;
	getSectionIDs("repeating_weapon", function (ids) {
		var attrs = [globalCritBonusField];
		_underscore2.default.each(ids, function (id) {
			var idStr = SWUtils.getRepeatingIDStr(id);
			attrs.push("repeating_weapon_" + idStr + "crit_conf_mod");
			attrs.push("repeating_weapon_" + idStr + "crit_confirm");
			attrs.push("repeating_weapon_" + idStr + "attack-type");
		});
		//TAS.debug("about to get ",attrs);
		getAttrs(attrs, function (v) {
			var globalCritBonus = parseInt(v[globalCritBonusField], 10) || 0,
			    setter = {};
			_underscore2.default.each(ids, function (id) {
				var idStr = SWUtils.getRepeatingIDStr(id),
				    attackTypeField = "repeating_weapon_" + idStr + "attack-type",
				    rowCritTotField = "",
				    rowCrit = 0,
				    rowTot = 0,
				    currRowTot = 0;
				//TAS.debug("row:"+id+" attacktypefield:"+v[attackTypeField]+", ability:"+ PFUtils.findAbilityInString(v[attackTypeField]) +", type is:"+attacktype);
				if (PFUtils.findAbilityInString(v[attackTypeField]) === "attk-" + attacktype) {
					//TAS.debug("this row equal");
					rowCritTotField = "repeating_weapon_" + idStr + "crit_conf_mod";
					currRowTot = parseInt(v[rowCritTotField], 10) || 0;
					rowTot = globalCritBonus + (parseInt(v["repeating_weapon_" + idStr + "crit_confirm"], 10) || 0);
					//TAS.debug("global:"+globalCritBonus+", this row:"+currRowTot+", plus "+v["repeating_weapon_" + idStr + "crit_confirm"] );
					if (rowTot !== currRowTot) {
						setter[rowCritTotField] = rowTot;
					}
				}
			});
			if (_underscore2.default.size(setter) > 0) {
				setAttrs(setter, {
					silent: true
				});
			}
		});
	});
}
function setRepeatingWeaponRangedFlag(id) {
	var idStr = SWUtils.getRepeatingIDStr(id),
	    prefix = "repeating_weapon_" + idStr,
	    attypeAttr = prefix + "attack-type",
	    isRangedAttr = prefix + "isranged";
	getAttrs([attypeAttr, isRangedAttr], function (v) {
		var setter = {},
		    newIsRanged = 0,
		    attackType = "";
		attackType = PFUtils.findAbilityInString(v[attypeAttr]);
		if (/ranged/i.test(attackType)) {
			newIsRanged = 1;
		}
		if ((parseInt(v[isRangedAttr], 10) || 0) !== newIsRanged) {
			setter[isRangedAttr] = newIsRanged;
			setAttrs(setter, _PFConst2.default.silentParams);
		}
	});
}
function getRecalculatedDamageOnly(id, v) {
	var prefix = 'repeating_weapon_' + SWUtils.getRepeatingIDStr(id),
	    enhance = parseInt(v[prefix + "enhance"], 10) || 0,
	    abilitydmg = parseInt(v[prefix + "damage-ability-mod"], 10) || 0,
	    abilityMult = parseFloat(v[prefix + "damage_ability_mult"], 10) || 1,
	    currTotalDmg = parseInt(v[prefix + "total-damage"], 10),
	    dmgMacroMod = parseInt(v[prefix + "damage-mod"], 10) || 0,
	    maxAbility = parseInt(v[prefix + "damage-ability-max"], 10),
	    globalBuffConds = v["DMG-mod"],
	    abilityTotDmg = 0,
	    newTotalDamage = 0,
	    localsetter = {};
	try {
		if (isNaN(maxAbility)) {
			maxAbility = 99;
		}
		abilityTotDmg = Math.floor(Math.min(abilityMult * abilitydmg, maxAbility));
		newTotalDamage = abilityTotDmg + globalBuffConds + dmgMacroMod + enhance;
		if (newTotalDamage !== currTotalDmg || isNaN(currTotalDmg)) {
			localsetter[prefix + "total-damage"] = newTotalDamage;
		}
	} catch (err) {
		_exportsLoaderTASTheAaronSheet2.default.error("PFAttacks.recalculateAttack for id " + id, err);
	} finally {
		return localsetter;
	}
}
/* updateRepeatingWeaponDamages - updates all attacks when DMG-mod changes */
function updateRepeatingWeaponDamages(callback) {
	var done = _underscore2.default.once(function () {
		if (typeof callback === "function") {
			callback();
		}
	});
	getSectionIDs("repeating_weapon", function (ids) {
		var fields = SWUtils.cartesianAppend(['repeating_weapon_'], ids, damageRowAttrsLU);
		fields.push("DMG-mod");
		getAttrs(fields, function (v) {
			var setter;
			v["DMG-mod"] = parseInt(v["DMG-mod"], 10) || 0;
			setter = _underscore2.default.reduce(ids, function (m, id) {
				var xtra = getRecalculatedDamageOnly(id, v);
				_underscore2.default.extend(m, xtra);
				return m;
			}, {});
			if (_underscore2.default.size(setter)) {
				setAttrs(setter, {}, done);
			} else {
				done();
			}
		});
	});
}

/* this is faster than looping through the 3 parent lists */
function updateAssociatedAttacksFromParents(callback) {
	var done = _underscore2.default.once(function () {
		if (typeof callback === "function") {
			callback();
		}
	});
	getSectionIDs('repeating_weapon', function (ids) {
		var doneOne = _underscore2.default.after(_underscore2.default.size(ids), function () {
			done();
		}),
		    attrs = _underscore2.default.map(ids, function (id) {
			return ['repeating_weapon_' + id + '_source-item', 'repeating_weapon_' + id + '_source-spell', 'repeating_weapon_' + id + '_source-ability'];
		});
		attrs = _underscore2.default.flatten(attrs);
		getAttrs(attrs, function (v) {
			_underscore2.default.each(ids, function (id) {
				doneOne();
				if (v['repeating_weapon_' + id + '_source-spell']) {
					PFInventory.createAttackEntryFromRow('repeating_item_' + v['repeating_weapon_' + id + '_source-item'] + '_create-attack-entry', doneOne, true, id);
				} else if (v['repeating_weapon_' + id + '_source-item']) {
					PFSpells.createAttackEntryFromRow('repeating_spells_' + v['repeating_weapon_' + id + '_source-spell'] + '_create-attack-entry', doneOne, true, id);
				} else if (v['repeating_weapon_' + id + '_source-item']) {
					PFAbility.createAttackEntryFromRow('repeating_ability_' + v['repeating_weapon_' + id + '_source-ability'] + '_create-attack-entry', doneOne, true, id);
				} else {
					doneOne();
				}
			});
		});
	});
}

function getRecalculatedAttack(id, v, setter) {
	var prefix = 'repeating_weapon_' + id + '_',
	    isRanged = parseInt(v[prefix + "isranged"], 10) || 0,
	    enhance = parseInt(v[prefix + "enhance"], 10) || 0,
	    masterwork = parseInt(v[prefix + "masterwork"], 10) || 0,
	    attkTypeMod = parseInt(v[prefix + "attack-type-mod"], 10) || 0,
	    prof = parseInt(v[prefix + "proficiency"], 10) || 0,
	    attkMacroMod = parseInt(v[prefix + "attack-mod"], 10) || 0,
	    currTotalAttack = parseInt(v[prefix + "total-attack"], 10),
	    abilitydmg = parseInt(v[prefix + "damage-ability-mod"], 10) || 0,
	    abilityMult = parseFloat(v[prefix + "damage_ability_mult"], 10) || 1,
	    currTotalDmg = parseInt(v[prefix + "total-damage"], 10),
	    dmgMacroMod = parseInt(v[prefix + "damage-mod"], 10) || 0,
	    maxAbility = parseInt(v[prefix + "damage-ability-max"], 10),
	    currCritBonus = parseInt(v[prefix + "crit_conf_mod"], 10) || 0,
	    critConfirmBonus = parseInt(v[prefix + "crit_confirm"], 10) || 0,
	    attkType = PFUtils.findAbilityInString(v[prefix + "attack-type"]),
	    globalBuffConds = v["DMG-mod"],
	    attkTypeForGrid = '',
	    attackTypeCritBonusField = '',
	    attackTypeCritBonus = 0,
	    newCritBonus = 0,
	    abilityTotDmg = 0,
	    newTotalDamage = 0,
	    newTotalAttack = 0,
	    localsetter;
	try {
		localsetter = setter || {};
		newTotalAttack = Math.max(enhance, masterwork) + attkTypeMod + prof + attkMacroMod;
		if (newTotalAttack !== currTotalAttack || isNaN(currTotalAttack)) {
			localsetter[prefix + "total-attack"] = newTotalAttack;
		}
		if (isNaN(maxAbility)) {
			maxAbility = 99;
		}
		abilityTotDmg = Math.floor(Math.min(abilityMult * abilitydmg, maxAbility));
		newTotalDamage = abilityTotDmg + globalBuffConds + dmgMacroMod + enhance;
		if (newTotalDamage !== currTotalDmg || isNaN(currTotalDmg)) {
			//TAS.debug("setting damage to "+newTotalDamage);
			localsetter[prefix + "total-damage"] = newTotalDamage;
		}
		if (attkType) {
			if (/range/i.test(attkType)) {
				if (!isRanged) {
					localsetter[prefix + "isranged"] = 1;
				}
			} else if (isRanged) {
				localsetter[prefix + "isranged"] = 0;
			}
			attkTypeForGrid = attkType.replace('attk-', '');
			//TAS.debug("at update attack attkTypeForGrid="+attkTypeForGrid+", comparing to:",PFAttackGrid.attackGridFields);
			if (attkTypeForGrid) {
				attackTypeCritBonusField = PFAttackGrid.attackGridFields[attkTypeForGrid].crit;
				attackTypeCritBonus = !attackTypeCritBonusField ? 0 : v[attackTypeCritBonusField];
				if (v[prefix + "attack-type_macro_insert"] !== PFAttackGrid.attackGridFields[attkTypeForGrid].attackmacro) {
					localsetter[prefix + "attack-type_macro_insert"] = PFAttackGrid.attackGridFields[attkTypeForGrid].attackmacro;
				}
				if (v[prefix + "damage-type_macro_insert"] !== PFAttackGrid.attackGridFields[attkTypeForGrid].damagemacro) {
					localsetter[prefix + "damage-type_macro_insert"] = PFAttackGrid.attackGridFields[attkTypeForGrid].damagemacro;
				}
			}
		}
		newCritBonus = critConfirmBonus + attackTypeCritBonus;
		if (newCritBonus !== currCritBonus) {
			localsetter[prefix + "crit_conf_mod"] = newCritBonus;
		}
		if (!attkTypeForGrid) {
			if (v[prefix + "attack-type_macro_insert"] !== "0") {
				localsetter[prefix + "attack-type_macro_insert"] = "0";
			}
			if (v[prefix + "damage-type_macro_insert"] !== "0") {
				localsetter[prefix + "damage-type_macro_insert"] = "0";
			}
		}
	} catch (err) {
		_exportsLoaderTASTheAaronSheet2.default.error("PFAttacks.getRecalculatedAttack for id " + id, err);
	} finally {
		return localsetter;
	}
}
/**ONLY CALL IF modify_dmg_by_size = 0
 * 
 * @param {*} id 
 * @param {*} v 
 * @param {*} setter 
 */
function syncDefaultDamageDice(id, v, setter, useSizeMod, prefix) {
	if (!prefix) {
		prefix = 'repeating_weapon_' + SWUtils.getRepeatingIDStr(id);
	}
	if (!useSizeMod || !parseInt(v[prefix + 'size_affects'], 10)) {
		setter[prefix + 'default_damage-dice-num'] = v[prefix + 'damage-dice-num'];
		setter[prefix + 'default_damage-die'] = v[prefix + 'damage-die'];
	}
	return setter;
}
/**   Called when updating damage dice  on a row
 * 
 * @param {string} id 
 */
function syncDefaultDamageDiceAsync(id, eventInfo) {
	var idStr = SWUtils.getRepeatingIDStr(id),
	    prefix = 'repeating_weapon_' + idStr;
	getAttrs(['modify_dmg_by_size', prefix + 'size_affects', prefix + 'damage-dice-num', prefix + 'damage-die'], function (v) {
		var setter = {},
		    useSizeMod = 0;
		useSizeMod = parseInt(v.modify_dmg_by_size, 10) || 0;
		syncDefaultDamageDice(id, v, setter, useSizeMod, prefix);
		if (_underscore2.default.size(setter)) {
			setAttrs(setter, _PFConst2.default.silentParams);
		}
	});
}
function syncAllDefaultDamageDiceAsync() {
	getAttrs(['modify_dmg_by_size'], function (vout) {
		var modifyDMG = parseInt(vout.modify_dmg_by_size, 10) || 0;
		getSectionIDs('repeating_weapons', function (ids) {
			var setter = {},
			    fields;
			if (_underscore2.default.size(ids)) {
				fields = SWUtils.cartesianAppend(['repeating_weapon_', ids, ['_damage-dice-num', '_damage-die', '_size_affects']]);
				getAttrs(fields, function (v) {
					_underscore2.default.each(ids, function (id) {
						syncDefaultDamageDice(id, v, setter, modifyDMG);
					});
					if (_underscore2.default.size(setter)) {
						setAttrs(setter, _PFConst2.default.silentParams);
					}
				});
			}
		});
	});
}
/** ONLY CALL IF modify_dmg_by_size = 1.
 * 
 * @param {*} id 
 * @param {*} currCharSize 
 * @param {*} v 
 * @param {*} setter 
 * @param {*} eventInfo 
 */
function adjustDamageDice(id, currCharSize, v, setter, prefix) {
	var currDice = 0,
	    defDice = 0,
	    currDie = 0,
	    defDie = 0,
	    defWeaponSize = 0,
	    sizeDiff = 0,
	    newDice = {};
	try {
		if (!prefix) {
			prefix = 'repeating_weapon_' + SWUtils.getRepeatingIDStr(id);
		}
		_exportsLoaderTASTheAaronSheet2.default.debug("#########", "PFAttacks.adjustDamageDice for " + prefix, v);
		if (parseInt(v[prefix + 'size_affects'], 10)) {
			currDice = parseInt(v[prefix + 'damage-dice-num'], 10) || 0;
			currDie = parseInt(v[prefix + 'damage-die'], 10) || 0;
			_exportsLoaderTASTheAaronSheet2.default.debug("PFAttacks.adjustDamageDice curr size:" + currCharSize + " and current dmg: " + currDice + "d" + currDie);
			if (!(currDice === 0 || currDie === 0)) {
				defWeaponSize = parseInt(v[prefix + 'default_size'], 10);
				defDice = parseInt(v[prefix + 'default_damage-dice-num'], 10) || 0;
				defDie = parseInt(v[prefix + 'default_damage-die'], 10) || 0;
				_exportsLoaderTASTheAaronSheet2.default.debug("PFAttacks.adjustDamageDice default is:" + defDice + "d" + defDie + ", for size:" + defWeaponSize);
				//check for errors 
				if (isNaN(defWeaponSize)) {
					defWeaponSize = currCharSize;
					setter[prefix + 'default_size'] = defWeaponSize;
				}
				if (defDice === 0 || defDie === 0) {
					defDice = currDice;
					defDie = currDie;
					setter[prefix + 'default_damage-dice-num'] = defDice;
					setter[prefix + 'default_damage-die'] = defDie;
				}
				//check for change
				if (currCharSize !== defWeaponSize) {
					setter[prefix + 'not_default_size'] = 1;
					sizeDiff = PFSize.getSizeLevelChange(defWeaponSize, currCharSize);
					newDice = PFSize.updateDamageDice(sizeDiff, defWeaponSize, defDice, defDie);
					_exportsLoaderTASTheAaronSheet2.default.debug("###########", "PFAttacks.adjustDamageDice NEW DAMAGE is:" + newDice.dice + "d" + newDice.die + ", for sizeDiff:" + sizeDiff);
					if (currDice !== newDice.dice || currDie !== newDice.die) {
						setter[prefix + 'damage-dice-num'] = newDice.dice;
						setter[prefix + 'damage-die'] = newDice.die;
					}
				} else {
					if (parseInt(v[prefix + 'not_default_size'], 10)) {
						setter[prefix + 'not_default_size'] = 0;
					}
					if (currDice !== defDice || currDie !== defDie) {
						setter[prefix + 'damage-dice-num'] = defDice;
						setter[prefix + 'damage-die'] = defDie;
					}
				}
			} else {
				//size affects was 1, but no damage dice
				setter[prefix + 'size_affects'] = 0;
			}
		} else {
			_exportsLoaderTASTheAaronSheet2.default.debug("PFAttacks.adjustDamageDice: size_affects is blank so reset regular to default");
			setter[prefix + 'damage-dice-num'] = v[prefix + 'default_damage-dice-num'];
			setter[prefix + 'damage-die'] = v[prefix + 'default_damage-die'];
			/*	currDice=parseInt(v[prefix+'damage-dice-num'],10)||0;
   	currDie=parseInt(v[prefix+'damage-die'],10)||0;
   	defDice=parseInt(v[prefix+'default_damage-dice-num'],10)||0;
   	defDie=parseInt(v[prefix+'default_damage-die'],10)||0;
   	if (currDice !== defDice || currDie !== currDie){
   		setter[prefix+'damage-dice-num']=v[prefix+'default_damage-dice-num'];
   		setter[prefix+'damage-die']=v[prefix+'default_damage-die'];
   	}*/
		}
	} catch (err) {
		_exportsLoaderTASTheAaronSheet2.default.error("PFAttacks.adjustDamageDice", err);
	} finally {
		_exportsLoaderTASTheAaronSheet2.default.debug("PFAttacks.adjustDamageDice returning with ", setter);
		return setter;
	}
}
/** Only called when updating the size dropdown, default damage dice, or size affects checkbox on a row.
 * 
 * @param {string} id 
 * @param {function} callback 
 */
function adjustDamageDiceAsync(id, callback) {
	var idStr = SWUtils.getRepeatingIDStr(id),
	    prefix = 'repeating_weapon_' + idStr;
	getAttrs(['modify_dmg_by_size', 'size', prefix + 'size_affects', prefix + 'default_damage-dice-num', prefix + 'default_damage-die', prefix + 'default_size', prefix + 'not_default_size', prefix + 'damage-dice-num', prefix + 'damage-die'], function (v) {
		var setter = {},
		    currCharSize = 0;
		try {
			_exportsLoaderTASTheAaronSheet2.default.debug("at PFAttacks.adjustDamageDiceAsync for id " + id + ", got ", v);
			if (parseInt(v['modify_dmg_by_size'], 10)) {
				currCharSize = parseInt(v.size, 10) || 0;
				adjustDamageDice(id, currCharSize, v, setter, prefix);
			}
		} finally {
			if (_underscore2.default.size(setter)) {
				setAttrs(setter);
			}
		}
	});
}

function adjustAllDamageDiceAsync(callback, eventInfo) {
	var done = _underscore2.default.once(function () {
		if (typeof callback === "function") {
			callback();
		}
	});
	_exportsLoaderTASTheAaronSheet2.default.debug("at PFAttacks.adjustAllDamageDiceAsync");
	getAttrs(['modify_dmg_by_size', 'size'], function (vout) {
		var currCharSize = 0;
		if (parseInt(vout['modify_dmg_by_size'], 10)) {
			currCharSize = parseInt(vout.size, 10) || 0;
			getSectionIDs('repeating_weapon', function (ids) {
				var fields;
				if (_underscore2.default.size(ids)) {
					fields = SWUtils.cartesianAppend(['repeating_weapon_'], ids, sizeFieldsLU);
					getAttrs(fields, function (v) {
						var setter = {};
						_underscore2.default.each(ids, function (id) {
							var idStr = SWUtils.getRepeatingIDStr(id),
							    prefix = 'repeating_weapon_' + idStr;
							adjustDamageDice(id, currCharSize, v, setter);
						});
						if (_underscore2.default.size(setter)) {
							setAttrs(setter, _PFConst2.default.silentParams, done);
						}
					});
				}
			});
		}
	});
}
function resetWeaponSizeAndDamage(id, currCharSize, v, setter, useSizeMod) {
	var idStr = SWUtils.getRepeatingIDStr(id),
	    prefix = 'repeating_weapon_' + idStr;
	if (useSizeMod) {
		adjustDamageDice(id, currCharSize, v, setter, prefix);
	} else {
		syncDefaultDamageDice(id, v, setter, useSizeMod, prefix);
	}
	return setter;
}
/**
 * @param {[string]} ids 
 * @param {function} callback 
 */
function recalcOtherFields(ids, callback) {
	var done = function done() {
		if (typeof callback === "function") {
			callback();
		}
	},
	    doneWithAllRows,
	    fields;
	if (!ids || _underscore2.default.size(ids) === 0) {
		done();
		return;
	}
	doneWithAllRows = _underscore2.default.after(_underscore2.default.size(ids), done);
	fields = SWUtils.cartesianAppend(['repeating_weapon_'], ids, updateRowAttrsLU);
	fields = fields.concat(SWUtils.cartesianAppend(['repeating_weapon_'], ids, sizeFieldsLU));
	fields = fields.concat(updateCharAttrs);
	getAttrs(fields, function (v) {
		var charAttMap = {},
		    setter;
		//set global values to int so we don't have to do it over and over per row.
		charAttMap = _underscore2.default.object(_underscore2.default.map(updateCharAttrs, function (attr) {
			return [attr, parseInt(v[attr], 10) || 0];
		}));
		_underscore2.default.extend(v, charAttMap);

		setter = _underscore2.default.reduce(ids, function (m, id) {
			var xtra = {};
			try {
				xtra = getRecalculatedAttack(id, v);
				resetWeaponSizeAndDamage(id, v.size, v, xtra, v.modify_dmg_by_size);
				_underscore2.default.extend(m, xtra);
			} catch (erri) {
				_exportsLoaderTASTheAaronSheet2.default.error("PFAttacks.recalcOtherFields erri", erri);
			} finally {
				return m;
			}
		}, {});
		if (_underscore2.default.size(setter)) {
			setAttrs(setter, {}, done);
		} else {
			done();
		}
	});
}
function recalcEquationFields(ids, callback) {
	var done = _underscore2.default.once(function () {
		if (typeof callback === "function") {
			callback();
		}
	}),
	    doneWithCalculatedFields = _underscore2.default.after(_underscore2.default.size(ids), done),
	    fields;
	fields = _underscore2.default.chain(ids).map(function (id) {
		var prefix = "repeating_weapon_" + id + "_";
		return [prefix + "damage", prefix + "attack", prefix + "damage-mod", prefix + "attack-mod"];
	}).flatten().value();
	getAttrs(fields, function (v) {
		try {
			_underscore2.default.each(ids, function (id) {
				var doneWithField = _underscore2.default.after(4, doneWithCalculatedFields),
				    prefix = "repeating_weapon_" + id + "_";
				if ((!v[prefix + "damage"] || v[prefix + "damage"] === "0" || v[prefix + "damage"] === "+0") && parseInt(v[prefix + "damage-mod"], 10) === 0) {
					doneWithField();
				} else {
					SWUtils.evaluateAndSetNumber(prefix + "damage", prefix + "damage-mod", 0, doneWithField, true);
				}
				if ((!v[prefix + "attack"] || v[prefix + "attack"] === "0" || v[prefix + "attack"] === "+0") && parseInt(v[prefix + "attack-mod"], 10) === 0) {
					doneWithField();
				} else {
					SWUtils.evaluateAndSetNumber(prefix + "attack", prefix + "attack-mod", 0, doneWithField, true);
				}
				SWUtils.setDropdownValue(prefix + "attack-type", prefix + "attack-type-mod", PFUtils.findAbilityInString, doneWithField, true);
				SWUtils.setDropdownValue(prefix + "damage-ability", prefix + "damage-ability-mod", PFUtils.findAbilityInString, doneWithField, true);
			});
		} catch (err) {
			_exportsLoaderTASTheAaronSheet2.default.error("recalcEquationFields", err);
			done();
		}
	});
}
function recalculateRepeatingWeapons(callback) {
	var done = _underscore2.default.once(function () {
		_exportsLoaderTASTheAaronSheet2.default.debug("leaving PFAttacks.recalculateRepeatingWeapons");
		if (typeof callback === "function") {
			callback();
		}
	});
	getSectionIDs("repeating_weapon", function (ids) {
		recalcEquationFields(ids, function () {
			recalcOtherFields(ids, done);
		});
	});
}
function getNewDefaults(ids, v, setter) {
	var localsetter, defaultSize;
	try {
		setter = setter || {};
		defaultSize = parseInt(v['size'], 10) || 0;
		localsetter = _underscore2.default.reduce(ids, function (m, id) {
			var prefix = 'repeating_weapon_' + id + '_';
			try {
				m[prefix + 'default_size'] = defaultSize;
				if (v[prefix + 'damage-dice-num']) {
					m[prefix + 'default_damage-dice-num'] = v[prefix + 'damage-dice-num'];
				} else {
					m[prefix + 'default_damage-dice-num'] = 0;
					m[prefix + 'damage-dice-num'] = 0;
				}
				if (v[prefix + 'damage-die']) {
					m[prefix + 'default_damage-die'] = v[prefix + 'damage-die'];
				} else {
					m[prefix + 'default_damage-die'] = 0;
					m[prefix + 'damage-die'] = 0;
				}
			} catch (errin) {
				_exportsLoaderTASTheAaronSheet2.default.error("PFAttacks.setNewDefaultsSync errin id " + id, errin);
			} finally {
				return m;
			}
		}, {});
		_underscore2.default.extend(setter, localsetter);
	} catch (errout) {
		_exportsLoaderTASTheAaronSheet2.default.error("PFAttacks.getNewDefaults errout ", errout);
	} finally {
		return setter;
	}
}
function setNewDefaults(callback) {
	var done = _underscore2.default.once(function () {
		_exportsLoaderTASTheAaronSheet2.default.debug("leaving PFAttacks.setNewDefaults");
		if (typeof callback === "function") {
			callback();
		}
	}),
	    finishedMigrating = _underscore2.default.once(function () {
		setAttrs({ 'migrated_attacklist_defaults111': 1 }, _PFConst2.default.silentParams, done);
	});
	//TAS.debug("At PFAttacks.setNewDefaults");
	getAttrs(['migrated_attacklist_defaults111'], function (vsize) {
		if (parseInt(vsize['migrated_attacklist_defaults111'], 10)) {
			done();
			return;
		}
		getSectionIDs('repeating_weapon', function (ids) {
			var fields;
			if (!(ids || _underscore2.default.size(ids))) {
				finishedMigrating();
				return;
			}
			fields = SWUtils.cartesianAppend(['repeating_weapon_'], ids, ['_damage-dice-num', '_damage-die']);
			fields.push('size');
			getAttrs(fields, function (v) {
				var setter = {};
				try {
					setter = getNewDefaults(ids, v, setter);
				} catch (errout) {
					_exportsLoaderTASTheAaronSheet2.default.error("PFAttacks.setNewDefaults errout ", errout);
				} finally {
					if (_underscore2.default.size(setter)) {
						setAttrs(setter, _PFConst2.default.silentParams, finishedMigrating);
					} else {
						done();
					}
				}
			});
		});
	});
}
function migrateRepeatingMacro(callback) {
	var done = _underscore2.default.once(function () {
		if (typeof callback === "function") {
			callback();
		}
	}),
	    migratedIteratives = function migratedIteratives() {
		setAttrs({ 'migrated_attack_macrosv1': 1 }, _PFConst2.default.silentParams, done);
	},
	    migrated = _underscore2.default.after(2, function () {
		PFMacros.migrateRepeatingMacrosMult(migratedIteratives, 'weapon', defaultIterativeAttrName, defaultIterativeRepeatingMacro, defaultIterativeRepeatingMacroMap, defaultIterativeDeletedMacroAttrs, defaultIterativeReplaceArray);
	});
	PFMacros.migrateRepeatingMacros(migrated, 'weapon', 'macro-text', defaultRepeatingMacro, defaultRepeatingMacroMap, defaultDeletedMacroAttrs, '@{PC-Whisper}');
	PFMacros.migrateRepeatingMacros(migrated, 'weapon', 'npc-macro-text', defaultRepeatingMacro, defaultRepeatingMacroMap, defaultDeletedMacroAttrs, '@{NPC-Whisper}');
}
function migrate(callback, oldversion) {
	var done = _underscore2.default.once(function () {
		_exportsLoaderTASTheAaronSheet2.default.debug("leaving PFAttacks.migrate");
		if (typeof callback === "function") {
			callback();
		}
	});
	getAttrs(["migrated_damage-multiplier", "migrated_attack_macrosv1"], function (v) {
		var migrateDamage = 0,
		    migrateMacrosv1 = 0,
		    migrateIteratives = 0;
		migrateDamage = parseInt(v["migrated_damage-multiplier"], 10) || 0;
		migrateMacrosv1 = parseInt(v["migrated_attack_macrosv1"], 10) || 0;
		getSectionIDs('repeating_weapon', function (ids) {
			var callmigrateMacrostov1, callmigrateMacrostov64, callmigrateRepeatingDamage, callSetDefaults;
			try {
				if (!ids || _underscore2.default.size(ids) <= 0) {
					setAttrs({ "migrated_damage-multiplier": 1, 'migrated_attack_macrosv1': 1, 'migrated_attacklist_defaults111': 1 }, _PFConst2.default.silentParams, done);
					return;
				}
				callSetDefaults = function callSetDefaults() {
					setNewDefaults(done);
				};
				callmigrateMacrostov1 = function callmigrateMacrostov1() {
					if (!migrateMacrosv1) {
						migrateRepeatingMacro(callSetDefaults);
					} else {
						callSetDefaults();
					}
				};
				callmigrateRepeatingDamage = function callmigrateRepeatingDamage() {
					if (!migrateDamage) {
						PFMigrate.migrateRepeatingDamage(ids, callmigrateMacrostov1);
					} else {
						callmigrateMacrostov1();
					}
				};
				callmigrateRepeatingDamage();
			} catch (err) {
				_exportsLoaderTASTheAaronSheet2.default.error("PFAttacks.migrate", err);
				done();
			} finally {}
		});
	});
}
function recalculate(callback, silently, oldversion) {
	var done = function done() {
		_exportsLoaderTASTheAaronSheet2.default.info("leaving PFAttacks.recalculate");
		if (typeof callback === "function") {
			callback();
		}
	};
	_exportsLoaderTASTheAaronSheet2.default.debug("at PFAttacks.recalculate");
	PFAttackGrid.recalculate(function () {
		migrate(function () {
			setAdvancedMacroCheckbox();
			recalculateRepeatingWeapons();
			PFAttackGrid.resetCommandMacro();
			PFAttackOptions.recalculate();
			updateAssociatedAttacksFromParents();
			done();
		}, oldversion);
	}, silently, oldversion);
}
function registerEventHandlers() {
	_underscore2.default.each(PFAttackGrid.attackGridFields, function (attackFields, attack) {
		on("change:" + attackFields.crit, _exportsLoaderTASTheAaronSheet2.default.callback(function eventAttackCrit(eventInfo) {
			if (eventInfo.sourceType === "player" || eventInfo.sourceType === "api") {
				_exportsLoaderTASTheAaronSheet2.default.debug("caught " + eventInfo.sourceAttribute + " event: " + eventInfo.sourceType);
				updateRepeatingWeaponsFromCrit(attack, eventInfo);
			}
		}));
	});
	on("change:repeating_weapon:attack-type-mod change:repeating_weapon:attack-mod", _exportsLoaderTASTheAaronSheet2.default.callback(function eventUpdateRepeatingWeaponAttackSheet(eventInfo) {
		if (eventInfo.sourceType === "sheetworker") {
			_exportsLoaderTASTheAaronSheet2.default.debug("caught " + eventInfo.sourceAttribute + " event: " + eventInfo.sourceType);
			updateRepeatingWeaponAttack(null, eventInfo);
		}
	}));
	on("change:repeating_weapon:masterwork change:repeating_weapon:proficiency", _exportsLoaderTASTheAaronSheet2.default.callback(function eventUpdateRepeatingWeaponAttackPlayer(eventInfo) {
		if (eventInfo.sourceType === "player" || eventInfo.sourceType === "api") {
			_exportsLoaderTASTheAaronSheet2.default.debug("caught " + eventInfo.sourceAttribute + " event: " + eventInfo.sourceType);
			updateRepeatingWeaponAttack(null, eventInfo);
		}
	}));
	on("change:repeating_weapon:damage-ability-mod change:repeating_weapon:damage-mod", _exportsLoaderTASTheAaronSheet2.default.callback(function eventUpdateRepeatingWeaponDamageSheet(eventInfo) {
		if (eventInfo.sourceType === "sheetworker") {
			_exportsLoaderTASTheAaronSheet2.default.debug("caught " + eventInfo.sourceAttribute + " event: " + eventInfo.sourceType);
			updateRepeatingWeaponDamage(null, eventInfo);
		}
	}));
	on("change:repeating_weapon:damage_ability_mult change:repeating_weapon:damage-ability-max", _exportsLoaderTASTheAaronSheet2.default.callback(function eventUpdateRepeatingWeaponDamagePlayer(eventInfo) {
		if (eventInfo.sourceType === "player" || eventInfo.sourceType === "api") {
			_exportsLoaderTASTheAaronSheet2.default.debug("caught " + eventInfo.sourceAttribute + " event: " + eventInfo.sourceType);
			updateRepeatingWeaponDamage(null, eventInfo);
		}
	}));
	on("change:repeating_weapon:attack-type", _exportsLoaderTASTheAaronSheet2.default.callback(function eventHandleRepeatingAttackDropdown(eventInfo) {
		_exportsLoaderTASTheAaronSheet2.default.debug("caught " + eventInfo.sourceAttribute + " event: " + eventInfo.sourceType);
		PFUtilsAsync.setRepeatingDropdownValue("weapon", null, "attack-type", "attack-type-mod");
		updateRepeatingWeaponCrit(null, eventInfo);
		if (eventInfo.sourceType === "player" || eventInfo.sourceType === "api") {
			setRepeatingWeaponInsertMacro(null, eventInfo);
			setRepeatingWeaponRangedFlag();
		}
	}));
	on("change:repeating_weapon:damage-ability", _exportsLoaderTASTheAaronSheet2.default.callback(function eventHandleRepeatingDamageDropdown(eventInfo) {
		_exportsLoaderTASTheAaronSheet2.default.debug("caught " + eventInfo.sourceAttribute + " event: " + eventInfo.sourceType);
		PFUtilsAsync.setRepeatingDropdownValue("weapon", null, "damage-ability", "damage-ability-mod");
	}));
	on("change:repeating_weapon:damage", _exportsLoaderTASTheAaronSheet2.default.callback(function eventRepeatingWeaponDamage(eventInfo) {
		_exportsLoaderTASTheAaronSheet2.default.debug("caught " + eventInfo.sourceAttribute + " event: " + eventInfo.sourceType);
		SWUtils.evaluateAndSetNumber("repeating_weapon_damage", "repeating_weapon_damage-mod");
	}));
	on("change:repeating_weapon:attack", _exportsLoaderTASTheAaronSheet2.default.callback(function eventRepeatingWeaponAttack(eventInfo) {
		_exportsLoaderTASTheAaronSheet2.default.debug("caught " + eventInfo.sourceAttribute + " event: " + eventInfo.sourceType);
		SWUtils.evaluateAndSetNumber("repeating_weapon_attack", "repeating_weapon_attack-mod");
	}));
	on("change:repeating_weapon:enhance", _exportsLoaderTASTheAaronSheet2.default.callback(function eventUpdateRepeatingWeaponAttackAndDamage(eventInfo) {
		_exportsLoaderTASTheAaronSheet2.default.debug("caught " + eventInfo.sourceAttribute + " event: " + eventInfo.sourceType);
		if (eventInfo.sourceType === "player" || eventInfo.sourceType === "api") {
			updateRepeatingWeaponAttack(null, eventInfo);
			updateRepeatingWeaponDamage();
		}
	}));
	on("change:repeating_weapon:crit_confirm", _exportsLoaderTASTheAaronSheet2.default.callback(function eventWeaponCritConfirmBonus(eventInfo) {
		if (eventInfo.sourceType === "player" || eventInfo.sourceType === "api") {
			_exportsLoaderTASTheAaronSheet2.default.debug("caught " + eventInfo.sourceAttribute + " event: " + eventInfo.sourceType);
			updateRepeatingWeaponCrit(null, eventInfo);
		}
	}));

	on("change:repeating_weapon:default_damage-dice-num change:repeating_weapon:default_damage-die change:repeating_weapon:default_size change:repeating_weapon:size_affects", _exportsLoaderTASTheAaronSheet2.default.callback(function eventWeaponDice(eventInfo) {
		if (eventInfo.sourceType === "player" || eventInfo.sourceType === "api") {
			_exportsLoaderTASTheAaronSheet2.default.debug("caught " + eventInfo.sourceAttribute + " event: " + eventInfo.sourceType);
			adjustDamageDiceAsync();
		}
	}));
	on("change:repeating_weapon:damage-dice-num change:repeating_weapon:damage-die", _exportsLoaderTASTheAaronSheet2.default.callback(function eventWeaponDice(eventInfo) {
		if (eventInfo.sourceType === "player" || eventInfo.sourceType === "api") {
			_exportsLoaderTASTheAaronSheet2.default.debug("caught " + eventInfo.sourceAttribute + " event: " + eventInfo.sourceType);
			syncDefaultDamageDiceAsync();
		}
	}));
	on("remove:repeating_weapon change:repeating_weapon:attack-type change:_reporder_repeating_weapon change:repeating_weapon:group change:repeating_weapon:name change:include_attack_totals", _exportsLoaderTASTheAaronSheet2.default.callback(function eventRepeatingWeaponChange(eventInfo) {
		if (eventInfo.sourceType === "player" || eventInfo.sourceType === "api") {
			_exportsLoaderTASTheAaronSheet2.default.debug("caught " + eventInfo.sourceAttribute + " event: " + eventInfo.sourceType);
			PFAttackGrid.resetCommandMacro();
		}
	}));

	on("change:dmg-mod", _exportsLoaderTASTheAaronSheet2.default.callback(function eventUpdateRepeatingWeaponDamageTotal(eventInfo) {
		if (eventInfo.sourceType === "sheetworker") {
			_exportsLoaderTASTheAaronSheet2.default.debug("caught " + eventInfo.sourceAttribute + " event: " + eventInfo.sourceType);
			updateRepeatingWeaponDamages(eventInfo);
		}
	}));
}
registerEventHandlers();
_PFLog.PFConsole.log('   PFAttacks module loaded        ');
_PFLog.PFLog.modulecount++;

/***/ }),
/* 24 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
	value: true
});
exports.migrate = migrate;
exports.createTotalBuffEntry = createTotalBuffEntry;
exports.recalculate = recalculate;

var _underscore = __webpack_require__(2);

var _underscore2 = _interopRequireDefault(_underscore);

var _PFLog = __webpack_require__(0);

var _exportsLoaderTASTheAaronSheet = __webpack_require__(1);

var _exportsLoaderTASTheAaronSheet2 = _interopRequireDefault(_exportsLoaderTASTheAaronSheet);

var _SWUtils = __webpack_require__(4);

var SWUtils = _interopRequireWildcard(_SWUtils);

var _PFConst = __webpack_require__(3);

var _PFConst2 = _interopRequireDefault(_PFConst);

var _PFUtils = __webpack_require__(5);

var PFUtils = _interopRequireWildcard(_PFUtils);

var _PFAbilityScores = __webpack_require__(10);

var PFAbilityScores = _interopRequireWildcard(_PFAbilityScores);

var _PFSaves = __webpack_require__(18);

var PFSaves = _interopRequireWildcard(_PFSaves);

var _PFAttackGrid = __webpack_require__(7);

var PFAttackGrid = _interopRequireWildcard(_PFAttackGrid);

var _PFDefense = __webpack_require__(12);

var PFDefense = _interopRequireWildcard(_PFDefense);

var _PFHealth = __webpack_require__(17);

var PFHealth = _interopRequireWildcard(_PFHealth);

var _PFChecks = __webpack_require__(16);

var PFChecks = _interopRequireWildcard(_PFChecks);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var buffColumns = PFAbilityScores.abilities.concat(["Ranged", "Melee", "DMG", "AC", "Touch", "CMD", "HP-temp", "Fort", "Will", "Ref", "Check", "CasterLevel"]),
    events = {
	// events pass in the column updated macro-text is "either", buffs are auto only
	buffTotalNonAbilityEvents: {
		//ranged and attack are in the PFAttackGrid module
		"Fort": [PFSaves.updateSave],
		"Will": [PFSaves.updateSave],
		"Ref": [PFSaves.updateSave]
	},
	buffTotalAbilityEvents: {
		"STR": [PFAbilityScores.updateAbilityScore],
		"DEX": [PFAbilityScores.updateAbilityScore],
		"CON": [PFAbilityScores.updateAbilityScore],
		"INT": [PFAbilityScores.updateAbilityScore],
		"WIS": [PFAbilityScores.updateAbilityScore],
		"CHA": [PFAbilityScores.updateAbilityScore]
	},
	// events do NOT pass in column updated
	buffTotalEventsNoParam: {
		"DMG": [PFAttackGrid.updateDamage],
		"AC": [PFDefense.updateDefenses],
		"Touch": [PFDefense.updateDefenses],
		"CMD": [PFDefense.updateDefenses],
		"HP-temp": [PFHealth.updateTempMaxHP],
		"Check": [PFChecks.applyConditions]
	}
},

//why did i make this? it just repeats the ability scores
allBuffColumns = buffColumns; //buffColumns.concat(PFAbilityScores.abilities),
/* this is so old no one will be using it*/
function migrate(outerCallback) {
	var done = _underscore2.default.once(function () {
		_exportsLoaderTASTheAaronSheet2.default.debug("leaving PFBuffs.migrate");
		if (typeof outerCallback === "function") {
			outerCallback();
		}
	});
	getAttrs(["migrated_buffs", "migrated_effects"], function (v) {
		var setter = {};
		try {
			if (parseInt(v.migrated_buffs, 10) !== 1) {
				setter.migrated_buffs = 1;
			}
			if (parseInt(v.migrated_effects, 10) !== 1) {
				setter.migrated_effects = 1;
			}
		} catch (err) {
			_exportsLoaderTASTheAaronSheet2.default.error("PFBuffs.migrate", err);
		} finally {
			if (_underscore2.default.size(setter) > 0) {
				setAttrs(setter, {
					silent: true
				}, done);
			} else {
				done();
			}
		}
	});
}
/** createTotalBuffEntry - used by parseNPC
 * adds enabled buff for a new sheet where this is the only buff so sets total as well.
 * adds attributes to array passed in
 * @param {string} name name of buff row  for buff-name
 * @param {string} bufftype  -string from buffColumns
 * @param {string} buffmacro ?
 * @param {number} modamount - value for the buff
 * @param {jsobjectmap} newRowAttrs - object of {name:value} to pass to setAttrs
 * @return {jsobjectmap} return newRowAttrs after adding maps to it.
 */
function createTotalBuffEntry(name, bufftype, buffmacro, modamount, newRowAttrs) {
	var newRowId = generateRowID();
	newRowAttrs = newRowAttrs || {};
	newRowAttrs["repeating_buff_" + newRowId + "_buff-name"] = name;
	newRowAttrs["repeating_buff_" + newRowId + "_buff-" + bufftype + "_macro-text"] = buffmacro;
	newRowAttrs["repeating_buff_" + newRowId + "_buff-" + bufftype] = modamount;
	newRowAttrs["repeating_buff_" + newRowId + "_buff-" + bufftype + "-show"] = "1";
	newRowAttrs["repeating_buff_" + newRowId + "_buff-enable_toggle"] = "1";
	newRowAttrs["buff_" + bufftype + "-total"] = modamount;
	return newRowAttrs;
}
function resetStatuspanel(callback) {
	var done = _underscore2.default.once(function () {
		if (typeof callback === "function") {
			callback();
		}
	}),
	    buffTotalsColumns,
	    fields;
	try {
		buffTotalsColumns = _underscore2.default.extend(_underscore2.default.map(allBuffColumns, function (col) {
			return "buff_" + col + "-total";
		}), _underscore2.default.map(PFAbilityScores.abilities, function (col) {
			return "buff_" + col + "-total_penalty";
		}));
		fields = SWUtils.cartesianAppend(["buff_"], buffColumns, ["-total", "_exists"]).concat(SWUtils.cartesianAppend(["buff_"], PFAbilityScores.abilities, ["-total", "-total_penalty", "_exists", "_penalty_exists"]));
		getAttrs(fields, function (v) {
			var setter = {};
			try {
				setter = _underscore2.default.reduce(allBuffColumns, function (memo, col) {
					var val, field, exists;
					try {
						val = parseInt(v["buff_" + col + "-total"], 10) || 0;field = "buff_" + col + "_exists";exists = parseInt(v[field], 10) || 0;
						if (val !== 0 && !exists) {
							memo[field] = "1";
						} else if (val === 0 && exists) {
							memo[field] = "";
						}
					} catch (erri1) {} finally {
						return memo;
					}
				}, setter);
				setter = _underscore2.default.reduce(PFAbilityScores.abilities, function (memo, col) {
					var val, field, exists;
					try {
						val = parseInt(v["buff_" + col + "-total_penalty"], 10) || 0;field = "buff_" + col + "_penalty_exists";exists = parseInt(v[field], 10) || 0;
						if (val !== 0 && !exists) {
							memo[field] = "1";
						} else if (val === 0 && exists) {
							memo[field] = "";
						}
					} catch (erri1) {} finally {
						return memo;
					}
				}, setter);
			} catch (err) {
				_exportsLoaderTASTheAaronSheet2.default.error("PFBuffs.resetStatuspanel error inside calculate exists", err);
			} finally {
				if (_underscore2.default.size(setter) > 0) {
					setAttrs(setter, { silent: true }, done);
				} else {
					done();
				}
			}
		});
	} catch (errO) {
		_exportsLoaderTASTheAaronSheet2.default.error("PFBuffs.resetStatuspanel error creating field array, abort:", errO);
		done();
	}
}
/* Sets 1 or 0 for buffexists in status panel - only called by updateBuffTotals. */
function toggleBuffStatusPanel(col, val) {
	var field = "buff_" + col + "_exists";
	getAttrs([field], function (v) {
		var setter = {};
		try {
			if (val !== 0 && parseInt(v[field], 10) !== 1) {
				setter[field] = "1";
			} else if (val === 0 && parseInt(v[field], 10) === 1) {
				setter[field] = "";
			}
		} catch (err) {
			_exportsLoaderTASTheAaronSheet2.default.error("PFBuffs.toggleBuffStatusPanel", err);
		} finally {
			if (_underscore2.default.size(setter) > 0) {
				setAttrs(setter, { silent: true });
			}
		}
	});
}
function setBuff(id, col, callback, silently) {
	var done = function done() {
		if (typeof callback === "function") {
			callback();
		}
	},
	    idStr = SWUtils.getRepeatingIDStr(id),
	    prefix = "repeating_buff_" + idStr + "buff-" + col;
	SWUtils.evaluateAndSetNumber(prefix + "_macro-text", prefix, 0, done);
}
function updateBuffTotals(col, callback) {
	var done = _underscore2.default.once(function () {
		_exportsLoaderTASTheAaronSheet2.default.debug("leaving PFBuffs.updateBuffTotals");
		if (typeof callback === "function") {
			callback();
		}
	}),
	    isAbility = PFAbilityScores.abilities.indexOf(col) >= 0;
	try {
		_exportsLoaderTASTheAaronSheet2.default.repeating('buff').attrs('buff_' + col + '-total', 'buff_' + col + '-total_penalty').fields('buff-' + col, 'buff-enable_toggle', 'buff-' + col + '-show').reduce(function (m, r) {
			try {
				var tempM = r.I['buff-' + col] * ((r.I['buff-enable_toggle'] || 0) & (r.I['buff-' + col + '-show'] || 0));
				tempM = tempM || 0;
				if (!(isAbility && tempM < 0)) {
					m.mod += tempM;
				} else {
					m.pen += tempM;
				}
			} catch (err) {
				_exportsLoaderTASTheAaronSheet2.default.error("PFBuffs.updateBuffTotals error:" + col, err);
			} finally {
				return m;
			}
		}, {
			mod: 0,
			pen: 0
		}, function (m, r, a) {
			try {
				//TAS.debug('setting buff_' + col + '-total to '+ (m.mod||0));
				a.S['buff_' + col + '-total'] = m.mod || 0;
				toggleBuffStatusPanel(col, m.mod);
				if (isAbility) {
					a.S['buff_' + col + '-total_penalty'] = m.pen || 0;
					//TAS.debug("now also check ability penalty status");
					toggleBuffStatusPanel(col + "_penalty", m.pen);
				}
			} catch (errfinalset) {
				_exportsLoaderTASTheAaronSheet2.default.error("error setting buff_" + col + "-total");
			}
		}).execute(done);
	} catch (err2) {
		_exportsLoaderTASTheAaronSheet2.default.error("PFBuffs.updateBuffTotals error:" + col, err2);
		done();
	}
}
function recalculate(callback, silently, oldversion) {
	var done = _underscore2.default.once(function () {
		resetStatuspanel();
		_exportsLoaderTASTheAaronSheet2.default.debug("Leaving PFBuffs.recalculate");
		if (typeof callback === "function") {
			callback();
		}
	}),
	    numColumns = _underscore2.default.size(allBuffColumns),
	    columnDone = _underscore2.default.after(numColumns, done),
	    colsDoneCount = 0,
	    recalculateBuffColumn = function recalculateBuffColumn(ids, col) {
		var rowtotal = _underscore2.default.size(ids),
		    totalItUp = _underscore2.default.once(function () {
			colsDoneCount++;
			updateBuffTotals(col, columnDone);
		}),
		    rowDone;
		if (rowtotal <= 0) {
			totalItUp();
			return;
		}
		rowDone = _underscore2.default.after(rowtotal, function () {
			totalItUp();
		});
		try {
			_underscore2.default.each(ids, function (id) {
				try {
					getAttrs(['repeating_buff_' + id + '_buff-enable_toggle', 'repeating_buff_' + id + '_buff-' + col + '-show'], function (v) {
						if (parseInt(v['repeating_buff_' + id + '_buff-enable_toggle'], 10) && parseInt(v['repeating_buff_' + id + '_buff-' + col + '-show'], 10)) {
							setBuff(id, col, rowDone, silently);
						} else {
							rowDone();
						}
					});
				} catch (err) {
					_exportsLoaderTASTheAaronSheet2.default.error("PFBuffs.recalculate_recalculateBuffColumn:" + col + ", rowid" + id, err);
					rowDone();
				}
			});
		} catch (err2) {
			_exportsLoaderTASTheAaronSheet2.default.error("PFBuffs.recalculate_recalculateBuffColumn OUTER error:" + col, err2);
			totalItUp();
		}
	};
	getSectionIDs("repeating_buff", function (ids) {
		//TAS.debug("pfbuffsrecalculate there are " + _.size(ids) + " rows and " + numColumns + " columns");
		try {
			if (_underscore2.default.size(ids) > 0) {
				_underscore2.default.each(allBuffColumns, function (col) {
					recalculateBuffColumn(ids, col);
				});
			} else {
				_underscore2.default.each(allBuffColumns, function (col) {
					updateBuffTotals(col, columnDone, silently);
				});
			}
		} catch (err) {
			_exportsLoaderTASTheAaronSheet2.default.error("PFBuffs.recalculate_recalcbuffs", err);
			//what to do? just quit
			done();
		}
	});
}
function registerEventHandlers() {
	//BUFFS
	_underscore2.default.each(buffColumns, function (col) {
		//Evaluate macro text upon change
		var eventToWatch = "change:repeating_buff:buff-" + col + "_macro-text";
		on(eventToWatch, _exportsLoaderTASTheAaronSheet2.default.callback(function eventBuffMacroText(eventInfo) {
			_exportsLoaderTASTheAaronSheet2.default.debug("caught " + eventInfo.sourceAttribute + " for column " + col + ", event: " + eventInfo.sourceType);
			setBuff(null, col);
		}));
		//Update total for a buff upon Mod change
		eventToWatch = "change:repeating_buff:buff-" + col + " change:repeating_buff:buff-" + col + "-show";
		on(eventToWatch, _exportsLoaderTASTheAaronSheet2.default.callback(function PFBuffs_updateBuffTotalsShow(eventInfo) {
			_exportsLoaderTASTheAaronSheet2.default.debug("caught " + eventInfo.sourceAttribute + " event: " + eventInfo.sourceType);
			if (eventInfo.sourceType === "sheetworker" || /show/i.test(eventInfo.sourceAttribute)) {
				updateBuffTotals(col);
			}
		}));
	});
	on("change:repeating_buff:buff-enable_toggle remove:repeating_buff", _exportsLoaderTASTheAaronSheet2.default.callback(function PFBuffs_updateBuffTotalsToggle(eventInfo) {
		_exportsLoaderTASTheAaronSheet2.default.debug("caught " + eventInfo.sourceAttribute + " event: " + eventInfo.sourceType);
		if (eventInfo.sourceType === "sheetworker" || /toggle/i.test(eventInfo.sourceAttribute)) {
			_underscore2.default.each(buffColumns, function (col) {
				updateBuffTotals(col);
			});
		}
	}));
	//generic easy buff total updates
	_underscore2.default.each(events.buffTotalNonAbilityEvents, function (functions, col) {
		var eventToWatch = "change:buff_" + col + "-total";
		_underscore2.default.each(functions, function (methodToCall) {
			on(eventToWatch, _exportsLoaderTASTheAaronSheet2.default.callback(function event_updateBuffNonAbilityEvents(eventInfo) {
				_exportsLoaderTASTheAaronSheet2.default.debug("caught " + eventInfo.sourceAttribute + " event: " + eventInfo.sourceType);
				if (eventInfo.sourceType === "sheetworker") {
					methodToCall(col, eventInfo);
				}
			}));
		});
	});
	_underscore2.default.each(events.buffTotalAbilityEvents, function (functions, col) {
		var eventToWatch = "change:buff_" + col + "-total change:buff_" + col + "-total_penalty";
		_underscore2.default.each(functions, function (methodToCall) {
			on(eventToWatch, _exportsLoaderTASTheAaronSheet2.default.callback(function event_updateBuffAbilityEvents(eventInfo) {
				_exportsLoaderTASTheAaronSheet2.default.debug("caught " + eventInfo.sourceAttribute + " event: " + eventInfo.sourceType);
				if (eventInfo.sourceType === "sheetworker") {
					methodToCall(col, eventInfo);
				}
			}));
		});
	});
	_underscore2.default.each(events.buffTotalEventsNoParam, function (functions, col) {
		var eventToWatch = "change:buff_" + col + "-total";
		_underscore2.default.each(functions, function (methodToCall) {
			on(eventToWatch, _exportsLoaderTASTheAaronSheet2.default.callback(function eventBuffTotalNoParam(eventInfo) {
				_exportsLoaderTASTheAaronSheet2.default.debug("caught " + eventInfo.sourceAttribute + " event: " + eventInfo.sourceType);
				if (eventInfo.sourceType === "sheetworker") {
					methodToCall(null, false, eventInfo);
				}
			}));
		});
	});
}
registerEventHandlers();
_PFLog.PFConsole.log('   PFBuffs module loaded          ');
_PFLog.PFLog.modulecount++;

/***/ }),
/* 25 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.classRows = exports.raceColumns = exports.classColumns = undefined;
exports.setMulticlassed = setMulticlassed;
exports.setHitPoints = setHitPoints;
exports.migrate = migrate;
exports.recalculate = recalculate;

var _underscore = __webpack_require__(2);

var _underscore2 = _interopRequireDefault(_underscore);

var _PFLog = __webpack_require__(0);

var _exportsLoaderTASTheAaronSheet = __webpack_require__(1);

var _exportsLoaderTASTheAaronSheet2 = _interopRequireDefault(_exportsLoaderTASTheAaronSheet);

var _SWUtils = __webpack_require__(4);

var SWUtils = _interopRequireWildcard(_SWUtils);

var _PFConst = __webpack_require__(3);

var _PFConst2 = _interopRequireDefault(_PFConst);

var _PFUtils = __webpack_require__(5);

var PFUtils = _interopRequireWildcard(_PFUtils);

var _PFSpells = __webpack_require__(14);

var PFSpells = _interopRequireWildcard(_PFSpells);

var _PFSpellCasterClasses = __webpack_require__(21);

var PFSpellCasterClasses = _interopRequireWildcard(_PFSpellCasterClasses);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var classColumns = exports.classColumns = ["skill", "fcskill", "fcalt", "bab", "Fort", "Ref", "Will", "level"],
    raceColumns = exports.raceColumns = ['skill', 'bab', 'Fort', 'Ref', 'Will', 'hd-num'],
    classRows = exports.classRows = ["0", "1", "2", "3", "4", "5"];
var events = {
    basehp: "change:auto_calc_hp change:autohp_percent change:maxhp_lvl1",
    racialhp: "change:npc-hd-num change:npc-hd change:npc-hp",
    perClassRowhp: "change:class-REPLACE-level change:class-REPLACE-hd change:class-REPLACE-hp change:class-REPLACE-fchp"
};

function setMulticlassed() {
    var fields = ['multiclassed', 'class-0-level', 'class-1-level', 'class-2-level', 'class-3-level', 'class-4-level', 'class-5-level', 'npc-hd-num'];
    //TAS.debug("at PFClassRaceGrid.setMulticlassed");
    getAttrs(fields, function (v) {
        var isMulti = parseInt(v.multiclassed, 10) || 0,
            totalWLevels;
        totalWLevels = Math.min(1, parseInt(v['class-0-level'], 10) || 0) + Math.min(1, parseInt(v['class-1-level'], 10) || 0) + Math.min(1, parseInt(v['class-2-level'], 10) || 0) + Math.min(1, parseInt(v['class-3-level'], 10) || 0) + Math.min(1, parseInt(v['class-4-level'], 10) || 0) + Math.min(1, parseInt(v['class-5-level'], 10) || 0) + Math.min(1, parseInt(v['npc-hd-num'], 10) || 0);
        //TAS.debug("PFClassRaceGrid.setMulticlassed, "+ totalWLevels +" rows have levels");
        if (totalWLevels > 1) {
            if (!isMulti) {
                setAttrs({ multiclassed: 1 });
            }
        } else if (isMulti) {
            setAttrs({ multiclassed: 0 });
        }
    });
}
/** PFClassRaceGrid.updateClassInformation Updates totals at bottom of Class Information grid
 *@param {string} col end of name of attribute that references column, must be in classColumns or raceColumns 
 *@param {function} callback optional call when finished updating
 *@param {bool} silently if true then call setAttrs with PFConst.silentParams
 */
function updateClassInformation(col, callback, silently, eventInfo) {
    var done = function done() {
        if (typeof callback === "function") {
            callback();
        }
    },
        updateClassInformationInner = function updateClassInformationInner(col, callback, silently) {
        var getFields = [],
            totalColName,
            col0Name,
            col1Name,
            col2Name,
            col3Name,
            col4Name,
            col5Name,
            col0NameTwo,
            col1NameTwo,
            col2NameTwo,
            col3NameTwo,
            col4NameTwo,
            col5NameTwo;

        if (col === "fchp") {
            col = "hp";
        } else if (col === "hd-num") {
            col = "level";
        }

        col0Name = "class-0-" + col;
        col1Name = "class-1-" + col;
        col2Name = "class-2-" + col;
        col3Name = "class-3-" + col;
        col4Name = "class-4-" + col;
        col5Name = "class-5-" + col;

        totalColName = col === "bab" || col === "level" ? col : "total-" + col;
        getFields = [totalColName, col0Name, col1Name, col2Name, col3Name, col4Name, col5Name];
        if (col !== "skill") {
            //add npc values
            switch (col) {
                case 'bab':
                case 'Fort':
                case 'Will':
                case 'Ref':
                    getFields = getFields.concat(["npc-" + col]);
                    break;
                case 'level':
                    getFields = getFields.concat(["npc-hd-num"]);
                    break;
            }
            //TAS.debug(getFields);
            SWUtils.updateRowTotal(getFields, 0, [], 0, done, silently);
        } else {
            col0NameTwo = "class-0-level";
            col1NameTwo = "class-1-level";
            col2NameTwo = "class-2-level";
            col3NameTwo = "class-3-level";
            col4NameTwo = "class-4-level";
            col5NameTwo = "class-5-level";

            getFields = getFields.concat([col0NameTwo, col1NameTwo, col2NameTwo, col3NameTwo, col4NameTwo, col5NameTwo, "npc-skill", 'npc-hd-num']);
            //TAS.debug(getFields);
            getAttrs(getFields, function (v) {
                var setter = {},
                    currTot = 0,
                    params = {},
                    tot = 0;
                tot = Math.floor((parseFloat(v[col0Name], 10) || 0) * (parseInt(v[col0NameTwo], 10) || 0) + (parseFloat(v[col1Name], 10) || 0) * (parseInt(v[col1NameTwo], 10) || 0) + (parseFloat(v[col2Name], 10) || 0) * (parseInt(v[col2NameTwo], 10) || 0) + (parseFloat(v[col3Name], 10) || 0) * (parseInt(v[col3NameTwo], 10) || 0) + (parseFloat(v[col4Name], 10) || 0) * (parseInt(v[col4NameTwo], 10) || 0) + (parseFloat(v[col5Name], 10) || 0) * (parseInt(v[col5NameTwo], 10) || 0) + (parseFloat(v["npc-skill"], 10) || 0) * (parseInt(v['npc-hd-num'], 10) || 0));
                currTot = parseInt(v[totalColName], 10);
                if (isNaN(currTot) || tot !== currTot) {
                    setter[totalColName] = tot;
                    if (silently) {
                        params = _PFConst2.default.silentParams;
                    }
                    setAttrs(setter, params, done);
                } else {
                    done();
                }
            });
        }
    };
    //TAS.debug("at PFClassRaceGrid.updateClassInformation: " + col);
    //no sum for hd 
    if (!col || col === "hd" || col === "hp") {
        _exportsLoaderTASTheAaronSheet2.default.warn("at updateClassInformation called with bad column:" + col);
        done();
        return;
    }
    if (/^npc/i.test(col)) {
        col = col.slice(4);
    }
    updateClassInformationInner(col, done, silently);
}

function setHitPoints(callback, silently, eventInfo) {
    var done = _underscore2.default.once(function () {
        if (typeof callback === "function") {
            _exportsLoaderTASTheAaronSheet2.default.debug("Leaving updateClassHpGrid");
            callback();
        }
    }),
        fields = ["auto_calc_hp", "autohp_percent", "maxhp_lvl1", "is_npc", "set_pfs", "total-hp", "NPC-HP", "npc-hd-num", "npc-hd", "class-0-hp", "class-0-level", "class-0-hd", "class-0-fchp", "class-1-hp", "class-1-level", "class-1-hd", "class-1-fchp", "class-2-hp", "class-2-level", "class-2-hd", "class-2-fchp", "class-3-hp", "class-3-level", "class-3-hd", "class-3-fchp", "class-4-hp", "class-4-level", "class-4-hd", "class-4-fchp", "class-5-hp", "class-5-level", "class-5-hd", "class-5-fchp"];
    getAttrs(fields, function (v) {
        var auto = 0,
            maxFirst = 0,
            mult = 1,
            isPFS = 0,
            setter = {},
            isNPC = 0,
            loudSetter = {},
            currrowhp = 0,
            rowhp = 0,
            level = 0,
            hd = 0,
            totalhp = 0,
            rowUpdated = -1,
            matches;
        try {
            //TAS.debug("at autocalc hp",v);
            auto = parseInt(v.auto_calc_hp, 10) || 0;
            if (eventInfo && eventInfo.sourceAttribute) {
                matches = eventInfo.sourceAttribute.match(/(\d)/);
                if (matches && matches[1]) {
                    rowUpdated = parseInt(matches[1], 10) || 0;
                } else if (/NPC/i.test(eventInfo.sourceAttribute)) {
                    rowUpdated = 6;
                }
            }
            if (auto) {
                isPFS = parseInt(v.set_pfs, 10) || 0;
                isNPC = parseInt(v.is_npc, 10) || 0;
                mult = PFUtils.getAutoHPPercentMultiplier(v.autohp_percent);
                maxFirst = parseInt(v.maxhp_lvl1, 10) || 0;
                if (maxFirst) {
                    if (rowUpdated === 6) {
                        rowUpdated = -1;
                    }
                }
            }
            //TAS.debug("at autocalc hp, rowupdated is:" + rowUpdated);
            level = parseInt(v['npc-hd-num'], 10) || 0;
            hd = parseInt(v['npc-hd'], 10);
            currrowhp = parseInt(v['NPC-HP'], 10) || 0;
            if (isNaN(hd) || !auto) {
                totalhp += currrowhp;
            } else if (level > 0 && hd > 0) {
                if (rowUpdated === 6 || rowUpdated === -1) {
                    //first do NPC.
                    rowhp = PFUtils.getAvgHP(level, hd, mult, maxFirst, false); //monster type hd uses regular rules even for PFS animal companions
                    totalhp += rowhp;
                    //TAS.debug("adding: "+rowhp);
                    if (rowhp !== currrowhp) {
                        setter['NPC-HP'] = rowhp;
                    }
                } else {
                    totalhp += currrowhp;
                }
                if (maxFirst) {
                    maxFirst = 0;
                }
                //TAS.debug("adding "+currrowhp);
            } else if (hd === 0) {
                if (currrowhp !== 0) {
                    setter['NPC-HP'] = 0;
                }
            }

            _underscore2.default.each(classRows, function (rowindex) {
                var fchp = 0,
                    row = parseInt(rowindex, 10);
                rowhp = 0;
                level = parseInt(v["class-" + rowindex + "-level"], 10) || 0;
                hd = parseInt(v["class-" + rowindex + "-hd"], 10);
                currrowhp = parseInt(v["class-" + rowindex + "-hp"], 10) || 0;
                fchp = parseInt(v["class-" + rowindex + "-fchp"], 10) || 0;
                if (isNaN(hd) || !auto) {
                    totalhp += currrowhp + fchp;
                } else if (level > 0 && hd > 0) {
                    if (rowUpdated === -1 || rowUpdated === row) {
                        rowhp = PFUtils.getAvgHP(level, hd, mult, maxFirst, isPFS);
                        totalhp += rowhp + fchp;
                        if (rowhp !== currrowhp) {
                            setter["class-" + rowindex + "-hp"] = rowhp;
                        }
                    } else {
                        totalhp += currrowhp + fchp;
                    }
                    if (maxFirst) {
                        maxFirst = 0;
                    }
                } else if (hd === 0) {
                    if (currrowhp !== 0) {
                        setter["class-" + rowindex + "-hp"] = 0;
                    }
                }
            });
            if (totalhp !== parseInt(v['total-hp'], 10)) {
                loudSetter["total-hp"] = totalhp;
            }
        } catch (err) {
            _exportsLoaderTASTheAaronSheet2.default.error("PFClassRaceGrid.setHitPoints", err);
        } finally {
            if (_underscore2.default.size(loudSetter) > 0) {
                setAttrs(loudSetter);
            }
            if (_underscore2.default.size(setter) > 0) {
                setAttrs(setter, _PFConst2.default.silentParams, done);
            } else {
                done();
            }
        }
    });
}
function migrate(callback, oldversion) {
    if (typeof callback === "function") {
        callback();
    }
}
function recalculate(callback, silently, oldversion) {
    var done = _underscore2.default.once(function () {
        _exportsLoaderTASTheAaronSheet2.default.debug("leaving PFClassRaceGrid.recalculate");
        if (typeof callback === "function") {
            callback();
        }
    }),
        numcols = classColumns.length,
        columnDone = _underscore2.default.after(numcols, function () {
        setHitPoints(done, silently);
    });
    _underscore2.default.each(classColumns, function (col) {
        updateClassInformation(col, columnDone, silently);
    });
    setMulticlassed();
}
function registerEventHandlers() {
    var tempString = "";
    _underscore2.default.each(classColumns, function (col) {
        var eventsToWatch = _underscore2.default.map(classRows, function (row) {
            return "change:class-" + row + "-" + col;
        }).join(" ");
        on(eventsToWatch, _exportsLoaderTASTheAaronSheet2.default.callback(function eventTotalClassInformation(eventInfo) {
            _exportsLoaderTASTheAaronSheet2.default.debug("caught " + eventInfo.sourceAttribute + " event: " + eventInfo.sourceType);
            if (eventInfo.sourceType === "player" || eventInfo.sourceType === "api") {
                updateClassInformation(col, null, null, eventInfo);
            }
        }));
        if (col === "level") {
            on(eventsToWatch, _exportsLoaderTASTheAaronSheet2.default.callback(function eventTotalClassInformationLevel(eventInfo) {
                _exportsLoaderTASTheAaronSheet2.default.debug("caught " + eventInfo.sourceAttribute + " event: " + eventInfo.sourceType);
                if (eventInfo.sourceType === "player" || eventInfo.sourceType === "api") {
                    updateClassInformation("skill", null, null, eventInfo);
                    setMulticlassed();
                }
            }));
        }
    });
    _underscore2.default.each(raceColumns, function (col) {
        on("change:npc-" + col, _exportsLoaderTASTheAaronSheet2.default.callback(function eventUpdateRacialRow(eventInfo) {
            _exportsLoaderTASTheAaronSheet2.default.debug("caught " + eventInfo.sourceAttribute + " event: " + eventInfo.sourceType);
            if (eventInfo.sourceType === "player" || eventInfo.sourceType === "api" || eventInfo.sourceType === "sheetworker" && eventInfo.sourceAttribute.slice(-2) === 'hp') {
                if (col === 'hd-num') {
                    updateClassInformation('level', null, null, eventInfo);
                    updateClassInformation("skill", null, null, eventInfo);
                    setMulticlassed();
                } else {
                    updateClassInformation(col, null, null, eventInfo);
                }
            }
        }));
    });
    _underscore2.default.each(classRows, function (row) {
        tempString = events.perClassRowhp.replace(/REPLACE/g, row);
        on(tempString, _exportsLoaderTASTheAaronSheet2.default.callback(function eventUpdateClassHitPoints(eventInfo) {
            _exportsLoaderTASTheAaronSheet2.default.debug("caught " + eventInfo.sourceAttribute + " event: " + eventInfo.sourceType);
            if (eventInfo.sourceType === "player" || eventInfo.sourceType === "api") {
                setHitPoints(null, null, eventInfo);
                //can we move this to spells? or keep here
                //or do we even need to do it, isn't roll20 handling?
                if (/level/i.test(eventInfo.sourceAttribute)) {
                    PFSpellCasterClasses.updateCasterFromClassLevel(parseInt(row, 10), eventInfo);
                }
            }
        }));
    });
    on(events.racialhp, _exportsLoaderTASTheAaronSheet2.default.callback(function eventUpdateRacialHitPoints(eventInfo) {
        _exportsLoaderTASTheAaronSheet2.default.debug("caught " + eventInfo.sourceAttribute + " event: " + eventInfo.sourceType);
        if (eventInfo.sourceType === "player" || eventInfo.sourceType === "api") {
            setHitPoints(null, null, eventInfo);
            if (eventInfo.sourceAttribute === "npc-hd-num") {
                PFSpellCasterClasses.updateCasterFromClassLevel(6, eventInfo);
            }
        }
    }));
    on(events.basehp, _exportsLoaderTASTheAaronSheet2.default.callback(function eventHPAutoCalcSwitches(eventInfo) {
        _exportsLoaderTASTheAaronSheet2.default.debug("caught " + eventInfo.sourceAttribute + " event: " + eventInfo.sourceType);
        if (eventInfo.sourceType === "player" || eventInfo.sourceType === "api") {
            setHitPoints();
        }
    }));
}
registerEventHandlers();
_PFLog.PFConsole.log('   PFClassRaceGrid module loaded  ');
_PFLog.PFLog.modulecount++;

/***/ }),
/* 26 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
	value: true
});
exports.default = {
	/* Pathfinder RULE constants for parsing */
	unarmedAttacksRegExp: /unarmed|strike|punch|palm|flurry|blow|touch/i,
	combatManeuversRegExp: /bull\s*rush|trip|disarm|dirty\s*trick|drag|grapple|overrun|reposition|steal|sunder|trip/i,
	primaryNaturalAttacksRegExp: /bite|claw|gore|slam|sting|talon/i,
	importantFeatRegExp: /Weapon Fine|^Run$|Enduran|Defensive Combat Train|Agile Maneuv|Arcane Arm|Combat Cast|Critical Focus|Skill Focus|Critical|Intimidating Prow/i,
	spAttackAttacks: /blooddrain|touch|energydrain|bleed|burn|constrict|trample|engulf|heat|powerfulcharge|swallowwhole|constrict/i,
	spAttackAttacksPreProcess: /rake|rend|web/i,
	abilitySrch: /str|dex|con|int|wis|cha/i,
	cmbMonsterSrch: /tongue|pull|drag|grab|push/i,
	cmbPlusStrsrch: /swallowwhole|engulf|constrict|swallow/i,
	casterDefaultAbility: {
		sorcerer: 'cha',
		wizard: 'int',
		cleric: 'wis',
		bard: 'cha',
		druid: 'wis',
		paladin: 'cha',
		ranger: 'wis',
		oracle: 'cha',
		witch: 'int',
		alchemist: 'int',
		summoner: 'cha',
		inquisitor: 'wis',
		magus: 'int'
	},
	creatureTypeClassSkills: {
		aberration: ['Acrobatics', 'Climb', 'Escape-Artist', 'Fly', 'Intimidate', 'Knowledge', 'Perception', 'Spellcraft', 'Stealth', 'Survival', 'Swim'],
		animal: ['Acrobatics', 'Climb', 'Fly', 'Perception', 'Stealth', 'Swim'],
		dragon: ['Appraise', 'Bluff', 'Climb', 'Craft', 'Diplomacy', 'Fly', 'Heal', 'Intimidate', 'Linguistics', 'Knowledge', 'Perception', 'Sense-Motive', 'Spellcraft', 'Stealth', 'Survival', 'Swim', 'Use-Magic-Device'],
		fey: ['Appraise', 'Bluff', 'Climb', 'Craft', 'Diplomacy', 'Disguise', 'Escape-Artist', 'Fly', 'Knowledge-Geography', 'Knowledge-Local', 'Knowledge-Nature', 'Perception', 'Perform', 'Sense-Motive', 'Sleight-of-Hand', 'Stealth', 'Swim', 'Use-Magic-Device'],
		monstrous: ['Climb', 'Craft', 'Fly', 'Intimidate', 'Perception', 'Ride', 'Stealth', 'Survival', 'Swim'],
		humanoid: ['Climb', 'Craft', 'Handle-Animal', 'Heal', 'Profession', 'Ride', 'Survival'],
		magicalbeast: ['Acrobatics', 'Climb', 'Fly', 'Perception', 'Steatlh', 'Swim'],
		outsider: ['Bluff', 'Craft', 'Knowledge-Planes', 'Perception', 'Sense-Motive', 'Stealth'],
		plant: ['Perception', 'Stealth'],
		undead: ['Climb', 'Disguise', 'Fly', 'Intimidate', 'Knowledge-Arcana', 'Knowledge-Religion', 'Perception', 'Sense-Motive', 'Spellcraft', 'Stealth']
	},
	creatureSubtypeClassSkills: {
		air: ['Fly'],
		giant: ['Intimidate', 'Perception'],
		goblinoid: ['Stealth'],
		inevitable: ['Acrobatics', 'Diplomacy', 'Intimidate', 'Survival'],
		water: ['Swim'],
		robot: ['Climb', 'Disable-Device', 'Fly', 'Knowledge', 'Linguistics', 'Perception', 'Sense-Motive']
	},
	specialAttackDCAbilityBase: {
		'breathweapon': 'CON',
		'burn': 'CON',
		'curse': 'CHA',
		'disease': 'CON',
		'distraction': 'CON',
		'emotionaura': 'CHA',
		'energydrain': 'CHA',
		'entrap': 'CON',
		'fear': 'CHA',
		'fearaura': 'CHA',
		'fearcone': 'CHA',
		'fearray': 'CHA',
		'frightfulpresence': 'CHA',
		'gaze': 'CHA',
		'mentalstaticaura': 'CHA',
		'paralysis': 'CON',
		'poison': 'CON',
		'stench': 'CON',
		'trample': 'STR',
		'web': 'CON',
		'whirlwind': 'STR'
	},
	monsterRulesPlusAttacks: ['grab', 'trip', 'engulf', 'swallow whole'],
	naturalAttackRegExp: /arm|bite|claw|foreclaw|gore|hoof|kick|leg|pincer|quill|root|slam|slap|snake\s*bite|spike|spine|splinter|sting|tail|tail\s*slap|talon|tendril|tentacle|thorn|tongue|vine|wing|buffet/i,
	skillBonusFeatRegExp: /Acrobatic|Uncanny Alertness|Alertness|Animal Affinity|Athletic|Breadth of Experience|Brewmaster|Deceitful|Deft Hands|Deny the Reaper|Forgotten Past|Innocent Blood|Monkey Moves|Monkey Style|Monument Builder|No Name|Persuasive|Scavenger.s Eye|Sea Legs|Self.Sufficient|Sharp Senses|Stealthy|Sure and Fleet|Voice of the Sibyl/i,
	lessImportantCombatFeatRegExp: /Power Attack|Double Slice|Greater Weapon of the Chosen|Spell Focus|Toughness/i,
	monsterRules: /spells|damage reduction/i
};

/***/ }),
/* 27 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.updateLoadsAndLift = updateLoadsAndLift;
exports.migrate = migrate;
exports.recalculate = recalculate;

var _underscore = __webpack_require__(2);

var _underscore2 = _interopRequireDefault(_underscore);

var _PFLog = __webpack_require__(0);

var _exportsLoaderTASTheAaronSheet = __webpack_require__(1);

var _exportsLoaderTASTheAaronSheet2 = _interopRequireDefault(_exportsLoaderTASTheAaronSheet);

var _PFConst = __webpack_require__(3);

var _PFConst2 = _interopRequireDefault(_PFConst);

var _PFDefense = __webpack_require__(12);

var PFDefense = _interopRequireWildcard(_PFDefense);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

// Returns the carrying capacity for a given strength score and load type
// Will recursively calculate for strength scores over 29
function getCarryingCapacity(str, load) {
    var l, m, h, r;
    switch (str) {
        case 0:
            l = 0;
            m = 0;
            h = 0;
            break;
        case 1:
            l = 3;
            m = 6;
            h = 10;
            break;
        case 2:
            l = 6;
            m = 13;
            h = 20;
            break;
        case 3:
            l = 10;
            m = 20;
            h = 30;
            break;
        case 4:
            l = 13;
            m = 26;
            h = 40;
            break;
        case 5:
            l = 16;
            m = 33;
            h = 50;
            break;
        case 6:
            l = 20;
            m = 40;
            h = 60;
            break;
        case 7:
            l = 23;
            m = 46;
            h = 70;
            break;
        case 8:
            l = 26;
            m = 53;
            h = 80;
            break;
        case 9:
            l = 30;
            m = 60;
            h = 90;
            break;
        case 10:
            l = 33;
            m = 66;
            h = 100;
            break;
        case 11:
            l = 38;
            m = 76;
            h = 115;
            break;
        case 12:
            l = 43;
            m = 86;
            h = 130;
            break;
        case 13:
            l = 50;
            m = 100;
            h = 150;
            break;
        case 14:
            l = 58;
            m = 116;
            h = 175;
            break;
        case 15:
            l = 66;
            m = 133;
            h = 200;
            break;
        case 16:
            l = 76;
            m = 153;
            h = 230;
            break;
        case 17:
            l = 86;
            m = 173;
            h = 260;
            break;
        case 18:
            l = 100;
            m = 200;
            h = 300;
            break;
        case 19:
            l = 116;
            m = 233;
            h = 350;
            break;
        case 20:
            l = 133;
            m = 266;
            h = 400;
            break;
        case 21:
            l = 153;
            m = 306;
            h = 460;
            break;
        case 22:
            l = 173;
            m = 346;
            h = 520;
            break;
        case 23:
            l = 200;
            m = 400;
            h = 600;
            break;
        case 24:
            l = 233;
            m = 466;
            h = 700;
            break;
        case 25:
            l = 266;
            m = 533;
            h = 800;
            break;
        case 26:
            l = 306;
            m = 613;
            h = 920;
            break;
        case 27:
            l = 346;
            m = 693;
            h = 1040;
            break;
        case 28:
            l = 400;
            m = 800;
            h = 1200;
            break;
        case 29:
            l = 466;
            m = 933;
            h = 1400;
            break;
        default:
            l = getCarryingCapacity(str - 10, "light") * 4;
            m = getCarryingCapacity(str - 10, "medium") * 4;
            h = getCarryingCapacity(str - 10, "heavy") * 4;
            break;
    }
    switch (load) {
        case "light":
            r = l;
            break;
        case "medium":
            r = m;
            break;
        case "heavy":
            r = h;
            break;
    }
    return r;
}

/* updateCurrentLoad-updates the current load radio button */
function updateCurrentLoad(callback, silently) {
    var done = function done() {
        if (typeof callback === "function") {
            callback();
        }
    };
    getAttrs(["load-light", "load-medium", "load-heavy", "load-max", "current-load", "carried-total", "max-dex-source"], function (v) {
        var curr = 0,
            carried = 0,
            light = 0,
            medium = 0,
            heavy = 0,
            max = 0,
            maxDexSource = 0,
            ignoreEncumbrance = 0,
            newLoad = 0,
            setter = {},
            params = {};
        try {
            //TAS.debug("at updateCurrentLoad",v);
            maxDexSource = parseInt(v["max-dex-source"], 10) || 0;
            ignoreEncumbrance = maxDexSource === 1 || maxDexSource === 3 ? 1 : 0;
            curr = parseInt(v["current-load"], 10) || 0;
            if (ignoreEncumbrance) {
                newLoad = 0;
            } else {

                carried = parseInt(v["carried-total"], 10) || 0;
                light = parseInt(v["load-light"], 10) || 0;
                medium = parseInt(v["load-medium"], 10) || 0;
                heavy = parseInt(v["load-heavy"], 10) || 0;
                max = heavy * 2;

                //TAS.debug"current-load=" + curr + ", carried-total=" + carried + ", load-light=" + light + ", load-medium=" + medium);
                if (carried <= light) {
                    //TAS.debug("light load");
                    newLoad = 0;
                } else if (carried <= medium) {
                    //TAS.debug("medium load");
                    newLoad = 1;
                } else if (carried <= heavy) {
                    //TAS.debug("heavy load");
                    newLoad = 2;
                } else if (carried <= max) {
                    //TAS.debug"over heavy but under max");
                    newLoad = 3;
                } else if (carried > max) {
                    //TAS.debug"maximum load");
                    newLoad = 4;
                }
            }
            if (curr !== newLoad) {
                setter["current-load"] = newLoad;
            }
        } catch (err) {
            _exportsLoaderTASTheAaronSheet2.default.error("PFEncumbrance.updateCurrentLoad", err);
        } finally {
            if (_underscore2.default.size(setter) > 0) {
                if (silently) {
                    params = _PFConst2.default.silentParams;
                }
                setAttrs(setter, params, done);
            } else {
                done();
            }
        }
    });
}
/* updateLoadsAndLift
 * updates the load and lift numbers
 */
function updateLoadsAndLift(callback, silently) {
    var done = _underscore2.default.once(function () {
        if (typeof callback === "function") {
            callback();
        }
    });
    getAttrs(["STR", "size", "size-multiplier", "legs", "load-light", "load-medium", "load-heavy", "load-max", "lift-above-head", "lift-off-ground", "lift-drag-and-push", "load-str-bonus", "load-multiplier", "total-load-multiplier", "load-misc"], function (v) {
        var str = 10,
            size = 1,
            sizeMult = 1,
            currSizeMult = 1,
            currTotalLoadMult = 1,
            legs = 2,
            light = 0,
            medium = 0,
            heavy = 0,
            max = 0,
            aboveHead = 0,
            offGround = 0,
            drag = 0,
            strMod = 0,
            loadMult = 1,
            mult = 1,
            misc = 0,
            l = 0,
            m = 0,
            h = 0,
            a = 0,
            o = 0,
            d = 0,
            setter = {},
            params = {};
        try {
            str = parseInt(v["STR"], 10) || 0;
            size = parseInt(v["size"], 10) || 0;
            sizeMult = parseInt(v["size-multiplier"], 10) || 0;
            currSizeMult = sizeMult;
            currTotalLoadMult = parseInt(v["total-load-multiplier"], 10) || 0;
            legs = parseInt(v["legs"], 10) || 0;
            if (legs !== 4) {
                legs = 2;
            }
            light = parseInt(v["load-light"], 10) || 0;
            medium = parseInt(v["load-medium"], 10) || 0;
            heavy = parseInt(v["load-heavy"], 10) || 0;
            max = parseInt(v["load-max"], 10) || 0;
            aboveHead = parseInt(v["lift-above-head"], 10) || 0;
            offGround = parseInt(v["lift-off-ground"], 10) || 0;
            drag = parseInt(v["lift-drag-and-push"], 10) || 0;
            strMod = parseInt(v["load-str-bonus"], 10) || 0;
            loadMult = parseInt(v["load-multiplier"], 10) || 0;
            mult = 1;
            misc = parseInt(v["load-misc"], 10) || 0;
            l = getCarryingCapacity(str + strMod, "light") + misc;
            m = getCarryingCapacity(str + strMod, "medium") + misc;
            h = getCarryingCapacity(str + strMod, "heavy") + misc;
            if (loadMult < 1) {
                loadMult = 1;
            }
            loadMult--;
            //TAS.debug("STR=" + str + ", legs=" + legs + ", load-light=" + light + ", load-medium=" + medium + ", load-heavy=" + heavy + ", lift-above-head=" + aboveHead + ", lift-off-ground=" + offGround + ", lift-drag-and-push=" + drag + ", load-str-bonus=" + strMod + ", load-multiplier=" + loadMult + ", load-misc=" + misc);
            if (legs !== 4) {
                switch (size) {
                    case -8:
                        sizeMult = 16;
                        break;
                    case -4:
                        sizeMult = 8;
                        break;
                    case -2:
                        sizeMult = 4;
                        break;
                    case -1:
                        sizeMult = 2;
                        break;
                    case 1:
                        sizeMult = 3 / 4;
                        break;
                    case 2:
                        sizeMult = 1 / 2;
                        break;
                    case 4:
                        sizeMult = 1 / 4;
                        break;
                    case 8:
                        sizeMult = 1 / 8;
                        break;
                    default:
                        sizeMult = 1;
                }
            } else if (legs === 4) {
                switch (size) {
                    case -8:
                        sizeMult = 24;
                        break;
                    case -4:
                        sizeMult = 12;
                        break;
                    case -2:
                        sizeMult = 6;
                        break;
                    case -1:
                        sizeMult = 3;
                        break;
                    case 0:
                        sizeMult = 1.5;
                        break;
                    case 1:
                        sizeMult = 1;
                        break;
                    case 2:
                        sizeMult = 3 / 4;
                        break;
                    case 4:
                        sizeMult = 1 / 2;
                        break;
                    case 8:
                        sizeMult = 1 / 4;
                        break;
                    default:
                        sizeMult = 1.5;
                }
            }
            mult += loadMult;
            mult *= sizeMult;
            l *= mult;
            m *= mult;
            h *= mult;
            a = h;
            o = h * 2;
            d = h * 5;
            //TAS.debug("new light load=" + l + ", new medium load=" + m + ", new heavy load=" + h + ", new above head=" + a + ", new off ground=" + o + ", new drag=" + d);
            if (currSizeMult !== sizeMult) {
                setter["size-multiplier"] = sizeMult;
            }
            if (currTotalLoadMult !== mult) {
                setter["total-load-multiplier"] = mult;
            }
            if (light !== l) {
                setter["load-light"] = l;
            }
            if (medium !== m) {
                setter["load-medium"] = m;
            }
            if (heavy !== h) {
                setter["load-heavy"] = h;
            }
            if (max !== h * 2) {
                setter["load-max"] = h * 2;
            }
            if (aboveHead !== a) {
                setter["lift-above-head"] = a;
            }
            if (offGround !== o) {
                setter["lift-off-ground"] = o;
            }
            if (drag !== d) {
                setter["lift-drag-and-push"] = d;
            }
        } catch (err) {
            _exportsLoaderTASTheAaronSheet2.default.error("updateLoadsAndLift", err);
        } finally {
            if (_underscore2.default.size(setter) > 0) {
                if (silently) {
                    params = _PFConst2.default.silentParams;
                }
                setAttrs(setter, params, done);
            } else {
                done();
            }
        }
    });
}
/* updateModifiedSpeed
 * updates the modified speed and run values  */
function updateModifiedSpeed(callback) {
    var done = _underscore2.default.once(function () {
        if (typeof callback === "function") {
            callback();
        }
    }),
        attribList = ["current-load", "speed-base", "speed-modified", "speed-run", "race", "is_dwarf", "max-dex-source", "run-mult"];
    _underscore2.default.each(PFDefense.defenseArmorShieldRows, function (row) {
        attribList.push(row + "-equipped");
        attribList.push(row + "-type");
    });
    getAttrs(attribList, function (v) {
        var currSpeed = parseInt(v["speed-modified"], 10) || 0,
            currRun = parseInt(v["speed-run"], 10) || 0,
            currLoad = parseInt(v["current-load"], 10) || 0,
            base = parseInt(v["speed-base"], 10) || 0,
            speedDropdown = parseInt(v["max-dex-source"], 10) || 0,
            origRunMult = isNaN(parseInt(v["run-mult"], 10)) ? 4 : parseInt(v["run-mult"], 10),
            newSpeed = base,
            runMult = origRunMult,
            newRun = base * runMult,
            combinedLoad = 0,
            isDwarf = false,
            inHeavy = false,
            inMedium = false,
            armor3Equipped = 0,
            armorLoad = 0,
            setter = {};
        try {
            //TAS.debug("speed-modified=" + currSpeed + ", speed-run=" + currRun + ", current-load=" + currLoad + ", speed-base=" + base + ", load-heavy=" + heavy + ", carried-total=" + carried);
            // #0: Armor, Shield & Load
            // #1: Armor & Shield only
            // #2: Load only
            // #3: None
            if (speedDropdown !== 3) {
                armor3Equipped = parseInt(v["armor3-equipped"], 10) || 0;
                //dwarf base speed not lowered but run multiplier can be.
                isDwarf = parseInt(v.is_dwarf, 10) || 0;
                if (!isDwarf) {
                    isDwarf = typeof v.race === "undefined" ? false : v.race.toLowerCase().indexOf("dwarf") >= 0;
                    if (isDwarf) {
                        setter["is_dwarf"] = 1;
                    }
                }
                if (speedDropdown === 0 || speedDropdown === 1) {
                    if (armor3Equipped) {
                        if (v["armor3-type"] === "Heavy") {
                            armorLoad = 2;
                        } else if (v["armor3-type"] === "Medium") {
                            armorLoad = 1;
                        }
                    }
                }
                combinedLoad = Math.max(armorLoad, currLoad);
                if (combinedLoad === 4) {
                    newSpeed = 0;
                    newRun = 0;
                    runMult = 0;
                } else if (combinedLoad === 3) {
                    newSpeed = 5;
                    newRun = 0;
                    runMult = 0;
                } else if (combinedLoad === 2 || combinedLoad === 1) {
                    if (!isDwarf) {
                        if (base <= 5) {
                            newSpeed = 5;
                        } else if (base % 15 === 0) {
                            newSpeed = base * 2 / 3;
                        } else if ((base + 5) % 15 === 0) {
                            newSpeed = (base + 5) * 2 / 3;
                        } else {
                            newSpeed = (base + 10) * 2 / 3 - 5;
                        }
                    }
                    runMult--;
                } else {
                    newSpeed = base;
                }
            }
            newRun = newSpeed * runMult;
            if (currSpeed !== newSpeed) {
                setter["speed-modified"] = newSpeed;
            }
            if (currRun !== newRun) {
                setter["speed-run"] = newRun;
            }
        } catch (err) {
            _exportsLoaderTASTheAaronSheet2.default.error("PFEncumbrance.updateModifiedSpeed", err);
        } finally {
            if (_underscore2.default.size(setter) > 0) {
                setAttrs(setter, {}, done);
            } else {
                done();
            }
        }
    });
}
function migrate(callback) {
    if (typeof callback === "function") {
        callback();
    }
}
function recalculate(callback, silently, oldversion) {
    var done = _underscore2.default.once(function () {
        _exportsLoaderTASTheAaronSheet2.default.debug("leaving PFEncumbrance.recalculate");
        if (typeof callback === "function") {
            callback();
        }
    }),
        setSpeedWhenDone = _underscore2.default.once(function () {
        updateModifiedSpeed(done);
    }),
        setEncumbrance = _underscore2.default.once(function () {
        updateCurrentLoad(setSpeedWhenDone);
    }),
        setLoadCapability = _underscore2.default.once(function () {
        updateLoadsAndLift(setEncumbrance, silently);
    });
    try {
        setLoadCapability();
    } catch (err) {
        _exportsLoaderTASTheAaronSheet2.default.error("PFEncumbrance.recalculate", err);
        done();
    }
}
function registerEventHandlers() {
    on("change:current-load change:speed-base change:race change:armor3-equipped change:armor3-type change:max-dex-source change:run-mult", _exportsLoaderTASTheAaronSheet2.default.callback(function eventUpdateModifiedSpeed(eventInfo) {
        _exportsLoaderTASTheAaronSheet2.default.debug("caught " + eventInfo.sourceAttribute + " event: " + eventInfo.sourceType);
        updateModifiedSpeed();
    }));
    on('change:load-light change:carried-total', _exportsLoaderTASTheAaronSheet2.default.callback(function eventUpdateCurrentLoad(eventInfo) {
        _exportsLoaderTASTheAaronSheet2.default.debug("caught " + eventInfo.sourceAttribute + " event: " + eventInfo.sourceType);
        if (eventInfo.sourceType === "sheetworker") {
            updateCurrentLoad();
        }
    }));
    on("change:STR change:legs change:load-str-bonus change:load-multiplier change:load-misc", _exportsLoaderTASTheAaronSheet2.default.callback(function eventUpdateLoadsAndLift(eventInfo) {
        _exportsLoaderTASTheAaronSheet2.default.debug("caught " + eventInfo.sourceAttribute + " event: " + eventInfo.sourceType);
        updateLoadsAndLift();
    }));
}
registerEventHandlers();
_PFLog.PFConsole.log('   PFEncumbrance module loaded    ');
_PFLog.PFLog.modulecount++;

/***/ }),
/* 28 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
	value: true
});
exports.migrateMap = exports.featureLists = undefined;
exports.resetTopCommandMacro = resetTopCommandMacro;
exports.resetCommandMacro = resetCommandMacro;
exports.convertNameToLevel = convertNameToLevel;
exports.getAbilities = getAbilities;
exports.copyToAbilities = copyToAbilities;
exports.setNewDefaults = setNewDefaults;
exports.migrateRepeatingMacros = migrateRepeatingMacros;
exports.migrate = migrate;
exports.recalculate = recalculate;

var _underscore = __webpack_require__(2);

var _underscore2 = _interopRequireDefault(_underscore);

var _PFLog = __webpack_require__(0);

var _exportsLoaderTASTheAaronSheet = __webpack_require__(1);

var _exportsLoaderTASTheAaronSheet2 = _interopRequireDefault(_exportsLoaderTASTheAaronSheet);

var _SWUtils = __webpack_require__(4);

var SWUtils = _interopRequireWildcard(_SWUtils);

var _PFConst = __webpack_require__(3);

var _PFConst2 = _interopRequireDefault(_PFConst);

var _PFUtils = __webpack_require__(5);

var PFUtils = _interopRequireWildcard(_PFUtils);

var _PFMacros = __webpack_require__(9);

var PFMacros = _interopRequireWildcard(_PFMacros);

var _PFMenus = __webpack_require__(13);

var PFMenus = _interopRequireWildcard(_PFMenus);

var _PFAbility = __webpack_require__(15);

var PFAbility = _interopRequireWildcard(_PFAbility);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var featureLists = exports.featureLists = ["class-ability", "feat", "racial-trait", "trait", "mythic-ability", "mythic-feat", 'npc-spell-like-abilities'],
    migrateMap = exports.migrateMap = {
	'feat': { 'copyAttrs': ['name', 'short-description', 'used', 'used_max', 'showinmenu', 'description', 'max-calculation', 'ability_type'],
		'LU': ['_name', '_short-description', '_used', '_used_max', '_showinmenu', '_description', '_macro-text', '_npc-macro-text', '_max-calculation', '_ability_type'],
		'classDefault': '0',
		'hasNPCMacro': true,
		'ruleCategory': 'feats' },
	'racial-trait': { 'copyAttrs': ['name', 'short-description', 'used', 'used_max', 'showinmenu', 'description', 'max-calculation', 'ability_type'],
		'LU': ['_name', '_short-description', '_used', '_used_max', '_showinmenu', '_description', '_macro-text', '_npc-macro-text', '_max-calculation', '_ability_type'],
		'hasNPCMacro': true,
		'classDefault': '@{level}',
		'ruleCategory': 'racial-traits' },
	'trait': { 'copyAttrs': ['name', 'short-description', 'used', 'used_max', 'showinmenu', 'description', 'max-calculation', 'ability_type'],
		'LU': ['_name', '_short-description', '_used', '_used_max', '_showinmenu', '_description', '_macro-text', '_max-calculation', '_ability_type'],
		'classDefault': '@{level}',
		'ruleCategory': 'traits' },
	'class-ability': { 'copyAttrs': ['name', 'short-description', 'used', 'used_max', 'showinmenu', 'description', 'max-calculation'],
		'LU': ['_name', '_short-description', '_used', '_used_max', '_showinmenu', '_description', '_macro-text', '_max-calculation', '_class-number'],
		'ruleCategory': 'class-features',
		'convertClass': true },
	'npc-spell-like-abilities': { 'copyAttrs': ['name', 'short-description', 'used', 'used_max', 'showinmenu', 'description', 'max-calculation', 'duration', 'save', 'range'],
		'LU': ['_name', '_short-description', '_used', '_used_max', '_showinmenu', '_description', '_macro-text', '_npc-macro-text', '_max-calculation', '_level', '_range', '_duration', '_save', '_sr'],
		'hasNPCMacro': false,
		'classDefault': '@{level}',
		'ruleCategory': 'spell-like-abilities' }
};
var migrateButtonMap = {
	merge_traits_now: 'trait',
	merge_race_traits_now: 'racial-trait',
	merge_feats_now: 'feat',
	merge_class_features_now: 'class-ability',
	merge_slas_now: 'npc-spell-like-abilities',
	delete_traits_now: 'trait',
	delete_race_traits_now: 'racial-trait',
	delete_feats_now: 'feat',
	delete_class_features_now: 'class-ability',
	delete_slas_now: 'npc-spell-like-abilities'
},
    baseCommandMacro = "/w \"@{character_name}\" &{template:pf_block} @{toggle_attack_accessible} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_generic}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle}} {{name=^{all-abilities}}} ",
    otherCommandMacros = {
	'class-ability': " [^{original-class-features-list}](~@{character_id}|class-ability_button)",
	'mythic': " [^{mythic-abilities}](~@{character_id}|mythic-ability_button) [^{mythic-feats}](~@{character_id}|mythic-feat_button)",
	'feat': " [^{original-feats-list}](~@{character_id}|REPLACENPCfeat_button)",
	'racial-trait': " [^{original-racial-traits-list}](~@{character_id}|REPLACENPCracial-trait_button)",
	'trait': " [^{original-traits-list}](~@{character_id}|trait_button)",
	'npc-spell-like-abilities': " [^{original-spell-like-abilities-list}](~@{character_id}|npc-spell-like-abilities_button)"
},
    defaultMacroMap = {
	'feat': 'default',
	'trait': 'default',
	'racial-trait': 'default',
	'class-ability': 'class-ability',
	'mythic-ability': 'mythic-ability',
	'mythic-feat': 'default'
},
    defaultMacros = {
	'default': {
		defaultRepeatingMacro: "&{template:pf_generic} @{toggle_accessible_flag} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_block}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle}} {{name=@{name}}} {{description=@{short-description}}}",
		defaultRepeatingMacroMap: {
			'&{template:': { 'current': 'pf_generic}', 'old': ['pf_block}'] },
			'@{toggle_accessible_flag}': { 'current': '@{toggle_accessible_flag}' },
			'@{toggle_rounded_flag}': { 'current': '@{toggle_rounded_flag}' },
			'{{color=': { 'current': '@{rolltemplate_color}}}' },
			'{{header_image=': { 'current': '@{header_image-pf_block}}}' },
			'{{character_name=': { 'current': '@{character_name}}}' },
			'{{character_id=': { 'current': '@{character_id}}}' },
			'{{subtitle}}': { 'current': '{{subtitle}}' },
			'{{name=': { 'current': '@{name}}}' },
			'{{description=': { 'current': '@{short-description}}}', 'old': [' @{short-description}}}'] } },
		defaultDeletedArray: null
	},
	'class-ability': {
		defaultRepeatingMacro: "&{template:pf_block} @{toggle_accessible_flag} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_block}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle}} {{class=**^{class}**: @{class-number}}} {{name=@{name}}} {{description=@{short-description}}}",
		defaultRepeatingMacroMap: {
			'&{template:': { 'current': 'pf_generic}', 'old': ['pf_block}'] },
			'@{toggle_accessible_flag}': { 'current': '@{toggle_accessible_flag}' },
			'@{toggle_rounded_flag}': { 'current': '@{toggle_rounded_flag}' },
			'{{color=': { 'current': '@{rolltemplate_color}}}' },
			'{{header_image=': { 'current': '@{header_image-pf_generic}}}' },
			'{{character_name=': { 'current': '@{character_name}}}' },
			'{{character_id=': { 'current': '@{character_id}}}' },
			'{{subtitle=': { 'current': '{{subtitle}}', 'old': ['^{@{rule_category}}}}', 'Class Ability}}'] },
			'{{class=': { 'current': '**^{class}**: @{class-number}}}', 'old': ['**Class**: @{class-number}}}'], replacements: [{ 'from': 'Class', 'to': 'class' }] },
			'{{name=': { 'current': '@{name}}}' },
			'{{description=': { 'current': '@{short-description}}}', 'old': [' @{short-description}}}'] } },
		defaultDeletedArray: ['{{Class=**Class**: @{class-number}}}', '{{subtitle=^{@{rule_category}}}}']
	},
	'mythic-ability': {
		defaultRepeatingMacro: "&{template:pf_block} @{toggle_accessible_flag} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_block}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle}} {{class=**^{path}**: @{mythic-number}}} {{name=@{name}}} {{description=@{short-description}}}",
		defaultRepeatingMacroMap: {
			'&{template:': { 'current': 'pf_generic}', 'old': ['pf_block}'] },
			'@{toggle_accessible_flag}': { 'current': '@{toggle_accessible_flag}' },
			'@{toggle_rounded_flag}': { 'current': '@{toggle_rounded_flag}' },
			'{{color=': { 'current': '@{rolltemplate_color}}}' },
			'{{header_image=': { 'current': '@{header_image-pf_block}}}' },
			'{{character_name=': { 'current': '@{character_name}}}' },
			'{{character_id=': { 'current': '@{character_id}}}' },
			'{{subtitle=': { 'current': '{{subtitle}}' },
			'{{class=': { 'current': '**^{path}**: @{mythic-number}}}', 'old': ['**Path**: @{mythic-number}}}'], replacements: [{ 'from': 'Path', 'to': 'path' }] },
			'{{name=': { 'current': '@{name}}}' },
			'{{description=': { 'current': '@{short-description}}}', 'old': [' @{short-description}}}'] } },
		defaultDeletedArray: ['{{subtitle}}', '{{Class=**Class**: @{class-number}}}']
	},
	'spell-like-ability': {
		defaultRepeatingMacro: '&{template:pf_generic} @{toggle_accessible_flag} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_generic}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle}} {{name=@{name}}} {{^{level}=[[@{level}]]}} {{^{range}=@{range}}} {{^{duration}=@{duration}}} {{^{save}=@{save}, ^{difficulty-class-abbrv} [[@{savedc}]]}} {{^{spell-resistance-abbrv}=@{abil-sr}}} {{description=@{short-description}}}',
		defaultRepeatingMacroMap: {
			'&{template:': { 'current': 'pf_generic}' },
			'@{toggle_accessible_flag}': { 'current': '@{toggle_accessible_flag}' },
			'@{toggle_rounded_flag}': { 'current': '@{toggle_rounded_flag}' },
			'{{color=': { 'current': '@{rolltemplate_color}}}' },
			'{{header_image=': { 'current': '@{header_image-pf_block}}}' },
			'{{character_name=': { 'current': '@{character_name}}}' },
			'{{character_id=': { 'current': '@{character_id}}}' },
			'{{name=': { 'current': '@{name}}}' },
			'{{subtitle=': { 'current': '{{subtitle}}', 'old': ['^{@{rule_category}}}}', 'Class Ability}}'] },
			'{{^{level}=': { 'current': '@{level}}}', 'old': ['[[@{spell_level}]]}}'] },
			'{{^{range}=': { 'current': '@{range}}}', 'old': ['^{@{range_pick}} [[@{range_numeric}]]}}'] },
			'{{^{duration}=': { 'current': '@{duration}}}' },
			'{{^{save}=': { 'current': '@{save}}}', 'old': ['@{save}, ^{difficulty-class-abbrv} [[@{savedc}]]}}'] },
			'{{^{spell-resistance-abbrv}=': { 'current': '@{sr}}}', 'old': ['^{@{abil-sr}}}}'] },
			'{{description=': { 'current': '@{short-description}}}', 'old': [' @{short-description}}}'] } },
		defaultDeletedArray: ['{{Level=@{level}}}', '{{Range=@{range}}}', '{{Duration=@{duration}}}', '{{Save=@{save}}}', '{{SR=@{sr}}}', '{{^{frequency}=@{used}/@{used|max} ^{@{frequency}} @{rounds_between}}}', '{{^{frequency}=@{used}/@{used|max} ^{@{frequency}}}}', '{{subtitle=^{@{rule_category}}}}']
	}
},
    events = {
	commandMacroFields: ["name", "used", "used_max", "showinmenu"]
};

/** resetTopCommandMacro sets orig_ability_header_macro  (macro to plug into pf_block, read by PFAbility.resetCommandMacro)
 *@param {function} callback call when done	
 */
function resetTopCommandMacro(callback) {
	var done = _underscore2.default.once(function () {
		_exportsLoaderTASTheAaronSheet2.default.debug("leaving PFFeatures.resetTopCommandMacro");
		if (typeof callback === "function") {
			callback();
		}
	});
	getAttrs(["is_npc", "NPC-orig_ability_header_macro", "orig_ability_header_macro", "mythic-adventures-show", "use_traits", "use_racial_traits", "use_feats", "use_class_features", "use_spell-like-abilities"], function (v) {
		var isMythic = 0,
		    usesTraits = 0,
		    usesRacialTraits = 0,
		    hasMythicMacro = 0,
		    usesFeats = 0,
		    usesClass = 0,
		    usesSLAs = 0,
		    newMacro = "",
		    isNPC = 0,
		    prefix = "",
		    setter = {};
		try {
			isNPC = parseInt(v.is_npc, 10) || 0;
			prefix = isNPC ? "NPC-" : "";
			isMythic = parseInt(v["mythic-adventures-show"], 10) || 0;
			usesFeats = parseInt(v["use_feats"], 10) || 0;
			usesClass = parseInt(v["use_class_features"], 10) || 0;
			usesTraits = parseInt(v.use_traits, 10) || 0;
			usesRacialTraits = parseInt(v.use_racial_traits, 10) || 0;
			usesSLAs = parseInt(v["use_spell-like-abilities"], 10) || 0;

			newMacro = (usesClass ? otherCommandMacros['class-ability'] : "") + (usesFeats ? otherCommandMacros['feat'].replace(/REPLACENPC/g, prefix) : "") + (usesSLAs ? otherCommandMacros['npc-spell-like-abilities'] : "") + (usesTraits ? otherCommandMacros['trait'] : "") + (usesRacialTraits ? otherCommandMacros['racial-trait'].replace(/REPLACENPC/g, prefix) : "") + (isMythic ? otherCommandMacros['mythic'] : "");
			if (newMacro) {
				//no space in front needed for this one
				newMacro = "{{row01=^{original-abilities-menus}}} {{row02=" + newMacro + "}}";
			}
			if (newMacro !== v[prefix + 'orig_ability_header_macro']) {
				setter[prefix + 'orig_ability_header_macro'] = newMacro;
			}
			if (isNPC) {
				newMacro = (usesClass ? otherCommandMacros['class-ability'] : "") + (usesFeats ? otherCommandMacros['feat'].replace(/REPLACENPC/g, '') : "") + (usesSLAs ? otherCommandMacros['npc-spell-like-abilities'] : "") + (usesTraits ? otherCommandMacros['trait'] : "") + (usesRacialTraits ? otherCommandMacros['racial-trait'].replace(/REPLACENPC/g, '') : "") + (isMythic ? otherCommandMacros['mythic'] : "");
				if (newMacro) {
					//no space in front needed for this one
					newMacro = "{{row01=^{original-abilities-menus}}} {{row02=" + newMacro + "}}";
				}
				if (newMacro !== v.orig_ability_header_macro) {
					setter['orig_ability_header_macro'] = newMacro;
				}
			}
		} catch (err) {
			_exportsLoaderTASTheAaronSheet2.default.error("PFFeatures.resetTopCommandMacro", err);
		} finally {
			if (_underscore2.default.size(setter) > 0) {
				setAttrs(setter, _PFConst2.default.silentParams, done);
			} else {
				done();
			}
		}
	});
}
/** resets the chat menu macro for all repeating lists in abilities tab
 *@param {function} callback call when done
 */
function resetCommandMacro(callback) {
	var done = _underscore2.default.once(function () {
		_exportsLoaderTASTheAaronSheet2.default.debug("leaving PFFeatures.resetCommandMacro");
		if (typeof callback === "function") {
			callback();
		}
	});

	getAttrs(["mythic-adventures-show", "use_traits", "use_racial_traits", "use_class_features", "use_feats", "use_spell-like-abilities"], function (v) {
		var featureList = [],
		    doneWithOneButton,
		    isMythic = 0,
		    usesTraits = 0,
		    usesRacialTraits = 0,
		    usesFeats = 0,
		    usesClass = 0,
		    usesSLAs = 0,
		    newMacro = "",
		    numberLists = 0,
		    setter = {};
		try {
			isMythic = parseInt(v["mythic-adventures-show"], 10) || 0;
			usesFeats = parseInt(v["use_feats"], 10) || 0;
			usesClass = parseInt(v["use_class_features"], 10) || 0;
			usesTraits = parseInt(v.use_traits, 10) || 0;
			usesRacialTraits = parseInt(v.use_racial_traits, 10) || 0;
			usesSLAs = parseInt(v["use_spell-like-abilities"], 10) || 0;
			//TAS.debug("at PFFeatures.resetCommandMacro",v);
			if (usesFeats) {
				featureList.push('feat');
				numberLists += 2;
			}
			if (usesTraits) {
				featureList.push('trait');
				numberLists++;
			}
			if (usesRacialTraits) {
				featureList.push('racial-trait');
				numberLists += 2;
			}
			if (isMythic) {
				featureList = featureList.concat(['mythic-ability', 'mythic-feat']);
				numberLists += 2;
			}
			if (usesClass) {
				featureList.push('class-ability');
				numberLists++;
			}
			if (usesSLAs) {
				featureList.push('npc-spell-like-abilities');
				numberLists++;
			}
			if (numberLists > 0) {
				doneWithOneButton = _underscore2.default.after(numberLists, done);
				_underscore2.default.each(featureList, function (section) {
					if (section !== 'npc-spell-like-abilities') {
						PFMenus.resetOneCommandMacro(section, false, doneWithOneButton);
					}
					if (section === 'racial-trait' || section === 'feat' || section === 'npc-spell-like-abilities') {
						PFMenus.resetOneCommandMacro(section, true, doneWithOneButton);
					}
				});
			} else {
				done();
			}
		} catch (err) {
			_exportsLoaderTASTheAaronSheet2.default.error("PFFeatures.resetCommandMacro", err);
			done();
		} finally {
			resetTopCommandMacro();
		}
	});
}
/** recalculateRepeatingMaxUsed - Parses the macro text "...max-calculation" in the repeating items
 * (such as class-abilities, feats, traits, racial-traits)
 * and sets the used|max value.
 * Loops through all rows in the given repeating section.
 * @param {string} section= the name of the section after the word "repeating_"
 * @param {function} callback when done
 * @param {boolean} silently if T then call setAttrs with {silent:true}
 */
function recalculateRepeatingMaxUsed(section, callback, silently) {
	var done = _underscore2.default.once(function () {
		if (typeof callback === "function") {
			callback();
		}
	});
	getSectionIDs("repeating_" + section, function (ids) {
		var totrows = _underscore2.default.size(ids),
		    rowdone = _underscore2.default.after(totrows, done);
		if (totrows > 0) {
			_underscore2.default.each(ids, function (id, index) {
				var prefix = "repeating_" + section + "_" + id;
				SWUtils.evaluateAndSetNumber(prefix + "_max-calculation", prefix + "_used_max", 0, rowdone, silently);
			});
		} else {
			done();
		}
	});
}
function convertNameToLevel(name) {
	var classnum;
	if (/\d/.test(name)) {
		classnum = parseInt(name.match(/\d/)[0], 10) || 0;
		return '@{class-' + classnum + '-level}';
	} else if (/race/i.test(name)) {
		return '@{level}';
	} else {
		return '';
	}
}
/** Converts the 4 "old" feature lists into array of objecs for repeating_ability
 * 
 * @param {function([{}])} callback 
 * @param {function} errorcallback 
 * @param {string} section 
 */
function getAbilities(callback, errorcallback, section) {
	var done = _underscore2.default.once(function (param) {
		if (typeof callback === "function") {
			callback(param);
		}
	}),
	    notDone = _underscore2.default.once(function () {
		if (typeof errorcallback === "function") {
			errorcallback();
		} else {
			done();
		}
	});
	_exportsLoaderTASTheAaronSheet2.default.debug("at PFFeatures.getAbilities " + section);
	if (!section) {
		notDone();return;
	}
	getSectionIDs('repeating_' + section, function (ids) {
		var fields,
		    isSLA = 0;
		try {
			if (section === "npc-spell-like-abilities") {
				isSLA = 1;
			}
			if (_underscore2.default.size(ids)) {
				fields = SWUtils.cartesianAppend(['repeating_' + section + '_'], ids, migrateMap[section].LU);
				fields = fields.concat(["is_npc", "race", "class-0-name", "class-1-name", "class-2-name", "class-3-name", "class-4-name", "class-5-name"]);
				if (section === "npc-spell-like-abilities") {
					fields = fields.concat(["spellclass-0-level-total", "spellclass-1-level-total", "spellclass-2-level-total", "spellclass-0", "spellclass-1", "spellclass-2", "level", "npc-hd-num", "class-0-level", "class-1-level", "class-2-level", "class-3-level", "class-4-level", "class-5-level"]);
				}
				getAttrs(fields, function (v) {
					var abilities,
					    defaultClass = '',
					    isNPC = 0,
					    macrotextAttr = 'macro-text',
					    tempInt;
					try {
						isNPC = parseInt(v.is_npc, 10) || 0;
						if (migrateMap[section].hasNPCMacro && isNPC) {
							macrotextAttr = 'npc-macro-text';
						}
						defaultClass = migrateMap[section].classDefault || '';
						abilities = _underscore2.default.map(ids, function (id) {
							var prefix, obj;
							try {
								prefix = 'repeating_' + section + '_' + id + '_';
								obj = _underscore2.default.reduce(migrateMap[section].copyAttrs, function (m, attr) {
									m[attr] = v[prefix + attr] || '';
									return m;
								}, {});
								obj['CL-basis'] = defaultClass || convertNameToLevel(v[prefix + 'class-number']);
								if (obj['CL-basis']) {
									if (obj['CL-basis'] === "@{level}") {
										obj["class-name"] = v['race'];
									} else if (v[prefix + 'class-number']) {
										_exportsLoaderTASTheAaronSheet2.default.debug("setting class-name to " + v[prefix + 'class-number'] + " value is " + v[v[prefix + 'class-number']]);
										obj["class-name"] = v[v[prefix + 'class-number']];
									} else {
										obj["class-name"] = "";
									}
								} else {
									obj["class-name"] = "";
								}
								if (isSLA) {
									obj["abil-sr"] = v[prefix + 'sr'] || '';
									if (v[prefix + 'level']) {
										tempInt = parseInt(v[prefix + 'level'], 10);
										if (!isNaN(tempInt)) {
											obj['spell_level-misc'] = tempInt;
											obj['spell_level-misc-mod'] = tempInt;
											obj['spell_level-basis'] = '0';
										}
									}
									if (v[prefix + 'range']) {
										tempInt = parseInt(v[prefix + 'range'], 10);
										obj['range_pick'] = 'number';
										if (!isNaN(tempInt)) {
											obj['range_numeric'] = tempInt;
										}
									}
									if (v[prefix + 'used']) {
										tempInt = parseInt(v[prefix + 'used'], 10);
										if (!isNaN(tempInt)) {
											obj['used_max'] = tempInt;
											obj['max-calculation'] = tempInt;
										}
									}
								}
								obj['macro-text'] = v[prefix + macrotextAttr] || '';
								obj['rule_category'] = migrateMap[section].ruleCategory;

								return obj;
							} catch (errorinner) {
								_exportsLoaderTASTheAaronSheet2.default.error("PFFeatures.getAbilities errorinner on " + id, errorinner);
							}
						});
					} catch (errmid) {
						_exportsLoaderTASTheAaronSheet2.default.error("PFFeatures.getAbilities errmid", errmid);
					} finally {
						if (_underscore2.default.size(abilities)) {
							done(abilities);
						} else {
							_exportsLoaderTASTheAaronSheet2.default.warn("PFFeatures.getAbilities none generated for " + section + " even though there are ids");
							notDone();
						}
					}
				});
			} else {
				done([]);
				return;
			}
		} catch (err) {
			_exportsLoaderTASTheAaronSheet2.default.error("PFFeatures.copyFeatsToAbilities", err);
			notDone();
		}
	});
}
function copyToAbilities(callback, section, eventInfo) {
	var done = _underscore2.default.once(function (param) {
		var setter;
		if (eventInfo && /merge/i.test(eventInfo.sourceAttribute)) {
			setter = {};
			setter[eventInfo.sourceAttribute] = 0;
			setAttrs(setter, _PFConst2.default.silentParams);
		}
		if (typeof callback === "function") {
			callback(param);
		}
	}),
	    merged = _underscore2.default.once(function () {
		PFAbility.recalculate(function () {
			done();
			PFMenus.resetOneCommandMacro(section, false);
			PFMenus.resetOneCommandMacro(section, true);
		}, true, 0);
	});
	_exportsLoaderTASTheAaronSheet2.default.debug("at PFFeatures.copyToAbilities:" + section);
	getAbilities(function (list) {
		_exportsLoaderTASTheAaronSheet2.default.debug("PFFeatures.copyToAbilities returned from get Abilities list is: ", list);
		if (list && _underscore2.default.size(list) > 0) {
			_exportsLoaderTASTheAaronSheet2.default.debug("now calling PFAbilitycopytoAbilities");
			PFAbility.copyToAbilities(merged, list);
		} else {
			done();
		}
	}, function () {
		_exportsLoaderTASTheAaronSheet2.default.error("PFFeatures ################# error trying to migrate " + section);
		done();
	}, section);
}
function setNewDefaults(callback, section) {
	var done = _underscore2.default.once(function () {
		_exportsLoaderTASTheAaronSheet2.default.debug("leaving PFFeatures.setNewDefaults");
		if (typeof callback === "function") {
			callback();
		}
	}),
	    sectionToDefaultRuleCategoryMap = {
		'feat': 'feats',
		'trait': 'traits',
		'racial-trait': 'racial-traits',
		'mythic-ability': 'mythic-abilities',
		'mythic-feat': 'mythic-feats',
		'class-ability': 'class-features',
		'npc-spell-like-abilities': 'spell-like-abilities'
	},
	    defaultabilitytype,
	    defaultrulecategory,
	    defaultshow;
	defaultshow = section === 'class-abilities' || section === 'npc-spell-like-abilities' ? '1' : '0';
	defaultabilitytype = section === 'npc-spell-like-abilities' ? 'Sp' : 'not-applicable';
	defaultrulecategory = sectionToDefaultRuleCategoryMap[section] || '';
	getSectionIDs('repeating_' + section, function (ids) {
		var setter = {};
		try {
			setter = _underscore2.default.reduce(ids, function (m, id) {
				var prefix = 'repeating_' + section + '_' + id + '_';
				try {
					m[prefix + 'showinmenu'] = defaultshow;
					m[prefix + 'ability_type'] = defaultabilitytype;
					m[prefix + 'rule_category'] = defaultrulecategory;
				} catch (errin) {
					_exportsLoaderTASTheAaronSheet2.default.error("PFFeatures.setNewDefaults error " + section + " id " + id, errin);
				} finally {
					return m;
				}
			}, {});
			setter['migrated_featurelists_defaults'] = 1;
		} catch (err) {
			_exportsLoaderTASTheAaronSheet2.default.error("PFFeatures.setNewDefaults error setting defaults for " + section, err);
		} finally {
			if (_underscore2.default.size(setter) > 0) {
				setAttrs(setter, _PFConst2.default.silentParams, done);
			} else {
				done();
			}
		}
	});
}
function migrateRepeatingMacros(callback) {
	var done = _underscore2.default.once(function () {
		_exportsLoaderTASTheAaronSheet2.default.debug("leaving PFFeatures.migrateRepeatingMacros");
		if (typeof callback === "function") {
			callback();
		}
	}),
	    doneOne = _underscore2.default.after(_underscore2.default.size(featureLists), function () {
		setAttrs({ 'migrated_feature_macrosv109': 1 }, _PFConst2.default.silentParams, done);
	});
	_underscore2.default.each(featureLists, function (section) {
		var defaultName = '',
		    defaultMacro = '';
		try {
			defaultName = defaultMacroMap[section] || 'default';
			defaultMacro = defaultMacros[defaultName];
			if (!defaultMacro) {
				_exportsLoaderTASTheAaronSheet2.default.error("cannot find default macro for section " + section);
				doneOne();
				return;
			}
			PFMacros.migrateRepeatingMacros(doneOne, section, 'macro-text', defaultMacro.defaultRepeatingMacro, defaultMacro.defaultRepeatingMacroMap, defaultMacro.defaultDeletedArray, '@{PC-Whisper}');
			if (section === 'feat' || section === 'racial-trait') {
				PFMacros.migrateRepeatingMacros(null, section, 'npc-macro-text', defaultMacro.defaultRepeatingMacro, defaultMacro.defaultRepeatingMacroMap, defaultMacro.defaultDeletedArray, '@{NPC-Whisper}');
			}
		} catch (err) {
			_exportsLoaderTASTheAaronSheet2.default.error("PFFeatures.migrateRepeatingMacros error setting up " + section, err);
			doneOne();
		}
	});
}
function migrate(callback, oldversion) {
	var done = function done() {
		_exportsLoaderTASTheAaronSheet2.default.debug("leaving PFFeatures.migrate");
		if (typeof callback === "function") {
			callback();
		}
	},
	    afterNewDefaults = function afterNewDefaults() {
		getAttrs(['migrated_feature_macrosv109'], function (v) {
			if (!parseInt(v.migrated_feature_macrosv109, 10)) {
				migrateRepeatingMacros(done);
			} else {
				done();
			}
		});
	},
	    numLists = _underscore2.default.size(featureLists),
	    doneOne = _underscore2.default.after(numLists, afterNewDefaults);
	//TAS.debug"at PFFeatures.migrate");
	getAttrs(['migrated_featurelists_defaults'], function (vm) {
		var featuremigrated = 0,
		    abilitymigrated = 0;
		featuremigrated = parseInt(vm['migrated_featurelists_defaults'], 10) || 0;
		//so current beta is not screwed up:
		if (!featuremigrated) {
			_underscore2.default.each(featureLists, function (section) {
				setNewDefaults(doneOne, section);
			});
		} else {
			afterNewDefaults();
		}
	});
}
function recalculate(callback, silently, oldversion) {
	var done = _underscore2.default.once(function () {
		_exportsLoaderTASTheAaronSheet2.default.info("leaving PFFeatures.recalculate");
		if (typeof callback === "function") {
			callback();
		}
	}),
	    numLists,
	    doneWithList,
	    calculateMaxUses,
	    callRecalcSLAs;
	try {
		//TAS.debug("at PFFeatures.recalculate");
		numLists = _underscore2.default.size(_PFConst2.default.repeatingMaxUseSections);
		doneWithList = _underscore2.default.after(numLists, function () {
			resetCommandMacro(done);
		});
		calculateMaxUses = function calculateMaxUses() {
			_underscore2.default.each(_PFConst2.default.repeatingMaxUseSections, function (section) {
				recalculateRepeatingMaxUsed(section, _exportsLoaderTASTheAaronSheet2.default.callback(doneWithList), silently);
			});
		};
		migrate(_exportsLoaderTASTheAaronSheet2.default.callback(calculateMaxUses), oldversion);
	} catch (err) {
		_exportsLoaderTASTheAaronSheet2.default.error("PFFeatures.recalculate, ", err);
		done();
	}
}
function registerEventHandlers() {
	var tempstr = "";

	on("change:merge_traits_now change:merge_race_traits_now change:merge_feats_now change:merge_class_features_now change:merge_slas_now", _exportsLoaderTASTheAaronSheet2.default.callback(function eventMergeOldList(eventInfo) {
		_exportsLoaderTASTheAaronSheet2.default.debug("caught " + eventInfo.sourceAttribute + " event: " + eventInfo.sourceType);
		if (eventInfo.sourceType === "player" || eventInfo.sourceType === "api") {
			getAttrs([eventInfo.sourceAttribute], function (v) {
				if (parseInt(v[eventInfo.sourceAttribute], 10)) {
					copyToAbilities(null, migrateButtonMap[eventInfo.sourceAttribute], eventInfo);
				}
			});
		}
	}));
	//GENERIC REPEATING LISTS USED MAX
	_underscore2.default.each(_PFConst2.default.repeatingMaxUseSections, function (section) {
		var maxEvent = "change:repeating_" + section + ":max-calculation";
		on(maxEvent, _exportsLoaderTASTheAaronSheet2.default.callback(function eventRepeatingMaxUseSections(eventInfo) {
			_exportsLoaderTASTheAaronSheet2.default.debug("caught " + eventInfo.sourceAttribute + " event: " + eventInfo.sourceType);
			SWUtils.evaluateAndSetNumber("repeating_" + section + "_max-calculation", "repeating_" + section + "_used_max");
		}));
	});
	on("change:mythic-adventures-show change:use_traits change:use_racial_traits change:use_class_features change:use_feats change:use_spell-like-abilities", _exportsLoaderTASTheAaronSheet2.default.callback(function eventEnableMythicConfig(eventInfo) {
		_exportsLoaderTASTheAaronSheet2.default.debug("caught " + eventInfo.sourceAttribute + " event: " + eventInfo.sourceType);
		if (eventInfo.sourceType === "player" || eventInfo.sourceType === "api") {
			resetTopCommandMacro(null, eventInfo);
		}
	}));
	_underscore2.default.each(featureLists, function (section) {
		var macroEvent = "remove:repeating_" + section + " ",
		    singleEvent = "change:repeating_" + section + ":";
		macroEvent = _underscore2.default.reduce(events.commandMacroFields, function (m, a) {
			m += singleEvent + a + " ";
			return m;
		}, macroEvent);
		on(macroEvent, _exportsLoaderTASTheAaronSheet2.default.callback(function eventRepeatingCommandMacroUpdate(eventInfo) {
			var attr;
			attr = SWUtils.getAttributeName(eventInfo.sourceAttribute);
			if (eventInfo.sourceType === "player" || eventInfo.sourceType === "api" || eventInfo.sourceType === "sheetworker" && attr === 'used_max') {
				attr = 'repeating_' + section + '_showinmenu';
				getAttrs([attr, 'is_npc'], function (v) {
					var isNPC = parseInt(v.is_npc, 10) || 0;
					if (parseInt(v[attr], 10) === 1) {
						PFMenus.resetOneCommandMacro(section, isNPC);
					}
				});
			}
		}));
	});
}
registerEventHandlers();
_PFLog.PFConsole.log('   PFFeatures module loaded       ');
_PFLog.PFLog.modulecount++;

/***/ }),
/* 29 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
	value: true
});
exports.updateInitiative = updateInitiative;
exports.migrate = migrate;
exports.recalculate = recalculate;

var _underscore = __webpack_require__(2);

var _underscore2 = _interopRequireDefault(_underscore);

var _PFLog = __webpack_require__(0);

var _exportsLoaderTASTheAaronSheet = __webpack_require__(1);

var _exportsLoaderTASTheAaronSheet2 = _interopRequireDefault(_exportsLoaderTASTheAaronSheet);

var _SWUtils = __webpack_require__(4);

var SWUtils = _interopRequireWildcard(_SWUtils);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

/* updateInitiative * updates the init*/
function updateInitiative(callback, silently, force) {
	getAttrs(['nodex-toggle'], function (v) {
		if (parseInt(v['nodex-toggle'], 10)) {
			//if lose dex then lose ability mod no matter what ability it is, since init is a dex check:
			//http://paizo.com/paizo/faq/v5748nruor1fm#v5748eaic9tga
			SWUtils.updateRowTotal(["init", "init-trait", "init-misc-mod", "checks-cond"], 0, ["condition-Deafened"], false, callback, silently, force);
		} else {
			SWUtils.updateRowTotal(["init", "init-ability-mod", "init-trait", "init-misc-mod", "checks-cond"], 0, ["condition-Deafened"], false, callback, silently, force);
		}
	});
}
function migrate(callback, oldversion) {
	var done = function done() {
		if (typeof callback === "function") {
			callback();
		}
	};
	if (oldversion < 1.18) {
		updateInitiative(done, false, true);
	} else {
		done();
	}
}
function recalculate(callback, silently, oldversion) {
	var done = _underscore2.default.once(function () {
		_exportsLoaderTASTheAaronSheet2.default.info("Leaving PFInitiative.recalculate");
		if (typeof callback === "function") {
			callback();
		}
	});
	migrate(function () {
		updateInitiative(done, silently);
	}, oldversion);
}
function registerEventHandlers() {
	on("change:init-trait change:condition-Deafened ", _exportsLoaderTASTheAaronSheet2.default.callback(function eventUpdateInitPlayer(eventInfo) {
		_exportsLoaderTASTheAaronSheet2.default.debug("caught " + eventInfo.sourceAttribute + " event: " + eventInfo.sourceType);
		if (eventInfo.sourceType === "player" || eventInfo.sourceType === "api") {
			updateInitiative();
		}
	}));
	on("change:init-ability-mod change:init-misc-mod change:checks-cond change:nodex-toggle", _exportsLoaderTASTheAaronSheet2.default.callback(function eventUpdateInitSheet(eventInfo) {
		if (eventInfo.sourceType === "sheetworker") {
			_exportsLoaderTASTheAaronSheet2.default.debug("caught " + eventInfo.sourceAttribute + " event: " + eventInfo.sourceType);
			updateInitiative();
		}
	}));
}
registerEventHandlers();
_PFLog.PFConsole.log('   PFInitiative module loaded     ');
_PFLog.PFLog.modulecount++;

/***/ }),
/* 30 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.migrateRepeatingMacros = migrateRepeatingMacros;
exports.resetCommandMacro = resetCommandMacro;
exports.createAttackEntryFromRow = createAttackEntryFromRow;
exports.updateAssociatedAttack = updateAssociatedAttack;
exports.getEquipmentTypeFromName = getEquipmentTypeFromName;
exports.importFromCompendium = importFromCompendium;
exports.setNewDefaults = setNewDefaults;
exports.migrate = migrate;
exports.recalculate = recalculate;

var _underscore = __webpack_require__(2);

var _underscore2 = _interopRequireDefault(_underscore);

var _PFLog = __webpack_require__(0);

var _exportsLoaderTASTheAaronSheet = __webpack_require__(1);

var _exportsLoaderTASTheAaronSheet2 = _interopRequireDefault(_exportsLoaderTASTheAaronSheet);

var _PFConst = __webpack_require__(3);

var _PFConst2 = _interopRequireDefault(_PFConst);

var _SWUtils = __webpack_require__(4);

var SWUtils = _interopRequireWildcard(_SWUtils);

var _PFUtils = __webpack_require__(5);

var PFUtils = _interopRequireWildcard(_PFUtils);

var _PFMacros = __webpack_require__(9);

var PFMacros = _interopRequireWildcard(_PFMacros);

var _PFMenus = __webpack_require__(13);

var PFMenus = _interopRequireWildcard(_PFMenus);

var _PFMigrate = __webpack_require__(6);

var PFMigrate = _interopRequireWildcard(_PFMigrate);

var _PFDefense = __webpack_require__(12);

var PFDefense = _interopRequireWildcard(_PFDefense);

var _PFAttackOptions = __webpack_require__(11);

var PFAttackOptions = _interopRequireWildcard(_PFAttackOptions);

var _PFAttackGrid = __webpack_require__(7);

var PFAttackGrid = _interopRequireWildcard(_PFAttackGrid);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var wornEquipBaseRowsOld = ["Belt", "Body", "Chest", "Eyes", "Feet", "Hands", "Head", "Headband", "Neck", "Ring1", "Ring2", "Shoulders", "Wrist"],
    wornEquipBaseRowsNew = wornEquipBaseRowsOld.concat(["Armor3", "Shield3"]),
    wornEquipmentRowsNew = _underscore2.default.map(wornEquipBaseRowsNew, function (row) {
    return 'worn-' + row;
}),
    wornEquipmentRowRollsNew = _underscore2.default.map(wornEquipBaseRowsNew, function (row) {
    return 'worn-' + row + '-roll';
}),
    locationNames = ["Armor", "Belt", "Body", "Chest", "Eyes", "Feet", "Hands", "Head", "Headband", "Neck", "Ring1", "Ring2", "Shield", "Shoulders", "Wrist"],
    wornEquipmentRowsPlusCarried = ["Carried", "NotCarried"].concat(locationNames),
    locationMap = { 'Carried': 0, 'NotCarried': 1, 'Armor': 2, 'Belt': 3, 'Body': 4, 'Chest': 5, 'Eyes': 6, 'Feet': 7, 'Hands': 8,
    'Head': 9, 'Headband': 10, 'Neck': 11, 'Ring1': 12, 'Ring2': 13, 'Shield': 14, 'Shoulders': 15, 'Wrist': 16 },
    equipMap = { 'noEquipType': 0, 'Weapon': 1, 'Armor': 2, 'Ammo': 3, 'Consumables': 4, 'OtherMagic': 5, 'Gear': 6, 'Other': 7, 'Charged': 8, 'Other2': 9 },
    groupMapForMenu = { 0: '', 1: 'weapons', 2: 'armor-shield', 3: 'ammunition', 4: 'consumables', 5: 'other-magic-items', 6: 'gear-tool', 7: 'other-items', 8: 'charged-magics', 9: 'other-items-2' },
    wornEquipmentColumns = ["charges", "weight", "hp", "hp_max", "value"],
    wornLocTab = -1,
    commonLinkedAttributes = ["attack-type", "range", "masterwork", "crit-target", "crit-multiplier", "damage-dice-num", "damage-die", "damage", "precision_dmg_macro", "precision_dmg_type", "critical_dmg_macro", "critical_dmg_type"],
    defaultRepeatingMacro = '&{template:pf_block} @{toggle_accessible_flag} @{toggle_rounded_flag} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_block-item}}} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle}} {{name=@{name}}} {{hasuses=@{has_uses}}} {{qty=@{qty}}} {{qtymax=@{qty_max}}} {{shortdesc=@{short-description}}} {{description=@{description}}}',
    defaultRepeatingMacroMap = {
    '&{template:': { 'current': 'pf_block}' },
    '@{toggle_rounded_flag}': { 'current': '@{toggle_rounded_flag}' },
    '@{toggle_accessible_flag}': { 'current': '@{toggle_accessible_flag}' },
    '{{color=': { 'current': '@{rolltemplate_color}}}' },
    '{{header_image=': { 'current': '@{header_image-pf_block-item}}}', old: ['header_image-pf_block}}}'] },
    '{{name=': { 'current': '@{name}}}' },
    '{{character_name=': { 'current': '@{character_name}}}' },
    '{{character_id=': { 'current': '@{character_id}}}' },
    '{{subtitle}}': { 'current': '{{subtitle}}' },
    '{{hasuses=': { 'current': '@{has_uses}}}' },
    '{{qty=': { 'current': '@{qty}}}' },
    '{{qty_max=': { 'current': '@{qty_max}}}' },
    '{{shortdesc=': { 'current': '@{short-description}}}' },
    '{{description=': { 'current': '@{description}}}', old: ['@{short-description}}}'] }
},
    defaultDeletedMacroAttrs = [];

function migrateRepeatingMacros(callback) {
    var done = _underscore2.default.once(function () {
        _exportsLoaderTASTheAaronSheet2.default.debug("leaving PFInventory.resetCommandMacro: ");
        if (typeof callback === "function") {
            callback();
        }
    }),
        migrated = function migrated() {
        setAttrs({ 'migrated_item_macrosv1': 1 }, _PFConst2.default.silentParams, done);
    };
    getAttrs(['migrated_item_macrosv1'], function (v) {
        if (!parseInt(v.migrated_item_macros, 10)) {
            PFMacros.migrateRepeatingMacros(migrated, 'item', 'macro-text', defaultRepeatingMacro, defaultRepeatingMacroMap, defaultDeletedMacroAttrs);
        } else {
            done();
        }
    });
}
/** resetCommandMacro sets command button macro with all rows from one ability list.
 * calls PFMenus.getRepeatingCommandMacro
 * sets the returned string to macro with attribute name: section+"_buttons_macro"
 *@param {function} callback  when done
 */
function resetCommandMacro(callback) {
    var done = _underscore2.default.once(function () {
        _exportsLoaderTASTheAaronSheet2.default.debug("leaving PFInventory.resetCommandMacro: ");
        if (typeof callback === "function") {
            callback();
        }
    }),
        doneOne = _underscore2.default.after(2, done);
    PFMenus.resetOneCommandMacro('item', true, doneOne, '', groupMapForMenu);
    PFMenus.resetOneCommandMacro('item', false, doneOne, '', groupMapForMenu);
}
/** Gets the worn item grid row name corresponding to location number in dropdown
 *@param {int} location a value from repeating_item_$X_location
 *@returns {string} name of "worn-space" to set
 */
function getWornItemNameField(location) {
    var wornSlot = "";
    if (location > 1 && wornEquipmentRowsPlusCarried[location]) {
        //TAS.debug("getWornItemNameField at location:" + wornEquipmentRowsPlusCarried[location]);
        if (location !== locationMap.Armor && location !== locationMap.Shield) {
            wornSlot = "worn-" + wornEquipmentRowsPlusCarried[location];
        } else if (location === locationMap.Armor) {
            wornSlot = "armor3";
        } else if (location === locationMap.Shield) {
            wornSlot = "shield3";
        }
    }
    return wornSlot;
}
/** updateRepeatingItems totals columns 
 *@param {function} callback to call when done
 *@param {bool} silently if true send PFConst.silentParams to setAttrs
 */
function updateRepeatingItems(callback, silently) {
    var done = _underscore2.default.once(function () {
        if (typeof callback === "function") {
            callback();
        }
    });
    try {
        //TAS.debug("at updateRepeatingItems");
        _exportsLoaderTASTheAaronSheet2.default.repeating('item').attrs('item_total_weight', 'item-total-hp', 'item-total-hp_max', 'item-total-value').fields('item-weight', 'qty', 'qty_max', 'location', 'item-hp', 'item-hp_max', 'value').reduce(function (m, r) {
            try {
                //TAS.debug("in weight add row, variables: weight: "+r.F['item-weight']+", qty:"+r.I.qty+", max:"+r.I.qty_max +", loc:"+ r.I.location);
                if (r.I.qty > 0 && r.I.location !== locationMap.NotCarried) {
                    if (r.I.qty_max === 0 || r.I.qty_max === 1) {
                        m['item-weight'] += r.F['item-weight'] * r.I.qty;
                    } else {
                        m['item-weight'] += r.F['item-weight'];
                    }
                }
                m['item-hp'] += r.I['item-hp'];
                m['item-hp_max'] += r.I['item-hp_max'];
                m.value += r.I.value * r.I.qty;
            } catch (errinner) {
                _exportsLoaderTASTheAaronSheet2.default.error("PFInventory.updateRepeatingItems inner error", errinner);
            } finally {
                return m;
            }
        }, {
            'item-weight': 0,
            'item-hp': 0,
            'item-hp_max': 0,
            value: 0
        }, function (m, r, a) {
            a.S['item_total_weight'] = m['item-weight'];
            a.S['item-total-hp'] = m['item-hp'];
            a.S['item-total-hp_max'] = m['item-hp_max'];
            a.S['item-total-value'] = m.value;
        }).execute(done);
    } catch (err) {
        _exportsLoaderTASTheAaronSheet2.default.error("PFInventory.updateRepeatingItems", err);
        done();
    }
}
/** updateCarriedCurrency  totals weight for carried currency 
 *@param {function} callback to call when done
 *@param {bool} silently if true send PFConst.silentParams to setAttrs
 */
function updateCarriedCurrency(callback, silently) {
    var done = function done() {
        if (typeof callback === "function") {
            callback();
        }
    };
    getAttrs(["CP", "SP", "GP", "PP", "carried-currency"], function (v) {
        var curr = parseInt(v["carried-currency"], 10) || 0,
            params = {},
            carried = 0;
        try {
            carried = ((parseInt(v["CP"], 10) || 0) + (parseInt(v["SP"], 10) || 0) + (parseInt(v["GP"], 10) || 0) + (parseInt(v["PP"], 10) || 0)) / 50;
            //TAS.debug("curr=" + curr + ", carried=" + carried);
            if (curr !== carried) {
                if (silently) {
                    params = _PFConst2.default.silentParams;
                }
                setAttrs({
                    "carried-currency": carried
                }, params, done);
            } else {
                done();
            }
        } catch (err) {
            _exportsLoaderTASTheAaronSheet2.default.error("PFInventory.updateCarriedCurrency", err);
            done();
        }
    });
}
/** updateCarriedTotal- updates the total for carried weight
 *@param {function} callback to call when done
 *@param {bool} silently if true send PFConst.silentParams to setAttrs
 */
function updateCarriedTotal(callback, silently) {
    var done = function done() {
        if (typeof callback === "function") {
            callback();
        }
    };
    getAttrs(["carried-currency", "item_total_weight", "carried-misc", "carried-total"], function (v) {
        var curr,
            carried,
            params = {};
        try {
            curr = parseFloat(v["carried-total"], 10) || 0;
            carried = ((parseFloat(v["carried-currency"], 10) || 0) * 100 + (parseFloat(v["item_total_weight"], 10) || 0) * 100 + (parseFloat(v["carried-misc"], 10) || 0) * 100) / 100; // Fix bad javascript math
            //TAS.debug("curr=" + curr + ", carried=" + carried);
            if (curr !== carried) {
                setAttrs({
                    "carried-total": carried
                }, params, done);
            } else {
                done();
            }
        } catch (err) {
            _exportsLoaderTASTheAaronSheet2.default.error("PFInventory.updateCarriedTotal", err);
            done();
        }
    });
}
/** Got rid of the Worn Equipment section, so migrate any values to the Equipment as repeating entries.
 * Worn Armor & Worn Shield are now disabled and controlled by the Equipment section in the Inventory tab.
 *@param {function} callback to call when done
 *@param {bool} silently if true send PFConst.silentParams to setAttrs
 */
function migrateWornEquipment(callback) {
    var done = _underscore2.default.once(function () {
        _exportsLoaderTASTheAaronSheet2.default.debug("leaving PFInventory.migrateWornEquipment");
        if (typeof callback === "function") {
            callback();
        }
    }),
        doneMigrating = _underscore2.default.once(function () {
        setAttrs({ "migrated_worn_equipment": "1" }, {}, done);
    }),
        copyWornEquipmentToNewItem = function copyWornEquipmentToNewItem(row, callback) {
        var done = _underscore2.default.once(function () {
            _exportsLoaderTASTheAaronSheet2.default.debug("leaving PFInventory.copyWornEquipmentToNewItem for " + row);
            if (typeof callback === "function") {
                callback();
            }
        }),
            attribList = ["worn-" + row];
        attribList.push("worn-" + row + "-description");
        attribList.push("worn-" + row + "-hardness");
        _underscore2.default.each(wornEquipmentColumns, function (col) {
            attribList.push("worn-" + row + "-" + col);
        });
        getAttrs(attribList, function (v) {
            var newRowId = '',
                newRowAttrs = {},
                weightRowAttrs = {},
                attrib = "",
                newLocation = 0,
                newEquipType = equipMap.noEquipType;
            // Migrate the worn equipment entry to equipment if the name is populated
            try {
                _exportsLoaderTASTheAaronSheet2.default.debug("PFInventory.copyWornEquipmentToNewItem checking " + row + " it is:" + v["worn-" + row]);
                if (v["worn-" + row]) {
                    newRowId = generateRowID();
                    /* Assign defined worn equipment values to new repeating_item entry */
                    newRowAttrs["repeating_item_" + newRowId + "_name"] = v["worn-" + row];
                    newRowAttrs["repeating_item_" + newRowId + "_row_id"] = newRowId;
                    attrib = v["worn-" + row + "-description"];
                    if (attrib) {
                        newRowAttrs["repeating_item_" + newRowId + "_short-description"] = attrib;
                    }
                    attrib = v["worn-" + row + "-charges"];
                    if (attrib) {
                        newRowAttrs["repeating_item_" + newRowId + "_qty"] = attrib;
                        newRowAttrs["repeating_item_" + newRowId + "_qty_max"] = v["worn-" + row + "-charges_max"] || 50;
                    } else {
                        weightRowAttrs["repeating_item_" + newRowId + "_qty"] = 1;
                        weightRowAttrs["repeating_item_" + newRowId + "_qty_max"] = 1;
                    }
                    attrib = v["worn-" + row + "-weight"];
                    if (attrib) {
                        weightRowAttrs["repeating_item_" + newRowId + "_item-weight"] = attrib;
                    }
                    attrib = v["worn-" + row + "-hardness"];
                    if (attrib) {
                        weightRowAttrs["repeating_item_" + newRowId + "_hardness"] = attrib;
                    }
                    attrib = v["worn-" + row + "-hp"];
                    if (attrib) {
                        weightRowAttrs["repeating_item_" + newRowId + "_item-hp"] = attrib;
                    }
                    attrib = v["worn-" + row + "-hp_max"];
                    if (attrib) {
                        newRowAttrs["repeating_item_" + newRowId + "_item-hp_max"] = attrib;
                    }
                    attrib = v["worn-" + row + "-value"];
                    if (attrib) {
                        weightRowAttrs["repeating_item_" + newRowId + "_value"] = attrib;
                    }
                    newRowAttrs["worn-" + row + "-roll"] = "@{repeating_item_" + newRowId + "_macro-text}";
                    // Location
                    newLocation = locationMap[row];
                    //wornEquipmentRowsPlusCarried.indexOf(row);
                    newRowAttrs["repeating_item_" + newRowId + "_location"] = newLocation;
                    newRowAttrs["repeating_item_" + newRowId + "_old_location"] = newLocation;
                    if (newLocation > locationMap.NotCarried) {
                        newRowAttrs["repeating_item_" + newRowId + "_loctype-tab"] = locationMap.Carried;
                    } else {
                        newRowAttrs["repeating_item_" + newRowId + "_loctype-tab"] = newLocation;
                    }

                    newEquipType = equipMap.OtherMagic;
                    newRowAttrs["repeating_item_" + newRowId + "_equip-type"] = newEquipType;
                    newRowAttrs["repeating_item_" + newRowId + "_equiptype-tab"] = newEquipType;
                }
            } catch (err) {
                _exportsLoaderTASTheAaronSheet2.default.error("PFInventory.copyWornEquipmentToNewItem", err);
            } finally {
                //TAS.debug("PFInventory.migrateWornEquipment.copyWornEquipmentToNewItem setting:",newRowAttrs);
                if (_underscore2.default.size(newRowAttrs) > 0) {
                    setAttrs(newRowAttrs, _PFConst2.default.silentParams, done);
                } else {
                    done();
                }
                //weight, hardness, qty are set non silently to trigger recalc
                if (_underscore2.default.size(weightRowAttrs) > 0) {
                    setAttrs(weightRowAttrs);
                }
            }
        });
    },

    // Migrate the armor & worn shield entries to equipment if the name is populated
    //item: value from PFDefense.defenseArmorShieldRowsOld
    copyWornDefenseToNewItem = function copyWornDefenseToNewItem(item, wornAlreadySet, callback) {
        var done = _underscore2.default.once(function (wasSetToWorn) {
            _exportsLoaderTASTheAaronSheet2.default.debug("leaving PFInventory.copyWornDefenseToNewItem did we set worn for " + item + "?: " + wasSetToWorn);
            if (typeof callback === "function") {
                callback(wasSetToWorn);
            }
        }),
            attribList = [item, item + "-type"],
            defenseName = "",
            isArmor = 0,
            isShield = 0;

        //armor or shield?
        if (/armor/i.test(item)) {
            isArmor = 1;
        } else if (/shield/i.test(item)) {
            isShield = 1;
        } else {
            done(0);
            return;
        }
        // Search for pre-existing matching entry in equipment
        getAttrs([item], function (vi) {
            //TAS.debug("vi[item]=" + vi[item]);
            if (!vi[item]) {
                done(0);
                return;
            }
            defenseName = vi[item];
            getSectionIDs("repeating_item", function (ids) {
                //TAS.debug("ids=" + ids);
                var fields = [];
                fields = _underscore2.default.map(ids, function (id) {
                    return "repeating_item_" + id + "_name";
                });
                _underscore2.default.each(PFDefense.defenseArmorShieldColumns, function (column) {
                    attribList.push(item + "-" + column);
                });
                attribList = attribList.concat(fields);
                //TAS.debug("copyWornDefenseToNewItem attribList=" + attribList);
                getAttrs(attribList, function (v) {
                    var prefix,
                        matchingField,
                        newRowId = '',
                        newRowAttrs = {},
                        locationAttrs = {},
                        maxDex = 0,
                        attrib = "",
                        isNewRow = true,
                        markedEquipped = 0,
                        isWorn = 0;
                    try {
                        //TAS.debug("PFInventory.copyWornDefenseToNewItem item:"+item+" was already set="+wornAlreadySet,v);
                        markedEquipped = parseInt(v[item + "-equipped"], 10) || 0;
                        maxDex = parseInt(v[item + "-max-dex"], 10);
                        if (isNaN(maxDex)) {
                            maxDex = 99;
                        }
                        matchingField = _underscore2.default.find(fields, function (field) {
                            return defenseName === v[field];
                        });
                        //TAS.debug("matchingField=" + matchingField);
                        if (matchingField) {
                            isNewRow = false;
                            newRowId = SWUtils.getRowId(matchingField); //.replace("repeating_item_", "").replace("_name", "");
                        } else {
                            newRowId = generateRowID();
                        }
                        newRowAttrs["repeating_item_" + newRowId + "_equip-type"] = equipMap.Armor;
                        newRowAttrs["repeating_item_" + newRowId + "_equiptype-tab"] = equipMap.Armor;
                        /* Assign defined worn equipment values to new repeating_item entry */
                        if (isNewRow) {
                            newRowAttrs["repeating_item_" + newRowId + "_name"] = defenseName;
                        }
                        newRowAttrs["repeating_item_" + newRowId + "_qty"] = 1;
                        newRowAttrs["repeating_item_" + newRowId + "_qty_max"] = 1;
                        if (!wornAlreadySet && markedEquipped === 1) {
                            isWorn = 1;
                            if (isArmor) {
                                if (isNewRow) {
                                    newRowAttrs["repeating_item_" + newRowId + "_location"] = locationMap.Armor;
                                    newRowAttrs["repeating_item_" + newRowId + "_old_location"] = locationMap.Armor;
                                } else {
                                    locationAttrs["repeating_item_" + newRowId + "_location"] = locationMap.Armor;
                                }
                                newRowAttrs["repeating_item_" + newRowId + "_loctype-tab"] = locationMap.Carried;
                                newRowAttrs["armor3-roll"] = "@{repeating_item_" + newRowId + "_macro-text}";
                                newRowAttrs["armor3"] = v[item];
                            } else {
                                if (isNewRow) {
                                    newRowAttrs["repeating_item_" + newRowId + "_location"] = locationMap.Shield;
                                    newRowAttrs["repeating_item_" + newRowId + "_old_location"] = locationMap.Shield;
                                } else {
                                    locationAttrs["repeating_item_" + newRowId + "_location"] = locationMap.Shield;
                                }
                                newRowAttrs["repeating_item_" + newRowId + "_loctype-tab"] = locationMap.Carried;
                                newRowAttrs["shield3-roll"] = "@{repeating_item_" + newRowId + "_macro-text}";
                                newRowAttrs["shield3"] = v[item];
                            }
                            //set to blank
                            if (maxDex > 50) {
                                newRowAttrs[item + "-max-dex"] = "-";
                            }
                        } else {
                            //do not need to put in locationAttrs since we set it something last time we came through for other row
                            newRowAttrs["repeating_item_" + newRowId + "_location"] = locationMap.NotCarried; // not Carried
                            newRowAttrs["repeating_item_" + newRowId + "_old_location"] = locationMap.NotCarried;
                            newRowAttrs["repeating_item_" + newRowId + "_loctype-tab"] = locationMap.NotCarried;

                            //ensure it is not marked equipped
                            if (markedEquipped) {
                                newRowAttrs[item + "-equipped"] = 0;
                            }
                            // Leave the entry there. The player can manage the entry from inventory and equip it on Defenses tab
                        }
                        //do not set type, max-dex, or equipped, but do all other columns:
                        _underscore2.default.each(["acbonus", "enhance", "acp", "spell-fail", "proficiency"], function (col) {
                            attrib = v[item + "-" + col];
                            if (attrib) {
                                newRowAttrs["repeating_item_" + newRowId + "_item-" + col] = attrib;
                            }
                        });

                        if (maxDex > 50) {
                            newRowAttrs["repeating_item_" + newRowId + "_item-max-dex"] = "-";
                        } else {
                            newRowAttrs["repeating_item_" + newRowId + "_item-max-dex"] = maxDex;
                        }

                        attrib = v[item + "-type"];
                        if (attrib) {
                            newRowAttrs["repeating_item_" + newRowId + "_item-defense-type"] = attrib;
                        }
                    } catch (err) {
                        _exportsLoaderTASTheAaronSheet2.default.error("PFInventory.copyWornDefenseToNewItem", err);
                    } finally {
                        if (_underscore2.default.size(newRowAttrs) > 0) {
                            //TAS.debug("PFInventory.copyWornDefenseToNewItem item:"+item+",setting:",newRowAttrs);
                            setAttrs(newRowAttrs, _PFConst2.default.silentParams, function () {
                                if (_underscore2.default.size(locationAttrs) > 0) {
                                    setAttrs(locationAttrs, {}, function () {
                                        done(isWorn);
                                    });
                                } else {
                                    done(isWorn);
                                }
                            });
                        } else {
                            done(false);
                        }
                    }
                });
            });
        });
    };
    //TAS.debug("############","at PFInventory.migrateWornEquipment");
    getAttrs(["migrated_worn_equipment"], function (v) {
        var foundWornArmor = false,
            foundWornShield = false,
            doneAll = _underscore2.default.after(2, function () {
            //TAS.debug("#### PFInventory.migrateWornEquipment.doneAll 2");
            doneMigrating();
        }),
            migrateDefenses = function migrateDefenses() {
            _exportsLoaderTASTheAaronSheet2.default.debug("checking armor3");
            copyWornDefenseToNewItem('armor3', foundWornArmor, function (wasSet) {
                foundWornArmor = foundWornArmor || wasSet;
                _exportsLoaderTASTheAaronSheet2.default.debug("checking armor2, found=" + foundWornArmor);
                copyWornDefenseToNewItem('armor2', foundWornArmor, function (wasSet) {
                    foundWornArmor = foundWornArmor || wasSet;
                    _exportsLoaderTASTheAaronSheet2.default.debug("checking armor0, found=" + foundWornArmor);
                    copyWornDefenseToNewItem('armor', foundWornArmor, doneAll);
                });
            });
            _exportsLoaderTASTheAaronSheet2.default.debug("checking shield3");
            copyWornDefenseToNewItem('shield3', foundWornShield, function (wasSet) {
                foundWornShield = foundWornShield || wasSet;
                _exportsLoaderTASTheAaronSheet2.default.debug("checking shield2, found=" + foundWornShield);
                copyWornDefenseToNewItem('shield2', foundWornShield, function (wasSet) {
                    foundWornShield = foundWornShield || wasSet;
                    _exportsLoaderTASTheAaronSheet2.default.debug("checking shield0, found=" + foundWornShield);
                    copyWornDefenseToNewItem('shield', foundWornShield, doneAll);
                });
            });
        },
            doneWornRows = _underscore2.default.after(_underscore2.default.size(wornEquipBaseRowsOld), function () {
            var wornRows, fieldsToClear, setter;
            try {
                wornRows = _underscore2.default.map(wornEquipBaseRowsOld, function (field) {
                    return 'worn-' + field + '-';
                });
                fieldsToClear = SWUtils.cartesianAppend(wornRows, ['charges', 'weight', 'hp', 'hp_max', 'value', 'description', 'hardness']);
                setter = _underscore2.default.reduce(fieldsToClear, function (m, f) {
                    m[f] = '';return m;
                }, {});
                setAttrs(setter, _PFConst2.default.silentParams, migrateDefenses);
            } catch (err) {
                _exportsLoaderTASTheAaronSheet2.default.error("PFInventory.migrateWornEquipment.doneWornRows err:", err);
                migrateDefenses();
            }
        });
        try {
            //TAS.debug("PFInventory.migrateWornEquipment flag is ",v," and there are "+_.size(wornEquipBaseRowsOld)+" rows of worn equip");
            if (parseInt(v["migrated_worn_equipment"], 10) === 1) {
                _exportsLoaderTASTheAaronSheet2.default.debug("##########", "ALREADY MIGRATED WORN EQUIPMENT");
                done();
                return;
            }
            //do worn equipment rows before armor, because sometimes they have armor in a slot.
            _underscore2.default.each(wornEquipBaseRowsOld, function (row) {
                copyWornEquipmentToNewItem(row, doneWornRows);
            });
        } catch (err) {
            _exportsLoaderTASTheAaronSheet2.default.error("PFInventory.migrateWornEquipment", err);
            migrateDefenses();
        }
    });
}
/** set old location to the new location, and unset other items set to this location, also updates loctype-tab
 *@param {string} id id of row updated, or null
 *@param {function} callback to call when done
 *@param {boolean} silently if true call setAttrs with {silent:true}
 *@param {object} eventInfo USED - from event, to get id from sourceAttribute
 */
function updateEquipmentLocation(id, callback, silently, eventInfo) {
    var done = _underscore2.default.once(function () {
        //TAS.debug("leaving PFInventory.updateEquipmentLocation for id "+id);
        if (typeof callback === "function") {
            callback();
        }
    }),

    /* unsetOtherItems makes sure any other row than id is not in location */
    unsetOtherItems = function unsetOtherItems(location, id) {
        if (!id || location < 2 || !location) {
            done();
            return;
        }
        /*
        * The player has now changed the location to a worn slot, so check for other repeating items that have the same
        * slot and set them to 'carried'.
        */
        getSectionIDs("repeating_item", function (idarray) {
            // get the repeating set
            var attribs = [];
            if (_underscore2.default.size(idarray) <= 1) {
                done();
                return;
            }
            _underscore2.default.each(idarray, function (currentID, i) {
                // loop through the set
                if (currentID !== id) {
                    attribs.push("repeating_item_" + currentID + "_location");
                }
            });
            getAttrs(attribs, function (w) {
                var setter = {};
                _underscore2.default.each(idarray, function (currentID, i) {
                    // loop through the set
                    if ((parseInt(w["repeating_item_" + currentID + "_location"], 10) || 0) === location) {
                        setter["repeating_item_" + currentID + "_location"] = 0;
                        setter["repeating_item_" + currentID + "_old_location"] = 0;
                    }
                });
                if (_underscore2.default.size(setter) > 0) {
                    setAttrs(setter, { silent: true }, done);
                } else {
                    done();
                }
            });
        });
    },
        idStr = SWUtils.getRepeatingIDStr(id),
        item_entry = 'repeating_item_' + idStr,
        realItemID = id || (eventInfo ? SWUtils.getRowId(eventInfo.sourceAttribute) || "" : ""),
        prefix = 'repeating_item_' + realItemID + "_",
        locationField = prefix + "location",
        locationTabField = prefix + "loctype-tab",
        nameField = prefix + "name",
        oldLocationField = prefix + "old_location",
        rollField = prefix + "macro-text";
    try {
        //TAS.debug("updateEquipmentLocation: called for ID "+ realItemID);
        //sample source: repeating_item_-kbkc95wvqw1n4rbgs1c_location
        // note that the source is always lowercase, but the actual ID is both cases
        //check value of 'location' to see if it is being worn; if not check to see if the player is removing it from 'worn'
        //TAS.debug("updateEquipmentLocation source=" + source);
        getAttrs([locationField, oldLocationField, nameField, locationTabField], function (v) {
            var location = 0,
                oldlocation = 0,
                wornItemAttrs = {},
                wornSlot = "",
                itemName = "";
            //TAS.debug("updateEquipmentLocation: ", v);
            try {
                location = parseInt(v[locationField], 10);
                if (isNaN(location)) {
                    _exportsLoaderTASTheAaronSheet2.default.debug("why is location not set!?");
                    location = locationMap.NotCarried;
                    wornItemAttrs[locationField] = location;
                }
                if (location > locationMap.NotCarried) {
                    wornItemAttrs[locationTabField] = locationMap.Carried;
                } else {
                    wornItemAttrs[locationTabField] = location;
                }

                oldlocation = parseInt(v[oldLocationField], 10);
                if (isNaN(oldlocation)) {
                    oldlocation = location;
                }
                wornItemAttrs[oldLocationField] = location;
                if (location === locationMap.Carried && oldlocation !== locationMap.NotCarried && oldlocation !== location) {
                    wornSlot = getWornItemNameField(oldlocation);
                    if (wornSlot) {
                        wornItemAttrs[wornSlot] = "";
                        wornItemAttrs[wornSlot + "-roll"] = "";
                    }
                } else if (location > locationMap.NotCarried) {
                    wornSlot = getWornItemNameField(location);
                    if (wornSlot) {
                        itemName = v[nameField] || "";
                        if (itemName) {
                            wornItemAttrs[wornSlot] = itemName;
                        } else {
                            wornItemAttrs[wornSlot] = "Row " + realItemID;
                        }
                        wornItemAttrs[wornSlot + "-roll"] = "@{" + rollField + "}";
                    }
                    if (oldlocation > 1 && oldlocation !== location) {
                        wornSlot = getWornItemNameField(oldlocation);
                        if (wornSlot) {
                            wornItemAttrs[wornSlot] = "";
                            wornItemAttrs[wornSlot + "-roll"] = "";
                        }
                    }
                }
            } catch (err2) {
                _exportsLoaderTASTheAaronSheet2.default.error("updateEquipmentLocation update location error:", err2);
            } finally {
                if (_underscore2.default.size(wornItemAttrs) > 0) {
                    //TAS.debug("updateEquipmentLocation, setting slot ", wornItemAttrs);
                    setAttrs(wornItemAttrs, _PFConst2.default.silentParams, function () {
                        if (location > locationMap.NotCarried) {
                            unsetOtherItems(location, realItemID);
                        }
                        done();
                    });
                } else {
                    done();
                }
            }
        });
    } catch (err) {
        _exportsLoaderTASTheAaronSheet2.default.error("PFInventory.updateEquipmentLocation", err);
        done();
    }
}
/** replace the values on the Defenses tab in disabled fields with this row's values
 * from the equipment. Some fields like Armor Bonus, ACP, and Max Dex are not available in the equipment, so they
 * will need to be edited manually after making this change.
 *@param {int} location the value of location attribute in repeating_item
 *@param {string} sourceAttribute eventInfo sourceAttribute of change user made that called this
 *@param {function} callback call when done
 */
function updateWornArmorAndShield(location, sourceAttribute, callback) {
    var done = _underscore2.default.once(function () {
        _exportsLoaderTASTheAaronSheet2.default.debug("leaving PFInventory.updateWornArmorAndShield");
        if (typeof callback === "function") {
            callback();
        }
    }),
        defenseItem = "",
        attribUpdated = "",
        itemFullPrefix = "",
        attribList = [],
        id = "",
        item_entry = "",
        itemFields = ["item-acbonus", "item-acenhance", "item-max-dex", "item-acp", "item-spell-fail", "item-defense-type", "item-proficiency", "name", "set-as-armor", "set-as-shield", "location", "old_location", "equip-type", "acenhance"];
    try {
        attribUpdated = SWUtils.getAttributeName(sourceAttribute);
        id = SWUtils.getRowId(sourceAttribute);
        item_entry = "repeating_item_" + id + "_";
        if (item_entry.slice(-1) !== "_") {
            item_entry += "_";
        }
        itemFullPrefix = item_entry + "item-";
        defenseItem = location === locationMap.Armor ? "armor3" : "shield3";
        //TAS.debug"at update worn armor, defenseItem=" + defenseItem);
        attribList = _underscore2.default.map(itemFields, function (attr) {
            return item_entry + attr;
        });
        attribList = _underscore2.default.reduce(PFDefense.defenseArmorShieldColumns, function (memo, col) {
            memo.push(defenseItem + "-" + col);
            return memo;
        }, attribList);
        attribList.push(defenseItem);
        //TAS.debug("PFInventory.updateWornArmorAndShield fields ", attribList);
    } catch (err) {
        _exportsLoaderTASTheAaronSheet2.default.error("PFInventory.updateWornArmorAndShield error before getattrs", err);
        done();
        return;
    }
    //TAS.debug("attribList=" + attribList);
    getAttrs(attribList, function (w) {
        var i = 0,
            setter = {},
            silentSetter = {},
            equipType = 0,
            actualLocation = 0,
            attrib = "";
        try {
            //if we are setting new, or updating an item in the location, or updating an item in a diffrent location
            //so we can set a new ring of shield, but not update it. but we can update armor and shields.
            if (attribUpdated === 'set-as-armor' || attribUpdated === 'set-as-shield' || location === locationMap.Armor || location === locationMap.Shield) {
                //TAS.debug("updateWornArmorAndShield ", w);
                for (i = 0; i < PFDefense.defenseArmorShieldColumns.length; i++) {
                    if (PFDefense.defenseArmorShieldColumns[i] !== "max-dex" && PFDefense.defenseArmorShieldColumns[i] !== "equipped" && PFDefense.defenseArmorShieldColumns[i] !== "type" && PFDefense.defenseArmorShieldColumns[i] !== "enhance") {
                        attrib = parseInt(w[itemFullPrefix + PFDefense.defenseArmorShieldColumns[i]], 10) || 0;
                        if (parseInt(w[defenseItem + "-" + PFDefense.defenseArmorShieldColumns[i]], 10) !== attrib) {
                            setter[defenseItem + "-" + PFDefense.defenseArmorShieldColumns[i]] = attrib;
                        }
                    }
                }
                attrib = w[item_entry + "name"];
                if (attrib) {
                    if (w[defenseItem] !== attrib) {
                        setter[defenseItem] = attrib;
                    }
                } else {
                    setter[defenseItem] = "";
                }
                attrib = w[itemFullPrefix + "acenhance"];
                if (attrib) {
                    setter[defenseItem + "-enhance"] = attrib;
                }
                attrib = w[itemFullPrefix + "defense-type"];
                if (attrib) {
                    if (defenseItem === "shield3" && attrib === "Medium") {
                        //invalid choice, prob meant heavy shield
                        attrib = "Heavy";
                    } else if (defenseItem === "armor3" && attrib === "Tower Shield") {
                        //invalid
                        attrib = "Heavy";
                    }
                    if (w[defenseItem + "-type"] !== attrib) {
                        setter[defenseItem + "-type"] = attrib;
                    }
                }
                attrib = parseInt(w[itemFullPrefix + "max-dex"], 10);
                if (w[itemFullPrefix + "max-dex"] === "-" || isNaN(attrib)) {
                    setter[defenseItem + "-max-dex"] = "-";
                } else {
                    setter[defenseItem + "-max-dex"] = attrib;
                }
                if (w[defenseItem + "-equipped"] !== "1") {
                    setter[defenseItem + "-equipped"] = 1;
                }
                //reset the buttons silently so we don't loop.
                attrib = parseInt(w[item_entry + "set-as-armor"], 10);
                if (attrib) {
                    silentSetter[item_entry + "set-as-armor"] = "0";
                }
                attrib = parseInt(w[item_entry + "set-as-shield"], 10);
                if (attrib) {
                    silentSetter[item_entry + "set-as-shield"] = "0";
                }
                //if we hit "set as armor or shield" on a peice of armor / shield equipment, make sure to slot it.
                //do it silently so we don't loop 
                equipType = parseInt(w[item_entry + "equip-type"], 10);
                actualLocation = parseInt(w[item_entry + "location"], 10);
                if (!isNaN(equipType) && actualLocation !== locationMap.Armor && actualLocation !== locationMap.Shield && equipType === equipMap.Armor && (attribUpdated === 'set-as-armor' || attribUpdated === 'set-as-shield')) {
                    silentSetter[item_entry + "old_location"] = actualLocation;
                    silentSetter[item_entry + "location"] = location;
                }
            } else {
                _exportsLoaderTASTheAaronSheet2.default.warning("no reason to update armor or shield for " + sourceAttribute + " in location " + wornEquipmentRowsPlusCarried[location]);
            }
        } catch (errinner) {
            _exportsLoaderTASTheAaronSheet2.default.error("PFInventory.updateWornArmorAndShield INNER error", errinner);
        } finally {
            if (_underscore2.default.size(silentSetter) > 0) {
                setAttrs(silentSetter, _PFConst2.default.silentParams, function () {
                    if (actualLocation !== location) {
                        updateEquipmentLocation(id, null, true, null);
                    }
                });
            }
            if (_underscore2.default.size(setter) > 0) {
                //TAS.debug("updating defenses tab for " + defenseItem, setter);
                setAttrs(setter, {}, done);
            } else {
                done();
            }
        }
    });
}
/**  calls updateEquipmentLocation for all items
can be refactored to be faster to do all at once
 */
function updateLocations(callback) {
    var done = _underscore2.default.once(function () {
        _exportsLoaderTASTheAaronSheet2.default.debug("Leaving PFInventory.updateLocations");
        if (typeof callback === "function") {
            callback();
        }
    });
    getSectionIDs('repeating_item', function (ids) {
        var total = 0,
            doneOne;
        try {
            if (!(ids && _underscore2.default.size(ids))) {
                done();
                return;
            }
            total = _underscore2.default.size(ids);
            _exportsLoaderTASTheAaronSheet2.default.debug("PFInventory.updateLocations there are " + total + " rows in items");
            doneOne = _underscore2.default.after(total, done);
            _underscore2.default.each(ids, function (id) {
                updateEquipmentLocation(id, doneOne, null, null);
            });
        } catch (err) {
            _exportsLoaderTASTheAaronSheet2.default.error("PFInventory.updateLocations", err);
            done();
        }
    });
}
/** Triggered from a button in repeating_items, it will create a repeating attack entry from the item entry
 * @param {string} source the eventItem.sourceAttribute
 * @param {string} weaponId if the row already exists, overwrite all fields but 'name'
 */
function createAttackEntryFromRow(source, callback, silently, weaponId) {
    var done = _underscore2.default.once(function () {
        //TAS.debug("leaving PFInventory.createAttackEntryFromRow");
        if (typeof callback === "function") {
            callback();
        }
    }),
        attribList = [],
        itemId = SWUtils.getRowId(source),
        idStr = SWUtils.getRepeatingIDStr(itemId),
        item_entry = 'repeating_item_' + idStr;

    //TAS.debug("PFInventory.createAttackEntryFromRow: item_entry=" + item_entry + " , weapon:"+weaponId);
    attribList.push(item_entry + "name");
    commonLinkedAttributes.forEach(function (attr) {
        attribList.push(item_entry + "item-" + attr);
    });
    attribList.push(item_entry + "item-wpenhance");
    attribList.push(item_entry + "item-dmg-type");
    attribList.push(item_entry + "default_size");
    //TAS.debug("attribList=" + attribList);
    getAttrs(attribList, function (v) {
        var newRowId,
            setter = {},
            silentSetter = {},
            enhance = 0,
            prof = 0,
            params = silently ? PFUtils.silentParams : {};
        try {
            //TAS.debug("weaponId is :"+weaponId);
            if (!weaponId) {
                newRowId = generateRowID();
            } else {
                newRowId = weaponId;
            }
            //TAS.debug("the new row id is: "+newRowId);
            //TAS.debug("v[" + item_entry + "name]=" + v[item_entry + "name"]);
            if (v[item_entry + "name"]) {
                if (!weaponId) {
                    setter["repeating_weapon_" + newRowId + "_name"] = v[item_entry + "name"];
                }
                silentSetter["repeating_weapon_" + newRowId + "_source-item-name"] = v[item_entry + "name"];
            }
            commonLinkedAttributes.forEach(function (attr) {
                //TAS.debug("v[" + item_entry + "item-" + attr + "]=" + v[item_entry + "item-" + attr]);
                if (v[item_entry + "item-" + attr]) {
                    setter["repeating_weapon_" + newRowId + "_" + attr] = v[item_entry + "item-" + attr];
                }
            });
            if (/melee/i.test(v[item_entry + "item-attack_type"])) {
                setter["repeating_weapon_" + newRowId + "_damage-ability"] = "@{STR-mod}";
            }
            enhance = parseInt(v[item_entry + "item-wpenhance"], 10) || 0;
            if (enhance) {
                setter["repeating_weapon_" + newRowId + "_enhance"] = enhance;
            }
            //TAS.debug("v[" + item_entry + "item-defense-type]=" + v[item_entry + "item-defense-type"]);
            if (v[item_entry + "item-dmg-type"]) {
                setter["repeating_weapon_" + newRowId + "_type"] = v[item_entry + "item-dmg-type"];
            }
            //TAS.debug("v[" + item_entry + "item-proficiency]=" + v[item_entry + "item-proficiency"]);
            prof = parseInt(v[item_entry + "item-proficiency"], 10) || 0;
            if (prof !== 0) {
                prof = -4;
                setter["repeating_weapon_" + newRowId + "_proficiency"] = prof;
            }
            if (v[item_entry + "default_size"]) {
                setter["repeating_weapon_" + newRowId + "_default_size"] = v[item_entry + "default_size"];
            }
            setter["repeating_weapon_" + newRowId + "_default_damage-dice-num"] = v[item_entry + "damage-dice-num"] || 0;
            setter["repeating_weapon_" + newRowId + "_default_damage-die"] = v[item_entry + "damage-die"] || 0;
            silentSetter["repeating_weapon_" + newRowId + "_source-item"] = itemId;
            //TAS.debug("creating new attack", setter);
        } catch (err) {
            _exportsLoaderTASTheAaronSheet2.default.error("PFInventory.createAttackEntryFromRow", err);
        } finally {
            if (_underscore2.default.size(setter) > 0) {
                setter[item_entry + "create-attack-entry"] = 0;
                setAttrs(setter, params, function () {
                    //can do these in parallel
                    PFAttackOptions.resetOption(newRowId);
                    PFAttackGrid.resetCommandMacro();
                    done();
                });
                if (_underscore2.default.size(silentSetter)) {
                    setAttrs(silentSetter, _PFConst2.default.silentParams);
                }
            } else {
                setter[item_entry + "create-attack-entry"] = 0;
                setAttrs(setter, _PFConst2.default.silentParams, done);
            }
        }
    });
}
function updateAssociatedAttack(source, callback) {
    var done = _underscore2.default.once(function () {
        _exportsLoaderTASTheAaronSheet2.default.debug("leaving PFInventory.updateAssociatedAttack");
        if (typeof callback === "function") {
            callback();
        }
    }),
        attrib = "",
        weaponAttrib = "",
        sourceVal = "",
        itemId = "",
        sectionName = "",
        fields = [],
        setter = {},
        attribList = [];
    try {
        if (!source) {
            done();
            return;
        }
        itemId = SWUtils.getRowId(source);
        attrib = SWUtils.getAttributeName(source);
        //TAS.debug("attrib=" + attrib);
        if (source.indexOf("repeating_weapon_") === 0) {
            // source is an attack, so pull all data from the source (item/spell/spell-like ability) to update the attack
            // attrib will be source-item, source-spell, or source-ability
            _exportsLoaderTASTheAaronSheet2.default.error("PFInventory.updateAssociatedAttack, called on weapon event, no longer supported!");
            done();
            return;
        }
        // source is an item, so update all linked attacks with the changed attribute
        weaponAttrib = attrib.replace("item-", "");
        if (attrib === 'name') {
            weaponAttrib = 'source-item-name';
        } else if (attrib === 'item-dmg-type') {
            weaponAttrib = 'type';
        } else if (attrib === 'wpenhance') {
            weaponAttrib = 'enhance';
        }
    } catch (outererror1) {
        _exportsLoaderTASTheAaronSheet2.default.error("PFInventory.updateAssociatedAttack outer1", outererror1);
        done();
        return;
    }
    getAttrs([source], function (srcv) {
        var sourceAttr = '';
        sourceVal = srcv[source];
        if (typeof sourceVal === "undefined") {
            sourceVal = "";
        }
        //TAS.debug"sourceVal=" + sourceVal);
        if (attrib === "proficiency") {
            sourceVal = parseInt(sourceVal, 10) || 0;
            if (sourceVal !== 0) {
                sourceVal = -4;
            }
        }
        sourceVal = String(sourceVal);
        //TAS.debug("itemId=" + itemId, "attrib=" + attrib, "weaponAttrib=" + weaponAttrib);
        getSectionIDs("repeating_weapon", function (idarray) {
            // get the repeating set
            fields = _underscore2.default.reduce(idarray, function (memo, currentID) {
                memo = memo.concat(["repeating_weapon_" + currentID + "_source-item", "repeating_weapon_" + currentID + "_" + weaponAttrib]);
                return memo;
            }, []);
            //TAS.debug("processing currentID=" + currentID);
            getAttrs(fields, function (w) {
                setter = {}; // start with a blank in this loop
                try {
                    //TAS.debug"PFInventory.updateAssociatedAttack ", w);
                    _underscore2.default.each(idarray, function (currentID) {
                        // loop through the set
                        var targetVal = "",
                            wField = ""; // start with blank in this loop
                        //TAS.debug("source=" + source, "v[repeating_weapon_" + currentID + "_source-item]=" + v["repeating_weapon_" + currentID + "_source-item"]);
                        //TAS.debug("itemId=" + itemId)
                        //TAS.debug"comparing " + itemId + " with " + w["repeating_weapon_" + currentID + "_source-item"]);
                        if (itemId === w["repeating_weapon_" + currentID + "_source-item"]) {
                            wField = "repeating_weapon_" + currentID + "_" + weaponAttrib;
                            targetVal = w[wField];
                            if (attrib === "proficiency") {
                                targetVal = parseInt(targetVal, 10) || 0;
                            }
                            targetVal = String(targetVal);
                            if (targetVal !== sourceVal) {
                                setter[wField] = sourceVal;
                                if (sourceAttr === 'damage-die' || sourceAttr === 'damage-dice-num') {
                                    setter["repeating_weapon_" + currentID + "_default_" + sourceAttr] = sourceVal;
                                }
                            }
                        }
                    });
                } catch (innererror) {
                    _exportsLoaderTASTheAaronSheet2.default.error("PFInventory.updateAssociatedAttack inner1", innererror);
                } finally {
                    if (_underscore2.default.size(setter) > 0) {
                        //TAS.debug"updating attack", setter);
                        setAttrs(setter);
                    }
                }
            });
        });
    });
}
/** Determines the equipment type from looking at the name. 
 * DOES NOT WORK for armor or weapons, this is for after you have already determined it is not an armor or weapon type.
 *@param {string} name the name field 
 */
function getEquipmentTypeFromName(name) {
    var tempstr,
        currType = equipMap.noEquipType,
        matches;
    if (!name) {
        return currType;
    }
    tempstr = name.toLowerCase();
    matches = tempstr.match(/(?:\bwand\b|\bring\b|\brod\b|plate|sword|shield|mail|spear|potion|spellbook|smokestick|incense|scroll|alchemist|antitoxin|antidote|elixir|staff|acid|\boil\b|water|component pouch|arrow|bolt|bullet|sunrod|flask|ration|armor spike|kit|saddle|tool|spike|pole|ladder|lantern|candle|torch|rope|chain|crowbar|\bnet\b|\bram\b|tanglefoot|tinder|flint|vial)/i);
    if (matches) {
        switch (matches[0]) {
            case 'sword':
            case 'spear':
            case 'armor spike':
            case 'net':
                currType = equipMap.Weapon;
                break;
            case 'mail':
            case 'plate':
            case 'shield':
                currType = equipMap.Armor;
                break;
            case 'vial':
            case 'flint':
            case 'kit':
            case 'tool':
            case 'spike':
            case 'crowbar':
            case 'ram':
            case 'lantern':
            case 'candle':
            case 'torch':
            case 'rope':
            case 'chain':
            case 'saddle':
            case 'spyglass':
            case 'spellbook':
            case 'tinder':
            case 'component pouch':
                currType = equipMap.Gear;
                break;
            case 'ring':
                currType = equipMap.OtherMagic;
                break;
            case 'rod':
            case 'wand':
            case 'staff':
                currType = equipMap.Charged;
                break;
            case 'tanglefoot':
            case 'incense':
            case 'smokestick':
            case 'sunrod':
            case 'ration':
            case 'water':
            case 'alchemist':
            case 'oil':
            case 'flask':
            case 'acid':
            case 'potion':
            case 'elixir':
            case 'scroll':
            case 'antitoxin':
            case 'antidote':
                currType = equipMap.Consumables;
                break;
            case 'arrow':
            case 'bolt':
            case 'bullet':
            case 'stone':
                currType = equipMap.Ammo;
                break;
        }
    }
    return currType;
}
function importFromCompendium(eventInfo) {
    var id = SWUtils.getRowId(eventInfo.sourceAttribute),
        prefix = 'repeating_item_' + id + '_',
        itemprefix = prefix + 'item-',
        fields = ['default_char_size', 'equipment_tab', itemprefix + 'category_compendium', itemprefix + 'value_compendium', itemprefix + 'range_compendium', itemprefix + 'critical_compendium', itemprefix + 'smalldamage_compendium', itemprefix + 'meddamage_compendium', itemprefix + 'specialtype_compendium', itemprefix + 'speed20_compendium', itemprefix + 'speed30_compendium', itemprefix + 'weight_compendium', itemprefix + 'spell-fail_compendium', itemprefix + 'acbonus_compendium', itemprefix + 'acp_compendium', itemprefix + 'dmg-type', prefix + 'description', itemprefix + 'max-dex', prefix + 'name'];
    //TAS.debug('at importFromCompendium getting fields', fields);
    getAttrs(fields, function (v) {
        var setter = {},
            size = 0,
            tempInt = 0,
            temp,
            name,
            matches,
            attr = '',
            tempstr = '',
            isWeapon = 0,
            isArmor = 0,
            isOther = 0,
            currTab = 99,
            currType = equipMap.noEquipType,
            speed30 = 0,
            speed20 = 0;
        try {
            //TAS.debug("importFromCompendium values are",v);
            if (v[itemprefix + 'category_compendium'] !== 'Items') {
                _exportsLoaderTASTheAaronSheet2.default.warn("compendium item is " + v['repeating_item_item-category_compendium'] + ', INVALID');
                return;
            }
            setter[prefix + 'row_id'] = id;
            name = v[prefix + 'name'];
            PFUtils.getCompendiumIntSet(itemprefix, 'range', v, setter);
            PFUtils.getCompendiumFunctionSet(itemprefix, 'value', PFUtils.getCostInGP, v, setter);
            PFUtils.getCompendiumIntSet(itemprefix, 'spell-fail', v, setter);
            PFUtils.getCompendiumIntSet(itemprefix, 'acbonus', v, setter);
            PFUtils.getCompendiumIntSet(itemprefix, 'acp', v, setter);
            if (v[itemprefix + 'acbonus_compendium']) {
                isArmor = 1;
            }

            speed30 = parseInt(v[itemprefix + 'speed20_compendium'], 10) || 0;
            speed20 = parseInt(v[itemprefix + 'speed30_compendium'], 10) || 0;

            if (v[itemprefix + 'max-dex']) {
                temp = v[itemprefix + 'max-dex'];
                temp = temp.replace(/\u2013|\u2014|-|\\u2013|\\u2014/, '-');
                if (temp !== v[itemprefix + 'max-dex']) {
                    setter[itemprefix + 'max-dex'] = temp;
                }
            }
            if (v[itemprefix + 'specialtype_compendium']) {
                temp = v[itemprefix + 'specialtype_compendium'];
                temp = temp.replace(/\u2013|\u2014|-|\\u2013|\\u2014/, '');
                if (temp) {
                    if (v[itemprefix + 'item-dmg-type']) {
                        temp = v[itemprefix + 'item-dmg-type'] + ' ' + v[itemprefix + 'specialtype_compendium'];
                    } else {
                        temp = v[itemprefix + 'specialtype_compendium'];
                    }
                    setter[itemprefix + 'item-dmg-type'] = temp;
                }
            }
            if (v[itemprefix + 'critical_compendium']) {
                isWeapon = 1;
                temp = PFUtils.getCritFromString(v[itemprefix + 'critical_compendium']);
                if (temp) {
                    if (temp.crit !== 20) {
                        setter[itemprefix + 'crit-target'] = temp.crit;
                    }
                    if (temp.critmult !== 2) {
                        setter[itemprefix + 'crit-multiplier'] = temp.critmult;
                    }
                }
            }
            size = parseInt(v['default_char_size'], 10) || 0;
            tempstr = 'meddamage_compendium';
            tempInt = 0;
            if (size >= 1) {
                tempInt = 1;
                tempstr = 'smalldamage_compendium';
            }
            if (size !== 0) {
                //set  default size of item to small or medium, not other, let user do that for now
                setter[prefix + 'default_size'] = tempInt;
            }
            PFUtils.getCompendiumIntSet(itemprefix, 'weight', v, setter);
            //small size, weight is 1/2
            if (size >= 1) {
                tempInt = parseInt(setter[itemprefix + 'weight'], 10) || 0;
                if (tempInt) {
                    tempInt = tempInt / 2 * 100 / 100;
                    setter[itemprefix + 'weight'] = tempInt;
                }
            }
            if (v[itemprefix + tempstr]) {
                isWeapon = 1;
                temp = PFUtils.getDiceDieFromString(v[itemprefix + tempstr]);
                if (temp) {
                    if (temp.dice && temp.die) {
                        setter[itemprefix + 'damage-dice-num'] = temp.dice;
                        setter[itemprefix + 'damage-die'] = temp.die;
                    }
                    if (temp.plus) {
                        setter[itemprefix + 'damage'] = temp.plus;
                    }
                }
            }

            if (isWeapon) {
                currType = equipMap.Weapon;
                if (v[itemprefix + 'range_compendium'] && parseInt(v[itemprefix + 'range_compendium'], 10) > 0) {
                    setter[itemprefix + 'attack-type'] = '@{attk-ranged}';
                } else {
                    setter[itemprefix + 'attack-type'] = '@{attk-melee}';
                }
            } else if (isArmor) {
                currType = equipMap.Armor;
                //set encumbrance 
                //mUST LOOK AT name string and determine armor, then set heavy, medium, or light.
                //for shields it is easy
                //we can probably look at the change in speed to determine this.
                if (name) {
                    if (/tower/i.test(name)) {
                        tempstr = "Tower Shield";
                    } else if (speed30 === 30 && speed20 === 20) {
                        tempstr = "Light";
                    } else if (/heavy|stone|full|half.plate|splint|banded|iron|tatami|kusari/i.test(tempstr)) {
                        tempstr = "Heavy";
                    } else if (/medium|mountain|chainmail|breastplate|scale|kikko|steel|horn|mirror|hide|maru|armored coat/i.test(tempstr)) {
                        tempstr = "Medium";
                    } else {
                        tempstr = "Light";
                    }
                    setter[itemprefix + "defense-type"] = tempstr;
                }
            } else {
                currType = getEquipmentTypeFromName(name);
            }
            if (currType < 0) {
                currType = equipMap.Other;
            } else if (currType === equipMap.Weapon) {
                setter[prefix + 'weapon-attributes-show'] = 1;
            } else if (currType === equipMap.Armor) {
                setter[prefix + 'armor-attributes-show'] = 1;
            }
            //it just ignores it! why!? so don't change tab cause it won't be on the new tab.
            if (currType) {
                setter['equipment_tab'] = currType;
                setter[prefix + 'equip-type'] = currType;
                setter[prefix + 'equiptype-tab'] = currType;
            }
            setter[prefix + 'qty'] = 1;
            setter[prefix + 'qty_max'] = 1;
            //default to carried or not carried?
            setter[prefix + 'location'] = locationMap.Carried;
            setter[prefix + 'old_location'] = locationMap.Carried;
            setter[prefix + 'loctype-tab'] = locationMap.Carried;

            setter[itemprefix + 'category_compendium'] = "";
            setter[itemprefix + 'value_compendium'] = "";
            setter[itemprefix + 'range_compendium'] = "";
            setter[itemprefix + 'critical_compendium'] = "";
            setter[itemprefix + 'smalldamage_compendium'] = "";
            setter[itemprefix + 'meddamage_compendium'] = "";
            setter[itemprefix + 'specialtype_compendium'] = "";
            setter[itemprefix + 'speed20_compendium'] = "";
            setter[itemprefix + 'speed30_compendium'] = "";
            setter[itemprefix + 'weight_compendium'] = "";
            setter[itemprefix + 'spell-fail_compendium'] = "";
            setter[itemprefix + 'acbonus_compendium'] = "";
            setter[itemprefix + 'acp_compendium'] = "";
        } catch (err) {
            _exportsLoaderTASTheAaronSheet2.default.error("importFromCompendium", err);
        } finally {
            //TAS.debug"importFromCompendium setting",setter);
            if (_underscore2.default.size(setter) > 0) {
                setAttrs(setter, _PFConst2.default.silentParams, updateRepeatingItems);
            }
        }
    });
}
function updateUses(callback) {
    var done = _underscore2.default.once(function () {
        _exportsLoaderTASTheAaronSheet2.default.debug("leaving PFInventory.updateUses");
        if (typeof callback === "function") {
            callback();
        }
    });
    //TAS.debug("at PFInventory.updateUses");
    getSectionIDs('repeating_item', function (ids) {
        var fields = [];
        if (!ids || !_underscore2.default.size(ids)) {
            done();
            return;
        }
        fields = _underscore2.default.reduce(ids, function (m, id) {
            m.push('repeating_item_' + id + '_has_uses');
            m.push('repeating_item_' + id + '_qty_max');
            return m;
        }, []);
        //_.flatten(fields);
        getAttrs(fields, function (v) {
            var setter = {};
            try {
                setter = _underscore2.default.reduce(ids, function (m, id) {
                    var prefix = 'repeating_item_' + id + '_',
                        maxQty = 0;
                    try {
                        maxQty = parseInt(v[prefix + 'qty_max'], 10) || 0;
                        if (maxQty > 1) {
                            m[prefix + 'has_uses'] = 'true';
                        } else {
                            m[prefix + 'has_uses'] = '';
                        }
                    } catch (errin) {
                        _exportsLoaderTASTheAaronSheet2.default.error("PFInventory.updateUses error repeating_item  id " + id, errin);
                    } finally {
                        return m;
                    }
                }, {});
            } catch (err) {
                _exportsLoaderTASTheAaronSheet2.default.error("PFInventory.updateUses error setting defaults ", err);
            } finally {
                if (_underscore2.default.size(setter) > 0) {
                    setAttrs(setter, _PFConst2.default.silentParams, done);
                } else {
                    done();
                }
            }
        });
    });
}
/**
 * @param {function} callback 
 */
function deleteOrphanWornRows(callback) {
    var done = _underscore2.default.once(function () {
        _exportsLoaderTASTheAaronSheet2.default.debug("leaving PFInventory.deleteOrphanWornRows");
        if (typeof callback === "function") {
            callback();
        }
    });
    getSectionIDs('repeating_item', function (ids) {
        if (!(ids && _underscore2.default.size(ids) > 0)) {
            done();
            return;
        }
        getAttrs(wornEquipmentRowRollsNew, function (v) {
            var notFoundList = [],
                lowerIDs = [],
                setter = {};
            try {
                lowerIDs = _underscore2.default.map(ids, function (id) {
                    return id.toLowerCase();
                });
                notFoundList = _underscore2.default.chain(v).omit(function (val, key) {
                    if (!val) {
                        return true;
                    }return false;
                }).mapObject(function (val) {
                    return SWUtils.getRowId(val).toLowerCase();
                }).omit(function (val, key) {
                    return _underscore2.default.contains(lowerIDs, val);
                }).value();
                if (_underscore2.default.size(notFoundList) > 0) {
                    setter = _underscore2.default.reduce(notFoundList, function (m, v, key) {
                        var nameAttr = key.slice(-5);
                        m[nameAttr] = '';
                        m[key] = '';
                        return m;
                    }, {});
                    setAttrs(setter, _PFConst2.default.params, done);
                } else {
                    done();
                }
            } catch (err) {
                _exportsLoaderTASTheAaronSheet2.default.error("PFInventory.deleteOrphanWornRows", err);
                done();
            }
        });
    });
}
function deleteWornRow(source) {
    source = source.toLowerCase();
    getAttrs(wornEquipmentRowRollsNew, function (v) {
        var match = '',
            row = '',
            setter = {};
        try {
            match = _underscore2.default.findKey(v, function (val) {
                if (!val) {
                    return false;
                }
                if (val.toLowerCase().indexOf(source) >= 0) {
                    return true;
                }
                return false;
            });
            if (match) {
                row = match.slice(0, -5);
                setter[match] = '';
                setter[row] = '';
                setAttrs(setter, _PFConst2.default.silent);
            }
        } catch (err) {
            _exportsLoaderTASTheAaronSheet2.default.error("PFInventory.event delete item for attribute: " + source, err);
        }
    });
}
function setNewDefaults(callback, oldversion) {
    var done = _underscore2.default.once(function () {
        _exportsLoaderTASTheAaronSheet2.default.debug("leaving PFInventory.setNewDefaults");
        if (typeof callback === "function") {
            callback();
        }
    });
    _exportsLoaderTASTheAaronSheet2.default.debug("at PFInventory.setNewDefaults");
    getAttrs(['migrated_itemlist_defaults'], function (vout) {
        try {
            //TAS.debug("PFInventory.setNewDefaults ",v);
            if (parseInt(vout.migrated_itemlist_defaults, 10) === 1) {
                done();
                return;
            }
            getSectionIDs('repeating_item', function (ids) {
                var fields = [];
                try {
                    if (!ids || !_underscore2.default.size(ids)) {
                        done();
                        return;
                    }
                    fields = _underscore2.default.map(ids, function (id) {
                        return ['repeating_item_' + id + '_name', 'repeating_item_' + id + '_location', 'repeating_item_' + id + '_qty_max', 'repeating_item_' + id + '_equip-type'];
                    });
                    fields = _underscore2.default.flatten(fields);
                } catch (miderror) {
                    _exportsLoaderTASTheAaronSheet2.default.error("PFInventory.setNewDefaults miderror", miderror);
                    done();
                    return;
                }
                //TAS.debug("PFInventory.setNewDefaults fields:",fields);
                getAttrs(fields, function (v) {
                    var setter = {},
                        currEquip = 0;
                    try {
                        //TAS.debug("PFInventory.setNewDefaults fields ",v);
                        setter = _underscore2.default.reduce(ids, function (m, id) {
                            var prefix = 'repeating_item_' + id + '_',
                                maxQty = 0,
                                nameField = prefix + 'name',
                                currLoc = 0,
                                guess = 0;
                            try {
                                currLoc = parseInt(v[prefix + 'location'], 10);
                                if (isNaN(currLoc)) {
                                    //default is carried
                                    currLoc = locationMap.Carried;
                                    m[prefix + 'location'] = currLoc;
                                }
                                m[prefix + 'oldlocation'] = currLoc;
                                if (currLoc > locationMap.NotCarried) {
                                    m[prefix + 'loctype-tab'] = locationMap.Carried;
                                } else {
                                    m[prefix + 'loctype-tab'] = currLoc;
                                }
                                maxQty = parseInt(v[prefix + 'qty_max'], 10);
                                if (isNaN(maxQty)) {
                                    maxQty = 0;
                                    m[prefix + '_qty_max'] = maxQty;
                                }
                                if (maxQty > 1) {
                                    m[prefix + 'has_uses'] = 'true';
                                } else {
                                    m[prefix + 'has_uses'] = '';
                                }
                                currEquip = parseInt(v['repeating_item_' + id + '_equip-type'], 10);
                                if (!currEquip) {
                                    if (v[nameField]) {
                                        guess = getEquipmentTypeFromName(v[nameField]);
                                    }
                                    if (guess) {
                                        m[prefix + 'equip-type'] = guess;
                                        m[prefix + 'equiptype-tab'] = guess;
                                    } else {
                                        m[prefix + 'equip-type'] = equipMap.noEquipType;
                                        m[prefix + 'equiptype-tab'] = equipMap.noEquipType;
                                    }
                                } else {
                                    m[prefix + 'equiptype-tab'] = currEquip;
                                }
                                m[prefix + 'showinmenu'] = 0;
                            } catch (errin) {
                                _exportsLoaderTASTheAaronSheet2.default.error("PFInventory.setNewDefaults error repeating_item  id " + id, errin);
                            } finally {
                                return m;
                            }
                        }, {});
                        setter['migrated_itemlist_defaults'] = 1;
                    } catch (err) {
                        _exportsLoaderTASTheAaronSheet2.default.error("PFInventory.setNewDefaults error setting defaults ", err);
                    } finally {
                        if (_underscore2.default.size(setter) > 0) {
                            _exportsLoaderTASTheAaronSheet2.default.debug("PFInventory.setNewDefaults setting", setter);
                            setAttrs(setter, _PFConst2.default.silentParams, done);
                        } else {
                            done();
                        }
                    }
                });
            });
        } catch (outererr) {
            _exportsLoaderTASTheAaronSheet2.default.error("PFInventory.setNewDefaults outererr", outererr);
            done();
        }
    });
}
function migrate(callback, oldversion) {
    var done = _underscore2.default.once(function () {
        _exportsLoaderTASTheAaronSheet2.default.debug("leaving PFInventory.migrate");
        if (typeof callback === "function") {
            callback();
        }
    });
    _exportsLoaderTASTheAaronSheet2.default.debug("At PFInventory.migrate");
    PFMigrate.migrateRepeatingItemAttributes(_exportsLoaderTASTheAaronSheet2.default.callback(function callPFInventorySetNewDefaults() {
        setNewDefaults(_exportsLoaderTASTheAaronSheet2.default.callback(function callPFInventoryMigrateWornEquipment() {
            migrateWornEquipment(done);
            migrateRepeatingMacros();
        }));
    }));
}
function recalculate(callback, silently, oldversion) {
    var done = _underscore2.default.once(function () {
        _exportsLoaderTASTheAaronSheet2.default.debug("leaving PFInventory.recalculate");
        if (typeof callback === "function") {
            callback();
        }
    }),
        setTotals = _underscore2.default.after(2, function () {
        _exportsLoaderTASTheAaronSheet2.default.debug("PFInventory.recalculate at setTotals");
        updateLocations(_exportsLoaderTASTheAaronSheet2.default.callback(updateUses));
        resetCommandMacro();
        deleteOrphanWornRows();
        updateCarriedTotal(done);
    });
    try {
        _exportsLoaderTASTheAaronSheet2.default.debug("at PFInventory.recalculate");
        migrate(function () {
            updateCarriedCurrency(setTotals, silently);
            updateRepeatingItems(setTotals, silently);
        });
    } catch (err) {
        _exportsLoaderTASTheAaronSheet2.default.error("PFInventory.recalculate", err);
        done();
    }
}
function registerEventHandlers() {
    var tempstr = "";
    on('change:repeating_item:item-category_compendium', _exportsLoaderTASTheAaronSheet2.default.callback(function EventItemCompendium(eventInfo) {
        _exportsLoaderTASTheAaronSheet2.default.debug("caught " + eventInfo.sourceAttribute + " event: " + eventInfo.sourceType);
        if (eventInfo.sourceType === "player" || eventInfo.sourceType === "api") {
            importFromCompendium(eventInfo);
        }
    }));
    on('change:repeating_item:location', _exportsLoaderTASTheAaronSheet2.default.callback(function eventUpdateItemLocation(eventInfo) {
        _exportsLoaderTASTheAaronSheet2.default.debug("caught " + eventInfo.sourceAttribute + " event: " + eventInfo.sourceType);
        if (eventInfo.sourceType === "player" || eventInfo.sourceType === "api") {
            updateEquipmentLocation(null, null, null, eventInfo);
        }
    }));
    on('change:repeating_item:qty_max', _exportsLoaderTASTheAaronSheet2.default.callback(function eventUpdateItemMaxQty(eventInfo) {
        if (eventInfo.sourceType === "player" || eventInfo.sourceType === "api") {
            _exportsLoaderTASTheAaronSheet2.default.debug("caught " + eventInfo.sourceAttribute + " event: " + eventInfo.sourceType);
            getAttrs(['repeating_item_qty_max'], function (v) {
                if (parseInt(v['repeating_item_qty_max'], 10) > 1) {
                    setAttrs({ 'repeating_item_has_uses': 'true' }, _PFConst2.default.silentParams);
                } else {
                    setAttrs({ 'repeating_item_has_uses': '' }, _PFConst2.default.silentParams);
                }
            });
        }
    }));
    on('change:repeating_item:item-weight change:repeating_item:qty change:repeating_item:qty_max change:repeating_item:location', _exportsLoaderTASTheAaronSheet2.default.callback(function eventUpdateItemTotalWeight(eventInfo) {
        if (eventInfo.sourceType === "player" || eventInfo.sourceType === "api") {
            _exportsLoaderTASTheAaronSheet2.default.debug("caught " + eventInfo.sourceAttribute + " event: " + eventInfo.sourceType);
            getAttrs(['repeating_item_location', 'repeating_item_old_location', 'repeating_item_item-weight', 'repeating_item_qty'], function (v) {
                var newloc = parseInt(v.repeating_item_location, 10) || 0,
                    oldloc = parseInt(v.repeating_item_old_location, 10) || 0;
                _exportsLoaderTASTheAaronSheet2.default.repeating('item').attrs('item_total_weight').fields('item-weight', 'qty', 'qty_max', 'location').reduce(function (m, r) {
                    //TAS.debug"in weight add row, variables: weight: "+r.F['item-weight']+", qty:"+r.I.qty+", max:"+r.I.qty_max +", loc:"+ r.I.location);
                    if (r.I.qty > 0 && r.I.location !== locationMap.NotCarried) {
                        //TAS.debug("adding "+r.F['item-weight']);
                        if (r.I.qty_max === 0 || r.I.qty_max === 1) {
                            m['item-weight'] += r.F['item-weight'] * r.I.qty;
                        } else {
                            m['item-weight'] += r.F['item-weight'];
                        }
                    }
                    return m;
                }, {
                    'item-weight': 0
                }, function (m, r, a) {
                    a.S['item_total_weight'] = m['item-weight'];
                }).execute();
            });
        }
    }));
    on('change:repeating_item:item-hp change:repeating_item:item-hp_max', _exportsLoaderTASTheAaronSheet2.default.callback(function eventUpdateItemTotalHp(eventInfo) {
        _exportsLoaderTASTheAaronSheet2.default.debug("caught " + eventInfo.sourceAttribute + " event: " + eventInfo.sourceType);
        _exportsLoaderTASTheAaronSheet2.default.repeating('item').attrs('item-total-hp', 'item-total-hp_max').fields('item-hp', 'item-hp_max').reduce(function (m, r) {
            m['item-hp'] += r.I['item-hp'];
            m['item-hp_max'] += r.I['item-hp_max'];
            return m;
        }, {
            'item-hp': 0,
            'item-hp_max': 0
        }, function (m, r, a) {
            a.S['item-total-hp'] = m['item-hp'];
            a.S['item-total-hp_max'] = m['item-hp_max'];
        }).execute();
    }));
    on('change:repeating_item:value', _exportsLoaderTASTheAaronSheet2.default.callback(function eventUpdateItemTotalValue(eventInfo) {
        _exportsLoaderTASTheAaronSheet2.default.debug("caught " + eventInfo.sourceAttribute + " event: " + eventInfo.sourceType);
        _exportsLoaderTASTheAaronSheet2.default.repeating('item').attrs('item-total-value').fields('value', 'qty').reduce(function (m, r) {
            m.value += r.I.value * r.I.qty;
            return m;
        }, {
            value: 0
        }, function (m, r, a) {
            a.S['item-total-value'] = m.value;
        }).execute();
    }));
    on('remove:repeating_item', _exportsLoaderTASTheAaronSheet2.default.callback(function eventRemoveItem(eventInfo) {
        var source = '',
            setter = {},
            itemId = '';
        if (eventInfo.sourceType === "player" || eventInfo.sourceType === "api") {
            updateRepeatingItems();
            deleteWornRow(eventInfo.sourceAttribute);
        }
        // Find matching source-item in repeating_weapon then clear the source-item and source-item-name attributes for each
        itemId = eventInfo.sourceAttribute.replace("repeating_item_", "");
        getSectionIDs("repeating_weapon", function (idarray) {
            // get the repeating set
            _underscore2.default.each(idarray, function (currentID) {
                // loop through the set
                getAttrs(["repeating_weapon_" + currentID + "_source-item"], function (v) {
                    if (itemId === v["repeating_weapon_" + currentID + "_source-item"]) {
                        setter["repeating_weapon_" + currentID + "_source-item"] = "";
                        setter["repeating_weapon_" + currentID + "_source-item-name"] = "";
                        //TAS.debug"clearing source-item for attack entry " + currentID, setter);
                        setAttrs(setter, _PFConst2.default.silentParams);
                    }
                });
            });
        });
    }));
    on('change:CP change:SP change:GP change:PP', _exportsLoaderTASTheAaronSheet2.default.callback(function eventUpdateCarriedCurrency(eventInfo) {
        _exportsLoaderTASTheAaronSheet2.default.debug("caught " + eventInfo.sourceAttribute + " event: " + eventInfo.sourceType);
        updateCarriedCurrency();
    }));
    on('change:carried-currency change:item_total_weight change:carried-misc', _exportsLoaderTASTheAaronSheet2.default.callback(function eventUpdateCarriedTotal(eventInfo) {
        _exportsLoaderTASTheAaronSheet2.default.debug("caught " + eventInfo.sourceAttribute + " event: " + eventInfo.sourceType);
        updateCarriedTotal();
    }));
    //change item worn in shield or armor location
    on('change:repeating_item:location change:repeating_item:item-defense-type change:repeating_item:item-acbonus change:repeating_item:item-max-dex change:repeating_item:item-acp change:repeating_item:item-spell-fail change:repeating_item:item-proficiency change:repeating_item:acenhance', _exportsLoaderTASTheAaronSheet2.default.callback(function eventUpdateWornArmorAndShield(eventInfo) {
        var location = 0;
        _exportsLoaderTASTheAaronSheet2.default.debug("caught " + eventInfo.sourceAttribute + " event" + eventInfo.sourceType);
        getAttrs(["repeating_item_location"], function (v) {
            var location = parseInt(v["repeating_item_location"], 10) || 0;
            if (location === locationMap.Armor || location === locationMap.Shield) {
                updateWornArmorAndShield(location, eventInfo.sourceAttribute);
            }
        });
    }));
    _underscore2.default.each(commonLinkedAttributes, function (fieldToWatch) {
        var eventToWatch = "change:repeating_item:item-" + fieldToWatch;
        on(eventToWatch, _exportsLoaderTASTheAaronSheet2.default.callback(function eventupdateAssociatedAttackLoop(eventInfo) {
            _exportsLoaderTASTheAaronSheet2.default.debug("caught " + eventInfo.sourceAttribute + " event" + eventInfo.sourceType);
            if (eventInfo.sourceType === "player" || eventInfo.sourceType === "api") {
                updateAssociatedAttack(eventInfo.sourceAttribute);
            }
        }));
    });
    on('change:repeating_item:name change:repeating_item:item-dmg-type change:repeating_item:item-proficiency change:repeating_item:default_size change:repeating_item:wpenhance', _exportsLoaderTASTheAaronSheet2.default.callback(function eventupdateAssociatedAttack(eventInfo) {
        _exportsLoaderTASTheAaronSheet2.default.debug("caught " + eventInfo.sourceAttribute + " event" + eventInfo.sourceType);
        if (eventInfo.sourceType === "player" || eventInfo.sourceType === "api") {
            updateAssociatedAttack(eventInfo.sourceAttribute);
        }
    }));
    on("change:repeating_item:create-attack-entry", _exportsLoaderTASTheAaronSheet2.default.callback(function eventcreateAttackEntryFromRow(eventInfo) {
        _exportsLoaderTASTheAaronSheet2.default.debug("caught " + eventInfo.sourceAttribute + " event: " + eventInfo.sourceType);
        if (eventInfo.sourceType === "player" || eventInfo.sourceType === "api") {
            createAttackEntryFromRow(eventInfo.sourceAttribute);
        }
    }));
    on("change:repeating_item:set-as-armor", _exportsLoaderTASTheAaronSheet2.default.callback(function eventcreateArmorEntryFromRow(eventInfo) {
        _exportsLoaderTASTheAaronSheet2.default.debug("caught " + eventInfo.sourceAttribute + " event: " + eventInfo.sourceType);
        if (eventInfo.sourceType === "player" || eventInfo.sourceType === "api") {
            updateWornArmorAndShield(locationMap.Armor, eventInfo.sourceAttribute, null);
        }
    }));
    on("change:repeating_item:set-as-shield", _exportsLoaderTASTheAaronSheet2.default.callback(function eventcreateShieldEntryFromRow(eventInfo) {
        _exportsLoaderTASTheAaronSheet2.default.debug("caught " + eventInfo.sourceAttribute + " event: " + eventInfo.sourceType);
        if (eventInfo.sourceType === "player" || eventInfo.sourceType === "api") {
            updateWornArmorAndShield(locationMap.Shield, eventInfo.sourceAttribute, null);
        }
    }));
    on("change:repeating_item:showinmenu change:repeating_item:equip-type change:repeating_item:name", _exportsLoaderTASTheAaronSheet2.default.callback(function eventShowItemInMenu(eventInfo) {
        _exportsLoaderTASTheAaronSheet2.default.debug("caught " + eventInfo.sourceAttribute + " event: " + eventInfo.sourceType);
        if (eventInfo.sourceType === "player" || eventInfo.sourceType === "api") {
            resetCommandMacro();
        }
    }));
    on("change:repeating_item:equip-type", _exportsLoaderTASTheAaronSheet2.default.callback(function eventItemEquipTypeChange(eventInfo) {
        _exportsLoaderTASTheAaronSheet2.default.debug("caught " + eventInfo.sourceAttribute + " event: " + eventInfo.sourceType);
        if (eventInfo.sourceType === "player" || eventInfo.sourceType === "api") {
            getAttrs(['repeating_item_equip-type', 'repeating_item_equiptype-tab'], function (v) {
                var newtype = parseInt(v['repeating_item_equip-type'], 10) || 0,
                    oldtype = parseInt(v['repeating_item_equiptype-tab'], 10) || 0;
                //TAS.debug("################","At change:repeating_item:equip-type updating equiptype:"+newtype+", currtab:"+oldtype,v);
                if (newtype !== oldtype) {
                    setAttrs({ 'repeating_item_equiptype-tab': newtype }, _PFConst2.default.silentParams);
                }
            });
        }
    }));
}
registerEventHandlers();
_PFLog.PFConsole.log('   PFInventory module loaded      ');
_PFLog.PFLog.modulecount++;

/***/ }),
/* 31 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
	value: true
});
exports.parseNum = parseNum;
exports.bonusSpellSlots = bonusSpellSlots;
exports.buildList = buildList;
exports.getSizeMod = getSizeMod;
exports.arrayify = arrayify;
exports.importInit = importInit;
exports.importAbilityScores = importAbilityScores;
exports.importSaves = importSaves;
exports.getOrMakeRowID = getOrMakeRowID;
exports.getOrMakeItemRowID = getOrMakeItemRowID;
exports.getOrMakeSpellRowID = getOrMakeSpellRowID;
exports.getOrMakeClassRowID = getOrMakeClassRowID;
exports.importFeats = importFeats;
exports.nameIsShield = nameIsShield;
exports.importItems = importItems;
exports.importTraits = importTraits;
exports.importSLAs = importSLAs;
exports.importFeatures = importFeatures;
exports.importClasses = importClasses;
exports.importSpellClasses = importSpellClasses;
exports.importSpells = importSpells;
exports.calcHitDice = calcHitDice;
exports.buildArchetypeArray = buildArchetypeArray;
exports.getClassSource = getClassSource;
exports.importSkills = importSkills;
exports.importPenalties = importPenalties;
exports.importAC = importAC;
exports.importCharacter = importCharacter;
exports.registerEventHandlers = registerEventHandlers;

var _underscore = __webpack_require__(2);

var _underscore2 = _interopRequireDefault(_underscore);

var _exportsLoaderTASTheAaronSheet = __webpack_require__(1);

var _exportsLoaderTASTheAaronSheet2 = _interopRequireDefault(_exportsLoaderTASTheAaronSheet);

var _PFLog = __webpack_require__(0);

var _PFSheet = __webpack_require__(22);

var PFSheet = _interopRequireWildcard(_PFSheet);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function parseNum(num) {
	if (_underscore2.default.isUndefined(num) || num === "") return 0;
	return parseInt(num) || 0;
}

function bonusSpellSlots(abilMod, spellLevel) {
	return Math.max(0, Math.floor((abilMod + 4 - spellLevel) / 4));
}

function buildList(objArray, propName) {
	return _underscore2.default.map(objArray, function (item) {
		return item[propName];
	}).join(", ");
}

function getSizeMod(size) {
	switch (size.toLowerCase()) {
		case "colossal":
			return -8;
			break;
		case "gargantuan":
			return -4;
			break;
		case "huge":
			return -2;
			break;
		case "large":
			return -1;
			break;
		case "small":
			return 1;
			break;
		case "tiny":
			return 2;
			break;
		case "diminutive":
			return 4;
			break;
		case "fine":
			return 8;
			break;
		default:
			return 0;
	}
}

// Make sure "stuff" is an array
function arrayify(stuff) {
	if (_underscore2.default.isUndefined(stuff)) return [];
	if (Array.isArray(stuff)) return stuff;
	return new Array(stuff);
}

function importInit(attrs, initObj) {
	attrs["init-misc"] = parseNum(initObj._total) - parseNum(initObj._attrtext);
	attrs["init-ability"] = "@{" + initObj._attrname.substr(0, 3).toUpperCase() + "-mod}";
	attrs["init_notes"] = initObj.situationalmodifiers._text;
}

function importAbilityScores(attrs, attributes) {
	attributes.forEach(function (abScore) {
		var abName = abScore._name.substr(0, 3).toUpperCase();
		var base = parseNum(abScore.attrvalue._base);
		var modifier = parseNum(abScore.attrvalue._modified) - base; // Modifier is the total difference between what HL is reporting as the character's base ability score and the final modified ability score
		attrs[abName + "-base"] = base;
		// If the modifier is positive, assume it's an enhancement bonus; otherwise, assume it's a penalty
		if (modifier > 0) attrs[abName + "-enhance"] = modifier;else attrs[abName + "-penalty"] = modifier;
	});
}

function importSaves(attrs, saves) {
	// Since the XML doesn't break this down by class, add it all to class 0
	var i = 0;
	var saveNotes = saves.allsaves.situationalmodifiers._text;
	for (i = 0; i < saves.save.length; i++) {
		var save = saves.save[i];
		var abbr = save._abbr;

		attrs["class-0-" + abbr] = parseNum(save._base);
		attrs[abbr + "-resist"] = parseNum(save._fromresist);
		attrs[abbr + "-misc"] = parseNum(save._save) - parseNum(save._base) - parseNum(save._fromresist) - parseNum(save._fromattr);

		if (save.situationalmodifiers._text !== "" && saveNotes.indexOf(save.situationalmodifiers._text) === -1) saveNotes = saveNotes + "\n**" + abbr + ":** " + save.situationalmodifiers._text;
	}
	attrs["Save-notes"] = saveNotes.trim();
}

// Find an existing repeatable item with the same name, or generate new row ID
function getOrMakeRowID(featIDList, name) {
	var attrNames = Object.values(featIDList);
	var rows = Object.keys(featIDList);

	var attrMatch = _underscore2.default.find(attrNames, function (currentAttrName) {
		var attrName = currentAttrName;
		// Eliminate anything in parentheses, dice expressions, and "x#" (we use that to indicate we've taken a feat more than once) before comparing names
		attrName = attrName.replace(/ x[0-9]+$/, "").trim();

		if (attrName === name) {
			var ID = rows[_underscore2.default.indexOf(attrNames, currentAttrName)];
			if (!_underscore2.default.isUndefined(ID)) return true;
		}
		return false;
	});
	if (!_underscore2.default.isUndefined(attrMatch)) return rows[_underscore2.default.indexOf(attrNames, attrMatch)];
	return generateRowID();
}

// Find an existing repeatable item with the same name, or generate new row ID; extra processing for items
function getOrMakeItemRowID(featIDList, name) {
	var attrNames = Object.values(featIDList);
	var rows = Object.keys(featIDList);

	var compareName = name.replace(/\(.*\)/, "").replace(/\+\d+/, "").toLowerCase().replace("masterwork", "").trim();
	var attrMatch = _underscore2.default.find(attrNames, function (currentAttrName) {
		var attrName = currentAttrName;
		// Eliminate anything in parentheses, dice expressions, and "x#" (we use that to indicate we've taken a feat more than once) before comparing names
		attrName = attrName.replace(/\(.*\)/, "").replace(/\+\d+/, "").toLowerCase().replace("masterwork", "").trim();

		if (attrName === compareName) {
			var ID = rows[_underscore2.default.indexOf(attrNames, currentAttrName)];
			if (!_underscore2.default.isUndefined(ID)) return true;
		}
		return false;
	});
	if (!_underscore2.default.isUndefined(attrMatch)) return rows[_underscore2.default.indexOf(attrNames, attrMatch)];
	return generateRowID();
}

// Find an existing repeatable item with the same name and spellclass, or generate new row ID
function getOrMakeSpellRowID(featIDList, name, spellclass) {
	var attrMatch = _underscore2.default.find(featIDList, function (currentFeat) {
		if (currentFeat.name === name && currentFeat.spellclass === spellclass) return true;
		return false;
	});
	if (!_underscore2.default.isUndefined(attrMatch)) return attrMatch.rowID;
	return generateRowID();
}

function getOrMakeClassRowID(featIDList, name) {
	var attrObjs = Object.values(featIDList);
	var rows = Object.keys(featIDList);

	var attrMatch = _underscore2.default.find(attrObjs, function (currentAttrObj) {
		var attrName = currentAttrObj.name;
		// Eliminate anything in parentheses, dice expressions, and "x#" (we use that to indicate we've taken a feat more than once) before comparing names
		name = name.replace(/\(.+\)/g, "").replace(/\d+d\d+(\+\d*)*/g, "").replace(/\+\d+/g, "").trim();
		attrName = attrName.replace(/\(.+\)/g, "").replace(/\d+d\d+(\+\d*)*/g, "").replace(/\+\d+/g, "").trim();

		if (attrName === name) return true;
		return false;
	});
	if (!_underscore2.default.isUndefined(attrMatch)) return attrMatch.rowID;
	return generateRowID();
}

function importFeats(attrs, feats, featIDList, resources) {
	var repeatPrefix = "repeating_ability";
	var skipList = [];
	var featNames = _underscore2.default.map(feats, function (feat) {
		return feat._name;
	});
	_underscore2.default.each(feats, function (feat) {
		// Early exit if we already dealt with another copy of this feat
		if (_underscore2.default.contains(skipList, feat._name)) return;

		// Count the number of times the feat is listed, so we can indicate that in the feat name
		var taken = _underscore2.default.filter(featNames, function (featName) {
			return featName === feat._name;
		}).length;

		var row = getOrMakeRowID(featIDList, feat._name);
		if (!_underscore2.default.isUndefined(featIDList[row])) delete featIDList[row];

		if (taken > 1) attrs[repeatPrefix + "_" + row + "_name"] = feat._name + " x" + taken;else attrs[repeatPrefix + "_" + row + "_name"] = feat._name;
		attrs[repeatPrefix + "_" + row + "_description"] = feat.description;
		attrs[repeatPrefix + "_" + row + "_rule_category"] = "feats";
		skipList.push(feat._name);
		if (_underscore2.default.contains(Object.keys(resources), feat._name)) attrs[repeatPrefix + "_" + row + "_max-calculation"] = resources[feat._name]._max;
	});
}

// Hero Lab stores armor and shields identically, so so assume anything with "shield" or "klar" in the name is a shield
function nameIsShield(name) {
	if (name.toLowerCase().indexOf("shield") !== -1 || name.toLowerCase().indexOf("klar") !== -1) return true;
	return false;
}

function importItems(items, resources, armorPenalties, armor, weapons) {
	var repeatPrefix = "repeating_item";
	getSectionIDs(repeatPrefix, function (idarray) {
		var itemNameAttrs = _underscore2.default.union(_underscore2.default.map(idarray, function (id) {
			return repeatPrefix + "_" + id + "_name";
		}), ["shield3-acp", "shield3-spell-fail"]);
		getAttrs(itemNameAttrs, function (names) {

			// Pull out the shield attributes before we build the ID list
			var shieldACP = parseNum(names["shield3-acp"]);
			var shieldASF = parseNum(names["shield3-spell-fail"]);
			if (!_underscore2.default.isUndefined(names["shield3-acp"])) delete names["shield3-acp"];
			if (!_underscore2.default.isUndefined(names["shield3-spell-fail"])) delete names["shield3-spell-fail"];

			var itemIDList = _underscore2.default.object(_underscore2.default.map(names, function (name, attr) {
				return [attr.substring(repeatPrefix.length + 1, attr.indexOf("_name")), name];
			}));
			var itemsList = [];
			var attrs = {};
			var armorNames = _underscore2.default.map(armor, function (obj) {
				return obj._name;
			});
			var weaponNames = _underscore2.default.map(weapons, function (obj) {
				return obj._name;
			});

			// List of words that indicate an item is masterwork
			var masterworkWords = ["mithral", "adamantine", "angelskin", "darkleaf", "darkwood", "dragonhide", "eel", "fire-forged", "frost-forged", "greenwood", "paueliel"];
			_underscore2.default.each(items, function (item) {
				var row = getOrMakeItemRowID(itemIDList, item._name);
				if (!_underscore2.default.isUndefined(itemIDList[row])) delete itemIDList[row];
				itemsList.push(item._name);

				repeatPrefix = "repeating_item_" + row;
				attrs[repeatPrefix + "_name"] = item._name;
				attrs[repeatPrefix + "_item-weight"] = item.weight._value;
				attrs[repeatPrefix + "_value"] = parseFloat(item.cost._value) / parseInt(item._quantity);
				attrs[repeatPrefix + "_description"] = item.description;

				if (_underscore2.default.contains(Object.keys(resources), item._name) && item._quantity === "1" && resources[item._name]._max !== "1") {
					attrs[repeatPrefix + "_qty"] = resources[item._name]._left;
					attrs[repeatPrefix + "_qty_max"] = resources[item._name]._max;
				} else attrs[repeatPrefix + "_qty"] = item._quantity;

				if (!_underscore2.default.isUndefined(item.itempower)) _underscore2.default.each(arrayify(item.itempower), function (itemPower) {
					itemsList.push(itemPower._name);
				});

				// check if this is a weapon
				var weaponCompareName = item._name;
				// If this is a shield (but not a klar), the attack name will be "Heavy/light shield bash"
				if (item._name.toLowerCase().indexOf("shield") !== -1) {
					var attackName;
					if (item._name.toLowerCase().indexOf("heavy" !== -1)) attackName = "heavy shield bash";else attackName = "light shield bash";
					weaponCompareName = _underscore2.default.find(weaponNames, function (name) {
						if (name.toLowerCase().indexOf(attackName) !== -1) return true;return false;
					}) || item._name;
				}
				if (_underscore2.default.contains(weaponNames, weaponCompareName)) {
					var weaponObj = weapons[_underscore2.default.indexOf(weaponNames, weaponCompareName)];
					attrs[repeatPrefix + "_item-wpenhance"] = parseNum(weaponObj._name.match(/\+\d+/));

					if (!_underscore2.default.isUndefined(weaponObj._typetext)) attrs[repeatPrefix + "_item-dmg-type"] = weaponObj._typetext;

					// Check to see if item name includes any words that indicate this is a masterwork item
					if (weaponCompareName.toLowerCase().indexOf("masterwork") !== -1 || _underscore2.default.intersection(masterworkWords, item._name.toLowerCase().split(" ")).length > 0) attrs[repeatPrefix + "_item-masterwork"] = 1;

					if (!_underscore2.default.isUndefined(weaponObj._damage)) {
						var weaponDice = weaponObj._damage.match(/\d+d\d+/);
						if (weaponDice.length > 0) {
							attrs[repeatPrefix + "_item-damage-dice-num"] = parseNum(weaponDice[0].split("d")[0]);
							attrs[repeatPrefix + "_item-damage-die"] = parseNum(weaponDice[0].split("d")[1]);
						}
					}

					if (!_underscore2.default.isUndefined(weaponObj._crit)) {
						var critArray = weaponObj._crit.split("/");
						if (critArray.length > 1) attrs[repeatPrefix + "_item-crit-target"] = parseNum(critArray[0].match(/\d+/)[0]);else attrs[repeatPrefix + "_item-crit-target"] = 20;
						attrs[repeatPrefix + "_item-crit-multiplier"] = parseNum(critArray[critArray.length - 1].replace(/\D/g, ""));
					}

					if (!_underscore2.default.isUndefined(weaponObj.rangedattack) && !_underscore2.default.isUndefined(weaponObj.rangedattack._rangeincvalue)) attrs[repeatPrefix + "_item-range"] = parseNum(weaponObj.rangedattack._rangeincvalue);
				}

				// check if this is armor
				// If this is a klar, the armor name will be different
				var armorCompareName = item._name;
				if (item._name.toLowerCase().indexOf("klar") !== -1) {
					armorCompareName = _underscore2.default.find(armorNames, function (name) {
						if (name.toLowerCase().indexOf("klar") !== -1) return true;return false;
					}) || item._name;
				}
				if (_underscore2.default.contains(armorNames, armorCompareName)) {
					var armorObj = armor[_underscore2.default.indexOf(armorNames, armorCompareName)];

					// Item is a shield
					if (nameIsShield(item._name)) {
						var enhancement = parseNum(armorCompareName.match(/\+\d+/));
						var ACbonus = parseNum(armorObj._ac) - enhancement;
						attrs[repeatPrefix + "_item-acbonus"] = ACbonus;
						attrs[repeatPrefix + "_item-acenhance"] = enhancement;
						if (!_underscore2.default.isUndefined(armorObj._equipped) && armorObj._equipped === "yes") {
							attrs[repeatPrefix + "_item-acp"] = shieldACP;
							attrs[repeatPrefix + "_item-spell-fail"] = shieldASF;
							attrs["shield3"] = item._name;
							attrs["shield3-acbonus"] = ACbonus;
							attrs["shield3-enhance"] = enhancement;
						}
					} else {
						var enhancement = parseNum(item._name.match(/\+\d+/));
						var ACbonus = parseNum(armorObj._ac) - enhancement;
						attrs[repeatPrefix + "_item-acbonus"] = ACbonus;
						attrs[repeatPrefix + "_item-acenhance"] = enhancement;
						if (!_underscore2.default.isUndefined(armorObj._equipped) && armorObj._equipped === "yes") {
							attrs["armor3-acp"] = attrs[repeatPrefix + "_item-acp"] = armorPenalties.ACP - shieldACP;
							attrs["armor3-spell-fail"] = attrs[repeatPrefix + "_item-spell-fail"] = armorPenalties.spellfail - shieldASF;
							if (armorPenalties.maxDex == 99) attrs["armor3-max-dex"] = attrs[repeatPrefix + "_item-max-dex"] = "";else attrs["armor3-max-dex"] = attrs[repeatPrefix + "_item-max-dex"] = armorPenalties.maxDex;
							attrs["armor3"] = item._name;
							attrs["armor3-acbonus"] = ACbonus;
							attrs["armor3-enhance"] = enhancement;
						}
					}
				}
			});
			setAttrs(attrs);
		});
	});
}

function importTraits(attrs, traits, traitIDList, resources) {
	var repeatPrefix = "repeating_ability";
	traits.forEach(function (trait) {
		var row = getOrMakeRowID(traitIDList, trait._name);
		if (!_underscore2.default.isUndefined(traitIDList[row])) delete traitIDList[row];
		attrs[repeatPrefix + "_" + row + "_name"] = trait._name;
		attrs[repeatPrefix + "_" + row + "_description"] = trait.description;
		attrs[repeatPrefix + "_" + row + "_rule_category"] = "traits";
		if (_underscore2.default.contains(Object.keys(resources), trait._name)) attrs[repeatPrefix + "_" + row + "_max-calculation"] = resources[trait._name]._max;
	});
}

function importSLAs(attrs, SLAs, SLAsIDList, resources) {
	var repeatPrefix = "repeating_ability";
	SLAs.forEach(function (SLA) {
		var row = getOrMakeRowID(SLAsIDList, SLA._name);
		if (!_underscore2.default.isUndefined(SLAsIDList[row])) delete SLAsIDList[row];
		attrs[repeatPrefix + "_" + row + "_name"] = SLA._name;
		attrs[repeatPrefix + "_" + row + "_description"] = SLA.description;
		attrs[repeatPrefix + "_" + row + "_rule_category"] = "spell-like-abilities";
		attrs[repeatPrefix + "_" + row + "_ability_type"] = "Sp";
		if (_underscore2.default.contains(Object.keys(resources), SLA._name)) attrs[repeatPrefix + "_" + row + "_max-calculation"] = resources[SLA._name]._max;
	});
}

function importFeatures(attrs, featureList, specials, archetypes, resources) {
	var specNameList = _underscore2.default.map(specials, function (special) {
		return special._name;
	});
	var skipList = [];
	_underscore2.default.each(specials, function (special) {
		var name = special._name;
		var repeatPrefix = "repeating_ability",
		    row,
		    classSource = -1;
		var cleanName = name.replace(/ x[0-9]+$/, "").replace(/\(([^\)]+)\)/g, "").trim();
		if (_underscore2.default.contains(skipList, cleanName)) return;
		var multiList = _underscore2.default.filter(specNameList, function (spec) {
			return spec.replace(/\(([^\)]+)\)/g, "").trim() === cleanName;
		});
		if (multiList.length > 1) {
			skipList.push(cleanName);
			var parenList = _underscore2.default.map(multiList, function (item) {
				return item.match(/\(([^\)]+)\)/)[0].replace("(", "").replace(")", "");
			});
			name = name.replace(/\(([^\)]+)\)/, "(" + _underscore2.default.uniq(parenList).join(", ") + ")");
		}
		row = getOrMakeClassRowID(featureList, name);
		repeatPrefix = "repeating_ability_" + row;
		if (!_underscore2.default.isUndefined(featureList[row])) delete featureList[row];else // If we created a new row for this, set rule category
			{
				// Import if it has a "specsource", assume it's a class feature
				if (special.specsource) attrs[repeatPrefix + "_rule_category"] = "class-features";else attrs[repeatPrefix + "_rule_category"] = "racial-traits";
			}
		classSource = getClassSource(arrayify(special.specsource), archetypes);
		attrs[repeatPrefix + "_name"] = name;
		attrs[repeatPrefix + "_description"] = special.description;

		if (classSource !== -1) {
			attrs[repeatPrefix + "_CL-basis"] = "@{class-" + classSource + "-level}";
			attrs[repeatPrefix + "_class-name"] = Object.keys(archetypes)[classSource];
		}

		if (_underscore2.default.contains(Object.keys(resources), special._name)) attrs[repeatPrefix + "_max-calculation"] = resources[special._name]._max;

		if (!_underscore2.default.isUndefined(special._type)) attrs[repeatPrefix + "_ability_type"] = special._type.substr(0, 2);
	});
}

function importClasses(attrs, classes) {
	var classList = new Object();

	var i = 0;
	var classObj;
	while (i < classes.length) {
		classObj = classes[i];

		// We can only handle 5 classes
		if (i >= 5) return;
		classList[classObj._name.replace(/\(([^\)]+)\)/g, "").replace("(", "").replace(")", "").trim()] = classObj;
		attrs["class-" + i + "-name"] = classObj._name;
		attrs["class-" + i + "-level"] = classObj._level;

		i++;
	}

	return classList;
}

// Import spellclasses; presence in spellclasses node means it's a spellcaster, but some of the data is in the classes node
function importSpellClasses(attrs, spellclasses, classes, abScores) {
	var spellClassesList = new Object();

	var i,
	    j,
	    abMod = 0,
	    currentAbMod,
	    spellslots,
	    spelllevel,
	    casterlevel,
	    concmod,
	    spellpenmod;
	var spellClassIndex = 0;
	for (i = 0; i < spellclasses.length; i++) {
		var spellClass = spellclasses[i];
		// Only 3 spellclasses on character sheet, so if they somehow have more...
		if (spellClassIndex >= 3) return spellClassesList;

		var spellClassName = spellClass._name.replace(/\(([^\)]+)\)/g, "").replace("(", "").replace(")", "").trim();
		var classIndex = _underscore2.default.indexOf(Object.keys(classes), _underscore2.default.find(Object.keys(classes), function (className) {
			if (className.toLowerCase().indexOf(spellClassName.toLowerCase()) !== -1) return true;
			return false;
		}));

		if (classIndex !== -1) {
			casterlevel = parseNum(classes[spellClassName]._casterlevel);
			attrs["spellclass-" + spellClassIndex] = classIndex;
			attrs["spellclass-" + spellClassIndex + "-level-misc"] = casterlevel - parseNum(classes[spellClassName]._level);
			attrs["spellclass-" + spellClassIndex + "-level"] = parseNum(classes[spellClassName]._level);
			attrs["spellclass-" + spellClassIndex + "-level-total"] = casterlevel;
			attrs["spellclass-" + spellClassIndex + "-name"] = classes[spellClassName]._name;

			if (!_underscore2.default.isUndefined(classes[spellClassName].arcanespellfailure)) attrs["armor3-spell-fail"] = parseNum(classes[spellClassName].arcanespellfailure._value);

			// Make a guess at which ability modifier is used for this class
			if (!_underscore2.default.isUndefined(classes[spellClassName]._basespelldc)) abMod = parseNum(classes[spellClassName]._basespelldc) - 10;
			if (!_underscore2.default.isUndefined(classes[spellClassName]._basespelldc)) {
				// Start at the fourth ability score (Intelligence), so we skip the physical abilities
				for (j = 3; j < abScores.length; j++) {
					if (parseNum(abScores[j].attrbonus._modified) === abMod) {
						var attr = {};
						attr["Concentration-" + spellClassIndex + "-ability"] = "@{" + abScores[j]._name.substr(0, 3).toUpperCase() + "-mod}";
						setAttrs(attr);
						break;
					}
				}
			}

			if (abMod !== 0) {
				// Calculate misc mods to concentration
				if (!_underscore2.default.isUndefined(classes[spellClassName]._concentrationcheck)) {
					concmod = parseNum(classes[spellClassName]._concentrationcheck) - casterlevel - abMod;
					attrs["Concentration-" + spellClassIndex + "-misc"] = concmod;
					attrs["Concentration-" + spellClassIndex] = parseNum(classes[spellClassName]._concentrationcheck);
					attrs["Concentration-" + spellClassIndex + "-mod"] = abMod;
				}

				// Calculate misc mods to spell penetration
				if (!_underscore2.default.isUndefined(classes[spellClassName].overcomespellresistance)) {
					spellpenmod = parseNum(classes[spellClassName].overcomespellresistance) - casterlevel;
					attrs["spellclass-" + spellClassIndex + "-SP_misc"] = spellpenmod;
				}

				// Populate spells / day; Hero Lab includes bonus slots, so remove those
				if (!_underscore2.default.isUndefined(spellclasses[i].spelllevel)) {
					spellclasses[i].spelllevel = arrayify(spellclasses[i].spelllevel);
					for (j = 0; j < spellclasses[i].spelllevel.length; j++) {
						spellslots = parseNum(spellclasses[i].spelllevel[j]._maxcasts);
						spelllevel = parseNum(spellclasses[i].spelllevel[j]._level);
						if (spelllevel > 0) spellslots = spellslots - bonusSpellSlots(abMod, spelllevel);
						if (spellslots < 0) spellslots = "";
						attrs["spellclass-" + spellClassIndex + "-level-" + spelllevel + "-class"] = spellslots;
					}
				}
				// Set bonus spell slot table entries
				attrs["spellclass-" + spellClassIndex + "-level-1-bonus"] = bonusSpellSlots(abMod, 1);
				attrs["spellclass-" + spellClassIndex + "-level-2-bonus"] = bonusSpellSlots(abMod, 2);
				attrs["spellclass-" + spellClassIndex + "-level-3-bonus"] = bonusSpellSlots(abMod, 3);
				attrs["spellclass-" + spellClassIndex + "-level-4-bonus"] = bonusSpellSlots(abMod, 4);
				attrs["spellclass-" + spellClassIndex + "-level-5-bonus"] = bonusSpellSlots(abMod, 5);
				attrs["spellclass-" + spellClassIndex + "-level-6-bonus"] = bonusSpellSlots(abMod, 6);
				attrs["spellclass-" + spellClassIndex + "-level-7-bonus"] = bonusSpellSlots(abMod, 7);
				attrs["spellclass-" + spellClassIndex + "-level-8-bonus"] = bonusSpellSlots(abMod, 8);
				attrs["spellclass-" + spellClassIndex + "-level-9-bonus"] = bonusSpellSlots(abMod, 9);
			}
			spellClassesList[spellClassName] = classes[Object.keys(classes)[classIndex]];
			spellClassIndex++;
		}
	}

	if (spellClassIndex > 1) attrs["spellclasses_multiclassed"] = 1;

	return spellClassesList;
}

function importSpells(spells, spellclasses) {
	console.log("Import spells");
	var repeatPrefix = "repeating_spells";
	getSectionIDs(repeatPrefix, function (idarray) {
		var spellNameAttrs = _underscore2.default.union(_underscore2.default.map(idarray, function (id) {
			return repeatPrefix + "_" + id + "_name";
		}), _underscore2.default.map(idarray, function (id) {
			return repeatPrefix + "_" + id + "_spellclass_number";
		}));
		getAttrs(spellNameAttrs, function (spellAttrs) {
			var spellObjList = {};
			var spellKeys = Object.keys(spellAttrs);
			_underscore2.default.each(spellKeys, function (spellKey) {
				var rowID;
				if (spellKey.indexOf("_name") !== -1) {
					rowID = spellKey.substring(repeatPrefix.length + 1, spellKey.indexOf("_name"));
					if (_underscore2.default.isUndefined(spellObjList[rowID])) spellObjList[rowID] = { rowID: rowID };
					spellObjList[rowID].name = spellAttrs[spellKey];
				}
				if (spellKey.indexOf("_spellclass_number") !== -1) {
					rowID = spellKey.substring(repeatPrefix.length + 1, spellKey.indexOf("_spellclass_number"));
					if (_underscore2.default.isUndefined(spellObjList[rowID])) spellObjList[rowID] = { rowID: rowID };
					spellObjList[rowID].spellclass = spellAttrs[spellKey];
				}
			});

			var spellClassesKeys = Object.keys(spellclasses);
			var attrs = {};
			_underscore2.default.each(spells, function (spell) {
				var rowID, spellClass, spellName, school, level;

				// Search for a repeating spell with the same name and spellclass; if not found, make new row
				level = parseNum(spell._level);
				repeatPrefix = "repeating_spells_";
				spellClass = _underscore2.default.indexOf(spellClassesKeys, spell._class);
				spellName = spell._name.replace(/\(x\d+\)/, "").trim();
				rowID = getOrMakeSpellRowID(spellObjList, spellName, spellClass);
				if (_underscore2.default.isUndefined(rowID)) {
					console.log("Undefined spell row ID!");
					console.log(spell);
				}
				// Update prefix with ID
				repeatPrefix = repeatPrefix + rowID;

				attrs[repeatPrefix + "_name"] = spellName;
				attrs[repeatPrefix + "_spell_level"] = level;
				attrs[repeatPrefix + "_spellclass_number"] = spellClass;
				attrs[repeatPrefix + "_components"] = spell._componenttext.replace("Divine Focus", "DF").replace("Focus", "F").replace("Material", "M").replace("Verbal", "V").replace("Somatic", "S").replace(" or ", "/");
				attrs[repeatPrefix + "_duration"] = spell._duration;
				attrs[repeatPrefix + "_save"] = spell._save.replace(/DC \d+/, "").trim();
				attrs[repeatPrefix + "_savedc"] = parseNum(spell._dc);
				attrs[repeatPrefix + "_cast-time"] = spell._casttime;
				attrs[repeatPrefix + "_sr"] = spell._resist.replace("harmless", "Harmless");
				attrs[repeatPrefix + "_DC_misc"] = parseNum(spell._dc) - parseNum(spellclasses[spell._class !== "" ? spell._class : Object.keys(spellclasses)[0]]._basespelldc) - level;

				switch (spell._range.toLowerCase()) {
					case "close (25 + 5 ft./2 levels)":
						attrs[repeatPrefix + "_range_pick"] = "close";
						break;
					case "medium (100 + 10 ft./level)":
						attrs[repeatPrefix + "_range_pick"] = "medium";
						break;
					case "long (400 + 40 ft./level)":
						attrs[repeatPrefix + "_range_pick"] = "long";
						break;
					case "touch":
					case "personal":
						attrs[repeatPrefix + "_range_pick"] = spell._range.toLowerCase();
						break;
					default:
						attrs[repeatPrefix + "_range_pick"] = "number";
						attrs[repeatPrefix + "_range"] = spell._range;
				}

				if (spell._area !== "") attrs[repeatPrefix + "_targets"] = spell._area;else if (spell._effect !== "") attrs[repeatPrefix + "_targets"] = spell._effect;else attrs[repeatPrefix + "_targets"] = spell._target;

				school = spell._schooltext;
				if (spell._subschooltext !== "") school = school + " (" + spell._subschooltext + ")";
				if (spell._descriptortext !== "") school = school + " [" + spell._descriptortext + "]";
				attrs[repeatPrefix + "_school"] = school;

				attrs[repeatPrefix + "_description"] = spell.description;
			});
			setAttrs(attrs);
		});
	});
}

function calcHitDice(hitdice) {
	var dice = hitdice.match(/\d+d\d/g);
	var numDice = 0;
	var i = 0;
	while (i < dice.length) {
		numDice += parseInt(dice[i].split("d")[0]);
		i++;
	}
	return numDice;
}

// Builds an object collection of archetypes, with the appropriate classes as the keys, in the order they're entered in the character sheet; use this to determine class specials come from
function buildArchetypeArray(classes) {
	var archetypes = new Object();

	_underscore2.default.each(classes, function (classObj, className) {
		if (classObj._name.indexOf("(") === -1) {
			archetypes[className] = [];
			return;
		}
		var archeString = classObj._name.match(/\(([^\)]+)\)/)[0].replace("(", "").replace(")", "");
		var archeList = archeString.split(",");
		archeList = _underscore2.default.map(archeList, function (arche) {
			return arche.trim();
		});
		archetypes[className] = archeList;
	});
	return archetypes;
}

// Returns the array number of the class that grants a feature; returns -1 if we can't find the class
function getClassSource(sources, archetypes) {
	// If there's no listed source, it isn't from a class
	if (!sources.length) return -1;

	// Grab an array of class names from the archetypes object
	var classes = Object.keys(archetypes);

	// Check if source is a class, first
	var intersect = _underscore2.default.intersection(sources, classes);
	if (intersect.length) return classes.indexOf(intersect[0]);

	// If not a class, check for an archetype as a source, and return the associated class
	var className = _underscore2.default.find(classes, function (item) {
		return _underscore2.default.intersection(archetypes[item], sources).length;
	});
	if (className) return classes.indexOf(className);

	return -1;
}

function importSkills(attrs, skills, size, ACP) {
	// Ripped from the PF character sheet JS
	var skillSize;
	switch (Math.abs(size)) {
		case 0:
			skillSize = 0;break;
		case 1:
			skillSize = 2;break;
		case 2:
			skillSize = 4;break;
		case 4:
			skillSize = 6;break;
		case 8:
			skillSize = 8;break;
		case 16:
			skillSize = 10;break;
		default:
			skillSize = 0;
	}
	if (size < 0) {
		skillSize = skillSize * -1;
	}

	// Clear out all existing skills data
	_underscore2.default.extend(attrs, { "acrobatics-ability": "", "acrobatics-cs": "", "acrobatics-ranks": "", "acrobatics-class": "", "acrobatics-ability-mod": "", "acrobatics-racial": "", "acrobatics-feat": "", "acrobatics-item": "", "acrobatics-size": "", "acrobatics-acp": "", "acrobatics-misc": "", "acrobatics-reqtrain": "", "artistry-ability": "", "artistry-cs": "", "artistry-ranks": "", "artistry-class": "", "artistry-ability-mod": "", "artistry-racial": "", "artistry-feat": "", "artistry-item": "", "artistry-size": "", "artistry-acp": "", "artistry-misc": "", "artistry-reqtrain": "", "artistry2-ability": "", "artistry2-cs": "", "artistry2-ranks": "", "artistry2-class": "", "artistry2-ability-mod": "", "artistry2-racial": "", "artistry2-feat": "", "artistry2-item": "", "artistry2-size": "", "artistry2-acp": "", "artistry2-misc": "", "artistry2-reqtrain": "", "artistry3-ability": "", "artistry3-cs": "", "artistry3-ranks": "", "artistry3-class": "", "artistry3-ability-mod": "", "artistry3-racial": "", "artistry3-feat": "", "artistry3-item": "", "artistry3-size": "", "artistry3-acp": "", "artistry3-misc": "", "artistry3-reqtrain": "", "appraise-ability": "", "appraise-cs": "", "appraise-ranks": "", "appraise-class": "", "appraise-ability-mod": "", "appraise-racial": "", "appraise-feat": "", "appraise-item": "", "appraise-size": "", "appraise-acp": "", "appraise-misc": "", "appraise-reqtrain": "", "bluff-ability": "", "bluff-cs": "", "bluff-ranks": "", "bluff-class": "", "bluff-ability-mod": "", "bluff-racial": "", "bluff-feat": "", "bluff-item": "", "bluff-size": "", "bluff-acp": "", "bluff-misc": "", "bluff-reqtrain": "", "climb-ability": "", "climb-cs": "", "climb-ranks": "", "climb-class": "", "climb-ability-mod": "", "climb-racial": "", "climb-feat": "", "climb-item": "", "climb-size": "", "climb-acp": "", "climb-misc": "", "climb-reqtrain": "", "craft-ability": "", "craft-cs": "", "craft-ranks": "", "craft-class": "", "craft-ability-mod": "", "craft-racial": "", "craft-feat": "", "craft-item": "", "craft-size": "", "craft-acp": "", "craft-misc": "", "craft-reqtrain": "", "craft2-ability": "", "craft2-cs": "", "craft2-ranks": "", "craft2-class": "", "craft2-ability-mod": "", "craft2-racial": "", "craft2-feat": "", "craft2-item": "", "craft2-size": "", "craft2-acp": "", "craft2-misc": "", "craft2-reqtrain": "", "craft3-ability": "", "craft3-cs": "", "craft3-ranks": "", "craft3-class": "", "craft3-ability-mod": "", "craft3-racial": "", "craft3-feat": "", "craft3-item": "", "craft3-size": "", "craft3-acp": "", "craft3-misc": "", "craft3-reqtrain": "", "diplomacy-ability": "", "diplomacy-cs": "", "diplomacy-ranks": "", "diplomacy-class": "", "diplomacy-ability-mod": "", "diplomacy-racial": "", "diplomacy-feat": "", "diplomacy-item": "", "diplomacy-size": "", "diplomacy-acp": "", "diplomacy-misc": "", "diplomacy-reqtrain": "", "disable-device-ability": "", "disable-device-cs": "", "disable-device-ranks": "", "disable-device-class": "", "disable-device-ability-mod": "", "disable-device-racial": "", "disable-device-feat": "", "disable-device-item": "", "disable-device-size": "", "disable-device-acp": "", "disable-device-misc": "", "disable-device-reqtrain": "", "disguise-ability": "", "disguise-cs": "", "disguise-ranks": "", "disguise-class": "", "disguise-ability-mod": "", "disguise-racial": "", "disguise-feat": "", "disguise-item": "", "disguise-size": "", "disguise-acp": "", "disguise-misc": "", "disguise-reqtrain": "", "escape-artist-ability": "", "escape-artist-cs": "", "escape-artist-ranks": "", "escape-artist-class": "", "escape-artist-ability-mod": "", "escape-artist-racial": "", "escape-artist-feat": "", "escape-artist-item": "", "escape-artist-size": "", "escape-artist-acp": "", "escape-artist-misc": "", "escape-artist-reqtrain": "", "fly-ability": "", "fly-cs": "", "fly-ranks": "", "fly-class": "", "fly-ability-mod": "", "fly-racial": "", "fly-feat": "", "fly-item": "", "fly-size": "", "fly-acp": "", "fly-misc": "", "fly-reqtrain": "", "handle-animal-ability": "", "handle-animal-cs": "", "handle-animal-ranks": "", "handle-animal-class": "", "handle-animal-ability-mod": "", "handle-animal-racial": "", "handle-animal-feat": "", "handle-animal-item": "", "handle-animal-size": "", "handle-animal-acp": "", "handle-animal-misc": "", "handle-animal-reqtrain": "", "heal-ability": "", "heal-cs": "", "heal-ranks": "", "heal-class": "", "heal-ability-mod": "", "heal-racial": "", "heal-feat": "", "heal-item": "", "heal-size": "", "heal-acp": "", "heal-misc": "", "heal-reqtrain": "", "intimidate-ability": "", "intimidate-cs": "", "intimidate-ranks": "", "intimidate-class": "", "intimidate-ability-mod": "", "intimidate-racial": "", "intimidate-feat": "", "intimidate-item": "", "intimidate-size": "", "intimidate-acp": "", "intimidate-misc": "", "intimidate-reqtrain": "", "linguistics-ability": "", "linguistics-cs": "", "linguistics-ranks": "", "linguistics-class": "", "linguistics-ability-mod": "", "linguistics-racial": "", "linguistics-feat": "", "linguistics-item": "", "linguistics-size": "", "linguistics-acp": "", "linguistics-misc": "", "linguistics-reqtrain": "", "lore-ability": "", "lore-cs": "", "lore-ranks": "", "lore-class": "", "lore-ability-mod": "", "lore-racial": "", "lore-feat": "", "lore-item": "", "lore-size": "", "lore-acp": "", "lore-misc": "", "lore-reqtrain": "", "lore2-ability": "", "lore2-cs": "", "lore2-ranks": "", "lore2-class": "", "lore2-ability-mod": "", "lore2-racial": "", "lore2-feat": "", "lore2-item": "", "lore2-size": "", "lore2-acp": "", "lore2-misc": "", "lore2-reqtrain": "", "lore3-ability": "", "lore3-cs": "", "lore3-ranks": "", "lore3-class": "", "lore3-ability-mod": "", "lore3-racial": "", "lore3-feat": "", "lore3-item": "", "lore3-size": "", "lore3-acp": "", "lore3-misc": "", "lore3-reqtrain": "", "knowledge-arcana-ability": "", "knowledge-arcana-cs": "", "knowledge-arcana-ranks": "", "knowledge-arcana-class": "", "knowledge-arcana-ability-mod": "", "knowledge-arcana-racial": "", "knowledge-arcana-feat": "", "knowledge-arcana-item": "", "knowledge-arcana-size": "", "knowledge-arcana-acp": "", "knowledge-arcana-misc": "", "knowledge-arcana-reqtrain": "", "knowledge-dungeoneering-ability": "", "knowledge-dungeoneering-cs": "", "knowledge-dungeoneering-ranks": "", "knowledge-dungeoneering-class": "", "knowledge-dungeoneering-ability-mod": "", "knowledge-dungeoneering-racial": "", "knowledge-dungeoneering-feat": "", "knowledge-dungeoneering-item": "", "knowledge-dungeoneering-size": "", "knowledge-dungeoneering-acp": "", "knowledge-dungeoneering-misc": "", "knowledge-dungeoneering-reqtrain": "", "knowledge-engineering-ability": "", "knowledge-engineering-cs": "", "knowledge-engineering-ranks": "", "knowledge-engineering-class": "", "knowledge-engineering-ability-mod": "", "knowledge-engineering-racial": "", "knowledge-engineering-feat": "", "knowledge-engineering-item": "", "knowledge-engineering-size": "", "knowledge-engineering-acp": "", "knowledge-engineering-misc": "", "knowledge-engineering-reqtrain": "", "knowledge-geography-ability": "", "knowledge-geography-cs": "", "knowledge-geography-ranks": "", "knowledge-geography-class": "", "knowledge-geography-ability-mod": "", "knowledge-geography-racial": "", "knowledge-geography-feat": "", "knowledge-geography-item": "", "knowledge-geography-size": "", "knowledge-geography-acp": "", "knowledge-geography-misc": "", "knowledge-geography-reqtrain": "", "knowledge-history-ability": "", "knowledge-history-cs": "", "knowledge-history-ranks": "", "knowledge-history-class": "", "knowledge-history-ability-mod": "", "knowledge-history-racial": "", "knowledge-history-feat": "", "knowledge-history-item": "", "knowledge-history-size": "", "knowledge-history-acp": "", "knowledge-history-misc": "", "knowledge-history-reqtrain": "", "knowledge-local-ability": "", "knowledge-local-cs": "", "knowledge-local-ranks": "", "knowledge-local-class": "", "knowledge-local-ability-mod": "", "knowledge-local-racial": "", "knowledge-local-feat": "", "knowledge-local-item": "", "knowledge-local-size": "", "knowledge-local-acp": "", "knowledge-local-misc": "", "knowledge-local-reqtrain": "", "knowledge-nature-ability": "", "knowledge-nature-cs": "", "knowledge-nature-ranks": "", "knowledge-nature-class": "", "knowledge-nature-ability-mod": "", "knowledge-nature-racial": "", "knowledge-nature-feat": "", "knowledge-nature-item": "", "knowledge-nature-size": "", "knowledge-nature-acp": "", "knowledge-nature-misc": "", "knowledge-nature-reqtrain": "", "knowledge-nobility-ability": "", "knowledge-nobility-cs": "", "knowledge-nobility-ranks": "", "knowledge-nobility-class": "", "knowledge-nobility-ability-mod": "", "knowledge-nobility-racial": "", "knowledge-nobility-feat": "", "knowledge-nobility-item": "", "knowledge-nobility-size": "", "knowledge-nobility-acp": "", "knowledge-nobility-misc": "", "knowledge-nobility-reqtrain": "", "knowledge-planes-ability": "", "knowledge-planes-cs": "", "knowledge-planes-ranks": "", "knowledge-planes-class": "", "knowledge-planes-ability-mod": "", "knowledge-planes-racial": "", "knowledge-planes-feat": "", "knowledge-planes-item": "", "knowledge-planes-size": "", "knowledge-planes-acp": "", "knowledge-planes-misc": "", "knowledge-planes-reqtrain": "", "knowledge-religion-ability": "", "knowledge-religion-cs": "", "knowledge-religion-ranks": "", "knowledge-religion-class": "", "knowledge-religion-ability-mod": "", "knowledge-religion-racial": "", "knowledge-religion-feat": "", "knowledge-religion-item": "", "knowledge-religion-size": "", "knowledge-religion-acp": "", "knowledge-religion-misc": "", "knowledge-religion-reqtrain": "", "perception-ability": "", "perception-cs": "", "perception-ranks": "", "perception-class": "", "perception-ability-mod": "", "perception-racial": "", "perception-feat": "", "perception-item": "", "perception-size": "", "perception-acp": "", "perception-misc": "", "perception-reqtrain": "", "perform-ability": "", "perform-cs": "", "perform-ranks": "", "perform-class": "", "perform-ability-mod": "", "perform-racial": "", "perform-feat": "", "perform-item": "", "perform-size": "", "perform-acp": "", "perform-misc": "", "perform-reqtrain": "", "perform2-ability": "", "perform2-cs": "", "perform2-ranks": "", "perform2-class": "", "perform2-ability-mod": "", "perform2-racial": "", "perform2-feat": "", "perform2-item": "", "perform2-size": "", "perform2-acp": "", "perform2-misc": "", "perform2-reqtrain": "", "perform3-ability": "", "perform3-cs": "", "perform3-ranks": "", "perform3-class": "", "perform3-ability-mod": "", "perform3-racial": "", "perform3-feat": "", "perform3-item": "", "perform3-size": "", "perform3-acp": "", "perform3-misc": "", "perform3-reqtrain": "", "profession-ability": "", "profession-cs": "", "profession-ranks": "", "profession-class": "", "profession-ability-mod": "", "profession-racial": "", "profession-feat": "", "profession-item": "", "profession-size": "", "profession-acp": "", "profession-misc": "", "profession-reqtrain": "", "profession2-ability": "", "profession2-cs": "", "profession2-ranks": "", "profession2-class": "", "profession2-ability-mod": "", "profession2-racial": "", "profession2-feat": "", "profession2-item": "", "profession2-size": "", "profession2-acp": "", "profession2-misc": "", "profession2-reqtrain": "", "profession3-ability": "", "profession3-cs": "", "profession3-ranks": "", "profession3-class": "", "profession3-ability-mod": "", "profession3-racial": "", "profession3-feat": "", "profession3-item": "", "profession3-size": "", "profession3-acp": "", "profession3-misc": "", "profession3-reqtrain": "", "ride-ability": "", "ride-cs": "", "ride-ranks": "", "ride-class": "", "ride-ability-mod": "", "ride-racial": "", "ride-feat": "", "ride-item": "", "ride-size": "", "ride-acp": "", "ride-misc": "", "ride-reqtrain": "", "sense-motive-ability": "", "sense-motive-cs": "", "sense-motive-ranks": "", "sense-motive-class": "", "sense-motive-ability-mod": "", "sense-motive-racial": "", "sense-motive-feat": "", "sense-motive-item": "", "sense-motive-size": "", "sense-motive-acp": "", "sense-motive-misc": "", "sense-motive-reqtrain": "", "sleight-of-hand-ability": "", "sleight-of-hand-cs": "", "sleight-of-hand-ranks": "", "sleight-of-hand-class": "", "sleight-of-hand-ability-mod": "", "sleight-of-hand-racial": "", "sleight-of-hand-feat": "", "sleight-of-hand-item": "", "sleight-of-hand-size": "", "sleight-of-hand-acp": "", "sleight-of-hand-misc": "", "sleight-of-hand-reqtrain": "", "spellcraft-ability": "", "spellcraft-cs": "", "spellcraft-ranks": "", "spellcraft-class": "", "spellcraft-ability-mod": "", "spellcraft-racial": "", "spellcraft-feat": "", "spellcraft-item": "", "spellcraft-size": "", "spellcraft-acp": "", "spellcraft-misc": "", "spellcraft-reqtrain": "", "stealth-ability": "", " stealth-cs": "", "stealth-ranks": "", "stealth-class": "", "stealth-ability-mod": "", "stealth-racial": "", "stealth-feat": "", "stealth-item": "", "stealth-size": "", "stealth-acp": "", "stealth-misc": "", "stealth-reqtrain": "", "survival-ability": "", "survival-cs": "", "survival-ranks": "", "survival-class": "", "survival-ability-mod": "", "survival-racial": "", "survival-feat": "", "survival-item": "", "survival-size": "", "survival-acp": "", "survival-misc": "", "survival-reqtrain": "", "swim-ability": "", "swim-cs": "", "swim-ranks": "", "swim-class": "", "swim-ability-mod": "", "swim-racial": "", "swim-feat": "", "swim-item": "", "swim-size": "", "swim-acp": "", "swim-misc": "", "swim-reqtrain": "", "use-magic-device-ability": "", "use-magic-device-cs": "", "use-magic-device-ranks": "", "use-magic-device-class": "", "use-magic-device-ability-mod": "", "use-magic-device-racial": "", "use-magic-device-feat": "", "use-magic-device-item": "", "use-magic-device-size": "", "use-magic-device-acp": "", "use-magic-device-misc": "", "use-magic-device-reqtrain": "", "misc-skill-0-ability": "", "misc-skill-0-cs": "", "misc-skill-0-ranks": "", "misc-skill-0-class": "", "misc-skill-0-ability-mod": "", "misc-skill-0-racial": "", "misc-skill-0-feat": "", "misc-skill-0-item": "", "misc-skill-0-size": "", "misc-skill-0-acp": "", "misc-skill-0-misc": "", "misc-skill-0-reqtrain": "", "misc-skill-1-ability": "", "misc-skill-1-cs": "", "misc-skill-1-ranks": "", "misc-skill-1-class": "", "misc-skill-1-ability-mod": "", "misc-skill-1-racial": "", "misc-skill-1-feat": "", "misc-skill-1-item": "", "misc-skill-1-size": "", "misc-skill-1-acp": "", "misc-skill-1-misc": "", "misc-skill-1-reqtrain": "", "misc-skill-2-ability": "", "misc-skill-2-cs": "", "misc-skill-2-ranks": "", "misc-skill-2-class": "", "misc-skill-2-ability-mod": "", "misc-skill-2-racial": "", "misc-skill-2-feat": "", "misc-skill-2-item": "", "misc-skill-2-size": "", "misc-skill-2-acp": "", "misc-skill-2-misc": "", "misc-skill-2-reqtrain": "", "misc-skill-3-ability": "", "misc-skill-3-cs": "", "misc-skill-3-ranks": "", "misc-skill-3-class": "", "misc-skill-3-ability-mod": "", "misc-skill-3-racial": "", "misc-skill-3-feat": "", "misc-skill-3-item": "", "misc-skill-3-size": "", "misc-skill-3-acp": "", "misc-skill-3-misc": "", "misc-skill-3-reqtrain": "", "misc-skill-4-ability": "", "misc-skill-4-cs": "", "misc-skill-4-ranks": "", "misc-skill-4-class": "", "misc-skill-4-ability-mod": "", "misc-skill-4-racial": "", "misc-skill-4-feat": "", "misc-skill-4-item": "", "misc-skill-4-size": "", "misc-skill-4-acp": "", "misc-skill-4-misc": "", "misc-skill-4-reqtrain": "", "misc-skill-5-ability": "", "misc-skill-5-cs": "", "misc-skill-5-ranks": "", "misc-skill-5-class": "", "misc-skill-5-ability-mod": "", "misc-skill-5-racial": "", "misc-skill-5-feat": "", "misc-skill-5-item": "", "misc-skill-5-size": "", "misc-skill-5-acp": "", "misc-skill-5-misc": "", "misc-skill-5-reqtrain": "", "craft-name": "", "craft2-name": "", "craft3-name": "", "lore-name": "", "perform-name": "", "perform2-name": "", "perform3-name": "", "profession-name": "", "profession2-name": "", "profession3-name": "", "misc-skill-0-name": "", "misc-skill-1-name": "", "misc-skill-2-name": "", "misc-skill-3-name": "", "misc-skill-4-name": "", "misc-skill-5-name": "" });

	// Keep track of which of these skills we're on
	var craft = 1;
	var perform = 1;
	var profession = 1;
	var artistry = 1;
	var lore = 1;
	var misc = 0;

	var i = 0;
	var skill;
	var skillMisc;
	var skillAttrPrefix;
	for (i = 0; i < skills.length; i++) {
		/*if (_.isUndefined(skill._name))
  {
  	continue;
  }*/
		skill = skills[i];
		console.log(skill._name);
		// Figure out where we're putting this skill on the character sheet
		if (skill._name.indexOf("Craft") !== -1) {
			if (craft === 1) {
				skillAttrPrefix = "craft";
				if (skill._name.match(/\(([^\)]+)\)/) !== null) attrs["craft-name"] = skill._name.match(/\(([^\)]+)\)/)[0].replace("(", "").replace(")", "");
				craft++;
			} else if (craft <= 3) {
				skillAttrPrefix = "craft" + craft;
				if (skill._name.match(/\(([^\)]+)\)/) !== null) attrs["craft" + craft + "-name"] = skill._name.match(/\(([^\)]+)\)/)[0].replace("(", "").replace(")", "");
				craft++;
			} else {
				if (misc <= 5) {
					skillAttrPrefix = "misc-skill-" + misc;
					if (skill._name.match(/\(([^\)]+)\)/) !== null) attrs[skillAttrPrefix + "-name"] = skill._name;
					misc++;
				} else console.log("Ran out of misc skills for " + skill._name + "!");
			}
		} else if (skill._name.indexOf("Perform") !== -1) {
			if (perform === 1) {
				skillAttrPrefix = "perform";
				if (skill._name.match(/\(([^\)]+)\)/) !== null) attrs["perform-name"] = skill._name.match(/\(([^\)]+)\)/)[0].replace("(", "").replace(")", "");
				perform++;
			} else if (perform <= 3) {
				skillAttrPrefix = "perform" + perform;
				if (skill._name.match(/\(([^\)]+)\)/) !== null) attrs["perform" + perform + "-name"] = skill._name.match(/\(([^\)]+)\)/)[0].replace("(", "").replace(")", "");
				perform++;
			} else {
				if (misc <= 5) {
					skillAttrPrefix = "misc-skill-" + misc;
					if (skill._name.match(/\(([^\)]+)\)/) !== null) attrs[skillAttrPrefix + "-name"] = skill._name;
					misc++;
				} else console.log("Ran out of misc skills for " + skill._name + "!");
			}
		} else if (skill._name.indexOf("Profession") !== -1) {
			if (profession === 1) {
				skillAttrPrefix = "profession";
				if (skill._name.match(/\(([^\)]+)\)/) !== null) attrs["profession-name"] = skill._name.match(/\(([^\)]+)\)/)[0].replace("(", "").replace(")", "");
				profession++;
			} else if (profession <= 3) {
				skillAttrPrefix = "profession" + profession;
				if (skill._name.match(/\(([^\)]+)\)/) !== null) attrs["profession" + profession + "-name"] = skill._name.match(/\(([^\)]+)\)/)[0].replace("(", "").replace(")", "");
				profession++;
			} else {
				if (misc <= 5) {
					skillAttrPrefix = "misc-skill-" + misc;
					if (skill._name.match(/\(([^\)]+)\)/) !== null) attrs[skillAttrPrefix + "-name"] = skill._name;
					misc++;
				} else console.log("Ran out of misc skills for " + skill._name + "!");
			}
		} else if (skill._name.indexOf("Knowledge") !== -1) {
			switch (skill._name.match(/\(([^\)]+)\)/g)[0]) {
				case "(arcana)":
				case "(dungeoneering)":
				case "(engineering)":
				case "(geography)":
				case "(history)":
				case "(local)":
				case "(nature)":
				case "(nobility)":
				case "(planes)":
				case "(religion)":
					skillAttrPrefix = skill._name.toLowerCase().replace(/\s/g, "-").replace("(", "").replace(")", "");
					break;
				default:
					skillAttrPrefix = "misc-skill-" + misc;
					attrs[skillAttrPrefix + "-name"] = skill._name;
					misc++;
			}
		} else if (skill._name.indexOf("Artistry") !== -1) {
			if (artistry === 1) {
				skillAttrPrefix = "artistry";
				attrs["artistry-name"] = skill._name.match(/\(([^\)]+)\)/)[0].replace("(", "").replace(")", "");
				artistry++;
			} else if (artistry <= 3) {
				skillAttrPrefix = "artistry" + artistry;
				attrs["artistry" + artistry + "-name"] = skill._name.match(/\(([^\)]+)\)/)[0].replace("(", "").replace(")", "");
				artistry++;
			} else {
				if (misc <= 5) {
					skillAttrPrefix = "misc-skill-" + misc;
					attrs[skillAttrPrefix + "-name"] = skill._name;
					misc++;
				} else console.log("Ran out of misc skills for " + skill._name + "!");
			}
		} else if (skill._name.indexOf("Lore") !== -1) {
			if (lore === 1) {
				skillAttrPrefix = "lore";
				attrs["lore-name"] = skill._name.match(/\(([^\)]+)\)/)[0].replace("(", "").replace(")", "");
				lore++;
			} else if (lore <= 3) {
				skillAttrPrefix = "lore" + lore;
				attrs["lore" + lore + "-name"] = skill._name.match(/\(([^\)]+)\)/)[0].replace("(", "").replace(")", "");
				lore++;
			} else {
				if (misc <= 5) {
					skillAttrPrefix = "misc-skill-" + misc;
					attrs[skillAttrPrefix + "-name"] = skill._name;
					misc++;
				} else console.log("Ran out of misc skills for " + skill._name + "!");
			}
		} else skillAttrPrefix = skill._name.toLowerCase().replace(/\s/g, "-").replace("(", "").replace(")", "").replace("-hand", "-Hand").replace("e-device", "e-Device").replace("-artist", "-Artist").replace("-animal", "-Animal");

		attrs[skillAttrPrefix + "-ranks"] = parseNum(skill._ranks);
		attrs[skillAttrPrefix + "-ability"] = "@{" + skill._attrname + "-mod}";
		attrs[skillAttrPrefix + "-ability-mod"] = parseNum(skill._attrbonus);

		if (skill._classskill === "yes") attrs[skillAttrPrefix + "-cs"] = 3;

		skillMisc = parseNum(skill._value) - parseNum(skill._ranks) - parseNum(skill._attrbonus);
		if (parseNum(skill._ranks) != 0 && skill._classskill === "yes") skillMisc -= 3;
		if (skill._armorcheck === "yes") skillMisc -= ACP;
		if (skill._name === "Fly") skillMisc -= skillSize;
		if (skill._name === "Stealth") skillMisc -= 2 * skillSize;
		attrs[skillAttrPrefix + "-misc"] = skillMisc;

		if (skill._trainedonly === "yes") attrs[skillAttrPrefix + "-ReqTrain"] = 1;

		// Add situation modifiers to the macro
		if (!_underscore2.default.isUndefined(skill.situationalmodifiers.situationalmodifier)) {
			var macro = "@{PC-whisper} &{template:pf_generic} {{color=@{rolltemplate_color}}} {{header_image=@{header_image-pf_generic-skill}}} @{toggle_rounded_flag} {{character_name=@{character_name}}} {{character_id=@{character_id}}} {{subtitle}} {{name=" + skill._name + "}} {{Check=[[ @{skill-query} + [[ @{" + skillAttrPrefix + "} ]] ]]}}";
			skill.situationalmodifiers.situationalmodifier = arrayify(skill.situationalmodifiers.situationalmodifier);
			var j = 0;
			while (j < skill.situationalmodifiers.situationalmodifier.length) {
				macro = macro + " {{" + skill.situationalmodifiers.situationalmodifier[j]._source + "=" + skill.situationalmodifiers.situationalmodifier[j]._text + "}}";
				j++;
			}
			attrs[skillAttrPrefix + "-macro"] = macro;
		}
	}
}

// Import ACP and Max Dex; these aren't included under items, but the final values are listed in penalties
function importPenalties(attrs, penalties) {
	var ACP = 0;
	var i = 0;
	while (i < penalties.length) {
		if (penalties[i]._name === "Armor Check Penalty") {
			ACP = parseNum(penalties[i]._value);
			attrs["armor3-acp"] = ACP;
		} else if (penalties[i]._name === "Max Dex Bonus") attrs["armor3-max-dex"] = Math.min(99, parseNum(penalties[i]._value)); // Hero Lab uses 1000 for Max Dex when player doesn't have one; cap it at 99 to match sheet default
		i++;
	}
	return ACP;
}

function importAC(attrs, acObj) {
	attrs["AC-natural"] = parseNum(acObj._fromnatural);
	attrs["AC-deflect"] = parseNum(acObj._fromdeflect);
	attrs["AC-dodge"] = parseNum(acObj._fromdodge);

	// Are we replacing Dex to AC with something else?
	if (acObj._fromdexterity === "") {
		if (acObj._fromcharisma !== "") {
			attrs["AC-ability"] = "( ((@{CHA-mod} + [[ @{max-dex-source} ]]) - abs(@{CHA-mod} - [[ @{max-dex-source} ]])) / 2 )";
			attrs["AC-misc"] = parseNum(acObj._ac) - 10 - parseNum(acObj._fromarmor) - parseNum(acObj._fromshield) - parseNum(acObj._fromcharisma) - parseNum(acObj._fromsize) - parseNum(acObj._fromnatural) - parseNum(acObj._fromdeflect) - parseNum(acObj._fromdodge);
		} else if (acObj._fromwisdom !== "") {
			attrs["AC-ability"] = "( ((@{WIS-mod} + [[ @{max-dex-source} ]]) - abs(@{WIS-mod} - [[ @{max-dex-source} ]])) / 2 )";
			attrs["AC-misc"] = parseNum(acObj._ac) - 10 - parseNum(acObj._fromarmor) - parseNum(acObj._fromshield) - parseNum(acObj._fromwisdom) - parseNum(acObj._fromsize) - parseNum(acObj._fromnatural) - parseNum(acObj._fromdeflect) - parseNum(acObj._fromdodge);
		} else attrs["AC-misc"] = parseNum(acObj._ac) - 10 - parseNum(acObj._fromarmor) - parseNum(acObj._fromshield) - parseNum(acObj._fromdexterity) - parseNum(acObj._fromsize) - parseNum(acObj._fromnatural) - parseNum(acObj._fromdeflect) - parseNum(acObj._fromdodge);
	}
}

function importCharacter(characterObj) {
	var attrs = {};

	importAbilityScores(attrs, characterObj.attributes.attribute);
	importSaves(attrs, characterObj.saves);
	var classes,
	    spellClasses,
	    archetypes = {};
	// Class objects won't exist for creatures w/o class levels, such as animals
	if (!_underscore2.default.isUndefined(characterObj.classes.class)) {
		// Class will be an array if multiclassed, but a single object if single-classed; make it an array, just to be safe
		characterObj.classes.class = arrayify(characterObj.classes.class);

		classes = importClasses(attrs, characterObj.classes.class);

		// If any of the character's classes is a spellcaster, it'll be listed here, too
		if (!_underscore2.default.isUndefined(characterObj.spellclasses.spellclass)) {
			characterObj.spellclasses.spellclass = arrayify(characterObj.spellclasses.spellclass);
			spellClasses = importSpellClasses(attrs, characterObj.spellclasses.spellclass, classes, characterObj.attributes.attribute);

			// Well, it's a spellcaster, so let's import those spells, too!
			var spellsArray = arrayify(characterObj.spellsknown.spell).concat(arrayify(characterObj.spellbook.spell)).concat(arrayify(characterObj.spellsmemorized.spell));
			var spellNames = [];
			spellsArray = _underscore2.default.reject(spellsArray, function (spell) {
				if (_underscore2.default.contains(spellNames, spell._name)) return true;spellNames.concat(spell._name);return false;
			});
			importSpells(spellsArray, spellClasses);
			/*if (!_.isUndefined(characterObj.spellsknown.spell))
   {
   	characterObj.spellsknown.spell = arrayify(characterObj.spellsknown.spell);
   	importSpells(characterObj.spellsknown.spell,spellClasses);
   }
   if (!_.isUndefined(characterObj.spellbook.spell))
   {
   	characterObj.spellbook.spell = arrayify(characterObj.spellbook.spell);
   	importSpells(characterObj.spellbook.spell,spellClasses);
   }
   if (!_.isUndefined(characterObj.spellsmemorized.spell))
   {
   	characterObj.spellsmemorized.spell = arrayify(characterObj.spellsmemorized.spell);
   	importSpells(characterObj.spellsmemorized.spell,spellClasses);
   }*/
		}

		// Need to keep track of what archetypes the character has, since class feature source could be an archetype
		archetypes = buildArchetypeArray(classes);
	}

	importAC(attrs, characterObj.armorclass);
	characterObj.penalties.penalty = arrayify(characterObj.penalties.penalty);
	var ACP = importPenalties(attrs, characterObj.penalties.penalty);

	// Build an object we can pass to the item importing, so we can attach this to the inventory item
	var armorPenalties = {};
	armorPenalties.ACP = parseNum(attrs["armor3-acp"]);
	armorPenalties.maxDex = parseNum(attrs["armor3-max-dex"]);
	armorPenalties.spellfail = parseNum(attrs["armor3-spell-fail"]);

	// We might change these values if we're using a shield, so don't set them outside of item import
	if (!_underscore2.default.isUndefined(attrs["armor3-acp"])) delete attrs["armor3-acp"];
	if (!_underscore2.default.isUndefined(attrs["armor3-spell-fail"])) delete attrs["armor3-spell-fail"];

	var armor = _underscore2.default.reject(arrayify(characterObj.defenses.armor || {}), function (item) {
		return _underscore2.default.isUndefined(item._name);
	});
	var weapons = _underscore2.default.reject(arrayify(characterObj.melee.weapon || {}).concat(arrayify(characterObj.ranged.weapon || {})), function (item) {
		return _underscore2.default.isUndefined(item._name);
	});

	// "Tracked Resources" is a list of uses, either a quantity of items, charges, or uses per day
	var resources = _underscore2.default.object(_underscore2.default.map(characterObj.trackedresources.trackedresource, function (resource) {
		return [resource._name, resource];
	}));

	// Make an array of items, both magic and mundane
	var items = _underscore2.default.reject(arrayify(characterObj.magicitems.item || {}).concat(arrayify(characterObj.gear.item || {})), function (item) {
		return _underscore2.default.isUndefined(item._name);
	});

	// "Specials" could include items, so we need to filter them out
	var itemNames = _underscore2.default.map(items, function (obj) {
		return obj._name;
	});
	var specials = _underscore2.default.reject(arrayify(characterObj.attack.special).concat(arrayify(characterObj.defenses.special), arrayify(characterObj.otherspecials.special), arrayify(characterObj.movement.special)), function (obj) {
		return _underscore2.default.contains(itemNames, obj._name);
	});

	importItems(items, resources, armorPenalties, armor, weapons);

	getSectionIDs("repeating_ability", function (idarray) {
		var abilityNameAttrs = _underscore2.default.union(_underscore2.default.map(idarray, function (id) {
			return "repeating_ability_" + id + "_name";
		}), _underscore2.default.map(idarray, function (id) {
			return "repeating_ability_" + id + "_rule_category";
		}));
		getAttrs(abilityNameAttrs, function (abilityAttrs) {
			var abilityObjList = {};
			var abilityKeys = Object.keys(abilityAttrs);
			var asyncAttrs = {};
			_underscore2.default.each(abilityKeys, function (abilityKey) {
				var rowID;
				if (abilityKey.indexOf("_name") !== -1) {
					rowID = abilityKey.substring("repeating_ability_".length, abilityKey.indexOf("_name"));
					if (_underscore2.default.isUndefined(abilityObjList[rowID])) abilityObjList[rowID] = { rowID: rowID };
					abilityObjList[rowID].name = abilityAttrs[abilityKey];
				}
				if (abilityKey.indexOf("_rule_category") !== -1) {
					rowID = abilityKey.substring("repeating_ability_".length, abilityKey.indexOf("_rule_category"));
					if (_underscore2.default.isUndefined(abilityObjList[rowID])) abilityObjList[rowID] = { rowID: rowID };
					abilityObjList[rowID].rulecategory = abilityAttrs[abilityKey];
				}
			});

			if (!_underscore2.default.isUndefined(characterObj.feats.feat)) {
				var featsArray = _underscore2.default.filter(abilityObjList, _underscore2.default.matcher({ rulecategory: "feats" }));
				var featsList = {};
				_underscore2.default.each(featsArray, function (obj) {
					featsList[obj.rowID] = obj.name;
				});
				characterObj.feats.feat = arrayify(characterObj.feats.feat);
				importFeats(asyncAttrs, characterObj.feats.feat, featsList, resources);
			}

			if (!_underscore2.default.isUndefined(characterObj.traits.trait)) {
				var traitsArray = _underscore2.default.filter(abilityObjList, _underscore2.default.matcher({ rulecategory: "traits" }));
				var traitsList = {};
				_underscore2.default.each(traitsArray, function (obj) {
					traitsList[obj.rowID] = obj.name;
				});
				characterObj.traits.trait = arrayify(characterObj.traits.trait);
				importTraits(asyncAttrs, characterObj.traits.trait, traitsList, resources);
			}

			if (!_underscore2.default.isUndefined(characterObj.spelllike.special)) {
				var SLAsArray = _underscore2.default.filter(abilityObjList, _underscore2.default.matcher({ rulecategory: "spell-like-abilities" }));
				var SLAsList = {};
				_underscore2.default.each(SLAsArray, function (obj) {
					SLAsList[obj.rowID] = obj.name;
				});
				characterObj.spelllike.special = arrayify(characterObj.spelllike.special);
				importSLAs(asyncAttrs, characterObj.spelllike.special, SLAsList, resources);
			}

			var featuresArray = _underscore2.default.filter(abilityObjList, function (obj) {
				if (obj.rulecategory === "traits" || obj.rulecategory === "feats") return false;return true;
			});
			var featuresList = {};
			_underscore2.default.each(featuresArray, function (obj) {
				featuresList[obj.rowID] = obj;
			});
			importFeatures(asyncAttrs, featuresList, specials, archetypes, resources);

			setAttrs(asyncAttrs);
		});
	});

	attrs["experience"] = parseFloat(characterObj.xp._total);

	attrs["class-0-bab"] = parseNum(characterObj.attack._baseattack);

	// Set max hp; remove Con mod from hp first, since the sheet will add that in
	// Since the XML doesn't break this down by class, add it all to class 0
	var level = calcHitDice(characterObj.health._hitdice);
	attrs["class-0-hp"] = parseNum(characterObj.health._hitpoints) - level * parseNum(characterObj.attributes.attribute[2].attrbonus._modified);
	importInit(attrs, characterObj.initiative);
	var racialHD = level - parseNum(characterObj.classes._level);
	if (racialHD > 0) attrs["npc-hd-num"] = racialHD;

	var size = getSizeMod(characterObj.size._name);
	attrs["size"] = size;
	attrs["default_char_size"] = size;

	characterObj.skills.skill = arrayify(characterObj.skills.skill);
	importSkills(attrs, characterObj.skills.skill, size, ACP);

	if (!_underscore2.default.isUndefined(characterObj.senses.special)) {
		characterObj.senses.special = arrayify(characterObj.senses.special);
		attrs["vision"] = buildList(characterObj.senses.special, "_shortname");
	}

	if (!_underscore2.default.isUndefined(characterObj.damagereduction.special)) {
		characterObj.damagereduction.special = arrayify(characterObj.damagereduction.special);
		attrs["DR"] = buildList(characterObj.damagereduction.special, "_shortname");
	}

	if (!_underscore2.default.isUndefined(characterObj.resistances.special)) {
		characterObj.resistances.special = arrayify(characterObj.resistances.special);
		attrs["resistances"] = buildList(characterObj.resistances.special, "_shortname");
	}

	if (!_underscore2.default.isUndefined(characterObj.immunities.special)) {
		characterObj.immunities.special = arrayify(characterObj.immunities.special);
		attrs["immunities"] = buildList(characterObj.immunities.special, "_shortname");
	}

	if (!_underscore2.default.isUndefined(characterObj.weaknesses.special)) {
		characterObj.weaknesses.special = arrayify(characterObj.weaknesses.special);
		attrs["weaknesses"] = buildList(characterObj.weaknesses.special, "_shortname");
	}
	if (!_underscore2.default.isUndefined(characterObj.languages.language)) {
		characterObj.languages.language = arrayify(characterObj.languages.language);
		attrs["languages"] = buildList(characterObj.languages.language, "_name");
	}

	attrs["character_name"] = characterObj._name;
	attrs["player-name"] = characterObj._playername;
	attrs["deity"] = characterObj.deity._name;
	attrs["race"] = characterObj.race._racetext.substr(0, 1).toUpperCase() + characterObj.race._racetext.substr(1, 1000);
	attrs["alignment"] = characterObj.alignment._name;
	attrs["gender"] = characterObj.personal._gender;
	attrs["age"] = characterObj.personal._age;
	attrs["height"] = characterObj.personal.charheight._text;
	attrs["weight"] = characterObj.personal.charweight._text;
	attrs["hair"] = characterObj.personal._hair;
	attrs["eyes"] = characterObj.personal._eyes;
	attrs["skin"] = characterObj.personal._skin;

	attrs["npc-cr"] = characterObj.challengerating._text.replace("CR ", "");
	attrs["npc-xp"] = characterObj.xpaward._value;

	if (!_underscore2.default.isUndefined(characterObj.favoredclasses.favoredclass)) {
		characterObj.favoredclasses.favoredclass = arrayify(characterObj.favoredclasses.favoredclass);
		attrs["class-favored"] = buildList(characterObj.favoredclasses.favoredclass, "_name");
	}
	setAttrs(attrs, {}, function () {
		PFSheet.recalculate();
	});
}
function registerEventHandlers() {
	on("change:herolab_import", function (eventInfo) {
		_exportsLoaderTASTheAaronSheet2.default.debug("caught " + eventInfo.sourceAttribute + " event" + eventInfo.sourceType);
		if (eventInfo.sourceType !== "player") return;
		getAttrs(["herolab_import"], function (values) {
			var xmlObj;
			if (_underscore2.default.isUndefined(values.herolab_import)) return;
			try {
				xmlObj = JSON.parse(values.herolab_import);
				if (_underscore2.default.isArray(xmlObj.document.public.character)) importCharacter(xmlObj.document.public.character[0]);else importCharacter(xmlObj.document.public.character);
				setAttrs({ herolab_import: "" }, { silent: true });
			} catch (err) {
				console.log(err);setAttrs({ herolab_import: err.message }, { silent: true });
			}
		});
	});
}
registerEventHandlers();
_PFLog.PFConsole.log('   HLImport module loaded         ');
_PFLog.PFLog.modulecount++;

/***/ }),
/* 32 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.write = write;
exports.handleExpression = handleExpression;

var _underscore = __webpack_require__(2);

var _underscore2 = _interopRequireDefault(_underscore);

var _PFLog = __webpack_require__(0);

var _exportsLoaderTASTheAaronSheet = __webpack_require__(1);

var _exportsLoaderTASTheAaronSheet2 = _interopRequireDefault(_exportsLoaderTASTheAaronSheet);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var rollOperator;

function parseExpression(s, until) {
  var untilCb = typeof until === "function" ? until : function (tok) {
    return tok == until;
  },

  // constants
  ARG_COUNTS = {
    'abs': 1,
    'ceil': 1,
    'floor': 1,
    'round': 1,
    'max': [1],
    'min': [1]
  },
      BINARY_PRECEDENCE = {
    '?': 1,
    ':': 2,
    '||': 3,
    '&&': 4,
    '|': 5,
    '^': 6,
    '&': 7,
    '=': 8,
    '==': 8,
    '!=': 8,
    '>=': 9,
    '>': 9,
    '<': 9,
    '<=': 9,
    '<<': 10,
    '>>': 10,
    '+': 11,
    '-': 11,
    '*': 12,
    '/': 12,
    '%': 12,
    '**': 14,
    't': 98,
    'd': 99
  },
      UNARY_PRECEDENCE = {
    '!': 13,
    '~': 13,
    '-': 13
  },
      CLOSERS = {
    '(': ")",
    '{': "}"
  },

  // local variables
  operators = [{
    'precedence': 0
  }],
      operands = [],
      tableExp,
      m,
      err,
      operand;
  // helper functions
  function getToken(s) {
    var m;
    if (!s) {
      return s;
    }

    function retVal(tokType, matchObj) {
      return {
        'type': tokType,
        'text': matchObj[0],
        'match': matchObj
      };
    }
    m = s.match(/^\s+/);
    if (m) {
      return retVal("whitespace", m);
    }
    m = s.match(/^(abs|ceil|floor|round|max|min)[(]/);
    if (m) {
      return retVal("function", m);
    }
    m = s.match(/^[({]/);
    if (m) {
      return retVal("opengroup", m);
    }
    m = s.match(/^[)}]/);
    if (m) {
      return retVal("closegroup", m);
    }
    m = s.match(/^((\d+(\.\d+)?)|(\.\d+))/);
    if (m) {
      return retVal("number", m);
    }
    m = s.match(/^['"]/);
    if (m) {
      return retVal("quote", m);
    }
    m = s.match(/^((\|\|)|(&&)|(==)|(!=)|(>=)|(<=)|(<<)|(>>)|(\*\*)|[?:|\^&=><%!~])/);
    if (m) {
      return retVal("extoperator", m);
    }
    m = s.match(/^[\-+*\/td]/);
    if (m) {
      return retVal("baseoperator", m);
    }
    m = s.match(/^\[([^\]]+)\]/);
    if (m) {
      return retVal("label", m);
    }
    m = s.match(/^\$\{([^'"\($\}][^}]*)\}/);
    if (m) {
      return retVal("variable", m);
    }
    m = s.match(/^\$\{/);
    if (m) {
      return retVal("openvariable", m);
    }
    return {
      'type': "raw",
      'text': s.charAt(0)
    };
  }

  function popToken(state) {
    state.tok = getToken(state.s);
    if (state.tok) {
      state.s = state.s.substring(state.tok.text.length);
    }
    return state;
  }

  function popString(state, delim) {
    var i = -1,
        j = i,
        retval;
    // find first index of delim not preceded by an odd number of backslashes
    while ((i - j & 1) === 0) {
      i = state.s.indexOf(delim, i + 1);
      if (i < 0) {
        return;
      }
      j = i - 1;
      while (j >= 0 && state.s.charAt(j) === '\\') {
        j--;
      }
    }
    // unescape string to be returned
    function replaceEscapes(s) {
      return s.replace(/\\n/g, "\n").replace(/\\r/g, "\r").replace(/\\t/g, "\t").replace(/\\/g, "");
    }
    retval = state.s.substring(0, i).split("\\\\").map(replaceEscapes).join("\\");
    // point state delim, then pop off the delimiter token
    state.s = state.s.substring(i);
    popToken(state);
    return retval;
  }

  function popOperator() {
    var op = operators.pop(),
        right = operands.pop(),
        left,
        cond,
        datatype;
    if (op.unary) {
      operands.push({
        'type': op.type === "baseoperator" ? "unop" : "unopex",
        'datatype': right.datatype,
        'operator': op.text,
        'operand': right
      });
      return;
    }
    left = operands.pop();
    if (op.text !== ":") {
      if (op.text === "d" || op.text === "t") {
        datatype = "number";
      } else if (left.datatype === right.datatype) {
        datatype = left.datatype;
      } else if (left.datatype === "string" || right.datatype === "string") {
        datatype = "string";
      }
      operands.push({
        'type': op.type === "baseoperator" ? "binop" : "binopex",
        'datatype': datatype,
        'operator': op.text,
        'left': left,
        'right': right,
        'mods': op.mods,
        'label': op.label
      });
      return;
    }
    op = operators.pop();
    if (op.text !== "?") {
      return "Error: Expected ? but got " + op.text;
    }
    cond = operands.pop();
    operands.push({
      'type': "cond",
      'cond': cond,
      'left': left,
      'right': right,
      'datatype': left.datatype === right.datatype ? left.datatype : undefined
    });
  }

  function pushOperator(op) {
    var err;
    op.precedence = (op.unary ? UNARY_PRECEDENCE[op.text] : BINARY_PRECEDENCE[op.text]) || 0;
    while (operators[operators.length - 1].precedence >= op.precedence) {
      err = popOperator();
      if (err) {
        return err;
      }
    }
    operators.push(op);
  }

  function argListUntil(tok) {
    return tok === ',' || tok === ')';
  }

  function parseHelper() {
    var err, func, argCounts, minArgs, maxArgs, str, args, argTree, opener, closer, operand, varExp;
    popToken(s);
    if (!s.tok) {
      return "Error: Unrecognized token: " + s.s.split(" ", 1)[0];
    }
    while (s.tok.type === "whitespace") {
      popToken(s);
      if (!s.tok) {
        return "Error: Unrecognized token: " + s.s.split(" ", 1)[0];
      }
    }
    switch (s.tok.type) {
      case "function":
        func = s.tok.match[1];
        argCounts = ARG_COUNTS[func];
        if (argCounts === undefined) {
          return "Error: Unrecognized function: " + func;
        }
        if (Array.isArray(argCounts)) {
          minArgs = argCounts[0];
          maxArgs = argCounts[1];
        } else {
          minArgs = argCounts;
          maxArgs = argCounts;
        }
        args = [];
        while (s.tok && s.tok.text !== ')') {
          argTree = parseExpression(s, argListUntil);
          if (typeof argTree === "string") {
            return argTree;
          } // error
          args.push(argTree);
          if (!s.tok) {
            return "Error: Unterminated function: " + func;
          }
          if (!argListUntil(s.tok.text)) {
            return "Error: Expected ',' or ')' to continue/close '" + func + "(', but got '" + s.tok.text + "'";
          }
        }
        if (minArgs < 0) {
          minArgs = args.length;
        }
        if (isNaN(maxArgs) || maxArgs < 0) {
          maxArgs = args.length;
        }
        if (args.length < minArgs) {
          return "Error: Function '" + func + "' requires at least " + minArgs + " argument(s)";
        }
        if (args.length > maxArgs) {
          return "Error: Function '" + func + "' requires at most " + maxArgs + " argument(s)";
        }
        operands.push({
          'type': "function",
          'datatype': "number",
          'function': func,
          'args': args
        });
        return;
      case "number":
        operands.push({
          'type': "number",
          'datatype': "number",
          'value': parseFloat(s.tok.text)
        });
        return;
      case "variable":
        operands.push({
          'type': "variable",
          'value': s.tok.match[1]
        });
        return;
      case "quote":
        str = popString(s, s.tok.text);
        if (typeof str !== "string") {
          return "Error: Unterminated string";
        }
        operands.push({
          'type': "string",
          'datatype': "string",
          'value': str
        });
        return;
      case "opengroup":
        opener = s.tok.text;
        closer = CLOSERS[opener];
        operand = parseExpression(s, closer);
        if (typeof operand === "string") {
          return operand;
        } // error
        operands.push(operand);
        if (s.tok.text !== closer) {
          return "Error: Expected '" + closer + "' to close '" + opener + "', but got '" + s.tok.text + "'";
        }
        return;
      case "openvariable":
        varExp = parseExpression(s, "}");
        if (typeof varExp === "string") {
          return varExp;
        } // error
        if (s.tok.text !== "}") {
          return "Error: Expected '}' to close '${', but got '" + s.tok.text + "'";
        }
        operands.push({
          'type': "variable",
          'value': varExp
        });
        return;
      case "extoperator":
      case "baseoperator":
        if (!UNARY_PRECEDENCE[s.tok.text]) {
          return "Error: " + s.tok.text + " is not a unary operator";
        }
        s.tok.unary = true;
        err = pushOperator(s.tok);
        if (err) {
          return err;
        }
        return parseHelper();
    }
    return "Error: Unrecognized token: " + s.tok.text + (s.tok.type === "raw" ? s.s.split(" ", 1)[0] : "");
  }
  // if we were given a string, construct a state object
  if (typeof s === "string") {
    s = {
      's': s
    };
  }
  // push operators and operands to their respective stacks, building sub-ASTs in the operand stack as needed
  err = parseHelper();
  if (err) {
    return err;
  }
  for (popToken(s); s.tok && !untilCb(s.tok.text) && (until || s.tok.type !== "raw"); popToken(s)) {
    switch (s.tok.type) {
      case "extoperator":
      case "baseoperator":
        rollOperator = s.tok.text === "d" ? s.tok : null;
        err = pushOperator(s.tok);
        if (err) {
          return err;
        }
        if (rollOperator && s.s.charAt(0) === 'F') {
          operands.push({
            'type': "rollspec",
            'value': "F"
          });
          s.s = s.s.substring(1);
        } else if (s.tok.text === "t") {
          if (s.s.charAt(0) !== '[') {
            return "Error: 't' operator requires '[table]' argument";
          }
          m = s.s.match(/^\[([^'"$(\]][^\]]*)\]/);
          if (m) {
            tableExp = m[1];
            s.s = s.s.substring(m[0].length);
          } else {
            s.s = s.s.substring(1);
            tableExp = parseExpression(s, "]");
            if (typeof tableExp === "string") {
              return tableExp;
            } // error
            if (s.tok.text !== "]") {
              return "Error: Expected ']' to close 't[', but got '" + s.tok.text + "'";
            }
          }
          operands.push({
            'type': "tablename",
            'value': tableExp
          });
        } else {
          err = parseHelper();
          if (err) {
            return err;
          }
        }
        if (rollOperator) {
          m = s.s.match(/^[acdfhkloprs0-9<=>!]+/);
          if (m) {
            rollOperator.mods = m[0];
            s.s = s.s.substring(m[0].length);
          }
        }
        break;
      case "label":
        if (operators.length > 0 && operators[operators.length - 1].text === "d") {
          // set label on "d" operator instead of operand (e.g. "1d6[foo]" is "(1d6)[foo]", not "1d(6[foo])")
          operators[operators.length - 1].label = s.tok.match[1];
          break;
        }
        operand = operands.pop();
        if (operand) {
          operand.label = s.tok.match[1];
          operands.push(operand);
        }
        break;
    }
  }
  // no more input; collapse remaining operators and operands into a single AST
  while (operators.length > 1) {
    err = popOperator();
    if (err) {
      return err;
    }
  }
  return operands.pop();
}
function write(s) {
  _exportsLoaderTASTheAaronSheet2.default.debug("EXEXP:" + s);
}
function sendCommand(chunks, asts, evalResults, labels) {
  //infinite loop
  //TAS.debug("at sendCommand");
  //TAS.debug(chunks, asts, evalResults, labels);
  // constants
  var FUNCTION_FUNCTIONS = {
    'abs': Math.abs,
    'ceil': Math.ceil,
    'floor': Math.floor,
    'round': Math.round,
    'max': Math.max,
    'min': Math.min
  },
      BINARY_FUNCTIONS = {
    '||': function _(x, y) {
      return x || y;
    },
    '&&': function _(x, y) {
      return x && y;
    },
    '|': function _(x, y) {
      return x | y;
    },
    '^': function _(x, y) {
      return x ^ y;
    },
    '&': function _(x, y) {
      return x & y;
    },
    '=': function _(x, y) {
      return x == y;
    },
    '==': function _(x, y) {
      return x === y;
    },
    '!=': function _(x, y) {
      return x != y;
    },
    '>=': function _(x, y) {
      return x >= y;
    },
    '>': function _(x, y) {
      return x > y;
    },
    '<': function _(x, y) {
      return x < y;
    },
    '<=': function _(x, y) {
      return x <= y;
    },
    '<<': function _(x, y) {
      return x << y;
    },
    '>>': function _(x, y) {
      return x >> y;
    },
    '+': function _(x, y) {
      return x + y;
    },
    '-': function _(x, y) {
      return x - y;
    },
    '*': function _(x, y) {
      return x * y;
    },
    '/': function _(x, y) {
      return x / y;
    },
    '%': function _(x, y) {
      return x % y;
    },
    '**': Math.pow,
    'd': function d(x, y) {
      var retval = 0,
          i = 0;
      for (i = 0; i < x; i++) {
        retval += randomInteger(y);
      }
      return retval;
    }
  },
      UNARY_FUNCTIONS = {
    '!': function _(x) {
      return !x;
    },
    '~': function _(x) {
      return ~x;
    },
    '-': function _(x) {
      return -x;
    }
  },

  // local variables
  references = {},
      unevalRefs = [],
      evalReqs = [],
      i = 0,
      t,
      err,
      doSubstitution = false,
      label,
      newUneval = [],
      r,
      retval;
  // helper functions
  function lazyEval(t, labels, references, unevalRefs, evalReqs, force) {
    //alert(' at lazyEval, t: ' + t + ', t.type:'+t.type);
    var x,
        y,
        args = [],
        i = 0,
        forceSubtrees;
    if (t.label) {
      labels[t.label] = t;
    }
    switch (t.type) {
      case "number":
      case "rollspec":
        t.baseValid = true;
        return t;
      case "string":
        return t;
      case "tablename":
        if (typeof t.value !== "string") {
          x = lazyEval(t.value, labels, references, unevalRefs, evalReqs, true);
          if (typeof x === "string") {
            return x;
          } // error
          if (x.type === "number") {
            // number node; coerce to string
            x.value = String(x.value);
            x.type = "string";
          }
          if (x.type !== "string") {
            // unable to fully evaluate table name
            if (t.baseValid) {
              t.baseValid = false;
            }
            unevalRefs.push(t.value);
            return t;
          }
          // successfully evaluated table name
          t.value = x.value;
        }
        // if we got here, t.value is the name of a rollable table
        t.baseValid = true;
        return t;
      case "function":
        for (i = 0; i < t.args.length; i++) {
          x = lazyEval(t.args[i], labels, references, unevalRefs, evalReqs, true);
          if (typeof x === "string") {
            return x;
          } // error
          if (x.type === "string") {
            x.value = parseFloat(x.value);
            x.type = "number";
          }
          if (x.type !== "number") {
            // unable to fully evaluate argument
            if (t.baseValid) {
              t.baseValid = false;
            }
            return t;
          }
          args.push(x.value);
        }
        // successfully evaluated all arguments
        t.type = "number";
        t.datatype = "number";
        t.value = FUNCTION_FUNCTIONS[t["function"]].apply(args, args);
        for (i = 0; i < t.args.length; i++) {
          if (t.args[i].label) {
            labels[t.args[i].label] = t.args[i];
          }
        }
        delete t["function"];
        delete t.args;
        t.baseValid = true;
        return t;
      case "unop":
      case "unopex":
        force = force || t.type !== "unop";
        x = lazyEval(t.operand, labels, references, unevalRefs, evalReqs, force);
        if (typeof x === "string") {
          return x;
        } // error
        if (force) {
          if (x.type !== "number") {
            // unable to fully evaluate operand
            if (t.baseValid) {
              t.baseValid = false;
            }
            return t;
          }
          // successfully evaluated operand
          t.type = "number";
          t.datatype = "number";
          t.value = UNARY_FUNCTIONS[t.operator](x.value);
          delete t.operator;
          if (t.operand.label) {
            labels[t.operand.label] = x;
          }
          delete t.operand;
          t.baseValid = true;
        } else {
          t.baseValid = x.baseValid;
        }
        return t;
      case "binop":
      case "binopex":
        force = force || t.type !== "binop" || t.left.datatype === "string" || t.right.datatype === "string";
        forceSubtrees = force || t.operator === "d" || t.operator === "t";
        //TAS.debug('left is: ' + t.left + ', right is:' + t.right);
        x = lazyEval(t.left, labels, references, unevalRefs, evalReqs, forceSubtrees);
        y = lazyEval(t.right, labels, references, unevalRefs, evalReqs, forceSubtrees);
        //TAS.debug(x);
        //TAS.debug(y);
        force = true;
        /*********************didn't work until i commented out, now seems to have no effect ********************************/
        if (typeof x === "string") {
          //TAS.debug(x);
          return x;
        } // error
        if (typeof y === "string") {
          //TAS.debug(y);
          return y;
        } // error
        /****************************************************/
        if (force) {
          if (x.type !== "number" && x.type !== "string") {
            // unable to fully evaluate left operand
            if (t.baseValid) {
              t.baseValid = false;
            }
            return t;
          }
          if (y.type !== "number" && y.type !== "string" && y.type !== "rollspec" && y.type !== "tablename") {
            // unable to fully evaluate right operand
            if (t.baseValid) {
              t.baseValid = false;
            }
            return t;
          }
          if (y.type === "rollspec" && t.operator !== "d") {
            return "Rollspec operand is only compatible with 'd' operator";
          }
          if (t.operator === "t" && y.type !== "tablename") {
            return "'t' operator requires tablename operand";
          }
          // successfully evaluated both operands
          if (t.operator === "t" || t.operator === "d" && t.mods) {
            // operator is rollable table or is roll with mods; must submit to base system for evaluation
            evalReqs.push(t);
            return t;
          }
          //TAS.debug('about to call binary');
          t.value = BINARY_FUNCTIONS[t.operator](x.value, y.value);
          delete t.operator;
          if (t.left.label) {
            labels[t.left.label] = x;
          }
          delete t.left;
          if (t.right.label) {
            labels[t.right.label] = y;
          }
          delete t.right;
          t.type = typeof t.value === "string" ? "string" : "number";
          t.datatype = t.type;
          t.baseValid = t.datatype === "number";
        } else if (x.datatype === "number" && y.datatype === "number") {
          t.datatype = "number";
          t.baseValid = true;
        }
        return t;
      case "cond":
        x = lazyEval(t.cond, labels, references, unevalRefs, evalReqs, true);
        if (typeof x === "string") {
          return x;
        } // error
        if (x.type !== "number" && x.type !== "string") {
          // unable to fully evaluate condition
          t.baseValid = false;
          return t;
        }
        // successfully evaluated condition; replace t with t.left or t.right as appropriate
        y = x.value ? t.left : t.right;
        if (t.cond.label) {
          labels[t.cond.label] = x;
        }
        delete t.cond;
        delete t.left;
        delete t.right;
        _underscore2.default.each(y, function (k) {
          t[k] = y[k];
        });
        return lazyEval(t, labels, references, unevalRefs, evalReqs, force);
      case "variable":
        if (typeof t.value !== "string") {
          x = lazyEval(t.value, labels, references, unevalRefs, evalReqs, true);
          if (typeof x === "string") {
            return x;
          } // error
          if (x.type === "number") {
            // number node; coerce to string
            x.value = String(x.value);
            x.type = "string";
          }
          if (x.type !== "string") {
            // unable to fully evaluate variable name
            if (t.baseValid) {
              t.baseValid = false;
            }
            unevalRefs.push(t.value);
            return t;
          }
          // successfully evaluated variable name
          t.value = x.value;
        }
        // if we got here, t.value is the name of a variable
        if (labels[t.value] && (labels[t.value].type === "string" || labels[t.value].type === "number")) {
          // variable exists and has been fully evaluated
          t.type = labels[t.value].type;
          t.datatype = labels[t.value].datatype;
          t.baseValid = labels[t.value].baseValid;
          t.value = labels[t.value].value;
        } else {
          // variable not yet defined or not yet fully evaluated
          if (!references[t.value]) {
            references[t.value] = [];
          }
          references[t.value].push(t);
          if (t.baseValid) {
            t.baseValid = false;
          }
        }
        return t;
      default:
        return "Unknown node type: " + t.type;
    }
  }

  function hasUnevaluatedLabels(t) {
    var i = 0;
    // base types: fully evaluated
    if (t.type === "number" || t.type === "string" || t.type === "rollspec") {
      return false;
    }
    // if we got here, node is unevaluated
    if (t.label) {
      return true;
    }
    // node has no label; check children
    switch (t.type) {
      case "function":
        for (i = 0; i < t.args.length; i++) {
          if (hasUnevaluatedLabels(t.args[i])) {
            return true;
          }
        }
        return false;
      case "tablename":
      case "variable":
        if (typeof t.value === "string") {
          return false;
        }
        return hasUnevaluatedLabels(t.value);
      case "unop":
      case "unopex":
        return hasUnevaluatedLabels(t.operand);
      case "cond":
        if (hasUnevaluatedLabels(t.cond)) {
          return true;
        }
        //don't fall through
        if (hasUnevaluatedLabels(t.left)) {
          return true;
        }
        return hasUnevaluatedLabels(t.right);
      case "binop":
      case "binopex":
        if (hasUnevaluatedLabels(t.left)) {
          return true;
        }
        return hasUnevaluatedLabels(t.right);
    }
  }

  function flattenAST(t) {
    var retval;
    switch (t.type) {
      case "number":
      case "rollspec":
        retval = t.value || 0;
        break;
      case "tablename":
        retval = "[" + t.value + "]";
        break;
      case "unop":
        retval = "(" + t.operator + flattenAST(t.operand) + ")";
        break;
      case "binop":
        retval = "(" + flattenAST(t.left) + t.operator + flattenAST(t.right) + (t.mods || "") + ")";
        if (t.label && t.operator === "d") {
          retval += "[" + t.label + "]";
        }
        break;
      default:
        return "Unknown node type: " + t.type;
    }
    return retval;
  }

  function astToCmd(t) {
    if (t.type === "string") {
      return t.value;
    }
    var retval = flattenAST(t);
    return retval;
  }

  function reportError(err) {
    write("Error: " + err);
    return "";
  }
  //BEGIN
  // substitute in results of base evaluation
  for (i = 0; i < evalResults.length; i++) {
    t = evalResults[i][0];
    delete t.operator;
    delete t.left;
    delete t.right;
    t.type = "number";
    t.datatype = "number";
    t.value = evalResults[i][1];
    t.baseValid = true;
  }
  // traverse ASTs, collapsing as much as possible
  for (i = 0; i < asts.length; i++) {
    if (asts[i].baseValid) {
      continue;
    } // can be handled by base expression evaluator
    if (asts[i].type === "string" || asts[i].type === "number") {
      continue;
    } // tree is fully evaluated
    err = lazyEval(asts[i], labels, references, unevalRefs, evalReqs, false);
    if (typeof err === "string") {
      return reportError(err);
    }
  }
  // do variable substitution; repeat until we don't make any more progress
  doSubstitution = true;
  while (doSubstitution) {
    doSubstitution = false;
    // substitute in values for variables for which we already have names
    for (label in references) {
      if (references.hasOwnProperty(label)) {
        if (!labels[label]) {
          return reportError("Variable '" + label + "' not defined");
        }
        if (labels[label].type !== "string" && labels[label].type !== "number") {
          // variable exists but not yet evaluated; try to evaluate
          err = lazyEval(labels[label], labels, references, unevalRefs, evalReqs, true);
          if (typeof err === "string") {
            return reportError(err);
          }
        } else if (labels[label].type === "string" || labels[label].type === "number") {
          // variable fully evaluated; substitute it in
          for (i = 0; i < references[label].length; i++) {
            references[label][i].type = labels[label].type;
            references[label][i].datatype = labels[label].datatype;
            references[label][i].value = labels[label].value;
            references[label][i].baseValid = labels[label].baseValid;
          }
          delete references[label];
          doSubstitution = true;
        }
      }
    }
    // try to get names for variables and tables with unevaluated names
    while (unevalRefs.length > 0) {
      r = lazyEval(unevalRefs.shift(), labels, references, unevalRefs, evalReqs, true);
      if (typeof r === "string") {
        return reportError(err);
      }
      if (r.type === "string" || r.type === "number") {
        doSubstitution = true;
      } else {
        newUneval.push(r);
      }
    }
    unevalRefs = newUneval;
  }
  // flatten fully evaluated ASTs into strings and splice into chunks
  for (i = asts.length - 1; i >= 0; i--) {
    if (!asts[i].baseValid && asts[i].type !== "number" && asts[i].type !== "string") {
      continue;
    }
    if (unevalRefs.length > 0 & hasUnevaluatedLabels(asts[i])) {
      continue;
    }
    chunks.splice(i, 2, (chunks[i] || "") + astToCmd(asts.splice(i, 1)[0]) + (chunks[i + 1] || ""));
  }
  if (evalReqs.length > 0) {
    _exportsLoaderTASTheAaronSheet2.default.error("Cannot evaluate");
    return "";
  }
  if (asts.length > 0) {
    // need to finish evaluating some ASTs; recurse directly
    //TAS.debug("sendCommand (recurse), asts.length=" + asts.length + ", asts[0].baseValid=" + asts[0].baseValid + ", asts[0].type=" + asts[0].type);
    if (!(asts.length === 1 && asts[0].type === "binop")) {
      // HACK! minus (probably) in front; no math needed
      return sendCommand(chunks, asts, [], labels);
    }
  }
  // if we got here, we're done evaluating everything; submit results
  retval = chunks.join("");
  return retval;
}
function handleExpression(msg) {
  //replace spaces. replace "-" in front with "0-", replace "(-" with "(0-"
  //also replace leading + with '', and replace (+  with (0+
  var chunks = [],
      asts = [],
      cmd,
      state,
      ast;
  msg = msg.replace(/\s/g, '').replace(/^-/, '0-').replace(/\(-/g, '(0-').replace(/^\+/, '').replace(/\(\+/g, '(0+');
  cmd = msg;
  state = {
    's': cmd
  };
  //TAS.debug(msg);
  ast = parseExpression(state, null);
  //TAS.debug(ast);
  if (typeof ast === "string") {
    write("could not parse" + msg);
    return "";
  }
  asts.push(ast);
  state.s = state.tok ? state.tok.text + state.s : state.s;
  //  ((state.tok || {'text': ""}).text || "") + state.s;
  chunks.push(state.s);
  return sendCommand(chunks, asts, [], {});
}

_PFLog.PFConsole.log('   ExExp module loaded            ');
_PFLog.PFLog.modulecount++;

/***/ }),
/* 33 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
	value: true
});
exports.recalculate = recalculate;

var _underscore = __webpack_require__(2);

var _underscore2 = _interopRequireDefault(_underscore);

var _PFLog = __webpack_require__(0);

var _exportsLoaderTASTheAaronSheet = __webpack_require__(1);

var _exportsLoaderTASTheAaronSheet2 = _interopRequireDefault(_exportsLoaderTASTheAaronSheet);

var _PFConst = __webpack_require__(3);

var _PFConst2 = _interopRequireDefault(_PFConst);

var _PFInitiative = __webpack_require__(29);

var PFInitiative = _interopRequireWildcard(_PFInitiative);

var _PFSpellCasterClasses = __webpack_require__(21);

var PFSpellCasterClasses = _interopRequireWildcard(_PFSpellCasterClasses);

var _PFSkills = __webpack_require__(20);

var PFSkills = _interopRequireWildcard(_PFSkills);

var _PFAbilityScores = __webpack_require__(10);

var PFAbilityScores = _interopRequireWildcard(_PFAbilityScores);

var _PFSaves = __webpack_require__(18);

var PFSaves = _interopRequireWildcard(_PFSaves);

var _PFAttackGrid = __webpack_require__(7);

var PFAttackGrid = _interopRequireWildcard(_PFAttackGrid);

var _PFDefense = __webpack_require__(12);

var PFDefense = _interopRequireWildcard(_PFDefense);

var _PFHealth = __webpack_require__(17);

var PFHealth = _interopRequireWildcard(_PFHealth);

var _PFChecks = __webpack_require__(16);

var PFChecks = _interopRequireWildcard(_PFChecks);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var events = {
	conditionEventsEither: {
		"change:condition-grappled": [updateGrapple, PFAttackGrid.applyConditions],
		"change:condition-pinned": [updatePin, PFDefense.applyConditions],
		"change:condition-wounds change:has_endurance_feat change:wounds_gritty_mode": [PFChecks.applyConditions, PFSaves.applyConditions, PFAttackGrid.applyConditions, PFDefense.applyConditions]
	},
	conditionEventsPlayer: {
		"change:condition-Sickened": [PFAttackGrid.updateDamage, PFChecks.applyConditions, PFSaves.applyConditions, PFAttackGrid.applyConditions],
		"change:condition-stunned": [PFDefense.updateDefenses, PFDefense.applyConditions],
		"change:condition-Flat-Footed": [PFDefense.updateDefenses],
		"change:condition-deafened": [PFInitiative.updateInitiative, PFSpellCasterClasses.applyConditions],
		"change:condition-fatigued": [PFAbilityScores.applyConditions],
		"change:condition-entangled": [PFAbilityScores.applyConditions, PFAttackGrid.applyConditions],
		"change:condition-drained": [updateDrainCheckbox, PFHealth.updateMaxHPLookup, PFChecks.applyConditions, PFSaves.applyConditions, PFAttackGrid.applyConditions, PFDefense.applyConditions],
		"change:condition-fear": [PFChecks.applyConditions, PFSaves.applyConditions, PFAttackGrid.applyConditions],
		"change:condition-blinded": [PFChecks.applyConditions, PFDefense.applyConditions],
		"change:condition-cowering": [PFDefense.applyConditions],
		"change:condition-invisible": [PFDefense.updateDefenses, PFDefense.applyConditions, PFAttackGrid.applyConditions],
		"change:condition-dazzled": [PFAttackGrid.applyConditions],
		"change:condition-prone": [PFAttackGrid.applyConditions],
		"change:condition-Helpless": [PFAbilityScores.applyConditions]
	}
};

/* updateGrapple Ensures Grapple and Pin are mutually exclusive */
function updateGrapple() {
	getAttrs(["condition-Pinned", "condition-Grappled"], function (values) {
		if (values["condition-Pinned"] !== "0" && values["condition-Grappled"] !== "0") {
			setAttrs({
				"condition-Pinned": "0"
			});
		} else {
			//user hit either pinned and it undid grapple, or hit grapple first time.
			PFAbilityScores.applyConditions();
		}
	});
}
/* updatePin Ensures Grapple and Pin are mutually exclusive */
function updatePin() {
	getAttrs(["condition-Pinned", "condition-Grappled"], function (values) {
		if (values["condition-Pinned"] !== "0" && values["condition-Grappled"] !== "0") {
			setAttrs({
				"condition-Grappled": "0"
			});
		} else {
			//user hit grapple and it  undid pinned, or hit pinned first time.
			PFAbilityScores.applyConditions();
		}
	});
}
/* updates drain for condition status panel */
function updateDrainCheckbox(callback, silently, eventInfo) {
	getAttrs(["condition-Drained", "condition_is_drained"], function (v) {
		var levels = parseInt(v["condition-Drained"], 10) || 0,
		    drained = parseInt(v["condition_is_drained"], 10) || 0;
		if (levels !== 0 && drained === 0) {
			setAttrs({
				"condition_is_drained": "1"
			}, _PFConst2.default.silentParams);
		} else if (levels === 0 && drained !== 0) {
			setAttrs({
				"condition_is_drained": "0"
			}, _PFConst2.default.silentParams);
		}
	});
}
function recalculate(callback, silently, oldversion) {
	var done = _underscore2.default.once(function () {
		_exportsLoaderTASTheAaronSheet2.default.debug("Leaving PFConditions.recalculate");
		if (typeof callback === "function") {
			callback();
		}
	});
	updateDrainCheckbox();
	PFAbilityScores.applyConditions(done);
}
function registerEventHandlers() {
	_underscore2.default.each(events.conditionEventsPlayer, function (functions, eventToWatch) {
		_underscore2.default.each(functions, function (methodToCall) {
			on(eventToWatch, _exportsLoaderTASTheAaronSheet2.default.callback(function eventConditionEventsPlayer(eventInfo) {
				_exportsLoaderTASTheAaronSheet2.default.debug("caught " + eventInfo.sourceAttribute + " event: " + eventInfo.sourceType);
				if (eventInfo.sourceType === "player" || eventInfo.sourceType === "api") {
					methodToCall(null, null, eventInfo);
				}
			}));
		});
	});
	_underscore2.default.each(events.conditionEventsEither, function (functions, eventToWatch) {
		_underscore2.default.each(functions, function (methodToCall) {
			on(eventToWatch, _exportsLoaderTASTheAaronSheet2.default.callback(function eventConditionEventsEither(eventInfo) {
				_exportsLoaderTASTheAaronSheet2.default.debug("caught " + eventInfo.sourceAttribute + " event: " + eventInfo.sourceType);
				methodToCall(null, null, eventInfo);
			}));
		});
	});
	on("change:Perception-cond", _exportsLoaderTASTheAaronSheet2.default.callback(function eventUpdateSkillPerceptionCond(eventInfo) {
		_exportsLoaderTASTheAaronSheet2.default.debug("caught " + eventInfo.sourceAttribute + " event: " + eventInfo.sourceType);
		PFSkills.verifyHasSkill("Perception", function (hasSkill) {
			if (hasSkill) {
				PFSkills.updateSkill("Perception", eventInfo);
			} else {
				PFSkills.updateSkill("CS-Perception", eventInfo);
			}
		});
	}));
}
registerEventHandlers();
_PFLog.PFConsole.log('   PFConditions module loaded     ');
_PFLog.PFLog.modulecount++;

/***/ }),
/* 34 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
	value: true
});
exports.migrate = migrate;
exports.recalculate = recalculate;

var _underscore = __webpack_require__(2);

var _underscore2 = _interopRequireDefault(_underscore);

var _PFLog = __webpack_require__(0);

var _exportsLoaderTASTheAaronSheet = __webpack_require__(1);

var _exportsLoaderTASTheAaronSheet2 = _interopRequireDefault(_exportsLoaderTASTheAaronSheet);

var _SWUtils = __webpack_require__(4);

var SWUtils = _interopRequireWildcard(_SWUtils);

var _PFConst = __webpack_require__(3);

var _PFConst2 = _interopRequireDefault(_PFConst);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

/* updateMythicPathHP
* Updates total at bottom of Mythic Path Information grid */
function updateMythicPathHP(callback, silently) {
	var done = _underscore2.default.once(function () {
		if (typeof callback === "function") {
			callback();
		}
	});
	getAttrs(["mythic-tier", "mythic-hp", "total-mythic-hp"], function (values) {
		var tot = 0,
		    currTot = 0,
		    setter = {},
		    params = {};
		try {
			tot = (parseInt(values["mythic-tier"], 10) || 0) * (parseInt(values["mythic-hp"], 10) || 0);
			currTot = parseInt(values["total-mythic-hp"], 10) || 0;
			//TAS.debug("tot=" + tot + ", currTot=" + currTot);
			if (currTot !== tot) {
				setter["total-mythic-hp"] = tot;
			}
		} catch (err) {
			_exportsLoaderTASTheAaronSheet2.default.error("PFMythic.updateTierMythicPower error", err);
		} finally {
			if (_underscore2.default.size(setter) > 0) {
				if (silently) {
					params = _PFConst2.default.silentParams;
				}
				setAttrs(setter, params, done);
			} else {
				done();
			}
		}
	});
}
/* updateTierMythicPower sets tier mp*/
function updateTierMythicPower(callback, silently) {
	var done = _underscore2.default.once(function () {
		if (typeof callback === "function") {
			callback();
		}
	});
	//TAS.debug("entered updateTierMythicPower");
	getAttrs(["tier-mythic-power", "mythic-tier"], function (values) {
		var totalTier,
		    curr,
		    setter = {},
		    params = {},
		    finished = false;
		try {
			totalTier = 3 + 2 * (parseInt(values["mythic-tier"], 10) || 0);
			curr = parseInt(values["tier-mythic-power"], 10) || 0;
			//TAS.debug("totalTier=" + totalTier + ", curr=" + curr);
			if (curr !== totalTier) {
				setter["tier-mythic-power"] = totalTier;
			}
		} catch (err) {
			_exportsLoaderTASTheAaronSheet2.default.error("PFMythic.updateTierMythicPower error", err);
		} finally {
			if (_underscore2.default.size(setter) > 0) {
				if (silently) {
					params = _PFConst2.default.silentParams;
				}
				setAttrs(setter, params, done);
			} else {
				done();
			}
		}
	});
}
function migrate(callback) {
	if (typeof callback === "function") {
		callback();
	}
}
function recalculate(callback, silently, oldversion) {
	var done = _underscore2.default.once(function () {
		_exportsLoaderTASTheAaronSheet2.default.debug("Leaving PFMythic.recalculate");
		if (typeof callback === "function") {
			callback();
		}
	});
	getAttrs(["mythic-adventures-show"], function (v) {
		try {
			if (parseInt(v["mythic-adventures-show"], 10) === 1) {
				updateMythicPathHP(done, silently);
				updateTierMythicPower();
			} else {
				done();
			}
		} catch (err2) {
			_exportsLoaderTASTheAaronSheet2.default.error("PFMythic.recalculate", err2);
			done();
		}
	});
}
function registerEventHandlers() {
	//mythic path and power
	on("change:mythic-tier change:mythic-hp", _exportsLoaderTASTheAaronSheet2.default.callback(function eventupdateMythicPathHP(eventInfo) {
		_exportsLoaderTASTheAaronSheet2.default.debug("caught " + eventInfo.sourceAttribute + " event: " + eventInfo.sourceType);
		if (eventInfo.sourceType === "player" || eventInfo.sourceType === "api") {
			updateMythicPathHP();
			updateTierMythicPower();
		}
	}));
	//mythic path
	on("change:mythic-hp", _exportsLoaderTASTheAaronSheet2.default.callback(function eventUpdateTierMythicPower(eventInfo) {
		_exportsLoaderTASTheAaronSheet2.default.debug("caught " + eventInfo.sourceAttribute + " event: " + eventInfo.sourceType);
		if (eventInfo.sourceType === "player" || eventInfo.sourceType === "api") {
			updateMythicPathHP();
		}
	}));
	on("change:misc-mythic-power change:tier-mythic-power", _exportsLoaderTASTheAaronSheet2.default.callback(function eventUpdateMythicPower(eventInfo) {
		_exportsLoaderTASTheAaronSheet2.default.debug("caught " + eventInfo.sourceAttribute + " event: " + eventInfo.sourceType);
		if (eventInfo.sourceType === "player" || eventInfo.sourceType === "api" || eventInfo.sourceType === "sheetworker" && eventInfo.sourceAttribute === 'tier-mythic-power') {
			SWUtils.updateRowTotal(["mythic-power_max", "tier-mythic-power", "misc-mythic-power"]);
		}
	}));
}
registerEventHandlers();
_PFLog.PFConsole.log('   PFMythic module loaded         ');
_PFLog.PFLog.modulecount++;

/***/ }),
/* 35 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
	value: true
});
exports.setToNPC = setToNPC;
exports.migrate = migrate;
exports.recalculate = recalculate;

var _underscore = __webpack_require__(2);

var _underscore2 = _interopRequireDefault(_underscore);

var _PFLog = __webpack_require__(0);

var _exportsLoaderTASTheAaronSheet = __webpack_require__(1);

var _exportsLoaderTASTheAaronSheet2 = _interopRequireDefault(_exportsLoaderTASTheAaronSheet);

var _PFConst = __webpack_require__(3);

var _PFConst2 = _interopRequireDefault(_PFConst);

var _PFMigrate = __webpack_require__(6);

var PFMigrate = _interopRequireWildcard(_PFMigrate);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

/* setToNPC when first setting a sheet , set other default config settings
* also switch to NPC page for when user leaves ocnfig page.
*/
function setToNPC(callback, eventInfo) {
	var done = _underscore2.default.once(function () {
		if (typeof callback === "function") {
			callback();
		}
	});
	getAttrs(["npc-hd", "PFSheet_Version", "npc-hd-num", "level", "hp", "hp_max", "is_newsheet", "npc-type"], function (v) {
		//determine if this is a new sheet. if so set default config choices:
		if (parseInt(v.is_newsheet, 10) || (parseInt(v.PFSheet_Version, 10) || 0) === 0 || !(v["npc-type"] || parseInt(v['npc-hd'], 10) || parseInt(v['npc-hd-num'], 10) || parseInt(v['level'], 10) || parseInt(v['hp'], 10) || parseInt(v['hp_max'], 10))) {
			setAttrs({ 'auto_calc_hp': 1, 'autohp_percent': 1, 'maxhp_lvl1': 0, 'normal_macro_show': 1, 'max-dex-source': 3,
				'both_whisper_show': 1, 'use_traits': 0, 'use_racial_traits': 0, 'tab': 8, 'is_v1': 1 }, _PFConst2.default.silentParams, done);
		} else {
			done();
		}
	});
}
function migrate(callback) {
	PFMigrate.migrateNPC(callback);
}
function recalculate(callback, silently, oldversion) {
	var done = _underscore2.default.once(function () {
		_exportsLoaderTASTheAaronSheet2.default.debug("leaving PFNPC.recalculate");
		if (typeof callback === "function") {
			callback();
		}
	});
	migrate(done);
}
function registerEventHandlers() {
	on("change:is_npc", _exportsLoaderTASTheAaronSheet2.default.callback(function eventSetIsNPCFlag(eventInfo) {
		_exportsLoaderTASTheAaronSheet2.default.debug("caught " + eventInfo.sourceAttribute + " event: " + eventInfo.sourceType);
		if (eventInfo.sourceType === "player" || eventInfo.sourceType === "api") {
			getAttrs(['is_npc'], function (v) {
				if (parseInt(v.is_npc, 10) === 1) {
					setToNPC(eventInfo);
				}
			});
		}
	}));
}
registerEventHandlers();
_PFLog.PFConsole.log('   PFNPC module loaded            ');
_PFLog.PFLog.modulecount++;

/***/ }),
/* 36 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
	value: true
});
exports.importFromCompendium = importFromCompendium;

var _underscore = __webpack_require__(2);

var _underscore2 = _interopRequireDefault(_underscore);

var _PFLog = __webpack_require__(0);

var _exportsLoaderTASTheAaronSheet = __webpack_require__(1);

var _exportsLoaderTASTheAaronSheet2 = _interopRequireDefault(_exportsLoaderTASTheAaronSheet);

var _SWUtils = __webpack_require__(4);

var SWUtils = _interopRequireWildcard(_SWUtils);

var _PFConst = __webpack_require__(3);

var _PFConst2 = _interopRequireDefault(_PFConst);

var _PFDB = __webpack_require__(26);

var _PFDB2 = _interopRequireDefault(_PFDB);

var _PFMigrate = __webpack_require__(6);

var PFMigrate = _interopRequireWildcard(_PFMigrate);

var _PFUtils = __webpack_require__(5);

var PFUtils = _interopRequireWildcard(_PFUtils);

var _PFSize = __webpack_require__(19);

var PFSize = _interopRequireWildcard(_PFSize);

var _PFSkills = __webpack_require__(20);

var PFSkills = _interopRequireWildcard(_PFSkills);

var _PFAbilityScores = __webpack_require__(10);

var PFAbilityScores = _interopRequireWildcard(_PFAbilityScores);

var _PFBuffs = __webpack_require__(24);

var PFBuffs = _interopRequireWildcard(_PFBuffs);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var npcCompendiumAttributesPlayer = ["npc-spellike-ability-text", "npc-spells-known-text", "character_name", "cr_compendium", "xp_compendium", "alignment", "size_compendium", "type_compendium", "init_compendium", "senses_compendium", "npc-aura", "ac_compendium", "npc_hp_compendium", "fort_compendium", "ref_compendium", "will_compendium", "dr_compendium", "sr_compendium", "npc-defensive-abilities", "immunities", "resistances", "weaknesses", "speed_compendium", "space_compendium", "reach_compendium", "npc-melee-attacks-text", "npc-ranged-attacks-text", "npc-special-attacks", "str_compendium", "dex_compendium", "con_compendium", "int_compendium", "wis_compendium", "cha_compendium", "bab_compendium", "cmb_compendium", "cmd_compendium", "class_compendium", "npc-feats-text", "skills_compendium", "racial_mods_compendium", "environment", "organization", "other_items_treasure", "languages", "SQ_compendium", "content_compendium"];

/* ******************************** PARSING ******************************** */

/** returns number from a string, first looks at end of string, then beginning, then anywhere in middle
 * so it works with both compendium (number at end) and SRD ("init " number at beginning) or just a string number
 *@param {string} initstring from the compendium entry
 *@returns {int} the initiative modifier
 */
function getNPCInit(initstring) {
	var numberInit;
	if (/[\-\+]{0,1}\d+$/.test(initstring)) {
		numberInit = parseInt(initstring.match(/[\-\+]{0,1}\d+$/), 10);
	} else if (/^(Init\s){0,1}[\-\+]{0,1}\d+/i.test(initstring)) {
		numberInit = parseInt(initstring.match(/[\-\+]{0,1}\d+$/), 10);
	} else if (/^[\-\+]{0,1}\d+$/.test(initstring)) {
		numberInit = parseInt(initstring.match(/^[\-\+]{0,1}\d+$/), 10);
	} else if (/[\-\+]{0,1}\d+/.test(initstring)) {
		numberInit = parseInt(initstring.match(/[\-\+]{0,1}\d+/), 10);
	}
	if (!isNaN(numberInit)) {
		return numberInit;
	}
	return 0;
}
/**getAbilityAndMod- returns the number and mod for an ability
 * @param {string} numberAsString the ability score -a number in string form
 * @returns {base: number or '-', mod:number}
 */
function getAbilityAndMod(numberAsString) {
	var base = parseInt(numberAsString, 10),
	    mod = 0;
	if (!isNaN(base)) {
		mod = Math.floor((base - 10) / 2);
		return {
			"base": base,
			"mod": mod
		};
	}
	if (/dash|\-|8212|—/i.test(numberAsString)) {
		return {
			"base": "-",
			"mod": 0
		};
	}
	return {
		"base": 10,
		"mod": 0
	};
}
/** Splits string into array, based on commas (ignoring commas between parenthesis) 
 * @param {string} featstring 
 * @returns {[string]} feats
 */
function parseFeats(featstring) {
	return SWUtils.splitByCommaIgnoreParens(featstring);
}

/** parseNPChp - parses statblock hp string such as 203 (14d10+126)
 * @param {string} hpstring - string format: "15 (3d8 + 2d8 + 4) Fast Healing 5"  can have multiple xdy, and any string left after ) is considered healing note.
 * @param {int} abilityMod: number representing ability score mod (normally CON-mod)
 * @returns {object} {hp:0,hdie1:0,hdice1:0,hdie2:0,hdice2:0,misc:0,heal:""}
 *  where hdie1 d hdice1 is racial, and 2 is class, can go up to n classes
 */
function parseNPChp(hpstring, abilityMod) {
	var newHP = 0,
	    plus = 0,
	    matches,
	    hparray = {
		hp: 0,
		hdie1: 0,
		hdice1: 0,
		basehp: 0,
		misc: 0,
		heal: ""
	},
	    totalAbility = 0,
	    matchessub,
	    i = 0,
	    tempstr = "",
	    tempHD = 0,
	    tempHdn = 0,
	    tempmisc = 0,
	    calcHP = 0;
	abilityMod = abilityMod || 0;
	if (/^hp\s/i.test(hpstring)) {
		hpstring = hpstring.slice(3);
	}
	//TAS.debug"parseNPChp", hpstring, abilityMod);
	newHP = parseInt(hpstring, 10);
	if (!isNaN(newHP)) {
		hparray.hp = newHP;
		if (hpstring.indexOf("(") > 0) {
			hpstring = hpstring.slice(hpstring.indexOf("(") + 1);
		}
		matches = hpstring.match(/\d+d\d+/ig);
		if (matches) {
			for (i = 0; i < matches.length; i++) {
				tempstr = matches[i];
				matchessub = tempstr.match(/(\d+)d(\d+)/i);
				if (matchessub && matchessub[1] && matchessub[2]) {
					tempHdn = parseInt(matchessub[1], 10) || 0;
					tempHD = parseInt(matchessub[2], 10) || 0;
					if (i > 0 && tempHD === 8 && hparray.hdie1 !== 8) {
						hparray["hdice" + (i + 1)] = hparray.hdice1;
						hparray["hdie" + (i + 1)] = hparray.hdie1;
						hparray.hdice1 = tempHdn;
						hparray.hdie1 = tempHD;
					} else {
						hparray["hdice" + (i + 1)] = tempHdn;
						hparray["hdie" + (i + 1)] = tempHD;
					}
				}
			}
		}
		//skip to next
		if (i > 0) {
			i--;
			hpstring = hpstring.slice(hpstring.indexOf(matches[i]) + matches[i].length);
		}
		// some entries have "plus" instead of "+"
		matches = hpstring.match(/\s*?([+\-]\s*\d+)\s*?|\s*?plus\s(\d+)\s*?/);
		if (matches) {
			hpstring = hpstring.slice(matches.index + matches[0].length);
			if (matches[1]) {
				plus = parseInt(matches[1].replace(/\s/g, ''), 10) || 0;
			} else if (matches[2]) {
				plus = parseInt(matches[2], 10) || 0;
			}
		}
		//bug in compendium: no minus sign, so adds mod to end of die:
		//  instead of 1d8-1 it's 1d81, 1 dee 81 !
		// see Flying Squirrel
		if (!matches && hparray.hdie1 > 10 && (abilityMod < 0 || hparray.hdie1 !== 12 && hparray.hdie1 !== 20)) {
			plus = hparray.hdie1 % 10;
			plus = -1 * plus;
			hparray.hdie1 = Math.floor(hparray.hdie1 / 10);
			_exportsLoaderTASTheAaronSheet2.default.warn("negative in compendium: plus is -1 * hit die mod 10");
		}
		totalAbility = abilityMod * hparray.hdice1;
		tempmisc = plus - totalAbility;
		//TAS.debug"plus "+plus +" minus con:"+totalAbility+" = "+ tempmisc);
		//misc is any bonus to the dice that is not due to CON modifier
		hparray.misc = tempmisc;
		if (hpstring.indexOf(")") >= 0) {
			hpstring = hpstring.slice(hpstring.indexOf(")") + 1);
		}
		if (hpstring.indexOf(";") === 0) {
			hpstring = hpstring.slice(1);
		}
		if (hpstring.length > 0) {
			hparray.heal = hpstring;
		}
	}
	//set the base hp to only the hd average, so will be less than what is in statblock
	hparray.basehp = PFUtils.getAvgHP(hparray.hdice1, hparray.hdie1);
	//check total, if does not match, add more
	calcHP = PFUtils.getAvgHP(hparray.hdice1, hparray.hdie1) + tempmisc + abilityMod * hparray.hdice1;
	if (calcHP && calcHP !== newHP) {
		//wtf?
		_exportsLoaderTASTheAaronSheet2.default.warn("parseNPChp, hp not adding right, should be:" + newHP + " but getNPCHP returns " + calcHP, hparray);
		hparray.misc += newHP - calcHP;
	}

	//check:
	//basehp=newHP-abilityMod
	return hparray;
}
/** parseNPCAC - parses AC string from statblock
 * @param {string} acstring - format: "24, Touch 24, Flat-footed 16 (+6 Deflection, +7 Dex, +1 Dodge, +1 Armor, +1 Shield, +1 Size, +6 Natural) some note can go here"
 * can start with "AC " or not.
 * if it doesn't add up then the bonus will be added to misc.
 * (others include: Luck, Sacred/Profane, Circumstance, Enhancement, Insight, Morale) - these ALL go to CMD too (and dodge, deflection).
 * @param {string} cmdStr string for cmd , just checks for a number in the string
 * @param {int} abilityMod - to apply, usually dex.
 * @param {int} sizeMod - ac mod due to size.
 * @returns {ac:10,touch:10,ff:10,armor:0,shield:0,deflect:0,dex:0,dodge:0,natural:0,misc:0,note:,size:0,acbuff:0,altability:""}
 */
function parseNPCAC(acstring, cmdStr, abilityMod, sizeMod) {
	var matches,
	    tempnum = 0,
	    tempstr = '',
	    acMap = {
		ac: 10,
		touch: 10,
		ff: 10,
		armor: 0,
		shield: 0,
		deflect: 0,
		dex: 0,
		dodge: 0,
		natural: 0,
		misc: 0,
		note: "",
		size: 0,
		altability: "",
		acbuff: 0,
		uncanny: 0,
		cmd: 10,
		notes: '',
		cmdnotes: ''
	};
	abilityMod = abilityMod || 0;
	sizeMod = sizeMod || 0;
	//TAS.debug"parseNPCAC: string:" + acstring + ", ability:" + abilityMod + ", size:" + sizeMod);
	try {
		if (/^ac\s/i.test(acstring)) {
			acstring = acstring.slice(3);
		}
		acMap.ac = parseInt(acstring, 10) || 0;

		matches = cmdStr.match(/(\d+)/); //get first match
		if (matches && matches[1]) {
			//TAS.debug("getting cmd matches is cmd is : "+matches[1],matches);
			acMap.cmd = parseInt(matches[1], 10) || 0;
			tempstr = cmdStr.slice(matches.index + matches[0].length);
			if (tempstr) {
				tempstr = SWUtils.trimBoth(tempstr);
				acMap.cmdnotes = tempstr;
			}
		}

		//get other AC totals
		matches = acstring.match(/Touch\s*?(\d+)/i);
		if (matches && matches[1]) {
			acMap.touch = parseInt(matches[1], 10);
		}
		matches = acstring.match(/Flat\-footed\s*?(\d+)/i);
		if (matches && matches[1]) {
			acMap.ff = parseInt(matches[1], 10);
		}
		//get modifiers compendium has all negatives as "1" intead of "-1"
		matches = acstring.match(/([+\-]??\d+)\s*?Deflect[,\i\s]/i);
		if (matches && matches[1]) {
			acMap.deflect = parseInt(matches[1], 10);
		}
		matches = acstring.match(/([+\-]??\d+)\s*?Nat[,u\s]/i);
		if (matches && matches[1]) {
			acMap.natural = parseInt(matches[1], 10);
		}
		matches = acstring.match(/([+\-]??\d+)\s*?Dodge/i);
		if (matches && matches[1]) {
			acMap.dodge = parseInt(matches[1], 10);
		}
		matches = acstring.match(/([+\-]??\d+)\s*?Size/i);
		if (matches && matches[1]) {
			acMap.size = parseInt(matches[1], 10);
		}
		//compendium size wrong: missing minus sign.
		// see Marilith
		if (acMap.size !== sizeMod) {
			acMap.size = sizeMod;
		}
		matches = acstring.match(/([+\-]??\d+)\s*?armor/i);
		if (matches && matches[1]) {
			acMap.armor = parseInt(matches[1], 10);
		}
		matches = acstring.match(/([+\-]??\d+)\s*?shield/i);
		if (matches && matches[1]) {
			acMap.shield = parseInt(matches[1], 10);
		}
		matches = acstring.match(/\)\s*?(.*)/);
		if (matches && matches[1]) {
			acMap.note = matches[1];
		}
		//get ability modifier, should be Dex by default.
		matches = acstring.match(/([+\-]??\d+)\s*?Dex/i);
		if (matches && matches[1]) {
			acMap.dex = parseInt(matches[1], 10) || 0;
			//if different then set, compendium error no minus
			// see Fire Giant.
			if (abilityMod !== acMap.dex) {
				acMap.dex = abilityMod;
			}
		} else {
			matches = acstring.match(/([+\-]??\d+)\s*?(Wis|Int|Str|Con|Cha)/i);
			if (matches && matches[1] && matches[2]) {
				acMap.dex = parseInt(matches[1], 10) || 0;
				//should not happen anymore since 6th printing of PRD they removed abilities that change ability to AC, now
				// just add dodge instead.
				acMap.altability = matches[2].toUppercase();
			}
		}
		//check total for any other (untyped, Luck, Sacred/Profane, Circumstance, Enhancement, Insight, Morale)
		//touch - if touch does not add up put difference in misc. (AC not match we'll put in a buff row)
		// we need to track a seperate ac misc buff/penalty. we can put it in buffs.
		tempnum = acMap.dodge + acMap.dex + acMap.deflect + acMap.size + 10;
		if (acMap.touch !== tempnum) {
			acMap.misc = acMap.touch - tempnum;
		}
		//if AC does not add up, even including misc found above, then put it in ac buff row.
		tempnum = acMap.armor + acMap.shield + acMap.dodge + acMap.dex + acMap.natural + acMap.deflect + acMap.size + acMap.misc + 10;
		if (acMap.ac !== tempnum) {
			acMap.acbuff = acMap.ac - tempnum;
		}
		//check for not caught flat footed
		if (acMap.ac === acMap.ff && (acMap.dex > 0 || acMap.dodge > 0)) {
			acMap.uncanny = 1;
		}
	} catch (err) {
		_exportsLoaderTASTheAaronSheet2.default.error("parseNPCAC", err);
	} finally {
		return acMap;
	}
}
/* parseSpeed -returns object with speeds {land:base,fly:xx,swim:xx} etc*/
function parseSpeed(speedstr) {
	var speeds = speedstr.split(/,\s*/),
	    retobj;
	retobj = _underscore2.default.reduce(speeds, function (memo, speedComponent, idx) {
		var matches,
		    speedNum = 0;
		try {
			if (idx === 0) {
				speedNum = parseInt(speedComponent.match(/(\d+)/)[1], 10) || 0;
				if (speedNum) {
					memo["land"] = speedNum;
				}
			} else {
				matches = speedComponent.match(/([\w]+)\s*(\d+)/);
				if (matches) {
					speedNum = parseInt(matches[2], 10) || 0;
					if (speedNum) {
						memo[matches[1].toLowerCase()] = speedNum;
						if (/fly/i.test(matches[1])) {
							matches = speedComponent.match(/\(([\w]+)\)/);
							if (matches && matches[1].length > 0) {
								memo["flyability"] = matches[1];
							}
						}
					}
				}
			}
		} catch (err) {
			_exportsLoaderTASTheAaronSheet2.default.error("parseSped", err);
		} finally {
			return memo;
		}
	}, {});
	return retobj;
}
/* getAtkNameFromStr get names of an attack or special attack
 * { Name :(full str up to first parens) , abilityName (without pluses the base ability ), basename (ability name lower case no spces)}
 * for instance: Mwk Longsword +6/+1 would be : {name:Mwk longsword +6/+1, abilityName:Longsword, basename: longsword}
 */
function getAtkNameFromStr(abilitystr) {
	var matches = abilitystr.match(/^\s*([^\(]+)/),
	    name = '',
	    abilityName = '',
	    basename = '';
	if (matches && matches[1]) {
		name = matches[1];
		name = SWUtils.trimBoth(name);
		abilityName = name.replace(/\d+d\d+|\-\d+|\+|\d+|\//g, '');
		abilityName = SWUtils.trimBoth(abilityName);
		abilityName = abilityName[0].toUpperCase() + abilityName.slice(1);
		basename = abilityName.toLowerCase();
		basename = basename.replace(/ray|cone|aura|mwk/ig, '');
		basename = basename.replace(/\s+/g, '');
	}
	return {
		'name': name,
		'basename': basename,
		'abilityName': abilityName
	};
}
/*parseReach - parses reach string from compendium or statblock
 * returns the default reach, rest of the string (if any), and an array of exceptions and reaches if any.
 *  (for instance, diplodacus
 * @returns = {reach:number (5,10,15 etc), reachNotes:"rest of string", reachExceptions:[['Bite':10],['Claw':5]]}
 */
function parseReach(reachStr) {
	var numerator = 0,
	    denominator = 1,
	    tempInt = 0,
	    tempFloat = 0.0,
	    tempstr,
	    restOf = "",
	    matches,
	    exceptionstr = "",
	    tempArray = [],
	    reachExceptions = [],
	    retobj = {
		reach: 5,
		reachNotes: "",
		reachExceptions: []
	};
	if (!reachStr) {
		return null;
	}
	reachStr = reachStr.replace(/^\s+|\s+$/g, '');
	if (reachStr.slice(0, 5) === "2-1/2" || reachStr.slice(0, 4) === "21/2") {
		retobj.reach = 2.5;
		exceptionstr = reachStr.slice(5);
	} else {
		matches = reachStr.match(/^\s*(\d*\.?\d*)?\s*(.*)\s*$/);
		if (matches) {
			tempFloat = parseFloat(matches[1]);
			restOf = matches[2];
			if (!/\(|;/.test(reachStr) && /with/i.test(reachStr)) {
				retobj.reach = 5;
				exceptionstr = reachStr;
			} else {
				retobj.reach = tempFloat;
			}
			if (restOf && restOf.length > 0) {
				exceptionstr = restOf;
			}
		} else {
			exceptionstr = reachStr;
		}
	}
	if (exceptionstr) {
		exceptionstr = exceptionstr.replace('(', '').replace(')', '').replace(';', '').replace(/ft\./ig, '').replace(/ft/ig, '').replace(/^\s+|\s+$/g, '');
	}
	if (exceptionstr) {
		retobj.reachNotes = exceptionstr;
		tempstr = exceptionstr.toLowerCase().replace(/with\s/ig, '');
		tempArray = tempstr.split(/,\s*/);
		reachExceptions = _underscore2.default.reduce(tempArray, function (memo, exceptioninstance) {
			var reachExceptions = [],
			    matches;
			if (!exceptioninstance) {
				return memo;
			}
			//not necessary since changed split(',') to split(/,\s*/)
			//exceptioninstance = exceptioninstance.replace(/^\s+|\s+$/g, '');
			if (exceptioninstance.slice(0, 5) === "2-1/2" || exceptioninstance.slice(0, 4) === "21/2") {
				tempstr = exceptioninstance.slice(5);
				if (tempstr) {
					reachExceptions.push(tempstr.replace(/^\s+|\s+$/g, ''));
					reachExceptions.push(2.5);
					memo.push(reachExceptions);
				}
			} else {
				matches = exceptioninstance.match(/(\d+)\s*(.*)/);
				if (matches) {
					reachExceptions.push(matches[2].replace(/^\s+|\s+$/g, ''));
					reachExceptions.push(matches[1]);
					memo.push(reachExceptions);
				}
			}
			return memo;
		}, []);
		if (reachExceptions && reachExceptions.length > 0) {
			retobj.reachExceptions = reachExceptions;
		}
	}
	return retobj;
}
function getCreatureClassSkills(creatureType) {
	var typeToCheck = creatureType.toLowerCase().replace(/\s/g, ''),
	    classSkills,
	    subSkills;
	try {
		subSkills = _underscore2.default.find(_PFDB2.default.creatureTypeClassSkills, function (skills, mainType) {
			var reg = new RegExp(mainType);
			return reg.test(typeToCheck);
		});
		if (subSkills && subSkills.length > 0) {
			classSkills = subSkills;
		}
		subSkills = _underscore2.default.find(_PFDB2.default.creatureSubtypeClassSkills, function (skills, mainType) {
			var reg = new RegExp(mainType);
			return reg.test(typeToCheck);
		});
		if (subSkills) {
			if (classSkills) {
				classSkills = classSkills.concat(subSkills);
			} else {
				classSkills = subSkills;
			}
		}
	} catch (err) {
		_exportsLoaderTASTheAaronSheet2.default.error("parseCreatureClassSkills", err);
	} finally {
		if (classSkills) {
			return classSkills;
		}
		return [];
	}
}
/* assignPrimarySecondary
 * to each attack in array, assigns attack.naturaltype='primary|secondary' and sometimes attack.dmgMult=1.5
 * returns attacks for chaining.
 */
function assignPrimarySecondary(attacks) {
	var attackGroups,
	    attacksToCheck = _underscore2.default.filter(attacks, function (attack) {
		return attack.type === 'natural';
	});
	if (_underscore2.default.size(attacksToCheck) <= 0) {
		return attacks;
	}
	if (_underscore2.default.size(attacksToCheck) === 1) {
		attacksToCheck[0].naturaltype = 'primary';
		if (attacksToCheck[0].iter && attacksToCheck[0].iter.length === 1 || isNaN(parseInt(attacksToCheck[0].iter, 10))) {
			attacksToCheck[0].dmgMult = 1.5;
		}
	} else {
		attackGroups = _underscore2.default.groupBy(attacksToCheck, function (attack) {
			return _PFDB2.default.primaryNaturalAttacksRegExp.exec(attack.name);
		});
		if (_underscore2.default.size(attackGroups) === 1) {
			_underscore2.default.each(attacksToCheck, function (attack) {
				attack.naturaltype = 'primary';
			});
		} else {
			_underscore2.default.each(attacksToCheck, function (attack) {
				if (_PFDB2.default.primaryNaturalAttacksRegExp.test(attack.name)) {
					attack.naturaltype = 'primary';
				} else {
					attack.naturaltype = 'secondary';
				}
			});
		}
	}
	return attacks;
}
/*buildImportantFeatObj - saves feats that require updates to the sheet in an object, no spaces and all lowercase.
 * returns sub objects for feats that only apply to certain attacks, and a criticaldamage subobject.
 * for instance:::  obj.weaponfinesse=1 obj.criticaldamage.bleedingcritical:1 obj.longsword.weaponfocus:1
 * @returns object of feats   as  {featname:1,feat2name:1, attacks:{attack1name:{featname:1}}, criticaldamage:{featname:1}}
 */
function buildImportantFeatObj(featlist) {
	return _underscore2.default.chain(featlist).filter(function (feat) {
		if (!feat) {
			return false;
		}return true;
	}).filter(function (feat) {
		return _PFDB2.default.importantFeatRegExp.test(feat);
	}).map(function (feat) {

		_exportsLoaderTASTheAaronSheet2.default.debug("checking <" + feat + "> for ending letter");
		//if there is an "endnote" letter indicator at the end then remove it
		feat = SWUtils.trimBoth(feat);
		if (/\b[A-Z]$/i.test(feat)) {
			feat = feat.slice(0, -2);
			feat = SWUtils.trimBoth(feat);
		}
		return feat;
	}).reduce(function (memo, feat) {
		var origfeat = feat,
		    atktype = "",
		    matches,
		    attacks = {},
		    attack = {},
		    crits = {},
		    skills = {},
		    skill = "";
		try {
			if (feat.indexOf('(') >= 0) {
				matches = /(.*?)\((.*)\)/.exec(feat);
				feat = matches[1];
				atktype = matches[2];
				feat = SWUtils.trimBoth(feat);
				atktype = SWUtils.trimBoth(atktype);
			}
			feat = feat.replace(/\s/g, '').toLowerCase();
			if (feat === 'improvedcritical' || feat === 'criticalmastery') {
				return memo;
			}
			if (feat.indexOf('critical') > 0) {
				atktype = feat;
				feat = "criticaldamage";
			} else if (feat.indexOf('skillfocus') >= 0) {
				skill = atktype.replace(' ', '-');
				skill = skill[0].toUpperCase() + skill.slice(1);
			}
			memo[feat] = 1;
			switch (feat) {
				case 'weaponfinesse':
				case 'improvedcritical':
					if (memo.attacks) {
						attacks = memo.attacks;
					}
					if (attacks[atktype]) {
						attack = attacks[atktype];
					}
					attack[feat] = 1;
					attacks[atktype] = attack;
					memo.attacks = attacks;
					break;
				case 'criticaldamage':
					if (memo.criticaldamage) {
						crits = memo.criticaldamage;
					}
					crits[atktype] = 1; //or put sickening?
					memo.criticaldamage = crits;
					break;
				case 'skillfocus':
					if (memo.skillfocuses) {
						skills = memo.skillfocuses;
					}
					if (skill) {
						skills[skill] = 1;
						memo.skillfocuses = skills;
					}
					break;
			}
		} catch (err) {
			_exportsLoaderTASTheAaronSheet2.default.error("buildImportantFeatObj error:", err);
			memo[feat] = 1;
		} finally {
			return memo;
		}
	}, {}).value();
}
function parseAttack(atkstr, atktypestr, addgroups, groupidx, isUndead) {
	var matches,
	    currpos = 0,
	    name = "",
	    iteratives,
	    i = 0,
	    tempInt = 0,
	    beforeBetweenAfterParens,
	    bonus = "",
	    origStr = atkstr,
	    countspaces = 0,
	    specCMB = 0,
	    abilityBaseName = '',
	    tempstr = "",
	    tempidx = 0,
	    names,
	    attackdescs,
	    retobj = {
		enh: 0,
		mwk: 0,
		name: "",
		basename: "",
		atktype: "melee",
		type: "",
		range: "",
		countFullBAB: 1,
		iter: [],
		dmgdice: 0,
		dmgdie: 0,
		dmgtype: "",
		crit: 20,
		critmult: 2,
		dmgbonus: 0,
		plus: "",
		plusamount: "",
		plustype: "",
		note: ""
	};
	try {
		//TAS.debug"parseAttack: "+atkstr);
		if (addgroups) {
			//retobj.name += "Group " + groupidx + ": ";
			retobj.group = 'Full attack ' + groupidx;
		}
		names = getAtkNameFromStr(atkstr);
		retobj.name += names.name;
		retobj.basename = names.basename;
		atkstr = SWUtils.trimBoth(atkstr);
		//if stars with #, it means number of attacks
		matches = atkstr.match(/^(\d+)\s*/);
		if (matches && matches[1]) {
			retobj.countFullBAB = parseInt(matches[1], 10) || 1;
			atkstr = atkstr.slice(matches[0].length);
			//retobj.name += (matches[1] + " ");
		}
		//starts with +number(enh) or mwk
		matches = atkstr.match(/^([+\-]\d+)\s*|^(mwk)\s*/i);
		if (matches) {
			//starts with +n, is weapon
			//retobj.name += matches[0];
			if (matches[1]) {
				retobj.enh = parseInt(matches[1], 10) || 0;
			} else if (matches[2] && /mwk/i.test(matches[2])) {
				retobj.mwk = 1;
			}
			retobj.type = "weapon";
			atkstr = atkstr.slice(matches[0].length);
		}
		if (_PFDB2.default.cmbPlusStrsrch.test(retobj.basename)) {
			retobj.atktype = 'cmb';
			retobj.vs = 'cmd';
			retobj.type = 'natural';
			specCMB = 1;
		} else if (atktypestr === 'melee' && _PFDB2.default.combatManeuversRegExp.test(retobj.basename)) {
			retobj.atktype = 'cmb';
			retobj.vs = 'cmd';
		} else if (_PFDB2.default.cmbMonsterSrch.test(retobj.basename)) {
			retobj.atktype = 'cmb';
			retobj.type = 'natural';
			retobj.vs = 'cmd';
		} else if (/web/i.test(retobj.basename)) {
			retobj.atktype = 'ranged';
			retobj.type = 'special';
			retobj.vs = 'touch';
			retobj.range = 10;
		} else if (/touch/i.test(retobj.basename)) {
			if (/ranged/i.test(retobj.basename)) {
				retobj.atktype = 'ranged';
			} else {
				retobj.atktype = 'melee';
			}
			retobj.vs = 'touch';
		} else if (/special/i.test(atktypestr)) {
			retobj.atktype = 'special';
			retobj.type = 'special';
		} else {
			retobj.atktype = atktypestr;
		}
		if (!retobj.type) {
			if (_PFDB2.default.naturalAttackRegExp.test(retobj.basename)) {
				retobj.type = "natural";
			} else if (_PFDB2.default.unarmedAttacksRegExp.test(name)) {
				retobj.type = "unarmed";
			} else {
				retobj.type = "weapon";
			}
		}
		if (!retobj.vs) {
			if (/touch|web/i.test(retobj.name)) {
				retobj.vs = 'touch';
				if (/ranged|web/i.test(retobj.name)) {
					retobj.atktype = 'ranged';
					if (/web/i.test(retobj.basename)) {
						retobj.range = 10;
					}
				}
			}
		}
		//skip past name
		//if the attack value is -n, then it may skip past the- and go to n
		// for compendium treated as -n, for statblock results in +n
		matches = atkstr.match(/\s*([^0-9+\/\+\(]+)/);
		if (matches && matches[0]) {
			if (matches.index) {
				tempidx = matches.index;
			}
			atkstr = atkstr.slice(tempidx + matches[0].length);
		}
		if (atkstr) {
			//after name split rest by parenthesis
			// format: name   attack bonus ( damage ) plus additional
			beforeBetweenAfterParens = atkstr.split(/\(|\)/);
			//attack amounts before paren
			iteratives = beforeBetweenAfterParens[0].split(/\//);
			if (/\d/.test(iteratives[0])) {
				retobj.iter = _underscore2.default.map(iteratives, function (iter, index) {
					if (/^[+\-]/.test(iter)) {
						return parseInt(iter, 10) || 0;
					}
					//minus missing assume minus
					return -1 * (parseInt(iter, 10) || 0);
				});
			} else if (retobj.atktype === 'cmb') {
				retobj.iter[0] = 0;
			}
			//damage between parens
			if (beforeBetweenAfterParens[1]) {
				attackdescs = beforeBetweenAfterParens[1].split(/,\s*/);
				//split on commas and strip out non damage, put damage in tempstr
				tempstr = _underscore2.default.reduce(attackdescs, function (memo, subattack) {
					if (/ft\./i.test(subattack)) {
						retobj.range = subattack;
					} else if (/D[Cc]\s\d+/.test(subattack)) {
						matches = subattack.match(/(D[Cc]\s\d+)/);
						retobj.DC = matches[1].toUpperCase();
						retobj.DCability = _PFDB2.default.specialAttackDCAbilityBase[retobj.basename] || 'CON';
						if (isUndead && retobj.DCability === 'CON') {
							retobj.DCability = 'CHA';
						}
						retobj.dcequation = PFUtils.getDCString(retobj.DCability, 'npc-hd-num', isUndead);
					} else if (/freq|day|constant|at.will/i.test(subattack)) {
						retobj.frequency = subattack;
					} else if (/AC|hp/.test(subattack) || !/\d|plus/.test(subattack)) {
						//if no number or 'plus' don't know what to do so stick it in note.
						retobj.note += subattack + ', ';
					} else {
						memo += subattack + ' ';
					}
					return memo;
				}, "");
				//TAS.debug"now left with :"+tempstr);
				// find damage
				//damage dice and die
				matches = tempstr.match(/^(\d+)d(\d+)\s*/i);
				if (matches) {
					if (matches[1]) {
						retobj.dmgdice = parseInt(matches[1], 10) || 0;
					}
					if (matches[2]) {
						tempInt = parseInt(matches[2], 10) || 0;
					}
					//compendium bug no minus:
					if (tempInt !== 3 && tempInt % 2 || tempInt > 12) {
						retobj.dmgdie = Math.floor(tempInt / 10);
						retobj.dmgbonus = -1 * (tempInt % 10);
					} else {
						retobj.dmgdie = tempInt;
					}
					tempstr = tempstr.slice(matches[0].length);
				}
				if (!retobj.dmgbonus) {
					//flat damage
					matches = tempstr.match(/^([+\-]??\d+)\s*/);
					if (specCMB) {
						_exportsLoaderTASTheAaronSheet2.default.debug("#####Parse attack damage dice looking for bonus: ", bonus, matches);
					}
					if (matches) {
						//flat number
						retobj.dmgbonus = parseInt(matches[1], 10) || 0;
						bonus = tempstr.slice(matches[0].length);
						//bonus = beforeBetweenAfterParens[1].slice(matches[1].length);
					} else {
						bonus = tempstr;
					}
				} else {
					bonus = tempstr;
				}
				//any text after damage is 'plus' or damage type
				if (bonus) {
					//if engulf or swallowwhole, there will be inner AC and hp to put in notes
					if (specCMB) {
						matches = bonus.match(/\sac\s\d+/i);
						if (matches) {
							retobj.note += bonus.slice(matches.index);
							bonus = SWUtils.trimBoth(bonus.slice(0, matches.index));
						}
					}
					//look for plus
					matches = bonus.match(/plus(.*)/i);
					if (matches) {
						tempstr = SWUtils.trimBoth(matches[1]);
						bonus = SWUtils.trimBoth(bonus.slice(0, matches.index));
						if (/\d+d\d+/i.test(tempstr)) {
							matches = tempstr.match(/(\d+d\d+)\s*([\w\s]*)/);
							retobj.plusamount = matches[1];
							if (matches[2]) {
								retobj.plustype = matches[2].replace(/^\s+|\s+$/g, '');
							}
						} else {
							retobj.plus = tempstr;
						}
					}
					//matches = bonus.match(/\s|\//g);
					//if (matches) {
					//	countspaces = matches.length - 1;
					//}
					if (retobj.dmgbonus === 0) {
						matches = bonus.match(/\s|\//g);
						if (matches) {
							countspaces = matches.length - 1;
						}
						matches = bonus.match(/(x\d+)|(\/\d+\-??20)|([+\-]??\d+)/ig);
						_underscore2.default.each(matches, function (match, index) {
							bonus = bonus.slice(match.length);
							if (/^[+\-]/.test(match)) {
								retobj.dmgbonus = parseInt(match, 10) || 0;
							} else if (/^[x\u00d7]\d+/.test(match)) {
								match = match.slice(1);
								retobj.critmult = parseInt(match, 10) || 2;
							} else if (/^\d+/.test(match)) {
								//minus missing
								retobj.dmgbonus = -1 * (parseInt(match, 10) || 0);
							} else if (match.indexOf('20') >= 0) {
								match = match.replace('20', '').replace('-', '').replace('/', '');
								if (match && match.length > 0) {
									retobj.crit = parseInt(match, 10) || 20;
								}
							}
						});
						bonus = bonus.slice(countspaces);
					}
					if (bonus && bonus.length > 0) {
						retobj.dmgtype += bonus;
					}
				}
				if (retobj.atktype !== 'cmb' && !retobj.iter[0] && retobj.dmgtype && retobj.dmgdice && retobj.dmgdie && !retobj.plusamount && !retobj.plustype && !/bludg|slash|pierc/i.test(retobj.dmgtype)) {
					retobj.plustype = retobj.dmgtype;
					tempstr = String(retobj.dmgdice) + "d" + String(retobj.dmgdie);
					if (retobj.dmgbonus) {
						if (retobj.dmgbonus > 0) {
							tempstr += "+" + retobj.dmgbonus;
						} else {
							tempstr += "-" + Math.abs(retobj.dmgbonus);
						}
					}
					retobj.plusamount = tempstr;
					retobj.dmgtype = "";
					retobj.dmgdice = 0;
					retobj.dmgdie = 0;
				}
			}
			//any notes at end
			i = 2;
			while (i < beforeBetweenAfterParens.length) {
				//can use filter then reduce, or use each, or use easy for loop.
				retobj.note += SWUtils.trimBoth(beforeBetweenAfterParens[i]);
				i++;
			}
		}
		if (retobj.note) {
			retobj.note = SWUtils.trimBoth(retobj.note);
		}
	} catch (err) {
		_exportsLoaderTASTheAaronSheet2.default.error("parseAttack: error parsing:" + atkstr, err);
		if (retobj.name) {
			retobj.name += " ";
		}
		retobj.name += "Could not parse attack!";
		retobj.note = origStr + " , error: ";
		retobj.note += err;
	} finally {
		return retobj;
	}
}
/** parseAttacks parse atttack string one at a time, returns arrays grouped by full attacks
 * attacks split by commas, full attack groups split by 'or'
 * the name of the attack starts with Group 0, Group 1, etc.
 * @param {string} atkstr
 * @param {string} atktypestr "melee" or "ranged"
 * @returns {[{enh:0,mwk:0,name:"",atktype:"melee",type:"",countFullBAB:1,plus:"",plusamount:"",plustype:"",note:"",iter:[],dmgdice:0,dmgdie:0,crit:20,critmult:2,dmgbonus:0}]}
 */
function parseAttacks(atkstr, atktypestr, cmbval) {
	var atkarrayout,
	    atkarraysub,
	    attacksouter,
	    addgroups = false;
	atkarrayout = atkstr.split(/\sor\s/i);
	if (atkarrayout.length > 1) {
		addgroups = true;
	}
	attacksouter = _underscore2.default.reduce(atkarrayout, function (memoout, atkstrout, groupidx) {
		var atkarray = atkstrout.split(/,\s*(?![^\(\)]*\))/),
		    attacks;
		if (atkarray.length > 1) {
			addgroups = true;
		}
		//TAS.debug('parseattacks outer group: ' + groupidx);
		attacks = _underscore2.default.reduce(atkarray, function (memo, atkstr) {
			var retobj;
			//TAS.debug('parseattacks: ' + atkstr);
			retobj = parseAttack(atkstr, atktypestr, addgroups, groupidx, cmbval);
			if (retobj) {
				memo.push(retobj);
			}
			return memo;
		}, []);
		return memoout.concat(attacks);
	}, []);
	return attacksouter;
}function parseSkillRacialBonuses(racialstr) {
	//abilitymods = modify default ability score for a skill
	var abilitieslower = _underscore2.default.map(PFAbilityScores.abilities, function (ab) {
		return ab.toLowerCase();
	}),
	    allCoreSkillsLower = _underscore2.default.map(PFSkills.allCoreSkills, function (skill) {
		return skill.toLowerCase();
	}),
	    skillsWithSubSkillsLower = _underscore2.default.map(PFSkills.skillsWithSubSkills, function (skill) {
		return skill.toLowerCase();
	}),
	    skillsWithSpaces = PFSkills.skillsWithSpaces,
	    temparray,
	    modifiers = [],
	    abilitymodstr = "",
	    abilitymodlower = "",
	    ability = "",
	    setability = false,
	    tempskill = "",
	    matches,
	    skillmods = {},
	    skillnotes = [],
	    abilitymods = {},
	    retobj = {
		"skillmods": skillmods,
		"skillnotes": skillnotes,
		"abilitymods": abilitymods
	};
	if (!racialstr) {
		return retobj;
	}
	temparray = racialstr.split(';');
	if (temparray.length > 1) {
		racialstr = temparray[0];
		abilitymodstr = temparray[1];
	}
	if (abilitymodstr) {
		try {
			abilitymodlower = abilitymodstr.toLowerCase();
			ability = _underscore2.default.find(abilitieslower, function (ab) {
				return abilitymodlower.indexOf(ab) >= 0;
			});
			if (ability) {
				tempskill = _underscore2.default.find(allCoreSkillsLower, function (skill) {
					return abilitymodlower.indexOf(skill) >= 0;
				});
				if (tempskill) {
					abilitymods[tempskill[0].toUpperCase() + tempskill.slice(1)] = ability.toLowerCase();
					setability = true;
				}
			}
		} catch (err1) {
			_exportsLoaderTASTheAaronSheet2.default.error("parseSkillRacialBonuses inner", err1);
		}
		if (!setability) {
			skillnotes.push(abilitymodstr);
		}
	}
	modifiers = racialstr.split(/,\s*/);
	_underscore2.default.each(modifiers, function (modstr) {
		var modstrlower = modstr.toLowerCase(),
		    mod = 0,
		    moddedTitle,
		    modded = "",
		    tempstr = "",
		    exceptionstr = "",
		    conditionmod = 0,
		    conditionstr = "",
		    hasSubSkill = false,
		    matches;
		try {
			matches = modstr.match(/\s*([+\-]\d+)\s*(?:on|to)?\s*([\w]+)\s*([\w\s]+)?\s*(\([^)]*\))?/);
			if (!matches) {
				//is an exception or note
				tempskill = _underscore2.default.find(allCoreSkillsLower, function (skill) {
					return modstrlower.indexOf(skill) >= 0;
				});
				if (tempskill) {
					ability = _underscore2.default.find(abilitieslower, function (ab) {
						return modstrlower.indexOf(ab) >= 0;
					});
					if (ability) {
						abilitymods[tempskill.toLowerCase()] = ability;
					} else {
						skillnotes.push(modstr);
					}
				} else {
					skillnotes.push(modstr);
				}
				return;
			}
			exceptionstr = matches[3];
			mod = parseInt(matches[1], 10) || 0;
			modded = matches[2];
			if (!_underscore2.default.contains(allCoreSkillsLower, modded.toLowerCase())) {
				//TAS.warn("does not match " + modded);
				// +8 Sleight of Hand
				tempskill = _underscore2.default.find(skillsWithSpaces, function (skill) {
					return modstrlower.indexOf(skill) >= 0;
				});
				if (!tempskill || tempskill.length < 1) {
					//not sure what this is
					skillnotes.push(modstr);
					return;
				}
				temparray = tempskill.split(/\s/);
				temparray = _underscore2.default.map(temparray, function (part) {
					if (part === "of") {
						return "of";
					}
					return part[0].toUpperCase() + part.slice(1);
				});
				modded = temparray.join('-');
				exceptionstr = exceptionstr.slice(tempskill.length - tempskill.indexOf(' ') + 1);
				_exportsLoaderTASTheAaronSheet2.default.debug("found skill with space converted to modded:" + modded + ", exceptionstr:" + exceptionstr);
			}
			if (exceptionstr) {
				//entire thing is a "when" exception
				skillnotes.push(modstr);
				return;
			}
			moddedTitle = modded[0].toUpperCase() + modded.slice(1);
			if (!matches[4]) {
				skillmods[moddedTitle] = mod;
				return;
			}
			//if craft, knowledge, etc
			exceptionstr = matches[4].replace(/^\s+|\(|\)|\s+$/g, '');
			if (_underscore2.default.contains(skillsWithSubSkillsLower, modded.toLowerCase())) {
				exceptionstr = exceptionstr[0].toUpperCase() + exceptionstr.slice(1);
				if (modded.toLowerCase() === "knowledge") {
					moddedTitle += "-" + exceptionstr;
				} else {
					moddedTitle += "[" + exceptionstr + "]";
				}
				skillmods[moddedTitle] = mod;
			} else {
				//has bonus
				matches = exceptionstr.match(/([+\-]\d+)\s(.*)$/);
				if (matches && matches[1]) {
					conditionmod = parseInt(matches[1], 10) || 0;
					if (matches[2]) {
						conditionstr = matches[2];
					}
					conditionmod = conditionmod - mod;
					skillmods[moddedTitle] = mod;
					tempstr = (conditionmod > 0 ? "+" : "") + conditionmod + " " + moddedTitle + " " + conditionstr;
					skillnotes.push(tempstr);
				} else {
					skillnotes.push(modstr);
				}
			}
		} catch (err) {
			_exportsLoaderTASTheAaronSheet2.default.error("parseSkillRacialBonuses outer error", err);
			skillnotes.push(modstr);
		}
	});
	return retobj;
}
function parseSkills(skillstr) {
	var rawSkills = skillstr.match(/[\w][\w\s]+\s*(?:\([\w\s,]+\))?\s*[+\-]\d+[,]??/g),
	    skills = _underscore2.default.reduce(rawSkills, function (memo, skill) {
		var matches = skill.match(/^([\w][\w\s]+[\w])\s*(\([\w\s,]+\))??([+\s]+\d+)$/),
		    tempskill = "",
		    tempval = 0,
		    tempskill2 = "",
		    subskills;
		if (matches) {
			tempval = parseInt(matches[3], 10) || 0;
			tempskill = matches[1].replace(/^\s+|\s+$/g, '');
			tempskill = tempskill[0].toUpperCase() + tempskill.slice(1);
			tempskill = tempskill.replace(/\s/g, '-');
			if (matches[2]) {
				subskills = matches[2].split(/,\s*/);
				_underscore2.default.each(subskills, function (subskill) {
					subskill = subskill.replace(/^\s+|,|\(|\)|\s+$/g, '');
					subskill = subskill[0].toUpperCase() + subskill.slice(1);
					if (tempskill === "Knowledge") {
						subskill = "-" + subskill;
					} else {
						subskill = "[" + subskill + "]";
					}
					memo[tempskill + subskill] = tempval;
				});
			} else {
				memo[tempskill] = tempval;
			}
		}
		return memo;
	}, {});
	return skills || {};
}
function parseAbilityScores(v) {
	var aS = {};
	aS.str = getAbilityAndMod(v["str_compendium"]);
	aS.dex = getAbilityAndMod(v["dex_compendium"]);
	aS.con = getAbilityAndMod(v["con_compendium"]);
	aS.wis = getAbilityAndMod(v["wis_compendium"]);
	aS['int'] = getAbilityAndMod(v["int_compendium"]);
	aS.cha = getAbilityAndMod(v["cha_compendium"]);
	return aS;
}
function parseSpecialAttack(setter, sastr) {
	var origsastr,
	    names,
	    tempstr,
	    tempstr2,
	    match,
	    matches,
	    parensplit,
	    atktyp = 'special',
	    baseability = "",
	    abilitytype = "",
	    isAttack = false,
	    retobj = {};
	try {
		origsastr = sastr;
		names = getAtkNameFromStr(sastr);
		if (sastr.indexOf('(') >= 0) {
			if (_PFDB2.default.spAttackAttacksPreProcess.test(names.basename)) {
				//preprocess
				if (/rake/i.test(names.basename)) {
					sastr = PFUtils.removeUptoFirstComma(sastr, true);
				} else if (/rend/i.test(names.basename)) {
					sastr = PFUtils.removeUptoFirstComma(sastr);
				} else if (/web/i.test(names.basename)) {
					sastr = PFUtils.removeUptoFirstComma(sastr, true);
					sastr = 'web ' + sastr;
					atktyp = 'ranged';
				}
				isAttack = true;
			} else if (_PFDB2.default.spAttackAttacks.test(names.basename)) {
				isAttack = true;
			}
		} else if (/damage|drain|dmg/i.test(names.basename) && !/blood|energy/i.test(names.basename) && _PFDB2.default.abilitySrch.test(names.basename)) {
			match = names.basename.match(/damage|drain/i);
			names.AbilityName = 'Ability ' + match[0];
			sastr = names.AbilityName + ' (' + sastr + ')';
			isAttack = true;
		}

		if (isAttack) {
			retobj = parseAttack(sastr, atktyp, false, 0);
			retobj.specialtype = 'attack';
			retobj.group = 'Special';
			retobj.name = names.AbilityName && names.AbilityName.slice(0, 7) === 'Ability' ? names.AbilityName : names.name;
			retobj.basename = names.basename;
		}
		if (!isAttack) {
			retobj.name = names.abilityName || names.name;
			retobj.basename = names.basename;
			retobj.specialtype = 'ability';
			retobj.rule_category = "special-attacks";
			matches = /usable\severy/i.exec(origsastr);
			if (matches) {
				retobj.frequency = 'everyrounds';
				tempstr = origsastr.slice(matches.index + matches[0].length);
				tempstr2 = PFUtils.getDiceDieString(tempstr);
				if (tempstr2) {
					retobj.used = tempstr2;
					matches = tempstr.match(/rounds|days|minutes/i);
					if (matches) {
						retobj.used += " " + matches[0];
					}
				}
			}
			if (_PFDB2.default.specialAttackDCAbilityBase[retobj.basename]) {
				retobj.DCability = _PFDB2.default.specialAttackDCAbilityBase[retobj.basename];
				if (parseInt(setter['is_undead'], 10) === 1 && retobj.DCability === 'CON') {
					retobj.DCability = 'CHA';
				}
			}
			retobj.shortdesc = PFUtils.replaceDCString(PFUtils.replaceDiceDieString(origsastr), retobj.DCability, 'npc-hd-num', setter.is_undead);
		}
		abilitytype = PFUtils.getSpecialAbilityTypeFromString(sastr);
		if (abilitytype) {
			retobj.ability_type = abilitytype;
		}
	} catch (err) {
		_exportsLoaderTASTheAaronSheet2.default.error("parseSpecialAttack", err);
	} finally {
		return retobj;
	}
}
function parseSpecialAttacks(setter, saString, cmb) {
	var retarray;
	if (!saString) {
		return {};
	}
	retarray = saString.split(/,\s*(?![^\(\)]*\))/);
	return _underscore2.default.reduce(retarray, function (memo, sa) {
		var retobj, tempstr, names;
		try {
			retobj = parseSpecialAttack(setter, sa);
		} catch (err) {
			_exportsLoaderTASTheAaronSheet2.default.error("parseSpecialAttacks", err);
			retobj = {};
			retobj.name = sa;
			retobj.specialtype = 'ability';
			retobj.rule_category = "special-attacks";
		} finally {
			memo.push(retobj);
			return memo;
		}
	}, []);
}
function parseSpecialAbilities(str) {
	var saObj = {},
	    initiallines,
	    lines,
	    extralines,
	    contentstr,
	    tempstr,
	    lastLineIndex = 0;
	saObj.description = [];
	saObj.specialAbilities = [];
	//We break on last period, 3 spaces, or newline that is before an (Su), (Ex), or (Sp) this because sometimes special abilities 
	// do not have newlines between them. (also go back to beginning of string if it's the first one)
	//also looks for  "words:" as first word after newline or period since some abilities are like that (dragons). (and sometimes spells does not have colon at end as in faerie dragon.)
	initiallines = str.split(/(?:\s\s\s|\r\n|^|[\.\n\v\f\r\x85\u2028\u2029])(?=\s*spells[:\s]|\s*[\w\s]+:|[^\.\v\r\n\x85\u2028\u2029]+(?:\(Su\):??|\(Ex\):??|\(Sp\):??))/i);
	//split the last one by newlines:
	if (_underscore2.default.size(initiallines > 1)) {
		lastLineIndex = _underscore2.default.size(lines) - 1;
		extralines = initiallines[lastLineIndex].split(/\s\s\s|\r\n|[\n\v\f\r\x85\u2028\u2029]/);
		if (_underscore2.default.size(extralines) > 1) {
			lines = initiallines.slice(0, lastLineIndex).concat(extralines);
		}
	}
	if (!lines) {
		lines = initiallines;
	}
	lines = _underscore2.default.filter(lines, function (line) {
		if (!line) {
			return false;
		}
		return true;
	});
	saObj = _underscore2.default.reduce(lines, function (memo, line) {
		var spObj = {},
		    trimmedline = '',
		    splitter = '',
		    tempstr = '',
		    startIdx,
		    endIdx = -1,
		    matches,
		    abilitytype = '',
		    foundSpecialNoType = false;
		try {
			trimmedline = line.replace(/^[^\w]+|[^\w]+$/g, '');
			if (trimmedline) {
				matches = trimmedline.match(/\(Su\):??|\(Ex\):??|\(Sp\):??/i);
				if (!matches || matches === null) {
					matches = trimmedline.match(/^Spells[:\s]|^[\w\s]+:/i); //first one only
					if (matches && matches[0].length < 20 && _PFDB2.default.monsterRules.test(matches[0])) {
						foundSpecialNoType = true;
						spObj.name = SWUtils.trimBoth(matches[0].replace(':', ''));
						startIdx = matches[0].length + 1;
						spObj.description = SWUtils.trimBoth(trimmedline.slice(startIdx));
						memo.specialAbilities.push(spObj);
					}
					if (!foundSpecialNoType && trimmedline.toLowerCase() !== 'special abilities') {
						//this is just part of the description
						memo.description.push(trimmedline);
					}
				} else if (matches && matches.index > 0) {
					tempstr = trimmedline.slice(0, matches.index);
					spObj.name = SWUtils.trimBoth(tempstr);
					spObj.basename = spObj.name.replace(/\s/g, '').toLowerCase();
					spObj.rule_category = 'special-abilities';
					spObj.ability_type = matches[0][1].toUpperCase() + matches[0][2].toLowerCase();
					startIdx = matches.index + matches[0].length + 1;
					spObj.description = SWUtils.trimBoth(trimmedline.slice(startIdx));
					matches = spObj.description.match(/(\d+d\d+) (?:points of){0,1}(.*?) damage/i);
					if (matches) {
						if (matches[1]) {
							spObj.extraDamage = '[[' + matches[1] + ']]';
						}
						if (matches[2]) {
							spObj.extraDamageType = matches[2];
						}
					} else {
						matches = spObj.description.match(/([a-z]) for (\d+d\d+) (rounds|minutes|hours|days)/i);
						if (matches) {
							if (matches[2]) {
								spObj.extraDamage = '[[' + matches[2] + ']] ' + matches[3] || '';
							}
							if (matches[1]) {
								spObj.extraDamageType = matches[1];
							}
						}
					}
					//before dc is usually 'the save'
					matches = spObj.description.match(/dc is (cha|con|wis|int|str|dex)[a-zA-Z]*.based/i);
					//TAS.debug"parseSpecialAbilities looking for DC ability it is: ",matches);
					if (matches && matches[1]) {
						tempstr = matches[1].toUpperCase();
						spObj.DCability = tempstr;
						//TAS.debug"parseSpecialAbilities setting DC ability to "+tempstr);
					} else if (_PFDB2.default.specialAttackDCAbilityBase[spObj.basename]) {
						spObj.DCability = _PFDB2.default.specialAttackDCAbilityBase[spObj.basename];
						//TAS.debug"parseSpecialAbilities setting DC ability to "+spObj.DCability+" based on "+ spObj.basename);
					}
					//bfore dc could be 'must make a', 'fails a'
					matches = spObj.description.match(/DC (\d+) (Will|Fort|Ref)[a-zA-Z]* save/i);
					if (matches) {
						if (matches[1]) {
							spObj.DC = matches[1];
						}
						if (matches[2]) {
							tempstr = matches[2][0].toUpperCase() + matches[2].slice(1).toLowerCase();
							spObj.save = tempstr;
						}
					} else {
						matches = spObj.description.match(/(Will|Fort|Ref)[a-zA-Z]* DC (\d+) ([^),.])/i);
						if (matches) {
							if (matches[1]) {
								tempstr = matches[1][0].toUpperCase() + matches[1].slice(1).toLowerCase();
								spObj.save = tempstr;
								if (matches[3]) {
									spObj.save += ' ' + matches[3];
								}
							}
							if (matches[2]) {
								spObj.DC = matches[2];
							}
						}
					}
					memo.specialAbilities.push(spObj);
				}
			}
		} catch (err) {
			_exportsLoaderTASTheAaronSheet2.default.error('parseSpecialAbilities error parsing: ' + line + ' error is' + err);
		} finally {
			return memo;
		}
	}, saObj);
	//TAS.debug("parseSpecialAbilities returning",saObj);
	return saObj;
}
function parseSpecialQualities(str) {
	var matches,
	    rawAbilities,
	    saObjs = [];
	if (str) {
		//TAS.debug("PFNPCParser.parseSpecialQualities: "+str);
		//skip over "SQ" in front
		matches = str.match(/^SQ[\s:]*/i);
		if (matches) {
			str = str.slice(matches[0].length);
		}
		rawAbilities = str.split(/,\s*/);
		//TAS.debug("found the following:", rawAbilities);
		_underscore2.default.each(rawAbilities, function (ability) {
			var saAb = {},
			    type = "";
			saAb.name = ability;
			type = PFUtils.getSpecialAbilityTypeFromString(ability);
			if (type) {
				saAb.ability_type = type;
			}
			saAb.rule_category = 'special-qualities';
			saObjs.push(saAb);
		});
		//TAS.debug"returning ", saObjs);
		return saObjs;
	}
	return null;
}
function parseSLAs(spLAstr) {
	var lines,
	    clname = '',
	    lastFreq = '',
	    tempstr = '',
	    lastPerDay = 0,
	    slas = {};
	try {
		slas.spellLikeAbilities = [];
		slas.CL = 0;
		slas.concentration = 0;
		slas.classname = "";
		lines = spLAstr.split(/\r\n|[\n\v\f\r\x85\u2028\u2029]/);
		_underscore2.default.each(lines, function (line) {
			var matches,
			    slatdivider,
			    SLAArray,
			    freqStr = "",
			    slaofTypeStr = "",
			    thisSlaObj = {},
			    rawDC = 0,
			    tempstr2 = '',
			    slatype = "",
			    numPerDay = 0,
			    slasOfType,
			    header = 0,
			    row = 0,
			    hasSpellLevel = 0,
			    freqIsPer = 0,
			    tempsplit;
			try {
				//TAS.debug"parsing "+line);
				if (/CL\s*\d+/i.test(line) || /concentrat/i.test(line) || /psychic\smagic/i.test(line) || /spell.like.abilit/i.test(line)) {
					header = 1;
				} else if (/\u2013|\u2014|-/.test(line)) {
					row = 1;
				}
				if (header) {
					if (/CL\s*\d+/i.test(line)) {
						matches = line.match(/CL\s*(\d+)/i);
						if (matches[1]) {
							slas.CL = parseInt(matches[1], 10) || 0;
						}
					}
					if (/concentrat/i.test(line)) {
						matches = line.match(/concentrat[\w]*\s*[+\-]??(\d+)/i);
						if (matches[1]) {
							slas.concentration = parseInt(matches[1], 10) || 0;
						}
					}
					if (/psychic\smagic/i.test(line)) {
						slas.classname = 'Psychic Magic';
					} else {
						slas.classname = 'Spell-like abilities';
					}
				} else if (row) {
					//TAS.debug"splitting line "+line);
					matches = line.match(/\u2013|\u2014|\-/);
					slaofTypeStr = line.slice(matches.index + 1);
					freqStr = SWUtils.trimBoth(line.slice(0, matches.index)).toLowerCase();
					matches = freqStr.match(/constant|will|day|month/i);
					if (matches && matches[0]) {
						slatype = matches[0].toLowerCase();
						thisSlaObj.type = slatype;
						if (slatype === 'day' || slatype === 'month') {
							freqIsPer = 1;
							matches = freqStr.match(/\d+/);
							if (matches && matches[0]) {
								numPerDay = parseInt(matches[0], 10) || 0;
								thisSlaObj.perDay = numPerDay;
							}
						}
					} else {
						tempsplit = freqStr.split('/');
						if (tempsplit.length >= 2) {
							freqIsPer = 1;
							matches = tempsplit[0].match(/\d+/);
							if (matches && matches[0]) {
								numPerDay = parseInt(matches[0], 10) || 0;
								thisSlaObj.perDay = numPerDay;
							}
							slatype = 'other';
							thisSlaObj.type = slatype;
							thisSlaObj.otherPer = tempsplit[1];
						}
					}
					//TAS.debug"the frequency is " + slatype + " and are " + numPerDay + " per that");
					slasOfType = slaofTypeStr.split(/,\s*(?![^\(\)]*\))/);
					SLAArray = _underscore2.default.reduce(slasOfType, function (memo, sla) {
						var thissla = {},
						    dcstr = '';
						try {
							thissla.type = slatype;
							if (freqIsPer && numPerDay > 0) {
								thissla.perDay = numPerDay;
							}
							//look for spell level.
							matches = sla.match(/level\s*(\d+)/i);
							if (matches) {
								if (matches[1]) {
									//TAS.debug"spell level match on "+ sla+ " Is " + matches[1]);
									thissla.spell_level = parseInt(matches[1], 10) || 0;
									hasSpellLevel = 1;
								}
								sla = sla.replace(matches[0], '');
							}

							matches = sla.match(/D[Cc]\s*\d+/);
							if (matches) {
								tempstr2 = sla.replace(matches[0], '');
								tempstr = matches[0].match(/\d+/);
								rawDC = parseInt(tempstr, 10) || 0;
								thissla.DC = rawDC;
								matches = tempstr2.match(/\b(fortitude|willpower|reflex|fort|will|ref)\b([^,]+,)/i);
								if (matches) {
									thissla.save = matches[0]; //type of save up to first comma after it
								}
							}
							//if parenthesis, name should be only what is in parens,
							if (sla.indexOf('(') > 0) {
								thissla.name = sla.slice(0, sla.indexOf('(') - 1);
								tempstr = sla.slice(sla.indexOf('(') - 1);
								//sla= tempstr;
								//summon spells have levels
								thissla.shortdesc = tempstr;
							} else {
								thissla.name = sla;
							}
							if (thissla.spell_level && /^summon/i.test(thissla.name)) {
								thissla.name += " Level " + String(thissla.spell_level);
							}
							memo.push(thissla);
						} catch (errslain) {
							_exportsLoaderTASTheAaronSheet2.default.error("parseSLAs, error reducing to SLAArray for: " + sla, errslain);
							if (!thissla.name) {
								thissla.name = sla;
							} else {
								thissla.description = sla;
							}
							memo.push(thissla);
						} finally {
							return memo;
						}
					}, []);
					if (SLAArray && _underscore2.default.size(SLAArray) > 0) {
						thisSlaObj.type = slatype;
						if (freqIsPer && numPerDay > 0) {
							thisSlaObj.perDay = numPerDay;
						}
						thisSlaObj.SLAs = SLAArray;
						slas.spellLikeAbilities.push(thisSlaObj);
					}
				} else {
					_exportsLoaderTASTheAaronSheet2.default.warn("Cannot parse " + line);
					return;
				}
			} catch (ierr) {
				_exportsLoaderTASTheAaronSheet2.default.error("parseSLAs error parsing" + line, ierr);
			}
		});
	} catch (err) {
		_exportsLoaderTASTheAaronSheet2.default.error("parseSLAs", err);
	} finally {
		if (slas.spellLikeAbilities && _underscore2.default.size(slas.spellLikeAbilities) > 0) {
			return slas;
		}
		return null;
	}
}
/** parseSpells - parses spell string from compendium and returns js object
 *@param {string} spellstr the block of spells known text ex: "Sorcerer Spells Known (CL 8th)\r\n3rd (3/day)-Fireball (DC12)," etc
 *@returns {jsobject} {classname:"name",CL:#,concentration:#,
 * spells:{
 *	0:[{name:spellname,DC:#}],
 *   1:[{name:spellname},{name:spellname}]
 * }}
 */
function parseSpells(spellstr) {
	var lines,
	    spells = {};
	spells.classLevel = -1;
	spells.concentration = -1;
	spells.classname = "";
	spells.spellsByLevel = [];

	if (!spellstr) {
		return null;
	}
	lines = spellstr.split(/\r\n|[\n\v\f\r\x85\u2028\u2029]/);
	spells = _underscore2.default.reduce(lines, function (omemo, line) {
		var matches,
		    spellarray,
		    slatdivider,
		    splittedSpells,
		    dcstr,
		    tempstr,
		    temparray = [],
		    match,
		    thislvl = {},
		    slasOfType;
		thislvl.perDay = -1;
		thislvl.spellLevel = -1;
		try {
			if (spells.classLevel === -1 && /C[Ll]\s*\d+/i.test(line)) {
				matches = line.match(/C[Ll]\s*(\d+)/i);
				if (matches && matches[1]) {
					spells.classLevel = parseInt(matches[1], 10) || 0;
				}
				matches = line.match(/concentrat[\w]*\s*[+\-]??(\d+)/i);
				if (matches && matches[1]) {
					spells.concentration = parseInt(matches[1], 10) || 0;
				}
				matches = line.match(/([\w\s]*)spells\sknown/i);
				if (matches && matches[1]) {
					spells.classname = matches[1].replace(/^\s|\s$/g, '');
					spells.classname = spells.classname[0].toUpperCase() + spells.classname[1];
				}
			} else {
				//look for endash, emdash, or dash
				slatdivider = line.split(/\u2013|\u2014|-/);
				if (slatdivider && slatdivider[0]) {
					matches = slatdivider[0].match(/^(\d+)/);
					if (matches && matches[1]) {
						thislvl.spellLevel = parseInt(matches[1], 10) || 0;
						matches = slatdivider[0].match(/(\d+)\/day/i);
						if (matches && matches[1]) {
							thislvl.perDay = parseInt(matches[1], 10) || 0;
						}
					} else {
						match = slatdivider[0].match(/opposition schools\s*/i);
						if (match) {
							tempstr = slatdivider[0].slice(match.index + match[0].length);
							spells.oppositionschools = tempstr;
						} else {
							//stuff is here but what? add to notes
							spells.spellnotes = slatdivider[0];
						}
					}
				}
				if (slatdivider && slatdivider[1]) {
					splittedSpells = slatdivider[1].split(',');
					spellarray = _underscore2.default.reduce(splittedSpells, function (memo, spell) {
						var thisspell = {};
						try {
							matches = spell.split(/\(dc/i);
							thisspell.name = matches[0].replace(/^\s|\s$/g, '');
							if (matches[1]) {
								dcstr = matches[1];
								matches = dcstr.match(/\d+/);
								if (matches && matches[0]) {
									thisspell.DC = parseInt(matches[0], 10) || 0;
								}
							}
							memo.push(thisspell);
						} catch (errinner) {
							_exportsLoaderTASTheAaronSheet2.default.error("PFNPCParser.parseSpells errinner:", errinner);
						} finally {
							return memo;
						}
					}, []);
					if (thislvl.spellLevel >= 0 && spellarray && spellarray.length > 0) {
						thislvl.spells = spellarray;
						omemo.spellsByLevel.push(thislvl);
					}
				}
			}
		} catch (err) {
			_exportsLoaderTASTheAaronSheet2.default.error("PFNPCParser.parseSpells", err);
		} finally {
			return omemo;
		}
	}, spells);
	return spells;
}
function parseSpace(spaceStr) {
	var retstr = spaceStr,
	    matches,
	    tempFloat;
	try {
		matches = spaceStr.match(/\s*(\d*\.?\d*)?/);
		if (matches) {
			tempFloat = parseFloat(matches[1]);
			if (!isNaN) {
				retstr = String(tempFloat);
			}
		}
	} finally {
		return retstr;
	}
}
function getCasterObj(spellObj, abilityScores, healthObj, isSLA) {
	var caster = {};
	if (!spellObj || !abilityScores || !healthObj) {
		return null;
	}
	try {
		//TAS.debug"getCasterObj spellObj,abilities,health are:", spellObj, abilityScores, healthObj);
		caster.abilityMod = 0;
		caster.CL = 0;
		caster.concentrationBonus = 0;
		if (isSLA) {
			caster.classname = "Spell-like abilities";
			caster.ability = 'CHA';
			caster.abilityMod = abilityScores.cha.mod;
		} else {
			if (spellObj.classname) {
				caster.classname = spellObj.classname;
				if (_PFDB2.default.casterDefaultAbility[spellObj.classname] && abilityScores[_PFDB2.default.casterDefaultAbility[spellObj.classname]]) {
					caster.ability = _PFDB2.default.casterDefaultAbility[spellObj.classname].toUpperCase();
					caster.abilityMod = abilityScores[_PFDB2.default.casterDefaultAbility[spellObj.classname]].mod;
				}
			} else {
				//assume sorcerer
				caster.classname = 'Sorcerer';
				caster.ability = 'CHA';
				caster.abilityMod = abilityScores.cha.mod;
			}
		}
		if (spellObj.CL) {
			caster.CL = spellObj.CL;
		} else {
			//assume HD
			caster.CL = healthObj.hdice1;
		}
		if (spellObj.concentration) {
			caster.concentrationBonus = parseInt(spellObj.concentration, 10) - parseInt(caster.abilityMod, 10) - parseInt(caster.CL, 10);
		}
		if (spellObj.oppositionschools) {
			caster.oppositionschools = spellObj.oppositionschools;
			spellObj.oppositionschools = null;
		}
		if (spellObj.spellnotes) {
			caster.spellnotes = spellObj.spellnotes;
			spellObj.spellnotes = null;
		}
	} catch (err) {
		_exportsLoaderTASTheAaronSheet2.default.error("getCasterObj error trying to create obj returning null", err);
		caster = null;
	} finally {
		//TAS.debug"returning ", caster);
		return caster;
	}
}
function setCasterFields(setter, casterObj, classidx) {
	var alreadyPresent = false;
	try {
		//TAS.debug"setCasterFields");
		classidx = classidx || 0;
		if (classidx < 0) {
			classidx = 0;
		}
		if (setter["spellclass-" + classidx + "-name"] || setter["spellclass-" + classidx + "-level"]) {
			if (!(parseInt(setter["spellclass-" + classidx + "-level"], 10) === parseInt(casterObj.CL, 10) && PFUtils.findAbilityInString(setter["Concentration-" + classidx + "-ability"]) === casterObj.ability.toUpperCase())) {
				classidx++;
			} else {
				alreadyPresent = true;
			}
		}
		if (classidx > 2) {
			_exportsLoaderTASTheAaronSheet2.default.error("Could not setCasterFields, 0,1,2 spellclasses already defined:" + setter["spellclass-0-name"] + ", " + setter["spellclass-1-name"] + ", " + setter["spellclass-2-name"], classidx);
			casterObj.pageClassIdx = -1;
		} else if (alreadyPresent) {
			setter["spellclass-" + classidx + "-name"] = setter["spellclass-" + classidx + "-name"] + " and " + casterObj.classname;
			casterObj.pageClassIdx = classidx;
		} else {
			setter["spellclass-" + classidx + "-name"] = casterObj.classname;
			//should add class here ? setter['class-'+what+'-name']
			setter["spellclass-" + classidx + "-level"] = casterObj.CL; //if they have hit dice, this will make it increase? not if we don'tdo class-x-level
			setter["spellclass-" + classidx + "-level-total"] = casterObj.CL;
			if (/wizard|cleric|druid|paladin|ranger|investigator|shaman|witch|alchemist|warpriest/i.test(casterObj.classname)) {
				setter["spellclass-" + classidx + "-casting_type"] = 2; //prepared
			} else {
				setter["spellclass-" + classidx + "-casting_type"] = 1; //spontaneous
			}
			if (casterObj.ability) {
				setter["Concentration-" + classidx + "-ability"] = "@{" + casterObj.ability + "-mod}";
			}
			setter["Concentration-" + classidx + "-mod"] = casterObj.abilityMod;
			if (casterObj.concentrationBonus) {
				setter["Concentration-" + classidx + "-misc"] = casterObj.concentrationBonus;
			}
			casterObj.pageClassIdx = classidx;
			if (casterObj.oppositionschools) {
				setter["spellclass-" + classidx + "-oppositionschool-0"] = casterObj.oppositionschools;
			}
			if (casterObj.spellnotes) {
				setter["spellclass-" + classidx + "-notes"] = casterObj.spellnotes;
			}
		}
	} catch (err) {
		_exportsLoaderTASTheAaronSheet2.default.error("setSLACasterFields", err);
	} finally {
		return setter;
	}
}
/** createSpellEntries
 *@param {jsobject} setter - map to pass to setAttrs
 *@param {jsobject} spellObj obj like: {classname:"name",CL:#,concentration:#,
 *	spells:{
 *		0:[{name:spellname,DC:#}],
 *		1:[{name:spellname},{name:spellname}]
 *	}}
 *@param {?} casterObj ?
 *@param {?} section ?
 *@returns {jsobject} setter
 */
function createSpellEntries(setter, spellObj, casterObj, section) {
	section = section || 'spells';
	setter = setter || {};
	if (!spellObj || !casterObj) {
		return setter;
	}
	_underscore2.default.each(spellObj.spellsByLevel, function (spellLevel) {
		var thisSpellLevel = parseInt(spellLevel.spellLevel, 10) || 0,
		    baseDC = 0,
		    perdayPrefix = "";
		try {
			//TAS.debug"now look at level " + thisSpellLevel + " spells", spellLevel);
			perdayPrefix = "spellclass-" + casterObj.pageClassIdx + "-level-" + thisSpellLevel;
			if (spellLevel.perDay) {
				setter[perdayPrefix + "-class"] = spellLevel.perDay;
				setter[perdayPrefix + "-spells-per-day_max"] = spellLevel.perDay;
				setter[perdayPrefix + "-spells-per-day"] = spellLevel.perDay;
			}
			baseDC = 10 + thisSpellLevel + (parseInt(casterObj.abilityMod, 10) || 0);
		} catch (errlvl) {
			_exportsLoaderTASTheAaronSheet2.default.error("createSpellEntries error setting spells per day", errlvl);
		}
		setter = _underscore2.default.reduce(spellLevel.spells, function (memo, spell) {
			var newRowId = generateRowID(),
			    thisDC = 0,
			    prefix = "repeating_" + section + "_" + newRowId + "_";
			try {
				setter[prefix + "name"] = spell.name[0].toUpperCase() + spell.name.slice(1);
				setter[prefix + "classnumber"] = casterObj.pageClassIdx;
				setter[prefix + "spellclass"] = casterObj.classname;
				setter[prefix + "spell_level"] = thisSpellLevel;
				if (spell.DC) {
					thisDC = parseInt(spell.DC, 10) || 0;
					if (thisDC !== baseDC) {
						setter[prefix + "DC_misc"] = thisDC - baseDC;
					}
					setter[prefix + "savedc"] = thisDC;
				}
				if (casterObj.concentration) {
					setter[prefix + "Concentration-mod"] = casterObj.concentration;
				}
			} catch (err) {
				_exportsLoaderTASTheAaronSheet2.default.error("createSpellEntries error setting spell :", spell, err);
			} finally {
				return setter;
			}
		}, setter);
	});
	return setter;
}
function createSLAEntries(setter, slaObj, casterObj, section) {
	var defaultLevel = 0;
	section = section || 'ability';
	setter = setter || {};
	if (!slaObj || !casterObj) {
		return setter;
	}
	defaultLevel = parseInt(setter.level, 10) || 0;

	_underscore2.default.each(slaObj.spellLikeAbilities, function (perDaySLAs) {
		var thisPerDay = parseInt(perDaySLAs.perDay, 10) || 0,
		    freqType = perDaySLAs.type;
		//TAS.debug" at one set of SLAs, freq:" + freqType + " and perday:" + thisPerDay, perDaySLAs);
		setter = _underscore2.default.reduce(perDaySLAs.SLAs, function (memo, SLA) {
			var newRowId,
			    prefix = "repeating_" + section + "_" + newRowId + "_",
			    casterAbility,
			    dcTot = 0,
			    dcMod = 0,
			    sdstr = "",
			    charlvl = 0,
			    clmisc = 0,
			    tempint = 0,
			    slmisc = 0,
			    casterlevel = 0;
			try {
				newRowId = generateRowID();
				prefix = "repeating_" + section + "_" + newRowId + "_";
				memo[prefix + "name"] = SLA.name[0].toUpperCase() + SLA.name.slice(1);
				memo[prefix + "ability_type"] = 'Sp';
				memo[prefix + "rule_category"] = 'spell-like-abilities';
				memo[prefix + 'showinmenu'] = '1';
				if (casterObj.ability) {
					casterAbility = casterObj.ability;
					memo[prefix + "ability-basis"] = "@{" + casterObj.ability + "-mod}";
				} else {
					casterAbility = "CHA";
					memo[prefix + "ability-basis"] = "@{CHA-mod}";
				}
				memo[prefix + "CL-basis"] = "@{npc-hd-num}";
				memo[prefix + "CL-basis-mod"] = setter.level;
				if (setter['race']) {
					memo[prefix + "class-name"] = setter['race'];
				}
				//TAS.debug"CREATE SLA casterObj.CL: " + casterObj.CL + ", level:" + setter.level + " when processing "+ SLA );
				if (casterObj.CL) {
					tempint = setter.level || 0;
					if (tempint > 0) {
						memo[prefix + "CL-misc"] = casterObj.CL - tempint;
						memo[prefix + "CL-misc-mod"] = casterObj.CL - tempint;
					}
					casterlevel = casterObj.CL;
				} else {
					casterlevel = setter.level || 0;
				}

				memo[prefix + 'casterlevel'] = casterlevel;
				//assume 1/2? or calc based on DC?
				if (SLA.spell_level) {
					if (SLA.spell_level === defaultLevel) {
						memo[prefix + "spell_level-basis"] = "@{casterlevel}";
					} else if (SLA.spell_level === Math.floor(defaultLevel / 2)) {
						memo[prefix + "spell_level-basis"] = "floor(@{casterlevel}/2)";
					} else {
						memo[prefix + "spell_level-basis"] = "0";
						memo[prefix + "spell_level-misc"] = SLA.spell_level;
					}
				} else {
					memo[prefix + "spell_level-basis"] = "floor(@{casterlevel}/2)";
				}
				//memo[prefix+"classnumber"]=casterObj.pageClassIdx;
				//memo[prefix+"spellclass"]=casterObj.classname;
				switch (freqType) {
					case 'day':
						memo[prefix + "frequency"] = 'perday';
						memo[prefix + "used"] = thisPerDay;
						memo[prefix + "used_max"] = thisPerDay;
						memo[prefix + "max-calculation"] = thisPerDay;
						memo[prefix + "hasfrequency"] = '1';
						memo[prefix + "hasuses"] = '1';
						break;
					case 'will':
						memo[prefix + "frequency"] = 'atwill';
						memo[prefix + "hasfrequency"] = '1';
						break;
					case 'constant':
						memo[prefix + "frequency"] = "constant";
						memo[prefix + "hasfrequency"] = '1';
						break;
					case 'month':
						memo[prefix + "frequency"] = "permonth";
						memo[prefix + "used"] = thisPerDay;
						memo[prefix + "used_max"] = thisPerDay;
						memo[prefix + "max-calculation"] = thisPerDay;
						memo[prefix + "hasfrequency"] = '1';
						memo[prefix + "hasuses"] = '1';
						break;
					case 'everyrounds':
						memo[prefix + "frequency"] = "everyrounds";
						memo[prefix + "hasfrequency"] = '1';
						memo[prefix + "rounds_between"] = SLA.used || '';
						break;
					case 'other':
						memo[prefix + "frequency"] = "other";
						memo[prefix + "used"] = thisPerDay;
						memo[prefix + "used_max"] = thisPerDay;
						memo[prefix + "max-calculation"] = thisPerDay;
						memo[prefix + "hasfrequency"] = '1';
						memo[prefix + "hasuses"] = '1';
						if (slaObj.otherPer) {
							sdstr = "Frequency per :" + slaObj.otherPer;
						}
						break;
				}
				if (SLA.save) {
					memo[prefix + "save"] = SLA.save;
				}
				if (SLA.DC) {
					try {
						if (!SLA.save) {
							memo[prefix + "save"] = "See Text";
						}
						if (casterObj.abilityMod) {
							tempint = 0;
							if (SLA.spell_level) {
								tempint = 10 + casterObj.abilityMod + SLA.spell_level;
							} else {
								tempint = 10 + casterObj.abilityMod + Math.floor(casterlevel / 2);
							}
							if (tempint !== SLA.DC) {
								memo[prefix + "spell_level-misc"] = SLA.DC - tempint;
								memo[prefix + "spell_level-misc-mod"] = SLA.DC - tempint;
							}
						}
					} catch (err3) {
						_exportsLoaderTASTheAaronSheet2.default.error("createSLAentries, error trying to calculate DC: " + SLA, err3);
					}
				}
				if (SLA.description) {
					memo[prefix + "description"] = SLA.description;
				}
				if (SLA.shortdesc) {
					if (sdstr) {
						sdstr = SLA.shortdesc + ", " + sdstr;
					} else {
						sdstr = SLA.shortdesc;
					}
				}
				if (sdstr) {
					memo[prefix + "short-description"] = sdstr;
				}
			} catch (err) {
				_exportsLoaderTASTheAaronSheet2.default.error("createSLAEntries error setting SLA :", SLA, err);
			} finally {
				return memo;
			}
		}, setter);
	});
	return setter;
}
/*createAttacks - creates rows in repeating_weapon
 * @attacklist = array of {enh:0,name:"",type:"",countFullBAB:1,plus:"",note:"",iter:[],dmgdice:0,dmgdie:0,crit:20,critmult:2,dmgbonus:0};
 * @setter = the map to pass to setAttrs
 * @returns setterf
 */
function createAttacks(attacklist, setter, attackGrid, abilityScores, importantFeats, defaultReach, exceptionReaches, sizeMap) {
	setter = setter || {};
	if (!attacklist || _underscore2.default.size(attacklist) === 0) {
		return setter;
	}
	_exportsLoaderTASTheAaronSheet2.default.debug("##################", "create attacks:", attacklist, attackGrid, abilityScores, importantFeats, defaultReach, exceptionReaches);
	setter = _underscore2.default.reduce(attacklist, function (memo, attack) {
		var newRowId = generateRowID(),
		    prefix = "repeating_weapon_" + newRowId + "_",
		    dmgAbilityStr = false,
		    specCMB = false,
		    i = 0,
		    iterativeNum = 0,
		    basebonus = 0,
		    tempInt = 0,
		    dmgMult = 1,
		    dmgMod = 0,
		    tohitbonus = 0,
		    name = "",
		    tempstr = "",
		    basename = "",
		    iterZero = NaN,
		    reach,
		    newRowId2,
		    prefix2;
		//TAS.debug"creating attack row id:" + newRowId);
		try {
			//TAS.debug"looking at attack:", attack);
			tohitbonus = Math.max(attack.enh, attack.mwk);
			basename = attack.basename;
			//basename.replace(/^group.*?:\s*/,'');
			name += attack.name;
			if (attack.plus) {
				name += " Plus " + attack.plus;
			}
			memo[prefix + "name"] = name;
			memo[prefix + "default_size"] = sizeMap.size;
			if (attack.atktype === 'ranged') {
				basebonus = attackGrid.ranged;
				memo[prefix + "attack-type"] = "@{attk-ranged}";
				memo[prefix + "attack-type-mod"] = attackGrid.ranged;
				memo[prefix + "isranged"] = 1;
			} else if (_PFDB2.default.cmbPlusStrsrch.test(basename)) {
				basebonus = attackGrid.cmb;
				memo[prefix + "attack-type"] = "@{CMB}";
				memo[prefix + "attack-type-mod"] = attackGrid.cmb;
				dmgAbilityStr = true;
				dmgMult = 1.5;
				specCMB = true;
			} else if (attack.atktype === 'cmb') {
				basebonus = attackGrid.cmb;
				memo[prefix + "attack-type"] = "@{CMB}";
				memo[prefix + "attack-type-mod"] = attackGrid.cmb;
			} else if (attack.atktype === 'special') {
				basebonus = 0;
				memo[prefix + "attack-type-mod"] = 0;
				memo[prefix + "total-attack"] = 0;
			} else {
				dmgAbilityStr = true;
				//melee
				if (importantFeats.weaponfinesse) {
					//assume all attacks use weapon finesse
					basebonus = attackGrid.melee2;
					memo[prefix + "attack-type"] = "@{attk-melee2}";
					memo[prefix + "attack-type-mod"] = attackGrid.melee2;
				} else {
					basebonus = attackGrid.melee;
					memo[prefix + "attack-type"] = "@{attk-melee}";
					memo[prefix + "attack-type-mod"] = attackGrid.melee;
				}
				if (attack.type === 'natural') {
					if (attack.naturaltype === 'secondary') {
						dmgMult = 0.5;
					} else if (attack.dmgMult && attack.dmgMult === 1.5) {
						memo[prefix + "damage_ability_mult"] = 1.5;
						dmgMult = 1.5;
					}
				}
			}
			if (specCMB) {
				_exportsLoaderTASTheAaronSheet2.default.debug("############ SPEC CMB ###############", "dmgAbilityStr:" + dmgAbilityStr + " attackbonus:" + basebonus + ", mult:" + dmgMult);
			}
			if (dmgAbilityStr || specCMB) {
				if (specCMB && attack.dmgbonus === 0) {
					memo[prefix + "damage-ability"] = "0";
					dmgMod = 0;
				} else {
					memo[prefix + "damage-ability"] = "@{STR-mod}";
					if (dmgMult !== 1) {
						dmgMod = Math.floor(dmgMult * abilityScores.str.mod);
						memo[prefix + "damage_ability_mult"] = dmgMult;
					} else {
						dmgMod = abilityScores.str.mod;
					}
				}
				memo[prefix + "damage-ability-mod"] = dmgMod;
			}
			if (attack.enh) {
				memo[prefix + "enhance"] = attack.enh;
			}
			if (attack.mwk) {
				memo[prefix + "masterwork"] = "1";
			}
			if (!specCMB && attack.iter && attack.iter.length > 0) {
				iterZero = parseInt(attack.iter[0], 10);
			} else if (specCMB) {
				iterZero = basebonus;
			}
			if (!isNaN(iterZero)) {
				if (specCMB) {
					memo[prefix + "attack"] = 0;
					memo[prefix + "attack-mod"] = 0;
					memo[prefix + "total-attack"] = basebonus;
				} else {
					memo[prefix + "attack"] = iterZero - tohitbonus - basebonus;
					memo[prefix + "attack-mod"] = iterZero - tohitbonus - basebonus;
					memo[prefix + "total-attack"] = iterZero;
				}
			} else if (attack.atktype === 'cmb') {
				if (/swallowwhole|pin/i.test(attack.basename)) {
					//if confirming crit add +5
					memo[prefix + "attack"] = 5;
					memo[prefix + "attack-mod"] = 5;
					memo[prefix + "total-attack"] = attackGrid.cmb + 5;
				} else {
					memo[prefix + "total-attack"] = attackGrid.cmb;
				}
			} else {
				memo[prefix + "total-attack"] = 0;
			}
			if (attack.crit !== 20) {
				memo[prefix + "crit-target"] = attack.crit;
			}
			if (attack.critmult !== 2 && attack.critmult) {
				memo[prefix + "crit-multiplier"] = attack.critmult;
			}
			if (importantFeats.criticalfocus) {
				memo[prefix + "crit_conf_mod"] = 4;
			}
			//somewhere this is getting lost:  just bandaid it:
			if (!memo[prefix + "total-attack"]) {
				memo[prefix + "total-attack"] = 0;
			}
			memo[prefix + "damage-dice-num"] = attack.dmgdice;
			memo[prefix + "default_damage-dice-num"] = attack.dmgdice;
			memo[prefix + "damage-die"] = attack.dmgdie;
			memo[prefix + "default_damage-die"] = attack.dmgdie;
			memo[prefix + "damage"] = attack.dmgbonus - attack.enh - dmgMod;
			memo[prefix + "damage-mod"] = attack.dmgbonus - attack.enh - dmgMod;
			memo[prefix + "total-damage"] = attack.dmgbonus;
			if (attack.note) {
				memo[prefix + "notes"] = "(" + attack.type + ") " + attack.note;
			} else {
				memo[prefix + "notes"] = "(" + attack.type + ")";
			}
			if (attack.iter.length > 1) {
				for (i = 1; i < attack.iter.length; i++) {
					iterativeNum = i + 1;
					//TAS.debug"at iteration " + iterativeNum + ", difference is :" + (attack.iter[i] - attack.iter[0]));
					memo[prefix + "toggle_iterative_attack" + iterativeNum] = "@{var_iterative_attack" + iterativeNum + "_macro}";
					memo[prefix + "iterative_attack" + iterativeNum + "_value"] = attack.iter[i] - attack.iter[0];
				}
			} else if (attack.countFullBAB > 1) {
				for (i = 1; i < attack.countFullBAB; i++) {
					iterativeNum = i + 1;
					memo[prefix + "toggle_iterative_attack" + iterativeNum] = "@{var_iterative_attack" + iterativeNum + "_macro}";
					memo[prefix + "iterative_attack" + iterativeNum + "_value"] = 0;
				}
			}
			// plus extra damage  **********************
			if (attack.plusamount) {
				memo[prefix + "precision_dmg_macro"] = "[[" + attack.plusamount + "]]";
				if (attack.plustype) {
					memo[prefix + "precision_dmg_type"] = attack.plustype;
				}
			} else if (attack.plus) {
				memo[prefix + "precision_dmg_type"] = attack.plus;
				memo[prefix + "precision_dmg_macro"] = "Plus";
			}
			if (attack.dmgtype) {
				memo[prefix + "notes"] = memo[prefix + "notes"] + ", damage type:" + attack.dmgtype;
			}
			//reach **************************
			if (attack.range) {
				tempInt = parseInt(attack.range, 10);
				if (isNaN(tempInt)) {
					memo[prefix + "notes"] = memo[prefix + "notes"] + ", range:" + attack.range;
				}
			} else if (/tongue/i.test(attack.name)) {
				reach = defaultReach * 3;
				memo[prefix + "range"] = reach;
			} else if (attack.atktype === "melee") {
				if (exceptionReaches && exceptionReaches.length > 0) {
					//TAS.log("looking for match",exceptionReaches);
					reach = _underscore2.default.filter(exceptionReaches, function (reacharray) {
						//TAS.log("matching "+basename+" with "+reacharray[0]);
						if (basename.indexOf(reacharray[0]) >= 0) {
							//TAS.log("it matches!"+reacharray[0]);
							return true;
						}
						return false;
					});
					//TAS.log(reach);
					if (reach && reach[0] && reach[0][1]) {
						memo[prefix + "range"] = reach[0][1];
					} else if (defaultReach) {
						memo[prefix + "range"] = defaultReach;
					}
				} else if (defaultReach) {
					memo[prefix + "range"] = defaultReach;
				}
			}
			if (attack.group) {
				memo[prefix + "group"] = attack.group;
			}
			if (attack.dc) {
				memo[prefix + "notes"] = memo[prefix + "notes"] + " " + attack.dc + attack.dcequation ? " " + attack.dcequation : '';
			}
		} catch (err) {
			_exportsLoaderTASTheAaronSheet2.default.error("createattacks error on:", attack, err);
		} finally {
			return memo;
		}
	}, setter);
	//TAS.debug("end of create attacks returning:", setter);
	return setter;
}
function createACEntries(setter, acMap, abilityScores, importantFeats, hpMap, bab) {
	var acAbility = "DEX",
	    acDexDef = abilityScores.dex.mod,
	    calcCMD = 0,
	    altbab = 0;
	try {
		//TAS.debug("acMap", acMap);
		if (acMap.altability) {
			//this should no longer happen.
			//TAS.debug("different ability score for AC!");
			acAbility = acMap.altability.toUpperCase();
			if (acAbility !== "DEX") {
				setter["AC-ability"] = "( ((@{XXX-mod} + [[ @{max-dex-source} ]]) - abs(@{XXX-mod} - [[ @{max-dex-source} ]])) / 2 )".replace(/XXX/g, acAbility);
				setter["CMD-ability2"] = "( ((@{XXX-mod} + [[ @{max-dex-source} ]]) - abs(@{XXX-mod} - [[ @{max-dex-source} ]])) / 2 )".replace(/XXX/g, acAbility);
				switch (acMap.altability.toLowerCase()) {
					case 'wis':
						acDexDef = abilityScores.wis.mod;
						break;
					case 'int':
						acDexDef = abilityScores['int'].mod;
						break;
					case 'cha':
						acDexDef = abilityScores.cha.mod;
						break;
					case 'con':
						acDexDef = abilityScores.con.mod;
						break;
					default:
						acDexDef = abilityScores.dex.mod;
						break;
				}
				setter["AC-ability-mod"] = acDexDef;
			}
		}
		//has uncanny dodge
		if (acMap.uncanny) {
			setter["FF-ability"] = "@{XXX-mod}".replace(/XXX/g, acAbility);
			setter["FF-ability-mod"] = acDexDef;
			setter["CMD-ability"] = "( ((@{XXX-mod} + [[ @{max-dex-source} ]]) - abs(@{XXX-mod} - [[ @{max-dex-source} ]])) / 2 )".replace(/XXX/g, acAbility);
			setter["CMD-ability"] = acDexDef;
			setter["uncanny_dodge"] = 1;
			setter["uncanny_cmd_dodge"] = 1;
		}
		altbab = bab;
		if (importantFeats.defensivecombattraining) {
			setter['hd_not_bab'] = 1;
			if (setter.level) {
				altbab = parseInt(setter.level, 10);
			}
			if (!altbab) {
				altbab = (hpMap.hdice1 || 0) + (hpMap.hdice2 || 0);
			}
		}
		try {
			calcCMD = 10 + altbab + abilityScores.str.mod + acDexDef + -1 * acMap.size;
			//TAS.debug("bab:"+altbab+"+ str:"+ abilityScores.str.mod + "+ dex" + acDexDef + " - size: " +acMap.size + ", calcCMD:"+calcCMD+", cmdparsed:"+acMap.cmd);
			if (isNaN(acMap.cmd) || calcCMD === acMap.cmd) {
				setter["CMD"] = calcCMD;
			} else {
				setter["CMD"] = acMap.cmd;
				setter["CMD-misc"] = acMap.cmd - calcCMD;
			}
		} catch (err2) {
			_exportsLoaderTASTheAaronSheet2.default.error("createACEntries error trying to calculate CMD", err2);
		}

		setter["AC"] = acMap.ac;
		setter["Touch"] = acMap.touch;
		setter["Flat-Footed"] = acMap.ff;
		setter["AC-deflect"] = acMap.deflect;
		setter["AC-dodge"] = acMap.dodge;
		setter["AC-misc"] = acMap.misc;
		setter["AC-natural"] = acMap.natural;
		if (acMap.armor) {
			setter["armor3-equipped"] = "1";
			setter["armor3-acbonus"] = acMap.armor;
			setter["armor3"] = "Armor bonus";
			setter["AC-armor"] = acMap.armor;
		}
		if (acMap.shield) {
			setter["shield3-equipped"] = "1";
			setter["shield3-acbonus"] = acMap.shield;
			setter["shield3"] = "Shield bonus";
			setter["AC-shield"] = acMap.shield;
		}
		if (acMap.notes) {
			setter['defense-notes'] = acMap.notes;
		}
		if (acMap.cmdnotes) {
			setter['cmd-notes'] = acMap.cmdnotes;
		}
		if (acMap.acbuff) {
			setter = PFBuffs.createTotalBuffEntry("AC adjustment from import", "AC", acMap.acbuff, acMap.acbuff, setter);
		}
	} catch (err) {} finally {
		return setter;
	}
}
function createSkillEntries(setter, skills, racial, abilityScores, importantFeats, classSkills, sizeMap, isUndead) {
	var npcSkillsWithFillInNames = ["Craft", "Perform", "Profession"],
	    craftLevel = -1,
	    performLevel = -1,
	    professionLevel = -1,
	    runningTot = 0,
	    counter = 0,
	    tempAbilities = PFSkills.coreSkillAbilityDefaults,
	    tempstr = "",
	    skillfeats = /skillfocus|intimidatingprowess/i;
	try {
		//TAS.debug("PFNPC createSkillEntries sizemap is: ", sizeMap, "skills ", skills , "racial", racial);
		if (racial) {
			if (racial.abilitymods && _underscore2.default.size(racial.abilitymods) > 0) {
				//set default ability for skill and substitute adjustments, make sure to use copy not original
				tempAbilities = _underscore2.default.extend({}, PFSkills.coreSkillAbilityDefaults, racial.abilitymods);
				setter = _underscore2.default.reduce(racial.abilitymods, function (memo, ability, skill) {
					memo[skill + "-ability"] = "@{" + ability.toUpperCase() + "-mod}";
					memo[skill + "-ability-mod"] = abilityScores[ability].mod;
					return memo;
				}, setter);
			}
			if (racial.skillmods && _underscore2.default.size(racial.skillmods) > 0) {
				setter = _underscore2.default.reduce(racial.skillmods, function (memo, mod, skill) {
					memo[skill + "-racial"] = mod;
					return memo;
				}, setter);
			}
			if (racial.skillnotes && racial.skillnotes.length > 0) {
				tempstr = "";
				_underscore2.default.each(racial.skillnotes, function (note) {
					tempstr += note + ", ";
				});
				tempstr.replace(/,\s$/, '');
				if (tempstr) {
					setter["Skill-notes"] = tempstr;
				}
			}
		}
		if (importantFeats && _underscore2.default.size(importantFeats) > 0) {
			setter = _underscore2.default.reduce(importantFeats, function (memo, val, feat) {
				if (/intimidatingprowess/i.test(feat)) {
					memo["Intimidate-misc"] = '@{STR-mod}';
					memo["Intimidate-misc-mod"] = abilityScores.str.mod;
				} else if (/skillfocus/i.test(feat)) {
					_underscore2.default.each(val, function (val2, skill) {
						memo[skill + "-feat"] = 3;
					});
				}
				return memo;
			}, setter);
		}
		if (classSkills && _underscore2.default.size(classSkills) > 0) {
			setter = _underscore2.default.reduce(classSkills, function (memo, skill) {
				try {
					if (skill === "Knowledge") {
						_underscore2.default.each(PFSkills.knowledgeSkills, function (kSkill) {
							memo[kSkill + "-cs"] = 3;
						});
					} else if (_underscore2.default.contains(PFSkills.coreSkillsWithFillInNames, skill)) {
						_underscore2.default.each(PFSkills.allFillInSkillInstances[skill], function (subskill) {
							memo[subskill + '-cs'] = 3;
						});
					} else {
						memo[skill + "-cs"] = 3;
					}
				} catch (err) {
					_exportsLoaderTASTheAaronSheet2.default.error("createSkillEntries", err);
				} finally {
					return memo;
				}
			}, setter);
		}
		setter = _underscore2.default.reduce(skills, function (memo, tot, skill) {
			var ability = "",
			    tempint = 0,
			    abilitymod = 0,
			    ranks = 0;
			try {
				tot = parseInt(tot, 10);
				if (tempAbilities[skill]) {
					ability = tempAbilities[skill];
					abilitymod = abilityScores[ability] ? abilityScores[ability].mod : 0;
					abilitymod = parseInt(abilitymod, 10);
					//TAS.debug("now setting " + skill + ", total:" + tot +", size:",sizeMap);
					memo[skill] = tot;
					ranks = tot;
					ranks -= abilitymod;
					if (skill === 'Stealth') {
						ranks -= 2 * sizeMap.skillSize;
					} else if (skill === 'Fly') {
						ranks -= sizeMap.skillSize;
					}
					if (racial && racial.skillmods && racial.skillmods[skill]) {
						ranks -= parseInt(racial.skillmods[skill], 10);
					}
					if (parseInt(memo[skill + "-feat"], 10) > 0) {
						ranks -= parseInt(memo[skill + "-feat"], 10);
					}
					if (parseInt(memo[skill + "-cs"], 10) > 0) {
						ranks -= 3;
					}
					memo[skill + "-ranks"] = ranks;
					memo[skill + "-ability-mod"] = abilitymod;
					runningTot++;
				} else {
					_exportsLoaderTASTheAaronSheet2.default.warn("createSkillEntries, skill " + skill + " not found");
				}
			} catch (err) {
				_exportsLoaderTASTheAaronSheet2.default.error("createSkillEntries inner reduce", err);
			} finally {
				return memo;
			}
		}, setter);
	} catch (errouter) {
		_exportsLoaderTASTheAaronSheet2.default.error("at createskillEntries OUTER error", errouter);
	} finally {
		return setter;
	}
}
function createInitEntries(setter, baseInit, abilityScores, importantFeats) {
	var initMisc = 0;
	try {
		initMisc = baseInit - abilityScores.dex.mod;
		setter["init"] = baseInit;
		setter["init-misc"] = initMisc;
		setter["init-misc-mod"] = initMisc;
		setter["init-ability-mod"] = abilityScores.dex.mod;
	} catch (err) {
		_exportsLoaderTASTheAaronSheet2.default.error("createInitEntries", err);
	} finally {
		return setter;
	}
}
function createHPAbilityModEntry(setter, abilityScores, isUndead) {
	try {
		if (isUndead || abilityScores.con.base === "-") {
			setter["HP-ability"] = "@{CHA-mod}";
			setter["HP-ability-mod"] = abilityScores.cha.mod;
		} else {
			setter["HP-ability-mod"] = abilityScores.con.mod;
		}
	} finally {
		return setter;
	}
}
function createHealthEntries(setter, abilityScores, isUndead, hpMap) {
	var currlevel = 0;
	try {
		setter["npc-hd-num"] = hpMap.hdice1;
		setter["level"] = hpMap.hdice1;
		setter["npc-hd"] = hpMap.hdie1;
		setter["HP"] = hpMap.hp;
		setter["HP_max"] = hpMap.hp;
		setter["non-lethal-damage_max"] = hpMap.hp;
		setter["auto_calc_hp"] = "1";
		setter["both_whisper_show"] = "1";
		//NPC: add to race row of class/race grid
		if (hpMap.basehp) {
			setter["NPC-HP"] = hpMap.basehp;
		}
		//bonuses
		if (hpMap.misc) {
			setter["HP-formula-macro-text"] = hpMap.misc;
			setter["HP-formula-mod"] = hpMap.misc;
		}
		if (hpMap.heal) {
			setter["npc-heal-conditions"] = hpMap.heal;
		}
	} catch (err) {
		_exportsLoaderTASTheAaronSheet2.default.error("createHealthEntries", err);
	} finally {
		return setter;
	}
}
function createSpeedEntries(setter, speedMap, importantFeats) {
	var tempstr = "";
	try {
		_underscore2.default.each(speedMap, function (speed, stype) {
			switch (stype) {
				case 'land':
					setter["speed-base"] = speed;
					setter["speed-modified"] = speed;
					break;
				case 'fly':
					setter["speed-fly"] = speed;
					break;
				case 'climb':
					setter["speed-climb"] = speed;
					break;
				case 'swim':
					setter["speed-swim"] = speed;
					break;
				case 'flyability':
					tempstr += "Fly (" + speed + ")";
					break;
				default:
					setter["speed-misc"] = speed;
					if (tempstr.length > 0) {
						tempstr += ", ";
					}
					tempstr += stype + " " + speed;
					break;
			}
		});
		if (tempstr) {
			setter["speed-notes"] = tempstr;
		}
		if (importantFeats.run) {
			setter["run-mult"] = 5;
		}
	} catch (err) {
		_exportsLoaderTASTheAaronSheet2.default.error("parseAndSetSpeed error, speedMap", speedMap, err);
	} finally {
		return setter;
	}
}
function createSaveEntries(setter, abilityScores, isUndead, baseSaves, v) {
	var fortMisc,
	    refMisc,
	    willMisc,
	    tempNote = "",
	    tempstr = "";
	try {
		fortMisc = baseSaves.baseFort - abilityScores.con.mod;
		refMisc = baseSaves.baseRef - abilityScores.dex.mod;
		willMisc = baseSaves.baseWill - abilityScores.wis.mod;
		if (isUndead || abilityScores.con.base === "-") {
			fortMisc = baseSaves.baseFort - abilityScores.cha.mod;
			setter["Fort-ability"] = "@{CHA-mod}";
			setter["Fort-ability-mod"] = abilityScores.cha.mod;
		} else {
			setter["Fort-ability-mod"] = abilityScores.con.mod;
		}
		setter["npc-Fort"] = fortMisc;
		setter["Fort"] = baseSaves.baseFort;
		tempNote = "";
		tempstr = PFUtils.getNoteAfterNumber(v["fort_compendium"]);
		if (tempstr) {
			tempNote += "Fortitude " + tempstr;
		}
		setter["npc-Ref"] = refMisc;
		setter["Ref"] = baseSaves.baseRef;
		if (abilityScores.dex.mod !== 0) {
			setter["Ref-ability-mod"] = abilityScores.dex.mod;
		}
		tempstr = PFUtils.getNoteAfterNumber(v["ref_compendium"]);
		if (tempstr) {
			tempNote += "Reflex " + tempstr;
		}
		setter["npc-Will"] = willMisc;
		setter["Will"] = baseSaves.baseWill;
		if (abilityScores.wis.mod !== 0) {
			setter["Will-ability-mod"] = abilityScores.wis.mod;
		}
		tempstr = PFUtils.getNoteAfterNumber(v["will_compendium"]);
		if (tempstr) {
			tempNote += "Willpower " + tempstr;
		}
		if (tempNote) {
			setter["saves_notes"] = tempNote;
			setter["toggle_save_notes"] = "1";
		}
	} catch (err) {
		_exportsLoaderTASTheAaronSheet2.default.error("createSaveEntries", err);
	} finally {
		return setter;
	}
}
function createAbilityScoreEntries(setter, abilityScores) {
	try {
		setter["STR-base"] = abilityScores.str.base;
		setter["DEX-base"] = abilityScores.dex.base;
		setter["CON-base"] = abilityScores.con.base;
		setter["WIS-base"] = abilityScores.wis.base;
		setter["INT-base"] = abilityScores['int'].base;
		setter["CHA-base"] = abilityScores.cha.base;
		setter["STR"] = abilityScores.str.base;
		setter["DEX"] = abilityScores.dex.base;
		setter["CON"] = abilityScores.con.base;
		setter["WIS"] = abilityScores.wis.base;
		setter["INT"] = abilityScores['int'].base;
		setter["CHA"] = abilityScores.cha.base;
		setter["STR-mod"] = abilityScores.str.mod;
		setter["DEX-mod"] = abilityScores.dex.mod;
		setter["CON-mod"] = abilityScores.con.mod;
		setter["WIS-mod"] = abilityScores.wis.mod;
		setter["INT-mod"] = abilityScores['int'].mod;
		setter["CHA-mod"] = abilityScores.cha.mod;
	} catch (err) {
		_exportsLoaderTASTheAaronSheet2.default.error("createAbilityScoreEntries", err);
	} finally {
		return setter;
	}
}
function parseAndCreateAttacks(setter, abilityScores, sizeMap, importantFeats, bab, attackGrid, reachObj, v) {
	var attacklist,
	    attackArrays,
	    matches,
	    tempstr = '',
	    defReach = 5,
	    tempCMB,
	    miscCMB = 0,
	    calcCMB = 0,
	    reachExceptions = [];
	try {
		if (reachObj) {
			if (reachObj.reach) {
				defReach = reachObj.reach;
			}
			if (reachObj.reachExceptions) {
				reachExceptions = reachObj.reachExceptions;
			}
		}
		setter["bab"] = bab;
		setter["npc-bab"] = bab;
		setter["melee-ability-mod"] = abilityScores.str.mod;
		setter["attk-melee"] = abilityScores.str.mod + bab + sizeMap.size;
		attackGrid.melee = abilityScores.str.mod + bab + sizeMap.size;
		setter["ranged-ability-mod"] = abilityScores.dex.mod;
		setter["attk-ranged"] = abilityScores.dex.mod + bab + sizeMap.size;
		attackGrid.ranged = abilityScores.dex.mod + bab + sizeMap.size;
		if (importantFeats.criticalfocus) {
			setter["cmb_crit_conf"] = 4;
			setter["ranged_crit_conf"] = 4;
			setter["melee_crit_conf"] = 4;
		}
		if (importantFeats.weaponfinesse) {
			setter["melee2-ability"] = "@{DEX-mod}";
			setter["melee2-ability-mod"] = abilityScores.dex.mod;
			setter["attk-melee2"] = abilityScores.dex.mod + bab + sizeMap.size;
			attackGrid.melee2 = abilityScores.dex.mod + bab + sizeMap.size;
			setter["attk_melee2_note"] = 'Weapon Finesse';
			if (importantFeats.criticalfocus) {
				setter["melee2_crit_conf"] = 4;
			}
		}
		try {
			if (importantFeats.agilemaneuvers) {
				setter["CMB-ability"] = "@{DEX-mod}";
				setter["CMB-ability-mod"] = abilityScores.dex.mod;
				calcCMB = abilityScores.dex.mod + bab - sizeMap.size;
				setter["cmb_desc"] = 'Agile Maneuvers';
			} else {
				setter["CMB-ability-mod"] = abilityScores.str.mod;
				calcCMB = abilityScores.str.mod + bab - sizeMap.size;
			}
			matches = v.cmb_compendium.match(/\d+/);
			if (matches) {
				tempCMB = parseInt(matches[0], 10);
				miscCMB = tempCMB - calcCMB;
				setter["CMB"] = tempCMB;
				attackGrid.cmb = tempCMB;
				if (miscCMB) {
					setter["attk-CMB-misc"] = miscCMB;
				}
				tempstr = v.cmb_compendium.slice(matches.index + matches[0].length);
				if (tempstr) {
					attackGrid.cmbnotes = tempstr;
					setter["CMB-notes"] = tempstr;
				}
			} else {
				setter["CMB"] = calcCMB;
				attackGrid.cmb = calcCMB;
			}
		} catch (errC) {
			_exportsLoaderTASTheAaronSheet2.default.error("parseAndCreateAttacks error creating CMB attack types", errC);
		}
		// Attacks *****************************
		if (v["npc-melee-attacks-text"]) {
			try {
				attacklist = parseAttacks(v["npc-melee-attacks-text"], "melee");
				assignPrimarySecondary(attacklist);
				setter = createAttacks(attacklist, setter, attackGrid, abilityScores, importantFeats, defReach, reachExceptions, sizeMap);
			} catch (errM) {
				_exportsLoaderTASTheAaronSheet2.default.error("parseAndCreateAttacks error creating melee attacks", errM);
			}
		}
		if (v["npc-ranged-attacks-text"]) {
			try {
				attacklist = parseAttacks(v["npc-ranged-attacks-text"], "ranged");
				setter = createAttacks(attacklist, setter, attackGrid, abilityScores, importantFeats, null, null, sizeMap);
			} catch (errR) {
				_exportsLoaderTASTheAaronSheet2.default.error("parseAndCreateAttacks error creating ranged attacks", errR);
			}
		}
	} catch (err) {
		_exportsLoaderTASTheAaronSheet2.default.error("parseAndCreateAttacks", err);
	} finally {
		return setter;
	}
}
/*createFeatEntries
 *@returns setter */
function createFeatEntries(setter, featlist) {
	return _underscore2.default.reduce(featlist, function (memo, feat) {
		var newRowId = generateRowID(),
		    prefix = "repeating_ability_" + newRowId + "_";
		memo[prefix + "name"] = feat;
		memo[prefix + "rule_category"] = "feats";
		memo[prefix + "showinmenu"] = "1";
		memo[prefix + "CL-basis"] = "@{npc-hd-num}";
		memo[prefix + "CL-basis-mod"] = setter.level || 0;
		if (setter["race"]) {
			memo[prefix + 'class-name'] = setter["race"];
		}
		memo[prefix + "row_id"] = newRowId;
		memo[prefix + "frequency"] = 'not-applicable'; //'not-applicable';
		memo[prefix + 'ability_type'] = ''; //'not-applicable';
		return memo;
	}, setter);
}
/*createFeatureEntries
 *@returns setter */
function createFeatureEntries(setter, abilitylist, abilityScoreMap) {
	var attrs = {},
	    creatureRace = "",
	    tempint = 0,
	    dc = 0,
	    abilityMod = 0,
	    charlevel = 0,
	    calcDC = 0;
	try {
		//TAS.debug("at createFeatureEntries:", abilitylist);
		charlevel = Math.floor((parseInt(setter.level, 10) || 0) / 2);
		creatureRace = setter["race"];
		attrs = _underscore2.default.chain(abilitylist).map(function (ability) {
			var match = null,
			    tempstr;
			//copy only settings we want to keep and return them in a new obj.
			//TAS.debug("first iter: ", ability);
			try {
				ability.description = ability.description || '';
				if (ability.note) {
					if (ability.description) {
						ability.description += ', ';
					}
					ability.description += ability.note.replace(/,\s$/, '');
				}
				if (ability.other) {
					if (ability.description) {
						ability.description += ', ';
					}
					ability.description += ability.other.replace(/,\s$/, '');
					ability.other = null;
				}
				if (!ability.ability_type) {
					if (ability.name) {
						tempstr = PFUtils.getSpecialAbilityTypeFromString(ability.name);
						if (tempstr) {
							ability.ability_type = tempstr;
							ability.name = ability.name.replace(/\b(Su|Ex|Sp)\b/i, '').replace('()', '');
						}
					}
				}
			} catch (err3) {
				_exportsLoaderTASTheAaronSheet2.default.error("createFeatureEntries err3", err3);
			} finally {
				//TAS.debug("this ability is:", ability);
				return ability;
			}
		}).filter(function (ability) {
			if (ability.name) {
				return true;
			}
			return false;
		}).reduce(function (memo, ability) {
			var newRowId, prefix;
			try {
				newRowId = generateRowID();
				prefix = "repeating_ability_" + newRowId + "_";
				memo[prefix + "name"] = ability.name;
				memo[prefix + "row_id"] = newRowId;
				memo[prefix + "showinmenu"] = '1';
				if (ability.shortdesc) {
					memo[prefix + 'short-description'] = ability.shortdesc;
				}
				if (ability.description) {
					memo[prefix + 'description'] = ability.description;
				}
				if (ability.used) {
					if (ability.frequency && ability.frequency === 'everyrounds') {
						memo[prefix + "frequency"] = ability.frequency;
						memo[prefix + 'rounds_between'] = ability.used;
					} else {
						if (ability.frequency) {
							memo[prefix + "frequency"] = ability.frequency;
						} else {
							memo[prefix + "frequency"] = 'perday';
						}
						memo[prefix + 'used'] = ability.used;
						memo[prefix + 'used_max'] = ability.used;
						memo[prefix + 'max-calculation'] = ability.used;
					}
				} else {
					memo[prefix + "frequency"] = 'not-applicable'; //'not-applicable';
				}
				if (ability.dmgtype) {
					memo[prefix + "damage-type"] = ability.dmgtype;
				}
				if (ability.rule_category) {
					memo[prefix + 'rule_category'] = ability.rule_category;
				}
				if (ability.ability_type) {
					memo[prefix + 'ability_type'] = ability.ability_type;
				} else {
					memo[prefix + 'ability_type'] = ''; //'not-applicable';
				}
				memo[prefix + "CL-basis"] = "@{npc-hd-num}";
				memo[prefix + "CL-basis-mod"] = setter.level || 0;
				if (creatureRace) {
					memo[prefix + 'class-name'] = creatureRace;
				}
				if (ability.save) {
					memo[prefix + 'save'] = ability.save;
				}

				if (ability.DCability) {
					memo[prefix + 'ability-basis'] = '@{' + ability.DCability.toUpperCase() + '-mod}';
					abilityMod = abilityScoreMap[ability.DCability.toLowerCase()].mod;
				} else if (ability.ability_type === 'Sp' || setter.is_undead) {
					memo[prefix + 'ability-basis'] = '@{CHA-mod}';
					abilityMod = abilityScoreMap.cha.mod;
				} else {
					memo[prefix + 'ability-basis'] = '@{CON-mod}';
					abilityMod = abilityScoreMap.con.mod;
				}
				if (ability.extraDamage) {
					memo[prefix + 'damage-macro-text'] = ability.extraDamage;
				}
				if (ability.extraDamageType) {
					memo[prefix + 'damage-type'] = ability.extraDamageType;
				}
				memo[prefix + "spell_level-basis"] = "floor(@{casterlevel}/2)";
				if (ability.DC) {
					dc = parseInt(ability.DC, 10) || 0;
					calcDC = abilityMod + charlevel + 10;
					tempint = dc - calcDC;
					if (tempint !== 0) {
						memo[prefix + "spell_level-misc"] = tempint;
						memo[prefix + "spell_level-misc-mod"] = tempint;
					}
				}
			} catch (ierr2) {
				_exportsLoaderTASTheAaronSheet2.default.error("createFeatureEntries", ierr2);
			} finally {
				return memo;
			}
		}, {}).value();
		//TAS.debug"createFeatureAttrs adding " + _.size(attrs) + " to " + _.size(setter), attrs);
		setter = _underscore2.default.extend(setter, attrs);
	} catch (err) {
		_exportsLoaderTASTheAaronSheet2.default.error("createFeatureEntries", err);
	} finally {
		return setter;
	}
}
/** appends values of objects in sa2 to sa1 if name already exists in sa1
 * by reference
 * @param {Array} sa1 Array of {} js objects:list of special abilities maps. Must have 'name' property to compare
 * @param {Array} sa2 Array of {} js objects:list of special abilities maps. Must have 'name' property to compare
 * @returns {Array} sa2 concatenated with sa2, for any duplicates, we add properties from the sa2 version to sa1, but do not overwrite.
 */
function combineSpecialAbilities(sa1, sa2) {
	var combined;
	combined = _underscore2.default.map(sa1, function (sa) {
		var existingSA;
		try {
			existingSA = _underscore2.default.findWhere(sa2, { 'name': sa.name });
			if (existingSA) {
				_underscore2.default.each(_underscore2.default.keys(existingSA), function (key) {
					//TAS.debug("combining abilties: "+sa[key]+ " plus "+ existingSA[key]);
					if (key === 'description') {
						sa.description = (sa.description ? sa.description + ", " : "") + (existingSA.description || "");
					} else if (key === 'shortdesc') {
						sa.shortdesc = (sa.shortdesc ? sa.shortdesc + ", " : "") + (existingSA.shortdesc || "");
					} else if (!sa[key] && existingSA[key]) {
						sa[key] = existingSA[key];
					}
				});
			}
		} catch (err1) {
			_exportsLoaderTASTheAaronSheet2.default.error("combineSpecialAbilities err1", err1);
		} finally {
			return sa;
		}
	});
	sa2 = _underscore2.default.reject(sa2, function (sa) {
		if (_underscore2.default.findWhere(sa1, { 'name': sa.name })) {
			return true;
		}
		return false;
	});

	combined = _underscore2.default.union(combined, sa2);
	return combined;
}
function createClassEntries(setter, characterClass) {
	var sumlvls = 0,
	    currlvls = 0,
	    i = 0,
	    startidx = 0,
	    alreadyPresent = false;
	try {
		if (characterClass.CL && characterClass.classname) {
			for (i = 0; i < 7; i++) {
				if (setter["class-" + i + "-name"] || setter["class-" + i + "-level"] > 0) {
					startidx = i;
					if (setter["class-" + i + "-name"].toLowerCase() === characterClass.classname.toLowerCase()) {
						alreadyPresent = true;
						break;
					}
				}
			}
			if (startidx >= 6) {
				_exportsLoaderTASTheAaronSheet2.default.warning("too many classes, cannot add " + characterClass.classname);
			} else {
				setter["class-" + startidx + "-name"] = characterClass.classname || "";
				setter["class-" + startidx + "-level"] = characterClass.CL || 0;
			}
			if (characterClass.CL) {
				currlvls = parseInt(setter.level, 10) || 0;
				currlvls += characterClass.CL || 0;
				setter.level = currlvls;
			}
		}
	} catch (err) {
		_exportsLoaderTASTheAaronSheet2.default.error("createClassEntries", err);
	} finally {
		return setter;
	}
}

/**************************** THE BIG ONE ***********************/
/*importFromCompendium - imports all stuff*/
function importFromCompendium(eventInfo, callback, errorCallback) {
	var done = _underscore2.default.once(function () {
		_exportsLoaderTASTheAaronSheet2.default.info("##############################################");
		_exportsLoaderTASTheAaronSheet2.default.info("Leaving importFromCompendium");
		if (typeof callback === "function") {
			callback();
		}
	}),
	    errorDone = _underscore2.default.once(function () {
		_exportsLoaderTASTheAaronSheet2.default.info("##############################################");
		_exportsLoaderTASTheAaronSheet2.default.info("Leaving importFromCompendium NOTHING DONE");
		if (typeof errorCallback === "function") {
			errorCallback();
		}
	}),
	    fields = npcCompendiumAttributesPlayer.concat(["is_npc", "alignment"]);
	getAttrs(fields, function (v) {
		var setter = {},
		    abilityScores = {},
		    sizeMap = {},
		    speedMap = {},
		    hpMap = {},
		    acMap = {},
		    importantFeats = {},
		    reachObj = {},
		    racialModsMap = {},
		    skillsMap = {},
		    attackGrid = {},
		    baseFort = parseInt(v.fort_compendium, 10) || 0,
		    baseRef = parseInt(v.ref_compendium, 10) || 0,
		    baseWill = parseInt(v.will_compendium, 10) || 0,
		    bab = parseInt(v["bab_compendium"], 10) || 0,
		    reachExceptions = [],
		    isUndead = false,
		    specAbilObj = {},
		    npcdesc = '',
		    tempNote = "",
		    tempstr = "",
		    tempInt = 0,
		    tempFloat = 0.0,
		    tempobj = null,
		    baseInit = 0,
		    initMisc = 0,
		    spellcastingclass = -1,
		    cr,
		    featlist,
		    attacklist,
		    hpMod,
		    tempArray,
		    spellObj,
		    casterObj,
		    matches,
		    attackArray,
		    classSkillArray,
		    specialAttacks,
		    SLAs,
		    attackArrays,
		    specialAbilities = {},
		    specialQualities = [],
		    match,
		    baseSaves = {};
		//TAS.debug("importFromCompendium", v);
		try {
			//some basics ***************************************************
			setter['level'] = 0;
			setter["is_npc"] = "1";
			setter['is_v1'] = "1";
			setter['PFSheet_Version'] = String(_PFConst2.default.version.toFixed(2));
			setter = PFMigrate.getAllMigrateFlags(setter);
			if (v.xp_compendium) {
				setter["npc-xp"] = v.xp_compendium;
			}
			if (v.cr_compendium) {
				cr = v.cr_compendium.replace(/\s*cr\s*/i, '');
				cr = SWUtils.trimBoth(cr);
				setter["npc-cr"] = cr;
			}
			setter["PC-Whisper"] = "/w gm";
			//Creature Race and Type *****************************************************
			//undead means use CHA instead of CON
			if (v.type_compendium) {
				setter["npc-type"] = v.type_compendium;
			}
			isUndead = /undead/i.test(v.type_compendium) || /undead/i.test(v.character_name);
			if (isUndead) {
				setter["is_undead"] = "1";
				_exportsLoaderTASTheAaronSheet2.default.warn("is undead! ");
			}
			if (v.character_name) {
				setter["race"] = v["character_name"];
			}

			/****************** class(es)******************************/
			if (v.class_compendium) {
				setter["add_class"] = 1;
				tempInt = 0;
				matches = v.class_compendium.split(/\s*,\s*/g);
				_underscore2.default.each(matches, function (classstr) {
					var lvl = 0,
					    localmatch = classstr.match(/\d+/),
					    newclassstr = classstr;
					tempInt++;
					if (match) {
						lvl = parseInt(match[0], 10) || 0;
						newclassstr = classstr.slice(0, match.index);
						if (match.index + match[0].length <= classstr.length) {
							newclassstr += classstr.slice(match.index + match[0].length);
						}
					}
					setter = createClassEntries(setter, { 'classname': classstr, 'CL': lvl });
				});
				if (tempInt > 1) {
					setter["multiclassed"] = 1;
					setter["class1_show"] = 1;
				}
				tempInt = 0;
			}
			// Ability Scores *****************************************************************
			abilityScores = parseAbilityScores(v);
			setter = createAbilityScoreEntries(setter, abilityScores, isUndead);
			// Size **********************************************************************
			sizeMap = PFSize.getSizeFromText(v.size_compendium);
			if (sizeMap && sizeMap.size !== 0) {
				setter.size = sizeMap.size;
				setter['default_char_size'] = sizeMap.size;
				setter['old_size'] = sizeMap.size;
				setter.size_skill = sizeMap.skillSize;
				setter["CMD-size"] = sizeMap.size * -1;
				setter.size_skill_double = sizeMap.skillSize * 2;
			} else {
				sizeMap = { 'size': 0, 'size_skill': 0, 'CMD-size': 0, 'size_skill_double': 0 };
				setter['size'] = 0;
				setter['default_char_size'] = 0;
				setter['old_size'] = 0;
			}
			// Feats *********************************************************************
			if (v["npc-feats-text"]) {
				try {
					featlist = parseFeats(v["npc-feats-text"]);
					if (featlist && _underscore2.default.size(featlist) > 0) {
						setter = createFeatEntries(setter, featlist);
						importantFeats = buildImportantFeatObj(featlist);
					}
				} catch (featerr) {
					_exportsLoaderTASTheAaronSheet2.default.error("error parsing feats", featerr);
					if (!importantFeats) {
						importantFeats = {};
					}
				}
			}
			// Initiative *****************************************************************
			baseInit = getNPCInit(v.init_compendium);
			createInitEntries(setter, baseInit, abilityScores, importantFeats);
			/********************** Saves and defense ************************/
			baseSaves = {
				'baseFort': baseFort,
				'baseRef': baseRef,
				'baseWill': baseWill
			};
			if (v.dr_compendium) {
				setter["DR"] = v.dr_compendium;
			}
			if (v.sr_compendium) {
				setter["SR"] = v.sr_compendium;
				setter["SR-macro-text"] = v.sr_compendium;
			}
			createSaveEntries(setter, abilityScores, isUndead, baseSaves, v);

			//hit points ****************************
			createHPAbilityModEntry(setter, abilityScores, isUndead);
			hpMod = parseInt(setter["HP-ability-mod"], 10);
			//TAS.debug("calling parse hp with con mod of :" + hpMod);
			hpMap = parseNPChp(v["npc_hp_compendium"], hpMod);
			createHealthEntries(setter, abilityScores, isUndead, hpMap);

			//AC ************************************************
			acMap = parseNPCAC(v["ac_compendium"], v.cmd_compendium, abilityScores.dex.mod, sizeMap.size);
			createACEntries(setter, acMap, abilityScores, importantFeats, hpMap, bab);
			// Reach *******************************************
			//TAS.debug("about to find reach: " + v.reach_compendium);
			reachObj = parseReach(v.reach_compendium);
			if (reachObj) {
				setter.reach = reachObj.reach;
				if (reachObj.reachNotes) {
					setter["reach-notes"] = reachObj.reachNotes;
				}
			} else {
				reachObj = {};
				reachObj.reach = 5;
				reachObj.reachExceptions = [];
			}
			// Attacks *********************************************************
			parseAndCreateAttacks(setter, abilityScores, sizeMap, importantFeats, bab, attackGrid, reachObj, v);
			//TAS.debug("after parseAndCreateAttacks attrnum:" + _.size(setter));
			//special Attacks ***************************************************
			specialAttacks = parseSpecialAttacks(setter, v["npc-special-attacks"], attackGrid.cmb);
			if (specialAttacks && specialAttacks.length > 0) {
				attackArrays = _underscore2.default.groupBy(specialAttacks, 'specialtype');
				setter = createAttacks(attackArrays.attack, setter, attackGrid, abilityScores, importantFeats, null, null, sizeMap);
				specialAbilities = attackArrays.ability;
				//TAS.debug("after createSpecialAttackEntries attrnum:" + _.size(setter));
			}
			//spells***************************************************
			//TAS.debug("checking for spells");
			if (v["npc-spells-known-text"]) {
				//advance index
				spellcastingclass = 0;
				setter['use_spells'] = 1;
				//TAS.debug("has some spells");
				spellObj = parseSpells(v["npc-spells-known-text"]);
				//TAS.debug("the spells are:",spellObj);
				if (spellObj) {
					setter['use_spells'] = 1;
					casterObj = getCasterObj(spellObj, abilityScores, hpMap);
					//do not add caster levels to hit dice or it gets screwed up
					//setter = createClassEntries (setter,casterObj);
					setter = setCasterFields(setter, casterObj, spellcastingclass);
					setter = createSpellEntries(setter, spellObj, casterObj);
				}
			}
			//Spell-like-abilities***************************************************
			//TAS.debug("checking for SLAs");
			if (v["npc-spellike-ability-text"]) {
				SLAs = parseSLAs(v["npc-spellike-ability-text"]);
				if (SLAs) {
					//TAS.debug("the SLAs are:", SLAs);
					casterObj = getCasterObj(SLAs, abilityScores, hpMap, true);
					setter = createSLAEntries(setter, SLAs, casterObj);
				}
			}
			//TAS.debug("before parsing special abilities are:", specialAbilities);
			// content and special abilities ***************************
			if (v.content_compendium) {
				//TAS.debug("before parseSpecialAbilities attrnum:"+_.size(setter));
				specAbilObj = parseSpecialAbilities(v.content_compendium);

				//TAS.debug("returned from parse special ablities with", specAbilObj);
				if (specAbilObj) {
					if (specAbilObj.description && _underscore2.default.size(specAbilObj.description) > 0) {
						npcdesc = _underscore2.default.reduce(specAbilObj.description, function (memo, line) {
							memo += " ";
							memo += line;
							return memo;
						}, "");
						setter["character_description"] = npcdesc;
					}
					if (specAbilObj.specialAbilities) {
						specialAbilities = combineSpecialAbilities(specialAbilities, specAbilObj.specialAbilities);
					}
				} else {
					v['character-description'] = v.content_compendium;
				}
				//TAS.debug("now special abilities are:", specialAbilities);
			}
			if (v.SQ_compendium) {
				//TAS.debug("found special qualities");
				specialQualities = parseSpecialQualities(v.SQ_compendium);
				if (specialQualities) {
					specialAbilities = combineSpecialAbilities(specialAbilities, specialQualities);
				}
			}
			if (specialAbilities && _underscore2.default.size(specialAbilities) > 0) {
				setter = createFeatureEntries(setter, specialAbilities, abilityScores);
				//look for sneak attack
				tempobj = _underscore2.default.find(specialAbilities, function (atkobj) {
					return (/sneak.attack/i.test(atkobj.name)
					);
				});
				if (tempobj) {
					setter['global_precision_dmg_macro'] = '[[[[floor((@{level}+1)/2)]]d6]]';
					setter['global_precision_dmg_type'] = tempobj.name;
				}

				//TAS.debug("after createFeatureEntries attrnum:" + _.size(setter));
			}

			// Misc *********************************************
			if (v.senses_compendium) {
				match = v.senses_compendium.match(/perception/i);
				if (match) {
					setter["vision"] = v.senses_compendium.slice(0, match.index - 1);
				} else {
					setter["vision"] = v.senses_compendium;
				}
			}
			if (v.speed_compendium) {
				speedMap = parseSpeed(v.speed_compendium);
				setter = createSpeedEntries(setter, speedMap, importantFeats);
			}
			if (v.alignment) {
				setter["alignment"] = v.alignment.toUpperCase();
			}
			if (v.space_compendium) {
				setter["space"] = parseSpace(v.space_compendium);
			}
			//TAS.debug("before skills attrnum:" + _.size(setter));
			// skills *********************************************************
			if (v.skills_compendium) {
				skillsMap = parseSkills(v.skills_compendium);
				classSkillArray = getCreatureClassSkills(v.type_compendium);
				if (v.racial_mods_compendium) {
					racialModsMap = parseSkillRacialBonuses(v.racial_mods_compendium);
				}
				if (skillsMap && _underscore2.default.size(skillsMap) > 0) {
					setter = createSkillEntries(setter, skillsMap, racialModsMap, abilityScores, importantFeats, classSkillArray, sizeMap, isUndead);
					//TAS.debug("after createSkillEntries attrnum:" + _.size(setter));
				}
			}
		} catch (err2) {
			_exportsLoaderTASTheAaronSheet2.default.error("importFromCompendium outer at end", err2);
		} finally {
			if (_underscore2.default.size(setter) > 0) {
				setter["npc_import_now"] = 0;
				setter['npc-compimport-show'] = 0;
				_exportsLoaderTASTheAaronSheet2.default.info("##############################################", "END OF importFromCompendium");
				setAttrs(setter, _PFConst2.default.silentParams, done);
			} else {
				setter["npc_import_now"] = 0;
				setter['npc-compimport-show'] = 0;
				setAttrs(setter, _PFConst2.default.silentParams, errorDone);
			}
		}
	});
}

_PFLog.PFConsole.log('   NPCParser module loaded        ');
_PFLog.PFLog.modulecount++;

/***/ }),
/* 37 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
	value: true
});
exports.migrate = migrate;
exports.recalculate = recalculate;

var _underscore = __webpack_require__(2);

var _underscore2 = _interopRequireDefault(_underscore);

var _PFLog = __webpack_require__(0);

var _exportsLoaderTASTheAaronSheet = __webpack_require__(1);

var _exportsLoaderTASTheAaronSheet2 = _interopRequireDefault(_exportsLoaderTASTheAaronSheet);

var _SWUtils = __webpack_require__(4);

var SWUtils = _interopRequireWildcard(_SWUtils);

var _PFConst = __webpack_require__(3);

var _PFConst2 = _interopRequireDefault(_PFConst);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

/* **************PSIONIC************** */
function updatePsionicBonusPower(callback, silently) {
	var done = _underscore2.default.once(function () {
		if (typeof callback === "function") {
			callback();
		}
	});
	getAttrs(["selected-ability-psionic-power", "psionic-level-total", "ability-psionic-power"], function (v) {
		SWUtils.evaluateExpression(v["selected-ability-psionic-power"], function (value) {
			var ability = 0,
			    currentTotal = 0,
			    newTotal = 0,
			    params = {},
			    finished = false;
			try {
				ability = parseInt(value, 10) || 0;
				currentTotal = parseInt(v["ability-psionic-power"], 10) || 0;
				newTotal = Math.floor(ability * (parseInt(v["psionic-level-total"], 10) || 0) * 0.5);
				//TAS.debug("ability=" + ability, "newTotal=" + newTotal, "currentTotal=" + currentTotal);
				if (currentTotal !== newTotal) {
					if (silently) {
						params = _PFConst2.default.silentParams;
					}
					finished = true;
					setAttrs({
						"ability-psionic-power": newTotal
					}, params, done);
				}
			} catch (err) {
				_exportsLoaderTASTheAaronSheet2.default.error("PFPsionic.updatePsionicBonusPower", err);
			} finally {
				if (!finished) {
					done();
				}
			}
		});
	});
}
function migrate(callback) {
	if (typeof callback === "function") {
		callback();
	}
}
function recalculate(callback, silently, oldversion) {
	var done = _underscore2.default.once(function () {
		_exportsLoaderTASTheAaronSheet2.default.info("Leaving PFPsionic.recalculate");
		if (typeof callback === "function") {
			callback();
		}
	});
	getAttrs(["psionics-show"], function (v) {
		try {
			if (parseInt(v["psionics-show"], 10) === 1) {
				updatePsionicBonusPower(done, silently);
			} else {
				done();
			}
		} catch (err2) {
			_exportsLoaderTASTheAaronSheet2.default.error("PFPsionic.recalculate", err2);
			done();
		}
	});
}
function registerEventHandlers() {
	on("change:psionic-level change:psionic-level-misc", _exportsLoaderTASTheAaronSheet2.default.callback(function eventUpdatePsionicLevel(eventInfo) {
		_exportsLoaderTASTheAaronSheet2.default.debug("caught " + eventInfo.sourceAttribute + " event: " + eventInfo.sourceType);
		if (eventInfo.sourceType === "player" || eventInfo.sourceType === "api") {
			SWUtils.updateRowTotal(["psionic-level-total", "psionic-level", "psionic-level-misc"]);
		}
	}));
	on("change:class-psionic-power change:ability-psionic-power change:misc-psionic-power", _exportsLoaderTASTheAaronSheet2.default.callback(function eventUpdatePsionicPower(eventInfo) {
		_exportsLoaderTASTheAaronSheet2.default.debug("caught " + eventInfo.sourceAttribute + " event: " + eventInfo.sourceType);
		if (eventInfo.sourceType === "player" || eventInfo.sourceType === "api" || eventInfo.sourceType === "sheetworker" && eventInfo.sourceAttribute === 'ability-psionic-power') {
			SWUtils.updateRowTotal(["psionic-power_max", "class-psionic-power", "ability-psionic-power", "misc-psionic-power"]);
		}
	}));
	on("change:selected-ability-psionic-power change:psionic-level-total", _exportsLoaderTASTheAaronSheet2.default.callback(function eventUpdatePsionicBonusPower(eventInfo) {
		_exportsLoaderTASTheAaronSheet2.default.debug("caught " + eventInfo.sourceAttribute + " event: " + eventInfo.sourceType);
		updatePsionicBonusPower();
	}));
}
registerEventHandlers();
_PFLog.PFConsole.log('   PFPsionic module loaded        ');
_PFLog.PFLog.modulecount++;

/***/ }),
/* 38 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.optionTemplateRegexes = exports.optionTemplates = exports.optionToggles = undefined;
exports.updateSpellOption = updateSpellOption;
exports.getOptionText = getOptionText;
exports.resetOption = resetOption;
exports.resetOptions = resetOptions;
exports.recalculate = recalculate;

var _underscore = __webpack_require__(2);

var _underscore2 = _interopRequireDefault(_underscore);

var _exportsLoaderTASTheAaronSheet = __webpack_require__(1);

var _exportsLoaderTASTheAaronSheet2 = _interopRequireDefault(_exportsLoaderTASTheAaronSheet);

var _PFLog = __webpack_require__(0);

var _PFConst = __webpack_require__(3);

var _PFConst2 = _interopRequireDefault(_PFConst);

var _SWUtils = __webpack_require__(4);

var SWUtils = _interopRequireWildcard(_SWUtils);

var _PFUtils = __webpack_require__(5);

var PFUtils = _interopRequireWildcard(_PFUtils);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var optionToggles = exports.optionToggles = ["toggle_spell_school_notes", "toggle_spell_casting_time_notes", "toggle_spell_duration_notes", "toggle_spell_saving_throw_notes", "toggle_spell_sr_notes", "toggle_spell_range_notes", "toggle_spell_targets_notes", "toggle_spell_description_notes", "toggle_spell_concentration_notes", "toggle_spell_concentration_check", "toggle_spell_casterlevel_notes", "toggle_spell_casterlevel_check", "toggle_spell_level_notes", "toggle_spell_components_notes", "toggle_spell_spellnotes_notes", "toggle_spell_spell_fail_check", "toggle_spell_damage_notes"],
    optionTemplates = exports.optionTemplates = {
    school: "{{school=REPLACE}}",
    casting_time: "{{casting_time=REPLACE}}",
    components: "{{components=REPLACE}}",
    duration: "{{duration=REPLACE}}",
    saving_throw: "{{saving_throw=REPLACE}}",
    sr: "{{sr=REPLACE}}",
    casterlevel: "{{casterlevel=[[ REPLACE ]]}}",
    range: "{{range=REPLACE}}",
    targets: "{{targets=REPLACE}}",
    Concentration: "{{Concentration=[[ REPLACE ]]}}",
    description: "{{description=REPLACE}}",
    dc: "{{dc=[[ REPLACE ]]}}",
    spellPen: "{{spellPen=[[ REPLACE ]]}}",
    range_pick: "{{REPLACE=Range_pick}}",
    rangetext: "{{rangetext=REPLACE}}",
    level: "{{level=REPLACE}}",
    spellclass: "{{spellclass=REPLACE}}",
    cast_def: "{{cast_def=[[ REPLACE ]]}}",
    cast_defDC: "{{cast_defDC=[[ REPLACE ]]}}",
    concentrationNote: "{{concentrationNote=REPLACE}}",
    spellPenNote: "{{spellPenNote=REPLACE}}",
    casterlevel_chk: "{{casterlevel_chk=[[ 1d20 + REPLACE ]]}}",
    Concentration_chk: "{{Concentration_chk=[[ 1d20 + REPLACE ]]}}",
    spellnotes: "{{spells_notes=REPLACE}}",
    spell_fail_check: "{{spell_fail_check=[[ 1d100cf<[[ @{spell-fail} ]]cs>[[ @{spell-fail}+1 ]] ]]}}",
    spell_fail: "{{spell_fail=@{spell-fail}}}",
    spelldamage: "{{spelldamage=REPLACE}}",
    spelldamagetype: "{{spelldamagetype=REPLACE}}"
},
    optionTemplateRegexes = exports.optionTemplateRegexes = PFUtils.getOptionsCompiledRegexMap(optionTemplates);

/* non repeating */
var optionAttrs = ["Concentration-0-def", "Concentration-1-def", "Concentration-2-def", "spell-fail"],
    optionTogglesPlusOptionAttrs = optionToggles.concat(optionAttrs),

/* repeating*/
repeatingOptionAttrs = ["school", "cast-time", "duration", "save", "sr", "range_numeric", "targets", "description", "Concentration-mod", "savedc", "SP-mod", "range_pick", "range", "spell_level", "spellclass", "casterlevel", "components", "spellclass_number", "damage-macro-text", "damage-type"],
    repeatingOptionHelperAttrs = ["spellclass_number", "SP_misc", "CL_misc", "Concentration_misc", "slot", "spell-attack-type"],
    repeatingOptionAttrsToGet = repeatingOptionAttrs.concat(repeatingOptionHelperAttrs),
    rowattrToOptionToggleMap = {
    school: "toggle_spell_school_notes",
    "cast-time": "toggle_spell_casting_time_notes",
    components: "toggle_spell_components_notes",
    duration: "toggle_spell_duration_notes",
    save: "toggle_spell_saving_throw_notes",
    sr: "toggle_spell_sr_notes",
    range: "toggle_spell_range_notes",
    targets: "toggle_spell_targets_notes",
    description: "toggle_spell_description_notes",
    spellnotes: "toggle_spells_notes",
    spell_fail_check: "toggle_spell_spell_fail_check",
    "damage-macro-text": "toggle_spell_damage_notes",
    "damage-type": "toggle_spell_damage_notes"
},
    events = {
    spellOptionEventsPlayer: ["school", "cast-time", "components", "duration", "save", "sr", "range", "targets", "damage-macro-text", "damage-type"]
};
/** updateSpellOption - updates an existing @{spell_options} text for a row depending on the field updated on existing row
 * 
 * @param {obj} eventInfo 
 * @param {string} fieldUpdated 
 */
function updateSpellOption(eventInfo, fieldUpdated) {
    var fieldName = "repeating_spells_" + fieldUpdated,
        toggleField = rowattrToOptionToggleMap[fieldUpdated];
    getAttrs([fieldName, "repeating_spells_spell_options", "repeating_spells_spell_lvlstr", toggleField, "repeating_spells_SP-mod", "repeating_spells_savedc"], function (v) {
        var optionText = v["repeating_spells_spell_options"],
            newValue = "",
            setter = {};
        //make sure we are not updating from compendium
        //this works it is just fast enough that it will not do anything since importFromCompendium is not done.
        if (!v["repeating_spells_spell_lvlstr"] && optionText) {
            try {
                //TAS.debug("PFSpellOptions.updateSpellOption, field: "+ fieldUpdated,v);
                newValue = v[fieldName] || "";
                if (parseInt(v[toggleField], 10) === 1) {
                    //TAS.debug"made it inside toggleField");
                    switch (fieldUpdated) {
                        case 'school':
                            optionText = optionText.replace(optionTemplateRegexes.school, optionTemplates.school.replace("REPLACE", SWUtils.escapeForRollTemplate(newValue)));
                            break;
                        case 'cast-time':
                            optionText = optionText.replace(optionTemplateRegexes.casting_time, optionTemplates.casting_time.replace("REPLACE", SWUtils.escapeForRollTemplate(newValue)));
                            break;
                        case 'components':
                            optionText = optionText.replace(optionTemplateRegexes.components, optionTemplates.components.replace("REPLACE", SWUtils.escapeForRollTemplate(newValue)));
                            break;
                        case 'duration':
                            optionText = optionText.replace(optionTemplateRegexes.duration, optionTemplates.duration.replace("REPLACE", SWUtils.escapeForRollTemplate(newValue)));
                            break;
                        case 'range':
                            optionText = optionText.replace(optionTemplateRegexes.range, optionTemplates.range.replace("REPLACE", SWUtils.escapeForRollTemplate(newValue)));
                            break;
                        case 'targets':
                            optionText = optionText.replace(optionTemplateRegexes.targets, optionTemplates.targets.replace("REPLACE", SWUtils.escapeForRollTemplate(newValue)));
                            break;
                        case 'save':
                            if (PFUtils.shouldNotDisplayOption('saving_throw', newValue)) {
                                optionText = PFUtils.deleteOption(optionText, "saving_throw", optionTemplateRegexes);
                            } else {
                                optionText = optionText.replace(optionTemplateRegexes.saving_throw, optionTemplates.saving_throw.replace("REPLACE", SWUtils.escapeForRollTemplate(newValue)));
                            }
                            break;
                        case 'sr':
                            if (PFUtils.shouldNotDisplayOption('sr', newValue)) {
                                optionText = PFUtils.deleteOption(optionText, "sr", optionTemplateRegexes);
                            } else {
                                optionText = optionText.replace(optionTemplateRegexes.sr, optionTemplates.sr.replace("REPLACE", newValue));
                            }
                            break;
                        case 'damage-macro-text':
                            //TAS.debug"found damage macro-text="+newValue);
                            if (PFUtils.shouldNotDisplayOption('damage-macro-text', newValue)) {
                                optionText = PFUtils.deleteOption(optionText, "spelldamage", optionTemplateRegexes);
                            } else {
                                optionText = optionText.replace(optionTemplateRegexes.spelldamage, optionTemplates.spelldamage.replace("REPLACE", newValue));
                            }
                            break;
                        case 'damage-type':
                            //TAS.debug"found damage type"+newValue);
                            if (PFUtils.shouldNotDisplayOption('damage-type', newValue)) {
                                optionText = PFUtils.deleteOption(optionText, "spelldamagetype", optionTemplateRegexes);
                            } else {
                                optionText = optionText.replace(optionTemplateRegexes.spelldamagetype, optionTemplates.spelldamagetype.replace("REPLACE", newValue));
                            }
                            break;
                    }
                    setter["repeating_spells_spell_options"] = optionText;
                    setAttrs(setter, {
                        silent: true
                    });
                }
            } catch (err) {
                _exportsLoaderTASTheAaronSheet2.default.error("PFSpellOptions.updateSpellOption", err);
            }
        }
    });
}
/** getOptionText - resets entire @{spell_options} text for a spell row
* if the field to update is one that is set by updateSpellOption, then need to set {{key=}} so it can find correct one to replace.
*@param {string} id of row or null
*@param {jsobj} eventInfo NOT USED
*@param {object} toggleValues values from getAttrs of spell toggle option fields
*@param {object} rowValues values from getAttrs of row attributes
*@returns {string}
*/
function getOptionText(id, eventInfo, toggleValues, rowValues) {
    var prefix = "repeating_spells_" + SWUtils.getRepeatingIDStr(id),
        customConcentration = parseInt(rowValues[prefix + "Concentration_misc"], 10) || 0,
        customCasterlevel = parseInt(rowValues[prefix + "CL_misc"], 10) || 0,
        classNum = parseInt(rowValues[prefix + "spellclass_number"], 10),
        spellLevel = parseInt(rowValues[prefix + "spell_level"], 10),
        spellSlot = parseInt(rowValues[prefix + "slot"], 10),
        casterlevel = parseInt(rowValues[prefix + "casterlevel"], 10),
        concentrationMod = parseInt(rowValues[prefix + "Concentration-mod"], 10),
        levelForConcentrate = isNaN(spellSlot) || spellSlot === spellLevel ? spellLevel : spellSlot,
        defDC = 15 + levelForConcentrate * 2,
        defMod = parseInt(rowValues["Concentration-" + classNum + "-def"], 10) || 0,
        optionText = "",
        newValue = "";
    //TAS.debug("getOptionText, defMod: " + defMod);
    if (isNaN(classNum) || isNaN(spellLevel)) {
        _exportsLoaderTASTheAaronSheet2.default.warn("cannot set options for spell! id:" + id + "  class or level are not numbers");
        return "";
    }
    if (toggleValues.showschool) {
        optionText += optionTemplates.school.replace("REPLACE", SWUtils.escapeForRollTemplate(rowValues[prefix + "school"])) || "";
    }
    if (toggleValues.showlevel) {
        optionText += optionTemplates.spellclass.replace("REPLACE", SWUtils.escapeForRollTemplate(rowValues[prefix + "spellclass"])) || "";
        optionText += optionTemplates.level.replace("REPLACE", spellLevel);
    }
    if (toggleValues.showcasting_time) {
        optionText += optionTemplates.casting_time.replace("REPLACE", SWUtils.escapeForRollTemplate(rowValues[prefix + "cast-time"])) || "";
    }
    if (toggleValues.showcomponents) {
        optionText += optionTemplates.components.replace("REPLACE", SWUtils.escapeForRollTemplate(rowValues[prefix + "components"])) || "";
    }
    if (toggleValues.showsaving_throw) {
        newValue = rowValues[prefix + "save"] || "";
        if (PFUtils.shouldNotDisplayOption('saving_throw', newValue)) {
            optionText += "{{saving_throw=}}";
        } else {
            optionText += optionTemplates.saving_throw.replace("REPLACE", SWUtils.escapeForRollTemplate(newValue) || "");
        }
        optionText += optionTemplates.dc.replace("REPLACE", parseInt(rowValues[prefix + "savedc"], 10) || 0);
    }
    if (toggleValues.showrange) {
        optionText += optionTemplates.range_pick.replace("REPLACE", rowValues[prefix + "range_pick"] || "blank") || "";
        optionText += optionTemplates.range.replace("REPLACE", parseInt(rowValues[prefix + "range_numeric"], 10) || 0) || "";
        optionText += optionTemplates.rangetext.replace("REPLACE", SWUtils.escapeForRollTemplate(rowValues[prefix + "range"] || "") || "");
    }
    if (toggleValues.showtargets) {
        optionText += optionTemplates.targets.replace("REPLACE", SWUtils.escapeForRollTemplate(rowValues[prefix + "targets"]) || "");
    }
    if (toggleValues.showduration) {
        optionText += optionTemplates.duration.replace("REPLACE", SWUtils.escapeForRollTemplate(rowValues[prefix + "duration"]) || "");
    }
    if (toggleValues.showsr) {
        newValue = rowValues[prefix + "sr"] || "";
        if (PFUtils.shouldNotDisplayOption('sr', newValue)) {
            optionText += "{{sr=}}";
        } else {
            optionText += optionTemplates.sr.replace("REPLACE", newValue) || "";
        }
    }
    if (toggleValues.showcasterlevel && customCasterlevel) {
        optionText += optionTemplates.casterlevel.replace("REPLACE", casterlevel) || "";
    } else {
        optionText += "{{casterlevel=}}";
    }
    if (toggleValues.showcasterlevel_check) {
        optionText += optionTemplates.casterlevel_chk.replace("REPLACE", casterlevel) || "";
    }
    if (toggleValues.showcasterlevel || toggleValues.showcasterlevel_check) {
        newValue = parseInt(rowValues[prefix + "SP-mod"], 10) || 0;
        if (newValue === 0) {
            optionText += "{{spellPen=}}";
        } else {
            optionText += optionTemplates.spellPen.replace("REPLACE", newValue) || "";
        }
    }
    if (toggleValues.showconcentration && customConcentration) {
        optionText += optionTemplates.Concentration.replace("REPLACE", concentrationMod) || "";
    } else {
        optionText += "{{Concentration=}}";
    }
    if (toggleValues.showconcentration_check) {
        optionText += optionTemplates.Concentration_chk.replace("REPLACE", concentrationMod) || "";
    }
    if (toggleValues.showconcentration || toggleValues.showconcentration_check) {
        if (defMod > 0) {
            optionText += optionTemplates.cast_def.replace("REPLACE", defMod) || "";
        } else {
            optionText += "{{cast_def=}}";
        }
        optionText += optionTemplates.cast_defDC.replace("REPLACE", defDC) || "";
    }
    if (toggleValues.showdescription) {
        optionText += optionTemplates.description.replace("REPLACE", "@{description}") || "";
    }
    if (toggleValues.showspellnotes) {
        optionText += optionTemplates.spellnotes.replace("REPLACE", "@{spell-class-" + classNum + "-spells-notes}") || "";
    }
    if (toggleValues.showspell_fail_check && parseInt(rowValues['spell-fail'], 10) > 0) {
        //TAS.debug("adding spellfailure "+optionTemplates.spell_fail_check +" for id "+ id);
        optionText += optionTemplates.spell_fail_check || "";
        optionText += optionTemplates.spell_fail || "";
    }

    if (toggleValues.showdamage) {
        if (!PFUtils.findAbilityInString(rowValues[prefix + "spell-attack-type"])) {
            optionText += optionTemplates.spelldamage.replace("REPLACE", rowValues[prefix + "damage-macro-text"] || "");
        } else {
            optionText += "{{spelldamage=}}";
        }
        if (rowValues["damage-type"]) {
            optionText += optionTemplates.spelldamagetype.replace("REPLACE", rowValues["damage-type"] || "");
        } else {
            optionText += "{{spelldamagetype=}}";
        }
    } else {
        optionText += "{{spelldamage=}}{{spelldamagetype=}}";
    }
    //TAS.debug("PFSpell.resetOption returning "+optionText);
    return optionText;
}
/** resetOption updates repeating_spells_$X_spell_options
*@param {string} id id of row or null
*@param {jsobj} eventInfo NOT USED
*/
function resetOption(id, eventInfo) {
    var prefix = "repeating_spells_" + SWUtils.getRepeatingIDStr(id),
        allFields;
    allFields = _underscore2.default.map(repeatingOptionAttrsToGet, function (field) {
        return prefix + field;
    }).concat(optionTogglesPlusOptionAttrs);
    getAttrs(allFields, function (v) {
        var toggleValues = _underscore2.default.chain(optionToggles).reduce(function (memo, attr) {
            memo['show' + attr.toLowerCase().slice(13).replace('_notes', '')] = parseInt(v[attr], 10) || 0;
            return memo;
        }, {}).extend({
            "Concentration-0-def": parseInt(v["Concentration-0-def"], 10) || 0,
            "Concentration-1-def": parseInt(v["Concentration-1-def"], 10) || 0,
            "Concentration-2-def": parseInt(v["Concentration-2-def"], 10) || 0
        }).value(),
            optionText = "",
            setter = {};
        optionText = getOptionText(id, eventInfo, toggleValues, v) || "";
        //TAS.debug("resetOption","About to set",setter);
        setter["repeating_spells_" + SWUtils.getRepeatingIDStr(id) + "spell_options"] = optionText;
        setAttrs(setter, {
            silent: true
        });
    });
}
/**resetOptions - updates repeating_spells_spell_options for all spells.
*@param {function} callback call when done
*@param {object} eventInfo NOT USED
*/
function resetOptions(callback, eventInfo) {
    var done = _underscore2.default.once(function () {
        if (typeof callback === "function") {
            callback();
        }
    });
    getAttrs(optionTogglesPlusOptionAttrs, function (tv) {
        var optionFields, toggleValues;
        try {
            optionFields = repeatingOptionAttrs.concat(repeatingOptionHelperAttrs);
            toggleValues = _underscore2.default.chain(optionToggles).reduce(function (memo, attr) {
                //get word between toggle_spell_ and _notes
                memo['show' + attr.toLowerCase().slice(13).replace('_notes', '')] = parseInt(tv[attr], 10) || 0;
                return memo;
            }, {}).extend({
                "Concentration-0-def": parseInt(tv["Concentration-0-def"], 10) || 0,
                "Concentration-1-def": parseInt(tv["Concentration-1-def"], 10) || 0,
                "Concentration-2-def": parseInt(tv["Concentration-2-def"], 10) || 0
            }).value();
            getSectionIDs("repeating_spells", function (ids) {
                var fields, prefixes;
                if (!ids || _underscore2.default.size(ids) === 0) {
                    done();
                    return;
                }
                prefixes = _underscore2.default.map(ids, function (id) {
                    return "repeating_spells_" + id + "_";
                });
                fields = SWUtils.cartesianAppend(prefixes, optionFields);
                getAttrs(fields, function (v) {
                    var setter = {};
                    _underscore2.default.each(ids, function (id) {
                        var optionText = '';
                        try {
                            optionText = getOptionText(id, eventInfo, toggleValues, v) || "";
                            //TAS.debug("setting option text for "+id+" to "+optionText);
                            setter["repeating_spells_" + id + "_spell_options"] = optionText;
                        } catch (innererr) {
                            _exportsLoaderTASTheAaronSheet2.default.error("PFSpellOptions.resetOptions error on id " + id + ", innererr", innererr);
                        }
                    });
                    if (_underscore2.default.size(setter) > 0) {
                        setAttrs(setter, _PFConst2.default.silentParams, done);
                    } else {
                        done();
                    }
                });
            });
        } catch (outererr) {
            _exportsLoaderTASTheAaronSheet2.default.error("PFSpellOptions.resetOptions outererr:", outererr);
            done();
        }
    });
}
function recalculate(callback) {
    resetOptions(callback);
}

function registerEventHandlers() {
    //spell options for one row
    _underscore2.default.each(events.spellOptionEventsPlayer, function (fieldToWatch) {
        var eventToWatch = "change:repeating_spells:" + fieldToWatch;
        on(eventToWatch, _exportsLoaderTASTheAaronSheet2.default.callback(function eventOptionsRepeatingSpellsPlayer(eventInfo) {
            if (eventInfo.sourceType === "player" || eventInfo.sourceType === "api") {
                _exportsLoaderTASTheAaronSheet2.default.debug("caught " + eventInfo.sourceAttribute + " event: " + eventInfo.sourceType);
                updateSpellOption(eventInfo, fieldToWatch);
            }
        }));
    });
    //update the spell options
    _underscore2.default.each(optionToggles, function (toggleField) {
        on("change:" + toggleField, _exportsLoaderTASTheAaronSheet2.default.callback(function toggleSpellOptionField(eventInfo) {
            if (eventInfo.sourceType === "player" || eventInfo.sourceType === "api") {
                _exportsLoaderTASTheAaronSheet2.default.debug("caught " + eventInfo.sourceAttribute + " event: " + eventInfo.sourceType);
                resetOptions(null, eventInfo);
            }
        }));
    });
}
registerEventHandlers();
_PFLog.PFConsole.log('   PFSpellOptions module loaded   ');
_PFLog.PFLog.modulecount++;

/***/ }),
/* 39 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


var _exportsLoaderTASTheAaronSheet = __webpack_require__(1);

var _exportsLoaderTASTheAaronSheet2 = _interopRequireDefault(_exportsLoaderTASTheAaronSheet);

var _PFLog = __webpack_require__(0);

var _PFConst = __webpack_require__(3);

var _PFConst2 = _interopRequireDefault(_PFConst);

var _PFSheet = __webpack_require__(22);

var PFSheet = _interopRequireWildcard(_PFSheet);

var _HLImport = __webpack_require__(31);

var HLImport = _interopRequireWildcard(_HLImport);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

_exportsLoaderTASTheAaronSheet2.default.config({
  logging: {
    info: "production" !== 'production',
    debug: "production" !== 'production'
  }
});
if (false) {
  _exportsLoaderTASTheAaronSheet2.default.debugMode();
}
//importing PFSheet imports everything else


_PFLog.PFConsole.log('       ,## /##                    ');
_PFLog.PFConsole.log('      /#/ /  ##                   ');
_PFLog.PFConsole.log('     / / /    ##                  ');
_PFLog.PFConsole.log('      | ##___#/                   ');
_PFLog.PFConsole.log('      | ##       athfinder        ');
_PFLog.PFConsole.log('   #  | ##    sheet version       ');
_PFLog.PFConsole.log('    ### /           ' + ("0000" + _PFConst2.default.version.toFixed(2)).slice(-5) + '         ');
_PFLog.PFConsole.log('                                  ');
_PFLog.PFConsole.log('   PFSheet module loaded          ');
_PFLog.PFLog.modulecount++;
if (_PFLog.PFLog.modulecount === 34) {
  _PFLog.PFConsole.log('   All ' + _PFLog.PFLog.modulecount + ' Modules Loaded          ');
} else {
  _PFLog.PFConsole.log('   ONLY ' + _PFLog.PFLog.modulecount + ' Modules Loaded!        ' + _PFLog.PFLog.r, 'background: linear-gradient(to right,yellow,white,white,yellow); color:black;text-shadow: 0 0 8px white;');
}

/***/ })
/******/ ]);</script>
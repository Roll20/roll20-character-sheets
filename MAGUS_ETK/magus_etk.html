<div class="main">
  <div class="logo" ></div>

  <!-- Tab block -->
  <input type='hidden' class='sheet-tabstoggle' name='attr_sheetTab'  value='tab-1'  />
  <div class="tab-switcher">
    <button type="action" name="act_tab-1" class="tab-switch" >Általános</button>
    <button type="action" name="act_tab-2" class="tab-switch" >Képzettségek</button>
    <button type="action" name="act_tab-3" class="tab-switch" >Felszerelés</button>
  </div>
  <!-- Enf of tab block -->


  <div class="tab-1">

    <div class="container">
      <div class="section col-5 karakter values">
        <label>Név</label>
        <input type='text' name='attr_nev' placeholder='Karakter neve' class="emphasized"/>
        <label>Kaszt</label>
        <input type='text' name='attr_kaszt' placeholder='Kaszt' />
        <label>Faj</label>
        <input type='text' name='attr_faj' placeholder='Faj' />
        <label>Jellem</label>
        <input type='text' name='attr_jellem' placeholder='Jellem' />
        <label>Vallás</label>
        <input type='text' name='attr_vallas' placeholder='Vallás' />
        <label>Szülőföld</label>
        <input type='text' name='attr_szulofold' placeholder='Szülőföld' />
        <label>Iskola</label>
        <input type='text' name='attr_iskola' placeholder='Iskola' />
        <label>Nem</label>
        <input type='text' name='attr_nem' placeholder='Nem' />

        <label>Tp</label>
        <input type='number' name='attr_tp' placeholder='Tp' min="0" class="full"/>
        <label>Szint</label>
        <input type='number' name='attr_szint' placeholder='TSz' min="0" class="emphasized full"/>
        <label>Következő szint</label>
        <input type='number' name='attr_tp_max' placeholder='Köv. szint' min="100" class="full"/>
      </div>

      <div class="section col-7">
        <div class="flex-table">
          <div>
            <div style="width: 162px"></div>
            <div style="text-align: center"><label>Alap</label></div>
            <div style="text-align: center"><label>Aktuális</label></div>
          </div>
          <div>
            <div>
              <label>Erő</label>
            </div>
            <div>
              <input type='number' name='attr_ero_max' min="3" max="20"/>
              <button type='roll' value='&{template:default} {{name=Alap erő próba!}} {{Dobás=[[d10]]}} {{Célszám=[[@{ero|max}-10+?{+/- módosítók?|0}]]}}'></button>
            </div>
            <div>
              <input type='number' name='attr_ero' min="3" max="20"/>
              <button type='roll' value='&{template:default} {{name=Erő próba!}} {{Dobás=[[d10]]}} {{Célszám=[[@{ero}-10+?{+/- módosítók?|0}]]}}'></button>
              <input type='hidden' name='attr_sebzesJarulek' value="@{ero}-14" disabled="true"/>
            </div>
          </div>
          <div>
            <div>
              <label>Állóképesség</label>
            </div>
            <div>
              <input type='number' name='attr_allokepesseg_max' min="3" max="20"/>
              <button type='roll' value='&{template:default} {{name=Alap állóképesség próba!}} {{Dobás=[[d10]]}} {{Célszám=[[@{allokepesseg|max}-10+?{+/- módosítók?|0}]]}}'></button>
            </div>
            <div>
              <input type='number' name='attr_allokepesseg' min="3" max="20"/>
              <button type='roll' value='&{template:default} {{name=Állóképesség próba!}} {{Dobás=[[d10]]}} {{Célszám=[[@{allokepesseg}-10+?{+/- módosítók?|0}]]}}'></button>
            </div>
          </div>
          <div>
            <div>
              <label>Gyorsaság</label>
            </div>
            <div>
              <input type='number' name='attr_gyorsasag_max' min="3" max="20"/>
              <button type='roll' value='&{template:default} {{name=Alap gyorsaság próba!}} {{Dobás=[[d10]]}} {{Célszám=[[@{gyorsasag|max}-10+?{+/- módosítók?|0}]]}}'></button>
            </div>
            <div>
              <input type='number' name='attr_gyorsasag' min="3" max="20"/>
              <button type='roll' value='&{template:default} {{name=Gyorsaság próba!}} {{Dobás=[[d10]]}} {{Célszám=[[@{gyorsasag}-10+?{+/- módosítók?|0}]]}}'></button>
            </div>
          </div>
          <div>
            <div>
              <label>Ügyesség</label>
            </div>
            <div>
              <input type='number' name='attr_ugyesseg_max' min="3" max="20"/>
              <button type='roll' value='&{template:default} {{name=Alap ügyesség próba!}} {{Dobás=[[d10]]}} {{Célszám=[[@{ugyesseg|max}-10+?{+/- módosítók?|0}]]}}'></button>
            </div>
            <div>
              <input type='number' name='attr_ugyesseg' min="3" max="20"/>
              <button type='roll' value='&{template:default} {{name=Ügyesség próba!}} {{Dobás=[[d10]]}} {{Célszám=[[@{ugyesseg}-10+?{+/- módosítók?|0}]]}}'></button>
            </div>
          </div>
          <div>
            <div>
              <label>Egészség</label>
            </div>
            <div>
              <input type='number' name='attr_egeszseg_max' min="3" max="20"/>
              <button type='roll' value='&{template:default} {{name=Alap egészség próba!}} {{Dobás=[[d10]]}} {{Célszám=[[@{egeszseg|max}-10+?{+/- módosítók?|0}]]}}'></button>
            </div>
            <div>
              <input type='number' name='attr_egeszseg' min="3" max="20"/>
              <button type='roll' value='&{template:default} {{name=Egészség próba!}} {{Dobás=[[d10]]}} {{Célszám=[[@{egeszseg}-10+?{+/- módosítók?|0}]]}}'></button>
            </div>
          </div>
          <div>
            <div>
              <label>Szépség</label>
            </div>
            <div>
              <input type='number' name='attr_szepseg_max' min="3" max="20"/>
              <button type='roll' value='&{template:default} {{name=Alap szépség próba!}} {{Dobás=[[d10]]}} {{Célszám=[[@{szepseg|max}-10+?{+/- módosítók?|0}]]}}'></button>
            </div>
            <div>
              <input type='number' name='attr_szepseg' min="3" max="20"/>
              <button type='roll' value='&{template:default} {{name=Szépség próba!}} {{Dobás=[[d10]]}} {{Célszám=[[@{szepseg}-10+?{+/- módosítók?|0}]]}}'></button>
            </div>
          </div>
          <div>
            <div>
              <label>Intelligencia</label>
            </div>
            <div>
              <input type='number' name='attr_intelligencia_max' min="3" max="20"/>
              <button type='roll' value='&{template:default} {{name=Alap intelligencia próba!}} {{Dobás=[[d10]]}} {{Célszám=[[@{intelligencia|max}-10+?{+/- módosítók?|0}]]}}'></button>
            </div>
            <div>
              <input type='number' name='attr_intelligencia' min="3" max="20"/>
              <button type='roll' value='&{template:default} {{name=Intelligencia próba!}} {{Dobás=[[d10]]}} {{Célszám=[[@{intelligencia}-10+?{+/- módosítók?|0}]]}}'></button>
            </div>
          </div>
          <div>
            <div>
              <label>Akaraterő</label>
            </div>
            <div>
              <input type='number' name='attr_akaratero_max' min="3" max="20"/>
              <button type='roll' value='&{template:default} {{name=Alap akaraterő próba!}} {{Dobás=[[d10]]}} {{Célszám=[[@{akaratero|max}-10+?{+/- módosítók?|0}]]}}'></button>
            </div>
            <div>
              <input type='number' name='attr_akaratero' min="3" max="20"/>
              <button type='roll' value='&{template:default} {{name=Akaraterő próba!}} {{Dobás=[[d10]]}} {{Célszám=[[@{akaratero}-10+?{+/- módosítók?|0}]]}}'></button>
            </div>
          </div>
          <div>
            <div>
              <label>Asztrál</label>
            </div>
            <div>
              <input type='number' name='attr_asztral_max' min="3" max="20"/>
              <button type='roll' value='&{template:default} {{name=Alap asztrál próba!}} {{Dobás=[[d10]]}} {{Célszám=[[@{asztral|max}-10+?{+/- módosítók?|0}]]}}'></button>
            </div>
            <div>
              <input type='number' name='attr_asztral' min="3" max="20"/>
              <button type='roll' value='&{template:default} {{name=Asztrál próba!}} {{Dobás=[[d10]]}} {{Célszám=[[@{asztral}-10+?{+/- módosítók?|0}]]}}'></button>
            </div>
          </div>
        </div>

        <input type="hidden" name="attr_ero10">
        <input type="hidden" name="attr_gyorsasag10">
        <input type="hidden" name="attr_ugyesseg10">
        <input type="hidden" name="attr_allokepesseg10">
        <input type="hidden" name="attr_egeszseg10">
        <input type="hidden" name="attr_intelligencia10">
        <input type="hidden" name="attr_akaratero10">
        <input type="hidden" name="attr_asztral10">
      </div>
    </div>

    <div class="container">
      <div class="section col-5 me">
        <h2>Mágiaellenállás</h2>
        <div class="flex-table">
          <div>
            <div><div style="width: 133px; height: 1em;"></div> </div>
            <div>Asztrál</div>
            <div>Mentál</div>
          </div>
          <div>
            <div>TME</div>
            <div><input type="number" name="attr_asztralTme"/></div>
            <div><input type="number" name="attr_mentalTme"/></div>
          </div>
          <div>
            <div>Statikus</div>
            <div><input type="number" name="attr_asztralStatikus"/></div>
            <div><input type="number" name="attr_mentalStatikus"/></div>
          </div>
          <div>
            <div>Dinamikus</div>
            <div><input type="number" name="attr_asztralDinamikus"/></div>
            <div><input type="number" name="attr_mentalDinamikus"/></div>
          </div>
          <div>
            <div>Egyéb</div>
            <div><input type="number" name="attr_asztralEgyeb"/></div>
            <div><input type="number" name="attr_mentalEgyeb"/></div>
          </div>
          <div>
            <div><label>ME</label></div>
            <div><input type="number" name="attr_asztralMe" value="@{asztralTme}+@{asztralStatikus}+@{asztralDinamikus}+@{asztralEgyeb}" disabled="true"/></div>
            <div><input type="number" name="attr_mentalMe" value="@{mentalTme}+@{mentalStatikus}+@{mentalDinamikus}+@{mentalEgyeb}" disabled="true"/></div>
          </div>
        </div>
      </div>

      <div class="section col-7 mind values">

        <table>
          <tr>
            <th colspan="3"><h3>Pszi</h3></th>
          </tr>
          <tr>
            <th><label>ösvény</label></th>
            <th><label>fok</label></th>
            <th><label>szint</label></th>
          </tr>
          <tr>
            <td><input type="text" name="attr_psziTipus" class="col-11"/></td>
            <td><input type="text" name="attr_psziFok" class="col-11"/></td>
            <td><input type="text" name="attr_psziSzint" class="col-11"/></td>
          </tr>

          <tr>
            <th></th>
            <th><label>max.</label></th>
            <th><label>akt.</label></th>
          </tr>
          <tr>
            <td>Pp</td>
            <td><input type="number" name="attr_pp_max" class="col-11" style="width: 106px"/></td>
            <td><input type="number" name="attr_pp" class="col-11 emphasized" style="width: 106px" /></td>
          </tr>

          <tr>
            <th colspan="3"><h3>Mágia</h3></th>
          </tr>
          <tr>
            <th colspan="2"><label>iskola</label></th>
            <th><label>szint</label></th>
          </tr>
          <tr>
            <td colspan="2"><input type="text" name="attr_magiaTipus" class="col-11" style="margin-left: 12px;"/></td>
            <td><input type="text" name="attr_magiaSzint" class="col-11"/></td>
          </tr>

          <tr>
            <th></th>
            <th><label>max.</label></th>
            <th><label>akt.</label></th>
          </tr>
          <tr>
            <td>Mp</td>
            <td><input type="number" name="attr_mp_max"  style="width: 106px" /></td>
            <td><input type="number" name="attr_mp" class="emphasized" style="width: 106px" /></td>
          </tr>
        </table>
      </div>
    </div>

    <div class="container">
      <div class="section col-5 values health">
        <div>
          <div>
            <label>Ép alap</label>
            <input type='number' name='attr_epAlap' min="1"/>
          </div>
          <div>
            <label>Max. Ép</label>
            <input type='number' name='attr_ep_max' value="@{epAlap} + @{egeszseg10}" disabled="disabled"/>
          </div>
          <div>
            <label>Akt. Ép</label>
            <input type='number' name='attr_ep' min="0" class="emphasized" />
          </div>
        </div>
      </div>
      <div class="section col-7 values health">
        <div>
          <div>
            <label>Fp alap</label>
            <input type='number' name='attr_fpAlap' min="1"/>
          </div>
          <div>
            <label>Fp szintlépéskor kapott</label>
            <input type='number' name='attr_fpSzint' min="1"/>
          </div>
          <div>
            <label>Max. Fp</label>
            <input type='number' name='attr_fp_max' value="@{fpAlap} + @{allokepesseg10} + @{akaratero10} + @{fpSzint}" disabled="disabled"/>
          </div>
          <div>
            <label>Akt. Fp</label>
            <input type='number' name='attr_fp' min="0" class="emphasized"/>
          </div>
        </div>
      </div>
    </div>

    <div class="container">

      <div class="section col-12 harcertek values">
        <table>
          <tr><td colspan="6"><h2>Harcértékek</h2></td></tr>

          <tr>
            <th><div style="width: 8em;"></div></th>
            <th><label>tám.</label></th>
            <th><label>KÉ</label></th>
            <th><label>TÉ</label></th>
            <th><label>VÉ</label></th>
            <th><label>CÉ</label></th>
            <th><label>Sebz.</label></th>

            <th colspan="2"><label>Vért</label></th>
          </tr>

          <tr>
            <td>alap</td>
            <td><input type="number" name="attr_tam_max" min="0"></td>
            <td><input type="number" name="attr_keAlap" min="0"></td>
            <td><input type="number" name="attr_teAlap" min="0"></td>
            <td><input type="number" name="attr_veAlap" min="0"></td>
            <td><input type="number" name="attr_ceAlap" min="0"></td>
            <td><input type="number" name="attr_ero_sebzes" min="0"></td>

            <td style="padding: 0 5px; white-space: nowrap;">név</td>
            <td style="max-width: 130px;"><input type="string" name="attr_vertTipus" style="width: 100%; font-weight: bold; text-align: center;"/></td>
          </tr>
          <tr>
            <td>szintenként</td>
            <td style="text-align: center">-</td>
            <td><input type="number" name="attr_kePerSzint" min="0"></td>
            <td><input type="number" name="attr_tePerSzint" min="0"></td>
            <td><input type="number" name="attr_vePerSzint" min="0"></td>
            <td><input type="number" name="attr_cePerSzint" min="0"></td>
            <td><input type="number" name="attr_sebzesPerSzint" min="0"></td>

            <td style="padding: 0 5px; white-space: nowrap;">MGT</td>
            <td style="text-align: center"><input type="number" name="attr_vertMgt" max="0" /></td>
          </tr>
          <tr>
            <td>Egyéb mod.</td>
            <td style="text-align: center">-</td>
            <td><input type="number" name="attr_keMod" min="0"></td>
            <td><input type="number" name="attr_teMod" min="0"></td>
            <td><input type="number" name="attr_veMod" min="0"></td>
            <td><input type="number" name="attr_ceMod" min="0"></td>
            <td><input type="number" name="attr_sebzesMod" min="0"></td>

            <td style="padding: 0 5px; white-space: nowrap;">SFÉ</td>
            <td style="text-align: center"><input type="number" name="attr_vertSfe_max" min="0" /></td>
          </tr>
          <tr>
            <td>Fegyver nélkül</td>
            <td style="text-align: center">-</td>
            <td><input type="number" name="attr_ke" min="0" value="(@{ugyesseg10} + @{gyorsasag10} + @{keAlap} + @{kePerSzint} * @{szint} + @{keMod})" disabled="disabled"></td>
            <td><input type="number" name="attr_te" min="0" value="(@{ero10} + @{ugyesseg10} + @{gyorsasag10} +@{teAlap} + @{tePerSzint} * @{szint} + @{teMod})" disabled="disabled"></td>
            <td><input type="number" name="attr_ve" min="0" value="(@{ugyesseg10} + @{gyorsasag10} + @{veAlap} + @{vePerSzint} * @{szint} + @{veMod})" disabled="disabled"></td>
            <td><input type="number" name="attr_ce" min="0" value="(@{ugyesseg10} + @{ceAlap} + @{cePerSzint} * @{szint} + @{ceMod})" disabled="disabled"></td>
            <td><input type="number" name="attr_sebzes" min="0" value="(@{ero_sebzes} + @{sebzesPerSzint} * @{szint} + @{sebzesmod})" disabled="disabled"></td>

            <td style="padding: 0 5px; white-space: nowrap;">akt. SFÉ</td>
            <td style="text-align: center"><input type="number" name="attr_vertSfe" min="0"/></td>
          </tr>


        </table>

        <div class="karakterFegyverek values">
          <h2>Fegyverek</h2>
          <h3>Kézi fegyverek</h3>
          <div>
            <div class="cell" style="width: 109px; text-align: center">Név</div>
            <div class="cell" style="width: 59px; text-align: center;">Tám.</div>
            <div class="cell" style="width: 59px; text-align: center">KÉ</div>
            <div class="cell" style="width: 59px; text-align: center">TÉ</div>
            <div class="cell" style="width: 59px; text-align: center">VÉ</div>
            <div class="cell" style="width: 15em; text-align: center">Sebzés</div>
          </div>
          <fieldset class="repeating_fegyverek">
            <div class="row">
              <div class="cell"><input type='text' name='attr_fegyverNev' style="width: 8em"/></div>
              <div class="cell"><input type='text' name='attr_fegyverTam' class="digit-2"/></div>
              <div class="cell"><input type='number' name='attr_fegyverKe' /></div>
              <div class="cell"><input type='number' name='attr_fegyverTe' /></div>
              <div class="cell"><input type='number' name='attr_fegyverVe' /></div>
              <div class="cell">
                <input type='number' name='attr_fegyverSebzesMulti' class="dice-1"/>k
                <input type='number' name='attr_fegyverSebzesOldal' class="dice-3"/>+
                <input type='number' name='attr_fegyverSebzesPlusz' class="dice-1"/>
              </div>
              <div class="cell">
                <button title="Kezdeményező Dobás" type='roll' value='&{template:default} {{name=Kezdeményezés - @{fegyverNev}}} {{Dobás=[[ d10 + @{ke} + @{fegyverKe} +?{+/- módosítók?|0} ]]}}'></button>
                <button title="Támadó Dobás" type='roll' value='&{template:default} {{name=Támadás - @{fegyverNev}}} {{Dobás=[[ d100 + @{te} + @{fegyverTe} +?{+/- módosítók?|0} ]]}}'></button>
                <button title="Sebzés" type='roll' value='&{template:default} {{name=Sebzés - @{fegyverNev}}} {{Dobás=[[ @{fegyverSebzesMulti}d@{fegyverSebzesOldal} + @{fegyverSebzesPlusz} + @{sebzes} +?{+/- módosítók?|0} ]]}}'></button>
              </div>
            </div>
          </fieldset>

          <h3>Célzó fegyverek</h3>
          <div>
            <div class="cell" style="width: 109px; text-align: center">Név</div>
            <div class="cell" style="width: 59px; text-align: center">Tám.</div>
            <div class="cell" style="width: 59px; text-align: center">KÉ</div>
            <div class="cell" style="width: 59px; text-align: center">CÉ</div>
            <div class="cell" style="width: 59px; text-align: center">Táv</div>
            <div class="cell" style="width: 15em; text-align: center">Sebzés</div>
          </div>
          <fieldset class="repeating_tavFegyverek">
            <div class="row">
              <div class="cell"><input type='text' name='attr_fegyverNev' style="width: 8em" /></div>
              <div class="cell"><input type='text' name='attr_fegyverTam' class="digit-2"/></div>
              <div class="cell"><input type='number' name='attr_fegyverKe' /></div>
              <div class="cell"><input type='number' name='attr_fegyverCe' /></div>
              <div class="cell"><input type='number' name='attr_fegyverTav' /></div>
              <div class="cell">
                <input type='number' name='attr_fegyverSebzesMulti' class="dice-1" />k
                <input type='number' name='attr_fegyverSebzesOldal' class="dice-3" />+
                <input type='number' name='attr_fegyverSebzesPlusz' class="dice-1" />
              </div>
              <div class="cell">
                <button title="Kezdeményező Dobás" type='roll' value='&{template:default} {{name=Kezdeményezés - @{fegyverNev}}} {{Dobás=[[ d10 + @{ke} + @{fegyverKe} +?{+/- módosítók?|0} ]]}}'></button>
                <button title="Célzó Dobás"type='roll' value='&{template:default} {{name=Célzás - @{fegyverNev}}} {{Dobás=[[ d100 + @{ce} + @{fegyverCe} +?{+/- módosítók?|0} ]]}}'></button>
                <button title="Sebzés" type='roll' value='&{template:default} {{name=Sebzés - @{fegyverNev}}} {{Dobás=[[ @{fegyverSebzesMulti}d@{fegyverSebzesOldal} + @{fegyverSebzesPlusz} +?{+/- módosítók?|0} ]]}}'></button>
              </div>
            </div>
          </fieldset>

        </div>
      </div>
    </div>

  </div>

  <div class="tab-2">
    <div class="section karakterKepzettseg">
      <h2>Képzettségek</h2>

      <div class="flex-table">
        <div>
          <div>Kp</div>
          <div><input type="number" name="attr_kp" /></div>
          <div>%</div>
          <div><input type="number" name="attr_szazalek" /></div>
        </div>
      </div>

      <div class="flex">
        <div style="width: 49%; margin-right: 1%;">
          <h3>Képzettségek - 2 fokú</h3>
          <div>
            <div class="row">
              <div style="width: 242px; padding: 0 2px;">Képzettség</div>
              <div style="width: 2em; text-align: center; padding: 0 2px;">Af</div>
              <div style="width: 2em; text-align: center; padding: 0 2px;">Mf</div>
            </div>
            <fieldset class="repeating_kepesseg2">
              <div class="row">
                <div><input type="text" name="attr_kepesseg2Nev"  style="width: 242px; text-align: left;"></div>
                <div><input type="checkbox" name="attr_kepesseg2Af"></div>
                <div><input type="checkbox" name="attr_kepesseg2Mf"></div>
              </div>
            </fieldset>
          </div>
        </div>

        <div style="width: 49%; margin-left: 1%;">
          <h3>Képzettségek - %-os</h3>
          <div>
            <div class="row">
              <div style="width: 254px; padding: 0 2px;">Képzettség</div>
              <div style="width: 3.5em; text-align: center; padding: 0 2px;">%</div>
              <div></div>
            </div>
            <fieldset class="repeating_kepesseg%">
              <div class="row">
                <div><input type="text" name="attr_kepesseg%Nev" style="width: 220px; text-align: left;"></div>
                <div>
                  <button title="Képzettség próba" type='roll' value='&{template:default} {{name=@{kepesseg%Nev} próba!}} {{Dobás=[[d100]]}} {{Célszám=[[@{kepesseg%Fok}+?{+/- módosítók?|0}]]}}'></button>
                </div>
                <div><input type="number" name="attr_kepesseg%Fok"></div>
              </div>
            </fieldset>
          </div>

          <h3>Képzetstségek - nyelvek</h3>
          <div>
            <div class="row">
              <div style="width: 252px; padding: 0 2px;">Képzettség</div>
              <div style="width: 3.5em; text-align: center; padding: 0 2px;">Fok</div>
            </div>

            <fieldset class="repeating_kepesseg5">
              <div class="row">
                <div><input type="text" name="attr_kepesseg5Nev" style="width: 252px; text-align: left;"></div>
                <div><input type="number" name="attr_kepesseg5Fok"></div>
              </div>
            </fieldset>
          </div>
        </div>
      </div>

    </div>
  </div>

  <div class="tab-3">
    <div class="section karakterFelszereles">
      <h2>Felszerelés</h2>

      <textarea name="attr_felszereles" rows="10">

    </textarea>
    </div>
  </div>

</div>

<script type="text/worker">
  const defaults = [
    {name: "szint", value: 0},
    {name: "ero", value: 12},
    {name: "ero10", value: 2},
    {name: "ero_max", value: 12},
    {name: "allokepesseg", value: 12},
    {name: "allokepesseg10", value: 2},
    {name: "allokepesseg_max", value: 12},
    {name: "ugyesseg", value: 12},
    {name: "ugyesseg10", value: 2},
    {name: "ugyesseg_max", value: 12},
    {name: "gyorsasag", value: 12},
    {name: "gyorsasag10", value: 2},
    {name: "gyorsasag_max", value: 12},
    {name: "egeszseg", value: 12},
    {name: "egeszseg10", value: 2},
    {name: "egeszseg_max", value: 12},
    {name: "szepseg", value: 12},
    {name: "szepseg10", value: 2},
    {name: "szepseg_max", value: 12},
    {name: "intelligencia", value: 12},
    {name: "intelligencia10", value: 2},
    {name: "intelligencia_max", value: 12},
    {name: "akaratero", value: 12},
    {name: "akaratero10", value: 2},
    {name: "akaratero_max", value: 12},
    {name: "asztral", value: 12},
    {name: "asztral10", value: 2},
    {name: "asztral_max", value: 12},
    {name: "asztralTme", value: 2},
    {name: "mentalTme", value: 2},
    {name: "asztralStatikus", value: 0},
    {name: "mentalStatikus", value: 0},
    {name: "asztralDinamikus", value: 0},
    {name: "mentalDinamikus", value: 0},
    {name: "asztralEgyeb", value: 0},
    {name: "mentalEgyeb", value: 0},
    {name: "keMod", value: 0},
    {name: "teMod", value: 0},
    {name: "veMod", value: 0},
    {name: "ceMod", value: 0},
    {name: "sebzesMod", value: 0},
  ];
  const keys = defaults.map(item => item.name);


  on('sheet:opened', () => {
    getAttrs(keys, values => {
      const updates = {};
      defaults.forEach(item => {
        if (!values[item.name]) {
          updates[item.name] = item.value;
        }
      });

      if (Object.keys(updates).length !== 0) {
        console.log(updates);
        setAttrs(updates, () => console.log("Defaults have been set"));
      }
    })
  })

</script>
<script type="text/worker">
  const buttonlist = ["tab-1","tab-2","tab-3"];
  buttonlist.forEach(button => {
    on(`clicked:${button}`, function() {
      setAttrs({
        sheetTab: button
      });
    });
  });
</script>

<script type="text/worker">
  function tizFelettiResz(value) {
    return value - 10 < 0 ? 0 : value - 10;
  }

  function calc10(event) {
    const attrName = `${event.sourceAttribute}10`;
    const value10 = tizFelettiResz(event.newValue);
    console.log({[attrName]: value10});
    setAttrs({[attrName]: value10});

  }

  on("change:ero", calc10);
  on("change:ugyesseg", calc10);
  on("change:gyorsasag", calc10);
  on("change:allokepesseg", calc10);
  on("change:egeszseg", calc10);
  on("change:intelligencia", calc10);
  on("change:akaratero", calc10);
  on("change:asztral", calc10);

</script>

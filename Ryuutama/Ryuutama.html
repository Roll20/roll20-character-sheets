<!DOCTYPE html>

<html>
    <script type="text/worker">
        var translationLang = getTranslationLanguage();

        function compareDieToBase(baseDie, newDie) {
            if(newDie < baseDie) {
                return "reduced"
            } else if (newDie > baseDie) {
                return "increased"
            } else {
                return "default"
            }
        }

        function htmlEncodeString(string){
            var codedLetters = "";
            for (let letter of string) {
                codedLetters = codedLetters + `&#${letter.charCodeAt()};`
            }
            return codedLetters;
        }

        function sheetVersionUpdater(currentVersion){
            if (currentVersion < 1) {
                console.log("Updating to version 1")
                getSectionIDs("repeating_skills", skillsArray => {
                    skillsArray.forEach( id => {
                        updateRepeatingSkill("A", id)
                        updateRepeatingSkill("B", id)
                    });
                });
                getAttrs(["version"], function(values) {setAttrs({version: 1});});
            }
        }

        function formatStatLetters(statA, statB) {
            console.log(statB)
            if (statA == 'empty-string' && statB == 'empty-string'){
                return ""
            } else {
                return  " [" + getTranslationByKey(statA) + "+" + getTranslationByKey(statB) + "]"
            }
        }

        function updateRepeatingSkill(letter, id=null) {
            let base;
            id ? base = `repeating_skills_${id}` : base = `repeating_skills`
            getAttrs([`${base}_skillName${letter}`,`${base}_skillName${letter}Button`,`${base}_skillDie1${letter}`,`${base}_skillDie2${letter}` ],
                function(values) {
                    newName = values[`${base}_skillName${letter}`] + formatStatLetters(values[`${base}_skillDie1${letter}`], values[`${base}_skillDie2${letter}`])
                    setAttrs({
                        [`${base}_skillName${letter}Button`]: newName
                    });
                }
            );
        }

        on('sheet:opened', () => {
            getAttrs(['version'], v => {
                sheetVersionUpdater(parseFloat(v.version) || 0);
            });
        });

        on("change:injury change:condition", function() {
            getAttrs(["condition", "injury"], function(values) {
                setAttrs({
                    injured: parseInt(values.injury) > parseInt(values.condition) ? 2 : 0
                });
            });
        });
        on("change:poison change:condition", function() {
            getAttrs(["condition", "poison"], function(values) {
                setAttrs({
                    poisoned: parseInt(values.poison) > parseInt(values.condition) ? 2 : 0
                });
            });
        });
        on("change:sickness change:condition", function() {
            getAttrs(["condition", "sickness"], function(values) {
                setAttrs({
                    sick: parseInt(values.sickness) > parseInt(values.condition) ? 2 : 0
                });
            });
        });
        on("change:exhaustion change:condition", function() {
            getAttrs(["condition", "exhaustion"], function(values) {
                setAttrs({
                    exhausted: parseInt(values.exhaustion) > parseInt(values.condition) ? 2 : 0
                });
            });
        });
        on("change:muddle change:condition", function() {
            getAttrs(["condition", "muddle"], function(values) {
                setAttrs({
                    muddled: parseInt(values.muddle) > parseInt(values.condition) ? 2 : 0
                });
            });
        });
        on("change:shock change:condition", function() {
            getAttrs(["condition", "shock"], function(values) {
                setAttrs({
                    shocked: parseInt(values.shock) > parseInt(values.condition) ? 2 : 0
                });
            });
        });
        on("change:str change:poisoned change:sick change:shocked change:bonus change:condition", function() {
            getAttrs(["str", "poisoned", "sick", "shocked", "bonus", "condition", "strDieStatus"], function(values) {
                const newDiceCalc = Math.min(
                    12, Math.max(
                        4, parseInt(values.str)
                            - parseInt(values.poisoned)
                            - parseInt(values.sick)
                            - (translationLang == 'fr' ? 0 : parseInt(values.shocked))
                            + (values.bonus == 'STR' && parseInt(values.condition) >= 10 ? 2 : 0)
                        )
                    )
                setAttrs({
                    currentStr: newDiceCalc,
                    strDieStatus: compareDieToBase(values.str, newDiceCalc)
                });
            });
        });
        on("change:dex change:injured change:sick change:shocked change:bonus change:condition", function() {
            getAttrs(["dex", "injured", "sick", "shocked", "bonus", "condition", "dexDieStatus"], function(values) {
                const newDiceCalc = Math.min(
                    12, Math.max(
                        4, parseInt(values.dex)
                            - parseInt(values.injured)
                            - parseInt(values.sick)
                            - (translationLang == 'fr' ? 0 : parseInt(values.shocked))
                            + (values.bonus == 'DEX' && parseInt(values.condition) >= 10 ? 2 : 0)
                        )
                    )
                setAttrs({
                    currentDex: newDiceCalc,
                    dexDieStatus: compareDieToBase(values.dex, newDiceCalc)
                });
            });
        });
        on("change:int change:muddled change:sick change:shocked change:bonus change:condition", function() {
            getAttrs(["int", "muddled", "sick", "shocked", "bonus", "condition", "intDieStatus"], function(values) {
                const newDiceCalc = Math.min(
                    12, Math.max(
                        4, parseInt(values.int)
                            - parseInt(values.muddled)
                            - (translationLang == 'fr' ? 0 : parseInt(values.sick))
                            - parseInt(values.shocked)
                            + (values.bonus == 'INT' && parseInt(values.condition) >= 10 ? 2 : 0)
                        )
                    )
                setAttrs({
                    currentInt: newDiceCalc,
                    intDieStatus: compareDieToBase(values.int, newDiceCalc)
                });
            });
        });
        on("change:spi change:exhausted change:sick change:shocked change:bonus change:condition", function() {
            getAttrs(["spi", "exhausted", "sick", "shocked", "bonus", "condition", "spiDieStatus"], function(values) {
                const newDiceCalc = Math.min(
                    12, Math.max(
                            4, parseInt(values.spi)
                                - parseInt(values.exhausted)
                                - (translationLang == 'fr' ? 0 : parseInt(values.sick))
                                - parseInt(values.shocked)
                                + (values.bonus == 'SPI' && parseInt(values.condition) >= 10 ? 2 : 0)
                            )
                        )
                setAttrs({
                    currentSpi: newDiceCalc,
                    spiDieStatus: compareDieToBase(values.spi, newDiceCalc)
                });
            });
        });
        on("change:condition change:class1 change:class2", function() {
            getAttrs(["condition", "class1", "class2"], function(values) {
                var tipTopShape = 10 - (values.class1 == 'Navigator' ? 1 : 0) - (values.class2 == 'Navigator' ? 1 : 0);
                setAttrs({
                    outOfShape: parseInt(values.condition) <= 2 && parseInt(values.condition) > 0 ? 1 : 0,
                    tipTopShape: parseInt(values.condition) >= tipTopShape ? 1 : 0,
                    conditionDeath: parseInt(values.condition) <= 0 ? 1 : 0
                });
            });
        });
        on("change:healthPoints change:healthPoints_max change:condition", function() {
            getAttrs(["healthPoints", "healthPoints_max", "condition"], function(values) {
                setAttrs({
                    hpUnconscious: parseInt(values.healthPoints) <= 0 && parseInt(values.healthPoints) > (0 - parseInt(values.condition)) ? 1 : 0,
                    hpDeath: parseInt(values.healthPoints) <= (0 - parseInt(values.condition)) ? 1 : 0
                });
            });
        });
        on("change:mentalPoints", function() {
            getAttrs(["mentalPoints"], function(values) {
                setAttrs({
                    mpUnconscious: parseInt(values.mentalPoints) <= 0 ? 1 : 0
                });
            });
        });
        on("change:type1 change:type2", function() {
            getAttrs(["type1", "type2"], function(values) {
                setAttrs({
                    typeDamageMod: (values.type1 == 'Attack' ? 1 : 0) + (values.type2 == 'Attack' ? 1 : 0),
                    typeInitiativeMod: (values.type1 == 'Technical' ? 1 : 0) + (values.type2 == 'Technical' ? 1 : 0),
                    showAttackTypeMastery: (values.type1 == 'Attack' || values.type2 == 'Attack' ? 1 : 0),
                    showSecondAttackTypeMastery: (values.type1 == 'Attack' && values.type2 == 'Attack' ? 1 : 0)
                });
            });
        });
        on("change:showAttackTypeMastery", function() {
            getAttrs(["showAttackTypeMastery"], function(values) {
                if (parseInt(values.showAttackTypeMastery) == 0) {
                    setAttrs({
                        attackTypeMastery: 0
                    });
                }
            });
        });
        on("change:showSecondAttackTypeMastery", function() {
            getAttrs(["showSecondAttackTypeMastery"], function(values) {
                if (parseInt(values.showSecondAttackTypeMastery) == 0) {
                    setAttrs({
                        attackTypeMastery2: 0
                    });
                }
            });
        });
        on("change:class1 change:class2 change:class1Other change:class2Other", function() {
            getAttrs(["class1", "class2", "class1Other", "class2Other"], function(values) {
                setAttrs({
                    classTravelMod: (values.class1 == 'Minstrel' ? 1 : 0) + (values.class2 == 'Minstrel' ? 1 : 0),
                    classDirectionMod: (values.class1 == 'Minstrel' ? 1 : 0) + (values.class2 == 'Minstrel' ? 1 : 0) + (values.class1 == 'Navigator' ? 2 : 0) + (values.class2 == 'Navigator' ? 2 : 0) - (values.class1 == 'Navigator' && values.class2 == 'Navigator' ? 1 : 0),
                    classCampMod: (values.class1 == 'Minstrel' ? 1 : 0) + (values.class2 == 'Minstrel' ? 1 : 0),
                    classNegotiationMod: (values.class1 == 'Merchant' ? 1 : 0) + (values.class2 == 'Merchant' ? 1 : 0),
                    classConditionMod: (values.class1 == 'Farmer' ? 1 : 0) + (values.class2 == 'Farmer' ? 1 : 0),
                    classSkillBonus: (values.class1 != null && values.class1 == values.class2 && (values.class1 != 'Other' || values.class1Other == values.class2Other) ? 1 : 0),
                    showArtisanSkills: (values.class1 == 'Artisan' || values.class2 == 'Artisan' ? 1 : 0),
                    showFarmerSkills: (values.class1 == 'Farmer' || values.class2 == 'Farmer' ? 1 : 0),
                    showHealerSkills: (values.class1 == 'Healer' || values.class2 == 'Healer' ? 1 : 0),
                    showHunterSkills: (values.class1 == 'Hunter' || values.class2 == 'Hunter' ? 1 : 0),
                    showNavigatorSkills: (values.class1 == 'Navigator' || values.class2 == 'Navigator' ? 1 : 0),
                    showMerchantSkills: (values.class1 == 'Merchant' || values.class2 == 'Merchant' ? 1 : 0),
                    showMinstrelSkills: (values.class1 == 'Minstrel' || values.class2 == 'Minstrel' ? 1 : 0),
                    showNobleSkills: (values.class1 == 'Noble' || values.class2 == 'Noble' ? 1 : 0),
                    showWeaponGrace: (values.class1 == 'Noble' || values.class2 == 'Noble' ? 1 : 0),
                    showSecondWeaponGrace: (values.class1 == 'Noble' && values.class2 == 'Noble' ? 1 : 0),
                    animals_max: 1 + (values.class1 == 'Merchant' || values.class1 == 'Farmer' ? 2 : 0) + (values.class2 == 'Merchant' || values.class2 == 'Farmer' ? 2 : 0)
                });
            });
        });
        on("change:showWeaponGrace", function() {
            getAttrs(["showWeaponGrace"], function(values) {
                if (parseInt(values.showWeaponGrace) == 0) {
                    setAttrs({
                        weaponGrace: 0
                    });
                }
            });
        });
        on("change:showSecondWeaponGrace", function() {
            getAttrs(["showSecondWeaponGrace"], function(values) {
                if (parseInt(values.showSecondWeaponGrace) == 0) {
                    setAttrs({
                        weaponGrace2: 0
                    });
                }
            });
        });
        on("change:repeating_containers remove:repeating_containers change:repeating_animals remove:repeating_animals change:currentStr change:level change:type1 change:type2 change:class1 change:class2 change:species", function() {
            getSectionIDs("repeating_containers", function(containerIdArray) {
                getSectionIDs("repeating_animals", function(animalIdArray) {
                    var fieldNames = ["currentStr", "level", "type1", "type2", "class1", "class2", "species"]
                    for(var i=0; i < containerIdArray.length; i++) {
                        fieldNames.push("repeating_containers_" + containerIdArray[i] + "_containerCapacity");
                        fieldNames.push("repeating_containers_" + containerIdArray[i] + "_containerWater");
                    }
                    for (var i=0; i < animalIdArray.length; i++) {
                        fieldNames.push("repeating_animals_" + animalIdArray[i] + "_animalCapacity");
                    }
                    var containerItemCapacities = 0;
                    var containerWaterCapacities = 0;
                    getAttrs(fieldNames, function(values) {
                        for (var i=0; i < containerIdArray.length; i++) {
                            if (values["repeating_containers_" + containerIdArray[i] + "_containerWater"] == 1) {
                                containerWaterCapacities += parseInt(values["repeating_containers_" + containerIdArray[i] + "_containerCapacity"]);
                            } else {
                                containerItemCapacities += parseInt(values["repeating_containers_" + containerIdArray[i] + "_containerCapacity"]);
                            }
                        }
                        for (var i=0; i < animalIdArray.length; i++) {
                            containerItemCapacities += parseInt(values["repeating_animals_" + animalIdArray[i] + "_animalCapacity"]);
                        }
                        var maximumLoad = parseInt(values.currentStr) + parseInt(values.level) + 2 + (values.type1 == 'Technical' ? 3 : 0) + (values.type2 == 'Technical' ? 3 : 0) + (values.class1 == 'Farmer' ? 3 : 0) + (values.class2 == 'Farmer' ? 3 : 0) + (values.species == 'Koneko Goblin' ? 3 : 0);
                        setAttrs({
                            capacity_max: maximumLoad + containerItemCapacities,
                            weaponCapacity_max: maximumLoad,
                            water_max: containerWaterCapacities
                        });
                    });
                });
            });
        });
        on("change:repeating_containers remove:repeating_containers change:repeating_items remove:repeating_items", function() {
            getSectionIDs("repeating_containers", function(containerIdArray) {
                getSectionIDs("repeating_items", function(itemIdArray) {
                    var fieldNames = [];
                    for(var i=0; i < containerIdArray.length; i++) {
                        fieldNames.push("repeating_containers_" + containerIdArray[i] + "_containerSize");
                    }
                    for (var i=0; i < itemIdArray.length; i++) {
                        fieldNames.push("repeating_items_" + itemIdArray[i] + "_itemSize");
                        fieldNames.push("repeating_items_" + itemIdArray[i] + "_itemCount");
                    }
                    var totalBurden = 0;
                    getAttrs(fieldNames, function(values) {
                        for (var i=0; i < containerIdArray.length; i++) {
                            totalBurden += parseInt(values["repeating_containers_" + containerIdArray[i] + "_containerSize"]);
                        }
                        for (var i=0; i < itemIdArray.length; i++) {
                            totalBurden += parseInt(values["repeating_items_" + itemIdArray[i] + "_itemSize"]) * parseInt(values["repeating_items_" + itemIdArray[i] + "_itemCount"]);
                        }
                        setAttrs({
                            capacity: totalBurden
                        });
                    });
                });
            });
        });
        on("change:capacity change:capacity_max change:applyOverburdenPenalty", function() {
            getAttrs(["capacity", "capacity_max", "applyOverburdenPenalty"], function(values) {
                setAttrs({
                    overburdenPenalty: parseInt(values.applyOverburdenPenalty) * Math.max(0, parseInt(values.capacity) - parseInt(values.capacity_max)),
                    overCapacity: parseInt(values.capacity) > parseInt(values.capacity_max) ? 1 : 0
                });
            });
        });
        on("change:overburdenPenalty", function() {
            getAttrs(["overburdenPenalty"], function(values) {
                setAttrs({
                    overBurdened: parseInt(values.overburdenPenalty) > 0 ? 1 : 0,
                });
            });
        });
        on("change:repeating_armor:armorPenalty remove:repeating_armor", function() {
            getSectionIDs("repeating_armor", function(armorIdArray) {
                var fieldNames = [];
                for (var i=0; i < armorIdArray.length; i++) {
                    fieldNames.push("repeating_armor_" + armorIdArray[i] + "_armorPenalty");
                }
                var totalPenalty = 0;
                getAttrs(fieldNames, function(values) {
                    for (var i=0; i < armorIdArray.length; i++) {
                        totalPenalty += parseInt(values["repeating_armor_" + armorIdArray[i] + "_armorPenalty"]);
                    }
                    setAttrs({
                        armorPenalty: totalPenalty
                    });
                });
            });
        });
        on("change:repeating_animals remove:repeating_animals", function() {
            getSectionIDs("repeating_animals", function(idarray) {
                setAttrs({
                    animals: idarray.length
                });
            });
        });
        on("change:animals change:animals_max", function() {
            getAttrs(["animals", "animals_max"], function(values) {
                setAttrs({
                    tooManyAnimals: parseInt(values.animals) > parseInt(values.animals_max) ? 1 : 0
                });
            });
        });
        on("change:water", function() {
            getAttrs(["water"], function(values) {
                setAttrs({
                    outOfWater: parseInt(values.water) == 0 ? 1 : 0
                });
            });
        });
        on("change:repeating_weapons:weaponClassification", function() {
            getAttrs(["repeating_weapons_weaponClassification", "initialMastery", "attackTypeMastery", "attackTypeMastery2", "weaponGrace", "weaponGrace2"], function(values) {
                var masteries = [values.initialMastery, values.attackTypeMastery, values.attackTypeMastery2];
                setAttrs({
                    repeating_weapons_weaponGraceMod: ((values.repeating_weapons_weaponClassification == values.weaponGrace && masteries.indexOf(values.weaponGrace) > -1) ? 1 : 0) + ((values.repeating_weapons_weaponClassification == values.weaponGrace2 && masteries.indexOf(values.weaponGrace2) > -1) ? 1 : 0)
                });
            });
        });
        on("change:initialMastery change:attackTypeMastery change:attackTypeMastery2 change:weaponGrace change:weaponGrace2", function() {
            getSectionIDs("repeating_weapons", function(weaponIdArray) {
                var fieldNames = ["initialMastery", "attackTypeMastery", "attackTypeMastery2", "weaponGrace", "weaponGrace2"];
                for (var i=0; i < weaponIdArray.length; i++) {
                    fieldNames.push("repeating_weapons_" + weaponIdArray[i] + "_weaponClassification");
                }
                getAttrs(fieldNames, function(values) {
                    var masteries = [values.initialMastery, values.attackTypeMastery, values.attackTypeMastery2];
                    var attrsToSet = {};
                    for (var i=0; i < weaponIdArray.length; i++) {
                        var weaponClassification = values["repeating_weapons_" + weaponIdArray[i] + "_weaponClassification"];
                        var weaponGraceMod1 = weaponClassification == values.weaponGrace && masteries.indexOf(values.weaponGrace) > -1 ? 1 : 0;
                        var weaponGraceMod2 = weaponClassification == values.weaponGrace2 && masteries.indexOf(values.weaponGrace2) > -1 ? 1 : 0;
                        var weaponGraceModId = "repeating_weapons_" + weaponIdArray[i] + "_weaponGraceMod";
                        attrsToSet[weaponGraceModId] = weaponGraceMod1 + weaponGraceMod2;
                    }
                    setAttrs(attrsToSet);
                });
            });
        });
        on("change:fumble", function() {
            getAttrs(["fumble", "concentrationFumble"], function(values) {
                setAttrs({
                    showFumbleConcentration: parseInt(values.fumble) > 0 ? 1 : 0,
                    concentrationFumble: parseInt(values.fumble) > 0 ? parseInt(values.concentrationFumble) : 0
                });
            });
        });
        on("change:concentrationMP change:concentrationFumble change:type1 change:type2", function() {
            getAttrs(["concentrationMP", "concentrationFumble", "type1", "type2"], function(values) {
                var applyConcentration = parseInt(values.concentrationMP) + parseInt(values.concentrationFumble) > 0 ? true : false;
                setAttrs({
                    concentrationBonus: applyConcentration ? parseInt(values.concentrationMP) + parseInt(values.concentrationFumble) + (values.type1 == 'Technical' ? 1 : 0) + (values.type2 == 'Technical' ? 1 : 0) : 0
                });
            });
        });
        on("change:repeating_weapons:weaponSize change:repeating_armor:armorSize remove:repeating_weapons remove:repeating_armor", function() {
            var fieldNames = [];
            getSectionIDs("repeating_weapons", function(weaponIdArray) {
                for (var i=0; i < weaponIdArray.length; i++) {
                    console.log("pushing " + "repeating_weapons_" + weaponIdArray[i] + "_weaponSize")
                    fieldNames.push("repeating_weapons_" + weaponIdArray[i] + "_weaponSize");
                }
                getSectionIDs("repeating_armor", function(armorIdArray) {
                    for (var i=0; i < armorIdArray.length; i++) {
                        console.log("pushing " + "repeating_armor_" + armorIdArray[i] + "_armorSize")
                        fieldNames.push("repeating_armor_" + armorIdArray[i] + "_armorSize");
                    }
                    var totalBurden = 0;
                    console.log("burden starts at 0")
                    getAttrs(fieldNames, function(values) {
                        for (var key in values) {
                            totalBurden += parseInt(values[key])
                            console.log("burden is now" + totalBurden + " because " + parseInt(values[key]) + " was added to it")
                        }
                        setAttrs({
                            weaponCapacity: totalBurden
                        });
                    });
                });
            });
        });
        on("change:weaponCapacity change:weaponCapacity_max", function() {
            getAttrs(["weaponCapacity", "weaponCapacity_max"], function(values) {
                setAttrs({
                    overEncumbered: parseInt(values.weaponCapacity) > parseInt(values.weaponCapacity_max) ? 1 : 0
                });
            });
        });
        on("change:species change:currentSeason", function() {
            getAttrs(["species", "currentSeason"], function(values) {
                console.log(values.species)
                setAttrs({
                    speciesConditionMod: (values.species == 'Koneko Goblin' && values.currentSeason == 'Spring' ? 1 : 0),
                    speciesInitiativeMod: (values.species == 'Koneko Goblin' && values.currentSeason == 'Spring' ? 1 : 0)
                });
            });
        });
        on("change:headerColorSelect", function(event) {
            getAttrs(["headerColorSelect", "headerBgColor"], function(values) {
                setAttrs({
                    headerBgColor: values.headerColorSelect
                });
            });
        });
        on("change:mainBgColorSelect", function(event) {
            getAttrs(["mainBgColorSelect", "mainBgColor"], function(values) {
                setAttrs({
                    mainBgColor: values.mainBgColorSelect
                });
            });
        });
        on("change:iconBgColorSelect", function(event) {
            getAttrs(["iconBgColorSelect", "iconBgColor"], function(values) {
                setAttrs({
                    iconBgColor: values.iconBgColorSelect
                });
            });
        });
        on("change:radioBgColorSelect", function(event) {
            getAttrs(["radioBgColorSelect", "radioBgColor"], function(values) {
                setAttrs({
                    radioBgColor: values.radioBgColorSelect
                });
            });
        });
        on("change:level", function(event) {
            getAttrs(["level", "benedictionSlots"], function(values) {
                setAttrs({
                    benedictionSlots: parseInt(values.level)-1
                });
            });
        });
        on("change:repeating_skills:skillNameA change:repeating_skills:skillDie1A change:repeating_skills:skillDie2A", function(event) {
            updateRepeatingSkill('A')
        });
        on("change:repeating_skills:skillNameB change:repeating_skills:skillDie1B change:repeating_skills:skillDie2B", function(event) {
            updateRepeatingSkill('B')
        });
        on("sheet:opened", () => {
            getAttrs(["npc_switch"], v => {
                if (v.npc_switch == "on") {
                    setAttrs({
                        npc_switch: 3
                    });
                } else if (parseInt(v.npc_switch) == 0 ) {
                    setAttrs({
                        npc_switch: 1
                    });
                };
            });
        });

        on("sheet:opened", () => {
            getAttrs(["character_name", "safeCharacterName"], v => {
                encodedName = htmlEncodeString(v.character_name)
                if (encodedName != v.safeCharacterName){
                    setAttrs({
                        safeCharacterName: encodedName
                    });
                };
            });
        });
    </script>

    <div>
        <div class="charSheetType">
            <select name="attr_npc_switch" value="1" class="block-switch">
                <option value="1" selected="selected" data-i18n="pc">PC</option>
                <option value="2" data-i18n="gm">GM</option>
                <option value="3" data-i18n="npc">NPC</option>
            </select>
        </div>

        <!-- Color theme hidden fields -->
        <input class="headerBgColor" name="attr_headerBgColor" type="hidden" value="default"/>
        <input class="mainBgColor"   name="attr_mainBgColor"   type="hidden" value="default"/>
        <input class="iconBgColor"   name="attr_iconBgColor"   type="hidden" value="default"/>
        <input class="radioBgColor"  name="attr_radioBgColor"  type="hidden" value="default"/>
        <!-- End Color Theme fields -->

        <input type="checkbox" name="attr_npc_switch" value="1" class="hidden hider" checked>
        <div class="block-a characterSheet">
            <!-- Hidden Fields -->
            <div class="hidden">
                <input type="number" name="attr_version" value="0"/>
                <input type="number" name="attr_typeInitiativeMod" value="0"/>
                <input type="number" name="attr_typeDamageMod" value="0"/>
                <input type="number" name="attr_classTravelMod" value="0"/>
                <input type="number" name="attr_classDirectionMod" value="0"/>
                <input type="number" name="attr_classCampMod" value="0"/>
                <input type="number" name="attr_classConditionMod" value="0"/>
                <input type="number" name="attr_classNegotiationMod" value="0"/>
                <input type="number" name="attr_classSkillBonus" value="0"/>
                <input type="number" name="attr_armorPenalty" value="0"/>
                <input type="number" name="attr_concentrationBonus" value="0"/>
                <input type="number" name="attr_speciesConditionMod" value="0"/>
                <input type="number" name="attr_speciesInitiativeMod" value="0"/>
                <input type="hidden" name="attr_safeCharacterName" value=""/>
            </div>
            <!-- End Hidden Fields -->

            <!-- High Level Tabs -->
            <input type="radio" class="tab tab1" name="attr_core-tab" value="1" title="Details" checked="checked"/>
            <span class="tab tab1" data-i18n="tab-info">Info</span>
            <input type="radio" class="tab tab2" name="attr_core-tab" value="2" title="Class"/>
            <span class="tab tab2" data-i18n="tab-class">Class</span>
            <input type="radio" class="tab tab3" name="attr_core-tab" value="3" title="Stats"/>
            <span class="tab tab3" data-i18n="tab-stats">Stats</span>
            <input type="radio" class="tab tab4" name="attr_core-tab" value="4" title="Checks"/>
            <span class="tab tab4" data-i18n="tab-modifiers">Modifiers</span>
            <input type="radio" class="tab tab5" name="attr_core-tab" value="5" title="Equipment"/>
            <span class="tab tab5" data-i18n="tab-inv">Inventory</span>
            <input type="radio" class="tab tab6" name="attr_core-tab" value="6" title="Settings"/>
            <span class="tab tab6">y</span>
            <!-- End High Level Tabs -->

            <!-- Tabs -->
            <span class="characterDetails">
               <div class="flex">
                    <img class="logo" src="https://raw.githubusercontent.com/Roll20/roll20-character-sheets/master/Ryuutama/images/rtlogo.svg">
                    <div class="flex-column round-box">
                        <div class="flex">
                            <div class="flex-column">
                                <label data-i18n="name">Name</label>
        				        <input name="attr_character_name" data-i18n-placeholder="char-name" placeholder="Character Name" title="@{character_name}" type="text" value="" />
        				    </div>
        				    <div class="flex-column">
                                <label data-i18n="species">Species</label>
                                <select name="attr_species">
                                    <option value="Human" data-i18n="human">Human</option>
                                    <option value="Koneko Goblin" data-i18n="koneko">Koneko Goblin</option>
                                </select>
                            </div>
                        </div>
                        <div class="flex">
                            <div class="flex-column">
                                <label data-i18n="level">Level</label>
                                <input type="number" name="attr_level" value="1" min="1"/>
                            </div>
                            <div class="flex-column">
                                <label data-i18n="exp">Experience</label>
                                <input type="number" name="attr_exp" value="0" min="0" style="width:70px"/>
                            </div>
                            <div class="flex-column">
                                <label data-i18n="age">Age</label>
                                <input type="number" name="attr_charAge" min="1"/>
                            </div>
                            <div class="flex-column">
                                <label data-i18n="gender">Gender</label>
                                <input type="text" name="attr_charGender"/>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="flex personalItems">
                    <div class="flex-column">
                        <label class="header attrLabel" data-i18n="personalitem">Personal Item</label>
                        <input type="text" name="attr_personalItem"/>
                    </div>
                    <div class="flex-column">
                        <label class="header attrLabel" data-i18n="partyrole">Party Role</label>
                        <select name="attr_role" data-i18n-list="role-list">
                            <option value=""></option>
                            <option value="Journal Keeper" data-i18n-list-item="role-journalkeeper" data-i18n="role-journalkeeper">Journal Keeper</option>
                            <option value="Leader" data-i18n-list-item="role-leader" data-i18n="role-leader">Leader</option>
                            <option value="Mapper" data-i18n-list-item="role-mapper" data-i18n="role-mapper">Mapper</option>
                            <option value="Quartermaster" data-i18n-list-item="role-quartermaster" data-i18n="role-quartermaster">Quartermaster</option>
                        </select>
                    </div>
                </div>

                <div class="flex-column">
                    <label class="header attrLabel" data-i18n="appearance">Image Color/Appearance</label>
                    <textarea name="attr_charAppearance"></textarea>
                </div>

                <div class="flex-column">
                    <label class="header attrLabel" data-i18n="hometown">Hometown/Reason for Travel</label>
                    <textarea name="attr_charHometown"></textarea>
                </div>

                <div class="flex-column">
                    <label class="header attrLabel" data-i18n="notes">Notes</label>
                    <textarea name="attr_charNotes"></textarea>
                </div>
            </span>

            <span class="characterClass">
                <div class="sheet-2colrow">
                    <label class="header headerLabel" data-i18n="class">Class</label>
                </div>
                <div class="sheet-2colrow">
                    <div class="sheet-col">
                        <span data-i18n="class">Class</span> 1:
                        <select name="attr_class1" class="charoptions" data-i18n-list="class-list">
                            <option value=""></option>
                            <option value="Artisan"   data-i18n-list-item="artisan"   data-i18n="artisan">Artisan</option>
                            <option value="Farmer"    data-i18n-list-item="farmer"    data-i18n="farmer">Farmer</option>
                            <option value="Healer"    data-i18n-list-item="healer"    data-i18n="healer">Healer</option>
                            <option value="Hunter"    data-i18n-list-item="hunter"    data-i18n="hunter">Hunter</option>
                            <option value="Merchant"  data-i18n-list-item="merchant"  data-i18n="merchant">Merchant</option>
                            <option value="Minstrel"  data-i18n-list-item="minstrel"  data-i18n="minstrel">Minstrel</option>
                            <option value="Navigator" data-i18n-list-item="navigator" data-i18n="navigator">Navigator</option>
                            <option value="Noble"     data-i18n-list-item="noble"     data-i18n="noble">Noble</option>
                            <option value="Other"     data-i18n-list-item="other"     data-i18n="other">Other</option>
                        </select>
                        <input type="text" name="attr_class1Other" class="classOtherinput" placeholder="If other, type class name here" data-i18n-placeholder="class-other-ph"/>
                    </div>
                    <div class="sheet-col">
                        <span data-i18n="class">Class</span> 2:
                        <select name="attr_class2" class="charoptions" data-i18n-list="class-list">
                            <option value=""></option>
                            <option value="Artisan"   data-i18n-list-item="artisan"   data-i18n="artisan">Artisan</option>
                            <option value="Farmer"    data-i18n-list-item="farmer"    data-i18n="farmer">Farmer</option>
                            <option value="Healer"    data-i18n-list-item="healer"    data-i18n="healer">Healer</option>
                            <option value="Hunter"    data-i18n-list-item="hunter"    data-i18n="hunter">Hunter</option>
                            <option value="Merchant"  data-i18n-list-item="merchant"  data-i18n="merchant">Merchant</option>
                            <option value="Minstrel"  data-i18n-list-item="minstrel"  data-i18n="minstrel">Minstrel</option>
                            <option value="Navigator" data-i18n-list-item="navigator" data-i18n="navigator">Navigator</option>
                            <option value="Noble"     data-i18n-list-item="noble"     data-i18n="noble">Noble</option>
                            <option value="Other"     data-i18n-list-item="other"     data-i18n="other">Other</option>
                        </select>
                        <input type="text" name="attr_class2Other" class="classOtherinput" placeholder="If other, type class name here" data-i18n-placeholder="class-other-ph"/>
                    </div>
                </div>

                <label class="header headerLabel checkLabel">Type</label>
                <div class="sheet-2colrow">
                    <div class="sheet-col">
                        <span data-i18n="type">Type</span> 1:
                        <select name="attr_type1" class="charoptions">
                            <option value=""></option>
                            <option value="Attack" data-i18n="type-attack">Attack</option>
                            <option value="Magic" data-i18n="type-magic">Magic</option>
                            <option value="Technical" data-i18n="type-technical">Technical</option>
                        </select>
                    </div>
                    <div class="sheet-col">
                        <span data-i18n="season">Season</span> 1:
                        <select name="attr_season1" class="charoptions">
                            <option value=""></option>
                            <option value="Spring" data-i18n="season-spring">Spring</option>
                            <option value="Summer" data-i18n="season-summer">Summer</option>
                            <option value="Fall" data-i18n="season-fall">Fall</option>
                            <option value="Winter" data-i18n="season-winter">Winter</option>
                        </select>
                    </div>
                </div>

                <div class="sheet-2colrow">
                    <div class="sheet-col">
                        <span data-i18n="type">Type</span> 2:
                        <select name="attr_type2" class="charoptions">
                            <option value=""></option>
                            <option value="Attack" data-i18n="type-attack">Attack</option>
                            <option value="Magic" data-i18n="type-magic">Magic</option>
                            <option value="Technical" data-i18n="type-technical">Technical</option>
                        </select>
                    </div>
                    <div class="sheet-col">
                        <span data-i18n="season">Season</span> 2:
                        <select name="attr_season2" class="charoptions">
                            <option value=""></option>
                            <option value="Spring" data-i18n="season-spring">Spring</option>
                            <option value="Summer" data-i18n="season-summer">Summer</option>
                            <option value="Fall" data-i18n="season-fall">Fall</option>
                            <option value="Winter" data-i18n="season-winter">Winter</option>
                        </select>
                    </div>
                </div>

                <label class="header headerLabel checkLabel" data-i18n="mastered-weapons">Mastered Weapons</label>
                <div>
                    <div data-i18n="weaponmastery-initial">Select initial weapon mastery:</div>
                    <div class="flex">
                        <input type="radio" class="radioChoice radioChoice2" name="attr_initialMastery" value="2" title="Blade"/>
                        <span class="radioChoice radioChoice2" data-i18n="weapon-blade">Blade</span>
                        <input type="radio" class="radioChoice radioChoice3" name="attr_initialMastery" value="3" title="Polearm"/>
                        <span class="radioChoice radioChoice3" data-i18n="weapon-polearm">Polearm</span>
                        <input type="radio" class="radioChoice radioChoice5" name="attr_initialMastery" value="5" title="Bow"/>
                        <span class="radioChoice radioChoice5" data-i18n="weapon-bow">Bow</span>
                        <input type="radio" class="radioChoice radioChoice1" name="attr_initialMastery" value="1" title="Light Blade"/>
                        <span class="radioChoice radioChoice1" data-i18n="weapon-lightblade">Light Blade</span>
                        <input type="radio" class="radioChoice radioChoice4" name="attr_initialMastery" value="4" title="Axe"/>
                        <span class="radioChoice radioChoice4" data-i18n="weapon-axe">Axe</span>
                        <input type="radio" class="radioChoice radioChoice6" name="attr_initialMastery" value="6" title="Unarmed"/>
                        <span class="radioChoice radioChoice6" data-i18n="weapon-unarmed">Unarmed</span>
                    </div>
                </div>

                <span>
                    <input type="checkbox" class="showDiv" name="attr_showAttackTypeMastery" value="1">
                    <div>
                        <div data-i18n="weaponmastery-attacktype">Select bonus weapon mastery gained from the attack type:</div>
                        <div class="flex">
                            <input type="radio" class="radioChoice radioChoice2" name="attr_attackTypeMastery" value="2" title="Blade"/>
                            <span class="radioChoice radioChoice2" data-i18n="weapon-blade">Blade</span>
                            <input type="radio" class="radioChoice radioChoice3" name="attr_attackTypeMastery" value="3" title="Polearm"/>
                            <span class="radioChoice radioChoice3" data-i18n="weapon-polearm">Polearm</span>
                            <input type="radio" class="radioChoice radioChoice5" name="attr_attackTypeMastery" value="5" title="Bow"/>
                            <span class="radioChoice radioChoice5" data-i18n="weapon-bow">Bow</span>
                            <input type="radio" class="radioChoice radioChoice1" name="attr_attackTypeMastery" value="1" title="Light Blade"/>
                            <span class="radioChoice radioChoice1" data-i18n="weapon-lightblade">Light Blade</span>
                            <input type="radio" class="radioChoice radioChoice4" name="attr_attackTypeMastery" value="4" title="Axe"/>
                            <span class="radioChoice radioChoice4" data-i18n="weapon-axe">Axe</span>
                            <input type="radio" class="radioChoice radioChoice6" name="attr_attackTypeMastery" value="6" title="Unarmed"/>
                            <span class="radioChoice radioChoice6" data-i18n="weapon-unarmed">Unarmed</span>
                        </div>
                    </div>
                </span>

                <span>
                    <input type="checkbox" class="showDiv" name="attr_showSecondAttackTypeMastery" value="1">
                    <div>
                        <div data-i18n="weaponmastery-attacktype2">Select additional bonus weapon mastery gained from having the attack type twice:</div>
                        <div class="flex">
                            <input type="radio" class="radioChoice radioChoice2" name="attr_attackTypeMastery2" value="2" title="Blade"/>
                            <span class="radioChoice radioChoice2" data-i18n="weapon-blade">Blade</span>
                            <input type="radio" class="radioChoice radioChoice3" name="attr_attackTypeMastery2" value="3" title="Polearm"/>
                            <span class="radioChoice radioChoice3" data-i18n="weapon-polearm">Polearm</span>
                            <input type="radio" class="radioChoice radioChoice5" name="attr_attackTypeMastery2" value="5" title="Bow"/>
                            <span class="radioChoice radioChoice5" data-i18n="weapon-bow">Bow</span>
                            <input type="radio" class="radioChoice radioChoice1" name="attr_attackTypeMastery2" value="1" title="Light Blade"/>
                            <span class="radioChoice radioChoice1" data-i18n="weapon-lightblade">Light Blade</span>
                            <input type="radio" class="radioChoice radioChoice4" name="attr_attackTypeMastery2" value="4" title="Axe"/>
                            <span class="radioChoice radioChoice4" data-i18n="weapon-axe">Axe</span>
                            <input type="radio" class="radioChoice radioChoice6" name="attr_attackTypeMastery2" value="6" title="Unarmed"/>
                            <span class="radioChoice radioChoice6" data-i18n="weapon-unarmed">Unarmed</span>
                        </div>
                    </div>
                </span>

                <span>
                    <input type="checkbox" class="showDiv" name="attr_showWeaponGrace" value="1">
                    <div>
                        <div data-i18n="weaponmastery-noble">Select bonus weapon mastery gained from the noble class (can be the same as a previously selected weapon mastery):</div>
                        <div class="weaponBar">
                            <input type="radio" class="radioChoice radioChoice2" name="attr_weaponGrace" value="2" title="Blade"/>
                            <span class="radioChoice radioChoice2" data-i18n="weapon-blade">Blade</span>
                            <input type="radio" class="radioChoice radioChoice3" name="attr_weaponGrace" value="3" title="Polearm"/>
                            <span class="radioChoice radioChoice3" data-i18n="weapon-polearm">Polearm</span>
                            <input type="radio" class="radioChoice radioChoice5" name="attr_weaponGrace" value="5" title="Bow"/>
                            <span class="radioChoice radioChoice5" data-i18n="weapon-bow">Bow</span>
                        </div>
                    </div>
                </span>

                <span>
                    <input type="checkbox" class="showDiv" name="attr_showSecondWeaponGrace" value="1">
                    <div>
                        <div data-i18n="weaponmastery-noble2">Select additional bonus weapon mastery gained from having the noble class twice:</div>
                        <div class="weaponBar">
                            <input type="radio" class="radioChoice radioChoice2" name="attr_weaponGrace2" value="2" title="Blade"/>
                            <span class="radioChoice radioChoice2" data-i18n="weapon-blade">Blade</span>
                            <input type="radio" class="radioChoice radioChoice3" name="attr_weaponGrace2" value="3" title="Polearm"/>
                            <span class="radioChoice radioChoice3" data-i18n="weapon-polearm">Polearm</span>
                            <input type="radio" class="radioChoice radioChoice5" name="attr_weaponGrace2" value="5" title="Bow"/>
                            <span class="radioChoice radioChoice5" data-i18n="weapon-bow">Bow</span>
                        </div>
                    </div>
                </span>

                <label class="header headerLabel spellsLabel" data-i18n="spells-music-other">Spells/Music/Other Abilities</label>
                <div class="spell-details checkboxLabel">
                    <span class="spellName"> </span>
                    <span class="spellCost" data-i18n="mp">MP</span>
                    <span class="spellDuration" data-i18n="duration">Duration</span>
                    <span class="spellTarget" data-i18n="target">Target</span>
                    <span class="spellRange" data-i18n="range">Range</span>
                    <span class="spellType" data-i18n="type">Type</span>
                </div>

                <fieldset class="repeating_spells">
                        <div class="spellRow">

                        <div class="spell-details">
                            <button class="spellName skill-check-button" type="roll" value="&{template:spell} {{name=@{spellName}}} {{cost=@{spellCost}}} {{duration=@{spellDuration}}} {{target=@{spellTarget}}} {{range=@{spellRange}}} {{effect=@{spellEffect}}} {{charname=@{safeCharacterName}}}" name="roll_repeatingSpellCard">
                                <span name="attr_spellName"></span>
                            </button>
                            <span class="spellCost" name="attr_spellCost"></span>
                            <span class="spellDuration spellWrap" name="attr_spellDuration"></span>
                            <span class="spellTarget spellWrap" name="attr_spellTarget"></span>
                            <span class="spellRange spellWrap" name="attr_spellRange"></span>
                            <span class="spellTypes" name="attr_spellType" data-i18n-dynamic></span>
                        </div>

                        <input class="config-toggles config-checkbox" name="attr_settings" type="checkbox" value="settings"/>
                        <span class="config-toggles settings-toggle ">p</span>
                        <input class="config-toggles collapse-toggle config-checkbox" name="attr_collapse" type="checkbox" value="collapse"/>
                        <span class="config-toggles collapse-toggle">i</span>

                        <div class="flex settings full-width">
                            <div class="flex-column">
                                <span data-i18n="name">Name</span>
                                <input type="text" name="attr_spellName" class="spellName" placeholder="Hold Hands" data-i18n-placeholder="holdhands"/>
                            </div>
                            <div class="flex-column">
                                <span data-i18n="mp">MP</span>
                                <input type="number" name="attr_spellCost" min="0"/>
                            </div>
                            <div class="flex-column">
                                <span data-i18n="duration">Duration</span>
                                <input type="text" name="attr_spellDuration" class="spellDuration" placeholder="Instant" data-i18n-placeholder="instant"/>
                            </div>
                            <div class="flex-column">
                                <span data-i18n="target">Target</span>
                                <input type="text" name="attr_spellTarget" class="spellTarget" placeholder="1 Target" data-i18n-placeholder="onetarget"/>
                            </div>
                            <div class="flex-column">
                                <span data-i18n="range">Range</span>
                                <input type="text" name="attr_spellRange" class="spellRange" placeholder="Touch" data-i18n-placeholder="touch"/>
                            </div>
                            <div class="flex-column">
                                <span data-i18n="type">Type</span>
                                <select name="attr_spellType" class="spellTypes">
                                    <option value="empty-string"         data-i18n="empty-string"></option>
                                    <option value="incantation"          data-i18n="incantation">Incantation</option>
                                    <option value="incantation-ritual"   data-i18n="incantation-ritual">Incantation (Ritual)</option>
                                    <option value="music"                data-i18n="music">Music</option>
                                    <option value="season-spring"        data-i18n="season-spring">Spring</option>
                                    <option value="season-spring-ritual" data-i18n="season-spring-ritual">Spring (Ritual)</option>
                                    <option value="season-summer"        data-i18n="season-summer">Summer</option>
                                    <option value="season-summer-ritual" data-i18n="season-summer-ritual">Summer (Ritual)</option>
                                    <option value="season-fall"          data-i18n="season-fall">Fall</option>
                                    <option value="season-fall-ritual"   data-i18n="season-fall-ritual">Fall (Ritual) </option>
                                    <option value="season-winter"        data-i18n="season-winter">Winter</option>
                                    <option value="season-winter-ritual" data-i18n="season-winter-ritual">Winter (Ritual)</option>
                                    <option value="Other"                data-i18n="other">Other</option>
                                </select>
                            </div>
                        </div>
                        <div class="settings">
                            <textarea name="attr_spellEffect" class="spellEffect" placeholder="Effect" data-i18n-placeholder="effect"></textarea>
                        </div>
                        <div class="collapse">
                            <span name="attr_spellEffect" class="spellEffectDisplay"></span>
                        </div>
                    </div>
                </fieldset>
            </span>

            <span class="characterStats">
                <div class="hpmpgrid">
                    <div class="hpHeader"><div class="flex header hpmpHeader" data-i18n="hp-words">Hit Points</div></div>
                    <div class="mpHeader"><div class="flex header hpmpHeader" data-i18n="mp-words">Mental Points</div></div>
                    <div class="condHeader">
                        <div class="flex header hpmpHeader"><span data-i18n="condition">Condition</span>&nbsp;(<span data-i18n="condition-bonus">If >=10 add 1 dice size to</span>:
                            <select name="attr_bonus" class="condAttribute">
                                <option value=""></option>
                                <option value="STR" data-i18n="str">STR</option>
                                <option value="DEX" data-i18n="dex">DEX</option>
                                <option value="INT" data-i18n="int">INT</option>
                                <option value="SPI" data-i18n="spi">SPI</option>
                            </select>
                            )
                        </div>
                    </div>
                    <div class="hp">
                        <img src="https://raw.githubusercontent.com/Roll20/roll20-character-sheets/master/Ryuutama/images/heart.png" alt="whiteheart" class="icon">
                        <input type="checkbox" class="penaltyCondition" name="attr_hpUnconscious" value="1"/>
                        <input type="checkbox" class="deathCondition" name="attr_hpDeath" value="1"/>
                        <input type="number" class="stats" name="attr_healthPoints" value="8"/> /
                        <input type="number" class="stats" name="attr_healthPoints_max" value="8" min="1"/>
                    </div>
                    <div class="mp">
                        <img src="https://raw.githubusercontent.com/Roll20/roll20-character-sheets/master/Ryuutama/images/sevenpointstar.png" alt="sevenpointstar" class="icon">
                        <input type="checkbox" class="penaltyCondition" name="attr_mpUnconscious" value="1"/>
                        <input type="number" class="stats" name="attr_magicPoints" value="8" min="0"/> /
                        <input type="number" class="stats" name="attr_magicPoints_max" value="8" min="1"/>
                    </div>
                    <div class="condition flex">
                        <img src="https://raw.githubusercontent.com/Roll20/roll20-character-sheets/master/Ryuutama/images/condition.png" alt="condition" class="icon">
                        <label class="flex-column condionBar">2<input type="radio" name="attr_condition" value="2"></label>
                        <label class="flex-column condionBar">3<input type="radio" name="attr_condition" value="3"></label>
                        <label class="flex-column condionBar">4<input type="radio" name="attr_condition" value="4"></label>
                        <label class="flex-column condionBar">5<input type="radio" name="attr_condition" value="5"></label>
                        <label class="flex-column condionBar">6<input type="radio" name="attr_condition" value="6"></label>
                        <label class="flex-column condionBar">7<input type="radio" name="attr_condition" value="7"></label>
                        <label class="flex-column condionBar">8<input type="radio" name="attr_condition" value="8"></label>
                        <label class="flex-column condionBar">9<input type="radio" name="attr_condition" value="9"></label>
                        <label class="flex-column condionBar">10<input type="radio" name="attr_condition" value="10">&#9733;</label>
                        <label class="flex-column condionBar">11<input type="radio" name="attr_condition" value="11"></label>
                        <label class="flex-column condionBar">12<input type="radio" name="attr_condition" value="12"></label>
                        <label class="flex-column condionBar">13<input type="radio" name="attr_condition" value="13"></label>
                        <label class="flex-column condionBar">14<input type="radio" name="attr_condition" value="14"></label>
                        <label class="flex-column condionBar">15<input type="radio" name="attr_condition" value="15"></label>
                        <label class="flex-column condionBar">16<input type="radio" name="attr_condition" value="16"></label>
                        <label class="flex-column condionBar">17<input type="radio" name="attr_condition" value="17"></label>
                        <label class="flex-column condionBar">18<input type="radio" name="attr_condition" value="18"></label>
                        <label class="flex-column condionBar">19<input type="radio" name="attr_condition" value="19"></label>
                        <label class="flex-column condionBar">20<input type="radio" name="attr_condition" value="20"></label>
                    </div>
                </div>

                <hr>

                <div class="coreAttributes">
                    <div class="str">
                        <div class="coreStatGrid">
                            <div class="coreStatText" data-i18n="str">STR</div>
                            <div class="coreStatBaseDie flex-column">
                                <select name="attr_str" class="dtype">
                                    <option value="4">d4</option>
                                    <option value="6">d6</option>
                                    <option value="8">d8</option>
                                    <option value="10">d10</option>
                                    <option value="12">d12</option>
                                </select>
                                <span data-i18n="base">Base</span>
                            </div>
                            <div class="coreStatCurrentDie flex-column">
                                <input class="diceAdjustment" name="attr_strDieStatus" type="hidden" value="default"/>
                                <input type="number" name="attr_currentStr" value="4" min="4" step="2" max="12"/>
                                <span data-i18n="current">Current</span>
                            </div>
                        </div>
                    </div>
                    <div class="dex">
                        <div class="coreStatGrid">
                            <div class="coreStatText" data-i18n="dex">DEX</div>
                            <div class="coreStatBaseDie flex-column">
                                <select name="attr_dex" class="dtype">
                                    <option value="4">d4</option>
                                    <option value="6">d6</option>
                                    <option value="8">d8</option>
                                    <option value="10">d10</option>
                                    <option value="12">d12</option>
                                </select>
                                <span data-i18n="base">Base</span>
                            </div>
                            <div class="coreStatCurrentDie flex-column">
                                <input class="diceAdjustment" name="attr_dexDieStatus" type="hidden" value="default"/>
                                <input type="number" name="attr_currentDex" value="4" min="4" step="2" max="12"/>
                                <span data-i18n="current">Current</span>
                            </div>
                        </div>
                    </div>
                    <div class="int">
                        <div class="coreStatGrid">
                            <div class="coreStatText" data-i18n="int">INT</div>
                            <div class="coreStatBaseDie flex-column">
                                <select name="attr_int" class="dtype">
                                    <option value="4">d4</option>
                                    <option value="6">d6</option>
                                    <option value="8">d8</option>
                                    <option value="10">d10</option>
                                    <option value="12">d12</option>
                                </select>
                                <span data-i18n="base">Base</span>
                            </div>
                            <div class="coreStatCurrentDie flex-column">
                                <input class="diceAdjustment" name="attr_intDieStatus" type="hidden" value="default"/>
                                <input type="number" name="attr_currentInt" value="4" min="4" step="2" max="12"/>
                                <span data-i18n="current">Current</span>
                            </div>
                        </div>
                    </div>
                    <div class="spi">
                        <div class="coreStatGrid">
                            <div class="coreStatText" data-i18n="spi">SPI</div>
                            <div class="coreStatBaseDie flex-column">
                                <select name="attr_spi" class="dtype">
                                    <option value="4">d4</option>
                                    <option value="6">d6</option>
                                    <option value="8">d8</option>
                                    <option value="10">d10</option>
                                    <option value="12">d12</option>
                                </select>
                                <span data-i18n="base">Base</span>
                            </div>
                            <div class="coreStatCurrentDie flex-column">
                                <input class="diceAdjustment" name="attr_spiDieStatus" type="hidden" value="default"/>
                                <input type="number" name="attr_currentSpi" value="4" min="4" step="2" max="12"/>
                                <span data-i18n="current">Current</span>
                            </div>
                        </div>
                    </div>
                </div>
                <hr>
                <div class="flex">
                    <div class="flex-column">
                        <label class="header" data-i18n="status-injury">Injury</label>
                        <div class="flex">
                            <img src="https://raw.githubusercontent.com/Roll20/roll20-character-sheets/master/Ryuutama/images/bandaids.png" alt="bandaids" class="icon icon-small">
                            <input type="checkbox" class="penaltyCondition" name="attr_injured" value="2"/>
                            <input type="number" name="attr_injury" value="0" min="0"/>
                        </div>
                        <span class="font-12" data-i18n="status-lowerdex">lowers DEX die size</span>
                    </div>
                    <div class="flex-column">
                        <label class="header" data-i18n="status-poison">Poison</label>
                        <div class="flex">
                            <img src="https://raw.githubusercontent.com/Roll20/roll20-character-sheets/master/Ryuutama/images/skullcrossbones.png" alt="skullcrossbones" class="icon icon-small">
                            <input type="checkbox" class="penaltyCondition" name="attr_poisoned" value="2"/>
                            <input type="number" name="attr_poison" value="0" min="0"/>
                        </div>
                        <span class="font-12" data-i18n="status-lowerstr">lowers STR die size</span>
                    </div>
                    <div class="flex-column">
                        <label class="header" data-i18n="status-sickness">Sickness</label>
                        <div class="flex">
                            <img src="https://raw.githubusercontent.com/Roll20/roll20-character-sheets/master/Ryuutama/images/bedmeds.png" alt="bed" class="icon icon-small">
                            <input type="checkbox" class="penaltyCondition" name="attr_sick" value="2"/>
                            <input type="number" name="attr_sickness" value="0" min="0"/>
                        </div>
                        <span class="font-12" data-i18n="status-lowerall">lowers all dice sizes</span>
                    </div>

                    <div class="flex-column">
                        <label class="header" data-i18n="status-exhaustion">Exhaustion</label>
                        <div class="flex">
                            <img src="https://raw.githubusercontent.com/Roll20/roll20-character-sheets/master/Ryuutama/images/moonstars.png" alt="exhaustion" class="icon icon-small">
                            <input type="checkbox" class="penaltyCondition" name="attr_exhausted" value="2"/>
                            <input type="number" name="attr_exhaustion" value="0" min="0"/>
                        </div>
                        <span class="font-12" data-i18n="status-lowerspi">lowers SPI die size</span>
                    </div>
                    <div class="flex-column">
                        <label class="header" data-i18n="status-muddled">Muddled</label>
                        <div class="flex">
                            <img src="https://raw.githubusercontent.com/Roll20/roll20-character-sheets/master/Ryuutama/images/questionmarks.png" alt="questionmarks" class="icon icon-small">
                            <input type="checkbox" class="penaltyCondition" name="attr_muddled" value="2"/>
                            <input type="number" name="attr_muddle" value="0" min="0"/>
                        </div>
                        <span class="font-12" data-i18n="status-lowerint">lowers INT die size</span>
                    </div>
                    <div class="flex-column">
                        <label class="header" data-i18n="status-shock">Shock</label>
                        <div class="flex">
                            <img src="https://raw.githubusercontent.com/Roll20/roll20-character-sheets/master/Ryuutama/images/brokenheart.png" alt="brokenheart" class="icon icon-small">
                            <input type="checkbox" class="penaltyCondition" name="attr_shocked" value="2"/>
                            <input type="number" name="attr_shock" value="0" min="0"/>
                        </div>
                        <span class="font-12" data-i18n="status-lowerall">lowers all dice sizes</span>
                    </div>
                </div>

                <hr>

                <div class="journeyRules">
                    <div class="journeyRulesGrid">
                        <div class="journeyRulesTitle" data-i18n="journey-rules">Journey Rules</div>
                        <div class="journeyRulesTravelCheck">
                            <button class="skill-check-button " type="roll" value="&{template:skillCheck} {{season=@{currentSeason}}} {{name=^{travel}}} {{die1=[[1d@{currentStr}]]}} {{die2=[[1d@{currentDex}]]}} {{bonusesAndPenalties=[[@{travelMod}[Skill Mod]+@{concentrationBonus}[Concentration]+@{classTravelMod}[Class Bonus]+@{applyTerrain}[Terrain]+@{applyWeather}[Weather]-@{armorPenalty}-@{overburdenPenalty}[Overburden]]]}}" name="roll_travelRoll">
                                1) <span data-i18n="travel">Travel</span> [<span data-i18n="str">STR</span>+<span data-i18n="dex">DEX</span>] +
                            </button>
                            <input type="number" name="attr_travelMod" value="0"/>
                        </div>
                        <div class="journeyRulesDirectionCheck">
                            <button class="skill-check-button" type="roll" value="&{template:skillCheck} {{season=@{currentSeason}}} {{name=^{direction}}} {{die1=[[1d@{currentInt}]]}} {{die2=[[1d@{currentInt}]]}} {{bonusesAndPenalties=[[@{directionMod}[Skill Mod]+@{concentrationBonus}[Concentration]+@{classDirectionMod}[Class Bonus]+@{applyTerrain}[Terrain]+@{applyWeather}[Weather]-@{overburdenPenalty}[Overburden]]]}}" name="roll_directionRoll">
                                2) <span data-i18n="direction">Direction</span> [<span data-i18n="int">INT</span>+<span data-i18n="int">INT</span>] +
                            </button>
                            <input type="number" name="attr_directionMod" value="0"/>
                        </div>
                        <div class="journeyRulesCampCheck">
                            <button class="skill-check-button" type="roll" value="&{template:skillCheck} {{season=@{currentSeason}}} {{name=^{camp}}} {{die1=[[1d@{currentDex}]]}} {{die2=[[1d@{currentInt}]]}} {{bonusesAndPenalties=[[@{campMod}[Skill Mod]+@{concentrationBonus}[Concentration]+@{classCampMod}[Class Bonus]+@{applyTerrain}[Terrain]+@{applyWeather}[Weather]-@{overburdenPenalty}[Overburden]]]}}" name="roll_campRoll">
                                3) <span data-i18n="camp">Camp</span> [<span data-i18n="dex">DEX</span>+<span data-i18n="int">INT</span>] +
                            </button>
                            <input type="number" name="attr_campMod" value="0"/>
                        </div>
                    </div>
                </div>

                <hr>

                <div class="flex" data-i18n-list="skills-list">
                    <div class="flex-column skillCheckColumn">
                        <div data-i18n-list-item="condition" class="flex-between">
                            <button class="skill-check-button" type="roll" value="&{template:skillCheck} {{season=@{currentSeason}}} {{name=^{condition}}} {{die1=[[1d@{currentStr}]]}} {{die2=[[1d@{currentSpi}]]}} {{bonusesAndPenalties=[[@{conditionMod}[Skill Mod]+@{classConditionMod}[Class Bonus]+@{applyTerrain}[Terrain]+@{applyWeather}[Weather]+@{speciesConditionMod}-@{overburdenPenalty}[Overburden]]]}}" name="roll_conditionRoll">
                                <span data-i18n="condition">Condition</span> [<span data-i18n="str">STR</span>+<span data-i18n="spi">SPI</span>]
                            </button>
                            <input type="number" name="attr_conditionMod" value="0" class="journeyMod"/>
                        </div>
                        <div data-i18n-list-item="delicate-work" class="flex-between">
                            <button class="skill-check-button" type="roll" value="&{template:skillCheck} {{season=@{currentSeason}}} {{name=^{delicate-work}}} {{die1=[[1d@{currentDex}]]}} {{die2=[[1d@{currentSpi}]]}} {{bonusesAndPenalties=[[@{delicateWorkMod}[Skill Mod]+@{concentrationBonus}[Concentration]+@{applyTerrain}[Terrain]+@{applyWeather}[Weather]-@{overburdenPenalty}[Overburden]]]}}" name="roll_delicateWorkRoll">
                                <span data-i18n="delicate-work">Delicate Work</span> [<span data-i18n="dex">DEX</span>+<span data-i18n="spi">SPI</span>]
                            </button>
                            <input type="number" name="attr_delicateWorkMod" value="0" class="journeyMod"/>
                        </div>
                        <div data-i18n-list-item="dodge" class="flex-between">
                            <button class="skill-check-button" type="roll" value="&{template:skillCheck} {{season=@{currentSeason}}} {{name=^{dodge}}} {{die1=[[1d@{currentDex}]]}} {{die2=[[1d@{currentInt}]]}} {{bonusesAndPenalties=[[@{dodgeMod}[Skill Mod]+@{concentrationBonus}[Concentration]+@{applyTerrain}[Terrain]+@{applyWeather}[Weather]-@{overburdenPenalty}[Overburden]]]}}" name="roll_dodgeRoll">
                                <span data-i18n="dodge">Dodge</span> [<span data-i18n="dex">DEX</span>+<span data-i18n="int">INT</span>]
                            </button>
                            <input type="number" name="attr_dodgeMod" value="0" class="journeyMod"/>
                        </div>
                        <div data-i18n-list-item="drinking" class="flex-between">
                            <button class="skill-check-button" type="roll" value="&{template:skillCheck} {{season=@{currentSeason}}} {{name=^{drinking}}} {{die1=[[1d@{currentStr}]]}} {{die2=[[1d@{currentSpi}]]}} {{bonusesAndPenalties=[[@{drinkingMod}[Skill Mod]+@{concentrationBonus}[Concentration]+@{applyTerrain}[Terrain]+@{applyWeather}[Weather]-@{overburdenPenalty}[Overburden]]]}}" name="roll_drinkingRoll">
                                <span data-i18n="drinking">Drinking</span> [<span data-i18n="str">STR</span>+<span data-i18n="spi">SPI</span>]</button>
                            <input type="number" name="attr_drinkingMod" value="0" class="journeyMod"/>
                        </div>
                        <div data-i18n-list-item="hard-exercise" class="flex-between">
                            <button class="skill-check-button" type="roll" value="&{template:skillCheck} {{season=@{currentSeason}}} {{name=^{hard-exercise}}} {{die1=[[1d@{currentStr}]]}} {{die2=[[1d@{currentDex}]]}} {{bonusesAndPenalties=[[@{hardExerciseMod}[Skill Mod]+@{concentrationBonus}[Concentration]+@{applyTerrain}[Terrain]+@{applyWeather}[Weather]-@{overburdenPenalty}[Overburden]]]}}" name="roll_hardExerciseRoll">
                                <span data-i18n="hard-exercise">Hard Exercise</span> [<span data-i18n="str">STR</span>+<span data-i18n="dex">DEX</span>]
                            </button>
                            <input type="number" name="attr_hardExerciseMod" value="0" class="journeyMod"/>
                        </div>
                    </div>

                    <div class="flex-column skillCheckColumn">
                        <div data-i18n-list-item="initiative" class="flex-between">
                            <button class="skill-check-button" type="roll" value="&{template:oneDieCheck} {{season=@{currentSeason}}} {{name=@{character_name} ^{initiative}}} {{result=[[1d@{currentDex}+1d@{currentInt}+@{initiativeMod}+@{typeInitiativeMod}[Skill Mod]+@{applyTerrain}[Terrain]+@{applyWeather}[Weather]+@{speciesInitiativeMod}-@{armorPenalty}-@{overburdenPenalty}[Overburden] &{tracker}]]}}" name="roll_initiativeRoll">
                                <span data-i18n="initiative">Initiative</span> [<span data-i18n="dex">DEX</span>+<span data-i18n="int">INT</span>]
                            </button>
                            <input type="number" name="attr_initiativeMod" value="0" class="journeyMod"/>
                        </div>
                        <div data-i18n-list-item="job-knowledge" class="flex-between">
                            <button class="skill-check-button" type="roll" value="&{template:skillCheck} {{season=@{currentSeason}}} {{name=^{job-knowledge}}} {{die1=[[1d@{currentInt}]]}} {{die2=[[1d@{currentInt}]]}} {{bonusesAndPenalties=[[@{jobKnowledgeMod}[Skill Mod]+@{concentrationBonus}[Concentration]+@{applyTerrain}[Terrain]+@{applyWeather}[Weather]-@{overburdenPenalty}[Overburden]]]}}" name="roll_jobKnowledgeRoll">
                                <span data-i18n="job-knowledge">Job Knowledge</span> [<span data-i18n="int">INT</span>+<span data-i18n="int">INT</span>]
                            </button>
                            <input type="number" name="attr_jobKnowledgeMod" value="0" class="journeyMod"/>
                        </div>
                        <div data-i18n-list-item="magic" class="flex-between">
                            <button class="skill-check-button" type="roll" value="&{template:skillCheck} {{season=@{currentSeason}}} {{name=^{magic}}} {{die1=[[1d@{currentInt}]]}} {{die2=[[1d@{currentSpi}]]}} {{bonusesAndPenalties=[[@{magicCheckMod}[Skill Mod]+@{concentrationBonus}[Concentration]+@{applyTerrain}[Terrain]+@{applyWeather}[Weather]-@{overburdenPenalty}[Overburden]]]}}" name="roll_magicRoll">
                                <span data-i18n="magic">Magic</span> [<span data-i18n="int">INT</span>+<span data-i18n="spi">SPI</span>]
                            </button>
                            <input type="number" name="attr_magicCheckMod" value="0" class="journeyMod"/>
                        </div>
                        <div data-i18n-list-item="monster-knowledge" class="flex-between">
                            <button class="skill-check-button" type="roll" value="&{template:skillCheck} {{season=@{currentSeason}}} {{name=^{monster-knowledge}}} {{die1=[[1d@{currentInt}]]}} {{die2=[[1d@{currentInt}]]}} {{bonusesAndPenalties=[[@{monsterKnowledgeMod}[Skill Mod]+@{concentrationBonus}[Concentration]+@{applyTerrain}[Terrain]+@{applyWeather}[Weather]-@{overburdenPenalty}[Overburden]]]}}" name="roll_monsterKnowledgeRoll">
                                <span data-i18n="monster-knowledge">Monster Knowledge</span> [<span data-i18n="int">INT</span>+<span data-i18n="int">INT</span>]
                            </button>
                            <input type="number" name="attr_monsterKnowledgeMod" value="0" class="journeyMod"/>
                        </div>
                        <div data-i18n-list-item="negotiation" class="flex-between">
                            <button class="skill-check-button" type="roll" value="&{template:skillCheck} {{season=@{currentSeason}}} {{name=^{negotiation}}} {{die1=[[1d@{currentInt}]]}} {{die2=[[1d@{currentSpi}]]}} {{bonusesAndPenalties=[[@{negotiationMod}[Skill Mod]+@{concentrationBonus}[Concentration]+@{classNegotiationMod}[Class Bonus]+@{applyTerrain}[Terrain]+@{applyWeather}[Weather]-@{overburdenPenalty}[Overburden]]]}}" name="roll_negotiationRoll">
                                <span data-i18n="negotiation">Negotiation</span> [<span data-i18n="int">INT</span>+<span data-i18n="spi">SPI</span>]
                            </button>
                            <input type="number" name="attr_negotiationMod" value="0" class="journeyMod"/>
                        </div>
                    </div>

                    <div class="flex-column skillCheckColumn">
                        <div data-i18n-list-item="perception" class="flex-between">
                            <button class="skill-check-button" type="roll" value="&{template:skillCheck} {{season=@{currentSeason}}} {{name=^{perception}}} {{die1=[[1d@{currentDex}]]}} {{die2=[[1d@{currentInt}]]}} {{bonusesAndPenalties=[[@{perceptionMod}[Skill Mod]+@{concentrationBonus}[Concentration]+@{applyTerrain}[Terrain]+@{applyWeather}[Weather]-@{overburdenPenalty}[Overburden]]]}}" name="roll_perceptionRoll">
                                <span data-i18n="perception">Perception</span> [<span data-i18n="dex">DEX</span>+<span data-i18n="int">INT</span>]
                            </button>
                            <input type="number" name="attr_perceptionMod" value="0" class="journeyMod"/>
                        </div>
                        <div data-i18n-list-item="search-for-food" class="flex-between">
                            <button class="skill-check-button" type="roll" value="&{template:skillCheck} {{season=@{currentSeason}}} {{name=^{search-for-food}}} {{die1=[[1d@{currentStr}]]}} {{die2=[[1d@{currentInt}]]}} {{bonusesAndPenalties=[[@{foragingMod}[Skill Mod]+@{concentrationBonus}[Concentration]+@{applyTerrain}[Terrain]+@{applyWeather}[Weather]-@{overburdenPenalty}[Overburden]]]}}" name="roll_foragingRoll">
                                <span data-i18n="search-for-food">Search for Food</span> [<span data-i18n="str">STR</span>+<span data-i18n="int">INT</span>]
                            </button>
                            <input type="number" name="attr_foragingMod" value="0" class="journeyMod"/>
                        </div>
                        <div data-i18n-list-item="sense" class="flex-between">
                            <button class="skill-check-button" type="roll" value="&{template:skillCheck} {{season=@{currentSeason}}} {{name=^{sense}}} {{die1=[[1d@{currentInt}]]}} {{die2=[[1d@{currentSpi}]]}} {{bonusesAndPenalties=[[@{senseMod}[Skill Mod]+@{concentrationBonus}[Concentration]+@{applyTerrain}[Terrain]+@{applyWeather}[Weather]-@{overburdenPenalty}[Overburden]]]}}" name="roll_senseRoll">
                                <span data-i18n="sense">Sense</span> [<span data-i18n="int">INT</span>+<span data-i18n="spi">SPI</span>]
                            </button>
                            <input type="number" name="attr_senseMod" value="0" class="journeyMod"/>
                        </div>
                        <div data-i18n-list-item="stealth" class="flex-between">
                            <button class="skill-check-button" type="roll" value="&{template:skillCheck} {{season=@{currentSeason}}} {{name=^{stealth}}} {{die1=[[1d@{currentDex}]]}} {{die2=[[1d@{currentDex}]]}} {{bonusesAndPenalties=[[@{stealthMod}[Skill Mod]+@{concentrationBonus}[Concentration]+@{applyTerrain}[Terrain]+@{applyWeather}[Weather]-@{overburdenPenalty}[Overburden]]]}}" name="roll_stealthRoll">
                                <span data-i18n="stealth">Stealth</span> [<span data-i18n="dex">DEX</span>+<span data-i18n="dex">DEX</span>]
                            </button>
                            <input type="number" name="attr_stealthMod" value="0" class="journeyMod"/>
                        </div>
                    </div>
                </div>

                <span>
                    <input type="checkbox" class="showDiv" name="attr_showFarmerSkills" value="1">
                    <div class="flex-column">
                        <label class="header headerLabel itemLabel"><span data-i18n="side-job">Side Job</span></label>
                        <span data-i18n="automatic-negativeone"></span>
                        <div>
                            <span data-i18n="name">Name</span>:
                            <input type="text" name="attr_farmerSkillName"/>
                            <span data-i18n="effect">Effect</span>:
                            <input type="text" name="attr_farmerSkillEffect" class="spellEffect"/>

                            <button type="roll" value="&{template:skillCheck} {{season=@{currentSeason}}} {{name=@{farmerSkillName}}} {{die1=[[1d@{farmerSkillDie1}]]}} {{die2=[[1d@{farmerSkillDie2}]]}} {{bonusesAndPenalties=[[@{farmerSkillMod}-1[Skill Mod]+@{classSkillBonus}[Class Bonus]+@{applyTerrain}[Terrain]+@{applyWeather}[Weather]-@{overburdenPenalty}[Overburden]]]}}" name="roll_farmerSkillRoll"></button>
                            <select name="attr_farmerSkillDie1" class="attributeType">
                                <option value="@{currentStr}" data-i18n="str">STR</option>
                                <option value="@{currentDex}" data-i18n="dex">DEX</option>
                                <option value="@{currentInt}" data-i18n="int">INT</option>
                                <option value="@{currentSpi}" data-i18n="spi">SPI</option>
                            </select> +
                            <select name="attr_farmerSkillDie2" class="attributeType">
                                <option value="@{currentStr}" data-i18n="str">STR</option>
                                <option value="@{currentDex}" data-i18n="dex">DEX</option>
                                <option value="@{currentInt}" data-i18n="int">INT</option>
                                <option value="@{currentSpi}" data-i18n="spi">SPI</option>
                            </select> +
                            <input type="number" name="attr_farmerSkillMod" value="0"/>
                        </div>
                    </div>
                </span>

                <span>
                    <input type="checkbox" class="showDiv" name="attr_showArtisanSkills" value="1">
                    <div class="sheet-2colrow">
                        <label class="header headerLabel checkLabel" data-i18n="artisan-checks">Artisan Checks</label>
                        <div class="sheet-col">
                            <button class="skill-check-button" type="roll" value="&{template:skillCheck} {{season=@{currentSeason}}} {{name=^{crafting}}}} {{die1=[[1d@{currentStr}]]}} {{die2=[[1d@{currentDex}]]}} {{bonusesAndPenalties=[[@{craftingMod}[Skill Mod]+@{concentrationBonus}[Concentration]+@{classSkillBonus}[Class Bonus]+@{applyTerrain}[Terrain]+@{applyWeather}[Weather]-@{overburdenPenalty}[Overburden]]]}}" name="roll_craftingRoll">
                                <span data-i18n="crafting">Crafting</span> [<span data-i18n="str">STR</span>+<span data-i18n="dex">DEX</span>]
                            </button>
                            <input type="number" name="attr_craftingMod" value="0" class="journeyMod"/>
                        </div>
                        <div class="sheet-col">
                            <button class="skill-check skill-check-button" type="roll" value="&{template:skillCheck} {{season=@{currentSeason}}} {{name=^{trapping}}} {{die1=[[1d@{currentDex}]]}} {{die2=[[1d@{currentInt}]]}} {{bonusesAndPenalties=[[@{artisanTrappingMod}[Skill Mod]+@{concentrationBonus}[Concentration]+@{classSkillBonus}[Class Bonus]+@{applyTerrain}[Terrain]+@{applyWeather}[Weather]-@{overburdenPenalty}[Overburden]]]}}" name="roll_artisanTrappingRoll">
                                <span data-i18n="trapping">Trapping</span> [<span data-i18n="dex">DEX</span>+<span data-i18n="int">INT</span>]
                            </button>
                            <input type="number" name="attr_artisanTrappingMod" value="0" class="journeyMod"/>
                        </div>
                    </div>
                    <div class="sheet-2colrow">
                        <div class="sheet-col">
                            <button class="skill-check-button" type="roll" value="&{template:skillCheck} {{season=@{currentSeason}}} {{name=^{repair}}} {{die1=[[1d@{currentStr}]]}} {{die2=[[1d@{currentDex}]]}} {{bonusesAndPenalties=[[@{repairMod}[Skill Mod]+@{concentrationBonus}[Concentration]+@{classSkillBonus}[Class Bonus]+@{applyTerrain}[Terrain]+@{applyWeather}[Weather]-@{overburdenPenalty}[Overburden]]]}}" name="roll_repairRoll">
                                <span data-i18n="repair">Repair</span> [<span data-i18n="str">STR</span>+<span data-i18n="dex">DEX</span>]
                            </button>
                            <input type="number" name="attr_repairMod" value="0" class="journeyMod"/>
                        </div>
                    </div>
                </span>

                <span>
                    <input type="checkbox" class="showDiv" name="attr_showHealerSkills" value="1">
                    <div class="sheet-2colrow">
                        <label class="header headerLabel checkLabel" data-i18n="healer-checks">Healer Checks</label>
                        <div class="sheet-col">
                            <button class="skill-check-button" type="roll" value="&{template:skillCheck} {{season=@{currentSeason}}} {{name=^{firstaid} (^{out-of-combat})}} {{die1=[[1d@{currentInt}]]}} {{die2=[[1d@{currentSpi}]]}} {{bonusesAndPenalties=[[@{firstAidOocMod}[Skill Mod]+@{concentrationBonus}[Concentration]+@{classSkillBonus}[Class Bonus]+@{applyTerrain}[Terrain]+@{applyWeather}[Weather]-@{overburdenPenalty}[Overburden]]]}}" name="roll_firstAidOocRoll">
                                <span data-i18n="firstaid">First Aid</span> [<span data-i18n="int">INT</span>+<span data-i18n="spi">SPI</span>] (<span data-i18n="out-of-combat">out of combat</span>)
                            </button>
                            <input type="number" name="attr_firstAidOocMod" value="0" class="journeyMod"/>
                        </div>
                        <div class="sheet-col">
                            <button class="skill-check-button" type="roll" value="&{template:skillCheck} {{season=@{currentSeason}}} {{name=^{healing}}} {{die1=[[1d@{currentInt}]]}} {{die2=[[1d@{currentSpi}]]}} {{bonusesAndPenalties=[[@{healingMod}[Skill Mod]+@{concentrationBonus}[Concentration]+@{classSkillBonus}[Class Bonus]+@{applyTerrain}[Terrain]+@{applyWeather}[Weather]-@{overburdenPenalty}[Overburden]]]}}" name="roll_healingRoll">
                                <span data-i18n="healing">Healing</span> [<span data-i18n="int">INT</span>+<span data-i18n="spi">SPI</span>]
                            </button>
                            <input type="number" name="attr_healingMod" value="0" class="journeyMod"/>
                        </div>
                    </div>
                    <div class="sheet-2colrow">
                        <div class="sheet-col">
                            <button class="skill-check-button" type="roll" value="&{template:oneDieCheck} {{season=@{currentSeason}}} {{name=^{firstaid}}} {{result=[[1d@{currentInt}+@{firstAidIcMod}[Skill Mod]+@{concentrationBonus}[Concentration]+@{classSkillBonus}[Class Bonus]+@{applyTerrain}[Terrain]+@{applyWeather}[Weather]-@{overburdenPenalty}[Overburden]]]}}" name="roll_firstAidIcRoll">
                                <span data-i18n="firstaid">First Aid</span> [<span data-i18n="int">INT</span>] (<span data-i18n="in-combat">in combat</span>)
                            </button>
                            <input type="number" name="attr_firstAidIcMod" value="0" class="journeyMod"/>
                        </div>
                        <div class="sheet-col">
                            <button class="skill-check-button" type="roll" value="&{template:skillCheck} {{season=@{currentSeason}}} {{name=^{herb-gathering}}} {{die1=[[1d@{currentStr}]]}} {{die2=[[1d@{currentInt}]]}} {{bonusesAndPenalties=[[@{herbGatheringMod}[Skill Mod]+@{concentrationBonus}[Concentration]+@{classSkillBonus}[Class Bonus]+@{applyTerrain}[Terrain]+@{applyWeather}[Weather]-@{overburdenPenalty}[Overburden]]]}}" name="roll_musicRoll">
                                <span data-i18n="herb-gathering">Herb Gathering</span> [<span data-i18n="str">STR</span>+<span data-i18n="int">INT</span>]
                            </button>
                            <input type="number" name="attr_herbGatheringMod" value="0" class="journeyMod"/>
                        </div>
                    </div>
                </span>

                <span>
                    <input type="checkbox" class="showDiv" name="attr_showHunterSkills" value="1">
                    <div class="sheet-2colrow">
                        <label class="header headerLabel checkLabel" data-i18n="hunter-checks">Hunter Checks</label>
                        <div class="sheet-col">
                            <button class="skill-check-button" type="roll" value="&{template:skillCheck} {{season=@{currentSeason}}} {{name=^{animal-tracking}}} {{die1=[[1d@{currentStr}]]}} {{die2=[[1d@{currentInt}]]}} {{bonusesAndPenalties=[[@{animalTrackingMod}[Skill Mod]+@{concentrationBonus}[Concentration]+@{classSkillBonus}[Class Bonus]+@{applyTerrain}[Terrain]+@{applyWeather}[Weather]-@{overburdenPenalty}[Overburden]]]}}" name="roll_animalTrackingRoll">
                                <span data-i18n="animal-tracking">Animal Tracking</span> [<span data-i18n="str">STR</span>+<span data-i18n="int">INT</span>]
                            </button>
                            <input type="number" name="attr_animalTrackingMod" value="0" class="journeyMod"/>
                        </div>
                        <div class="sheet-col">
                            <button class="skill-check-button" type="roll" value="&{template:skillCheck} {{season=@{currentSeason}}} {{name=Trapping}} {{die1=[[1d@{currentDex}]]}} {{die2=[[1d@{currentInt}]]}} {{bonusesAndPenalties=[[@{hunterTrappingMod}[Skill Mod]+@{concentrationBonus}[Concentration]+@{classSkillBonus}[Class Bonus]+@{applyTerrain}[Terrain]+@{applyWeather}[Weather]-@{overburdenPenalty}[Overburden]]]}}" name="roll_hunterTrappingRoll">
                                <span data-i18n="trapping">Trapping</span> [<span data-i18n="dex">DEX</span>+<span data-i18n="int">INT</span>]
                            </button>
                            <input type="number" name="attr_hunterTrappingMod" value="0" class="journeyMod"/>
                        </div>
                    </div>
                    <div class="sheet-2colrow">
                        <div class="sheet-col">
                            <button class="skill-check-button" type="roll" value="&{template:skillCheck} {{season=@{currentSeason}}} {{name=^{hunting}}} {{die1=[[1d@{currentDex}]]}} {{die2=[[1d@{currentInt}]]}} {{bonusesAndPenalties=[[@{huntingMod}[Skill Mod]+@{concentrationBonus}[Concentration]+@{classSkillBonus}[Class Bonus]+@{applyTerrain}[Terrain]+@{applyWeather}[Weather]-@{overburdenPenalty}[Overburden]]]}}" name="roll_huntingRoll">
                                <span data-i18n="hunting">Hunting</span> [<span data-i18n="dex">DEX</span>+<span data-i18n="int">INT</span>]
                            </button>
                            <input type="number" name="attr_huntingMod" value="0" class="journeyMod"/>
                        </div>
                    </div>
                </span>

                <span>
                    <input type="checkbox" class="showDiv" name="attr_showMerchantSkills" value="1">
                    <div class="sheet-2colrow">
                        <label class="header headerLabel checkLabel" data-i18n="merchant-checks">Merchant Checks</label>
                        <div class="sheet-col">
                            <button class="skill-check-button" type="roll" value="&{template:skillCheck} {{season=@{currentSeason}}} {{name=^{trader}}} {{die1=[[1d@{currentInt}]]}} {{die2=[[1d@{currentSpi}]]}} {{bonusesAndPenalties=[[@{traderMod}[Skill Mod]+@{concentrationBonus}[Concentration]+@{classSkillBonus}[Class Bonus]+@{applyTerrain}[Terrain]+@{applyWeather}[Weather]-@{overburdenPenalty}[Overburden]]]}}" name="roll_traderRoll">
                                <span data-i18n="trader">Trader</span> [<span data-i18n="int">INT</span>+<span data-i18n="spi">SPI</span>]
                            </button>
                            <input type="number" name="attr_traderMod" value="0" class="journeyMod"/>
                        </div>
                    </div>
                </span>

                <span>
                    <input type="checkbox" class="showDiv" name="attr_showMinstrelSkills" value="1">
                    <div class="sheet-2colrow">
                        <label class="header headerLabel checkLabel" data-i18n="minstrel-checks">Minstrel Checks</label>
                        <div class="sheet-col">
                            <button class="skill-check-button" type="roll" value="&{template:skillCheck} {{season=@{currentSeason}}} {{name=^{knowledge-of-tradition}}} {{die1=[[1d@{currentInt}]]}} {{die2=[[1d@{currentInt}]]}} {{bonusesAndPenalties=[[@{knowledgeOfTraditionMod}[Skill Mod]+@{concentrationBonus}[Concentration]+@{classSkillBonus}[Class Bonus]+@{applyTerrain}[Terrain]+@{applyWeather}[Weather]-@{overburdenPenalty}[Overburden]]]}}" name="roll_knowledgeOfTraditionRoll">
                                <span data-i18n="knowledge-of-tradition">Knowledge of Tradition</span> [<span data-i18n="int">INT</span>+<span data-i18n="int">INT</span>]
                            </button>
                            <input type="number" name="attr_knowledgeOfTraditionMod" value="0" class="journeyMod"/>
                        </div>
                        <div class="sheet-col">
                            <button class="skill-check-button" type="roll" value="&{template:skillCheck} {{season=@{currentSeason}}} {{name=^{music}}} {{die1=[[1d@{currentDex}]]}} {{die2=[[1d@{currentSpi}]]}} {{bonusesAndPenalties=[[@{musicMod}[Skill Mod]+@{concentrationBonus}[Concentration]+@{classSkillBonus}[Class Bonus]+@{applyTerrain}[Terrain]+@{applyWeather}[Weather]-@{overburdenPenalty}[Overburden]]]}}" name="roll_musicRoll">
                                <span data-i18n="music">Music</span> [<span data-i18n="dex">DEX</span>+<span data-i18n="spi">SPI</span>]
                            </button>
                            <input type="number" name="attr_musicMod" value="0" class="journeyMod"/>
                        </div>
                    </div>
                </span>

                <span>
                    <input type="checkbox" class="showDiv" name="attr_showNavigatorSkills" value="1">
                    <div class="sheet-2colrow">
                        <label class="header headerLabel checkLabel" data-i18n="navigator-checks">Navigator Checks</label>
                        <div class="sheet-col">
                            <button class="skill-check-button" type="roll" value="&{template:skillCheck} {{season=@{currentSeason}}} {{name=^{navigation}}} {{die1=[[1d@{currentStr}]]}} {{die2=[[1d@{currentDex}]]}} {{bonusesAndPenalties=[[@{navigationMod}[Skill Mod]+@{concentrationBonus}[Concentration]+@{classSkillBonus}[Class Bonus]+@{applyTerrain}[Terrain]+@{applyWeather}[Weather]-@{overburdenPenalty}[Overburden]]]}}" name="roll_navigationRoll">
                                <span data-i18n="navigation">Navigation</span> [<span data-i18n="str">STR</span>+<span data-i18n="dex">DEX</span>]
                            </button>
                            <input type="number" name="attr_navigationMod" value="0" class="journeyMod"/>
                        </div>
                        <div class="sheet-col">
                            <button class="skill-check-button" type="roll" value="&{template:skillCheck} {{season=@{currentSeason}}} {{name=Repair}} {{die1=[[1d@{currentStr}]]}} {{die2=[[1d@{currentDex}]]}} {{bonusesAndPenalties=[[@{navigatorRepairMod}[Skill Mod]+@{concentrationBonus}[Concentration]+@{classSkillBonus}[Class Bonus]+@{applyTerrain}[Terrain]+@{applyWeather}[Weather]-@{overburdenPenalty}[Overburden]]]}}" name="roll_navigatorRepairRoll">
                                <span data-i18n="repair">Repair</span> [<span data-i18n="str">STR</span>+<span data-i18n="dex">DEX</span>]
                            </button>
                            <input type="number" name="attr_navigatorRepairMod" value="0" class="journeyMod"/>
                        </div>
                    </div>
                </span>

                <span>
                    <input type="checkbox" class="showDiv" name="attr_showNobleSkills" value="1">
                    <div class="sheet-2colrow">
                        <label class="header headerLabel checkLabel" data-i18n="noble-checks">Noble Checks</label>
                        <div class="sheet-col">
                            <button class="skill-check-button" type="roll" value="&{template:skillCheck} {{season=@{currentSeason}}} {{name=^{etiquette}}} {{die1=[[1d@{currentDex}]]}} {{die2=[[1d@{currentInt}]]}} {{bonusesAndPenalties=[[@{etiquetteMod}[Skill Mod]+@{concentrationBonus}[Concentration]+@{classSkillBonus}[Class Bonus]+@{applyTerrain}[Terrain]+@{applyWeather}[Weather]-@{overburdenPenalty}[Overburden]]]}}" name="roll_etiquetteRoll">
                                <span data-i18n="etiquette">Etiquette</span> [<span data-i18n="dex">DEX</span>+<span data-i18n="int">INT</span>]
                            </button>
                            <input type="number" name="attr_etiquetteMod" value="0" class="journeyMod"/>
                        </div>
                        <div class="sheet-col">
                            <button class="skill-check-button" type="roll" value="&{template:skillCheck} {{season=@{currentSeason}}} {{name=^{refined-education}}} {{die1=[[1d@{currentInt}]]}} {{die2=[[1d@{currentInt}]]}} {{bonusesAndPenalties=[[@{refinedEducationMod}[Skill Mod]+@{concentrationBonus}[Concentration]+@{classSkillBonus}[Class Bonus]+@{applyTerrain}[Terrain]+@{applyWeather}[Weather]-@{overburdenPenalty}[Overburden]]]}}" name="roll_refinedEducationRoll">
                                <span data-i18n="refined-education">Refined Education</span> [<span data-i18n="int">INT</span>+<span data-i18n="int">INT</span>]
                            </button>
                            <input type="number" name="attr_refinedEducationMod" value="0" class="journeyMod"/>
                        </div>
                    </div>
                </span>

                <label class="header headerLabel itemLabel" data-i18n="additional-checks">Additional Checks</label>
                <fieldset class="repeating_skills">
                    <div class="sheet-2colrow">
                        <div class="sheet-col">
                            <input class="config-toggles config-checkbox add-skill-checkbox" name="attr_settings" type="checkbox" value="settings"/>
                            <div class="flex-between">
                                <button class="skill-check-button" type="roll" value="&{template:skillCheck} {{season=@{currentSeason}}} {{name=@{skillNameA}}} {{die1=[[1d@{skillDie1A}]]}} {{die2=[[1d@{skillDie2A}]]}} {{bonusesAndPenalties=[[@{skillModA}[Skill Mod]+@{concentrationBonus}[Concentration]+@{applyTerrain}[Terrain]+@{applyWeather}[Weather]-@{overburdenPenalty}[Overburden]]]}}" name="roll_otherRollA">
                                    <span name="attr_skillNameAButton"></span>
                                </button>
                                <input type="number" name="attr_skillModA" value="0"/>
                            </div>

                            <div class="flex flex-vertical-center settings">
                                <input type="text" name="attr_skillNameA" data-i18n-placeholder="name" placeholder="name"/>
                                <div class="skillCheck classSkillRoll">
                                    <select name="attr_skillDie1A" class="attributeType">
                                        <option value="empty-string" data-i18n="empty-string" selected></option>
                                        <option value="@{currentStr}" data-i18n="str">STR</option>
                                        <option value="@{currentDex}" data-i18n="dex">DEX</option>
                                        <option value="@{currentInt}" data-i18n="int">INT</option>
                                        <option value="@{currentSpi}" data-i18n="spi">SPI</option>
                                    </select> +
                                    <select name="attr_skillDie2A" class="attributeType">
                                        <option value="empty-string" data-i18n="empty-string" selected></option>
                                        <option value="@{currentStr}" data-i18n="str">STR</option>
                                        <option value="@{currentDex}" data-i18n="dex">DEX</option>
                                        <option value="@{currentInt}" data-i18n="int">INT</option>
                                        <option value="@{currentSpi}" data-i18n="spi">SPI</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        <div class="sheet-col">
                            <input class="config-toggles config-checkbox add-skill-checkbox" name="attr_settings" type="checkbox" value="settings"/>
                            <span class="config-toggles settings-toggle add-skill-icon">p</span>
                            <div class="flex-between">
                                    <button class="skill-check-button"  type="roll" value="&{template:skillCheck} {{season=@{currentSeason}}} {{name=@{skillNameB}}} {{die1=[[1d@{skillDie1B}]]}} {{die2=[[1d@{skillDie2B}]]}} {{bonusesAndPenalties=[[@{skillModB}[Skill Mod]+@{concentrationBonus}[Concentration]+@{applyTerrain}[Terrain]+@{applyWeather}[Weather]-@{overburdenPenalty}[Overburden]]]}}" name="roll_otherRollA">
                                    <span name="attr_skillNameBButton"></span>
                                </button>
                                <input type="number" name="attr_skillModB" value="0"/>
                            </div>

                            <div class="flex flex-vertical-center settings">
                                <input type="text" name="attr_skillNameB" data-i18n-placeholder="name" placeholder="name"/>
                                <div class="skillCheck classSkillRoll">
                                    <select name="attr_skillDie1B" class="attributeType">
                                        <option value="empty-string" data-i18n="empty-string" selected></option>
                                        <option value="@{currentStr}" data-i18n="str">STR</option>
                                        <option value="@{currentDex}" data-i18n="dex">DEX</option>
                                        <option value="@{currentInt}" data-i18n="int">INT</option>
                                        <option value="@{currentSpi}" data-i18n="spi">SPI</option>
                                    </select> +
                                    <select name="attr_skillDie2B" class="attributeType">
                                        <option value="empty-string" data-i18n="empty-string" selected></option>
                                        <option value="@{currentStr}" data-i18n="str">STR</option>
                                        <option value="@{currentDex}" data-i18n="dex">DEX</option>
                                        <option value="@{currentInt}" data-i18n="int">INT</option>
                                        <option value="@{currentSpi}" data-i18n="spi">SPI</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                    </div>
                </fieldset>
            </span>

            <span class="characterChecks">
                <div class="sheet-2colrow">
                    <div class="sheet-col flex">
                        <label class="header headerLabel healthLabel" data-i18n="fumble-points">Fumble Points</label>
                        <img src="https://raw.githubusercontent.com/jlvgit/roll20-character-sheets/ryuutama-restructuring/Ryuutama/images/fumble.png" alt="fumble" class="icon">
                        <input type="number" name="attr_fumble" value="0" min="0"/>
                        <span data-i18n="apply-concentration" title="*Can't apply concentration to initiative, condition, or damage rolls." data-i18n-title="concentration-note">Apply Concentration to next roll?</span>
                    </div>
                    <div class="sheet-col">
                        <div>
                            <label class="header headerLabel healthLabel" data-i18n="overburden-penalties">Overburden Penalties</label>
                            <input type="number" name="attr_overburdenPenalty" class="overburdenPenalty" value="0"/>
                            <input type="checkbox" class="penaltyCondition" name="attr_overburdened" value="1"/>
                            <label class="checkboxLabel">
                                <input type="checkbox" name="attr_applyOverburdenPenalty" value="1" checked="true">&nbsp;
                                <span data-i18n="apply-overburden">Apply overburden penalties</span>
                            </label>
                        </div>
                    </div>
                </div>

                <div class="sheet-2colrow">
                    <div class="sheet-col">
                        <label class="checkboxLabel">
                            <input type="checkbox" name="attr_concentrationMP" value="1">&nbsp;
                            <span data-i18n="use-mp">Use MP</span>
                        </label>
                        <label class="checkboxLabel">
                            <input type="checkbox" name="attr_concentrationFumble" value="1">&nbsp;
                            <span data-i18n="use-fumble">Use Fumble Point</span>
                        </label>
                    </div>
                    <div class="sheet-col">
                    </div>
                </div>

                <label class="header headerLabel loweredHeaderLabel" data-i18n="optional-modifiers">Optional Modifiers</label>
                <div class="sheet-3colrow">
                    <div class="sheet-col">
                        <span data-i18n="current-season">Current Season</span>:
                        <select name="attr_currentSeason" class="terrain">
                            <option value=""></option>
                            <option value="Spring" data-i18n="season-spring">Spring</option>
                            <option value="Summer" data-i18n="season-summer">Summer</option>
                            <option value="Fall" data-i18n="season-fall">Fall</option>
                            <option value="Winter" data-i18n="season-winter">Winter</option>
                        </select>
                    </div>
                    <div class="sheet-col">
                        <span data-i18n="current-terrain">Current Terrain</span>:
                        <select name="attr_terrain" class="terrain" data-i18n-list="terrain-list">
                            <option value="0"></option>
                            <option value="@{alpineMod}" data-i18n-list-item="terrain-alpine" data-i18n="terrain-alpine">Alpine</option>
                            <option value="@{deepForestMod}" data-i18n-list-item="terrain-deepforest" data-i18n="terrain-deepforest">Deep Forest</option>
                            <option value="@{desertMod}" data-i18n-list-item="terrain-desert" data-i18n="terrain-desert">Desert</option>
                            <option value="@{grasslandMod}" data-i18n-list-item="terrain-grassland" data-i18n="terrain-grassland">Grassland</option>
                            <option value="@{highlandsMod}" data-i18n-list-item="terrain-highlands" data-i18n="terrain-highlands">Highlands</option>
                            <option value="@{jungleMod}" data-i18n-list-item="terrain-jungle" data-i18n="terrain-jungle">Jungle</option>
                            <option value="@{mountainMod}" data-i18n-list-item="terrain-mountain" data-i18n="terrain-mountain">Mountain</option>
                            <option value="@{rockyTerrainMod}" data-i18n-list-item="terrain-rocky" data-i18n="terrain-rocky">Rocky Terrain</option>
                            <option value="@{swampMod}" data-i18n-list-item="terrain-swamp" data-i18n="terrain-swamp">Swamp</option>
                            <option value="@{wastelandMod}" data-i18n-list-item="terrain-wasteland" data-i18n="terrain-wasteland">Wasteland</option>
                            <option value="@{woodsMod}" data-i18n-list-item="terrain-woods" data-i18n="terrain-woods">Woods</option>
                        </select>
                    </div>
                    <div class="sheet-col">
                        <span data-i18n="current-weather">Current Weather</span>:
                        <select name="attr_weather" class="terrain" data-i18n-list="weather-list">
                            <option value="0"></option>
                            <option value="@{blizzardMod}" data-i18n-list-item="weather-blizzard" data-i18n="weather-blizzard">Blizzard</option>
                            <option value="@{coldMod}" data-i18n-list-item="weather-cold" data-i18n="weather-cold">Cold</option>
                            <option value="@{darkMod}" data-i18n-list-item="weather-dark" data-i18n="weather-dark">Dark</option>
                            <option value="@{deepFogMod}" data-i18n-list-item="weather-deepfog" data-i18n="weather-deepfog">Deep Fog</option>
                            <option value="@{fogMod}" data-i18n-list-item="weather-fog" data-i18n="weather-fog">Fog</option>
                            <option value="@{hardRainMod}" data-i18n-list-item="weather-hardrain" data-i18n="weather-hardrain">Hard Rain</option>
                            <option value="@{hotMod}" data-i18n-list-item="weather-hot" data-i18n="weather-hot">Hot</option>
                            <option value="@{hurricaneMod}" data-i18n-list-item="weather-hurricane" data-i18n="weather-hurricane">Hurricane</option>
                            <option value="@{rainMod}" data-i18n-list-item="weather-rain" data-i18n="weather-rain">Rain</option>
                            <option value="@{snowMod}" data-i18n-list-item="weather-snow" data-i18n="weather-snow">Snow</option>
                            <option value="@{strongWindMod}" data-i18n-list-item="weather-strongwind" data-i18n="weather-strongwind">Strong Wind</option>
                        </select>
                    </div>
                </div>

                <div class="sheet-3colrow bonusPenaltyPreferences">
                    <div class="sheet-col"></div> <!--Empty column on purpose to move others under the right inputs-->
                    <div class="sheet-col">
                        <label class="checkboxLabel"><input type="checkbox" name="attr_applyTerrain" value="@{terrain}"> <span data-i18n="apply-terrain">Apply terrain bonuses/penalties</span></label>
                    </div>
                    <div class="sheet-col">
                        <label class="checkboxLabel"><input type="checkbox" name="attr_applyWeather" value="@{weather}"> <span data-i18n="apply-weather">Apply weather bonuses/penalties</span></label>
                    </div>
                </div>

                <div class="sheet-row">
                    <div class="sheet-col">
                        <label class="header headerLabel checkLabel terrainLabel" data-i18n="terrain-modifiers">Terrain Modifiers</label>
                        <span class="pictos notesIcon">W</span>
                        <input type="checkbox" name="attr_terrainNotesToggle" class="notesToggle hider">
                        <div class="terrainNotes">
                                <textarea name="attr_terrainNotes" class="notesArea" placeholder="Notes" data-i18n-placeholder="notes"></textarea>
                        </div>
                        <table>
                            <tr>
                                <th><span data-i18n="level">Level</span> 1=>6</th>
                                <th><span data-i18n="level">Level</span> 2=>8</th>
                                <th><span data-i18n="level">Level</span> 3=>10</th>
                                <th><span data-i18n="level">Level</span> 4=>12</th>
                                <th><span data-i18n="level">Level</span> 5=>14</th>
                            </tr>
                            <tr>
                                <td><input type="number" name="attr_grasslandMod" value="0"/> <span data-i18n="terrain-grassland">Grassland</span></td>
                                <td><input type="number" name="attr_woodsMod" value="0"/> <span data-i18n="terrain-woods">Woods</span></td>
                                <td><input type="number" name="attr_deepForestMod" value="0"/> <span data-i18n="terrain-deepforest">Deep Forest</span></td>
                                <td><input type="number" name="attr_desertMod" value="0"/> <span data-i18n="terrain-desert">Desert</span></td>
                                <td style="white-space: nowrap;"><input type="number" name="attr_alpineMod" value="0"/> <span data-i18n="terrain-alpine">Alpine</span></td>
                            </tr>
                            <tr>
                                <td><input type="number" name="attr_wastelandMod" value="0"/> <span data-i18n="terrain-wasteland">Wasteland</span></td>
                                <td><input type="number" name="attr_highlandsMod" value="0"/> <span data-i18n="terrain-highlands">Highlands</span></td>
                                <td><input type="number" name="attr_swampMod" value="0"/> <span data-i18n="terrain-swamp">Swamp</span></td>
                                <td><input type="number" name="attr_jungleMod" value="0"/> <span data-i18n="terrain-jungle">Jungle</span></td>
                                <td></td>
                            </tr>
                            <tr>
                                <td></td>
                                <td><input type="number" name="attr_rockyTerrainMod" value="0"/> <span data-i18n="terrain-rocky">Rocky Terrain</span></td>
                                <td><input type="number" name="attr_mountainMod" value="0"/> <span data-i18n="terrain-mountain">Mountain</span></td>
                                <td></td>
                                <td></td>
                            </tr>
                        </table>
                    </div>
                </div>

                <div class="sheet-row">
                    <div class="sheet-col">
                        <label class="header headerLabel checkLabel weatherLabel" data-i18n="weather-modifiers">Weather Modifiers</label>
                        <span class="pictos notesIcon">W</span>
                        <input type="checkbox" name="attr_weatherNotesToggle" class="notesToggle hider">
                        <div class="terrainNotes">
                                <textarea name="attr_weatherNotes" class="notesArea" placeholder="Notes" data-i18n-placeholder="notes"></textarea>
                        </div>
                        <table cellpadding=3>
                            <tr>
                                <th><span data-i18n="weather">Weather</span> +1</th>
                                <th><span data-i18n="weather">Weather</span> +3</th>
                                <th><span data-i18n="weather">Weather</span> +5</th>
                            </tr>
                            <tr>
                                <td><input type="number" name="attr_rainMod" value="0"/> <span data-i18n="weather-rain">Rain</span></td>
                                <td><input type="number" name="attr_hardRainMod" value="0"/> <span data-i18n="weather-hardrain">Hard Rain</span></td>
                                <td><input type="number" name="attr_hurricaneMod" value="0"/> <span data-i18n="weather-hurricane">Hurricane</span></td>
                            </tr>
                            <tr>
                                <td><input type="number" name="attr_strongWindMod" value="0"/> <span data-i18n="weather-strongwind">Strong Wind</span></td>
                                <td><input type="number" name="attr_snowMod" value="0"/> <span data-i18n="weather-snow">Snow</span></td>
                                <td><input type="number" name="attr_blizzardMod" value="0"/> <span data-i18n="weather-blizzard">Blizzard</span></td>
                            </tr>
                            <tr>
                                <td><input type="number" name="attr_fogMod" value="0"/> <span data-i18n="weather-fog">Fog</span></td>
                                <td><input type="number" name="attr_deepFogMod" value="0"/> <span data-i18n="weather-deepfog">Deep Fog</span></td>
                                <td></td>
                            </tr>
                            <tr>
                                <td><input type="number" name="attr_hotMod" value="0"/> <span data-i18n="weather-hot">Hot</span></td>
                                <td><input type="number" name="attr_darkMod" value="0"/> <span data-i18n="weather-dark">Dark</span></td>
                                <td></td>
                            </tr>
                            <tr>
                                <td><input type="number" name="attr_coldMod" value="0"/> <span data-i18n="weather-cold">Cold</span></td>
                                <td></td>
                                <td></td>
                            </tr>
                        </table>
                    </div>
                </div>
            </span>

            <span class="characterEquipment">
                <div class="sheet-2colrow">
                    <div class="sheet-col">
                        <label class="header headerLabel itemLabel" data-i18n="currency">Currency</label>
                        <input type="number" name="attr_currency" value="0" min="0" style="width:70px"/>
                    </div>
                </div>
                <div class="sheet-2colrow">
                    <div class="sheet-col">
                        <label class="header headerLabel headerLabel-eq itemLabel" data-i18n="capacity-weapon-armor">Equipped Weapon & Armor Capacity</label>
                        <input type="checkbox" class="penaltyCondition" name="attr_overEncumbered" value="1"/>
                        <input type="number" name="attr_weaponCapacity" value="0" min="0"/> / <input type="number" name="attr_weaponCapacity_max" value="0" min="0"/>
                    </div>
                    <div class="sheet-col">
                        <label class="header headerLabel itemLabel" data-i18n="capacity-item">Item Capacity</label>
                        <input type="checkbox" class="penaltyCondition" name="attr_overCapacity" value="1"/>
                        <input type="number" name="attr_capacity" value="0" min="0"/> / <input type="number" name="attr_capacity_max" value="0" min="0"/>
                    </div>
                </div>

                <div class="sheet-2colrow">
                    <div class="sheet-col">
                        <label class="header headerLabel itemLabel" data-i18n="capacity-water">Water Capacity</label>
                        <input type="checkbox" class="penaltyCondition" name="attr_outOfWater" value="1"/>
                        <input type="number" name="attr_water" value="0" min="0"/> / <input type="number" name="attr_water_max" value="0" min="0"/>
                    </div>
                    <div class="sheet-col">
                        <label class="header headerLabel itemLabel" data-i18n="capacity-animal">Animal Capacity</label>
                        <input type="checkbox" class="penaltyCondition" name="attr_tooManyAnimals" value="1"/>
                        <input type="number" name="attr_animals" value="0" min="0"/> / <input type="number" name="attr_animals_max" value="1" min="0"/>
                    </div>
                </div>

                <label class="header headerLabel itemLabel" data-i18n="weapons">Weapons</label>
                <fieldset class="repeating_weapons">
                    <div class="sheet-row">
                        <input type="text" name="attr_weaponName" style="width: 150px;margin-right:4px" placeholder="Name" data-i18n-placeholder="name"/>
                        <input type="text" name="attr_weaponEffect" style="width: 200px; margin-right: 4px" placeholder="Effect" data-i18n-placeholder="effect"/>
                        <select name="attr_weaponClassification" style="width:120px;margin-right:4px;position:relative;top:5px">
                            <option value="1" data-i18n="weapon-lightblade">Light Blade</option>
                            <option value="2" data-i18n="weapon-blade">Blade</option>
                            <option value="3" data-i18n="weapon-polearm">Polearm</option>
                            <option value="4" data-i18n="weapon-axe">Axe</option>
                            <option value="5" data-i18n="weapon-bow">Bow</option>
                            <option value="6" data-i18n="weapon-unarmed">Unarmed</option>
                        </select>
                        <span data-i18n="durability">Durability</span>: <input type="number" name="attr_weaponDurability" value="0" min="0"/> / <input type="number" name="attr_weaponDurability_max" value="1" min="1" style="margin-right: 4px"/>
                        <span data-i18n="size">Size</span>: <input type="number" name="attr_weaponSize" value="0" min="0"/>
                    </div>
                    <div class="flex-between weaponRow2">
                        <div class="sheet-col skillCheck">
                            <input type="number" class="hidden" name="attr_weaponGraceMod" value="0">
                            <button type="roll" value="&{template:accuracyCheck} {{season=@{currentSeason}}} {{name=@{weaponName}}} {{die1=[[1d@{weaponAccuracyDie1}]]}} {{die2=[[1d@{weaponAccuracyDie2}]]}} {{bonusesAndPenalties=[[@{weaponAccuracyMod}[Accuracy Mod]+@{concentrationBonus}[Concentration]+@{weaponGraceMod}[Weapon Grace]-@{overburdenPenalty}[Overburden]]]}}" name="roll_weaponAccuracyRoll"></button>
                            <span data-i18n="accuracy">Accuracy</span>:
                            <select name="attr_weaponAccuracyDie1" class="attributeType">
                                <option value="@{currentStr}" data-i18n="str">STR</option>
                                <option value="@{currentDex}" data-i18n="dex">DEX</option>
                                <option value="@{currentInt}" data-i18n="int">INT</option>
                                <option value="@{currentSpi}" data-i18n="spi">SPI</option>
                            </select> +
                            <select name="attr_weaponAccuracyDie2" class="attributeType">
                                <option value="@{currentStr}" data-i18n="str">STR</option>
                                <option value="@{currentDex}" data-i18n="dex">DEX</option>
                                <option value="@{currentInt}" data-i18n="int">INT</option>
                                <option value="@{currentSpi}" data-i18n="spi">SPI</option>
                            </select> +
                            <input type="number" name="attr_weaponAccuracyMod" value="0"/>
                        </div>
                        <div class="sheet-col skillCheck damage">
                            <button type="roll" value="&{template:oneDieCheck} {{season=@{currentSeason}}} {{name=@{weaponName} ^{damage}}} {{result=[[[[1+@{weaponCriticalMod}]]d@{weaponDamageDie}+@{weaponDamageMod}[Wpn Bonus]+@{typeDamageMod}[Class Type Mod]-@{overburdenPenalty}[Overburden]]]}}" name="roll_weaponDamageRoll"></button>
                            <span data-i18n="damage">Damage</span>:
                            <select name="attr_weaponDamageDie" class="attributeType">
                                <option value="@{currentStr}" data-i18n="str">STR</option>
                                <option value="@{currentDex}" data-i18n="dex">DEX</option>
                                <option value="@{currentInt}" data-i18n="int">INT</option>
                                <option value="@{currentSpi}" data-i18n="spi">SPI</option>
                            </select> +
                            <input type="number" name="attr_weaponDamageMod" value="0"/>
                            <label class="checkboxLabel inlineCheckbox"><input type="checkbox" name="attr_weaponCriticalMod" value="1"/> <span data-i18n="add-crit-die">Add Critical Die</span></label>
                        </div>
                    </div>
                </fieldset>

                <label class="header headerLabel itemLabel" data-i18n="shields-armor">Shields & Armor</label>
                <fieldset class="repeating_armor">
                    <div class="sheet-row">
                        <span data-i18n="name">Name</span>: <input type="text" name="attr_armorName"/>
                        <span data-i18n="effect">Effect</span>: <input type="text" name="attr_armorEffect"/>
                        <span data-i18n="durability">Durability</span>: <input type="number" name="attr_armorDurability" value="0" min="0"/> / <input type="number" name="attr_armorDurability_max" value="1" min="1"/>
                        <span data-i18n="size">Size</span>: <input type="number" name="attr_armorSize" value="0" min="0"/>
                    </div>
                    <div class="sheet-row">
                        <span data-i18n="defense-points">Defense Points</span>: <input type="number" name="attr_armorDefense" value="0" min="0"/>
                        <span data-i18n="penalty">Penalty</span>: <input type="number" name="attr_armorPenalty" value="0"/>
                    </div>
                </fieldset>

                <label class="header headerLabel itemLabel" data-i18n="travelers-outfit">Traveler's Outfit</label>
                <fieldset class="repeating_outfit">
                    <div class="sheet-row">
                        <span data-i18n="name">Name</span>: <input type="text" name="attr_outfitName"/>
                        <span data-i18n="effect">Effect</span>: <input type="text" name="attr_outfitEffect"/>
                    </div>
                </fieldset>

                <label class="header headerLabel itemLabel" data-i18n="items">Items</label>
                <fieldset class="repeating_items">
                    <div class="sheet-row">
                        <span data-i18n="name">Name</span>: <input type="text" name="attr_itemName"/>
                        <span data-i18n="effect">Effect</span>: <input type="text" name="attr_itemEffect"/>
                        <span data-i18n="size">Size</span>: <input type="number" name="attr_itemSize" value="0" min="0"/>
                        <span data-i18n="count-abbreviation">Ct</span>: <input type="number" name="attr_itemCount" value="0" min="0"/>
                    </div>
                </fieldset>

                <label class="header headerLabel itemLabel" data-i18n="containers">Containers</label>
                <fieldset class="repeating_containers">
                    <div class="sheet-row">
                        <span data-i18n="name">Name</span>: <input type="text" name="attr_containerName"/>
                        <span data-i18n="effect">Effect</span>: <input type="text" name="attr_containerEffect"/>
                        <span data-i18n="size">Size</span>: <input type="number" name="attr_containerSize" value="0" min="0"/>
                        <span data-i18n="capacity">Capacity</span>: <input type="number" name="attr_containerCapacity" value="0" min="0"/>
                        <label class="checkboxLabel inlineCheckbox"><input type="checkbox" name="attr_containerWater" value="1"/> <span data-i18n="water">water</span></label>
                    </div>
                </fieldset>

                <label class="header headerLabel itemLabel" data-i18n="animals">Animals</label>
                <fieldset class="repeating_animals">
                    <div class="sheet-row">
                        <span data-i18n="name">Name</span>: <input type="text" name="attr_animalName"/>
                        <span data-i18n="effect">Effect</span>: <input type="text" name="attr_animalEffect"/>
                        <span data-i18n="capacity">Capacity</span>: <input type="number" name="attr_animalCapacity" value="0" min="0"/>
                    </div>
                </fieldset>
            </span>

            <span class="settingsTab">
                <div>
                    <span data-i18n="background-color">Background color</span>:
                    <select name="attr_mainBgColorSelect" value="default">
                        <option value="default"   data-i18n="default"       style="background-color: #eeffff;" selected="selected">Default</option>
                        <option value="white"     data-i18n="white"         style="background-color: #fff;">White</option>
                        <option value="lilac"     data-i18n="lilac"         style="background-color: #fbeeff;">Lilac</option>
                        <option value="grayscale" data-i18n="grayscale"     style="background-color: #f3f3f3;">Grayscale</option>
                        <option value="book"      data-i18n="book"          style="background-color: #f3efe6;">Book</option>
                        <option value="summer"    data-i18n="season-summer" style="background-color: #fef7ed;">Summer</option>
                        <option value="fall"      data-i18n="season-fall"   style="background-color: #fde7e8;">Fall</option>
                        <option value="winter"    data-i18n="season-winter" style="background-color: #fafefe;">Winter</option>
                        <option value="spring"    data-i18n="season-spring" style="background-color: #f8f9f3;">Spring</option>
                    </select>
                </div>
                <div>
                    <span data-i18n="header-color">Header color</span>:
                    <select name="attr_headerColorSelect" value="default">
                        <option value="default"   data-i18n="default"       style="background-color: #aaeeaa;" selected="selected">Default</option>
                        <option value="blue"      data-i18n="blue"          style="background-color: #45619e; color: white;">Blue</option>
                        <option value="lilac"     data-i18n="lilac"         style="background-color: #b394d8; color: white;">Lilac</option>
                        <option value="grayscale" data-i18n="grayscale"     style="background-color: #6d6d6d; color: white;">Grayscale</option>
                        <option value="book"      data-i18n="book"          style="background-color: #f5edac;">Book</option>
                        <option value="summer"    data-i18n="season-summer" style="background-color: #e0861b; color: white;">Summer</option>
                        <option value="fall"      data-i18n="season-fall"   style="background-color: #d1425e; color: white;">Fall</option>
                        <option value="winter"    data-i18n="season-winter" style="background-color: #318baa; color: white;">Winter</option>
                        <option value="spring"    data-i18n="season-spring" style="background-color: #9ece84; color: white;">Spring</option>
                    </select>
                </div>
                <div>
                    <span data-i18n="icon-color">Icon background color</span>:
                    <select name="attr_iconBgColorSelect" value="default">
                        <option value="default"   data-i18n="default"       style="background-color: #88394d; color: white;" selected="selected">Default</option>
                        <option value="lilac"     data-i18n="lilac"         style="background-color: #915173; color: white;">Lilac</option>
                        <option value="grayscale" data-i18n="grayscale"     style="background-color: #8f8f8f; color: white;">Grayscale</option>
                        <option value="book"      data-i18n="book"          style="background-color: #5bb2b6; color: white;">Book</option>
                        <option value="summer"    data-i18n="season-summer" style="background-color: #c40b45; color: white;">Summer</option>
                        <option value="fall"      data-i18n="season-fall"   style="background-color: #e3801d; color: white;">Fall</option>
                        <option value="winter"    data-i18n="season-winter" style="background-color: #0d7075; color: white;">Winter</option>
                        <option value="spring"    data-i18n="season-spring" style="background-color: #87ceeb; color: white;">Spring</option>
                    </select>
                </div>
                <div>
                    <span data-i18n="selection-color">Selection color</span>:
                    <select name="attr_radioBgColorSelect" value="default">
                        <option value="default"   data-i18n="default"       style="background-color: #299;    color: white;" selected="selected" >Default</option>
                        <option value="blue"      data-i18n="blue"          style="background-color: #45619e; color: white;">Blue</option>
                        <option value="lilac"     data-i18n="lilac"         style="background-color: #865abb; color: white;">Lilac</option>
                        <option value="grayscale" data-i18n="grayscale"     style="background-color: #585858; color: white;">Grayscale</option>
                        <option value="book"      data-i18n="book"          style="background-color: #9f8156; color: white;">Book</option>
                        <option value="summer"    data-i18n="season-summer" style="background-color: #f1c076; color: white;">Summer</option>
                        <option value="fall"      data-i18n="season-fall"   style="background-color: #bd3b55; color: white;">Fall</option>
                        <option value="winter"    data-i18n="season-winter" style="background-color: #028493; color: white;">Winter</option>
                        <option value="spring"    data-i18n="season-spring" style="background-color: #72aa75; color: white;">Spring</option>
                    </select>
                </div>
                <hr>
                <div class="flex">
                    <label class="header headerLabel" data-i18n="header">Header</label>
                    <img src="https://raw.githubusercontent.com/Roll20/roll20-character-sheets/master/Ryuutama/images/heart.png" alt="whiteheart" class="icon">
                    <span class="tab tab-demo" data-i18n="selection">Selection</span>
                </div>

                Message Roll20 user Spren if you want to suggest more colors!
            </span>
        </div>

        <!--- Start of NPC sheet -->
        <input type="checkbox" name="attr_npc_switch" value="3" class="hidden hider">
        <div class="block-b npc-sheet-container">
            <table class="npc-header-table">
                <tr>
                    <td class="npc-name"><input type="text" class="npc-name" name="attr_character_name" placeholder="Character Name" data-i18n-placeholder="char-name"></input></td>
                    <td class="npc-level-label">LEVEL</td>
                    <td><input class="npc-level-input" type="number" name="attr_npc_level" value="1"/></td>
                </tr>
            </table>

            <table class="npc-data-table">
                <tbody>
                    <!-- Top Half of Npc Table -->
                    <tr>
                        <td class="npc-table-section-top-left caps" data-i18n="habitat">Habitat</td>
                        <td class="npc-table-section-top-right" colspan="3">
                            <input type="text" name="attr_npc_habitat" placeholder="All" data-i18n-placeholder="all"/>
                        </td>
                    </tr>
                    <tr>
                        <td class="npc-table-section-top-left caps" data-i18n="season">Season</td>
                        <td class="npc-table-section-top-right" colspan="3">
                            <select name="attr_npc_season" class="npc-season">
                                <option value=""></option>
                                <option value="Spring" data-i18n="season-spring">Spring</option>
                                <option value="Summer" data-i18n="season-summer">Summer</option>
                                <option value="Fall" data-i18n="season-fall">Fall</option>
                                <option value="Winter" data-i18n="season-winter">Winter</option>
                            </select>
                        </td>
                    </tr>
                    <tr>
                        <td class="npc-table-section-top-left caps" data-i18n="materials">Materials</td>
                        <td class="npc-table-section-top-right" colspan="3">
                            <input type="text" name="attr_npc_materials" placeholder="Shell (1000G)" data-i18n-placeholder="price-example"/>
                        </td>
                    </tr>
                    <tr>
                        <td class="npc-table-section-top-left caps" data-i18n="draconica-number">Draconica Number</td>
                        <td class="npc-table-section-top-right" colspan="3">
                            <input type="text" name="attr_npc_dragonica_num" placeholder="001"/>
                        </td>
                    </tr>

                    <!-- Bottom Half of Npc Table-->
                    <tr>
                        <td class="npc-table-section-bottom-a" data-i18n="hp">HP</td>
                        <td class="npc-table-section-bottom-b">
                            <input type="number" name="attr_npc_hp" value="0"/> /
                            <input type="number" name="attr_npc_hp_max" value="0"/>
                        </td>
                        <td class="npc-table-section-bottom-c caps" data-i18n="abilities">Abilities</td>
                        <td class="npc-table-section-bottom-d">
                            <input type="number" name="attr_npc_str" placeholder="STR" data-i18n-placeholder="str"/>
                            <input type="number" name="attr_npc_dex" placeholder="DEX" data-i18n-placeholder="dex"/>
                            <input type="number" name="attr_npc_int" placeholder="INT" data-i18n-placeholder="int"/>
                            <input type="number" name="attr_npc_spi" placeholder="SPI" data-i18n-placeholder="spi"/>
                        </td>
                    </tr>
                    <tr>
                        <td class="npc-table-section-bottom-a" data-i18n="mp">MP</td>
                        <td class="npc-table-section-bottom-b">
                            <input type="number" name="attr_npc_mp" value="0"/> /
                            <input type="number" name="attr_npc_mp_max" value="0"/>
                        </td>
                        <td class="npc-table-section-bottom-c caps" data-i18n="accuracy">Accuracy</td>
                        <td class="npc-table-section-bottom-d">
                            <button type="roll" value="@{wtype} &{template:accuracyCheck} {{season=@{currentSeason}}} {{name=@{character_name}}} {{die1=[[1d@{npc_accuracy_dice1}]]}} {{die2=[[1d@{npc_accuracy_dice2}]]}} {{bonusesAndPenalties=[[@{npc_accuracy_bonus}]]}}]]" name="roll_npcAccuracyRoll"></button>
                            <select name="attr_npc_accuracy_dice1" class="dtype">
                                <option value="4">d4</option>
                                <option value="6">d6</option>
                                <option value="8">d8</option>
                                <option value="10">d10</option>
                                <option value="12">d12</option>
				<option value="20">d20</option>
                            </select>
                            <select name="attr_npc_accuracy_dice2" class="dtype">
                                <option value="4">d4</option>
                                <option value="6">d6</option>
                                <option value="8">d8</option>
                                <option value="10">d10</option>
                                <option value="12">d12</option>
				<option value="20">d20</option>
                            </select>
                            +
                            <input type="number" name="attr_npc_accuracy_bonus" value="0"/>
                        </td>
                    </tr>
                    <tr>
                        <td class="npc-table-section-bottom-a caps" data-i18n="initiative">Initiative</td>
                        <td class="npc-table-section-bottom-b">
                            <input type="number" name="attr_npc_initiative" value="0"/>
                            <button type="roll" value="@{wtype} &{template:oneDieCheck} {{season=@{currentSeason}}} {{name=@{character_name} Initiative}} {{result=[[@{npc_initiative} &{tracker}]]}}" name="roll_npcDamageRoll"></button>
                        </td>
                        <td class="npc-table-section-bottom-c caps" data-i18n="damage">Damage</td>
                        <td class="npc-table-section-bottom-d">
                            <button type="roll" value="@{wtype} &{template:oneDieCheck} {{season=@{currentSeason}}} {{name=@{character_name} Damage}} {{result=[[(1+@{npcCriticalMod})d@{npc_damage_dice} + @{npc_damage_bonus}]]}}" name="roll_npcDamageRoll"></button>
                            <select name="attr_npc_damage_dice" class="dtype">
                                <option value="4">d4</option>
                                <option value="6">d6</option>
                                <option value="8">d8</option>
                                <option value="10">d10</option>
                                <option value="12">d12</option>
				<option value="20">d20</option>
                            </select>
                            +
                            <input type="number" name="attr_npc_damage_bonus" value="0"/>&nbsp;
                            <label class="checkboxLabel inlineCheckbox"><input type="checkbox" name="attr_npcCriticalMod" value="1">
                                &nbsp;<span class="add-crit-die" data-i18n="add-crit-die">Add Critical Die</span>
                            </label>
                        </td>
                    </tr>
                    <tr>
                        <td class="npc-table-section-bottom-a caps" data-i18n="condition">Condition</td>
                        <td class="npc-table-section-bottom-b">
                            <input type="number" name="attr_npc_condition" /></td>
                        <td class="npc-table-section-bottom-c caps" data-i18n="armor">Armor</td>
                        <td class="npc-table-section-bottom-d">
                            <input type="number" name="attr_npc_armor" /></td>
                    </tr>
                </tbody>
            </table>
            <textarea class="npc-details" name="attr_npc_details" placeholder="Space for npc details or special abilities. You can use inline rolls if needed, ex. [[1d6]]." data-i18n-placeholder="npc-freetext-instruction"></textarea>
            <button type="roll" value="@{wtype} &{template:oneDieCheck} {{season=@{currentSeason}}} {{freetext=@{npc_details}}}" name="roll_npcDetails"></button>
            &nbsp;<span data-i18n="output-description">Output Description Box to chat</span>
            <select name="attr_wtype" class="npc-always-whisper-roll">
                <option value="" data-i18n="whisper-never">Never Whisper Rolls</option>
                <option value="?{Whisper?|Public Roll,|Whisper Roll,/w gm }" data-i18n="whisper-query">Query Whisper</option>
                <option value="/w gm " data-i18n="whisper-always">Always Whisper Rolls</option>
            </select>

        </div>
        <!--- End of NPC sheet -->

        <!--- Start of GM Character sheet -->
        <input type="checkbox" name="attr_npc_switch" value="2" class="hidden hider">
        <div class="block-c characterSheet gm-sheet-container">

            <!--- High Level Tabs-->
            <input type="radio" class="tab gmtab1" name="attr_gm-tab" value="1" title="Details" checked="checked"/>
            <span class="tab gmtab1" data-i18n="tab-character">Character</span>
            <input type="radio" class="tab gmtab2" name="attr_gm-tab" value="2" title="Class"/>
            <span class="tab gmtab2" data-i18n="tab-history">History</span>
            <!--- --->

            <span class="gmCharacterDetails">
                <div class="flex">
                    <img class="logo" src="https://raw.githubusercontent.com/Roll20/roll20-character-sheets/master/Ryuutama/images/rtlogo.svg">
                    <img class="gmlogo" src="https://raw.githubusercontent.com/Roll20/roll20-character-sheets/master/Ryuutama/images/gmCharacterSheetBanner.svg">
                </div>

                <div class="flex-column">
                    <div class="flex-between">
                        <div class="flex-column">
                            <label class="header attrLabel" data-i18n="name">Name</label>
                            <input name="attr_character_name" placeholder="Character Name" title="@{character_name}" type="text" value="" data-i18n-placeholder="char-name"/>
                        </div>
                        <div class="flex-column">
                            <label class="header attrLabel" data-i18n="race">Race</label>
                            <input type="text" name="attr_gmpcRace"/>
                        </div>
                        <div class="flex-column">
                            <label class="header attrLabel" data-i18n="level">Level</label>
                            <input type="number" name="attr_level" value="1" min="1"/>
                        </div>
                        <div class="flex-column">
                            <label class="header attrLabel" data-i18n="alt-shape">Alt Shape</label>
                            <input type="text" name="attr_charGender"/>
                        </div>
                    </div>
                </div>
                <div class="flex gmpcLifepoints">
                    <div class="lp">
                        <label class="header headerLabel gmpc-label lifepointsHeader" data-i18n="lifepoints">Lifepoints</label>
                        <div class="hp">
                            <img src="https://raw.githubusercontent.com/Roll20/roll20-character-sheets/master/Ryuutama/images/leaf.png" alt="whiteheart" class="icon">
                            <input type="number" class="stats" name="attr_lifePoints" value="1"/> /
                            <input type="number" class="stats" name="attr_lifePoints_max" value="1" min="1"/>
                        </div>
                    </div>

                    <div class="flex personalItems">
                        <div class="flex-column">
                            <label class="header attrLabel" data-i18n="artefact">Artefact</label>
                            <input  type="text" name="attr_artefact"/>
                        </div>

                        <div class="flex-column">
                            <label class="header attrLabel" data-i18n="inscription">Inscription</label>
                            <input type="text" name="attr_inscription" class="full-width"/>
                        </div>
                    </div>
                </div>
                <div class="flex-column">
                    <div class="benedictions">
                        <label class="header headerLabel gmpc-label">
                            <span data-i18n="benediction">Bndiction</span>
                            <input type="hidden" name="attr_benedictionSlots"/>
                            (<span data-i18n="number-of-slots"># of slots</span>:&nbsp;<span name="attr_benedictionSlots"></span>)
                        </label>
                        <fieldset class="repeating_benedictions">
                            <div>
                                <label class="gmpc-repeatingLabel">
                                    <input type="checkbox" name="attr_benedictionUsed" class="benedictionUsed"/>
                                    <span class="gmpc-repeatingName" name="attr_benedictionName"></span>
                                </label>

                                <input class="config-toggles config-checkbox" name="attr_settings" type="checkbox" value="settings"/>
				                <span class="config-toggles settings-toggle ">p</span>
                                <input class="config-toggles collapse-toggle config-checkbox" name="attr_collapse" type="checkbox" value="collapse"/>
				                <span class="config-toggles collapse-toggle">i</span>

                                <div class="settings">
                                    <div class="flex-column">
                                        <input type="text" name="attr_benedictionName" class="gmpcNameInput" placeholder="name" data-i18n-placeholder="name"/>
                                    </div>
                                </div>
                                <div class="settings">
                                    <textarea name="attr_benedictionEffect" class="spellEffect" placeholder="Effect" data-i18n-placeholder="effect"></textarea>
                                </div>
                                <div class="collapse">
                                    <span name="attr_benedictionEffect" class="spellEffectDisplay"></span>
                                </div>
                            </div>
                        </fieldset>
                    </div>

                    <div>
                        <label class="header headerLabel gmpc-label" data-i18n="reveil">Rveil</label>
                        <fieldset class="repeating_reveils">
                            <div>
                                <div>
                                    <span class="reveilName" name="attr_reveilName"></span>
                                    <span data-i18n="lp-cost">LP Cost</span>:<span class="reveilCost" name="attr_reveilCost"></span>
                                </div>

                                <input class="config-toggles config-checkbox" name="attr_settings" type="checkbox" value="settings"/>
				                <span class="config-toggles settings-toggle ">p</span>
                                <input class="config-toggles collapse-toggle config-checkbox" name="attr_collapse" type="checkbox" value="collapse"/>
                                <span class="config-toggles collapse-toggle">i</span>

                                <div class="settings">
                                    <div class="flex-column">
                                        <span data-i18n="name">Name</span>
                                        <input type="text" name="attr_reveilName" class="gmpcNameInput"/>
                                    </div>
                                    <div class="flex-column">
                                        <span data-i18n="lp-cost">LP Cost</span>
                                        <input type="number" name="attr_reveilCost" min="1"/>
                                    </div>
                                </div>
                                <div class="settings">
                                    <textarea name="attr_reveilEffect" class="spellEffect" placeholder="Effect"></textarea>
                                </div>
                                <div class="collapse">
                                    <span name="attr_reveilEffect" class="spellEffectDisplay"></span>
                                </div>
                            </div>
                        </fieldset>
                    </div>

                    <div>
                        <label class="header headerLabel gmpc-label" data-i18n="appearance-personality">Appearance, Personality</label>
                        <textarea name="attr_gmAppearance"></textarea>
                    </div>

                    <div class="flex-column">
                        <label class="header headerLabel gmpc-label" data-i18n="goal">Goal</label>
                        <input type="text" name="attr_gmGoal" class="full-width"></input>
                    </div>

                    <div class="flex-column">
                        <label class="header headerLabel gmpc-label" data-i18n="living-quarters">Living Quarters</label>
                        <input type="text" name="attr_gmHometown" class="full-width"></input>
                    </div>
                </div>
            </span>
            <span class="gmHistory">

                <div class="flex-column">
                    <label class="header headerLabel gmpc-label" data-i18n="protected-travelers">Protected Travelers</label>
                    <textarea name="attr_protectedTravelers" class="protectedTravelers"></textarea>
                </div>

                <div class="flex-column">
                    <label class="header headerLabel gmpc-label" data-i18n="protected-worlds">Protected Worlds</label>
                    <input type="text" name="attr_protectedWorlds" class="full-width"></input>
                </div>

                <div class="flex-column">
                    <label class="header headerLabel gmpc-label" data-i18n="history-of-tales">History of Tales</label>
                    <div class="historyTales">
                        <span data-i18n="scenario-name">Scenario name</span>
                        <span data-i18n="date">Date</span>
                        <span data-i18n="travelers-names">Traveler's names</span>
                    </div>
                    <fieldset class="repeating_history">
                        <div class="historyTales">
                            <input type="text" name="attr_scenarioName" class="scenarioName historyInput" placeholder="First meeting with trouble" data-i18n-placeholder="first-meeting"/>
                            <input type="text" name="attr_scenarioDate" class="scenarioDate historyInput" placeholder="9/6" data-i18n-placeholder="date-example"/>
                            <input type="text" name="attr_scenarioTravelers" class="scenarioTravelers historyInput" placeholder="Haruka, Leo" data-i18n-placeholder="traveler-name-examples"/>
                        </div>
                    </fieldset>
                </div>
            </span>
        </div>

        <!--- End of GM character sheet -->
    </div>

      <!-- Roll Templates -->
            <rolltemplate class="sheet-rolltemplate-skillCheck">
    			<div class="container">
    				<div class="sheet-rolltemplate-skillCheck">
    					<div class="rollTitle {{season}}">{{name}}</div>
    					<div class="rollResult">{{die1}} + {{die2}} + {{bonusesAndPenalties}}
    						{{#rollWasFumble() die1}}
    							{{#rollWasFumble() die2}}
    								<div class="fumble" data-i18n="fumble">FUMBLE!!!</div>
    							{{/rollWasFumble() die2}}
    						{{/rollWasFumble() die1}}
    						{{#rollWasCrit() die1}}
    							{{#rollWasCrit() die2}}
    								<div class="critical" data-i18n="critical">CRITICAL SUCCESS!!!</div>
    							{{/rollWasCrit() die2}}
    						{{/rollWasCrit() die1}}
    						{{#rollTotal() die1 6}}
    							{{#rollTotal() die2 6}}
    								{{#^rollWasCrit() die1}}
    									{{#^rollWasCrit() die2}}
    										<div class="critical" data-i18n="critical">CRITICAL SUCCESS!!!</div>
    									{{/^rollWasCrit() die2}}
    								{{/^rollWasCrit() die1}}
    								{{#rollWasCrit() die1}}
    									{{#^rollWasCrit() die2}}
    										<div class="critical" data-i18n="critical">CRITICAL SUCCESS!!!</div>
    									{{/^rollWasCrit() die2}}
    								{{/rollWasCrit() die1}}
    								{{#^rollWasCrit() die1}}
    									{{#rollWasCrit() die2}}
    										<div class="critical" data-i18n="critical">CRITICAL SUCCESS!!!</div>
    									{{/rollWasCrit() die2}}
    								{{/^rollWasCrit() die1}}
    							{{/rollTotal() die2 6}}
    						{{/rollTotal() die1 6}}
    					</div>
    				</div>
    			</div>
            </rolltemplate>

            <rolltemplate class="sheet-rolltemplate-accuracyCheck">
    			<div class="container">
    				<div class="sheet-rolltemplate-accuracyCheck">
    					<div class="rollTitle {{season}}">{{name}} <span data-i18n="accuracy-check">accuracy check</span></div>
    					<div class="rollResult">{{die1}} + {{die2}} + {{bonusesAndPenalties}}
    						{{#rollWasFumble() die1}}
    							{{#rollWasFumble() die2}}
    								<div class="fumble" data-i18n="fumble">FUMBLE!!!</div>
    							{{/rollWasFumble() die2}}
    						{{/rollWasFumble() die1}}
    						{{#rollWasCrit() die1}}
    							{{#rollWasCrit() die2}}
    								<div class="critical" data-i18n="critical">CRITICAL HIT!!!</div>
    							{{/rollWasCrit() die2}}
    						{{/rollWasCrit() die1}}
    						{{#rollTotal() die1 6}}
    							{{#rollTotal() die2 6}}
    								{{#^rollWasCrit() die1}}
    									{{#^rollWasCrit() die2}}
    										<div class="critical" data-i18n="critical">CRITICAL HIT!!!</div>
    									{{/^rollWasCrit() die2}}
    								{{/^rollWasCrit() die1}}
    								{{#rollWasCrit() die1}}
    									{{#^rollWasCrit() die2}}
    										<div class="critical" data-i18n="critical">CRITICAL HIT!!!</div>
    									{{/^rollWasCrit() die2}}
    								{{/rollWasCrit() die1}}
    								{{#^rollWasCrit() die1}}
    									{{#rollWasCrit() die2}}
    										<div class="critical" data-i18n="critical">CRITICAL HIT!!!</div>
    									{{/rollWasCrit() die2}}
    								{{/^rollWasCrit() die1}}
    							{{/rollTotal() die2 6}}
    						{{/rollTotal() die1 6}}
    					</div>
    				</div>
    			</div>
            </rolltemplate>

            <rolltemplate class="sheet-rolltemplate-oneDieCheck">
                <div class="container">
                    <div class="sheet-rolltemplate-oneDieCheck">
                        <div class="rollTitle {{season}}">{{name}}</div>
                        {{#result}}
                            <div class="rollResult">{{result}}</div>
                        {{/result}}
                        {{#freetext}}
                            <div class="rollFreeText">{{freetext}}</div>
                        {{/freetext}}
                    </div>
                </div>
            </rolltemplate>

            <rolltemplate class="sheet-rolltemplate-spell">
                <div class="rolltemplate-spellContainer">
                        <div class="rolltemplate-spellCard">
                            <div class="rolltemplate-spellAttr flex-column">
                                <div class="rolltemplate-spellTitle" data-i18n="name">Name</div>
                                <div class="rolltemplate-spellAttrText">[{{name}}](~{{charname}}|magicRoll)</div>
                            </div>
                            {{#cost}}
                                <div class="flex-column">
                                    <div class="rolltemplate-spellTitle" data-i18n="mp">MP</div>
                                    <div class="rolltemplate-spellAttrText">{{cost}}</div>
                                </div>
                            {{/cost}}
                        </div>
                        <div class="rolltemplate-spellCard">
                            {{#duration}}
                                <div class="rolltemplate-spellAttr flex-column">
                                    <div class="rolltemplate-spellTitle" data-i18n="duration">Duration</div>
                                    <div class="rolltemplate-spellAttrText">{{duration}}</div>
                                </div>
                            {{/duration}}
                            {{#target}}
                                <div class="rolltemplate-spellAttr flex-column">
                                    <div class="rolltemplate-spellTitle" data-i18n="target">Target</div>
                                    <div class="rolltemplate-spellAttrText">{{target}}</div>
                                </div>
                            {{/target}}
                            {{#range}}
                                <div class="flex-column">
                                    <div class="rolltemplate-spellTitle" data-i18n="range">Range</div>
                                    <div class="rolltemplate-spellAttrText">{{range}}</div>
                                </div>
                            {{/range}}
                        </div>
                        {{#effect}}
                            <div class="rolltemplate-spellEffect">{{effect}}</div>
                        {{/effect}}
                    </div>
                </div>
            </rolltemplate>
            <!-- End Roll Templates -->

</html>

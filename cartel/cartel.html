<!--
    Roll20 Character Sheet for *Cartel* by:
        Magpie Games <https://magpiegames.com/>

    Sheet author: Jason Slanga <jason@anhinga.net>
-->

<!-- wrapper for Cartel -->
<div class="cartel">

<!--
================================================================================================
==  HEADER  ====================================================================================
================================================================================================
-->
<header class="editbox">
    <div class="identity">
        <h1><span name="attr_character_name"></span></h1>
        <h2>&nbsp;&ndash;&nbsp <span name="attr_playbook"></span></h2>
    </div>

    <dl class="description">
        <dt data-i18n="look"></dt><dd><span name="attr_look"></span></dd>
        <dt data-i18n="gear"></dt><dd><span name="attr_gear"></span></dd>
        <dt data-i18n="lifestyle"></dt>
            <dd>
                <span name="attr_lifestyle"></span>
                <span name="attr_lifestyle_description" class="lifestyle_description"></span>
            </dd>
    </dl>

    <details>
        <summary></summary>
        <h2 data-i18n="edit identity">edit identity</h2>

        <!-- Character Name and Playbook -->
        <div class="label_row">

            <label>
                <span data-i18n="character name">character name</span>
                <input name="attr_character_name" type="text" placeholder="character name" />
            </label>

            <!-- use a datalist to select hard-coded playbooks, but leave the sheet customizable -->
            <label>
                <span data-i18n="playbook">playbook</span>
                <input type="text" name="attr_playbook" list="playbook_list" value="" /><span></span>
                <datalist id="playbook_list">
                    <option value="el cocinero" data-i18n="el cocinero">el cocinero</option>
                    <option value="la esposa" data-i18n="la esposa">la esposa</option>
                    <option value="el halcon" data-i18n="el halcon">el halcon</option>
                    <option value="el narco" data-i18n="el narco">el narco</option>
                    <option value="la polizeta" data-i18n="la polizeta">la polizeta</option>
                    <option value="la rata" data-i18n="la rata">la rata</option>
                    <option value="la sicaria" data-i18n="la sicaria">la sicaria</option>
                </datalist>
            </label>
        </div>

        <!-- Look & Gear -->
        <div class="label_row">
            <label><span data-i18n="look">look</span> <input type="text" name="attr_look" /></label>
            <label><span data-i18n="gear">gear</span> <input type="text" name="attr_gear" /></label>
        </div>

            <!-- lifestyle -->
            <h3 data-i18n="lifestyle">lifestyle</h3>
            <input type="hidden" name="lifestyle_description" value="" />
            <div class="editlifestyle">
                <label data-i18n-title="destitute_desc">
                    <input type="radio" name="attr_lifestyle" value="destitute" />
                    <span data-i18n="destitute">destitute</span>
                </label>

                <label data-i18n-title="impoverished_desc">
                    <input type="radio" name="attr_lifestyle" value="impoverished" />
                    <span data-i18n="impoverished">impoverished</span>
                </label>

                <label data-i18n-title="stable_desc">
                    <input type="radio" name="attr_lifestyle" value="stable" />
                    <span data-i18n="stable">stable</span>
                </label>

                <label data-i18n-title="luxury_desc">
                    <input type="radio" name="attr_lifestyle" value="luxury" />
                    <span data-i18n="luxury">luxury</span>
                </label>

                <label data-i18n-title="extravagant_desc">
                    <input type="radio" name="attr_lifestyle" value="extravagant" />
                    <span data-i18n="extravagant">extravagant</span>
                </label>
            </div>
    </details>
</header>

<!--
================================================================================================
==  TABS (Navigation)  =========================================================================
================================================================================================
-->
<input type="hidden" name="attr_showtab" class="attr_showtab" value="stats" />
<div class="tabs">
    <button type="action" name="act_stats" >basic stats</button>
    <button type="action" name="act_character_moves" >character moves</button>
    <button type="action" name="act_extras" >extras</button>
    <button type="action" name="act_basic_moves" >basic moves</button>
    <button type="action" name="act_stress_heat" >stress/heat</button>
    <button type="action" name="act_notes" >notes</button>
</div>


<!--
================================================================================================
==  STATS PAGE  ================================================================================
================================================================================================
-->

<div class="statspage tabpage">
    <header><h1>basic stats</h1></header>
    <main>
        <div class="left">
            
            <!--------------------------------------------------------------------------
            -- STATS
            -->
            <section>
                <h2>stats</h2>
                <div class="statsrow">
                    <!-- face -->
                    <input type="hidden" name="attr_roll_face" value="&{template:cartel}" />
                    <label>
                        <span data-i18n="face">face</span>
                        <input name="attr_face" type="number" min="-3" max="3" value="0" />
                        <button type="roll" name="roll_face" value="@{roll_face}"></button>
                    </label>

                    <!-- grit -->
                    <input type="hidden" name="attr_roll_grit" value="&{template:cartel}" />
                    <label>
                        <span data-i18n="grit">grit</span>
                        <input name="attr_grit" type="number" min="-3" max="3" value="0" />
                        <button type="roll" name="roll_grit" value="@{roll_grit}"></button>
                    </label>

                    <!-- hustle -->
                    <input type="hidden" name="attr_roll_hustle" value="&{template:cartel}" />
                    <label>
                        <span data-i18n="hustle">hustle</span>
                        <input name="attr_hustle" type="number" min="-3" max="3" value="0" />
                        <button type="roll" name="roll_hustle" value="@{roll_hustle}"></button>
                    </label>

                    <!-- savagery -->
                    <input type="hidden" name="attr_roll_savagery" value="&{template:cartel}" />
                    <label>
                        <span data-i18n="savagery">savagery</span>
                        <input name="attr_savagery" type="number" min="-3" max="3" value="0" />
                        <button type="roll" name="roll_savagery" value="@{roll_savagery}"></button>
                    </label>

                    <!-- heat -->
                    <input type="hidden" name="attr_roll_heat" value="&{template:cartel}" />
                    <label>
                        <span data-i18n="heat">heat</span>
                        <input name="attr_heat" type="number" min="-3" max="3" value="0" />
                        <button type="roll" name="roll_heat" value="@{roll_heat}"></button>
                    </label>
                </div>
            </section>
            
            <!--------------------------------------------------------------------------
            -- STRESS
            -->
            <section>
                <details class="rulesbox">
                    <summary><h2 data-i18n="stress">stress</h2></summary>
                    <div class="rules_text" data-i18n="stress description">Each session you start with two stress already marked, provided you didn't end the last section with more. If your stress track is ever filled, <i>güey</i>, you’re in a bad spot.</div>
                </details>
                <div class="track">
                    <input type="radio" name="attr_stress" class="attr_track attr_track0" value="0" />
                    <input type="radio" name="attr_stress" class="attr_track" value=1" /><span></span>
                    <input type="radio" name="attr_stress" class="attr_track" value=2" checked="checked" /><span></span>
                    <input type="radio" name="attr_stress" class="attr_track" value=3" /><span></span>
                    <input type="radio" name="attr_stress" class="attr_track" value=4" /><span></span>
                    <input type="radio" name="attr_stress" class="attr_track" value=5" /><span></span>

                    <button type="action" name="act_resetstress" data-i18n="reset">reset</button>
                </div>
            </section>

            <!-- section: ENLACES -->
            <section class="enlaces">
                <h2 data-i18n="los enlaces">los enlaces</h2>

                <ul>
                    <!-- relationship 1 -->
                    <li class="editbox">
                        <span class="sentence-display">
                            <span name="attr_rel_begin1"></span>
                            <span class="rel_name" name="attr_rel_name1"></span>
                            <span name="attr_rel_end1"></span>
                        </span>

                        <details>
                            <summary></summary>

                            <input type="text" name="attr_rel_name1" />
                            <textarea name="attr_rel_text1"></textarea>
                        </details>
                    </li>

                    <!-- relationship 2 -->
                    <li class="editbox">
                        <span class="sentence-display">
                            <span name="attr_rel_begin2"></span>
                            <span class="rel_name" name="attr_rel_name2"></span>
                            <span name="attr_rel_end2"></span>
                        </span>


                        <details>
                            <summary></summary>

                            <input type="text" name="attr_rel_name2" />
                            <textarea name="attr_rel_text2"></textarea>
                        </details>
                    </li>

                    <!-- relationship 3 -->
                    <li class="editbox">
                        <span class="sentence-display">
                            <span name="attr_rel_begin3"></span>
                            <span class="rel_name" name="attr_rel_name3"></span>
                            <span name="attr_rel_end3"></span>
                        </span>

                        <details>
                            <summary></summary>

                            <input type="text" name="attr_rel_name3" />
                            <textarea name="attr_rel_text3"></textarea>
                        </details>
                    </li>
                </ul>

            </section>
            <!-- end section: ENLACES -->

        </div>

        <div class="right"> 

            <!--==  LLAVES  ============================================================-->
            <section>
                <h2 data-i18n="tus llaves">tus llaves</h2>

                <!-- Repeating fieldset to dynamically add llaves -->
                <fieldset class="repeating_llaves">
                    <div class="keybox editbox">
                        <!-- display the key with a checkbox -->
                        <label>
                            <input type="checkbox" name="attr_clearkey" class="attr_clearkey" />
                            <span name="attr_keyname" class="attr_keyname">-- select a key --</span>
                            <span name="attr_keytext" class="attr_keytext"></span>
                        </label>

                        <!-- edit the key information -->
                        <details>
                            <summary></summary>

                            <input name="attr_keyname" type="text" list="keylist" /><span></span>
                            <datalist id="keylist">
                                <option value="ambition" class="halcon">ambition</option>
                                <option value="arrogance" class="concinero">arrogance</option>
                                <option value="daring" class="halcon">daring</option>
                                <option value="debt" class="concinero polizeta">debt</option>
                                <option value="dirty hands" class="narco">dirty hands</option>
                                <option value="duty" class="halcon sicaria">duty</option>
                                <option value="family" class="esposa narco">family</option>
                                <option value="guilt" class="rata">guilt</option>
                                <option value="indomitable" class="sicaria">indomitable</option>
                                <option value="loyalty" class="esposa">loyalty</option>
                                <option value="mercy" class="rata sicaria">mercy</option>
                                <option value="paranoia" class="narco rata">paranoia</option>
                                <option value="pride" class="esposa polizeta">pride</option>
                                <option value="schemes" class="polizeta">schemes</option>
                                <option value="secrets" class="concinero">secrets</option>
                            </datalist>
                            <textarea name="attr_keytext"></textarea>
                        </details>

                    </div>

                </fieldset>
            </section>
            <!-- end section: LLAVES -->


            <!-- section: ADVANCEMENT -->
            <section class="advancement">
                <h2 data-i18n="advancement">advancement</h2>

                <!-- advancement track -->
                <div class="track">
                    <input type="radio" name="attr_adv" class="attr_track attr_track0" value="0" checked="checked" />
                    <input type="radio" name="attr_adv" class="attr_track" value=1" /><span></span>
                    <input type="radio" name="attr_adv" class="attr_track" value=2" /><span></span>
                    <input type="radio" name="attr_adv" class="attr_track" value=3" /><span></span>

                    <button name="act_resetadvance" type="action">reset</button>
                </div>

                <!-- advancement lists -->
                <b><span data-i18n="advtxt1"></span></b>
                <ul class="advlist">
                    <li><label><input type="checkbox" name="attr_adv_check1" value="1" /> <span name="attr_adv_text1"></span></label</li>
                    <li><label><input type="checkbox" name="attr_adv_check2" value="1" /> <span name="attr_adv_text2"></span></label</li>
                    <li><label><input type="checkbox" name="attr_adv_check3" value="1" /> <span name="attr_adv_text3"></span></label</li>
                    <li><label><input type="checkbox" name="attr_adv_check4" value="1" /> <span name="attr_adv_text4"></span></label</li>
                    <li><label><input type="checkbox" name="attr_adv_check5" value="1" /> <span name="attr_adv_text5"></span></label</li>
                    <li><label><input type="checkbox" name="attr_adv_check6" value="1" /> <span name="attr_adv_text6"></span></label</li>
                    <li><label><input type="checkbox" name="attr_adv_check7" value="1" /> <span name="attr_adv_text7"></span></label</li>
                    <li><label><input type="checkbox" name="attr_adv_check8" value="1" /> <span name="attr_adv_text8"></span></label</li>
                </ul>

                <b><span data-i18n="advtxt2"></span></b>
                <ul class="advlist">
                    <li><label><input type="checkbox" name="attr_adv_check9" value="1" /> <span name="attr_adv_text9"></span></label</li>
                    <li><label><input type="checkbox" name="attr_adv_check10" value="1" /> <span name="attr_adv_text10"></span></label</li>
                    <li><label><input type="checkbox" name="attr_adv_check11" value="1" /> <span name="attr_adv_text11"></span></label</li>
                    <li><label><input type="checkbox" name="attr_adv_check12" value="1" /> <span name="attr_adv_text12"></span></label</li>
                    <li><label><input type="checkbox" name="attr_adv_check13" value="1" /> <span name="attr_adv_text13"></span></label></li>
                </ul>

            </div>
            <!-- end section: ADVANCEMENT -->
        </section>

    </main>
</div>
<!--
==  end div: statspage  ========================================================================
-->

<!--
================================================================================================
==  CHARACTER MOVES  ===========================================================================
================================================================================================
-->

<div class="character_movespage tabpage">
    <header>
        <details class="rulesbox">
            <summary><h1 data-i18n="character moves">Character Moves</h1></summary>
            <div class="rules_text">
                <ul>
                    <li>to add a new moves, click the "+ Add" button</li>
                    <li>
                        click the pencil icon (
                        <span style="font-family: Pictos">p</span>
                        ) to input data for your new move
                    </li>
                    <li>The "move name" field will offer suggestions. Select one of the pre-listed move names to have the rest of the move filled out automatically.</li>
                </ul>
            </div>

        </details>
    </header>

    <main class="cols2">
        <!-- Repeating Section: Character Moves -->
        <fieldset class="repeating_charmoves">

            <div class="move editbox">
                <header>
                    <h2>
                        <span name="attr_movename" data-i18n="new character move"></span>
                        <input type="checkbox" name="attr_show_roll_button" class="show_button hidden_control" value="True" />
                        <button type="roll" name="roll_move" value="@{rollquery}"></button>
                    </h2>
                </header>
                <main>
                    <span name="attr_movedesc" class="move_description" data-i18n="click the pencil icon to edit your new move"></span>

                    <details>
                        <summary data-i18n-title="edit move"></summary>

                        <h3 data-i18n="edit move">edit move</h3>

                        <label>
                            <span data-i18n="move name">move name</span>
                            <input type="text" name="attr_movename" list="charactermoves" data-i18n-placeholder="new character move" ><span></span>
                        </label>

                        <datalist id="charactermoves">
                            <option value="cocinar" data-i18n="cocinar">Cocinar</option>
                            <option value="ciencia, cabrón" data-i18n="ciencia,_cabrón">Ciencia, Cabrón</option>
                            <option value="chillón" data-i18n="chillón">Chillón</option>
                            <option value="de calidad" data-i18n="de_calidad">De Calidad</option>
                            <option value="afortunado" data-i18n="afortunado">afortunado</option>
                            <option value="pozolero" data-i18n="pozolero">pozolero</option>
                            <option value="amor y matrimonio" data-i18n="amor_y_matrimonio">amor y matrimonio</option>
                            <option value="me lo chingué" data-i18n="me_lo_chingué">me lo chingué</option>
                            <option value="reina del drama" data-i18n="reina_del_drama">reina del drama</option>
                            <option value="perderse" data-i18n="perderse">perderse</option>
                            <option value="comer algo" data-i18n="comer_algo">comer algo</option>
                            <option value="hermanos" data-i18n="hermanos">hermanos</option>
                            <option value="mercado" data-i18n="mercado">mercado</option>
                            <option value="bendito" data-i18n="bendito">bendito</option>
                            <option value="vendedor" data-i18n="vendedor">vendedor</option>
                            <option value="matador" data-i18n="matador">matador</option>
                            <option value="mandamás" data-i18n="mandamás">mandamás</option>
                            <option value="infiltrado" data-i18n="infiltrado">infiltrado</option>
                            <option value="sequir" data-i18n="sequir">sequir</option>
                            <option value="verdadero" data-i18n="verdadero">verdadero</option>
                            <option value="siempre listo" data-i18n="siempre_listo">siempre_listo</option>
                            <option value="escolta" data-i18n="escolta">escolta</option>
                            <option value="entrenamiento" data-i18n="entrenamiento">entrenamiento</option>
                            <option value="conectada" data-i18n="conectada">conectada</option>
                            <option value="escapar" data-i18n="escapar">escapar</option>
                            <option value="amante" data-i18n="amante">amante</option>
                            <option value="chimosa" data-i18n="chimosa">chimosa</option>
                            <option value="mentirosa" data-i18n="mentirosa">mentirosa</option>
                            <option value="mirar" data-i18n="mirar">mirar</option>
                            <option value="narcocorrido" data-i18n="narcocorrido">narcocorrido</option>
                            <option value="levantón" data-i18n="levantón">levantón</option>
                            <option value="rematar" data-i18n="rematar">rematar</option>
                            <option value="encobijado" data-i18n="encobijado">encobijado</option>
                            <option value="duro" data-i18n="duro">duro</option>

                        </datalist>
                        <label>
                            <span data-i18n="description">description</span>
                            <textarea name="attr_movedesc"></textarea>
                        </label>

                        <label>
                            <input type="checkbox" name="attr_show_roll_button" value="True" />
                            <span data-i18n="show roll button?"></span>
                        </label>

                        <!-- create an attribute that can be modified by worker script -->
                        <input type="checkbox" name="attr_show_roll_button" class="hidden_control" value="True" />
                        <div class="edit_roll_data">
                            <input name="attr_rollquery" type="hidden" value="&{template:cartel}" />
                            <label>
                                <span data-i18n="roll with">roll with</span>
                                <select name="attr_rollwith">
                                    <option value="" selected disabled hidden>-- Roll with? --</option>
                                    <option value="face">face</option>
                                    <option value="grit">grit</option>
                                    <option value="hustle">hustle</option>
                                    <option value="savagery">savagery</option>
                                    <option value="heat">heat</option>
                                </select>
                            </label>

                            <label>
                                <span data-i18n="trigger">trigger</span>
                                <textarea name="attr_trigger"></textarea>
                            </label>

                            <label>
                                <span>10+</span>
                                <textarea name="attr_hitresult"></textarea>
                            </label>

                            <label>
                                <span>7-9</span>
                                <textarea name="attr_partialresult"></textarea>
                            </label>

                            <label>
                                <span>6-</span>
                                <textarea name="attr_missresult"></textarea>
                            </label>
                        </div>

                    </details>
                </main>
            </div>
            <!-- end move -->

        </fieldset>

    </main>
    <!-- end main -->

</div>
<!-- end Character Moves -->


<!--
================================================================================================
==  EXTRAS  ====================================================================================
================================================================================================
-->

<div class="extraspage tabpage">
    <!-- this value is a filter used to hide and show content based on playbook -->
    <input type="hidden" name="attr_playbook_filter" class="attr_playbook_filter" value="none" />

    <!-- ================================================================================================
    ==  COCINERO  ================================================================================== -->
    
    <header class="cocinero"><h1><span data-i18n="el cocinero">el cocinero</span> &mdash; <span data-i18n="extras">extras</span></h1></header>
    <main class="cocinero cols2">
        <!-- Tu Laboratorio -->
        <section class="laboratorio">
            <h2 data-i18n="tu laboratorio">tu laboratorio</h2>
            <div class="editbox">
                <span name="attr_lab_tags" class="tags"></span>

                <details>
                    <summary></summary>
                    <label>
                        <span data-i18n="tags">tags</span> 
                        <input type="text" name="attr_lab_tags" value="small, fixed, unstable, indebted" data-i18n-value="lab_tags" />
                    </label>
                </details>
            </div>
            
            <blockquote data-i18n="tu laboratorio-desc">By default, your lab (small fixed unstable indebted) is in a basement or warehouse, set up to make cocaine, heroin, or meth, your choice.</blockquote>

            <h3 class="list_title" data-i18n="choose 2 features">choose 2 features</h3>
            <ul class="checklist picklist">
                <li><label><input type="checkbox" name="attr_lab_feature1" /><span data-i18n="lab_feature1"></span></label></li>
                <li><label><input type="checkbox" name="attr_lab_feature2" /><span data-i18n="lab_feature2"></span></label></li>
                <li><label><input type="checkbox" name="attr_lab_feature3" /><span data-i18n="lab_feature3"></span></label></li>
                <li><label><input type="checkbox" name="attr_lab_feature4" /><span data-i18n="lab_feature4"></span></label></li>
            </ul>
            
            <h3 class="list_title" data-i18n="choose 2 troubles">choose 2 troubles</h3>
            <ul class="checklist picklist">
                <li><label><input type="checkbox" name="attr_lab_trouble1" /><span data-i18n="lab_trouble1"></span></label></li>
                <li><label><input type="checkbox" name="attr_lab_trouble2" /><span data-i18n="lab_trouble2"></span></label></li>
                <li><label><input type="checkbox" name="attr_lab_trouble3" /><span data-i18n="lab_trouble3"></span></label></li>
                <li><label><input type="checkbox" name="attr_lab_trouble4" /><span data-i18n="lab_trouble4"></span></label></li>
            </ul>

        </section>

        <!-- Tus Misterios -->
        <section class="misterios">
            <h2 data-i18n="tus misterios">tus misterios</h2>

            <blockquote class="list_title" data-i18n="misterios_description"></blockquote>
            <ul class="checklist picklist">
                <li><label><input type="checkbox" name="attr_misterio1" value="1" /><span data-i18n="misterio1"></span></label></li>
                <li><label><input type="checkbox" name="attr_misterio2" value="1" /><span data-i18n="misterio2"></span></label></li>
                <li><label><input type="checkbox" name="attr_misterio3" value="1" /><span data-i18n="misterio3"></span></label></li>
                <li><label><input type="checkbox" name="attr_misterio4" value="1" /><span data-i18n="misterio4"></span></label></li>
                <li><label><input type="checkbox" name="attr_misterio5" value="1" /><span data-i18n="misterio5"></span></label></li>
                <li><label><input type="checkbox" name="attr_misterio6" value="1" /><span data-i18n="misterio6"></span></label></li>
            </ul>
        </section>
    </main>
    <!-- ==  end COCINERO  ==============================================================================-->

    <!-- 
    ================================================================================================
    ==  ESPOSA  ====================================================================================
    -->
    <header class="esposa"><h1><span data-i18n="la esposa">la esposa</span> &mdash; <span data-i18n="extras">extras</span></h1></header>
    <main class="esposa">
        <!-- La Familia -->
        <section class="familia">
            <h3 data-i18n="la familia">la familia</h3>
            
            <div class="editbox">

                <!-- spouse -->
                <b data-i18n="spouse">spouse</b>: <span name="attr_spouse"></span>

                <details>
                    <summary></summary>

                    <p data-i18n="spouse-desc"></p> <input type="text" name="attr_spouse" value="" />
                </details>

                <!-- Obligations -->
                <p data-i18n="obligations-title" class="list_title"></p>
                <div class="label_cloud">
                    <label><input type="checkbox" name="attr_obligation1" value="1" /><span data-i18n="obligation1"></span></label>
                    <label><input type="checkbox" name="attr_obligation2" value="1" /><span data-i18n="obligation2"></span></label>
                    <label><input type="checkbox" name="attr_obligation3" value="1" /><span data-i18n="obligation3"></span></label>
                    <label><input type="checkbox" name="attr_obligation4" value="1" /><span data-i18n="obligation4"></span></label>
                    <label><input type="checkbox" name="attr_obligation5" value="1" /><span data-i18n="obligation5"></span></label>
                    <label><input type="checkbox" name="attr_obligation6" value="1" /><span data-i18n="obligation6"></span></label>
                    <label><input type="checkbox" name="attr_obligation7" value="1" /><span data-i18n="obligation7"></span></label>
                    <label><input type="checkbox" name="attr_obligation8" value="1" /><span data-i18n="obligation8"></span></label>
                    <label><input type="checkbox" name="attr_obligation9" value="1" /><span data-i18n="obligation9"></span></label>
                    <label><input type="checkbox" name="attr_obligation10" value="1" /><span data-i18n="obligation10"></span></label>
                    <label><input type="checkbox" name="attr_obligation11" value="1" /><span data-i18n="obligation11"></span></label>
                    <label><input type="checkbox" name="attr_obligation12" value="1" /><span data-i18n="obligation12"></span></label>
                    <label><input type="checkbox" name="attr_obligation13" value="1" /><span data-i18n="obligation13"></span></label>
                    <label><input type="checkbox" name="attr_obligation14" value="1" /><span data-i18n="obligation14"></span></label>
                    <label><input type="checkbox" name="attr_obligation15" value="1" /><span data-i18n="obligation15"></span></label>
                    <label><input type="checkbox" name="attr_obligation16" value="1" /><span data-i18n="obligation16"></span></label>
                    <label><input type="checkbox" name="attr_obligation17" value="1" /><span data-i18n="obligation17"></span></label>
                    <label><input type="checkbox" name="attr_obligation18" value="1" /><span data-i18n="obligation18"></span></label>

                </div>

                <section class="cols2">
                    <!-- Secrets -->
                    <p data-i18n="secrets-title" class="list_title"></p>
                    <ul class="checklist picklist">
                        <li><label><input type="checkbox" name="attr_secret_nest_egg" value="nest egg" /><span data-i18n="secret-nest_egg"></span></label></li>
                        <li><label><input type="checkbox" name="attr_secret_addiction" value="addiction" /><span data-i18n="secret-addiction"></span></label></li>
                        <li><label><input type="checkbox" name="attr_secret_affair" value="affair" /><span data-i18n="secret-affair"></span></label></li>
                        <li><label><input type="checkbox" name="attr_secret_debt" value="debt" /><span data-i18n="secret-debt"></span></label></li>
                        <li><label><input type="checkbox" name="attr_secret_lovechild" value="lovechild" /><span data-i18n="secret-lovechild"></span></label></li>
                    </ul>

                    <!-- La Familia move -->
                    <div class="move">
                        <header>
                            <h2> 
                                <span data-i18n="la_familia">La Familia</span> 
                                <input type="hidden" name="attr_roll_la_familia" value="&{template:cartel}" />
                                <button type="roll" name="roll_la_familia" value="@{roll_la_familia}"></button> 
                            </h2>
                        </header>
                        <main>
                            <blockquote data-i18n="la_familia_html"></blockquote>
                        </main>
                    </div>
                </section>
            </div>
        </section>
    </main>
    <!-- ==  end ESPOSA  ================================================================================-->

    <!-- 
    ================================================================================================
    ==  HALCON  ====================================================================================
    -->
    <header class="halcon"><h1><span data-i18n="el halcon">el halcon</span> &mdash; <span data-i18n="extras">extras</span></h1></header>
    <main class="halcon cols2">
        <!-- Tu Pandilla -->
        <section class="tu_pandilla">
            <h2 data-i18n="tu pandilla">tu pandilla</h2>
            <div class="editbox">
                <span name="attr_pandilla_tags_list" class="tags"></span>
                <details><summary></summary>
                    <label><span data-i18n="tags"></span><input type="text" name="attr_pandilla_tags_list" /></label>
                </details>
            </div>

            <!-- amigos -->
            <div class="editbox">
                <div>
                    <b data-i18n="amigos:">amigos:</b>
                    <span name="attr_pandilla_amigo1"></span>
                    <span name="attr_pandilla_amigo2"></span>
                    <span name="attr_pandilla_amigo3"></span>
                </div>

                <details>
                    <summary></summary>

                    <p data-i18n="pandilla-amigos_description"></p>

                    <p data-i18n="pandilla-amigos_names_list"></p>
                    
                    <ul>
                        <li><span data-i18n="pandilla-question_amigo1"></span><br /><input type="text" name="attr_pandilla_amigo1" list="pandilla_amigos" /><span></span></li>
                        <li><span data-i18n="pandilla-question_amigo2"></span><br /><input type="text" name="attr_pandilla_amigo2" list="pandilla_amigos" /><span></span></li>
                        <li><span data-i18n="pandilla-question_amigo3"></span><br /><input type="text" name="attr_pandilla_amigo3" list="pandilla_amigos" /><span></span></li>
                    </ul>
                    <datalist id="pandilla_amigos">
                        <option>Azul</option>
                        <option>Blanco</option>
                        <option>Calaca</option>
                        <option>Charo</option>
                        <option>Chino</option>
                        <option>Flaco</option>
                        <option>Gorgo</option>
                        <option>Lola</option>
                        <option>Moco</option>
                        <option>Nacho</option>
                        <option>Paco</option>
                        <option>Raki</option>
                        <option>Torpe</option>
                        <option>Zanahoria</option>
                    </datalist>
                    
                </details>
            </div>                


            <h3 data-i18n="choose 2 features:">choose 2 features:</h3>
            <ul class="checklist picklist">
                <li><label><input type="checkbox" name="attr_pandilla_feature1" value="1" /><span data-i18n="pandilla_feature1"></span></label></li>

                <!-- get lost in a substance -->
                <li><label>
                    <input type="checkbox" name="attr_pandilla_feature2" value="1" />
                    <span data-i18n="pandilla_feature2"></span>
                    <blockquote class="move">
                        <header>
                            <input type="hidden" name="attr_roll_pandilla-get_lost_in_a_substance" value="&{template:cartel}" />
                            <h3>
                                <span data-i18n="pandilla-get_lost_in_a_substance"></span>
                                <button type="roll" name="roll_pandilla-get_lost_in_a_substance" value="@{roll_pandilla-get_lost_in_a_substance}"></button>
                            </h3>
                        </header>
                    </blockquote>
                </label></li>
                <li><label>
                    <input type="checkbox" name="attr_pandilla_feature3" value="1" />
                    <span data-i18n="pandilla_feature3"></span>
                    <blockquote class="move">
                        <header>
                            <input type="hidden" name="attr_roll_pandilla-dish_out_a_beatdown" value="&{template:cartel}" />
                            <h3>
                                <span data-i18n="pandilla-dish_out_a_beatdown"></span>
                                <button type="roll" name="roll_pandilla-dish_out_a_beatdown" value="@{roll_pandilla-dish_out_a_beatdown}"></button>
                            </h3>
                        </header>
                    </blockquote>
                </label></li>
                <li><label><input type="checkbox" name="attr_pandilla_feature4" value="1" /><span data-i18n="pandilla_feature4"></span></label></li>
                <li><label>
                    <input type="checkbox" name="attr_pandilla_feature5" value="1" />
                    <span data-i18n="pandilla_feature5"></span>
                    <blockquote class="move">
                        <header>
                            <input type="hidden" name="attr_roll_pandilla-strain_your_finances" value="&{template:cartel}" />
                            <h3>
                                <span data-i18n="pandilla-strain_your_finances"></span>
                                <button type="roll" name="roll_pandilla-strain_your_finances" value="@{roll_pandilla-strain_your_finances}"></button>
                            </h3>
                        </header>
                    </blockquote>
                </label></li>
            </ul>

            <h3 data-i18n="choose 2 vulnerabilities:">choose 2 vulnerabilities:</h3>
            <ul class="checklist picklist">
                <li><label><input type="checkbox" name="attr_pandilla_vulnerability1" value="1" /><span data-i18n="pandilla_vulnerability1"></span></label></li>
                <li><label><input type="checkbox" name="attr_pandilla_vulnerability2" value="1" /><span data-i18n="pandilla_vulnerability2"></span></label></li>
                <li><label><input type="checkbox" name="attr_pandilla_vulnerability3" value="1" /><span data-i18n="pandilla_vulnerability3"></span></label></li>
                <li><label><input type="checkbox" name="attr_pandilla_vulnerability4" value="1" /><span data-i18n="pandilla_vulnerability4"></span></label></li>
            </ul> 

        </section>
    </main>

    <!-- ==  end HALCON  ================================================================================-->

    <!-- 
    ================================================================================================
    ==  EL NARCO  ==================================================================================
    -->
    <header class="narco"><h1><span data-i18n="el narco">el narco</span> &mdash; <span data-i18n="extras">extras</span></h1></header>
    <main class="narco cols2">
        <!-- El Jefe de Jefes -->
        <section>
            <h2 data-i18n="el jefe de jefes">el jefe de jefes</h2>
            <div class="editbox">
                <div><b><span data-i18n="contact">contact</span>:</b> <span name="attr_el_jefe_contact"></span></div>

                <details><summary></summary>
                    <blockquote class="rules_text" data-i18n="el_jefe_contact_description"></blockquote>
                    <label>
                        <span data-i18n="contact">contact</span>
                        <input type="text" name="attr_el_jefe_contact" list="el_jefe_contact_list" /><span></span>
                    </label>
                    <datalist id="el_jefe_contact_list">
                        <option>Barbie</option>
                        <option>Basura</option>
                        <option>Bruja</option>
                        <option>Chuke</option>
                        <option>Chuy</option>
                        <option>Chata</option>
                        <option>Lancha</option>
                        <option>Luchi</option>
                        <option>Mochomo</option>
                        <option>Osito</option>
                        <option>Puerca</option>
                        <option>Roco</option>
                        <option>Selena</option>
                        <option>Z-36</option>
                    </datalist>
                </details>
            </div>

            <blockquote class="rules_text" data-i18n="el_jefe_description"></blockquote>

            
            <!-- La Plaza move -->
            <div class="move">
                <header>
                    <h2> 
                        <span data-i18n="la_plaza">la plaza</span> 
                        <input type="hidden" name="attr_roll_la_plaza" value="&{template:cartel}" />
                        <button type="roll" name="roll_la_plaza" value="@{roll_la_plaza}"></button> 
                    </h2>
                </header>
                <main>
                    <blockquote data-i18n="la_plaza_html"></blockquote>
                </main>
            </div>

        </section>

        <!-- La Plaza -->
        <section>
            <div class="editbox">
                <div class="statsrow">
                    <h2 data-i18n="la_plaza">la plaza</h2>

                    <!-- control -->
                    <label>
                        <span data-i18n="control">control</span>
                        <input name="attr_control" type="number" min="-3" max="3" value="0" />
                    </label>
                </div>

                <details><summary></summary>
                    <label>
                        <span data-i18n="troubles">troubles</span>
                        <input type="text" name="attr_la_plaza_troubles" />
                    </label>

                </details>
            </div>

            <h3 data-i18n="by default you've got:"></h3>
            <ul>
                <li data-i18n="la_plaza_bullet1"></li>
                <li data-i18n="la_plaza_bullet2"></li>
                <li data-i18n="la_plaza_bullet3"></li>
                <li data-i18n="la_plaza_bullet4"></li>
            </ul>

            <h3 data-i18n="choose 4 features:">choose 4 features:</h3>
            <ul class="checklist picklist">
                <li><label><input type="checkbox" name="attr_plaza_feature1" /><span data-i18n="la_plaza_feature1"></span></label></li>
                <li><label><input type="checkbox" name="attr_plaza_feature2" /><span data-i18n="la_plaza_feature2"></span></label></li>
                <li><label><input type="checkbox" name="attr_plaza_feature3" /><span data-i18n="la_plaza_feature3"></span></label></li>
                <li><label><input type="checkbox" name="attr_plaza_feature4" /><span data-i18n="la_plaza_feature4"></span></label></li>
                <li><label><input type="checkbox" name="attr_plaza_feature5" /><span data-i18n="la_plaza_feature5"></span></label></li>
                <li><label><input type="checkbox" name="attr_plaza_feature6" /><span data-i18n="la_plaza_feature6"></span></label></li>
                <li><label><input type="checkbox" name="attr_plaza_feature7" /><span data-i18n="la_plaza_feature7"></span></label></li>
                <li><label><input type="checkbox" name="attr_plaza_feature8" /><span data-i18n="la_plaza_feature8"></span></label></li>
            </ul>

            <h3 data-i18n="choose 2 troubles:">choose 4 troubles:</h3>
            <ul class="checklist picklist">
                <li><label><input type="checkbox" name="attr_plaza_trouble1" /><span data-i18n="la_plaza_trouble1"></span></label></li>
                <li><label><input type="checkbox" name="attr_plaza_trouble2" /><span data-i18n="la_plaza_trouble2"></span></label></li>
                <li><label><input type="checkbox" name="attr_plaza_trouble3" /><span data-i18n="la_plaza_trouble3"></span></label></li>
                <li><label><input type="checkbox" name="attr_plaza_trouble4" /><span data-i18n="la_plaza_trouble4"></span></label></li>
            </ul>
        </section>
    </main>
    <!-- ==  end NARCO  =================================================================================-->

    <!-- 
    ================================================================================================
    ==  LA POLIZETA  ===============================================================================
    -->
    <header class="polizeta"><h1><span data-i18n="la polizeta">la polizeta</span> &mdash; <span data-i18n="extras">extras</span></h1></header>
    <main class="polizeta cols2">
        <section>
            <h2>Anti-Cartel Task Force</h2>

            <div>
                <span data-i18n="You work closely with 5 NPCs (at least) in the unit:"></span>
                <center><i>Delgado, Moreno, Ortiz, Reyez, Zamora</i></center>

                <div class="editbox">
                    <span data-i18n="Who is your new partner?"></span> <span name="attr_polizeta_q1" class="response"></span>
                    <details><summary></summary><span data-i18n="Who is your new partner?"></span> <input type="text" name="attr_polizeta_q1" /> </details>
                </div>
                <div class="editbox">
                    <span data-i18n="Who is suspicious of you?"></span> <span name="attr_polizeta_q2" class="response"></span>
                    <details><summary></summary><span data-i18n="Who is suspicious of you?"></span> <input type="text" name="attr_polizeta_q2" /> </details>
                </div>

                <span data-i18n="You also end up working with a few NPCs from the cartel:"></span>
                <center><i>Elisa, Esteban, Gata, Tomas, Zola</i></center>

                <div class="editbox">
                    <span data-i18n="Who almost gave you away?"></span> <span name="attr_polizeta_q3" class="response"></span>
                    <details><summary></summary><span data-i18n="Who almost gave you away?"></span> <input type="text" name="attr_polizeta_q3" /> </details>
                </div>
                <div class="editbox">
                    <span data-i18n="Who offered to scam <i>el narco</i>?"></span> <span name="attr_polizeta_q4" class="response"></span>
                    <details><summary></summary><span data-i18n="Who offered to scam <i>el narco</i>?"></span> <input type="text" name="attr_polizeta_14" /> </details>
                </div>

            </div>
            <div>

            </div>

            <blockquote data-i18n="task_force_equipment"></blockquote>
            <ul class="checklist picklist">
                <li><label><input type="checkbox" name="attr_task_force_equip1" value="True" /><span data-i18n="task_force_equip1"></span></label></li>
                <li><label><input type="checkbox" name="attr_task_force_equip2" value="True" /><span data-i18n="task_force_equip2"></span></label></li>
                <li><label><input type="checkbox" name="attr_task_force_equip3" value="True" /><span data-i18n="task_force_equip3"></span></label></li>
                <li><label><input type="checkbox" name="attr_task_force_equip4" value="True" /><span data-i18n="task_force_equip4"></span></label></li>
                <li><label><input type="checkbox" name="attr_task_force_equip5" value="True" /><span data-i18n="task_force_equip5"></span></label></li>
            </ul>

        </section>
    </main>
    <!-- ==  end POLIZETA================================================================================-->
        

    <!-- 
    ================================================================================================
    ==  LA RATA  ===================================================================================
    -->
    <header class="rata"><h1><span data-i18n="la rata">la rata</span> &mdash; <span data-i18n="extras">extras</span></h1></header>
    <main class="rata cols2">
        <section>
            <h2 data-i18n="el trabajo sucio">el trabajo sucio</h2>

            <div data-i18n="el trabajo sucio-description"></div>
            <ul class="checklist picklist">
                <li><label><input type="checkbox" name="attr_trabajo_sucio1" value="True" /><span data-i18n="trabajo_sucio1"></span></label></li>
                <li><label><input type="checkbox" name="attr_trabajo_sucio2" value="True" /><span data-i18n="trabajo_sucio2"></span></label></li>
                <li><label><input type="checkbox" name="attr_trabajo_sucio3" value="True" /><span data-i18n="trabajo_sucio3"></span></label></li>
                <li><label><input type="checkbox" name="attr_trabajo_sucio4" value="True" /><span data-i18n="trabajo_sucio4"></span></label></li>
                <li><label><input type="checkbox" name="attr_trabajo_sucio5" value="True" /><span data-i18n="trabajo_sucio5"></span></label></li>
            </ul>
        </section>
        <section>
            <h2 data-i18n="supervivencia">supervivencia</h2>
            <div data-i18n="supervivencia_html"> </div>
        </section>
    </main>
    <!-- ==  end RATA ===================================================================================-->
        
    <!-- 
    ================================================================================================
    ==  LA SICARIA  ================================================================================
    -->
    <header class="sicaria"><h1><span data-i18n="la sicaria">la sicaria</span> &mdash; <span data-i18n="extras">extras</span></h1></header>
    <main class="sicaria cols2">
        <!-- Weapons -->
        <section>
            <h2 data-i18n="weapons (choose 4)">weapons (choose 4)</h2>

            <ul class="checklist picklist">
                <li><label><input type="checkbox" name="attr_sicaraia_weapon1" value="True" /><span data-i18n="sicaria_weapon1"></span></label></li>
                <li><label><input type="checkbox" name="attr_sicaraia_weapon2" value="True" /><span data-i18n="sicaria_weapon2"></span></label></li>
                <li><label><input type="checkbox" name="attr_sicaraia_weapon3" value="True" /><span data-i18n="sicaria_weapon3"></span></label></li>
                <li><label><input type="checkbox" name="attr_sicaraia_weapon4" value="True" /><span data-i18n="sicaria_weapon4"></span></label></li>
                <li><label><input type="checkbox" name="attr_sicaraia_weapon5" value="True" /><span data-i18n="sicaria_weapon5"></span></label></li>
                <li><label><input type="checkbox" name="attr_sicaraia_weapon6" value="True" /><span data-i18n="sicaria_weapon6"></span></label></li>
                <li><label><input type="checkbox" name="attr_sicaraia_weapon7" value="True" /><span data-i18n="sicaria_weapon7"></span></label></li>
                <li><label><input type="checkbox" name="attr_sicaraia_weapon8" value="True" /><span data-i18n="sicaria_weapon8"></span></label></li>
                <li><label><input type="checkbox" name="attr_sicaraia_weapon9" value="True" /><span data-i18n="sicaria_weapon9"></span></label></li>
                <li><label><input type="checkbox" name="attr_sicaraia_weapon10" value="True" /><span data-i18n="sicaria_weapon10"></span></label></li>
                <li><label><input type="checkbox" name="attr_sicaraia_weapon11" value="True" /><span data-i18n="sicaria_weapon11"></span></label></li>
                <li><label><input type="checkbox" name="attr_sicaraia_weapon12" value="True" /><span data-i18n="sicaria_weapon12"></span></label></li>
            </ul>
        </section>

        <!-- Gear -->
        <section>
            <h2 data-i18n="gear (choose 4)">gear (choose 4)</h2>

            <ul class="checklist picklist">
                <li><label><input type="checkbox" name="attr_sicaraia_gear1" value="True" /><span data-i18n="sicaria_gear1"></span></label></li>
                <li><label><input type="checkbox" name="attr_sicaraia_gear2" value="True" /><span data-i18n="sicaria_gear2"></span></label></li>
                <li><label><input type="checkbox" name="attr_sicaraia_gear3" value="True" /><span data-i18n="sicaria_gear3"></span></label></li>
                <li><label><input type="checkbox" name="attr_sicaraia_gear4" value="True" /><span data-i18n="sicaria_gear4"></span></label></li>
                <li><label><input type="checkbox" name="attr_sicaraia_gear5" value="True" /><span data-i18n="sicaria_gear5"></span></label></li>
                <li><label><input type="checkbox" name="attr_sicaraia_gear6" value="True" /><span data-i18n="sicaria_gear6"></span></label></li>
                <li><label><input type="checkbox" name="attr_sicaraia_gear7" value="True" /><span data-i18n="sicaria_gear7"></span></label></li>
                <li><label><input type="checkbox" name="attr_sicaraia_gear8" value="True" /><span data-i18n="sicaria_gear8"></span></label></li>
            </ul>
        </section>
    </main>
    <!-- ==  end SICARIA  ===============================================================================-->
    
</div>
<!--
==  end EXTRAS  ================================================================================
-->

<!--
================================================================================================
==  BASIC MOVES  ===============================================================================
================================================================================================
-->
<div class="basic_movespage tabpage">
    <header>
        <h1>Basic Moves</h1>
    </header>
    
    <main class="cols2">

        <!-- Justify Your Behavior -->
        <div class="move">
            <header>
                <input type="hidden" name="attr_roll_justify_your_behavior" value="&{template:cartel}" />
                <h2> <span>Justify Your Behavior</span> <button type="roll" name="roll_justify_your_behavior" value="@{roll_justify_your_behavior}"></button> </h2>
            </header>
            <main>
                <details class="expandable"><summary>
                    <div data-i18n="justify_your_behavior_html"></div>
                </summary></details>
            </main>
        </div>

        <!-- Propose a Deal -->
        <div class="move">
            <header>
                <input type="hidden" name="attr_roll_propose_a_deal" value="&{template:cartel}" />
                <h2> <span>Propose a Deal</span> <button type="roll" name="roll_propose a deal" value="@{roll_propose_a_deal}"></button> </h2>
            </header>
            <main>
                <details class="expandable"><summary>
                    <div data-i18n="propose_a_deal_html"></div>
                </summary></details>
            </main>
        </div>

        <!-- Push Your Luck -->
        <div class="move">
            <header>
                <input type="hidden" name="attr_roll_push_your_luck" value="&{template:cartel}" />
                <h2> <span>Push Your Luck</span> <button type="roll" name="roll_push_your_luck" value="@{roll_push_your_luck}"></button> </h2>
            </header>
            <main>
                <details class="expandable"><summary>
                    <div data-i18n="push_your_luck_html"></div>
                </summary></details>
            </main>

        </div>

        <!-- Get the Truth -->
        <div class="move">
            <header>
                <input type="hidden" name="attr_roll_get_the_truth" value="&{template:cartel}" />
                <h2> <span>Get the Truth</span> <button type="roll" name="roll_get_the_truth" value="@{roll_get_the_truth}"></button> </h2>
            </header>
            <main>
                <details class="expandable"><summary>
                    <div data-i18n="get_the_truth_html"></div>
                </summary></details>
            </main>
        </div>

        <!-- Pressure Someone -->
        <div class="move">
            <header>
                <input type="hidden" name="attr_roll_pressure_someone" value="&{template:cartel}" />
                <h2><span data-i18n="pressure_someone">pressure someone</span> <button type="roll" name="roll_pressure_someone" value="@{roll_pressure_someone}"></button> </h2>
            </header>
            <main>
                <details class="expandable"><summary>
                    <div data-i18n="pressure_someone_html"></div>
                </summary></details>
            </main>
        </div>

        <!-- Size Someone Up -->
        <div class="move">
            <header>
                <input type="hidden" name="attr_roll_size_someone_up" value="&{template:cartel}" />
                <h2><span data-i18n="size_someone_up">pressure someone</span> <button type="roll" name="roll_size_someone_up" value="@{roll_size_someone_up}"></button> </h2>
            </header>
            <main>
                <details class="expandable"><summary>
                    <div data-i18n="size_someone_up_html"></div>
                </summary></details>
            </main>
        </div>

        <!-- Turn to Violence -->
        <div class="move">
            <header>
                <input type="hidden" name="attr_roll_turn_to_violence" value="&{template:cartel}" />
                <h2><span data-i18n="turn_to_violence">turn to violence</span> <button type="roll" name="roll_turn_to_violence" value="@{roll_turn_to_violence}"></button> </h2>
            </header>
            <main>
                <details class="expandable"><summary>
                    <div data-i18n="turn_to_violence_html"></div>
                </summary></details>
            </main>
        </div>

        <!-- Strain Your Finances -->
        <div class="move">
            <header>
                <input type="hidden" name="attr_roll_strain_your_finances" value="&{template:cartel}" />
                <h2><span data-i18n="strain_your_finances">strain your finances</span> <button type="roll" name="roll_strain_your_finances" value="@{roll_strain_your_finances}"></button> </h2>
            </header>
            <main>
                <details class="expandable"><summary>
                    <div data-i18n="strain_your_finances_html"></div>
                </summary></details>
            </main>
        </div>

        <!-- Help or Interfere -->
        <div class="move">
            <header>
                <input type="hidden" name="attr_roll_help_or_interfere" value="&{template:cartel}" />
                <h2><span data-i18n="help_or_interfere">help or interfere</span> <button type="roll" name="roll_help_or_interfere" value="@{roll_help_or_interfere}"></button> </h2>
            </header>
            <main>
                <details class="expandable"><summary>
                    <div data-i18n="help_or_interfere_html"></div>
                </summary></details>
            </main>
        </div>
    </main>

</div>
<!--
==  end BASIC MOVES  ===========================================================================
-->

<!--
================================================================================================
==  STRESS & HEAT  =============================================================================
================================================================================================
-->
<div class="stress_heatpage tabpage">
    <header>
        <h1 data-i18n="stress & heat moves">stress & heat moves</h1>
    </header>

    <main>
        <h2 data-i18n="stress moves">stress moves</h2>
        <section class="cols2">
            <blockquote data-i18n="stress_moves_description"></blockquote>

            <!-- Verbally Abuse or Shame -->
            <div class="move">
                <input type="hidden" name="attr_roll_verbally_abuse_or_shame" value="&{template:cartel}" />
                <h2>
                    <span data-i18n="verbally_abuse_or_shame">verbally abuse or shame</span>
                    <button type="roll" name="roll_verbally_abuse_or_shame" value="@{roll_verbally_abuse_or_shame}"></button>
                </h2>
                <div data-i18n="verbally_abuse_or_shame_html"></div>
            </div>

            <!-- Confess Your Sins -->
            <div class="move">
                <input type="hidden" name="attr_roll_confess_your_sins" value="&{template:cartel}" />
                <h2>
                    <span data-i18n="confess_your_sins">confess your sins</span>
                    <button type="roll" name="roll_confess_your_sins" value="@{roll_confess_your_sins}"></button>
                </h2>
                <div data-i18n="confess_your_sins_html"></div>
            </div>

            <!-- Dish Out a Beatdown -->
            <div class="move">
                <input type="hidden" name="attr_roll_dish_out_a_beatdown" value="&{template:cartel}" />
                <h2>
                    <span data-i18n="dish_out_a_beatdown">dish out a beatdown</span>
                    <button type="roll" name="roll_dish_out_a_beatdown" value="@{roll_dish_out_a_beatdown}"></button>
                </h2>
                <div data-i18n="dish_out_a_beatdown_html"></div>
            </div>

            <!-- Lose Yourself in a Substance -->
            <div class="move">
                <input type="hidden" name="attr_roll_lose_yourself_in_a_substance" value="&{template:cartel}" />
                <h2>
                    <span data-i18n="lose_yourself_in_a_substance">lose yourself in a substance</span>
                    <button type="roll" name="roll_lose_yourself_in_a_substance" value="@{roll_lose_yourself_in_a_substance}"></button>
                </h2>
                <div data-i18n="lose_yourself_in_a_substance_html"></div>
            </div>

            <!-- drug moves -->
            <blockquote class="drug_moves">
                <h2 data-i18n="drug moves">drug moves</h2>

                <p data-i18n="drug moves description"></p>

                <!-- cocaine -->
                <details>
                    <summary><h3 data-i18n="cocaine">cocaine</h3></summary>
                    <ul>
                        <li data-i18n="cocaine_move1"></li>
                        <li data-i18n="cocaine_move2"></li>
                        <li data-i18n="cocaine_move3"></li>
                    </ul>
                </details>

                <!-- heroin -->
                <details>
                    <summary><h3 data-i18n="heroin">heroin</h3></summary>
                    <ul>
                        <li data-i18n="heroin_move1"></li>
                        <li data-i18n="heroin_move2"></li>
                        <li data-i18n="heroin_move3"></li>
                    </ul>
                </details>

                <!-- crystal meth -->
                <details>
                    <summary><h3 data-i18n="crystal meth">crystal meth</h3></summary>
                    <ul>
                        <li data-i18n="crystal meth_move1"></li>
                        <li data-i18n="crystal meth_move2"></li>
                        <li data-i18n="crystal meth_move3"></li>
                    </ul>
                </details>

                <!-- alcohol -->
                <details>
                    <summary><h3 data-i18n="alcohol">cocaine</h3></summary>
                    <ul>
                        <li data-i18n="alcohol_move1"></li>
                        <li data-i18n="alcohol_move2"></li>
                        <li data-i18n="alcohol_move3"></li>
                    </ul>
                </details>
            </blockquote>
            <!-- end Drug Moves -->

        </section>

        <!-- heat moves -->
        <h2 data-i18n="heat moves">heat moves</h2>
        <section class="heat_moves cols2">
            <div class="move">
                <header>
                    <input type="hidden" name="attr_roll_move_avoid_suspicion" value="1" />
                    <h2>
                        <span data-i18n="avoid_suspicion">avoid suspicion</span>
                        <button type="roll" name="roll_avoid_suspicion" value="@{roll_avoid_suspicion}"></button>
                    </h2>
                </header>
                <main>
                    <details class="expandable"><summary>
                        <div data-i18n="avoid_suspicion_html"></div>
                    </summary></details>
                </main>
            </div>

            <!-- Leave a Messy Crime Scene -->
            <div class="move">
                <header>
                    <input type="hidden" name="attr_roll_move_leave_a_messy_crime_scene" value="1" />
                    <h2>
                        <span data-i18n="leave_a_messy_crime_scene">leave a messy crime scene</span>
                        <button type="roll" name="roll_leave_a_messy_crime_scene" value="@{roll_leave_a_messy_crime_scene}"></button>
                    </h2>
                </header>
                <main>
                    <details class="expandable"><summary>
                        <div data-i18n="leave_a_messy_crime_scene_html"></div>
                    </summary></details>
                </main>
            </div>

            <!-- Flee from los Fedearles -->
            <div class="move">
                <header>
                    <input type="hidden" name="attr_roll_move_flee_from_los_federales" value="1" />
                    <h2>
                        <span data-i18n="flee_from_los_federales">flee from los federales</span>
                        <button type="roll" name="roll_flee_from_los_federales" value="@{roll_flee_from_los_federales}"></button>
                    </h2>
                </header>
                <main>
                    <details class="expandable"><summary>
                        <div data-i18n="flee_from_los_federales_html"></div>
                    </summary></details>
                </main>
            </div>
        </section>

    </main>

</div>
<!-- end tabpage: STRESS/HEAT -->

<!--
================================================================================================
==  NOTES  =====================================================================================
================================================================================================
-->
<div class="notespage tabpage">
    <header>
        <h1 data-i18n="notes">notes</h1>
    </header>

    <main class="cols2">
        <fieldset class="repeating_notes">
            <div class="notes editbox">
                <h3 class="note_title"><span name="attr_note_title"></span></h3>
                <div class="note_text"><span name="attr_note_text"></span></div>

                <details><summary></summary>
                    <input type="text" name="attr_note_title" />
                    <textarea name="attr_note_text"></textarea>
                </details>

            </div>
        </fieldset>
    </main>

</div>
<!-- end tabpage: NOTES -->


</div>
<!-- end div: cartel -->

<!--
================================================================================================
==  SHEET WORKER SCRIPTS  ======================================================================
================================================================================================
-->

<script type="text/worker">

//========================================================================
//==  Load roll queries for universal moves  =============================
on("sheet:opened", function() {
    getStandardMoveRolls();
    getSpecialMoveRolls();
    setStatRolls();
});

    // Most moves follow a standard template 
    function getStandardMoveRolls() {
        const movelist = [ 
            "justify_your_behavior", "propose_a_deal", "push_your_luck", "get_the_truth", "pressure_someone", 
            "size_someone_up", "turn_to_violence",
            "la_familia", "la_plaza",
            "pandilla-get_lost_in_a_substance", "pandilla-dish_out_a_beatdown",
            "verbally_abuse_or_shame", "lose_yourself_in_a_substance", "confess_your_sins", "dish_out_a_beatdown",
            "leave_a_messy_crime_scene", "flee_from_los_federales"
        ];
        const attrlist = {};

        console.log( movelist );

        movelist.forEach( function(move) {
            attrlist[ "roll_" + move ] = "&{template:cartel}" +
              " {{movename= " + getTranslationByKey(move) + " }}" +
              " {{charactername= @{character_name} }}" +
              " {{rollwith= " + getTranslationByKey(move + "_rollwith") + " }}" +
              " {{trigger= " + getTranslationByKey(move + "_trigger") + " }}" +
              " {{hitresult= " + getTranslationByKey(move + "_hitresult") + " }}" + 
              " {{partialresult= " + getTranslationByKey(move + "_partialresult") + " }}" + 
              ( getTranslationByKey(move + "_missresult") ? " {{missresult= " + getTranslationByKey(move + "_missresult") + " }}" : "" ) + 
              " {{result= [[2d6 + @{" + getTranslationByKey(move + "_rollwith") + "}[" + getTranslationByKey(move + "_rollwith") + "] ]] }}";

        });

        setAttrs( attrlist );
    }

    // Other moves need special attention
    function getSpecialMoveRolls() {
        const attrlist = {};        // hold the rolls to assign to attributes

        // Strain Your Finances
        // Help or Interfere
        const movelist = ["strain_your_finances", "help_or_interfere", "avoid_suspicion", "pandilla-strain_your_finances" ];
        movelist.forEach( function(move) {
            attrlist[ "roll_" + move ] = "&{template:cartel}" +
              " {{movename= " + getTranslationByKey(move) + " }}" +
              " {{charactername= @{character_name} }}" +
              " {{rollwith= " + getTranslationByKey(move + "_rollwith") + " }}" +
              " {{trigger= " + getTranslationByKey(move + "_trigger") + " }}" +
              " {{hitresult= " + getTranslationByKey(move + "_hitresult") + " }}" +
              " {{partialresult= " + getTranslationByKey(move + "_partialresult") + " }}" +
              " {{missresult= " + getTranslationByKey(move + "_missresult") + " }}" +
              " {{result= [[2d6 + " + getTranslationByKey(move + "_rollquery") + "[" + getTranslationByKey(move + "_rollwith") + "] ]] }}";
        });

        // Set all the move rolls
        setAttrs( attrlist );
    }

    // set the roll buttons for stats
    function setStatRolls() {
        const attrlist = {}; // hold values to assign to attributes at the end
        const statlist = ["face", "grit", "hustle", "savagery", "heat"];

        statlist.forEach( function(stat) {
            attrlist[ "roll_" + stat ] = "&{template:cartel}" + 
              " {{movename= " + getTranslationByKey(stat) + " }}" + 
              " {{characternamne= @{character_name} }}" + 
              " {{rollwith= " + getTranslationByKey(stat) + " }}" +
              " {{result= [[2d6 + @{" + stat + "}[" + getTranslationByKey(stat) + "] ]] }}"; 
        });

        setAttrs( attrlist );
    }

//========================================================================
//==  Generate the roll query for character moves  =======================
on("change:repeating_charmoves", function() {
    getAttrs(["repeating_charmoves_show_roll_button", "repeating_charmoves_rollwith"], function(values) {
        console.log("generating roll query for character move");
        // if the move does not require a move button, there will be missing fields in the translation.json
        // only bother if a roll button is required
        // if (value.charmoves_show_roll_button) {
            // console.log( "show roll button?", value.charmoves_show_roll_button );
            /* rq will hold the string that will be assigned the @{result} */
            let rq = "&{template:cartel} {{movename= @{movename}}}" +
                     " {{charactername= @{character_name}}}" +
                     " {{trigger= @{trigger}}}" +
                     " {{rollwith= @{rollwith}}}" +
                     " {{hitresult= @{hitresult}}}" +
                     " {{partialresult= @{partialresult}}}" +
                     " {{missresult= @{missresult}}}" +
                     " {{result= [[2d6 + @{" + values.repeating_charmoves_rollwith + "}[" + 
                        values.repeating_charmoves_rollwith + "]]] }}";

            setAttrs( { repeating_charmoves_rollquery: rq } );
        // }

    });

});

//========================================================================
//==  If the move name matches in the translation file, load the defaults 
on("change:repeating_charmoves:movename", function(eventInfo) {
    // check to see if the move is included in the translation file
    let key = eventInfo.newValue.replace(/\ /g , "_"); 
    if ( getTranslationByKey( key ) ) {
        const mlist = {};

        mlist.repeating_charmoves_movedesc = getTranslationByKey( key + "_desc" );
        mlist.repeating_charmoves_show_roll_button = getTranslationByKey( key + "_show_roll_button" );
        mlist.repeating_charmoves_trigger = getTranslationByKey( key + "_trigger" );
        mlist.repeating_charmoves_rollwith = getTranslationByKey( key + "_rollwith" );
        mlist.repeating_charmoves_hitresult = getTranslationByKey( key + "_hitresult" );
        mlist.repeating_charmoves_partialresult = getTranslationByKey( key + "_partialresult" );
        mlist.repeating_charmoves_missresult = getTranslationByKey( key + "_missresult" );

        setAttrs( mlist );
    }
});



//========================================================================
//==  Change Tabs  =======================================================
on("change:tabselected", function(eventInfo) { setAttrs({ showtab:eventInfo.newValue }); });

on("clicked:stats", function() { setAttrs({ showtab: "stats" }); });
on("clicked:character_moves", function() { setAttrs({ showtab: "character_moves" }); });
on("clicked:extras", function() { setAttrs({ showtab: "extras" }); });
on("clicked:basic_moves", function() { setAttrs({ showtab: "basic_moves" }); });
on("clicked:stress_heat", function() { setAttrs({ showtab: "stress_heat" }); });
on("clicked:notes", function() { setAttrs({ showtab: "notes" }); });

//========================================================================
//==  Reset attribute tracks  ============================================
on("clicked:resetstress", function() { setAttrs({ stress:0 }); });
on("clicked:resetadvance", function() { setAttrs({ adv:0 }); });
    

//========================================================================
//==  When playbook changes, load a number of default options  ===========
on("change:playbook", function() {
    updateAdvanceList();
    updatePlaybookRelationships();
    getAttrs(["playbook"], function(values) {
        setAttrs({ playbook_filter: values.playbook });
    });
});

    //========================================================================
    //==  Update Advancement Lists  ==========================================
    function updateAdvanceList() {
        console.log("updateAdvanceList()");

        // get the playbook name
        getAttrs(["playbook"], function(values) {
            let pb = values.playbook.replace(" ", "_"); // remove whitespace to allow for translation lookup
            const alist = {};

            // lookup each advancement list item, and add it to the output object
            for (let i = 1; i <= 13; i++) { 
                alist["adv_text" + i] = getTranslationByKey( pb + "-adv" + i); 
            }

            // set the attributes using the alist object
            setAttrs(alist);
        });
    }

    //========================================================================
    //==  Update relationships based on the playbook  ========================
    function updatePlaybookRelationships() {
        // get the playbook name
        getAttrs(["playbook"], function(values) {
            let pb = values.playbook.replace(" ", "_"); // remove whitespace to allow for translation lookup
            const rlist = {}; // values to pass to setAttrs() later

            // lookup each relationship list item and add it to the output object
            for (let i = 1; i <= 3; i++) {
                rlist["rel_text" + i] = getTranslationByKey(pb + "-rel_text" + i);
            }

            // set the attributes using the rlist object
            setAttrs(rlist); 
        });
        
    }

    // update relationship displays
    on("change:rel_name1 change:rel_text1 change:rel_name2 change:rel_text2 change:rel_name3 change:rel_text3", function() {
        getAttrs(["rel_name1", "rel_text1", "rel_name2", "rel_text2", "rel_name3", "rel_text3"], function(values) {
            const rlist = {};
            // do a simple search & replace for each of the relationships
            for (let i = 1; i <= 3; i++) {
                [ rlist["rel_begin" + i], rlist["rel_end" + i] ] = values["rel_text" + i].split(/\s*_+\s*/);
            }
            
            // set the display attributes 
            setAttrs(rlist);
        });
    });

//========================================================================
//==  Update the key description when a new key is selected  =============
on("change:repeating_llaves:keyname", function(eventInfo) {
    let key = eventInfo.newValue.replace(" ", "_");
    if ( getTranslationByKey( key ) ) {
        setAttrs({ repeating_llaves_keytext: getTranslationByKey( key + "_text" ) });
    }
});



//========================================================================
//==  Update the lifestyle description  ==================================
on("change:lifestyle", function(eventInfo) {
    setAttrs({ lifestyle_description: getTranslationByKey( eventInfo.newValue + "_desc" ) });
});


</script>

<!--
================================================================================================
==  ROLL TEMPLATES  ============================================================================
================================================================================================
-->
<rolltemplate class="sheet-rolltemplate-cartel">
    <div class="sheet-cartel-rollbox">
        <div class="sheet-header">
            <div class="sheet-rolling">
                <b>{{charactername}}</b>
                <span data-i18n="is rolling with">is rolling with</span>
                <b>{{rollwith}}</b>...
            </div>

            <h2>{{movename}}</h2>
        </div>

        <div style="position: relative;">
            {{#trigger}}<div class="sheet-trigger">{{trigger}}</div>{{/trigger}}
            <div class="sheet-result">{{result}}</div>
        </div>

        <div class="sheet-resulttxt">

            <!-- 10+ -->
            {{#rollGreater() result 9}}
                {{#hitresult}}{{hitresult}}{{/hitresult}}
                {{^hitresult}}<span data-i18n="default_hitresult"></span>{{/hitresult}}
            {{/rollGreater() result 9}}

            <!-- 7-9 -->
            {{#rollBetween() result 7 9}}
                {{#partialresult}}{{partialresult}}{{/partialresult}}
                {{^partialresult}}<span data-i18n="default_partialresult"></span>{{/partialresult}}
            {{/rollBetween() result 7 9}}

            <!-- 6- -->
            {{#rollLess() result 7}}
            {{#missresult}}{{missresult}}{{/missresult}}
            {{^missresult}}<span data-i18n="default_missresult"></span>{{/missresult}}
            {{/rollLess() result 7}}
        </div>


    </div>

</rolltemplate>

<div class="sheet-overall-wrapper">

    <div style="text-align: center"><img src="https://66.media.tumblr.com/bd78f65e07304dce89a44c6f375ce207/tumblr_inline_p7oukc79f41vrvilm_540.png" style="height: 70px ; max-height: 100px;" /><br /></div>
    <div class="sheet-section-main">
        <input class="sheet-is-pc" type="radio" name="attr_is_npc" value="1" checked="checked"><span class="sheet-is-pc-tab"></span>
        <input class="sheet-is-npc" type="radio" name="attr_is_npc" value="2"><span class="sheet-is-npc-tab"></span>
        <input class="sheet-is-fc" type="radio" name="attr_is_npc" value="3"><span class="sheet-is-fc-tab"></span>

        <div class="sheet-tabbed sheet-pjtab">
            <h4 class="sheet-center">Personaje Jugador </h4>
            <div class="sheet-row">
                <div class="sheet-col-1-8 sheet-small-label sheet-center"><input class="sheet-underlined sheet-center" type="text" name="attr_class"><br />Clase</div>
                <!-- <div class="sheet-col-1-8 sheet-small-label sheet-center"><input class="sheet-underlined sheet-center" type="text" name="attr_race"><br/>Raza</div>-->
                <div class="sheet-col-1-8 sheet-small-label sheet-center"><input class="sheet-underlined sheet-center" type="text" name="attr_hdchar"><br />Dado de Aguante</div>
                <div class="sheet-col-1-13 sheet-small-label sheet-center"><input class="sheet-underlined sheet-center" type="number" name="attr_xp"><br />XP</div>
                <div class="sheet-col-1-10 sheet-padl">
                    <h4 class="sheet-center">NIVEL</h4>
                    <div class="sheet-row">
                        <div class="sheet-col-1-1 sheet-small-label sheet-center"><input class="sheet-underlined sheet-center" type="number" value="1" style="font-weight: bold;font-size: 15px;" name="attr_level" step="1"><br /></div>
                    </div>
                </div>
                <div class="sheet-col-1-14 sheet-padl">
                    <h4 class="sheet-center">ALMA</h4>
                    <div class="sheet-row">
                        <div class="sheet-col-1-1 sheet-small-label sheet-center"><input class="sheet-underlined sheet-center" type="number" value="0" name="attr_soul" step="1"><br /></div>
                    </div>
                </div>

                <div class="sheet-col-1-2 sheet-padl">
                    <br>
                    <div class="sheet-col-1-3 sheet-padr">
                        <input type="checkbox" style="margin-right:5px" name="attr_creativity" value="1">Falta de creatividad</input>
                    </div>
                    <div class="sheet-col-1-2 sheet-padr">
                        <input type="checkbox" style="margin-right:5px" name="attr_empaty" value="1">Falta de empatía</input>
                    </div>
                    <div class="sheet-col-1-3 sheet-padr">
                        <input type="checkbox" style="margin-right:5px" name="attr_inexperience" value="1">Inexperiencia</input>
                    </div>
                    <div class="sheet-col-1-2 sheet-padr">
                        <input type="checkbox" style="margin-right:5px" name="attr_remember" value="1">Pérdida de recuerdos</input>
                    </div>

                </div>

            </div>
        </div>
        <div class="sheet-tabbed sheet-pnjtab">
            <h4 class="sheet-center">Personaje No Jugador </h4>
        </div>

        <div class="sheet-tabbed sheet-fctab">
            <div class="sheet-row sheet-padb" style="margin-top:10px">
                <div class="sheet-col-1-2 sheet-padr">
                    <textarea class="sheet-small-textarea" name="attr_background">Trasfondos: </textarea>
                </div>
                <div class="sheet-col-1-2 sheet-padr">

                    <div class="sheet-col-2-7 sheet-padr">
                        <h4 class="sheet-center">Puntos de Vida</h4>
                        <div class="sheet-row sheet-padb">
                            <div class="sheet-row">
                                <div class="sheet-col-1-2 sheet-small-label sheet-center"><input class="sheet-underlined" type="number" name="attr_HP" step="1"><br />Max</div>
                                <div class="sheet-col-1-2 sheet-small-label sheet-center"><input class="sheet-underlined" type="number" name="attr_HP_max" min="1" step="1"><br />Actual</div>
                            </div>
                        </div>
                    </div>
                    <div class="sheet-col-2-9 sheet-padl" style="margin-left:-12px">
                        <h4 class="sheet-center">INS</h4>
                        <div class="sheet-row">
                            <div class="sheet-col-1-1 sheet-small-label sheet-center"><input class="sheet-underlined sheet-center" type="number" value="0" name="attr_level" step="1"><br /></div>
                        </div>
                    </div>
                    <div class="sheet-col-1-6 sheet-padl">
                        <h4 class="sheet-center">DEF</h4>
                        <div class="sheet-row">
                            <div class="sheet-col-1-1 sheet-small-label sheet-center"><input class="sheet-underlined sheet-center" type="number" value="10" name="attr_ac" step="1"><br /></div>
                        </div>
                    </div>
                    <div class="sheet-col-1-6 sheet-padl">
                        <button type="roll" class="button-round button-label" value="&{template:default} {{name=Ataque}}  {{resultado=[[?{Modo|Normal, 1d20|Ventaja, 2d20kh1|Desventaja, 2d20kl1} + @{ab} + ?{Modificador adicional|0} + ?{Característica|Fuerza, @{strength_mod}|Destreza,@{dexterity_mod}}]]}}" name="">ATQ</button>
                        <div class="sheet-row">
                            <div class="sheet-col-1-1 sheet-small-label sheet-center"><input class="sheet-underlined sheet-center" type="number" title="Introduce el valor por nivel, sin incluir FUE o DES" value="0" name="attr_ab" step="1"><br /></div>
                        </div>
                    </div>
                    <div class="sheet-col-1-7 sheet-padl">
                        <h4 class="sheet-center">POW</h4>
                        <div class="sheet-row">
                            <div class="sheet-col-1-1 sheet-small-label sheet-center"><input class="sheet-underlined sheet-center" type="number" value="0" name="attr_pod" step="1"><br /></div>
                        </div>
                    </div>

                </div>

            </div>

        </div>

        <div class="sheet-tabbed sheet-pjtab">
            <div class='sheet-2colrow'>

                <div class="sheet-row">
                    <div class="sheet-col-1-3 sheet-padr">
                        <h4 class="sheet-center">Características</h4>
                        <div class="sheet-row sheet-sub-header">
                            <div class="sheet-col-2-9 sheet-center sheet-small-label">Valor</div>
                            <div class="sheet-col-1-3 sheet-center sheet-small-label">&nbsp;</div>
                            <div class="sheet-col-2-9 sheet-center sheet-small-label">Modif.</div>
                            <div class="sheet-col-2-9 sheet-center sheet-small-label">Temp</div>
                        </div>
                        <div class="sheet-row">
                            <div class="sheet-col-2-9"><input type="number" name="attr_strength" min="1" step="1" /></div>
                            <div class="sheet-col-1-3">
                                <button type="roll" class="margin-0 button-label-stat button-label" value="&{template:default} {{name=Fuerza}}  {{resultado=[[?{Modo|Normal, 1d20|Ventaja, 2d20kh1|Desventaja, 2d20kl1} + @{strength_mod} + ?{Modificador adicional|0} + @{strength_temp}]]}}" name="">
                                    FUE
                                </button>
                            </div>
                            <div class="sheet-col-2-9">
                                <input type="number" name="attr_strength_mod" value="0" readonly/>
                            </div>
                            <div class="sheet-col-2-9 sheet-center">
                                <input type="number" name="attr_strength_temp" min="1" step="1" value="0" />
                            </div>
                        </div>
                        <div class="sheet-row">
                            <div class="sheet-col-2-9"><input type="number" name="attr_dexterity" min="1" step="1" /></div>
                            <div class="sheet-col-1-3">
                                <button type="roll" class="margin-0 button-label-stat button-label" value="&{template:default} {{name=Destreza}}  {{resultado=[[?{Modo|Normal, 1d20|Ventaja, 2d20kh1|Desventaja, 2d20kl1} + ?{Modificador adicional|0} + @{dexterity_mod} + @{dexterity_temp}]]}}" name="">
                                    DES
                                </button>
                            </div>
                            <div class="sheet-col-2-9">
                                <input type="number" name="attr_dexterity_mod" value="0" readonly/>
                            </div>
                            <div class="sheet-col-2-9 sheet-center">
                                <input type="number" name="attr_dexterity_temp" min="1" step="1" value="0" />
                            </div>
                        </div>
                        <div class="sheet-row">
                            <div class="sheet-col-2-9"><input type="number" name="attr_constitution" min="1" step="1" /></div>
                            <div class="sheet-col-1-3">
                                <button type="roll" class="margin-0 button-label-stat button-label" value="&{template:default} {{name=Constitución}}  {{resultado=[[?{Modo|Normal, 1d20|Ventaja, 2d20kh1|Desventaja, 2d20kl1} + ?{Modificador adicional|0} + @{constitution_mod} + @{constitution_temp}]]}}" name="">
                                    CON
                                </button>
                            </div>
                            <div class="sheet-col-2-9">
                                <input type="number" name="attr_constitution_mod" value="0" readonly/>
                            </div>
                            <div class="sheet-col-2-9 sheet-center">
                                <input type="number" name="attr_constitution_temp" min="1" step="1" value="0" />
                            </div>
                        </div>
                        <div class="sheet-row">
                            <div class="sheet-col-2-9"><input type="number" name="attr_intelligence" min="1" step="1" /></div>
                           <div class="sheet-col-1-3">
                                <button type="roll" class="margin-0 button-label-stat button-label" value="&{template:default} {{name=Inteligencia}}  {{resultado=[[?{Modo|Normal, 1d20|Ventaja, 2d20kh1|Desventaja, 2d20kl1} + ?{Modificador adicional|0} + @{intelligence_mod} + @{intelligence_temp}]]}}" name="">
                                    INT
                                </button>
                            </div>
                            <div class="sheet-col-2-9">
                                <input type="number" name="attr_intelligence_mod" value="0" readonly/>
                            </div>
                            <div class="sheet-col-2-9 sheet-center">
                                <input type="number" name="attr_intelligence_temp" min="1" step="1" value="0" />
                            </div>
                        </div>
                        <div class="sheet-row">
                            <div class="sheet-col-2-9"><input type="number" name="attr_wisdom" min="1" step="1" /></div>
                            <div class="sheet-col-1-3">
                                <button type="roll" class="margin-0 button-label-stat button-label" value="&{template:default} {{name=Sabiduría}}  {{resultado=[[?{Modo|Normal, 1d20|Ventaja, 2d20kh1|Desventaja, 2d20kl1} + ?{Modificador adicional|0} + @{wisdom_mod} + @{wisdom_temp}]]}}" name="">
                                    SAB
                                </button>
                            </div>
                            <div class="sheet-col-2-9">
                                <input type="number" name="attr_wisdom_mod" value="0" readonly/>
                            </div>
                            <div class="sheet-col-2-9 sheet-center">
                                <input type="number" name="attr_wisdom_temp" min="1" step="1" value="0" />
                            </div>
                        </div>
                        <div class="sheet-row">
                            <div class="sheet-col-2-9"><input type="number" name="attr_charisma" min="1" step="1" /></div>
                            <div class="sheet-col-1-3">
                                <button type="roll" class="margin-0 button-label-stat button-label" value="&{template:default} {{name=Carisma}}  {{resultado=[[?{Modo|Normal, 1d20|Ventaja, 2d20kh1|Desventaja, 2d20kl1} + ?{Modificador adicional|0} + @{charisma_mod} + @{charisma_temp}]]}}" name="">
                                    CAR
                                </button>
                            </div>
                            <div class="sheet-col-2-9">
                                <input type="number" name="attr_charisma_mod" value="0" readonly/>
                            </div>
                            <div class="sheet-col-2-9 sheet-center">
                                <input type="number" name="attr_charisma_temp" min="1" step="1" value="0" />
                            </div>

                        </div>

                    </div>

                    <div class="sheet-col-2-9 sheet-padr">
                        <h4 class="sheet-center">Habilidades</h4>
                        <div class="sheet-row sheet-sub-header">
                            <div class="sheet-col-9-13 sheet-center sheet-small-label">Hab.</div>
                            <div class="sheet-col-1-13 sheet-center sheet-small-label">&nbsp;</div>
                            <div class="sheet-col-3-13 sheet-center sheet-small-label">Puntos</div>
                        </div>
                        <div class="sheet-row">
                            <div class="sheet-col-9-13 sheet-med-label">
                                <button type="roll" class="button-label button-label-skill " value="&{template:default} {{name=Corporate}}  {{resultado=[[?{Modo|Normal, 1d20|Ventaja, 2d20kh1|Desventaja, 2d20kl1}  + ?{Modificador adicional|0} +  @{corporate}]]}}" name="">
                                    Corporate
                                </button>
                            </div>
                            <div class="sheet-col-1-13 sheet-center sheet-small-label"></div>
                            <div class="sheet-col-3-13"><input type="number" name="attr_corporate" value="0" min="0" step="1" /></div>
                        </div>
                        <div class="sheet-row">
                            <div class="sheet-col-9-13 sheet-med-label">
                                <button type="roll" class="button-label button-label-skill " value="&{template:default} {{name=Cyber}}  {{resultado=[[?{Modo|Normal, 1d20|Ventaja, 2d20kh1|Desventaja, 2d20kl1}  + ?{Modificador adicional|0} +  @{cyber}]]}}" name="">
                                    Cyber
                                </button>
                            </div>
                            <div class="sheet-col-1-13 sheet-center sheet-small-label"></div>
                            <div class="sheet-col-3-13"><input type="number" name="attr_cyber" value="0" min="0" step="1" /></div>
                        </div>
                        <div class="sheet-row">
                            <div class="sheet-col-9-13 sheet-med-label">
                                <button type="roll" class="button-label button-label-skill " value="&{template:default} {{name=Hardware}}  {{resultado=[[?{Modo|Normal, 1d20|Ventaja, 2d20kh1|Desventaja, 2d20kl1} + ?{Modificador adicional|0} + @{hardware}]]}}" name="">
                                    Hardware
                                </button>
                            </div>
                            <div class="sheet-col-1-13 sheet-center sheet-small-label"></div>
                            <div class="sheet-col-3-13"><input type="number" name="attr_hardware" value="0" min="0" step="1" /></div>
                        </div>
                        <div class="sheet-row">
                            <div class="sheet-col-9-13 sheet-med-label">
                                <button type="roll" class="button-label button-label-skill " value="&{template:default} {{name=Punk}}  {{resultado=[[?{Modo|Normal, 1d20|Ventaja, 2d20kh1|Desventaja, 2d20kl1} + ?{Modificador adicional|0} + @{punk}]]}}" name="">
                                    Punk
                                </button>
                            </div>
                            <div class="sheet-col-1-13 sheet-center sheet-small-label"></div>
                            <div class="sheet-col-3-13"><input type="number" name="attr_punk" value="0" min="0" step="1" /></div>
                        </div>
                        <div class="sheet-row">
                            <div class="sheet-col-9-13 sheet-med-label">
                                <button type="roll" class="button-label button-label-skill " value="&{template:default} {{name=Savage}}  {{resultado=[[?{Modo|Normal, 1d20|Ventaja, 2d20kh1|Desventaja, 2d20kl1} + ?{Modificador adicional|0} + @{savage}]]}}" name="">
                                    Savage
                                </button>
                            </div>
                            <div class="sheet-col-1-13 sheet-center sheet-small-label"></div>
                            <div class="sheet-col-3-13"><input type="number" name="attr_savage" value="0" min="0" step="1" /></div>
                        </div>
                        <div class="sheet-row">
                            <div class="sheet-col-9-13 sheet-med-label">
                                <button type="roll" class="button-label button-label-skill " value="&{template:default} {{name=Urban}}  {{resultado=[[?{Modo|Normal, 1d20|Ventaja, 2d20kh1|Desventaja, 2d20kl1} + ?{Modificador adicional|0} + @{urban}]]}}" name="">
                                    Urban
                                </button>
                            </div>
                            <div class="sheet-col-1-13 sheet-center sheet-small-label"></div>
                            <div class="sheet-col-3-13"><input type="number" name="attr_urban" value="0" min="0" step="1" /></div>
                        </div>
                    </div>


                    <!--Saving Throws and Experience-->
                    <div class="sheet-col-4-9 sheet-padr">


                        <div class="sheet-col-1-2" style="margin-left: -4px">
                            <h4 class="sheet-center">Talentos</h4>
                            <div class="sheet-row">
                                <textarea name="attr_talents"></textarea>
                            </div>
                        </div>
                        <div class="sheet-col-1-2">
                            <h4 class="sheet-center">Equipo</h4>
                            <div class="sheet-row">
                                <textarea name="attr_equip">Bityens:</textarea>
                            </div>
                        </div>
                        <div class="sheet-col-1-2" style="margin-left: -4px">
                            <h4 class="sheet-center">Implantes</h4>
                            <div class="sheet-row">
                                <textarea name="attr_implant"></textarea>
                            </div>
                        </div>
                        <div class="sheet-col-1-2">
                            <h4 class="sheet-center">Programas</h4>
                            <div class="sheet-row">
                                <textarea name="attr_programme"></textarea>
                            </div>
                        </div>

                    </div>

                </div>
            </div>
            <span class="sheet-spacer"></span>


        </div>

        <span class="sheet-spacer"></span>
    </div>


    <span class="sheet-spacer"></span>
    <h4 class="sheet-center">Ataques </h4>
    <div class="sheet-row sheet-sub-header">

        <div class="sheet-col-1-4 sheet-center sheet-small-label sheet-vert-bottom">Arma</div>
        <div class="sheet-col-1-9 sheet-center sheet-small-label sheet-vert-bottom sheet-padr">Tipo</div>
        <div class="sheet-col-1-12 sheet-center sheet-small-label sheet-vert-bottom sheet-padr">Bonos</div>
        <div class="sheet-col-1-12 sheet-center sheet-small-label sheet-vert-bottom">TT</div>
        <div class="sheet-col-1-12 sheet-center sheet-small-label sheet-vert-bottom">RF</div>
        <div class="sheet-col-1-12 sheet-center sheet-small-label sheet-vert-bottom">FA</div>
        <div class="sheet-col-1-12 sheet-center sheet-small-label sheet-vert-bottom">ALC</div>
        <div class="sheet-col-1-12 sheet-center sheet-small-label sheet-vert-bottom">MUN</div>
        <div class="sheet-col-1-12 sheet-center sheet-small-label sheet-vert-bottom">Cargadores</div>
    </div>

    <fieldset class="repeating_attacks">
        <div class="sheet-row">
            <div class="sheet-col-1-4 sheet-padr"><input type="text" name="attr_weaponname"></div>
            <div class="sheet-col-1-9 sheet-padr">
                <select name="attr_weapontype">
                    <option value="1">CaC</option>
                    <option value="0">Distancia</option>
                </select>
            </div>
            <div class="sheet-col-1-12 sheet-padr"><input class="sheet-center" type="number" name="attr_attackbonus" value="0" step="1"></div>
            <div class="sheet-col-1-12 sheet-padr"><input class="sheet-center" type="text" name="attr_tt" value="-"></div>
            <div class="sheet-col-1-12 sheet-padr"><input class="sheet-center" type="text" name="attr_rf" value="-"></div>
            <div class="sheet-col-1-12 sheet-padr"><input class="sheet-center" type="text" name="attr_fa" value="-"></div>
            <div class="sheet-col-1-12 sheet-padr"><input class="sheet-center" type="number" name="attr_alc" value="0" step="5"></div>
            <div class="sheet-col-1-12 sheet-padr"><input class="sheet-center" type="number" name="attr_mun" value="0"></div>
            <div class="sheet-col-1-12 sheet-padr"><input class="sheet-center" type="number" name="attr_carg" value="0"></div>
        </div>
    </fieldset>
    <span class="sheet-spacer"></span>

    <h4 class="sheet-center">Notas </h4>
    <div class="sheet-col-1-1 sheet-padr">
        <textarea class="sheet-small-textarea" style="height: 200px" name="attr_notes"></textarea>
    </div>

</div>


<script type="text/worker">
    // <!-- Modificadores -->
	function StatMod(stat) {
		let mod = 0;
		if (stat <= 3) {
			mod = -3;
	  	} else if (stat <= 6) {
		 	mod = -2;
	  	} else if (stat <= 8) {
		  	mod = -1;
	  	} else if (stat <= 12) {
		  	mod = 0;
	  	} else if (stat <= 15) {
		  	mod = 1;
	  	} else if (stat <= 17) {
		  	mod = 2;
		} else if (stat >= 5) {
			mod = 3;
	  }
	  return mod;  
	};
	
	const stats = ['strength','dexterity','constitution','intelligence','wisdom','charisma'];
	stats.forEach(stat => {
		on(`change:${stat} sheet:opened`, () => {
			getAttrs([stat], values => {
				const stat_score = parseInt(values[stat], 10)||0;
				const stat_modifier = StatMod(stat_score);
				setAttrs({
					[`${stat}_mod`]: stat_modifier 
				});
			});
		});
	});
    
</script>





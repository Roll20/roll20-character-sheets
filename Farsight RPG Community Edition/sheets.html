<div class="sheet-main">
    
    <input type="hidden" class="sheet-templatetoggle" name="attr_sheetTemplate" value="pg" />
    <div class="template">
        <div class="templateButtons">
            <button data-i18n="pg-button" type="action" name="act_pg" class="sheet-buttonpg btn">Personaggio</button>
            <button data-i18n="npc-button" type="action" name="act_npc" class="sheet-buttonnpc btn">NPC</button>
            <button data-i18n="vehicle-button" type="action" name="act_vehicle" class="sheet-buttonvehicle btn">Veicolo</button>
            <button data-i18n="ship-button" type="action" name="act_ship" class="sheet-buttonship btn">Nave</button>
        </div>
    </div>

    <rolltemplate class="sheet-rolltemplate-base">
        {{#name}}<div class="sheet-template-title">{{name}}</div>{{/name}}
        <div class="sheet-rolls">
           {{#allprops()}}
              <div class="sheet-roll-title">{{key}}</div>
              <div class="sheet-roll-result">{{value}}</div>
           {{/allprops()}}
        </div>
        {{#desc}}<div class="sheet-desc">{{desc}}</div>{{/desc}}
     </rolltemplate>
    

    <div class="pgsheet">
        <div class="pg">
            <div class="sheet-header section">
            </div>
            <div class="sheet-shortbio section">
                
                <input data-i18n-placeholder="nome-placeholder" class="nome" name="attr_nome" type="text" placeholder="Nome del Personaggio">
                
                <input data-i18n-placeholder="giocatore-placeholder" class="giocatore" name="attr_giocatore" type="text" placeholder="Giocatore">
                
                <input data-i18n-placeholder="concetto-placeholder" class="concetto" name="attr_concetto" type="text" placeholder="Concetto del Personaggio">
                
                <input data-i18n-placeholder="specie-placeholder" class="specie" name="attr_specie" type="text" placeholder="Specie">

                <!--<input data-i18n-placeholder="classelivello-placeholder" class="classelivello" name="attr_classelivello" type="text" placeholder="Classe e Livello">-->
                <div class="classelivello">
                    <select class="classe" name="attr_classe">
                        <option value="15">Delta</option>
                        <option value="13">Sigma</option>
                        <option value="11">Psi</option>
                    </select>

                    <input data-i18n-placeholder="livello-placeholder" class="livello" name="attr_livello" type="number">
                </div>
            </div>

            <input type="hidden" class="sheet-tabstoggle" name="attr_sheetTab" value="character" />
            <div class="tabs">
                <button data-i18n="personaggio-button" type="action" name="act_character" class="sheet-button0 btn">Personaggio</button>
                <button data-i18n="poteri-button" type="action" name="act_powers" class="sheet-button1 btn">Poteri</button>
                <button data-i18n="inventariobio-button" type="action" name="act_biography" class="sheet-button2 btn">Biografia e Inventario</button>
            </div>

            <div class="sheet-character">
                <div class="character">

                    <div class="sheet-skill section">

                        <label data-i18n="abilità-label" class="titolosezione">Abilità</label>

                        <!--COMBATTIVITA'-->
                    
                        <div class="sheet-main-skill">
                            <input class="main-skill esagono" name="attr_combattività" type="number" value="">
                            <button data-i18n="combattività-label" class="main-skill" name="roll_combattività" type="roll" value="&{template:base} {{name=^{combattività-label} }} {{^{personaggio-label}=@{nome} }} {{^{risultato-label}=[[2d12+(@{combattività})]]}}">Combattività</button>
                            <label class="skill-tot">TOT</label>
                        </div>
                        
                        <div class="sheet-sub-skill">
                            <button data-i18n="armibianche-label" class="sub-skill" name="roll_armibianche" type="roll" value="&{template:base} {{name=^{armibianche-label}}} {{^{personaggio-label}=@{nome} }} {{^{risultato-label}=[[2d12+(@{tot_armibianche})]]}}">Armi Bianche</button>
                            <input class="sub-skill" name="attr_armibianche" type="number" value="">
                            <input readonly class="tot-sub-skill" name="attr_tot_armibianche" type="number" value="" readonly>

                        </div>
                            
                        <div class="sheet-sub-skill">
                            <button data-i18n="armicinetiche-label" class="sub-skill" name="roll_armicinetiche" type="roll" value="&{template:base} {{name=^{armicinetiche-label} }} {{^{personaggio-label}=@{nome} }} {{^{risultato-label}=[[2d12+(tot_armicinetiche)]]}}">Armi Cinetiche</button>
                            <input class="sub-skill" name="attr_armicinetiche" type="number" value="">
                            <input readonly class="tot-sub-skill" name="attr_tot_armicinetiche" type="number" value="">
                        </div>
                            
                        <div class="sheet-sub-skill">
                            <button data-i18n="armienergetiche-label" class="sub-skill" name="roll_armienergetiche" type="roll" value="&{template:base} {{name=^{armienergetiche-label} }} {{^{personaggio-label}=@{nome} }} {{^{risultato-label}=[[2d12+(tot_armienergetiche)]]}}">Armi Energetiche</button>
                            <input class="sub-skill" name="attr_armienergetiche" type="number" value="">
                            <input readonly class="tot-sub-skill" name="attr_tot_armienergetiche" type="number" value="" >
                        </div>
                            
                        <div class="sheet-sub-skill">
                            <button data-i18n="arminaturali-label" class="sub-skill" name="roll_arminaturali" type="roll" value="&{template:base} {{name=^{arminaturali-label} }} {{^{personaggio-label}=@{nome} }} {{^{risultato-label}=[[2d12+(@{tot_arminaturali})]]}}">Armi Naturali</button>
                            <input class="sub-skill" name="attr_arminaturali" type="number" value="">
                            <input readonly class="tot-sub-skill" name="attr_tot_arminaturali" type="number" value="" >
                        </div>
                            
                        <div class="sheet-sub-skill">
                            <button data-i18n="artiglieria-label" class="sub-skill" name="roll_artiglieria" type="roll" value="&{template:base} {{name=^{artiglieria-label} }} {{^{personaggio-label}=@{nome} }} {{^{risultato-label}=[[2d12+(@{tot_artiglieria})]]}}">Artiglieria</button>
                            <input class="sub-skill" name="attr_artiglieria" type="number" value="">
                            <input readonly class="tot-sub-skill" name="attr_tot_artiglieria" type="number" value="" >
                        </div>
                            
                        <div class="sheet-sub-skill">
                            <button data-i18n="lanciare-label" class="sub-skill" name="roll_lanciare" type="roll" value="&{template:base} {{name=^{lanciare-label} }} {{^{personaggio-label}=@{nome} }} {{^{risultato-label}=[[2d12+(@{tot_lanciare})]]}}">Lanciare</button>
                            <input class="sub-skill" name="attr_lanciare" type="number" value="">
                            <input readonly class="tot-sub-skill" name="attr_tot_lanciare" type="number" value="" >
                        </div>
                            
                        <div class="sheet-sub-skill">
                            <button data-i18n="lottare-label" class="sub-skill" name="roll_lottare" type="roll" value="&{template:base} {{name=^{lottare-label}}} {{^{personaggio-label}=@{nome} }} {{^{risultato-label}=[[2d12+(@{tot_lottare})]]}}">Lottare</button>
                            <input class="sub-skill" name="attr_lottare" type="number" value="">
                            <input readonly class="tot-sub-skill" name="attr_tot_lottare" type="number" value="" >
                        </div>

                        <!--ROBUSTEZZA-->
                        
                        <div class="sheet-main-skill">
                            <input class="main-skill esagono" name="attr_robustezza" type="number" value="">
                            <button data-i18n="robustezza-label" class="main-skill" name="roll_robustezza" type="roll" value="&{template:base} {{name=^{robustezza-label} }} {{^{personaggio-label}=@{nome} }} {{^{risultato-label}=[[2d12+(@{robustezza})]]}}">Robustezza</button>
                        </div>
                        
                        <div class="sheet-sub-skill">
                            <button data-i18n="atletica-label" class="sub-skill" name="roll_atletica" type="roll" value="&{template:base} {{name=^{atletica-label} }} {{^{personaggio-label}=@{nome} }} {{^{risultato-label}=[[2d12+(@{tot_atletica})]]}}">Atletica</button>
                            <input class="sub-skill" name="attr_atletica" type="number"value="">
                            <input readonly class="tot-sub-skill" name="attr_tot_atletica" type="number" value="" >
                        </div>
                        
                        <div class="sheet-sub-skill">
                            <button data-i18n="forza-label" class="sub-skill" name="roll_forza" type="roll" value="&{template:base} {{name=^{forza-label} }} {{^{personaggio-label}=@{nome} }} {{^{risultato-label}=[[2d12+(@{tot_forza})]]}}">Forza</button>
                            <input class="sub-skill" name="attr_forza" type="number" value="">
                            <input readonly class="tot-sub-skill" name="attr_tot_forza" type="number" value="" >
                        </div>
                        
                        <div class="sheet-sub-skill">
                            <button data-i18n="g-zero-label" class="sub-skill" name="roll_g-zero" type="roll" value="&{template:base} {{name=^{g-zero-label} }} {{^{personaggio-label}=@{nome} }} {{^{risultato-label}=[[2d12+(@{tot_g-zero})]]}}">G-Zero</button>
                            <input class="sub-skill" name="attr_g-zero" type="number" value="">
                            <input readonly class="tot-sub-skill" name="attr_tot_g-zero" type="number" value="" >
                        </div>
                        
                        <div class="sheet-sub-skill">
                            <button data-i18n="nuotare-label" class="sub-skill" name="roll_nuotare" type="roll" value="&{template:base} {{name=^{nuotare-label} }} {{^{personaggio-label}=@{nome} }} {{^{risultato-label}=[[2d12+(@{tot_nuotare})]]}}">Nuotare</button>
                            <input class="sub-skill" name="attr_nuotare" type="number" value="">
                            <input readonly class="tot-sub-skill" name="attr_tot_nuotare" type="number" value="" >
                        </div>
                        
                        <div class="sheet-sub-skill">
                            <button data-i18n="scalare-label" class="sub-skill" name="roll_scalare" type="roll" value="&{template:base} {{name=^{scalare-label} }} {{^{personaggio-label}=@{nome} }} {{^{risultato-label}=[[2d12+(@{tot_scalare})]]}}">Scalare</button>
                            <input class="sub-skill" name="attr_scalare" type="number" value="">
                            <input readonly class="tot-sub-skill" name="attr_tot_scalare" type="number" value="" >
                        </div>
                        
                        <div class="sheet-sub-skill">
                            <button data-i18n="tempra-label" class="sub-skill" name="roll_tempra" type="roll" value="&{template:base} {{name=^{tempra-label} }} {{^{personaggio-label}=@{nome} }} {{^{risultato-label}=[[2d12+(@{tot_tempra})]]}}">Tempra</button>
                            <input class="sub-skill" name="attr_tempra" type="number" value="">
                            <input readonly class="tot-sub-skill" name="attr_tot_tempra" type="number" value="" >
                        </div>

                        <!--DESTREZZA-->
                        
                        <div class="sheet-main-skill">
                            <input class="main-skill esagono" name="attr_destrezza" type="number" value="">
                            <button data-i18n="destrezza-label" class="main-skill" name="roll_destrezza" type="roll" value="&{template:base} {{name=^{destrezza-label} }} {{^{personaggio-label}=@{nome} }} {{^{risultato-label}=[[2d12+(@{destrezza})]]}}">Destrezza</button>
                        </div>
                        
                        <div class="sheet-sub-skill">
                            <button data-i18n="acrobazia-label" class="sub-skill" name="roll_acrobazia" type="roll" value="&{template:base} {{name=^{acrobazia-label} }} {{^{personaggio-label}=@{nome} }} {{^{risultato-label}=[[2d12+(@{tot_acrobazia})]]}}">Acrobazia</button>
                            <input class="sub-skill" name="attr_acrobazia" type="number" value="">
                            <input readonly class="tot-sub-skill" name="attr_tot_acrobazia" type="number" value="" >
                        </div>
                        
                        <div class="sheet-sub-skill">
                            <button data-i18n="cavalcare-label" class="sub-skill" name="roll_cavalcare" type="roll" value="&{template:base} {{name=^{cavalcare-label} }} {{^{personaggio-label}=@{nome} }} {{^{risultato-label}=[[2d12+(@{tot_cavalcare})]]}}">Cavalcare</button>
                            <input class="sub-skill" name="attr_cavalcare" type="number" value="">
                            <input readonly class="tot-sub-skill" name="attr_tot_cavalcare" type="number" value="" >
                        </div>
                        
                        <div class="sheet-sub-skill">
                            <button data-i18n="danza-label" class="sub-skill" name="roll_danza" type="roll" value="&{template:base} {{name=^{danza-label} }} {{^{personaggio-label}=@{nome} }} {{^{risultato-label}=[[2d12+(@{tot_danza})]]}}">Danza</button>
                            <input class="sub-skill" name="attr_danza" type="number" value="">
                            <input readonly class="tot-sub-skill" name="attr_tot_danza" type="number" value="" >
                        </div>
                        
                        <div class="sheet-sub-skill">
                            <button data-i18n="furtività-label" class="sub-skill" name="roll_furtività" type="roll" value="&{template:base} {{name=^{furtività-label} }} {{^{personaggio-label}=@{nome} }} {{^{risultato-label}=[[2d12+(@{tot_furtività})]]}}">Fortività</button>
                            <input class="sub-skill" name="attr_furtività" type="number" value="">
                            <input readonly class="tot-sub-skill" name="attr_tot_furtività" type="number" value="" >
                        </div>
                        
                        <div class="sheet-sub-skill">
                            <button data-i18n="manolesta-label" class="sub-skill" name="roll_manolesta" type="roll" value="&{template:base} {{name=^{manolesta-label} }} {{^{personaggio-label}=@{nome} }} {{^{risultato-label}=[[2d12+(@{tot_manolesta})]]}}">Manolesta</button>
                            <input class="sub-skill" name="attr_manolesta" type="number" value="">
                            <input readonly class="tot-sub-skill" name="attr_tot_manolesta" type="number" value="" >
                        </div>
                        
                        <div class="sheet-sub-skill">
                            <button data-i18n="pilotare-label" class="sub-skill" name="roll_pilotare" type="roll" value="&{template:base} {{name=^{pilotare-label} }} {{^{personaggio-label}=@{nome} }} {{^{risultato-label}=[[2d12+(@{tot_pilotare})]]}}">Pilotare</button>
                            <input class="sub-skill" name="attr_pilotare" type="number" value="">
                            <input readonly class="tot-sub-skill" name="attr_tot_pilotare" type="number" value="" >
                        </div>
                        
                        <div class="sheet-sub-skill">
                            <button data-i18n="riflessi-label" class="sub-skill" name="roll_riflessi" type="roll" value="&{template:base} {{name=^{riflessi-label} }} {{^{personaggio-label}=@{nome} }} {{^{risultato-label}=[[2d12+(@{tot_riflessi})]]}}">Riflessi</button>
                            <input class="sub-skill" name="attr_riflessi" type="number"value="">
                            <input readonly class="tot-sub-skill" name="attr_tot_riflessi" type="number" value="" >
                        </div>

                        <!-- PERCEZIONE -->
                        
                        <div class="sheet-main-skill">
                            <input class="main-skill esagono" name="attr_percezione" type="number" value="">
                            <button data-i18n="percezione-label" class="main-skill" name="roll_percezione" type="roll" value="&{template:base} {{name=^{percezione-label} }} {{^{personaggio-label}=@{nome} }} {{^{risultato-label}=[[2d12+(@{percezione})]]}}">Percezione</button>
                        </div>
                        
                        <div class="sheet-sub-skill">
                            <button data-i18n="allerta-label" class="sub-skill" name="roll_allerta" type="roll" value="&{template:base} {{name=^{allerta-label} }} {{^{personaggio-label}=@{nome} }} {{^{risultato-label}=[[2d12+(@{tot_allerta})]]}}">Allerta</button>
                            <input class="sub-skill" name="attr_allerta" type="number" value="">
                            <input readonly class="tot-sub-skill" name="attr_tot_allerta" type="number" value="" >
                        </div>
                        
                        <div class="sheet-sub-skill">
                            <button data-i18n="arti-visive-label" class="sub-skill" name="roll_arti-visive" type="roll" value="&{template:base} {{name=^{arti-visive-label} }} {{^{personaggio-label}=@{nome} }} {{^{risultato-label}=[[2d12+(@{tot_arti-visive})]]}}">Arti Visive</button>
                            <input class="sub-skill" name="attr_arti-visive" type="number" value="">
                            <input readonly class="tot-sub-skill" name="attr_tot_arti-visive" type="number" value="" >
                        </div>
                        
                        <div class="sheet-sub-skill">
                            <button data-i18n="intuito-label" class="sub-skill" name="roll_intuito" type="roll" value="&{template:base} {{name=^{intuito-label} }} {{^{personaggio-label}=@{nome} }} {{^{risultato-label}=[[2d12+(@{tot_intuito})]]}}">Intuito</button>
                            <input class="sub-skill" name="attr_intuito" type="number" value="">
                            <input readonly class="tot-sub-skill" name="attr_tot_intuito" type="number" value="" >
                        </div>
                        
                        <div class="sheet-sub-skill">
                            <button data-i18n="ispezionare-label" class="sub-skill" name="roll_ispezionare" type="roll" value="&{template:base} {{name=^{ispezionare-label} }} {{^{personaggio-label}=@{nome} }} {{^{risultato-label}=[[2d12+(@{tot_ispezionare})]]}}">Ispezionare</button>
                            <input class="sub-skill" name="attr_ispezionare" type="number" value="">
                            <input readonly class="tot-sub-skill" name="attr_tot_ispezionare" type="number" value="" >
                        </div>
                        
                        <div class="sheet-sub-skill">
                            <button data-i18n="musica-label" class="sub-skill" name="roll_musica" type="roll" value="&{template:base} {{name=^{musica-label} }} {{^{personaggio-label}=@{nome} }} {{^{risultato-label}=[[2d12+(@{tot_musica})]]}}">Musica</button>
                            <input class="sub-skill" name="attr_musica" type="number" value="">
                            <input readonly class="tot-sub-skill" name="attr_tot_musica" type="number" value="" >
                        </div>
                        
                        <div class="sheet-sub-skill">
                            <button data-i18n="sopravvivenza-label" class="sub-skill" name="roll_sopravvivenza" type="roll" value="&{template:base} {{name=^{sopravvivenza-label} }} {{^{personaggio-label}=@{nome} }} {{^{risultato-label}=[[2d12+(@{tot_sopravvivenza})]]}}">Sopravvivenza</button>
                            <input class="sub-skill" name="attr_sopravvivenza" type="number" value="">
                            <input readonly class="tot-sub-skill" name="attr_tot_sopravvivenza" type="number" value="" >
                        </div> 
                        
                        
                        <!-- INTELLIGENZA -->
                        
                        <div class="sheet-main-skill">
                            <input class="main-skill esagono" name="attr_intelligenza" type="number" value="">
                            <button data-i18n="intelligenza-label" class="main-skill" name="roll_intelligenza" type="roll" value="&{template:base} {{name=^{intelligenza-label} }} {{^{personaggio-label}=@{nome} }} {{^{risultato-label}=[[2d12+(@{intelligenza})]]}}">Intelligenza</button>
                        </div>
                        
                        <div class="sheet-sub-skill">
                            <button data-i18n="arti-belliche-label" class="sub-skill" name="roll_arti-belliche" type="roll" value="&{template:base} {{name=^{arti-belliche-label} }} {{^{personaggio-label}=@{nome} }} {{^{risultato-label}=[[2d12+(@{tot_arti-belliche})]]}}">Arti Belliche</button>
                            <input class="sub-skill" name="attr_arti-belliche" type="number" value="">
                            <input readonly class="tot-sub-skill" name="attr_tot_arti-belliche" type="number" value="" >
                        </div>
                        
                        <div class="sheet-sub-skill">
                            <button data-i18n="erudizione-label" class="sub-skill" name="roll_erudizione" type="roll" value="&{template:base} {{name=^{erudizione-label} }} {{^{personaggio-label}=@{nome} }} {{^{risultato-label}=[[2d12+(@{tot_erudizione})]]}}">Erudizione</button>
                            <input class="sub-skill" name="attr_erudizione" type="number" value="">
                            <input readonly class="tot-sub-skill" name="attr_tot_erudizione" type="number" value="" >
                        </div>
                        
                        <div class="sheet-sub-skill">
                            <button data-i18n="lucidità-label" class="sub-skill" name="roll_lucidità" type="roll" value="&{template:base} {{name=^{lucidità-label} }} {{^{personaggio-label}=@{nome} }} {{^{risultato-label}=[[2d12+(@{tot_lucidità})]]}}">Lucidità</button>
                            <input class="sub-skill" name="attr_lucidità" type="number" value="">
                            <input readonly class="tot-sub-skill" name="attr_tot_lucidità" type="number" value="" >
                        </div>
                        
                        <div class="sheet-sub-skill">
                            <button data-i18n="medicina-label" class="sub-skill" name="roll_medicina" type="roll" value="&{template:base} {{name=^{medicina-label} }} {{^{personaggio-label}=@{nome} }} {{^{risultato-label}=[[2d12+(@{tot_medicina})]]}}">Medicina</button>
                            <input class="sub-skill" name="attr_medicina" type="number" value="">
                            <input readonly class="tot-sub-skill" name="attr_tot_medicina" type="number" value="" >
                        </div>
                        
                        <div class="sheet-sub-skill">
                            <button data-i18n="natura-label" class="sub-skill" name="roll_natura" type="roll" value="&{template:base} {{name=^{natura-label} }} {{^{personaggio-label}=@{nome} }} {{^{risultato-label}=[[2d12+(@{tot_natura})]]}}">Natura</button>
                            <input class="sub-skill" name="attr_natura" type="number" value="">
                            <input readonly class="tot-sub-skill" name="attr_tot_natura" type="number" value="" >
                        </div>
                        
                        <div class="sheet-sub-skill">
                            <button data-i18n="psicopotere-label" class="sub-skill" name="roll_psicopotere" type="roll" value="&{template:base} {{name=^{psicopotere-label} }} {{^{personaggio-label}=@{nome} }} {{^{risultato-label}=[[2d12+(@{tot_psicopotere})]]}}">Psicopotere</button>
                            <input class="sub-skill" name="attr_psicopotere" type="number" value="">
                            <input readonly class="tot-sub-skill" name="attr_tot_psicopotere" type="number" value="" >
                        </div>
                        
                        <div class="sheet-sub-skill">
                            <button data-i18n="scienza-label" class="sub-skill" name="roll_scienza" type="roll" value="&{template:base} {{name=^{scienza-label} }} {{^{personaggio-label}=@{nome} }} {{^{risultato-label}=[[2d12+(@{tot_scienza})]]}}">Scienza</button>
                            <input class="sub-skill" name="attr_scienza" type="number" value="">
                            <input readonly class="tot-sub-skill" name="attr_tot_scienza" type="number" value="" >
                        </div>
                        
                        
                        
                        <!-- VOLONTA' -->
                        
                        <div class="sheet-main-skill">
                            <input class="main-skill esagono" name="attr_volontà" type="number" value="">
                            <button data-i18n="volontà-label" class="main-skill" name="roll_volontà" type="roll" value="&{template:base} {{name=^{volontà-label} }} {{^{personaggio-label}=@{nome} }} {{^{risultato-label}=[[2d12+(@{volontà})]]}}">Volontà</button>
                        </div>
                        
                        <div class="sheet-sub-skill">
                            <button data-i18n="carisma-label" class="sub-skill" name="roll_carisma" type="roll" value="&{template:base} {{name=^{carisma-label} }} {{^{personaggio-label}=@{nome} }} {{^{risultato-label}=[[2d12+(@{tot_carisma})]]}}">Carisma</button>
                            <input class="sub-skill" name="attr_carisma" type="number" value="">
                            <input readonly class="tot-sub-skill" name="attr_tot_carisma" type="number" value="" >
                        </div>
                        
                        <div class="sheet-sub-skill">
                            <button data-i18n="commercio-label" class="sub-skill" name="roll_commercio" type="roll" value="&{template:base} {{name=^{commercio-label} }} {{^{personaggio-label}=@{nome} }} {{^{risultato-label}=[[2d12+(@{tot_commercio})]]}}">Commercio</button>
                            <input class="sub-skill" name="attr_commercio" type="number" value="">
                            <input readonly class="tot-sub-skill" name="attr_tot_commercio" type="number" value="" >
                        </div>
                        
                        <div class="sheet-sub-skill">
                            <button data-i18n="fermezza-label" class="sub-skill" name="roll_fermezza" type="roll" value="&{template:base} {{name=^{fermezza-label} }} {{^{personaggio-label}=@{nome} }} {{^{risultato-label}=[[2d12+(@{tot_fermezza})]]}}">Fermezza</button>
                            <input class="sub-skill" name="attr_fermezza" type="number" value="">
                            <input readonly class="tot-sub-skill" name="attr_tot_fermezza" type="number" value="" >
                        </div>
                        
                        <div class="sheet-sub-skill">
                            <button data-i18n="intimidire-label" class="sub-skill" name="roll_intimidire" type="roll" value="&{template:base} {{name=^{intimidire-label} }} {{^{personaggio-label}=@{nome} }} {{^{risultato-label}=[[2d12+(@{tot_intimidire})]]}}">Intimidire</button>
                            <input class="sub-skill" name="attr_intimidire" type="number" value="">
                            <input readonly class="tot-sub-skill" name="attr_tot_intimidire" type="number" value="" >
                        </div>
                        
                        <div class="sheet-sub-skill">
                            <button data-i18n="mondanità-label" class="sub-skill" name="roll_mondanità" type="roll" value="&{template:base} {{name=^{mondanità-label} }} {{^{personaggio-label}=@{nome} }} {{^{risultato-label}=[[2d12+(@{tot_mondanità})]]}}">Mondanità</button>
                            <input class="sub-skill" name="attr_mondanità" type="number" value="">
                            <input readonly class="tot-sub-skill" name="attr_tot_mondanità" type="number" value="" >
                        </div>
                        
                        <div class="sheet-sub-skill">
                            <button data-i18n="scaltrezza-label" class="sub-skill" name="roll_scaltrezza" type="roll" value="&{template:base} {{name=^{scaltrezza-label} }} {{^{personaggio-label}=@{nome} }} {{^{risultato-label}=[[2d12+(@{tot_scaltrezza})]]}}">Scaltrezza</button>
                            <input class="sub-skill" name="attr_scaltrezza" type="number" value="">
                            <input readonly class="tot-sub-skill" name="attr_tot_scaltrezza" type="number" value="" >
                        </div>
                        
                        <div class="sheet-sub-skill">
                            <button data-i18n="vita-di-strada-label" class="sub-skill" name="roll_vita-di-strada" type="roll" value="&{template:base} {{name=^{vita-di-strada-label} }} {{^{personaggio-label}=@{nome} }} {{^{risultato-label}=[[2d12+(@{tot_vita-di-strada})]]}}">Vita di Strada</button>
                            <input class="sub-skill" name="attr_vita-di-strada" type="number" value="">
                            <input readonly class="tot-sub-skill" name="attr_tot_vita-di-strada" type="number" value="" >
                        </div>
                        
                        
                        
                        <!-- TECNICA -->
                        
                        <div class="sheet-main-skill">
                            <input class="main-skill esagono" name="attr_tecnica" type="number" value="">
                            <button data-i18n="tecnica-label" class="main-skill" name="roll_tecnica" type="roll" value="&{template:base} {{name=^{tecnica-label} }} {{^{personaggio-label}=@{nome} }} {{^{risultato-label}=[[2d12+(@{tecnica})]]}}">Tecnica</button>
                        </div>
                        
                        <div class="sheet-sub-skill">
                            <button data-i18n="astronautica-label"class="sub-skill" name="roll_astronautica" type="roll" value="&{template:base} {{name=^{astronautica-label} }} {{^{personaggio-label}=@{nome} }} {{^{risultato-label}=[[2d12+(@{tot_astronautica})]]}}">Astronautica</button>
                            <input class="sub-skill" name="attr_astronautica" type="number" value="">
                            <input readonly class="tot-sub-skill" name="attr_tot_astronautica" type="number" value="" >
                        </div>
                        
                        <div class="sheet-sub-skill">
                            <button data-i18n="cibernetica-label" class="sub-skill" name="roll_cibernetica" type="roll" value="&{template:base} {{name=^{cibernetica-label} }} {{^{personaggio-label}=@{nome} }} {{^{risultato-label}=[[2d12+(@{tot_cibernetica})]]}}">Cibernetica</button>
                            <input class="sub-skill" name="attr_cibernetica" type="number" value="">
                            <input readonly class="tot-sub-skill" name="attr_tot_cibernetica" type="number" value="" >
                        </div>
                        
                        <div class="sheet-sub-skill">
                            <button data-i18n="computer-label" class="sub-skill" name="roll_computer" type="roll" value="&{template:base} {{name=^{computer-label} }} {{^{personaggio-label}=@{nome} }} {{^{risultato-label}=[[2d12+(@{tot_computer})]]}}">Computer</button>
                            <input class="sub-skill" name="attr_computer" type="number" value="">
                            <input readonly class="tot-sub-skill" name="attr_tot_computer" type="number" value="" >
                        </div>
                        
                        <div class="sheet-sub-skill">
                            <button data-i18n="esplosivi-label" class="sub-skill" name="roll_esplosivi" type="roll" value="&{template:base} {{name=^{esplosivi-label} }} {{^{personaggio-label}=@{nome} }} {{^{risultato-label}=[[2d12+(@{tot_esplosivi})]]}}">Esplosivi</button>
                            <input class="sub-skill" name="attr_esplosivi" type="number" value="">
                            <input readonly class="tot-sub-skill" name="attr_tot_esplosivi" type="number" value="" >
                        </div>
                        
                        <div class="sheet-sub-skill">
                            <button data-i18n="meccatronica-label" class="sub-skill" name="roll_meccatronica" type="roll" value="&{template:base} {{name=^{meccatronica-label} }} {{^{personaggio-label}=@{nome} }} {{^{risultato-label}=[[2d12+(@{tot_meccatronica})]]}}">Meccatronica</button>
                            <input class="sub-skill" name="attr_meccatronica" type="number" value="">
                            <input readonly class="tot-sub-skill" name="attr_tot_meccatronica" type="number" value="" >
                        </div>
                        
                        <div class="sheet-sub-skill">
                            <button data-i18n="mistificazione-label" class="sub-skill" name="roll_mistificazione" type="roll" value="&{template:base} {{name=^{mistificazione-label} }} {{^{personaggio-label}=@{nome} }} {{^{risultato-label}=[[2d12+(@{tot_mistificazione})]]}}">Mistificazione</button>
                            <input class="sub-skill" name="attr_mistificazione" type="number" value="">
                            <input readonly class="tot-sub-skill" name="attr_tot_mistificazione" type="number" value="" >
                        </div>
                    </div>
                    
                    <div class="sheet-health section">
                        <label data-i18n="salute-label" class="titolosezione">Salute</label>
                        <input class="puntivitalitamax esagono" name="attr_puntivitalità_max" type="number" value="" >
                        <label data-i18n="puntivitalità-label" class="puntivitalita">Punti Vitalità</label>
                        <input class="puntivitalita esagono" name="attr_puntivitalità" type="number" value="">
                        <input class="sogliamorte esagonosmall" name="attr_sogliamorte" type="number" value="" >
                        <label data-i18n="sogliamorte-label" class="sogliamorte">Soglia di Morte</label>

                        <div class="salvezzamorte">
                            <label data-i18n="salvezzamorte-label" class="salvezzamorte">Tiro Salvezza VS Morte</label>
                            <label data-i18n="successi-label" class="successo">Successi</label>
                            <input class="successo successo-1" type="checkbox"></input>
                            <input class="successo successo-2" type="checkbox"></input>
                            <input class="successo successo-3" type="checkbox"></input>

                            <label data-i18n="fallimenti-label" class="fallimento">Fallimenti</label>
                            <input class="fallimento fallimento-1" type="checkbox"></input>
                            <input class="fallimento fallimento-2" type="checkbox"></input>
                            <input class="fallimento fallimento-3" type="checkbox"></input>
                        </div>

                        <div class="affaticamento">
                            <label data-i18n="sfinimento-label" class="affaticamento">Gradi di Sfinimento</label>
                            <input class="affaticamento-1" type="checkbox"></input>
                            <input class="affaticamento-2" type="checkbox"></input>
                            <input class="affaticamento-3" type="checkbox"></input>
                            <input class="affaticamento-4" type="checkbox"></input>
                            <input class="affaticamento-5" type="checkbox"></input>
                            <input class="affaticamento-6" type="checkbox"></input>
                        </div>

                        <div class="condizioni">
                            <label data-i18n="condizioni-label" class="condizioni">Condizioni e Traumi</label>
                            <textarea class="textarea" name="attr_condizioni" type="text"></textarea>
                        </div>
                    </div>
                    
                    <div class="sheet-stats section">
                        <label data-i18n="stats-label" class="titolosezione">Stats</label>
                    
                        <div class="stats"> 
                            <input class="stat right esagono" name="attr_velocità" type="number" value="">
                            <label data-i18n="velocità-label" class="stat right">Velocità</label>
                        </div>
                        
                        <div class="stats">
                            <input class="stat left esagono" name="attr_iniziativa" type="number" value="">  
                            <label data-i18n="iniziativa-label" class="stat left">Iniziativa</label>
                            <button class="stat" name="roll_iniziativa" type="roll" value="&{template:base} {{name=Iniziativa}} {{^{personaggio-label}=@{nome} }} {{^{risultato-label}=[[2d12+(@{selected|iniziativa}) &{tracker}]]}}"></button>
                        </div>
                        
                        <div class="stats">
                            <input class="stat right esagono" name="attr_difesa" type="number" value="">
                            <label data-i18n="difesa-label" class="stat right">Difesa</label>
                        </div>
                        
                        <div class="stats">
                            <input class="stat left esagono" name="attr_armatura" type="number" value="">
                            <label data-i18n="armatura-label" class="stat left">Armatura</label>
                        </div>
                    </div>

                    <div class="sheet-attack section">
                        <label data-i18n="attacchi-label" class="titolosezione">Attacchi</label>
                        <fieldset class="repeating_attacchi">
                            <select class="arma" name="attr_weapon">
                                <option data-i18n="armapersonalizzata-option" selected>Arma personalizzata</option>
                                <option data-i18n="colpodisarmato-option">Colpo disarmato</option>
                                <option data-i18n="guantoferrato-option">Guanto ferrato o tirapugni</option>
                                <option data-i18n="pugnopotenziato-option">Pugno potenziato</option>
                                <option data-i18n="alabarda-option">Alabarda o azza</option>
                                <option data-i18n="ascialeggera-option">Ascia leggera</option>
                                <option data-i18n="asciadarmi-option">Ascia d'armi</option>
                                <option data-i18n="asciagrande-option">Ascia grande</option>
                                <option data-i18n="bastoneferrato-option">Bastone ferrato</option>
                                <option data-i18n="brandistocco-option">Brandistocco o corsesca</option>
                                <option data-i18n="coltello-option">Coltello</option>
                                <option data-i18n="coltellotattico-option">Coltello tattico</option>
                                <option data-i18n="falcione-option">Falcione o guisarma</option>
                                <option data-i18n="tridente-option">Forca d armi o tridente</option>
                                <option data-i18n="frusta-option">Frusta</option>
                                <option data-i18n="giavellotto-option">Lancia corta o giavellotto</option>
                                <option data-i18n="lancia-option">Lancia lunga (picca)</option>
                                <option data-i18n="martellosemplice-option">Mazza o martello semplice</option>
                                <option data-i18n="martellodarmi-option">Mazza o martello d armi</option>
                                <option data-i18n="martellopesante-option">Mazza o martello pesante</option>
                                <option data-i18n="randello-option">Randello o manganello</option>
                                <option data-i18n="ololama-option">Ololama</option>
                                <option data-i18n="ololamainastata-option">Ololama inastata</option>
                                <option data-i18n="spadaleggera-option">Spada leggera</option>
                                <option data-i18n="spadadarmi-option">Spada d armi</option>
                                <option data-i18n="spadone-option">Spadone</option>
                                <option data-i18n="arcocompound-option">Arco compound</option>
                                <option data-i18n="balestracompound-option">Balestra compound</option>
                                <option data-i18n="cerbottana-option">Cerbottana</option>
                                <option data-i18n="fuciledardi-option">Fucile a dardi</option>
                                <option data-i18n="rete-option">Rete</option>
                                <option data-i18n="pistola-option">Pistola</option>
                                <option data-i18n="pistolapesante-option">Pistola pesante</option>
                                <option data-i18n="mitraglietta-option">Mitraglietta</option>
                                <option data-i18n="shotgun-option">Shotgun</option>
                                <option data-i18n="fucilericognizione-option">Fucile da ricognizione</option>
                                <option data-i18n="fucileassalto-option">Fucile d assalto</option>
                                <option data-i18n="fucileprecisione-option">Fucile di precisione</option>
                                <option data-i18n="fucilepesante-option">Fucile pesante</option>
                                <option data-i18n="mitragliatrice-option">Mitragliatrice</option>
                                <option data-i18n="taser-option">Taser</option>
                                <option data-i18n="pistolablaster-option">Pistola blaster</option>
                                <option data-i18n="pistolablasterpesante-option">Pistola blaster pesante</option>
                                <option data-i18n="mitragliettablaster-option">Mitraglietta blaster</option>
                                <option data-i18n="shotgunblaster-option">Shotgun blaster</option>
                                <option data-i18n="fucileblaster-option">Fucile blaster</option>
                                <option data-i18n="fucileblasterpesante-option">Fucile blaster pesante</option>
                                <option data-i18n="mitragliatriceblaster-option">Mitragliatrice blaster</option>
                                <option data-i18n="proiettorearco-option">Proiettore ad arco</option>
                                <option data-i18n="raggioprotonico-option">Raggio Protonico</option>
                            </select>
                            <button class="attacco" name="roll_attacco" type="roll" value="&{template:base} {{name=@{weapon} }} {{^{personaggio-label}=@{nome} }} {{^{attacco-label}=[[2d12+@{bonusattacco}]] }} {{^{danno-label}=[[@{danno}]] }} {{^{tipodanno-label}=@{tipo} }}"></button>
                            <span data-i18n="descrizione-label" class="sheet-toggle-show text-white">Descrizione</span>
                            <input class="sheet-toggle-show" name="show" type="checkbox">
                            <div class="attacchi">
                                <div class="descrizioneattacco descrizione">
                                    <div class="bonusattacco">
                                        <label data-i18n="bonusattacco-label" class="bonusattacco"> Attacco Bonus</label>
                                        <input class="bonusattacco" name="attr_bonusattacco" type="number" value="">
                                    </div>
                                    <div class="danno">
                                        <label data-i18n="dannoarma-label" class="danno">Danno</label>
                                        <input class="danno" name="attr_danno" type="text" value="">
                                    </div>
                                    <div class="tipo">
                                        <label data-i18n="tipodanno-label" class="tipo">Tipo Danno</label>
                                        <input class="tipo" name="attr_tipo" type="text" value="">
                                    </div>
                                    <div class="portata">
                                        <label data-i18n="portataarma-label" class="portata">Range</label>
                                        <input class="portata" name="attr_portata" type="text" value="">
                                    </div>
                                    <div class="munizioni">
                                        <label data-i18n="carichearma-label" class="munizioni">Colpi</label>
                                        <input class="munizioni" name="attr_munizioni" type="number" value="">
                                    </div>
                                    <div class="dettagli">
                                        <label data-i18n="dettagli-label" class="dettagli">Dettagli</label>
                                        <textarea class="dettagli" name="attr_attacchi_dettagli" type="textarea" value="">
                                    </div>            
                                </div>
                            </div>

                        </fieldset>


                    </div>

                    <div class="sheet-traits section">
                        <label data-i18n="trattiprivilegi-label" class="titolosezione">Tratti e Privilegi</label>
                        <div class="tratti">
                            <div class="repeat-tratti">
                                <fieldset class="repeating_tratti">
                                        <input class="titolo" name="attr_tratti" type="text">
                                    <input class="sheet-toggle-show" name="show" type="checkbox">
                                    <span data-i18n="descrizione-label" class="sheet-toggle-show text-white">Descrizione</span>
                                    <textarea class="descrizione" name="attr_tratti_descrizione"></textarea>
                                </fieldset>
                            </div>
                        </div>
                    </div>

                </div>
            </div>

            <div class="sheet-powers">
                <div class="powers">

                    <div class="sheet-power section">
                        <div class="power-head">
                            <label data-i18n="poteri-label" class="titolosezione">Poteri</label>
                            <input class="puntipsimax esagono" name="attr_punti-psi_max" type="number" value="">
                            <input class="puntipsi esagono" name="attr_punti-psi" type="number" value="">
                            <input class="limitepsionico esagonosmall" name="attr_limite-psionico" type="number" value="">
                            <input class="attaccopsionico esagonosmall" name="attr_attacco-psionico" type="number" value="">
                            <input class="forzapsionica esagonosmall" name="attr_forza-psionica" type="number" value="">

                            <div class="power-stats">
                            <label data-i18n="puntipsi-label" class="puntipsi">Punti PSI</label>
                            </div>

                            <div class="power-stats">
                                <label data-i18n="attaccopsionico-label" class="attaccopsionico">Attacco Psionico</label>
                            </div>

                            <div class="power-stats">
                                <label data-i18n="forzapsionica-label" class="forzapsionica">Forza Psionica</label>
                                <label data-i18n="limitepsionico-label" class="limitepsionico">Limite Psionico</label>
                            </div>
                        </div>
                        <div class="power">
                            <label data-i18n="praxis-label" class="power">Praxis</label>
                            <div class="repeat-praxis">
                                <fieldset class="repeating_praxis">
                                    <input class="titolo" name="attr_praxis" type="text">
                                    <input class="sheet-toggle-show" name="show" type="checkbox">
                                    <span data-i18n="descrizione-label" class="sheet-toggle-show text-white">Descrizione</span>
                                    <textarea class="descrizione" name="attr_praxis_descrizione"></textarea>
                                </fieldset>
                            </div>
                        </div>
                        <div class="power">
                            <label data-i18n="illusione-label" class="power">Illusione</label>
                            <div class="repeat-illusione">
                                <fieldset class="repeating_illusione">
                                    <input class="titolo" name="attr_illusione" type="text">
                                    <input class="sheet-toggle-show" name="show" type="checkbox">
                                    <span data-i18n="descrizione-label" class="sheet-toggle-show text-white">Descrizione</span>
                                    <textarea class="descrizione" name="attr_illusione_descrizione"></textarea>
                                </fieldset>
                            </div>
                        </div>
                        <div class="power">
                            <label data-i18n="metabiosi-label" class="power">Metabiosi</label>
                            <div class="repeat-metabiosi">
                                <fieldset class="repeating_metabiosi">
                                    <input class="titolo" name="attr_metabiosi" type="text">
                                    <input class="sheet-toggle-show" name="show" type="checkbox">
                                    <span data-i18n="descrizione-label" class="sheet-toggle-show text-white">Descrizione</span>
                                    <textarea class="descrizione" name="attr_metabiosi_descrizione"></textarea>
                                </fieldset>
                            </div>
                        </div>
                        <div class="power">
                            <label data-i18n="metarealta-label" class="power">Metarealtà</label>
                            <div class="repeat-metarealta">
                                <fieldset class="repeating_metarealta">
                                    <input class="titolo" name="attr_metarealtà" type="text">
                                    <input class="sheet-toggle-show" name="show" type="checkbox">
                                    <span data-i18n="descrizione-label" class="sheet-toggle-show text-white">Descrizione</span>
                                    <textarea class="descrizione" name="attr_metarealtà_descrizione"></textarea>
                                </fieldset>
                            </div>
                        </div>
                        <div class="power">
                            <label data-i18n="telecinesi-label" class="power">Telecinesi</label>
                            <div class="repeat-telecinesi">
                                <fieldset class="repeating_telecinesi">
                                    <input class="titolo" name="attr_telecinesi" type="text">
                                    <input class="sheet-toggle-show" name="show" type="checkbox">
                                    <span data-i18n="descrizione-label" class="sheet-toggle-show text-white">Descrizione</span>
                                    <textarea class="descrizione" name="attr_telecinesi_descrizione"></textarea>
                                </fieldset>
                            </div>
                        </div>
                        <div class="power">
                            <label data-i18n="telepatia-label" class="power">Telepatia</label>
                            <div class="repeat-telepatia">
                                <fieldset class="repeating_telepatia">
                                    <input class="titolo" name="attr_telepatia" type="text">
                                    <input class="sheet-toggle-show" name="show" type="checkbox">
                                    <span data-i18n="descrizione-label" class="sheet-toggle-show text-white">Descrizione</span>
                                    <textarea class="descrizione" name="attr_telepatia_descrizione"></textarea>
                                </fieldset>
                            </div>
                        </div>
                        <div class="power">
                            <label data-i18n="veggenza-label" class="power">Veggenza</label>
                            <div class="repeat-veggenza">
                                <fieldset class="repeating_veggenza">
                                    <input class="titolo" name="attr_veggenza" type="text">
                                    <input class="sheet-toggle-show" name="show" type="checkbox">
                                    <span data-i18n="descrizione-label" class="sheet-toggle-show text-white">Descrizione</span>
                                    <textarea class="descrizione" name="attr_veggenza_descrizione"></textarea>
                                </fieldset>
                            </div>
                        </div>


                    </div>
                </div>
            </div>

            <div class="sheet-biography">
                <div class="biography">
                    <div class="sheet-inv section">
                        <label data-i18n="inventario-label" class="titolosezione">Inventario</label>
                        <div class="inventario">
                            <div class="repeat-inventario">
                                <fieldset class="repeating_inventario">
                                    <input class="titolo" name="attr_inventario" type="text">
                                    <span data-i18n="descrizione-label" class="sheet-toggle-show text-white">Descrizione</span>
                                    <input class="sheet-toggle-show" name="show" type="checkbox">
                                    <textarea class="descrizione" name="attr_inventario_descrizione"></textarea>
                                </fieldset>
                            </div>
                        </div>
                    </div>

                    <div class="sheet-appearance section">
                        <label data-i18n="aspetto-label" class="titolosezione">Aspetto Fisico</label>
                        <div class="aspetto">
                            <input data-i18n-placeholder="sesso-placeholder" class="sesso" name="attr_sesso" type="text" value="" aria-placeholder="Sesso">
                            <input data-i18n-placeholder="altezza-placeholder" class="altezza" name="attr_altezza" type="text" value="" aria-placeholder="Altezza">
                            <input data-i18n-placeholder="peso-placeholder" class="peso" name="attr_peso" type="text" value="" aria-placeholder="Peso">
                            <input data-i18n-placeholder="eta-placeholder" class="eta" name="attr_eta" type="text" value="" aria-placeholder="Età">
                            <div class="descrizione">
                                <label data-i18n="descrizione-label" class="descrizione">Descrizione</label>
                                <textarea class="descrizione" name="attr_aspetto" type="text">
                            </div>
                        </div>
                    </div>

                    <div class="sheet-personality section">
                        <label data-i18n="personalita-label" class="titolosezione">Personalità</label>
                        <div class="personalita">
                            <label data-i18n="indole-label" class="indole">Indole</label>
                            <textarea class="descrizione" name="attr_indole" type="text"></textarea>

                            <label data-i18n="peculiarita-label" class="peculiarita">Peculiarità</label>
                            <textarea class="descrizione" name="attr_peculiarita" type="text"></textarea>

                            <label data-i18n="ideali-label" class="ideali">Ideali</label>
                            <textarea class="descrizione" name="attr_ideali" type="text"></textarea>

                            <label data-i18n="legami-label" class="legami">Legami</label>
                            <textarea class="descrizione" name="attr_legami" type="text"></textarea>

                            <label data-i18n="difetti-label" class="difetti">Difetti</label>
                            <textarea class="descrizione" name="attr_difetti" type="text"></textarea>

                            <label data-i18n="altro-label" class="altro">Altro</label>
                            <textarea class="descrizione" name="attr_altro" type="text"></textarea>
                        </div>
                    </div>

                    <div class="sheet-finance section">
                        <label data-i18n="finanze-label" class="titolosezione">Finanze</label>
                        <div class="finanze">
                            
                                <label data-i18n="crediti-label" class="crediti">Crediti</label>
                                <input class="crediti" name="attr_crediti" type="number" value="">
                            
                                <label data-i18n="oneri-label" class="oneri">Oneri Mensili</label>
                                <input class="oneri" name="attr_oneri" type="number" value="">
                            
                                <label data-i18n="rendita-label" class="rendita">Rendita Mensile</label>
                                <input class="rendita" name="attr_rendita" type="number" value="">
                            
                        </div>
                    </div>
                </div>    
            </div>

            <div class="attribuzione section text-white">
                <p>
                    This work includes material taken from the Double Twelve System Reference Document 1.0 (“DD12 SRD 1.0”) by Lightfish Games, available at http://lightfishgames.altervista.org/dd12, and from the System Reference Document 5.1 (“SRD 5.1”)  by Wizards of the Coast LLC, available at https://dnd.wizards.com/resources/systems-reference-document. 
                    <br>The DD12  SRD 1.0 and the SRD 5.1 are both licensed under the Creative Commons Attribution 4.0 International License available at https://creativecommons.org/licenses/by/4.0/legalcode. 
                </p>
            </div>
        </div>
    </div>

    <div class="npcsheet">
        <div class="npc section">
            <div class="npc_stats">
                <label class="stats titolosezione">NPC Stats</label>
                <input data-i18n-placeholder="nomecreatura-placeholder" class="nome" name="attr_nome" type="text" aria-placeholder="Nome Creatura">
                <input data-i18n-placeholder="tipo-label" class="tipo" aria-placeholder="Tipo">
                <select class="taglia" name="attr_taglia">
                    <option data-i18n="minuscola-option">Minuscola</option>
                    <option data-i18n="piccola-option">Piccola</option>
                    <option data-i18n="media-option">Media</option> 
                    <option data-i18n="grande-option">Grande</option>
                    <option data-i18n="enorme-option">Enorme</option>
                    <option data-i18n="colossale-option">Colossale</option>
                </select>


                <input data-i18n-placeholder="natura-label" class="natura" aria-placeholder="Natura">

                <label data-i18n="livello-label" class="livello"></label>
                <input class="livello" name="attr_livello" type="text">
                <label data-i18n="minaccia-label" class="minaccia"></label>
                <select class="minaccia" name="attr_npc_minaccia">
                    <option data-i18n="bassa-option">Bassa</option>
                    <option data-i18n="moderata-option">Moderata</option>
                    <option data-i18n="alta-option">Alta</option>
                    <option data-i18n="estrema-option">Estrema</option>
                </select>
                <label data-i18n="puntivitalità-label" class="puntivitalita">Punti Vitalità</label>
                <input class="puntivitalita" name="attr_puntivitalità" type="number">
                <label data-i18n="velocità-label" class="velocita">Velocità</label>
                <input class="velocita" name="attr_velocità" type="number">
                <label data-i18n="difesa-label" class="difesa">Difesa</label>
                <input class="difesa" name="attr_difesa" type="number">
                <label data-i18n="armatura-label" class="armatura">Armatura</label>
                <input class="armatura" name="attr_armatura" type="number">
                
            

                <div class="npc_abilita">
                    <button data-i18n="cmb-button" class="button-text cmb" type="roll" value="&{template:base} {{name=^{combattività-label} }} {{^{risultato-label}=[[ 2d12+@{combattività}]] }}"></button></button>
                    <input class="cmb" name="attr_combattività" type="text">
                    <button data-i18n="rob-button" class="button-text rob" type="roll" value="&{template:base} {{name=^{robustezza-label} }} {{^{risultato-label}=[[ 2d12+@{robustezza}]] }}"></button>
                    <input class="rob" name="attr_robustezza" type="text">
                    <button data-i18n="des-button" class="button-text des" type="roll" value="&{template:base} {{name=^{destrezza-label} }} {{^{risultato-label}=[[ 2d12+@{destrezza}]] }}"></button>
                    <input class="des" name="attr_destrezza" type="text">
                    <button data-i18n="per-button" class="button-text per" type="roll" value="&{template:base} {{name=^{percezione-label} }} {{^{risultato-label}=[[ 2d12+@{percezione}]] }}"></button>
                    <input class="per" name="attr_percezione" type="text">
                    <button data-i18n="int-button" class="button-text int" type="roll" value="&{template:base} {{name=^{intelligenza-label} }} {{^{risultato-label}=[[ 2d12+@{intelligenza}]] }}"></button>
                    <input class="int" name="attr_intelligenza" type="text">
                    <button data-i18n="vol-button" class="button-text vol" type="roll" value="&{template:base} {{name=^{volontà-label} }} {{^{risultato-label}=[[ 2d12+@{volontà}]] }}"></button>
                    <input class="vol" name="attr_volontà" type="text">
                    <button data-i18n="tec-button" class="button-text tec" type="roll" value="&{template:base} {{name=^{tecnica-label} }} {{^{risultato-label}=[[ 2d12+@{tecnica}]] }}"></button>
                    <input class="tec" name="attr_tecnica" type="text">

                    <div class="qualifiche">
                        <label data-i18n="qualifiche-label" class="titolosezione">Qualifiche</label>
                        <div class="repeat-qualifiche">
                            <fieldset class="repeating_qualifiche">
                                <input data-i18n-placeholder="qualifica-placeholder" class="qualifica" name="attr_qualifica" type="text" aria-placeholder="Qualifica">
                                <input class="bonus" name="attr_bonus" type="number" value="">
                                <button class="qualifica skill" name="roll_qualifica" type="roll" value="&{template:base} {{name=@{qualifica} }} {{^{risultato-label}=[[ 2d12+@{bonus}]] }}"></button>
                            </fieldset>
                        </div>
                    </div>

                </div>
            </div>

            <div class="npc_tratti">
                <div class="tratti">
                    <label data-i18n="trattiprivilegi-label" class="tratti titolosezione">Tratti e Privilegi</label>
                    <div class="repeat-tratti">
                        <fieldset class="repeating_tratti">
                            <input class="titolo" name="attr_tratti" type="text">
                            <input class="sheet-toggle-show" name="show" type="checkbox">
                            <span data-i18n="descrizione-label" class="sheet-toggle-show text-white">Descrizione</span>
                            <textarea class="descrizione" name="attr_tratti_descrizione"></textarea>
                        </fieldset>
                    </div>
                </div>

            </div>

            <div class="npc_azioni">
                <div class="azioni">
                    <label data-i18n="azioni-label" class="azioni titolosezione"></label>
                    <div class="repeat-azioni">
                        <fieldset class="repeating_azioni">
                            <input class="titolo" name="attr_azioni" type="text">
                            <input class="sheet-toggle-show" name="show" type="checkbox">
                            <span data-i18n="descrizione-label" class="sheet-toggle-show text-white">Descrizione</span>
                            <textarea class="descrizione" name="attr_azioni_descrizione"></textarea>
                        </fieldset>
                    </div>
                </div>

            </div>

            <div class="npc_poteri">
                <div class="poteri">
                    <label data-i18n="poteri-label" class="poteri titolosezione"></label>
                    <div class="repeat-poteri">
                        <fieldset class="repeating_poteri">
                            <input class="titolo" name="attr_poteri" type="text">
                            <input class="sheet-toggle-show" name="show" type="checkbox">
                            <span data-i18n="descrizione-label" class="sheet-toggle-show text-white">Descrizione</span>
                            <textarea class="descrizione" name="attr_poteri_descrizione"></textarea>
                        </fieldset>
                    </div>
                </div>

            </div>

            <div class="npc_reazioni">
                <div class="reazioni">
                    <label data-i18n="reazioni-label" class="reazioni titolosezione"></label>
                    <div class="repeat-reazioni">
                        <fieldset class="repeating_reazioni">
                            <input class="titolo" name="attr_reazioni" type="text">
                            <input class="sheet-toggle-show" name="show" type="checkbox">
                            <span data-i18n="descrizione-label" class="sheet-toggle-show text-white">Descrizione</span>
                            <textarea class="descrizione" name="attr_reazioni_descrizione"></textarea>
                        </fieldset>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="vehiclesheet">
    </div>

    <div class="shipsheet">

    </div>
</div>

<script type="text/worker">

    // TEMPLATE SWITCH
    const buttonTemplate = ["pg", "npc", "vehicle", "ship"];
    buttonTemplate.forEach(button => {
        on(`clicked:${button}`, function() {
            setAttrs({
                sheetTemplate: button
            });
        });
    });

    // TAB SWITCH
    const buttonTab = ["character", "powers", "biography"];
    buttonTab.forEach(button => {
        on(`clicked:${button}`, function() {
            setAttrs({
                sheetTab: button
            });
        });
    });


    // STATS ATTRIBUTE SAVE
    let fieldskill = ["combattività","armibianche","armicinetiche","armienergetiche","arminaturali","artiglieria","lanciare","lottare","robustezza","atletica","forza","g-zero","nuotare","scalare","tempra","destrezza","acrobazia","cavalcare","danza","furtività","manolesta","pilotare","riflessi","percezione","allerta","arti-visive","intuito","ispezionare","musica","sopravvivenza","intelligenza","arti-belliche","erudizione","lucidità","medicina","natura","psicopotere","scienza","volontà","carisma","commercio","fermezza","intimidire","mondanità","scaltrezza","vita-di-strada","tecnica","astronautica","cibernetica","computer","esplosivi","meccatronica","mistificazione"];
    let fieldbio = ["robustezza","volontà","classe","livello","destrezza","difesa"]

    on(fieldbio.map(field => "change:" + field + " sheet:opened").join(" "), () => {

        getAttrs(fieldbio, (values ) => {

            let classe = parseInt(values.classe)||0;
            let robustezza = parseInt(values.robustezza)||0;
            let volontà = parseInt(values["volontà"])||0;
            let livello = parseInt(values.livello)||0
            let destrezza = parseInt(values.destrezza)||0;
            let puntivitalitàmax = classe + robustezza + volontà + livello - 1;
            let sogliamorte = robustezza + volontà + 10;
            let iniziativa = destrezza;
            let difesa = 13 + destrezza;

            setAttrs({
                "iniziativa": destrezza,
                "difesa": difesa,
                "puntivitalità_max": puntivitalitàmax,
                "sogliamorte": sogliamorte
            })

    })})

    on(fieldskill.map(field => "change:" + field + " sheet:opened").join(" "), () => {

        getAttrs(fieldskill, (values ) => {
            let aa= parseInt(values.combattività)||0;
            let ab= parseInt(values.armibianche)||0;
            let ac= parseInt(values.armicinetiche)||0;
            let ad= parseInt(values.armienergetiche)||0;
            let ae= parseInt(values.arminaturali)||0;
            let af= parseInt(values.artiglieria)||0;
            let ag= parseInt(values.lanciare)||0;
            let ah= parseInt(values.lottare)||0;
            let ai= parseInt(values.robustezza)||0;
            let aj= parseInt(values.atletica)||0;
            let ak= parseInt(values.forza)||0;
            let al= parseInt(values["g-zero"])||0;
            let am= parseInt(values.nuotare)||0;
            let an= parseInt(values.scalare)||0;
            let ao= parseInt(values.tempra)||0;
            let ap= parseInt(values.destrezza)||0;
            let aq= parseInt(values.acrobazia)||0;
            let ar= parseInt(values.cavalcare)||0;
            let as= parseInt(values.danza)||0;
            let at= parseInt(values.furtività)||0;
            let au= parseInt(values.manolesta)||0;
            let av= parseInt(values.pilotare)||0;
            let aw= parseInt(values.riflessi)||0;
            let ax= parseInt(values.percezione)||0;
            let ay= parseInt(values.allerta)||0;
            let az= parseInt(values["arti-visive"])||0;
            let ba= parseInt(values.intuito)||0;
            let bb= parseInt(values.ispezionare)||0;
            let bc= parseInt(values.musica)||0;
            let bd= parseInt(values.sopravvivenza)||0;
            let be= parseInt(values.intelligenza)||0;
            let bf= parseInt(values["arti-belliche"])||0;
            let bg= parseInt(values.erudizione)||0;
            let bh= parseInt(values.lucidità)||0;
            let bi= parseInt(values.medicina)||0;
            let bj= parseInt(values.natura)||0;
            let bk= parseInt(values.psicopotere)||0;
            let bl= parseInt(values.scienza)||0;
            let bm= parseInt(values.volontà)||0;
            let bn= parseInt(values.carisma)||0;
            let bo= parseInt(values.commercio)||0;
            let bp= parseInt(values.fermezza)||0;
            let bq= parseInt(values.intimidire)||0;
            let br= parseInt(values.mondanità)||0;
            let bs= parseInt(values.scaltrezza)||0;
            let bt= parseInt(values["vita-di-strada"])||0;
            let bu= parseInt(values.tecnica)||0;
            let bv= parseInt(values.astronautica)||0;
            let bw= parseInt(values.cibernetica)||0;
            let bx= parseInt(values.computer)||0;
            let by= parseInt(values.esplosivi)||0;
            let bz= parseInt(values.meccatronica)||0;
            let ca= parseInt(values.mistificazione)||0;
            
            let tot_armibianche = aa + ab;
            let tot_armicinetiche = aa + ac;
            let tot_armienergetiche = aa + ad;
            let tot_arminaturali = aa + ae;
            let tot_artiglieria = aa + af;
            let tot_lanciare = aa + ag;
            let tot_lottare = aa + ah;
            let tot_atletica = ai + aj;
            let tot_forza = ai + ak;
            let tot_gzero = ai + al;
            let tot_nuotare = ai + am;
            let tot_scalare = ai + an;
            let tot_tempra = ai + ao;
            let tot_acrobazia = ap + aq;
            let tot_cavalcare = ap + ar;
            let tot_danza = ap + as;
            let tot_furtività = ap + at;
            let tot_manolesta = ap + au;
            let tot_pilotare = ap + av;
            let tot_riflessi = ap + aw;
            let tot_allerta = ax + ay;
            let tot_artivisive = ax + az;
            let tot_intuito = ax + ba;
            let tot_ispezionare = ax + bb;
            let tot_musica = ax + bc;
            let tot_sopravvivenza = ax + bd;
            let tot_artibelliche = be + bf;
            let tot_erudizione = be + bg;
            let tot_lucidità = be + bh;
            let tot_medicina = be + bi;
            let tot_natura = be + bj;
            let tot_psicopotere = be + bk;
            let tot_scienza = be + bl;
            let tot_carisma = bm + bn;
            let tot_commercio = bm + bo;
            let tot_fermezza = bm + bp;
            let tot_intimidire = bm + bq;
            let tot_mondanità = bm + br;
            let tot_scaltrezza = bm + bs;
            let tot_vitadistrada = bm + bt;
            let tot_astronautica = bu + bv;
            let tot_cibernetica = bu + bw;
            let tot_computer = bu + bx;
            let tot_esplosivi = bu + by;
            let tot_meccatronica = bu + bz;
            let tot_mistificazione = bu + ca;

            setAttrs({

                "tot_armibianche" : tot_armibianche,
                "tot_armicinetiche" : tot_armicinetiche,
                "tot_armienergetiche" : tot_armienergetiche,
                "tot_arminaturali" : tot_arminaturali,
                "tot_artiglieria" : tot_artiglieria,
                "tot_lanciare" : tot_lanciare,
                "tot_lottare" : tot_lottare,
                "tot_atletica" : tot_atletica,
                "tot_forza" : tot_forza,
                "tot_g-zero" : tot_gzero,
                "tot_nuotare" : tot_nuotare,
                "tot_scalare" : tot_scalare,
                "tot_tempra" : tot_tempra,
                "tot_acrobazia" : tot_acrobazia,
                "tot_cavalcare" : tot_cavalcare,
                "tot_danza" : tot_danza,
                "tot_furtività" : tot_furtività, 
                "tot_manolesta" : tot_manolesta, 
                "tot_pilotare" : tot_pilotare,
                "tot_riflessi" : tot_riflessi, 
                "tot_allerta" : tot_allerta, 
                "tot_arti-visive" : tot_artivisive,
                "tot_intuito" : tot_intuito, 
                "tot_ispezionare" : tot_ispezionare, 
                "tot_musica" : tot_musica, 
                "tot_sopravvivenza" : tot_sopravvivenza, 
                "tot_arti-belliche" : tot_artibelliche, 
                "tot_erudizione" : tot_erudizione, 
                "tot_lucidità" : tot_lucidità, 
                "tot_medicina" : tot_medicina, 
                "tot_natura" : tot_natura,
                "tot_psicopotere" : tot_psicopotere,
                "tot_scienza" : tot_scienza,
                "tot_carisma" : tot_carisma, 
                "tot_commercio" : tot_commercio, 
                "tot_fermezza" : tot_fermezza, 
                "tot_intimidire" : tot_intimidire, 
                "tot_mondanità" : tot_mondanità, 
                "tot_scaltrezza" : tot_scaltrezza, 
                "tot_vita-di-strada" : tot_vitadistrada,
                "tot_astronautica" : tot_astronautica,
                "tot_cibernetica" : tot_cibernetica,
                "tot_computer" : tot_computer, 
                "tot_esplosivi" : tot_esplosivi,
                "tot_meccatronica" : tot_meccatronica,
                "tot_mistificazione" : tot_mistificazione
            })

        });

    });

    // WEAPON OBJECTS
    const weapons = {
        ["armapersonalizzata-option"]: {bonusattacco: "0", danno: "0", tipo: "-"},
        ["colpodisarmato-option"]: {bonusattacco: "tot_arminaturali", danno: "1d4", tipo: "Kinetic"},
        ["guantoferrato-option"]: {bonusattacco: "tot_arminaturali", danno: "1d6", tipo: "Kinetic"},
        ["pugnopotenziato-option"]: {bonusattacco: "tot_arminaturali", danno: "1d8", tipo: "Kinetic"},
        ["alabarda-option"]: {bonusattacco: "tot_armibianche", danno: "2d8", tipo: "Kinetic"},
        ["ascialeggera-option"]: {bonusattacco: "tot_armibianche", danno: "1d8", tipo: "Kinetic"},
        ["asciadarmi-option"]: {bonusattacco: "tot_armibianche", danno: "1d10", tipo: "Kinetic"},
        ["asciagrande-option"]: {bonusattacco: "tot_armibianche", danno: "2d6", tipo: "Kinetic"},
        ["bastoneferrato-option"]: {bonusattacco: "tot_armibianche", danno: "1d6", tipo: "Kinetic"},
        ["brandistocco-option"]: {bonusattacco: "tot_armibianche", danno: "2d6", tipo: "Kinetic"},
        ["coltello-option"]: {bonusattacco: "tot_armibianche", danno: "1d6", tipo: "Kinetic"},
        ["coltellotattico-option"]: {bonusattacco: "tot_armibianche", danno: "1d8", tipo: "Kinetic"},
        ["falcione-option"]: {bonusattacco: "tot_armibianche", danno: "2d8", tipo: "Kinetic"},
        ["tridente-option"]: {bonusattacco: "tot_armibianche", danno: "1d10", tipo: "Kinetic"},
        ["frusta-option"]: {bonusattacco: "tot_armibianche", danno: "1d4", tipo: "Kinetic"},
        ["giavellotto-option"]: {bonusattacco: "tot_armibianche", danno: "1d8", tipo: "Kinetic"},
        ["lancia-option"]: {bonusattacco: "tot_armibianche", danno: "1d10", tipo: "Kinetic"},
        ["martellosemplice-option"]: {bonusattacco: "tot_armibianche", danno: "1d8", tipo: "Kinetic"},
        ["martellodarmi-option"]: {bonusattacco: "tot_armibianche", danno: "1d10", tipo: "Kinetic"},
        ["martellopesante-option"]: {bonusattacco: "tot_armibianche", danno: "2d6", tipo: "Kinetic"},
        ["randello-option"]: {bonusattacco: "tot_armibianche", danno: "1d6", tipo: "Kinetic"},
        ["ololama-option"]: {bonusattacco: "tot_armibianche", danno: "1d10", tipo: "Kinetic"},
        ["ololamainastata-option"]: {bonusattacco: "tot_armibianche", danno: "2d6", tipo: "Kinetic"},
        ["spadaleggera-option"]: {bonusattacco: "tot_armibianche", danno: "1d8", tipo: "Kinetic"},
        ["spadadarmi-option"]: {bonusattacco: "tot_armibianche", danno: "1d10", tipo: "Kinetic"},
        ["spadone-option"]: {bonusattacco: "tot_armibianche", danno: "2d6", tipo: "Kinetic"},
        ["arcocompound-option"]: {bonusattacco: "tot_armibianche", danno: "1d8", tipo: "Kinetic"},
        ["balestracompound-option"]: {bonusattacco: "tot_armibianche", danno: "1d10", tipo: "Kinetic"},
        ["cerbottana-option"]: {bonusattacco: "tot_armibianche", danno: "1", tipo: "Kinetic"},
        ["fuciledardi-option"]: {bonusattacco: "tot_armibianche", danno: "1", tipo: "Kinetic"},
        ["rete-option"]: {bonusattacco: "tot_armibianche", danno: "", tipo: "Kinetic"},
        ["pistola-option"]: {bonusattacco: "tot_armicinetiche", danno: "1d10", tipo: "Kinetic"},
        ["pistolapesante-option"]: {bonusattacco: "tot_armicinetiche", danno: "2d6", tipo: "Kinetic"},
        ["mitraglietta-option"]: {bonusattacco: "tot_armicinetiche", danno: "2d6", tipo: "Kinetic"},
        ["shotgun-option"]: {bonusattacco: "tot_armicinetiche", danno: "2d8", tipo: "Kinetic"},
        ["fucilericognizione-option"]: {bonusattacco: "tot_armicinetiche", danno: "2d6", tipo: "Kinetic"},
        ["fucileassalto-option"]: {bonusattacco: "tot_armicinetiche", danno: "2d8", tipo: "Kinetic"},
        ["fucileprecisione-option"]: {bonusattacco: "tot_armicinetiche", danno: "2d8", tipo: "Kinetic"},
        ["fucilepesante-option"]: {bonusattacco: "tot_armicinetiche", danno: "3d6", tipo: "Kinetic"},
        ["mitragliatrice-option"]: {bonusattacco: "tot_armicinetiche", danno: "2d10", tipo: "Kinetic"},
        ["taser-option"]: {bonusattacco: "tot_armienergetiche", danno: "1d4", tipo: "Energetic"},
        ["pistolablaster-option"]: {bonusattacco: "tot_armienergetiche", danno: "1d10", tipo: "Energetic"},
        ["pistolablasterpesante-option"]: {bonusattacco: "tot_armienergetiche", danno: "2d6", tipo: "Energetic"},
        ["mitragliettablaster-option"]: {bonusattacco: "tot_armienergetiche", danno: "2d6", tipo: "Energetic"},
        ["shotgunblaster-option"]: {bonusattacco: "tot_armienergetiche", danno: "2d8", tipo: "Energetic"},
        ["fucileblaster-option"]: {bonusattacco: "tot_armienergetiche", danno: "2d8", tipo: "Energetic"},
        ["fucileblasterpesante-option"]: {bonusattacco: "tot_armienergetiche", danno: "3d6", tipo: "Energetic"},
        ["mitragliatriceblaster-option"]: {bonusattacco: "tot_armienergetiche", danno: "2d10", tipo: "Energetic"},
        ["proiettorearco-option"]: {bonusattacco: "tot_armienergetiche", danno: "2d6", tipo: "Energetic"},
        ["raggioprotonico-option"]: {bonusattacco: "tot_armienergetiche", danno: "2d10", tipo: "Energetic"}
    };

    // REPEATING ATTACK SAVE
    on("change:repeating_attacchi:weapon", (eventInfo) => {

        getAttrs(["repeating_attacchi_weapon"], values => {

            let selectedWeapon = values.repeating_attacchi_weapon.trim();
            let matchedWeapon = null;
            let translatedWeapon = null;
            let key = null;

            Object.keys(weapons).forEach(key => {

                translatedWeapon = getTranslationByKey(key);

                if (getTranslationByKey(key) === selectedWeapon) {

                    matchedWeapon = weapons[key];

                }
            });

            if (matchedWeapon) {

                /*const bonusAttaccoAttr = matchedWeapon.bonusattacco === "tot_armienergetiche" 
                    ? "tot_armienergetiche" 
                    : "tot_armicinetiche";*/

                let bonusAttaccoAttr = null;

                if (matchedWeapon.bonusattacco === "tot_armienergetiche") {
                    bonusAttaccoAttr = "tot_armienergetiche"; // Arma energetica
                } 
                else if (matchedWeapon.bonusattacco === "tot_armicinetiche") {
                    bonusAttaccoAttr = "tot_armicinetiche"; // Arma cinetica
                }
                else if (matchedWeapon.bonusattacco === "tot_armibianche") {
                    bonusAttaccoAttr = "tot_armibianche"; // Arma bianca
                }
                else if (matchedWeapon.bonusattacco === "tot_arminaturali") {
                    bonusAttaccoAttr = "tot_arminaturali"; // Arma naturale
                }
    
                getAttrs([bonusAttaccoAttr], function(values) {

                    const output = {

                        'repeating_attacchi_bonusattacco': values[bonusAttaccoAttr],
                        'repeating_attacchi_danno': matchedWeapon.danno,
                        'repeating_attacchi_tipo': matchedWeapon.tipo

                    };

                    setAttrs(output);

                });
            }
        });
    });

    // REPEATING ATTACK UPDATE
    on("change:tot_armienergetiche change:tot_armicinetiche change:tot_arminaturali change:tot_armibianche", function() {
        // Otteniamo tutti gli ID delle righe della sezione ripetuta
        getSectionIDs("repeating_attacchi", function(ids) {
            // Aggiungiamo gli attributi da prendere (weapon per ogni riga e i totali)
            const attrsToGet = ids.map(id => `repeating_attacchi_${id}_weapon`);
            attrsToGet.push("tot_armienergetiche", "tot_armicinetiche", "tot_arminaturali", "tot_armibianche");
    
            // Recuperiamo i valori di questi attributi
            getAttrs(attrsToGet, function(values) {
                const output = {};
    
                // Log per vedere tutti gli attributi recuperati
                //console.log("Valori recuperati da getAttrs:", values);
    
                // Iteriamo su tutte le righe
                ids.forEach(id => {
                    const weaponName = values[`repeating_attacchi_${id}_weapon`]?.trim(); // nome arma selezionata
                    let matchedWeapon = null;
    
                    // Troviamo l'arma corrispondente e la escludiamo se è personalizzata
                    Object.keys(weapons).forEach(key => {
                        const translatedWeapon = getTranslationByKey(key); // traduciamo la chiave
                        if (translatedWeapon === weaponName && key !== "armapersonalizzata-option") {
                            matchedWeapon = weapons[key];
                        }
                    });
    
                    // Se matchedWeapon è null, significa che non è stata trovata una corrispondenza
                    if (!matchedWeapon) {
                        //console.log(`Arma non trovata per ${weaponName}`);
                        return; // Se non c'è un'arma corrispondente, ignoriamo
                    }
    
                    // Esaminiamo il valore di bonusattacco nel dizionario matchedWeapon
                    const bonusAttacco = matchedWeapon.bonusattacco;
                    //console.log("BonusAttacco per", weaponName, "è:", bonusAttacco); // Log per vedere il bonus attacco
    
                    let bonusAttr;
    
                    // Se bonusattacco è uguale a "tot_armicinetiche", usiamo il bonus per le armi cinetiche
                    if (bonusAttacco === "tot_armicinetiche") {
                        bonusAttr = "tot_armicinetiche";  // Se cinetico
                    } 
                    // Se bonusattacco è uguale a "tot_armienergetiche", usiamo il bonus per le armi energetiche
                    else if (bonusAttacco === "tot_armienergetiche") {
                        bonusAttr = "tot_armienergetiche"; // Se energetico
                    }
                    // Se bonusattacco è uguale a "tot_armibianche", usiamo il bonus per le armi bianche
                    else if (bonusAttacco === "tot_armibianche") {
                        bonusAttr = "tot_armibianche"; // Se bianca
                    }
                    // Se bonusattacco è uguale a "tot_arminaturali", usiamo il bonus per le armi naturali
                    else if (bonusAttacco === "tot_arminaturali") {
                        bonusAttr = "tot_arminaturali"; // Se naturale
                    }
    
                    // Log per vedere quale bonus viene applicato
                    //console.log(`BonusAttr per ${weaponName}: ${bonusAttr}`);
    
                    // Verifica che l'attributo del bonus esista
                    const bonus = values[bonusAttr] !== undefined ? parseInt(values[bonusAttr], 10) : 0;
    
                    // Log per vedere il bonus che viene applicato
                    //console.log(`Bonus applicato per ${weaponName}:`, bonus);
    
                    // Applichiamo il bonus solo se l'arma è presente e non è personalizzata
                    output[`repeating_attacchi_${id}_bonusattacco`] = bonus;
                });
    
                // Impostiamo gli output per aggiornare i valori
                setAttrs(output);
            });
        });
    });


    // NPC SKILLS SAVE
    on("change:repeating_qualifiche:qualifica change:repeating_qualifiche:bonus", (eventInfo) => {
        getAttrs(["repeating_qualifiche_qualifica", "repeating_qualifiche_bonus"], values => {

            var qualifica = values.repeating_qualifiche_qualifica;
            var qualificaBonus = values.repeating_qualifiche_bonus;

            const output = {
                "repeating_qualifiche_qualifica": qualifica,
                "repeating_qualifiche_bonus": qualificaBonus
            };

            console.log(output)

            setAttrs(output);

        })
    })
    
</script>
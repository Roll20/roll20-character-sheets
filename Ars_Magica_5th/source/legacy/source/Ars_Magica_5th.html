
<!-- DO NOT MODIFY !
This file is automatically generated from a template. Any change will be overwritten
-->
<!-- The file template.html includes python integration. See Readme.md for details -->

<!--
    Do not remove older alerts, the id system will break and hide new alerts on old sheets
    Add new alerts *after* the old ones, otherwise you will change the automatic ID of old alerts
    and the new alert will be assigned an old ID (and be hidden on many older characters)
-->
<input type="hidden" class="alert-hidder" name="attr_alert-161-spell-update" value="0"/>
    <div class="alert alert-warning">
        <div>
            <h3> Warning - February 2021 v1.6.1 update - ERROR: Spell's arts conversion</h3>
            <div>The conversion script that updates your spell's arts to the new format failed to run. This means you need to setup the arts of your spells again.<br><br>
                <b>Note:</b>The script is run each time you open your character sheet, as long as this banner is visible. If it completes normally, it will hide this banner before you can see it.
            </div>
        </div>
        <label class="fakebutton">
            <input type="checkbox" name="attr_alert-161-spell-update" value="1" /> ×
        </label>
    </div>
<input type="hidden" class="alert-hidder" name="attr_alert-alert-update-v1_6-dataloss" value="0"/>
    <div class="alert alert-warning">
        <div>
            <h3> Warning - February 2021 v1.6 Update</h3>
            <div>In the 'Ability' tab, the characteristic of each ability must be selected again.</div>
        </div>
        <label class="fakebutton">
            <input type="checkbox" name="attr_alert-alert-update-v1_6-dataloss" value="1" /> ×
        </label>
    </div>
<input type="hidden" class="alert-hidder" name="attr_alert-alert-update-v1-7-armorylegacy" value="0"/>
    <div class="alert alert-warning">
        <div>
            <h3> Warning - January 2022 - v1.7 - Armory Update</h3>
            <div>The armory and Combat modifiers list replace the old armor and combat modifier text areas. The old entries and data can be found in the 'Sheet' tab, under 'Legacy'.</div>
        </div>
        <label class="fakebutton">
            <input type="checkbox" name="attr_alert-alert-update-v1-7-armorylegacy" value="1" /> ×
        </label>
    </div>
<!-- Alerts are now generated in python from the changelog.md file -->
<input type="hidden" class="alert-hidder" name="attr_alert-alert-update-v1-7-1" value="0"/>
<div class="alert alert-info">
    <div>
        <h3> Info - <strong>February 2022 - v1.7.1 - Fix</strong></h3>
        <div>
            <ul>
                <li>Fixed accelerated abilities</li>
            </ul>
        </div>
    </div>
    <label class="fakebutton">
        <input type="checkbox" name="attr_alert-alert-update-v1-7-1" value="1" /> ×
    </label>
</div>
<input type="hidden" class="alert-hidder" name="attr_alert-alert-update-v1-7" value="0"/>
<div class="alert alert-info">
    <div>
        <h3> Info - <strong>January 2022 - v1.7 - Magic &amp; Armory update</strong></h3>
        <div>
            <ul>
                <li>
                    <em>General changes</em>:
                    <ul>
                        <li>Added Welcome message to the "Sheet" tab, and made that tab the default tab</li>
                        <li>Added tooltips to some elements of the sheet to provide info about them (e.g. XP fields)</li>
                        <li>Repeated items (such as items, abilities, spells...) start expanded for easier completion.</li>
                    </ul>
                </li>
                <li>
                    <em>Magic Update</em>:
                    <ul>
                        <li>Added a toggle to hide elements of the sheet that are specific to Magi (see Sheet tab)</li>
                        <li>Added deficiency toggles that halves casting totals</li>
                        <li>Added a roll button for non-fatiguing spontaneous casting</li>
                        <li>Separated the Artes Liberales and Philosophiae fields of ceremonial and ritual casting, to accomodate specialisation in either</li>
                        <li>Added Soak computations with Form bonuses</li>
                        <li>Added list for useful spontaneous spells in the "Spells" tab</li>
                    </ul>
                </li>
                <li>
                    <em>Armory Update</em>:
                    <ul>
                        <li>Added an armor list with togglable elements. Can store multiple armor (parts).</li>
                        <li>Burden and Encumbrance are now computed automatically</li>
                        <li>Added combat modifiers list that is applied to rolls</li>
                    </ul>
                </li>
            </ul>
        </div>
    </div>
    <label class="fakebutton">
        <input type="checkbox" name="attr_alert-alert-update-v1-7" value="1" /> ×
    </label>
</div>
<input type="hidden" class="alert-hidder" name="attr_alert-alert-update-v1-6-5" value="0"/>
<div class="alert alert-info">
    <div>
        <h3> Info - <strong>October 2021 v1.6.5</strong></h3>
        <div>
            <ul>
                <li>Fix to laboratory focus for characters with an affinity bonus to one of the arts used.</li>
            </ul>
        </div>
    </div>
    <label class="fakebutton">
        <input type="checkbox" name="attr_alert-alert-update-v1-6-5" value="1" /> ×
    </label>
</div>
<input type="hidden" class="alert-hidder" name="attr_alert-alert-update-v1-6-4" value="0"/>
<div class="alert alert-info">
    <div>
        <h3> Info - <strong>March 2021, v1.6.4</strong></h3>
        <div>
            <ul>
                <li>Added
                    <span class=" codespan" >lalign</span>and
                    <span class=" codespan" >ralign</span>to the
                    <span class=" codespan" >custom</span>rolltemplate
                </li>
            </ul>
        </div>
    </div>
    <label class="fakebutton">
        <input type="checkbox" name="attr_alert-alert-update-v1-6-4" value="1" /> ×
    </label>
</div>
<input type="hidden" class="alert-hidder" name="attr_alert-alert-update-v1-6-3" value="0"/>
<div class="alert alert-info">
    <div>
        <h3> Info - <strong>March 2021, v1.6.3</strong></h3>
        <div>
            <ul>
                <li>Added
                    <span class=" codespan" >roll-color</span>and
                    <span class=" codespan" >button-color</span>properties to the
                    <span class=" codespan" >custom</span>rolltemplate, with all CSSv3 colors
                </li>
            </ul>
        </div>
    </div>
    <label class="fakebutton">
        <input type="checkbox" name="attr_alert-alert-update-v1-6-3" value="1" /> ×
    </label>
</div>
<input type="hidden" class="alert-hidder" name="attr_alert-alert-update-v1-6-2" value="0"/>
<div class="alert alert-info">
    <div>
        <h3> Info - <strong>February 2021, v1.6.2</strong></h3>
        <div>
            <ul>
                <li>Fixed centering not working</li>
                <li>Fixed translation of spellcasting words options</li>
                <li>Added support for the
                    <span class=" codespan" >custom</span>rolltemplate from the forum, with all CSS colors. Can be useful for spell tables or similar chat menus
                </li>
            </ul>
        </div>
    </div>
    <label class="fakebutton">
        <input type="checkbox" name="attr_alert-alert-update-v1-6-2" value="1" /> ×
    </label>
</div>
<input type="hidden" class="alert-hidder" name="attr_alert-alert-update-v1-6-1" value="0"/>
<div class="alert alert-info">
    <div>
        <h3> Info - <strong>February 2021, v1.6.1</strong></h3>
        <div>
            <ul>
                <li>Fixed botch die botching on 1s instead of 10s</li>
                <li>Fixed critical dice displaying 10s as exploding, instead of 1s</li>
                <li>Fixed spell's arts value not being updated when the character's arts are modified
                    <ul>
                        <li>Completely changed how arts are handled inside spells</li>
                        <li>A script will be run to convert your data to the new format, but may fail for some spells</li>
                    </ul>
                </li>
                <li>Added a critical roll for initiative that sets the turn tracker initiative (not visible in the sheet, use the chat button)</li>
                <li>Added option to always ask which characteristic to use when rolling abilities</li>
                <li>Centered the sheet in its tab</li>
            </ul>
        </div>
    </div>
    <label class="fakebutton">
        <input type="checkbox" name="attr_alert-alert-update-v1-6-1" value="1" /> ×
    </label>
</div>
<input type="hidden" class="alert-hidder" name="attr_alert-alert-update-v1-6" value="0"/>
<div class="alert alert-info">
    <div>
        <h3> Info - <strong>February 2021, v1.6</strong></h3>
        <div>
            <ul>
                <li>Added inline labels to all rolls, hover rolls in chat to see details</li>
                <li>Fixed tabs not displaying properly
                    <em>(tabs are again attached to an attribute)</em>
                </li>
                <li>Added simple/stress die handling. See the "Help" tab for explanation, there's a catch</li>
                <li>Support for focus in magic totals & rolls</li>
                <li>Support for additional fatigue levels</li>
                <li>Fixed ability rolltemplate being too wide in some cases</li>
                <li>Added documentation direclty to the sheet, see the "Help" tab</li>
            </ul>
        </div>
    </div>
    <label class="fakebutton">
        <input type="checkbox" name="attr_alert-alert-update-v1-6" value="1" /> ×
    </label>
</div>
<input type="hidden" class="alert-hidder" name="attr_alert-alert-update-v1-51" value="0"/>
<div class="alert alert-info">
    <div>
        <h3> Info - <strong>May 2020, v1.51</strong></h3>
        <div>
            <ul>
                <li>Small change to the Ability roll template for legibility</li>
            </ul>
        </div>
    </div>
    <label class="fakebutton">
        <input type="checkbox" name="attr_alert-alert-update-v1-51" value="1" /> ×
    </label>
</div>
<input type="hidden" class="alert-hidder" name="attr_alert-alert-update-v1-5" value="0"/>
<div class="alert alert-info">
    <div>
        <h3> Info - <strong>April 2020, v1.5</strong></h3>
        <div>
            <ul>
                <li>Incorporated new fonts throughout the sheet!</li>
                <li>Polished several roll templates and added new ones for Defending. Stylish!</li>
                <li>Added an extra button for rerolling stress explosions, can be found next to the botch button.</li>
                <li>Fixed several missing translation tags and side-effects of having translations added into the sheet. In particular, Abilities should now have access to the Accelerated Ability option.</li>
                <li>Updated the sheet space and button for Soak/Armor Protection to use the combat roller templates.</li>
                <li>Relinked images from imgur to github asset folders.</li>
            </ul>
        </div>
    </div>
    <label class="fakebutton">
        <input type="checkbox" name="attr_alert-alert-update-v1-5" value="1" /> ×
    </label>
</div>
<input type="hidden" class="alert-hidder" name="attr_alert-alert-update-v1-4" value="0"/>
<div class="alert alert-info">
    <div>
        <h3> Info - <strong>October 2019, v1.4</strong></h3>
        <div>
            <ul>
                <li>Initiatives now output to Roll20's Tracker while selecting a token.</li>
                <li>Character sheet tabs no longer attached to an attribute, so multiple players can view the same character sheet without wrestling over tab controls.</li>
            </ul>
        </div>
    </div>
    <label class="fakebutton">
        <input type="checkbox" name="attr_alert-alert-update-v1-4" value="1" /> ×
    </label>
</div>

<div class="top_bar">
    <div>
        <div class='3colrow'>
            <div class='col'>
                <table class="table_1">
                    <tr>
                        <th data-i18n="character" >Character</th>
                        <td><input type="text" class="heading_1" name="attr_character_name"/></td>
                    </tr>
                    <tr>
                        <th data-i18n="player" >Player</th>
                        <td><input type="text" class="heading_3" name="attr_player_name"/></td>
                    </tr>
                    <tr>
                        <th data-i18n="unspent-xp" >Unspent XP</th>
                        <td><input type="text" class="heading_3" name="attr_unspent_xp"/></td>
                    </tr>
                </table>
            </div>
            <div class='col'>
                <div class="banner">
                    <div class="banner-content"></div>
                </div>
            </div>
            <div class='col'>
                <table class="table_1">
                    <tr>
                        <th data-i18n="saga" >Saga</th>
                        <td colspan="3"><input type="text" class="heading_2" name="attr_saga"/></td>
                    </tr>
                    <tr>
                        <th data-i18n="current-year" >Current Year</th>
                        <td colspan="3"><input type="text" class="heading_2" name="attr_year"/></td>
                    </tr>
                    <tr>
                        <th data-i18n="confidence" >Confidence</th>
                        <td><input type="text" data-i18n-placeholder="score" placeholder="Score" class="heading_2" style="width:50px;" name="attr_Confidence"/></td>
                        <th data-i18n="pool" >Pool</th>
                        <td style="text-align:right;"><input data-i18n-placeholder="points" placeholder="Points" type="text" class="heading_2" style="width:50px;" name="attr_ConfidencePoints"/></td>
                    </tr>
                </table>
            </div>
        </div>
    </div>
</div>

<div class="tab-br"></div>
<input type="hidden" class="tabstoggle" name="attr_sheetTab" value="sheet"/>
<input type="hidden" name="attr_simple-die" value="(1d10cs0cf0) [@{simple-die_i18n}]"/>
<input type="hidden" name="attr_stress-die" value="ceil(((((1d10cs1cf10 %9) -1)+9) %9) *1.1) [@{stress-die_i18n}]"/>
<input type="hidden" class="dtype-selector" name="attr_die-type-selection-proxy" value="toggle"/>
<input type="hidden" class="selected-die" name="attr_selected-die" value="simple"/>
<input type="hidden" class="toggle-magi" name="attr_isMagi" value="yes" />
<div class="buttonbar">
    <div class="navbuttons">
        <button type="action" name="act_character" class="tabbutton" data-i18n="character" >Character</button>
        <button type="action" name="act_abilities" class="tabbutton" data-i18n="abilities" >Abilities</button>
        <button type="action" name="act_magic" class="tabbutton magi-only" data-i18n="magic" >Magic</button>
        <button type="action" name="act_combat" class="tabbutton" data-i18n="combat" >Combat</button>
        <button type="action" name="act_spells" class="tabbutton magi-only" data-i18n="spells" >Spells</button>
        <button type="action" name="act_sheet" class="tabbutton" data-i18n="sheet" style="margin-left: 10px;">Sheet</button>
    </div>
    <div class="tabblank"></div>
    <div class="functions">
        <button type="action" name="act_die-toggle-simple" class="die-toggle-simple" data-i18n="simple">Simple</button>
        <button type="action" name="act_die-toggle-stress" class="die-toggle-stress" data-i18n="stress">Stress</button>
        <button type="roll" class="reroll" name="roll_reroll" title="Reroll" value="&{template:reroll} {{roll= [[1d10cs0cf0]]}}" data-i18n="roll">Roll</button>
        <button type="roll" class="botch" name="roll_botch" title="Botch" value="@{botch_formula}" data-i18n="botch" >Botch</button>
        <button type="roll" class="critical" name="roll_critical" title="Critical" value="&{template:critical} {{roll=[[?{@{total_i18n}|0} [@{total_i18n}] + (2*2**({1d10cs1cf0!1}=1)) [number of 1s] * [[1d9+1]] [last die]]]}}" data-i18n="critical">Critical</button>
        <!-- Invisible critical button with a divide by 2, for spontaneous criticals -->
        <button type="roll" class="critical" name="roll_critical-spontaneous" title="Critical" style="display: none" value="&{template:critical} {{roll=[[?{@{total_i18n}|0} [@{total_i18n}] + (2**({1d10cs1cf0!1}=1)) [number of 1s] * [[1d9+1]] [last die]]]}} {{type=@{spontaneous_i18n}}}" />
        <!-- Invisible critical button for initiative critical that adds to turn tracker -->
        <button type="roll" class="critical" name="roll_critical-init" title="Critical" style="display: none" value="&{template:critical} {{roll=[[?{@{total_i18n}|0} [@{total_i18n}] + (2*2**({1d10cs1cf0!1}=1)) [number of 1s] * [[1d9+1]] [last die] &{tracker}]]}} {{type=@{initiative_i18n}}}" />
    </div>
</div>
<div class="tab-br"></div> 

<!-- 1 Details -->
<div class="tab-content tab1">
    <div>
        <!-- Genera Information -->
        <div class='2colrow'>
        <div class='col'>
                <div>
                    <div class='col'>
                        <table class="table_1">
                            <tr>
                                <th data-i18n="age" >Age</th>
                                <td><input type="text" class="heading_2" style="width:70px;" name="attr_Age"/></td>
                            </tr>
                            <tr>
                                <th>
                                    <select class="select_2" name="attr_MightType">
                                        <option class="italic" value="NoMight"><span style="text-align:center;" data-i18n="no-might" >No Might</span></option>
                                        <option value="DivineMight" data-i18n="divine-might" >Divine Might</option>
                                        <option value="FaerieMight" data-i18n="faerie-might" >Faerie Might</option>
                                        <option value="InfernalMight" data-i18n="infernal-might" >Infernal Might</option>
                                        <option value="MagicMight" data-i18n="magic-might" >Magic Might</option>
                                    </select>
                                </th>
                                <td><input data-i18n-placeholder="score" placeholder="Score" type="text" class="heading_2" style="width:70px;" name="attr_MightScore" /></td>
                            </tr>
                            <tr>
                                <th data-i18n="warp-score" >Warp Score</th>
                                <td><input type="text" class="heading_2" style="width:70px;" name="attr_Warping"/></td>
                            </tr>
                        </table>
                    </div>
                    <div class='col'>
                        <table class="table_1" style="margin-bottom:16px;">
                            <tr>
                                <th data-i18n="apparent-age" >Apparent Age</th>
                                <td><input type="text" class="heading_2" style="width:70px;" name="attr_ApparentAge"/></td>
                            </tr>
                            
                            <tr>
                                <th data-i18n="pool" >Pool</th>
                                <td><input data-i18n-placeholder="points" placeholder="Points" type="text" class="heading_2" style="width:70px;" name="attr_CurrentMagicMight"/></td>
                            </tr>
                            <tr>
                                <th data-i18n="warp-points" >Warp Points</th>
                                <td><input type="text" class="heading_2" style="width:70px;" name="attr_WarpPoints"/></td>
                            </tr>
                        </table>
                    </div>
                </div>
                <div>
                    <div class='row'>
                        <h4 class="heading_label" style="margin-bottom:0px;" data-i18n="warping-scars" >Warping Scars</h4>
                        <textarea class="textarea_4" name="attr_Warping_effects"></textarea>
                    </div>
                </div>
            </div>
            <div class='col'>
                <table class="table_2" style="width:400px">
                    <tr>
                        <th colspan="2" data-i18n="birth-name" >Birth Name</th>
                        <td colspan="2"><input type="text" class="heading_3" name="attr_Birth_Name"/></td>
                    </tr>
                    <tr>
                        <th colspan="2" data-i18n="year-born" >Year Born</th>
                        <td colspan="2"><input type="text" class="heading_3" name="attr_Year_Born"/></td>
                    </tr>
                    <tr>
                        <th colspan="2" data-i18n="gender" >Gender</th>
                        <td colspan="2"><input type="text" class="heading_3" name="attr_Gender"/></td>
                    </tr>
                    <tr>
                        <th colspan="2" data-i18n="race-nationality" >Race/Nationality</th>
                        <td colspan="2"><input type="text" class="heading_3" name="attr_Race_Nationality"/></td>
                    </tr>
                    <tr>
                        <th colspan="2" data-i18n="place-of-origin" >Place of Origin</th>
                        <td colspan="2"><input type="text" class="heading_3" name="attr_Place_of_Origin"/></td>
                    </tr>
                    <tr>
                        <th colspan="2" data-i18n="religion" >Religion</th>
                        <td colspan="2"><input type="text" class="heading_3" name="attr_Religion"/></td>
                    </tr>
                    <tr>
                        <th colspan="2" data-i18n="title-profession" >Title/Profession</th>
                        <td colspan="2"><input type="text" class="heading_3" name="attr_Title_Profession"/></td>
                    </tr>
                    <tr>
                        <th data-i18n="height" >Height</th>
                        <td><input type="text" class="heading_3" style="width:70px;" name="attr_Height"/></td>
                        <th data-i18n="weight" >Weight</th>
                        <td><input type="text" class="heading_3" style="width:70px;" name="attr_Weight"/></td>
                    </tr>
                    <tr>
                        <th data-i18n="size" >Size</th>
                        <td><input type="number" class="heading_3" style="width:70px;" name="attr_Size"/></td>
                        <th data-i18n="handedness" >Handedness</th>
                        <td><input type="text" class="heading_3" style="width:70px;" name="attr_Handedness"/></td>
                    </tr>
                    <tr>
                        <th data-i18n="hair" >Hair</th>
                        <td><input type="text" class="heading_3" style="width:70px;" name="attr_Hair"/></td>
                        <th data-i18n="eyes" >Eyes</th>
                        <td><input type="text" class="heading_3" style="width:70px;" name="attr_Eyes"/></td>
                    </tr>
                </table>
            </div>
        </div>
    </div>
    <!-- Magus background -->
    <div class="magi-only">
        <h4 class="heading_label" style="margin-bottom:0px;" data-i18n="magus-background" >Magus Background</h4>
        <div class='2colrow' style="border:1px solid black;">
            <div class='col'>
                <table class="table_1">
                    <tr>
                        <th data-i18n="house" >House</th>
                        <td><input type="text" class="heading_2" name="attr_House"/></td>
                    </tr>
                    <tr>
                        <th data-i18n="covenant" >Covenant</th>
                        <td><input type="text" class="heading_2" name="attr_Covenant"/></td>
                    </tr>
                    <tr>
                        <td><h4 class="heading_label" style="margin-bottom: 0px;" data-i18n="wizard-s-sigil" >Wizard's Sigil</h4></td>
                        <td></td>
                    </tr>
                    <tr>
                        <th rowspan="2" colspan="2"><textarea class="textarea_4" name="attr_sigil"></textarea></th>
                    </tr>
                </table>
            </div>
            <div class='col'>
                <table class="table_1" style="text-align:right;">
                    <tr>
                        <th data-i18n="domus-magna" >Domus Magna</th>
                        <td><input type="text" class="heading_2" name="attr_DomusMagna"/></td>
                    </tr>
                    <tr>
                        <th data-i18n="primus" >Primus</th>
                        <td><input type="text" class="heading_2" name="attr_Primus"/></td>
                    </tr>
                    <tr>
                        <th data-i18n="parens" >Parens</th>
                        <td><input type="text" class="heading_2" name="attr_Parens"/></td>
                    </tr>
                    <tr>
                        <th data-i18n="covenant-of-apprenticeship" >Covenant of Apprenticeship</th>
                        <td><input type="text" class="heading_2" name="attr_CovenantofApprenticeship"/></td>
                    </tr>
               </table>
            </div>
        </div>
    </div>
    <br>
    <!-- Virtues & Flaws -->
    <div>
        <div class='2colrow'>
            <div class='col'>
                <h4 class="heading_label" data-i18n="virtues" >Virtues</h4>
                <fieldset class="repeating_virtue">
                    <table class="table_2" style="width:400px">
                        <tr>
                            <td><input type="text" class="heading_2 " name="attr_Virtue" style="width:245px"/>
                                <select name="attr_VirtueType" class="dropdown"/>
                                    <option name="attr_VirtueType" value="Vminor" data-i18n="minor" >Minor</option>
                                    <option name="attr_VirtueType" value="Vmajor" data-i18n="major" >Major</option>
                                    <option name="attr_VirtueType" value="Vfree" data-i18n="free" >Free</option>
                                </select>
                            </td>
                            <th><div style="width:40px;"><input type="checkbox" class="hider checkbox_1" name="attr_virtue_show" value="1" checked/><span></span></div></th>
                        </tr>
                        <tr>
                            <td colspan="2">
                                <input type="checkbox" class="hider hidden" name="attr_virtue_show" value="1" checked/>
                                <div class="hide">
                                    <textarea class="textarea_1" style="width:300px;" name="attr_virtue_text"></textarea>
                                        
                                </div>
                            </td>
                        </tr>
                    </table>
                </fieldset>
            </div>
            <div class='col'>
                <h4 class="heading_label" data-i18n="flaws" >Flaws</h4>
                <fieldset class="repeating_flaw">
                    <table class="table_2" style="width:400px">
                        <tr>
                            <td><input type="text" class="heading_2" name="attr_flaw" style="width:245px"/>
                                <select name="attr_VirtueType" class="dropdown"/>
                                    <option name="attr_VirtueType" value="Vminor" data-i18n="minor" >Minor</option>
                                    <option name="attr_VirtueType" value="Vmajor" data-i18n="major" >Major</option>
                                    <option name="attr_VirtueType" value="Vfree" data-i18n="free" >Free</option>
                                </select>
                            
                            </td>
                            <th><div style="width:40px;"><input type="checkbox" class="hider checkbox_1" name="attr_flaw_show" value="1" checked/><span></span></div></th>
                        </tr>
                        <tr>
                            <td colspan="2">
                                <input type="checkbox" class="hider hidden" name="attr_flaw_show" value="1" checked/>
                                <div class="hide">
                                    <textarea class="textarea_1" style="width:300px;" name="attr_flaw_text"></textarea>
                                </div>
                            </td>
                        </tr>
                    </table>
                </fieldset>
            </div>
        </div>
    </div>
    <br>
    <!-- Personnality traits & Reputations -->
    <div>
        <div class='2colrow'>
            <div class='col'>
                <h4 class="heading_label" data-i18n="personality-traits" >Personality Traits</h4>
                <table class="table_2" style="width:400px">
                    <tr>
                        <td data-i18n="trait" >Trait</td>
                        <td data-i18n="score" >Score</td>
                        <td></td>
                    </tr>
                    <tr>
                        <td><input type="text" class="heading_2" style="width:245px" name="attr_Personality_Trait1"/></td>
                        <td><input type="text" class="number_1" style="width:70px;" name="attr_Personality_Trait1_score"/></td>
                        <td><div class="flex-container-center">
                            <button type="roll" class="button simple-roll" name="roll_personality1_simple" value="&{template:generic} {{Banner=^{personality} ^{roll}}} {{Label=@{Personality_Trait1}}} {{Result=[[ @{simple-die} + (@{Personality_Trait1_Score}) [@{Personality_Trait1}] + (?{@{circumstantial_i18n}|0}) [@{circumstances_i18n}] ]]}} {{botch-button=[@{botch_i18n}!](~@{character_name}|botch)}} {{crit-button=[@{critical_i18n}!](~@{character_name}|critical)}} {{stress=}}"></button>
                            <button type="roll" class="button stress-roll" name="roll_personality1_stress" value="&{template:generic} {{Banner=^{personality} ^{roll}}} {{Label=@{Personality_Trait1}}} {{Result=[[ @{stress-die} + (@{Personality_Trait1_Score}) [@{Personality_Trait1}] + (?{@{circumstantial_i18n}|0}) [@{circumstances_i18n}] ]]}} {{botch-button=[@{botch_i18n}!](~@{character_name}|botch)}} {{crit-button=[@{critical_i18n}!](~@{character_name}|critical)}} {{stress=1}}"></button>
                        </div></td>
                    </tr>
                    <tr>
                        <td><input type="text" class="heading_2" style="width:245px" name="attr_Personality_Trait2"/></td>
                        <td><input type="text" class="number_1" style="width:70px;" name="attr_Personality_Trait2_score"/></td>
                        <td><div class="flex-container-center">
                            <button type="roll" class="button simple-roll" name="roll_personality2_simple" value="&{template:generic} {{Banner=^{personality} ^{roll}}} {{Label=@{Personality_Trait2}}} {{Result=[[ @{simple-die} + (@{Personality_Trait2_Score}) [@{Personality_Trait2}] + (?{@{circumstantial_i18n}|0}) [@{circumstances_i18n}] ]]}} {{botch-button=[@{botch_i18n}!](~@{character_name}|botch)}} {{crit-button=[@{critical_i18n}!](~@{character_name}|critical)}} {{stress=}}"></button>
                            <button type="roll" class="button stress-roll" name="roll_personality2_stress" value="&{template:generic} {{Banner=^{personality} ^{roll}}} {{Label=@{Personality_Trait2}}} {{Result=[[ @{stress-die} + (@{Personality_Trait2_Score}) [@{Personality_Trait2}] + (?{@{circumstantial_i18n}|0}) [@{circumstances_i18n}] ]]}} {{botch-button=[@{botch_i18n}!](~@{character_name}|botch)}} {{crit-button=[@{critical_i18n}!](~@{character_name}|critical)}} {{stress=1}}"></button>
                        </div></td>
                    </tr>
                    <tr>
                        <td><input type="text" class="heading_2" style="width:245px" name="attr_Personality_Trait3"/></td>
                        <td><input type="text" class="number_1" style="width:70px;" name="attr_Personality_Trait3_score"/></td>
                        <td><div class="flex-container-center">
                            <button type="roll" class="button simple-roll" name="roll_personality3_simple" value="&{template:generic} {{Banner=^{personality} ^{roll}}} {{Label=@{Personality_Trait3}}} {{Result=[[ @{simple-die} + (@{Personality_Trait3_Score}) [@{Personality_Trait3}] + (?{@{circumstantial_i18n}|0}) [@{circumstances_i18n}] ]]}} {{botch-button=[@{botch_i18n}!](~@{character_name}|botch)}} {{crit-button=[@{critical_i18n}!](~@{character_name}|critical)}} {{stress=}}"></button>
                            <button type="roll" class="button stress-roll" name="roll_personality3_stress" value="&{template:generic} {{Banner=^{personality} ^{roll}}} {{Label=@{Personality_Trait3}}} {{Result=[[ @{stress-die} + (@{Personality_Trait3_Score}) [@{Personality_Trait3}] + (?{@{circumstantial_i18n}|0}) [@{circumstances_i18n}] ]]}} {{botch-button=[@{botch_i18n}!](~@{character_name}|botch)}} {{crit-button=[@{critical_i18n}!](~@{character_name}|critical)}} {{stress=1}}"></button>
                        </div></td>
                    </tr>
                    <tr>
                        <td><input type="text" class="heading_2" style="width:245px" name="attr_Personality_Trait4"/></td>
                        <td><input type="text" class="number_1" style="width:70px;" name="attr_Personality_Trait4_score"/></td>
                        <td><div class="flex-container-center">
                            <button type="roll" class="button simple-roll" name="roll_personality4_simple" value="&{template:generic} {{Banner=^{personality} ^{roll}}} {{Label=@{Personality_Trait4}}} {{Result=[[ @{simple-die} + (@{Personality_Trait4_Score}) [@{Personality_Trait4}] + (?{@{circumstantial_i18n}|0}) [@{circumstances_i18n}] ]]}} {{botch-button=[@{botch_i18n}!](~@{character_name}|botch)}} {{crit-button=[@{critical_i18n}!](~@{character_name}|critical)}} {{stress=}}"></button>
                            <button type="roll" class="button stress-roll" name="roll_personality4_stress" value="&{template:generic} {{Banner=^{personality} ^{roll}}} {{Label=@{Personality_Trait4}}} {{Result=[[ @{stress-die} + (@{Personality_Trait4_Score}) [@{Personality_Trait4}] + (?{@{circumstantial_i18n}|0}) [@{circumstances_i18n}] ]]}} {{botch-button=[@{botch_i18n}!](~@{character_name}|botch)}} {{crit-button=[@{critical_i18n}!](~@{character_name}|critical)}} {{stress=1}}"></button>
                        </div></td>
                    </tr>
                    <tr>
                        <td><input type="text" class="heading_2" style="width:245px" name="attr_Personality_Trait5"/></td>
                        <td><input type="text" class="number_1" style="width:70px;" name="attr_Personality_Trait5_score"/></td>
                        <td><div class="flex-container-center">
                            <button type="roll" class="button simple-roll" name="roll_personality5_simple" value="&{template:generic} {{Banner=^{personality} ^{roll}}} {{Label=@{Personality_Trait5}}} {{Result=[[ @{simple-die} + (@{Personality_Trait5_Score}) [@{Personality_Trait5}] + (?{@{circumstantial_i18n}|0}) [@{circumstances_i18n}] ]]}} {{botch-button=[@{botch_i18n}!](~@{character_name}|botch)}} {{crit-button=[@{critical_i18n}!](~@{character_name}|critical)}} {{stress=}}"></button>
                            <button type="roll" class="button stress-roll" name="roll_personality5_stress" value="&{template:generic} {{Banner=^{personality} ^{roll}}} {{Label=@{Personality_Trait5}}} {{Result=[[ @{stress-die} + (@{Personality_Trait5_Score}) [@{Personality_Trait5}] + (?{@{circumstantial_i18n}|0}) [@{circumstances_i18n}] ]]}} {{botch-button=[@{botch_i18n}!](~@{character_name}|botch)}} {{crit-button=[@{critical_i18n}!](~@{character_name}|critical)}} {{stress=1}}"></button>
                        </div></td>
                    </tr>
                    <tr>
                        <td><input type="text" class="heading_2" style="width:245px" name="attr_Personality_Trait6"/></td>
                        <td><input type="text" class="number_1" style="width:70px;" name="attr_Personality_Trait6_score"/></td>
                        <td><div class="flex-container-center">
                            <button type="roll" class="button simple-roll" name="roll_personality6_simple" value="&{template:generic} {{Banner=^{personality} ^{roll}}} {{Label=@{Personality_Trait6}}} {{Result=[[ @{simple-die} + (@{Personality_Trait6_Score}) [@{Personality_Trait6}] + (?{@{circumstantial_i18n}|0}) [@{circumstances_i18n}] ]]}} {{botch-button=[@{botch_i18n}!](~@{character_name}|botch)}} {{crit-button=[@{critical_i18n}!](~@{character_name}|critical)}} {{stress=}}"></button>
                            <button type="roll" class="button stress-roll" name="roll_personality6_stress" value="&{template:generic} {{Banner=^{personality} ^{roll}}} {{Label=@{Personality_Trait6}}} {{Result=[[ @{stress-die} + (@{Personality_Trait6_Score}) [@{Personality_Trait6}] + (?{@{circumstantial_i18n}|0}) [@{circumstances_i18n}] ]]}} {{botch-button=[@{botch_i18n}!](~@{character_name}|botch)}} {{crit-button=[@{critical_i18n}!](~@{character_name}|critical)}} {{stress=1}}"></button>
                        </div></td>
                    </tr>
                </table>
            </div>
            <div class='col'>
                <h4 class="heading_label" data-i18n="reputations" >Reputations</h4>
                <table class="table_2" style="width:400px">
                    <tr>
                        <th></th>
                        <td data-i18n="type" >Type</td>
                        <td data-i18n="score" >Score</td>
                    </tr>
                    <tr>
                        <td><input type="text" class="heading_2" name="attr_Reputations1"/></td>
                        <td><input type="text" class="heading_2a" name="attr_Reputations1_type"/></td>
                        <td><input type="text" class="number_1" style="width:50px;" name="attr_Reputations1_score"/></td>
                        <td><div class="flex-container-center">
                            <button type="roll" class="button simple-roll" name="roll_reputation1_simple" value="&{template:generic} {{Banner=^{reputation} ^{roll}}} {{Label=@{Reputations1}}} {{Result=[[ @{simple-die} + (@{Reputations1_Score}) [@{Reputations1}] + (?{@{circumstantial_i18n}|0}) [@{circumstances_i18n}] ]]}} {{botch-button=[@{botch_i18n}!](~@{character_name}|botch)}} {{crit-button=[@{critical_i18n}!](~@{character_name}|critical)}} {{stress=}}"></button>
                            <button type="roll" class="button stress-roll" name="roll_reputation1_stress" value="&{template:generic} {{Banner=^{reputation} ^{roll}}} {{Label=@{Reputations1}}} {{Result=[[ @{stress-die} + (@{Reputations1_Score}) [@{Reputations1}] + (?{@{circumstantial_i18n}|0}) [@{circumstances_i18n}] ]]}} {{botch-button=[@{botch_i18n}!](~@{character_name}|botch)}} {{crit-button=[@{critical_i18n}!](~@{character_name}|critical)}} {{stress=1}}"></button>
                        </div></td>
                    </tr>
                    <tr>
                        <td><input type="text" class="heading_2" name="attr_Reputations2"/></td>
                        <td><input type="text" class="heading_2a" name="attr_Reputations2_type"/></td>
                        <td><input type="text" class="number_1" style="width:50px;" name="attr_Reputations2_score"/></td>
                        <td><div class="flex-container-center">
                            <button type="roll" class="button simple-roll" name="roll_reputation2_simple" value="&{template:generic} {{Banner=^{reputation} ^{roll}}} {{Label=@{Reputations2}}} {{Result=[[ @{simple-die} + (@{Reputations2_Score}) [@{Reputations2}] + (?{@{circumstantial_i18n}|0}) [@{circumstances_i18n}] ]]}} {{botch-button=[@{botch_i18n}!](~@{character_name}|botch)}} {{crit-button=[@{critical_i18n}!](~@{character_name}|critical)}} {{stress=}}"></button>
                            <button type="roll" class="button stress-roll" name="roll_reputation2_stress" value="&{template:generic} {{Banner=^{reputation} ^{roll}}} {{Label=@{Reputations2}}} {{Result=[[ @{stress-die} + (@{Reputations2_Score}) [@{Reputations2}] + (?{@{circumstantial_i18n}|0}) [@{circumstances_i18n}] ]]}} {{botch-button=[@{botch_i18n}!](~@{character_name}|botch)}} {{crit-button=[@{critical_i18n}!](~@{character_name}|critical)}} {{stress=1}}"></button>
                        </div></td>
                    </tr>
                    <tr>
                        <td><input type="text" class="heading_2" name="attr_Reputations3"/></td>
                        <td><input type="text" class="heading_2a" name="attr_Reputations3_type"/></td>
                        <td><input type="text" class="number_1" style="width:50px;" name="attr_Reputations3_score"/></td>
                        <td><div class="flex-container-center">
                            <button type="roll" class="button simple-roll" name="roll_reputation3_simple" value="&{template:generic} {{Banner=^{reputation} ^{roll}}} {{Label=@{Reputations3}}} {{Result=[[ @{simple-die} + (@{Reputations3_Score}) [@{Reputations3}] + (?{@{circumstantial_i18n}|0}) [@{circumstances_i18n}] ]]}} {{botch-button=[@{botch_i18n}!](~@{character_name}|botch)}} {{crit-button=[@{critical_i18n}!](~@{character_name}|critical)}} {{stress=}}"></button>
                            <button type="roll" class="button stress-roll" name="roll_reputation3_stress" value="&{template:generic} {{Banner=^{reputation} ^{roll}}} {{Label=@{Reputations3}}} {{Result=[[ @{stress-die} + (@{Reputations3_Score}) [@{Reputations3}] + (?{@{circumstantial_i18n}|0}) [@{circumstances_i18n}] ]]}} {{botch-button=[@{botch_i18n}!](~@{character_name}|botch)}} {{crit-button=[@{critical_i18n}!](~@{character_name}|critical)}} {{stress=1}}"></button>
                        </div></td>
                    </tr>
                    <tr>
                        <td><input type="text" class="heading_2" name="attr_Reputations4"/></td>
                        <td><input type="text" class="heading_2a" name="attr_Reputations4_type"/></td>
                        <td><input type="text" class="number_1" style="width:50px;" name="attr_Reputations4_score"/></td>
                        <td><div class="flex-container-center">
                            <button type="roll" class="button simple-roll" name="roll_reputation4_simple" value="&{template:generic} {{Banner=^{reputation} ^{roll}}} {{Label=@{Reputations4}}} {{Result=[[ @{simple-die} + (@{Reputations4_Score}) [@{Reputations4}] + (?{@{circumstantial_i18n}|0}) [@{circumstances_i18n}] ]]}} {{botch-button=[@{botch_i18n}!](~@{character_name}|botch)}} {{crit-button=[@{critical_i18n}!](~@{character_name}|critical)}} {{stress=}}"></button>
                            <button type="roll" class="button stress-roll" name="roll_reputation4_stress" value="&{template:generic} {{Banner=^{reputation} ^{roll}}} {{Label=@{Reputations4}}} {{Result=[[ @{stress-die} + (@{Reputations4_Score}) [@{Reputations4}] + (?{@{circumstantial_i18n}|0}) [@{circumstances_i18n}] ]]}} {{botch-button=[@{botch_i18n}!](~@{character_name}|botch)}} {{crit-button=[@{critical_i18n}!](~@{character_name}|critical)}} {{stress=1}}"></button>
                        </div></td>
                    </tr>
                    <tr>
                        <td><input type="text" class="heading_2" name="attr_Reputations5"/></td>
                        <td><input type="text" class="heading_2a" name="attr_Reputations5_type"/></td>
                        <td><input type="text" class="number_1" style="width:50px;" name="attr_Reputations5_score"/></td>
                        <td><div class="flex-container-center">
                            <button type="roll" class="button simple-roll" name="roll_reputation5_simple" value="&{template:generic} {{Banner=^{reputation} ^{roll}}} {{Label=@{Reputations5}}} {{Result=[[ @{simple-die} + (@{Reputations5_Score}) [@{Reputations5}] + (?{@{circumstantial_i18n}|0}) [@{circumstances_i18n}] ]]}} {{botch-button=[@{botch_i18n}!](~@{character_name}|botch)}} {{crit-button=[@{critical_i18n}!](~@{character_name}|critical)}} {{stress=}}"></button>
                            <button type="roll" class="button stress-roll" name="roll_reputation5_stress" value="&{template:generic} {{Banner=^{reputation} ^{roll}}} {{Label=@{Reputations5}}} {{Result=[[ @{stress-die} + (@{Reputations5_Score}) [@{Reputations5}] + (?{@{circumstantial_i18n}|0}) [@{circumstances_i18n}] ]]}} {{botch-button=[@{botch_i18n}!](~@{character_name}|botch)}} {{crit-button=[@{critical_i18n}!](~@{character_name}|critical)}} {{stress=1}}"></button>
                        </div></td>
                    </tr>
                    <tr>
                        <td><input type="text" class="heading_2" name="attr_Reputations6"/></td>
                        <td><input type="text" class="heading_2a" name="attr_Reputations6_type"/></td>
                        <td><input type="text" class="number_1" style="width:50px;" name="attr_Reputations6_score"/></td>
                        <td><div class="flex-container-center">
                            <button type="roll" class="button simple-roll" name="roll_reputation6_simple" value="&{template:generic} {{Banner=^{reputation} ^{roll}}} {{Label=@{Reputations6}}} {{Result=[[ @{simple-die} + (@{Reputations6_Score}) [@{Reputations6}] + (?{@{circumstantial_i18n}|0}) [@{circumstances_i18n}] ]]}} {{botch-button=[@{botch_i18n}!](~@{character_name}|botch)}} {{crit-button=[@{critical_i18n}!](~@{character_name}|critical)}} {{stress=}}"></button>
                            <button type="roll" class="button stress-roll" name="roll_reputation6_stress" value="&{template:generic} {{Banner=^{reputation} ^{roll}}} {{Label=@{Reputations6}}} {{Result=[[ @{stress-die} + (@{Reputations6_Score}) [@{Reputations6}] + (?{@{circumstantial_i18n}|0}) [@{circumstances_i18n}] ]]}} {{botch-button=[@{botch_i18n}!](~@{character_name}|botch)}} {{crit-button=[@{critical_i18n}!](~@{character_name}|critical)}} {{stress=1}}"></button>
                        </div></td>
                    </tr>
                </table>
            </div>
        </div>
    </div>
    <!-- Inventory -->
    <div>
        <h4 class="heading_label" data-i18n="inventory" >Inventory</h4>
        <table class="table_2" style="width:830px">
            <tr>
                <td style="width:400px;" data-i18n="item" >Item</td>
                <td style="width:400px;" data-i18n="number" >Number</td>
                <th></th>
            </tr>
        </table>
        <fieldset class="repeating_item">
            <table class="table_2" style="width:830px">
                <tr>
                    <td style="width:450px;"><input type="text" class="heading_2" style="width:400px" name="attr_item_name" data-i18n-placeholder="item-name" placeholder="Item Name"/></td>
                    <td style="width:350px;"><input type="number" class="number_1" name="attr_item_number" value="0"/></td>
                    <th><div style="width:40px;"><input type="checkbox" class="hider checkbox_1" name="attr_item_show" value="1" checked/><span></span></div></th>
                </tr>
                <tr>
                    <td colspan="3">
                        <input type="checkbox" class="hider hidden" name="attr_item_show" value="1" checked/><span></span>
                        <div class="hide">
                            <textarea class="textarea_2" style="width:800px" name="attr_item_description" data-i18n-placeholder="description" placeholder="Description"></textarea>
                        </div>
                    </td>
                </tr>
            </table>
        </fieldset>
    </div>
</div>

<!-- 2 Characteristics & Abilities -->
<div class="tab-content tab2">
    <div>
        <div class='2colrow' style="margin-top:10px;">
            <div class='col'>
                <!-- Characteristics -->
                <div>
                    <h4 class="heading_label" data-i18n="characteristics" >Characteristics</h4>
                    <table class="table_2" style="border:0px">
                        <tr>
                            <td><div class="heading"></div></td>
                            <td data-i18n="description" >Description</td>
                            <td data-i18n="score" >Score</td>
                            <td data-i18n="aging" >Aging</td>
                            <td data-i18n="bonus" >Bonus</td>
                        </tr>
                        <tr>
                            <th data-i18n="intelligence" >Intelligence</th>
                            <td><input type="text" class="heading_2" name="attr_Intelligence_Description"/></td>
                            <td><input type="text" class="number_1" name="attr_Intelligence_Score" value="0"/></td>
                            <td><input type="text" class="number_1" name="attr_Intelligence_Aging" value="0"/></td>
                            <td><div class="flex-container-center">
                                <button type="roll" class="button simple-roll" name="roll_Intelligence_simple" value="&{template:ability} {{name=@{character_name}}} {{label0=^{intelligence}}} {{result0=[[ @{simple-die} + (@{Intelligence_Score}) [@{intelligence_i18n}] + (@{wound_total}) [@{wounds_i18n}] + ([[floor(@{Fatigue})]]) [@{fatigue_i18n}] + (?{@{circumstantial_i18n}|0}) [@{circumstances_i18n}] ]]}} {{banner=@{Intelligence_Description}}} {{label1=^{score}}} {{result1=@{Intelligence_Score}}} {{label2=^{weakness-m}}} {{result2=[[ [[floor(@{Fatigue})]] [@{fatigue_i18n}] + @{wound_total} [@{wounds_i18n}] ]]}} {{label3=^{circumstances-m}}} {{result3=[[(?{@{circumstantial_i18n}|0})]]}} {{botch-button=[@{botch_i18n}!](~@{character_name}|botch)}} {{crit-button=[@{critical_i18n}!](~@{character_name}|critical)}} {{stress=}}"></button>
                                <button type="roll" class="button stress-roll" name="roll_Intelligence_stress" value="&{template:ability} {{name=@{character_name}}} {{label0=^{intelligence}}} {{result0=[[ @{stress-die} + (@{Intelligence_Score}) [@{intelligence_i18n}] + (@{wound_total}) [@{wounds_i18n}] + ([[floor(@{Fatigue})]]) [@{fatigue_i18n}] + (?{@{circumstantial_i18n}|0}) [@{circumstances_i18n}] ]]}} {{banner=@{Intelligence_Description}}} {{label1=^{score}}} {{result1=@{Intelligence_Score}}} {{label2=^{weakness-m}}} {{result2=[[ [[floor(@{Fatigue})]] [@{fatigue_i18n}] + @{wound_total} [@{wounds_i18n}] ]]}} {{label3=^{circumstances-m}}} {{result3=[[(?{@{circumstantial_i18n}|0})]]}} {{botch-button=[@{botch_i18n}!](~@{character_name}|botch)}} {{crit-button=[@{critical_i18n}!](~@{character_name}|critical)}} {{stress=1}}"></button>
                            </div></td>
                        </tr>
                        <tr>
                            <th data-i18n="perception" >Perception</th>
                            <td><input type="text" class="heading_2" name="attr_Perception_Description"/></td>
                            <td><input type="text" class="number_1" name="attr_Perception_Score" value="0"/></td>
                            <td><input type="text" class="number_1" name="attr_Perception_Aging" value="0"/></td>
                            <td><div class="flex-container-center">
                                <button type="roll" class="button simple-roll" name="roll_Perception_simple" value="&{template:ability} {{name=@{character_name}}} {{label0=^{perception}}} {{result0=[[ @{simple-die} + (@{Perception_Score}) [@{perception_i18n}] + (@{wound_total}) [@{wounds_i18n}] + ([[floor(@{Fatigue})]]) [@{fatigue_i18n}] + (?{@{circumstantial_i18n}|0}) [@{circumstances_i18n}] ]]}} {{banner=@{Perception_Description}}} {{label1=^{score}}} {{result1=@{Perception_Score}}} {{label2=^{weakness-m}}} {{result2=[[ [[floor(@{Fatigue})]] [@{fatigue_i18n}] + @{wound_total} [@{wounds_i18n}] ]]}} {{label3=^{circumstances-m}}} {{result3=[[(?{@{circumstantial_i18n}|0})]]}} {{botch-button=[@{botch_i18n}!](~@{character_name}|botch)}} {{crit-button=[@{critical_i18n}!](~@{character_name}|critical)}} {{stress=}}"></button>
                                <button type="roll" class="button stress-roll" name="roll_Perception_stress" value="&{template:ability} {{name=@{character_name}}} {{label0=^{perception}}} {{result0=[[ @{stress-die} + (@{Perception_Score}) [@{perception_i18n}] + (@{wound_total}) [@{wounds_i18n}] + ([[floor(@{Fatigue})]]) [@{fatigue_i18n}] + (?{@{circumstantial_i18n}|0}) [@{circumstances_i18n}] ]]}} {{banner=@{Perception_Description}}} {{label1=^{score}}} {{result1=@{Perception_Score}}} {{label2=^{weakness-m}}} {{result2=[[ [[floor(@{Fatigue})]] [@{fatigue_i18n}] + @{wound_total} [@{wounds_i18n}] ]]}} {{label3=^{circumstances-m}}} {{result3=[[(?{@{circumstantial_i18n}|0})]]}} {{botch-button=[@{botch_i18n}!](~@{character_name}|botch)}} {{crit-button=[@{critical_i18n}!](~@{character_name}|critical)}} {{stress=1}}"></button>
                            </div></td>
                        </tr>
                        <tr>
                            <th data-i18n="presence" >Presence</th>
                            <td><input type="text" class="heading_2" name="attr_Presence_Description"/></td>
                            <td><input type="text" class="number_1" name="attr_Presence_Score" value="0"/></td>
                            <td><input type="text" class="number_1" name="attr_Presence_Aging" value="0"/></td>
                            <td><div class="flex-container-center">
                                <button type="roll" class="button simple-roll" name="roll_Presence_simple" value="&{template:ability} {{name=@{character_name}}} {{label0=^{presence}}} {{result0=[[ @{simple-die} + (@{Presence_Score}) [@{presence_i18n}] + (@{wound_total}) [@{wounds_i18n}] + ([[floor(@{Fatigue})]]) [@{fatigue_i18n}] + (?{@{circumstantial_i18n}|0}) [@{circumstances_i18n}] ]]}} {{banner=@{Presence_Description}}} {{label1=^{score}}} {{result1=@{Presence_Score}}} {{label2=^{weakness-m}}} {{result2=[[ [[floor(@{Fatigue})]] [@{fatigue_i18n}] + @{wound_total} [@{wounds_i18n}] ]]}} {{label3=^{circumstances-m}}} {{result3=[[(?{@{circumstantial_i18n}|0})]]}} {{botch-button=[@{botch_i18n}!](~@{character_name}|botch)}} {{crit-button=[@{critical_i18n}!](~@{character_name}|critical)}} {{stress=}}"></button>
                                <button type="roll" class="button stress-roll" name="roll_Presence_stress" value="&{template:ability} {{name=@{character_name}}} {{label0=^{presence}}} {{result0=[[ @{stress-die} + (@{Presence_Score}) [@{presence_i18n}] + (@{wound_total}) [@{wounds_i18n}] + ([[floor(@{Fatigue})]]) [@{fatigue_i18n}] + (?{@{circumstantial_i18n}|0}) [@{circumstances_i18n}] ]]}} {{banner=@{Presence_Description}}} {{label1=^{score}}} {{result1=@{Presence_Score}}} {{label2=^{weakness-m}}} {{result2=[[ [[floor(@{Fatigue})]] [@{fatigue_i18n}] + @{wound_total} [@{wounds_i18n}] ]]}} {{label3=^{circumstances-m}}} {{result3=[[(?{@{circumstantial_i18n}|0})]]}} {{botch-button=[@{botch_i18n}!](~@{character_name}|botch)}} {{crit-button=[@{critical_i18n}!](~@{character_name}|critical)}} {{stress=1}}"></button>
                            </div></td>
                        </tr>
                        <tr>
                            <th data-i18n="communication" >Communication</th>
                            <td><input type="text" class="heading_2" name="attr_Communication_Description"/></td>
                            <td><input type="text" class="number_1" name="attr_Communication_Score" value="0"/></td>
                            <td><input type="text" class="number_1" name="attr_Communication_Aging" value="0"/></td>
                            <td><div class="flex-container-center">
                                <button type="roll" class="button simple-roll" name="roll_Communication_simple" value="&{template:ability} {{name=@{character_name}}} {{label0=^{communication}}} {{result0=[[ @{simple-die} + (@{Communication_Score}) [@{communication_i18n}] + (@{wound_total}) [@{wounds_i18n}] + ([[floor(@{Fatigue})]]) [@{fatigue_i18n}] + (?{@{circumstantial_i18n}|0}) [@{circumstances_i18n}] ]]}} {{banner=@{Communication_Description}}} {{label1=^{score}}} {{result1=@{Communication_Score}}} {{label2=^{weakness-m}}} {{result2=[[ [[floor(@{Fatigue})]] [@{fatigue_i18n}] + @{wound_total} [@{wounds_i18n}] ]]}} {{label3=^{circumstances-m}}} {{result3=[[(?{@{circumstantial_i18n}|0})]]}} {{botch-button=[@{botch_i18n}!](~@{character_name}|botch)}} {{crit-button=[@{critical_i18n}!](~@{character_name}|critical)}} {{stress=}}"></button>
                                <button type="roll" class="button stress-roll" name="roll_Communication_stress" value="&{template:ability} {{name=@{character_name}}} {{label0=^{communication}}} {{result0=[[ @{stress-die} + (@{Communication_Score}) [@{communication_i18n}] + (@{wound_total}) [@{wounds_i18n}] + ([[floor(@{Fatigue})]]) [@{fatigue_i18n}] + (?{@{circumstantial_i18n}|0}) [@{circumstances_i18n}] ]]}} {{banner=@{Communication_Description}}} {{label1=^{score}}} {{result1=@{Communication_Score}}} {{label2=^{weakness-m}}} {{result2=[[ [[floor(@{Fatigue})]] [@{fatigue_i18n}] + @{wound_total} [@{wounds_i18n}] ]]}} {{label3=^{circumstances-m}}} {{result3=[[(?{@{circumstantial_i18n}|0})]]}} {{botch-button=[@{botch_i18n}!](~@{character_name}|botch)}} {{crit-button=[@{critical_i18n}!](~@{character_name}|critical)}} {{stress=1}}"></button>
                            </div></td>
                        </tr>
                        <tr><td colspan="5" style="padding-top: 15px ;margin-bottom: 5px;border-bottom: black 1px solid;"></td></tr>
                        <tr><td colspan="5" style="padding-bottom: 13px"></td></tr>
                        <tr>
                            <th data-i18n="strength" >Strength</th>
                            <td><input type="text" class="heading_2" name="attr_Strength_Description"/></td>
                            <td><input type="text" class="number_1" name="attr_Strength_Score" value="0"/></td>
                            <td><input type="text" class="number_1" name="attr_Strength_Aging" value="0"/></td>
                            <td><div class="flex-container-center">
                                <button type="roll" class="button simple-roll" name="roll_Strength_simple" value="&{template:ability} {{name=@{character_name}}} {{label0=^{strength}}} {{result0=[[ @{simple-die} + (@{Strength_Score}) [@{strength_i18n}] + (@{wound_total}) [@{wounds_i18n}] + ([[floor(@{Fatigue})]]) [@{fatigue_i18n}] + (?{@{circumstantial_i18n}|0}) [@{circumstances_i18n}] ]]}} {{banner=@{Strength_Description}}} {{label1=^{score}}} {{result1=@{Strength_Score}}} {{label2=^{weakness-m}}} {{result2=[[ [[floor(@{Fatigue})]] [@{fatigue_i18n}] + @{wound_total} [@{wounds_i18n}] ]]}} {{label3=^{circumstances-m}}} {{result3=[[(?{@{circumstantial_i18n}|0})]]}} {{botch-button=[@{botch_i18n}!](~@{character_name}|botch)}} {{crit-button=[@{critical_i18n}!](~@{character_name}|critical)}} {{stress=}}"></button>
                                <button type="roll" class="button stress-roll" name="roll_Strength_stress" value="&{template:ability} {{name=@{character_name}}} {{label0=^{strength}}} {{result0=[[ @{stress-die} + (@{Strength_Score}) [@{strength_i18n}] + (@{wound_total}) [@{wounds_i18n}] + ([[floor(@{Fatigue})]]) [@{fatigue_i18n}] + (?{@{circumstantial_i18n}|0}) [@{circumstances_i18n}] ]]}} {{banner=@{Strength_Description}}} {{label1=^{score}}} {{result1=@{Strength_Score}}} {{label2=^{weakness-m}}} {{result2=[[ [[floor(@{Fatigue})]] [@{fatigue_i18n}] + @{wound_total} [@{wounds_i18n}] ]]}} {{label3=^{circumstances-m}}} {{result3=[[(?{@{circumstantial_i18n}|0})]]}} {{botch-button=[@{botch_i18n}!](~@{character_name}|botch)}} {{crit-button=[@{critical_i18n}!](~@{character_name}|critical)}} {{stress=1}}"></button>
                            </div></td>
                        </tr>
                        <tr>
                            <th data-i18n="stamina" >Stamina</th>
                            <td><input type="text" class="heading_2" name="attr_Stamina_Description"/></td>
                            <td><input type="text" class="number_1" name="attr_Stamina_Score" value="0"/></td>
                            <td><input type="text" class="number_1" name="attr_Stamina_Aging" value="0"/></td>
                            <td><div class="flex-container-center">
                                <button type="roll" class="button simple-roll" name="roll_Stamina_simple" value="&{template:ability} {{name=@{character_name}}} {{label0=^{stamina}}} {{result0=[[ @{simple-die} + (@{Stamina_Score}) [@{stamina_i18n}] + (@{wound_total}) [@{wounds_i18n}] + ([[floor(@{Fatigue})]]) [@{fatigue_i18n}] + (?{@{circumstantial_i18n}|0}) [@{circumstances_i18n}] ]]}} {{banner=@{Stamina_Description}}} {{label1=^{score}}} {{result1=@{Stamina_Score}}} {{label2=^{weakness-m}}} {{result2=[[ [[floor(@{Fatigue})]] [@{fatigue_i18n}] + @{wound_total} [@{wounds_i18n}] ]]}} {{label3=^{circumstances-m}}} {{result3=[[(?{@{circumstantial_i18n}|0})]]}} {{botch-button=[@{botch_i18n}!](~@{character_name}|botch)}} {{crit-button=[@{critical_i18n}!](~@{character_name}|critical)}} {{stress=}}"></button>
                                <button type="roll" class="button stress-roll" name="roll_Stamina_stress" value="&{template:ability} {{name=@{character_name}}} {{label0=^{stamina}}} {{result0=[[ @{stress-die} + (@{Stamina_Score}) [@{stamina_i18n}] + (@{wound_total}) [@{wounds_i18n}] + ([[floor(@{Fatigue})]]) [@{fatigue_i18n}] + (?{@{circumstantial_i18n}|0}) [@{circumstances_i18n}] ]]}} {{banner=@{Stamina_Description}}} {{label1=^{score}}} {{result1=@{Stamina_Score}}} {{label2=^{weakness-m}}} {{result2=[[ [[floor(@{Fatigue})]] [@{fatigue_i18n}] + @{wound_total} [@{wounds_i18n}] ]]}} {{label3=^{circumstances-m}}} {{result3=[[(?{@{circumstantial_i18n}|0})]]}} {{botch-button=[@{botch_i18n}!](~@{character_name}|botch)}} {{crit-button=[@{critical_i18n}!](~@{character_name}|critical)}} {{stress=1}}"></button>
                            </div></td>
                        </tr>
                        <tr>
                            <th data-i18n="dexterity" >Dexterity</th>
                            <td><input type="text" class="heading_2" name="attr_Dexterity_Description"/></td>
                            <td><input type="text" class="number_1" name="attr_Dexterity_Score" value="0"/></td>
                            <td><input type="text" class="number_1" name="attr_Dexterity_Aging" value="0"/></td>
                            <td><div class="flex-container-center">
                                <button type="roll" class="button simple-roll" name="roll_Dexterity_simple" value="&{template:ability} {{name=@{character_name}}} {{label0=^{dexterity}}} {{result0=[[ @{simple-die} + (@{Dexterity_Score}) [@{dexterity_i18n}] + (@{wound_total}) [@{wounds_i18n}] + ([[floor(@{Fatigue})]]) [@{fatigue_i18n}] + (?{@{circumstantial_i18n}|0}) [@{circumstances_i18n}] ]]}} {{banner=@{Dexterity_Description}}} {{label1=^{score}}} {{result1=@{Dexterity_Score}}} {{label2=^{weakness-m}}} {{result2=[[ [[floor(@{Fatigue})]] [@{fatigue_i18n}] + @{wound_total} [@{wounds_i18n}] ]]}} {{label3=^{circumstances-m}}} {{result3=[[(?{@{circumstantial_i18n}|0})]]}} {{botch-button=[@{botch_i18n}!](~@{character_name}|botch)}} {{crit-button=[@{critical_i18n}!](~@{character_name}|critical)}} {{stress=}}"></button>
                                <button type="roll" class="button stress-roll" name="roll_Dexterity_stress" value="&{template:ability} {{name=@{character_name}}} {{label0=^{dexterity}}} {{result0=[[ @{stress-die} + (@{Dexterity_Score}) [@{dexterity_i18n}] + (@{wound_total}) [@{wounds_i18n}] + ([[floor(@{Fatigue})]]) [@{fatigue_i18n}] + (?{@{circumstantial_i18n}|0}) [@{circumstances_i18n}] ]]}} {{banner=@{Dexterity_Description}}} {{label1=^{score}}} {{result1=@{Dexterity_Score}}} {{label2=^{weakness-m}}} {{result2=[[ [[floor(@{Fatigue})]] [@{fatigue_i18n}] + @{wound_total} [@{wounds_i18n}] ]]}} {{label3=^{circumstances-m}}} {{result3=[[(?{@{circumstantial_i18n}|0})]]}} {{botch-button=[@{botch_i18n}!](~@{character_name}|botch)}} {{crit-button=[@{critical_i18n}!](~@{character_name}|critical)}} {{stress=1}}"></button>
                            </div></td>
                        </tr>
                        <tr>
                            <th data-i18n="quickness" >Quickness</th>
                            <td><input type="text" class="heading_2" name="attr_Quickness_Description"/></td>
                            <td><input type="text" class="number_1" name="attr_Quickness_Score" value="0"/></td>
                            <td><input type="text" class="number_1" name="attr_Quickness_Aging" value="0"/></td>
                            <td><div class="flex-container-center">
                                <button type="roll" class="button simple-roll" name="roll_Quickness_simple" value="&{template:ability} {{name=@{character_name}}} {{label0=^{quickness}}} {{result0=[[ @{simple-die} + (@{Quickness_Score}) [@{quickness_i18n}] + (@{wound_total}) [@{wounds_i18n}] + ([[floor(@{Fatigue})]]) [@{fatigue_i18n}] + (?{@{circumstantial_i18n}|0}) [@{circumstances_i18n}] ]]}} {{banner=@{Quickness_Description}}} {{label1=^{score}}} {{result1=@{Quickness_Score}}} {{label2=^{weakness-m}}} {{result2=[[ [[floor(@{Fatigue})]] [@{fatigue_i18n}] + @{wound_total} [@{wounds_i18n}] ]]}} {{label3=^{circumstances-m}}} {{result3=[[(?{@{circumstantial_i18n}|0})]]}} {{botch-button=[@{botch_i18n}!](~@{character_name}|botch)}} {{crit-button=[@{critical_i18n}!](~@{character_name}|critical)}} {{stress=}}"></button>
                                <button type="roll" class="button stress-roll" name="roll_Quickness_stress" value="&{template:ability} {{name=@{character_name}}} {{label0=^{quickness}}} {{result0=[[ @{stress-die} + (@{Quickness_Score}) [@{quickness_i18n}] + (@{wound_total}) [@{wounds_i18n}] + ([[floor(@{Fatigue})]]) [@{fatigue_i18n}] + (?{@{circumstantial_i18n}|0}) [@{circumstances_i18n}] ]]}} {{banner=@{Quickness_Description}}} {{label1=^{score}}} {{result1=@{Quickness_Score}}} {{label2=^{weakness-m}}} {{result2=[[ [[floor(@{Fatigue})]] [@{fatigue_i18n}] + @{wound_total} [@{wounds_i18n}] ]]}} {{label3=^{circumstances-m}}} {{result3=[[(?{@{circumstantial_i18n}|0})]]}} {{botch-button=[@{botch_i18n}!](~@{character_name}|botch)}} {{crit-button=[@{critical_i18n}!](~@{character_name}|critical)}} {{stress=1}}"></button>
                            </div></td>
                        </tr>
                    </table>
                </div>
                <!-- Aging -->
                <div>
                    <table class="table_2" style="border-width: 0px;">
                        <tr>
                            <th><h4 class="heading_label" data-i18n="decrepitude-aging" >Decrepitude/Aging</h4></th>
                            <td><input type="text" class="number_1" name="attr_Decrepitude" value="0"/></td>
                        </tr>
                        <tr>
                            <td colspan="2"><textarea class="textarea_2" name="attr_Decrepitude_effects"></textarea></td>
                        </tr>
                    </table>
                </div>
                <!-- Effects -->
                <div>
                    <h4 class="heading_label" style="margin-bottom: 0px;" data-i18n="ongoing-effects" >Ongoing Effects</h4>
                    <textarea class="textarea_2" name="attr_Longevity_Scars"></textarea>
                </div>
            </div>
            <!-- Abilities -->
            <div class='col'>
                <h4 class="heading_label" data-i18n="abilities" style="margin-bottom: 15px;">Abilities</h4>
                <div>
                    <span class="has-tooltip">
                        <span data-i18n="characteristic" style="font-family: 'Macondo', cursive; color: #663333; font-size: 1.3em;">Characteristic</span>
                        <span class="tooltip" data-i18n="tooltip-default-characteristic">Default characteristic to use. Can be overriden per ability.</span>
                    </span>
                    <select class="select_1" name="attr_global_Ability_CharacName">
                        <option value="Intelligence" data-i18n="intelligence" >Intelligence</option>
                        <option value="Perception" data-i18n="perception" >Perception</option>
                        <option value="Presence" data-i18n="presence" >Presence</option>
                        <option value="Communication" data-i18n="communication" >Communication</option>
                        <option value="Strength" data-i18n="strength" >Strength</option>
                        <option value="Stamina" data-i18n="stamina" >Stamina</option>
                        <option value="Dexterity" data-i18n="dexterity" >Dexterity</option>
                        <option value="Quickness" data-i18n="quickness" >Quickness</option>
                    </select>
                </div>
                <table class="table_2" style="width:400px;">
                    <tr>
                        <td><div style="width:40px;"></div></td>
                        <td><div style="width:210px;" data-i18n="ability" >Ability</div></td>
                        <td><div style="width:60px;" data-i18n="score" >Score</div></td>
                        <td><div style="width:40px;">*</div></td>
                    </tr>
                </table>
                <fieldset class="repeating_ability">
                    <table class="table_2" style="width:400px;">
                        <tr>
                            <td width="30px"><div class="flex-container-center">
                                <button type="roll" class="button simple-roll" name="roll_ability_simple" value="&{template:ability} {{name=@{character_name}}} {{label0=@{Ability_name}}} {{result0=[[ @{simple-die} + (@{Ability_Score} + @{Ability_Puissant}) [@{Ability_name}] + (@{sys_at}@{character_name}@{sys_pipe}@{Ability_CharacName}_Score@{sys_rbk}) [@{sys_at}@{character_name}@{sys_pipe}@{Ability_CharacName}_i18n@{sys_rbk}] + (@{wound_total}) [@{wounds_i18n}] + ([[floor(@{Fatigue})]]) [@{fatigue_i18n}] + (?{@{circumstantial_i18n}|0}) [@{circumstances_i18n}] ]]}} {{banner=@{Ability_Speciality}}} {{label1=^{rank}}} {{result1=[[ @{Ability_Score} + @{Ability_Puissant} ]]}} {{label2=@{sys_at}@{character_name}@{sys_pipe}@{Ability_CharacName}_i18n@{sys_rbk}}} {{result2=[[ @{sys_at}@{character_name}@{sys_pipe}@{Ability_CharacName}_Score@{sys_rbk} ]]}} {{label3=^{weakness-m}}} {{result3=[[ ([[floor(@{Fatigue})]]) [@{fatigue_i18n}] + (@{wound_total}) [@{wounds_i18n}] ]]}} {{label4=^{circumstances-m}}} {{result4=[[ (?{@{circumstantial_i18n}|0}) ]]}} {{botch-button=[@{botch_i18n}!](~@{character_name}|botch)}} {{crit-button=[@{critical_i18n}!](~@{character_name}|critical)}} {{stress=}}"></button>
                                <button type="roll" class="button stress-roll" name="roll_ability_stress" value="&{template:ability} {{name=@{character_name}}} {{label0=@{Ability_name}}} {{result0=[[ @{stress-die} + (@{Ability_Score} + @{Ability_Puissant}) [@{Ability_name}] + (@{sys_at}@{character_name}@{sys_pipe}@{Ability_CharacName}_Score@{sys_rbk}) [@{sys_at}@{character_name}@{sys_pipe}@{Ability_CharacName}_i18n@{sys_rbk}] + (@{wound_total}) [@{wounds_i18n}] + ([[floor(@{Fatigue})]]) [@{fatigue_i18n}] + (?{@{circumstantial_i18n}|0}) [@{circumstances_i18n}] ]]}} {{banner=@{Ability_Speciality}}} {{label1=^{rank}}} {{result1=[[ @{Ability_Score} + @{Ability_Puissant} ]]}} {{label2=@{sys_at}@{character_name}@{sys_pipe}@{Ability_CharacName}_i18n@{sys_rbk}}} {{result2=[[ @{sys_at}@{character_name}@{sys_pipe}@{Ability_CharacName}_Score@{sys_rbk} ]]}} {{label3=^{weakness-m}}} {{result3=[[ ([[floor(@{Fatigue})]]) [@{fatigue_i18n}] + (@{wound_total}) [@{wounds_i18n}] ]]}} {{label4=^{circumstances-m}}} {{result4=[[ (?{@{circumstantial_i18n}|0}) ]]}} {{botch-button=[@{botch_i18n}!](~@{character_name}|botch)}} {{crit-button=[@{critical_i18n}!](~@{character_name}|critical)}} {{stress=1}}"></button>
                            </div></td>
                            <td width="240px"><input type="text" style="width:220px;" class="heading_4" name="attr_Ability_name"/></td>
                            <td><input type="number" class="number_2" name="attr_Ability_TotalScore" value="[[(@{Ability_Score}) + (@{Ability_Puissant})]]" disabled="true" /></td>
                            <th><div style="width:40px;"><input type="checkbox" class="hider checkbox_1" name="attr_Ability_show" value="1" checked/><span></span></div></th>
                        </tr>
                    </table>
                    <input type="checkbox" class="hider hidden" value="1" name="attr_Ability_show" checked/>
                    <div class="hide" style="margin-bottom: 15px;">
                        <table class="table_2" style="width:400px">
                            <tr>
                                <th style="padding-bottom: 2px;">
                                    <span class="has-tooltip">
                                        <span data-i18n="characteristic">Characteristic</span>
                                        <span class="tooltip" data-i18n="tooltip-ability-characteristic">Select the caracteristic to use. Overrides the gobal selector.<br>"-Characteristic-" uses the global selector, "-Ask-" triggers a roll query (pop-up) for each roll.</span>
                                    </span>
                                </th>
                                <th data-i18n="speciality" >Speciality</th>
                                <th data-i18n="score" >Score</th>
                                <th data-i18n="bonus" >Bonus</th>
                            </tr>
                            <tr>
                                <td>
                                    <select class="select_1" name="attr_Ability_CharacName">
                                        <option class="italic" value="global_char" data-i18n="characteristic-choice" >-Characteristic-</option>
                                        <option class="italic" value="ask" data-i18n="ask" >-Ask-</option>
                                        <option value="Intelligence" data-i18n="intelligence" >Intelligence</option>
                                        <option value="Perception" data-i18n="perception" >Perception</option>
                                        <option value="Presence" data-i18n="presence" >Presence</option>
                                        <option value="Communication" data-i18n="communication" >Communication</option>
                                        <option value="Strength" data-i18n="strength" >Strength</option>
                                        <option value="Stamina" data-i18n="stamina" >Stamina</option>
                                        <option value="Dexterity" data-i18n="dexterity" >Dexterity</option>
                                        <option value="Quickness" data-i18n="quickness" >Quickness</option>
                                    </select>
                                </td>
                                <td><input type="text" class="heading_4" name="attr_Ability_Speciality" data-i18n-placeholder="speciality" placeholder="Speciality" /></td>
                                <td><input type="number" class="number_2" name="attr_Ability_Score" value="0"/></td>
                                <td><input type="text" class="number_2" name="attr_Ability_Puissant" value="0"/><span></span></td>
                            </tr>
                            <tr>
                                <th colspan="2"><span class="flex-container-left">XP <span class="flex-container-left">
                                        <span class="has-tooltip">
                                            <input type="text" class="number-xp" name="attr_Ability_exp" value="0"/>
                                            <span class="tooltip" data-i18n="tooltip-xp-input">XP points in this art or ability. You can store either the total amount of XP, or just the XP towards the next score.</span>
                                        </span>
                                        <span class="flex-container-center">(
                                            <span class="has-tooltip">
                                                <input type="number" class="number-xp advance" name="attr_Ability_advancementExp" value="(5 - ((@{AcceleratedCheck}) * 4)) * ((@{Ability_Score}) + 1)" disabled="true"/>
                                                <span class="tooltip" style="width: 200px; margin-left: -100px;" data-i18n="tooltip-xp-step">Additional XP required for the next score, beyond the XP for the current level.<br>If you store only the XP towards the next score in the xp input, increase the score when this amount is reached.</span>
                                            </span>/
                                            <span class="has-tooltip">
                                                <input type="number" class="number-xp total" name="attr_Ability_totalExp" value="(5 - ((@{AcceleratedCheck}) * 4)) * (((@{Ability_Score}) + 1) * ((@{Ability_Score}) + 2) / 2)" disabled="true"/>
                                                <span class="tooltip" style="width: 200px; margin-left: -100px;" data-i18n="tooltip-xp-total">Total XP required for the next score.<br>If you store the total XP in the XP input, increase the score when this amount is reached.</span>
                                            </span>)
                                        </span>
                                    </span>
                                    </span></th>
                                <td colspan="2">
                                    <span data-i18n="accelerated-">Accelerated</span>
                                    <input type="checkbox" class="check" value="1" name="attr_AcceleratedCheck">
                                </td>
                            </tr>
                        </table>
                    </div>
                </fieldset>
            </div>
        </div>
    </div>
</div>

<!-- 3 Magic -->
<div class="tab-content tab3">
    <!-- Techniques & Forms -->
    <div>
        <div class="3colrow" style="margin-top:10px;">
            <div class='col' style="margin-right: 20px">
                <h4 class="heading_label" data-i18n="techniques" >Techniques</h4>
                <table class="table_3" style="width:270px;margin-bottom:16px;">
                    <tr>
                        <th><div style="width:35px;" data-i18n="score" >Score</div></th>
                        <th><div style="width:55px;" data-i18n="art" >Art</div></th>
                        <th><div style="width:110px;" data-i18n="exp" >Exp.</div></th>
                        <th><div style="width:45px;" data-i18n="bonus" >Bonus</div></th>
                    </tr>
                    <tr>
                        <td><input type="text" class="number_3" name="attr_Creo_Score" value="0"/></td>
                        <td data-i18n="creo" >Creo</td>
                        <td>
                                            <span class="flex-container-left">
                                <span class="has-tooltip">
                                    <input type="text" class="number-xp" name="attr_Creo_exp" value="0"/>
                                    <span class="tooltip" data-i18n="tooltip-xp-input">XP points in this art or ability. You can store either the total amount of XP, or just the XP towards the next score.</span>
                                </span>
                                <span class="flex-container-center">(
                                    <span class="has-tooltip">
                                        <input type="number" class="number-xp advance" name="attr_Creo_advancementExp" value="1 * ((@{Creo_Score}) + 1)" disabled="true"/>
                                        <span class="tooltip" style="width: 200px; margin-left: -100px;" data-i18n="tooltip-xp-step">Additional XP required for the next score, beyond the XP for the current level.<br>If you store only the XP towards the next score in the xp input, increase the score when this amount is reached.</span>
                                    </span>/
                                    <span class="has-tooltip">
                                        <input type="number" class="number-xp total" name="attr_Creo_totalExp" value="1 * (((@{Creo_Score}) + 1) * ((@{Creo_Score}) + 2) / 2)" disabled="true"/>
                                        <span class="tooltip" style="width: 200px; margin-left: -100px;" data-i18n="tooltip-xp-total">Total XP required for the next score.<br>If you store the total XP in the XP input, increase the score when this amount is reached.</span>
                                    </span>)
                                </span>
                            </span>
                    
                        </td>
                        <td style="text-align: center">
                            <input type="text" class="number_3 minor" name="attr_Creo_Puissant" value="0"/>
                        </td>
                    </tr>
                    <tr>
                        <td><input type="text" class="number_3" name="attr_Intellego_Score" value="0"/></td>
                        <td data-i18n="intellego" >Intellego</td>
                        <td>
                                            <span class="flex-container-left">
                                <span class="has-tooltip">
                                    <input type="text" class="number-xp" name="attr_Intellego_exp" value="0"/>
                                    <span class="tooltip" data-i18n="tooltip-xp-input">XP points in this art or ability. You can store either the total amount of XP, or just the XP towards the next score.</span>
                                </span>
                                <span class="flex-container-center">(
                                    <span class="has-tooltip">
                                        <input type="number" class="number-xp advance" name="attr_Intellego_advancementExp" value="1 * ((@{Intellego_Score}) + 1)" disabled="true"/>
                                        <span class="tooltip" style="width: 200px; margin-left: -100px;" data-i18n="tooltip-xp-step">Additional XP required for the next score, beyond the XP for the current level.<br>If you store only the XP towards the next score in the xp input, increase the score when this amount is reached.</span>
                                    </span>/
                                    <span class="has-tooltip">
                                        <input type="number" class="number-xp total" name="attr_Intellego_totalExp" value="1 * (((@{Intellego_Score}) + 1) * ((@{Intellego_Score}) + 2) / 2)" disabled="true"/>
                                        <span class="tooltip" style="width: 200px; margin-left: -100px;" data-i18n="tooltip-xp-total">Total XP required for the next score.<br>If you store the total XP in the XP input, increase the score when this amount is reached.</span>
                                    </span>)
                                </span>
                            </span>
                    
                        </td>
                        <td style="text-align: center">
                            <input type="text" class="number_3 minor" name="attr_Intellego_Puissant" value="0"/>
                        </td>
                    </tr>
                    <tr>
                        <td><input type="text" class="number_3" name="attr_Muto_Score" value="0"/></td>
                        <td data-i18n="muto" >Muto</td>
                        <td>
                                            <span class="flex-container-left">
                                <span class="has-tooltip">
                                    <input type="text" class="number-xp" name="attr_Muto_exp" value="0"/>
                                    <span class="tooltip" data-i18n="tooltip-xp-input">XP points in this art or ability. You can store either the total amount of XP, or just the XP towards the next score.</span>
                                </span>
                                <span class="flex-container-center">(
                                    <span class="has-tooltip">
                                        <input type="number" class="number-xp advance" name="attr_Muto_advancementExp" value="1 * ((@{Muto_Score}) + 1)" disabled="true"/>
                                        <span class="tooltip" style="width: 200px; margin-left: -100px;" data-i18n="tooltip-xp-step">Additional XP required for the next score, beyond the XP for the current level.<br>If you store only the XP towards the next score in the xp input, increase the score when this amount is reached.</span>
                                    </span>/
                                    <span class="has-tooltip">
                                        <input type="number" class="number-xp total" name="attr_Muto_totalExp" value="1 * (((@{Muto_Score}) + 1) * ((@{Muto_Score}) + 2) / 2)" disabled="true"/>
                                        <span class="tooltip" style="width: 200px; margin-left: -100px;" data-i18n="tooltip-xp-total">Total XP required for the next score.<br>If you store the total XP in the XP input, increase the score when this amount is reached.</span>
                                    </span>)
                                </span>
                            </span>
                    
                        </td>
                        <td style="text-align: center">
                            <input type="text" class="number_3 minor" name="attr_Muto_Puissant" value="0"/>
                        </td>
                    </tr>
                    <tr>
                        <td><input type="text" class="number_3" name="attr_Perdo_Score" value="0"/></td>
                        <td data-i18n="perdo" >Perdo</td>
                        <td>
                                            <span class="flex-container-left">
                                <span class="has-tooltip">
                                    <input type="text" class="number-xp" name="attr_Perdo_exp" value="0"/>
                                    <span class="tooltip" data-i18n="tooltip-xp-input">XP points in this art or ability. You can store either the total amount of XP, or just the XP towards the next score.</span>
                                </span>
                                <span class="flex-container-center">(
                                    <span class="has-tooltip">
                                        <input type="number" class="number-xp advance" name="attr_Perdo_advancementExp" value="1 * ((@{Perdo_Score}) + 1)" disabled="true"/>
                                        <span class="tooltip" style="width: 200px; margin-left: -100px;" data-i18n="tooltip-xp-step">Additional XP required for the next score, beyond the XP for the current level.<br>If you store only the XP towards the next score in the xp input, increase the score when this amount is reached.</span>
                                    </span>/
                                    <span class="has-tooltip">
                                        <input type="number" class="number-xp total" name="attr_Perdo_totalExp" value="1 * (((@{Perdo_Score}) + 1) * ((@{Perdo_Score}) + 2) / 2)" disabled="true"/>
                                        <span class="tooltip" style="width: 200px; margin-left: -100px;" data-i18n="tooltip-xp-total">Total XP required for the next score.<br>If you store the total XP in the XP input, increase the score when this amount is reached.</span>
                                    </span>)
                                </span>
                            </span>
                    
                        </td>
                        <td style="text-align: center">
                            <input type="text" class="number_3 minor" name="attr_Perdo_Puissant" value="0"/>
                        </td>
                    </tr>
                    <tr>
                        <td><input type="text" class="number_3" name="attr_Rego_Score" value="0"/></td>
                        <td data-i18n="rego" >Rego</td>
                        <td>
                                            <span class="flex-container-left">
                                <span class="has-tooltip">
                                    <input type="text" class="number-xp" name="attr_Rego_exp" value="0"/>
                                    <span class="tooltip" data-i18n="tooltip-xp-input">XP points in this art or ability. You can store either the total amount of XP, or just the XP towards the next score.</span>
                                </span>
                                <span class="flex-container-center">(
                                    <span class="has-tooltip">
                                        <input type="number" class="number-xp advance" name="attr_Rego_advancementExp" value="1 * ((@{Rego_Score}) + 1)" disabled="true"/>
                                        <span class="tooltip" style="width: 200px; margin-left: -100px;" data-i18n="tooltip-xp-step">Additional XP required for the next score, beyond the XP for the current level.<br>If you store only the XP towards the next score in the xp input, increase the score when this amount is reached.</span>
                                    </span>/
                                    <span class="has-tooltip">
                                        <input type="number" class="number-xp total" name="attr_Rego_totalExp" value="1 * (((@{Rego_Score}) + 1) * ((@{Rego_Score}) + 2) / 2)" disabled="true"/>
                                        <span class="tooltip" style="width: 200px; margin-left: -100px;" data-i18n="tooltip-xp-total">Total XP required for the next score.<br>If you store the total XP in the XP input, increase the score when this amount is reached.</span>
                                    </span>)
                                </span>
                            </span>
                    
                        </td>
                        <td style="text-align: center">
                            <input type="text" class="number_3 minor" name="attr_Rego_Puissant" value="0"/>
                        </td>
                    </tr>
                </table>
            </div>
            <div class='col' style="margin-right: 20px">
                <h4 class="heading_label" data-i18n="forms" >Forms</h4>
                <table class="table_3" style="width:260px;">
                    <tr>
                        <th><div style="width:35px;" data-i18n="score" >Score</div></th>
                        <th><div style="width:55px;" data-i18n="art" >Art</div></th>
                        <th><div style="width:110px;" data-i18n="exp" >Exp.</div></th>
                        <th><div style="width:45px;" data-i18n="bonus" >Bonus</div></th>
                    </tr>
                    <tr>
                        <td><input type="text" class="number_3" name="attr_Animal_Score" value="0"/></td>
                        <td data-i18n="animal" >Animal</td>
                        <td>
                                        <span class="flex-container-left">
                                <span class="has-tooltip">
                                    <input type="text" class="number-xp" name="attr_Animal_exp" value="0"/>
                                    <span class="tooltip" data-i18n="tooltip-xp-input">XP points in this art or ability. You can store either the total amount of XP, or just the XP towards the next score.</span>
                                </span>
                                <span class="flex-container-center">(
                                    <span class="has-tooltip">
                                        <input type="number" class="number-xp advance" name="attr_Animal_advancementExp" value="1 * ((@{Animal_Score}) + 1)" disabled="true"/>
                                        <span class="tooltip" style="width: 200px; margin-left: -100px;" data-i18n="tooltip-xp-step">Additional XP required for the next score, beyond the XP for the current level.<br>If you store only the XP towards the next score in the xp input, increase the score when this amount is reached.</span>
                                    </span>/
                                    <span class="has-tooltip">
                                        <input type="number" class="number-xp total" name="attr_Animal_totalExp" value="1 * (((@{Animal_Score}) + 1) * ((@{Animal_Score}) + 2) / 2)" disabled="true"/>
                                        <span class="tooltip" style="width: 200px; margin-left: -100px;" data-i18n="tooltip-xp-total">Total XP required for the next score.<br>If you store the total XP in the XP input, increase the score when this amount is reached.</span>
                                    </span>)
                                </span>
                            </span>
                    
                        </td>
                        <td style="text-align: center"><input type="text" class="number_3 minor" name="attr_Animal_Puissant" value="0"/></td>
                    </tr>
                    <tr>
                        <td><input type="text" class="number_3" name="attr_Aquam_Score" value="0"/></td>
                        <td data-i18n="aquam" >Aquam</td>
                        <td>
                                        <span class="flex-container-left">
                                <span class="has-tooltip">
                                    <input type="text" class="number-xp" name="attr_Aquam_exp" value="0"/>
                                    <span class="tooltip" data-i18n="tooltip-xp-input">XP points in this art or ability. You can store either the total amount of XP, or just the XP towards the next score.</span>
                                </span>
                                <span class="flex-container-center">(
                                    <span class="has-tooltip">
                                        <input type="number" class="number-xp advance" name="attr_Aquam_advancementExp" value="1 * ((@{Aquam_Score}) + 1)" disabled="true"/>
                                        <span class="tooltip" style="width: 200px; margin-left: -100px;" data-i18n="tooltip-xp-step">Additional XP required for the next score, beyond the XP for the current level.<br>If you store only the XP towards the next score in the xp input, increase the score when this amount is reached.</span>
                                    </span>/
                                    <span class="has-tooltip">
                                        <input type="number" class="number-xp total" name="attr_Aquam_totalExp" value="1 * (((@{Aquam_Score}) + 1) * ((@{Aquam_Score}) + 2) / 2)" disabled="true"/>
                                        <span class="tooltip" style="width: 200px; margin-left: -100px;" data-i18n="tooltip-xp-total">Total XP required for the next score.<br>If you store the total XP in the XP input, increase the score when this amount is reached.</span>
                                    </span>)
                                </span>
                            </span>
                    
                        </td>
                        <td style="text-align: center"><input type="text" class="number_3 minor" name="attr_Aquam_Puissant" value="0"/></td>
                    </tr>
                    <tr>
                        <td><input type="text" class="number_3" name="attr_Auram_Score" value="0"/></td>
                        <td data-i18n="auram" >Auram</td>
                        <td>
                                        <span class="flex-container-left">
                                <span class="has-tooltip">
                                    <input type="text" class="number-xp" name="attr_Auram_exp" value="0"/>
                                    <span class="tooltip" data-i18n="tooltip-xp-input">XP points in this art or ability. You can store either the total amount of XP, or just the XP towards the next score.</span>
                                </span>
                                <span class="flex-container-center">(
                                    <span class="has-tooltip">
                                        <input type="number" class="number-xp advance" name="attr_Auram_advancementExp" value="1 * ((@{Auram_Score}) + 1)" disabled="true"/>
                                        <span class="tooltip" style="width: 200px; margin-left: -100px;" data-i18n="tooltip-xp-step">Additional XP required for the next score, beyond the XP for the current level.<br>If you store only the XP towards the next score in the xp input, increase the score when this amount is reached.</span>
                                    </span>/
                                    <span class="has-tooltip">
                                        <input type="number" class="number-xp total" name="attr_Auram_totalExp" value="1 * (((@{Auram_Score}) + 1) * ((@{Auram_Score}) + 2) / 2)" disabled="true"/>
                                        <span class="tooltip" style="width: 200px; margin-left: -100px;" data-i18n="tooltip-xp-total">Total XP required for the next score.<br>If you store the total XP in the XP input, increase the score when this amount is reached.</span>
                                    </span>)
                                </span>
                            </span>
                    
                        </td>
                        <td style="text-align: center"><input type="text" class="number_3 minor" name="attr_Auram_Puissant" value="0"/></td>
                    </tr>
                    <tr>
                        <td><input type="text" class="number_3" name="attr_Corpus_Score" value="0"/></td>
                        <td data-i18n="corpus" >Corpus</td>
                        <td>
                                        <span class="flex-container-left">
                                <span class="has-tooltip">
                                    <input type="text" class="number-xp" name="attr_Corpus_exp" value="0"/>
                                    <span class="tooltip" data-i18n="tooltip-xp-input">XP points in this art or ability. You can store either the total amount of XP, or just the XP towards the next score.</span>
                                </span>
                                <span class="flex-container-center">(
                                    <span class="has-tooltip">
                                        <input type="number" class="number-xp advance" name="attr_Corpus_advancementExp" value="1 * ((@{Corpus_Score}) + 1)" disabled="true"/>
                                        <span class="tooltip" style="width: 200px; margin-left: -100px;" data-i18n="tooltip-xp-step">Additional XP required for the next score, beyond the XP for the current level.<br>If you store only the XP towards the next score in the xp input, increase the score when this amount is reached.</span>
                                    </span>/
                                    <span class="has-tooltip">
                                        <input type="number" class="number-xp total" name="attr_Corpus_totalExp" value="1 * (((@{Corpus_Score}) + 1) * ((@{Corpus_Score}) + 2) / 2)" disabled="true"/>
                                        <span class="tooltip" style="width: 200px; margin-left: -100px;" data-i18n="tooltip-xp-total">Total XP required for the next score.<br>If you store the total XP in the XP input, increase the score when this amount is reached.</span>
                                    </span>)
                                </span>
                            </span>
                    
                        </td>
                        <td style="text-align: center"><input type="text" class="number_3 minor" name="attr_Corpus_Puissant" value="0"/></td>
                    </tr>
                    <tr>
                        <td><input type="text" class="number_3" name="attr_Herbam_Score" value="0"/></td>
                        <td data-i18n="herbam" >Herbam</td>
                        <td>
                                        <span class="flex-container-left">
                                <span class="has-tooltip">
                                    <input type="text" class="number-xp" name="attr_Herbam_exp" value="0"/>
                                    <span class="tooltip" data-i18n="tooltip-xp-input">XP points in this art or ability. You can store either the total amount of XP, or just the XP towards the next score.</span>
                                </span>
                                <span class="flex-container-center">(
                                    <span class="has-tooltip">
                                        <input type="number" class="number-xp advance" name="attr_Herbam_advancementExp" value="1 * ((@{Herbam_Score}) + 1)" disabled="true"/>
                                        <span class="tooltip" style="width: 200px; margin-left: -100px;" data-i18n="tooltip-xp-step">Additional XP required for the next score, beyond the XP for the current level.<br>If you store only the XP towards the next score in the xp input, increase the score when this amount is reached.</span>
                                    </span>/
                                    <span class="has-tooltip">
                                        <input type="number" class="number-xp total" name="attr_Herbam_totalExp" value="1 * (((@{Herbam_Score}) + 1) * ((@{Herbam_Score}) + 2) / 2)" disabled="true"/>
                                        <span class="tooltip" style="width: 200px; margin-left: -100px;" data-i18n="tooltip-xp-total">Total XP required for the next score.<br>If you store the total XP in the XP input, increase the score when this amount is reached.</span>
                                    </span>)
                                </span>
                            </span>
                    
                        </td>
                        <td style="text-align: center"><input type="text" class="number_3 minor" name="attr_Herbam_Puissant" value="0"/></td>
                    </tr>
                </table>
            </div>
            <div class='col' style="margin-right: 20px">
                <div style="height:16px"></div>
                <table class="table_3" style="width:260px;">
                    <tr>
                        <th><div style="width:35px;" data-i18n="score" >Score</div></th>
                        <th><div style="width:55px;" data-i18n="art" >Art</div></th>
                        <th><div style="width:110px;" data-i18n="exp" >Exp.</div></th>
                        <th><div style="width:45px;" data-i18n="bonus" >Bonus</div></th>
                    </tr>
                    <tr>
                        <td><input type="text" class="number_3" name="attr_Ignem_Score" value="0"/></td>
                        <td data-i18n="ignem" >Ignem</td>
                        <td>
                                        <span class="flex-container-left">
                                <span class="has-tooltip">
                                    <input type="text" class="number-xp" name="attr_Ignem_exp" value="0"/>
                                    <span class="tooltip" data-i18n="tooltip-xp-input">XP points in this art or ability. You can store either the total amount of XP, or just the XP towards the next score.</span>
                                </span>
                                <span class="flex-container-center">(
                                    <span class="has-tooltip">
                                        <input type="number" class="number-xp advance" name="attr_Ignem_advancementExp" value="1 * ((@{Ignem_Score}) + 1)" disabled="true"/>
                                        <span class="tooltip" style="width: 200px; margin-left: -100px;" data-i18n="tooltip-xp-step">Additional XP required for the next score, beyond the XP for the current level.<br>If you store only the XP towards the next score in the xp input, increase the score when this amount is reached.</span>
                                    </span>/
                                    <span class="has-tooltip">
                                        <input type="number" class="number-xp total" name="attr_Ignem_totalExp" value="1 * (((@{Ignem_Score}) + 1) * ((@{Ignem_Score}) + 2) / 2)" disabled="true"/>
                                        <span class="tooltip" style="width: 200px; margin-left: -100px;" data-i18n="tooltip-xp-total">Total XP required for the next score.<br>If you store the total XP in the XP input, increase the score when this amount is reached.</span>
                                    </span>)
                                </span>
                            </span>
                    
                        </td>
                        <td style="text-align: center"><input type="text" class="number_3 minor" name="attr_Ignem_Puissant" value="0"/></td>
                    </tr>
                    <tr>
                        <td><input type="text" class="number_3" name="attr_Imaginem_Score" value="0"/></td>
                        <td data-i18n="imaginem" >Imaginem</td>
                        <td>
                                        <span class="flex-container-left">
                                <span class="has-tooltip">
                                    <input type="text" class="number-xp" name="attr_Imaginem_exp" value="0"/>
                                    <span class="tooltip" data-i18n="tooltip-xp-input">XP points in this art or ability. You can store either the total amount of XP, or just the XP towards the next score.</span>
                                </span>
                                <span class="flex-container-center">(
                                    <span class="has-tooltip">
                                        <input type="number" class="number-xp advance" name="attr_Imaginem_advancementExp" value="1 * ((@{Imaginem_Score}) + 1)" disabled="true"/>
                                        <span class="tooltip" style="width: 200px; margin-left: -100px;" data-i18n="tooltip-xp-step">Additional XP required for the next score, beyond the XP for the current level.<br>If you store only the XP towards the next score in the xp input, increase the score when this amount is reached.</span>
                                    </span>/
                                    <span class="has-tooltip">
                                        <input type="number" class="number-xp total" name="attr_Imaginem_totalExp" value="1 * (((@{Imaginem_Score}) + 1) * ((@{Imaginem_Score}) + 2) / 2)" disabled="true"/>
                                        <span class="tooltip" style="width: 200px; margin-left: -100px;" data-i18n="tooltip-xp-total">Total XP required for the next score.<br>If you store the total XP in the XP input, increase the score when this amount is reached.</span>
                                    </span>)
                                </span>
                            </span>
                    
                        </td>
                        <td style="text-align: center"><input type="text" class="number_3 minor" name="attr_Imaginem_Puissant" value="0"/></td>
                    </tr>
                    <tr>
                        <td><input type="text" class="number_3" name="attr_Mentem_Score" value="0"/></td>
                        <td data-i18n="mentem" >Mentem</td>
                        <td>
                                        <span class="flex-container-left">
                                <span class="has-tooltip">
                                    <input type="text" class="number-xp" name="attr_Mentem_exp" value="0"/>
                                    <span class="tooltip" data-i18n="tooltip-xp-input">XP points in this art or ability. You can store either the total amount of XP, or just the XP towards the next score.</span>
                                </span>
                                <span class="flex-container-center">(
                                    <span class="has-tooltip">
                                        <input type="number" class="number-xp advance" name="attr_Mentem_advancementExp" value="1 * ((@{Mentem_Score}) + 1)" disabled="true"/>
                                        <span class="tooltip" style="width: 200px; margin-left: -100px;" data-i18n="tooltip-xp-step">Additional XP required for the next score, beyond the XP for the current level.<br>If you store only the XP towards the next score in the xp input, increase the score when this amount is reached.</span>
                                    </span>/
                                    <span class="has-tooltip">
                                        <input type="number" class="number-xp total" name="attr_Mentem_totalExp" value="1 * (((@{Mentem_Score}) + 1) * ((@{Mentem_Score}) + 2) / 2)" disabled="true"/>
                                        <span class="tooltip" style="width: 200px; margin-left: -100px;" data-i18n="tooltip-xp-total">Total XP required for the next score.<br>If you store the total XP in the XP input, increase the score when this amount is reached.</span>
                                    </span>)
                                </span>
                            </span>
                    
                        </td>
                        <td style="text-align: center"><input type="text" class="number_3 minor" name="attr_Mentem_Puissant" value="0"/></td>
                    </tr>
                    <tr>
                        <td><input type="text" class="number_3" name="attr_Terram_Score" value="0"/></td>
                        <td data-i18n="terram" >Terram</td>
                        <td>
                                        <span class="flex-container-left">
                                <span class="has-tooltip">
                                    <input type="text" class="number-xp" name="attr_Terram_exp" value="0"/>
                                    <span class="tooltip" data-i18n="tooltip-xp-input">XP points in this art or ability. You can store either the total amount of XP, or just the XP towards the next score.</span>
                                </span>
                                <span class="flex-container-center">(
                                    <span class="has-tooltip">
                                        <input type="number" class="number-xp advance" name="attr_Terram_advancementExp" value="1 * ((@{Terram_Score}) + 1)" disabled="true"/>
                                        <span class="tooltip" style="width: 200px; margin-left: -100px;" data-i18n="tooltip-xp-step">Additional XP required for the next score, beyond the XP for the current level.<br>If you store only the XP towards the next score in the xp input, increase the score when this amount is reached.</span>
                                    </span>/
                                    <span class="has-tooltip">
                                        <input type="number" class="number-xp total" name="attr_Terram_totalExp" value="1 * (((@{Terram_Score}) + 1) * ((@{Terram_Score}) + 2) / 2)" disabled="true"/>
                                        <span class="tooltip" style="width: 200px; margin-left: -100px;" data-i18n="tooltip-xp-total">Total XP required for the next score.<br>If you store the total XP in the XP input, increase the score when this amount is reached.</span>
                                    </span>)
                                </span>
                            </span>
                    
                        </td>
                        <td style="text-align: center"><input type="text" class="number_3 minor" name="attr_Terram_Puissant" value="0"/></td>
                    </tr>
                    <tr>
                        <td><input type="text" class="number_3" name="attr_Vim_Score" value="0"/></td>
                        <td data-i18n="vim" >Vim</td>
                        <td>
                                        <span class="flex-container-left">
                                <span class="has-tooltip">
                                    <input type="text" class="number-xp" name="attr_Vim_exp" value="0"/>
                                    <span class="tooltip" data-i18n="tooltip-xp-input">XP points in this art or ability. You can store either the total amount of XP, or just the XP towards the next score.</span>
                                </span>
                                <span class="flex-container-center">(
                                    <span class="has-tooltip">
                                        <input type="number" class="number-xp advance" name="attr_Vim_advancementExp" value="1 * ((@{Vim_Score}) + 1)" disabled="true"/>
                                        <span class="tooltip" style="width: 200px; margin-left: -100px;" data-i18n="tooltip-xp-step">Additional XP required for the next score, beyond the XP for the current level.<br>If you store only the XP towards the next score in the xp input, increase the score when this amount is reached.</span>
                                    </span>/
                                    <span class="has-tooltip">
                                        <input type="number" class="number-xp total" name="attr_Vim_totalExp" value="1 * (((@{Vim_Score}) + 1) * ((@{Vim_Score}) + 2) / 2)" disabled="true"/>
                                        <span class="tooltip" style="width: 200px; margin-left: -100px;" data-i18n="tooltip-xp-total">Total XP required for the next score.<br>If you store the total XP in the XP input, increase the score when this amount is reached.</span>
                                    </span>)
                                </span>
                            </span>
                    
                        </td>
                        <td style="text-align: center"><input type="text" class="number_3 minor" name="attr_Vim_Puissant" value="0"/></td>
                    </tr>
                </table>
            </div>
        </div>
    </div>
    <div class="divider" style="height:15px;"><span>&nbsp;</span></div>
    <!-- Casting totals -->
    <div>
        <h4 class="heading_label" data-i18n="base-casting-totals" >Base Casting Totals</h4>
        <table class="table_3" style="width:100%;">
            <tr>
                <th data-i18n="spontaneous-spells" >Spontaneous Spells</th>
                <th style="width:30px;text-align:center;padding-left:0px;" data-i18n="roll" >Roll</th>
                <th data-i18n="total" >Total</th>
                <th data-i18n="technique" >Technique</th>
                <th data-i18n="form" >Form</th>
                <th data-i18n="focus" >Focus</th>
                <th data-i18n="deficiency" >Deficiency</th>
                <th data-i18n="sta" >Sta</th>
                <th data-i18n="aura" >Aura</th>
                <th data-i18n="artes-lib-" >Artes Lib.</th>
                <th data-i18n="philos-" >Philos.</th>
            </tr>
            <!-- Fatiguing Spontaneous -->
            <tr>
                <td data-i18n="fatiguing" >Fatiguing</td>
                <td><div class="flex-container-center">
                    <!-- <button style="margin: 0px auto;" type="roll" class="button simple-roll" name="roll_Spontaneous1_simple" value="$spontaneous_roll_simple$"></button> -->
                    <button style="margin: 0px auto;" type="roll" class="button stress-roll single-roll" name="roll_Spontaneous1_stress" value="&{template:arcane} {{label0=^{spontaneous} ^{casting}}} {{result0=[[ (@{stress-die} + @{Spontaneous1_Technique} + @{Spontaneous1_Form} + ([[@{Spontaneous1_Focus}]]) [@{focus_i18n}] + (@{gestures}) + (@{words}) + (@{Stamina_Score}) [@{stamina_i18n}] + (@{aura}) [@{aura_i18n}] + ([[floor(@{Fatigue})]]) [@{fatigue_i18n}] + (@{wound_total}) [@{wounds_i18n}] + (?{@{modifiers_i18n}|0}) [@{modifiers_i18n}] ) / ([[1 + (@{Spontaneous1_Deficiency})]] [@{deficiency_i18n}]) /2]]}} {{label1=^{aura}}} {{result1=@{aura}}} {{label2=^{weakness-m}}} {{result2=[[ (@{wound_total}) [@{wounds_i18n}] + [[floor(@{fatigue})]] [@{fatigue_i18n}] ]]}} {{label3=^{circumstances-m}}} {{result3=[[ ?{@{modifiers_i18n}|0} ]]}} {{botch-button=[@{botch_i18n}!](~@{character_name}|botch)}} {{crit-button=[@{critical_i18n}!](~@{character_name}|critical-spontaneous)}} {{stress=1}}"></button>
                </div></td>
                <td><input type="number" class="number_2" name="attr_Spontaneous1" value="((@{Spontaneous1_Technique} + @{Spontaneous1_Form} + (@{Spontaneous1_Focus}) + @{gestures} + @{words} + @{Stamina_Score} + @{aura})/2) / (1 + (@{Spontaneous1_Deficiency}))" disabled="true"/></td>
                <td>
                    <select class="select_1" name="attr_Spontaneous1_Technique">
                        <option class="italic" value="0 [@{technique_i18n}]" data-i18n="technique" >Technique</option>
                        <option value="(@{Creo_Score} + @{Creo_Puissant}) [@{creo_i18n}]" data-i18n="creo" >Creo</option>
                        <option value="(@{Intellego_Score} + @{Intellego_Puissant}) [@{intellego_i18n}]" data-i18n="intellego" >Intellego</option>
                        <option value="(@{Muto_Score} + @{Muto_Puissant}) [@{muto_i18n}]" data-i18n="muto" >Muto</option>
                        <option value="(@{Perdo_Score} + @{Perdo_Puissant}) [@{perdo_i18n}]" data-i18n="perdo" >Perdo</option>
                        <option value="(@{Rego_Score} + @{Rego_Puissant}) [@{rego_i18n}]" data-i18n="rego" >Rego</option>
                    </select>
                </td>
                <td>
                    <select class="select_1" name="attr_Spontaneous1_Form">
                        <option class="italic" value="0 [@{form_i18n}]" data-i18n="form" >Form</option>
                        <option value="(@{Animal_Score} + @{Animal_Puissant}) [@{animal_i18n}]" data-i18n="animal" >Animal</option>
                        <option value="(@{Aquam_Score} + @{Aquam_Puissant}) [@{aquam_i18n}]" data-i18n="aquam" >Aquam</option>
                        <option value="(@{Auram_Score} + @{Auram_Puissant}) [@{auram_i18n}]" data-i18n="auram" >Auram</option>
                        <option value="(@{Corpus_Score} + @{Corpus_Puissant}) [@{corpus_i18n}]" data-i18n="corpus" >Corpus</option>
                        <option value="(@{Herbam_Score} + @{Herbam_Puissant}) [@{herbam_i18n}]" data-i18n="herbam" >Herbam</option>
                        <option value="(@{Ignem_Score} + @{Ignem_Puissant}) [@{ignem_i18n}]" data-i18n="ignem" >Ignem</option>
                        <option value="(@{Imaginem_Score} + @{Imaginem_Puissant}) [@{imaginem_i18n}]" data-i18n="imaginem" >Imaginem</option>
                        <option value="(@{Mentem_Score} + @{Mentem_Puissant}) [@{mentem_i18n}]" data-i18n="mentem" >Mentem</option>
                        <option value="(@{Terram_Score} + @{Terram_Puissant}) [@{terram_i18n}]" data-i18n="terram" >Terram</option>
                        <option value="(@{Vim_Score} + @{Vim_Puissant}) [@{vim_i18n}]" data-i18n="vim" >Vim</option>
                    </select>
                </td>
                <td style="text-align: center;"><input type="checkbox" class="check" name="attr_Spontaneous1_Focus" value="((@{Spontaneous1_Technique} + @{Spontaneous1_Form} - abs(@{Spontaneous1_Technique} - @{Spontaneous1_Form}))/2)"></input></td>
                <td style="text-align: center;"><input type="checkbox" class="check" name="attr_Spontaneous1_Deficiency" value="1"></input></td>
                <td><input type="number" class="number_2" name="attr_Spontaneous1_Sta" value="@{Stamina_Score}" disabled="true"/></td>
                <td><input type="number" class="number_2" name="attr_Spontaneous1_aura" value="@{aura}" disabled="true"/></td>
                <td></td>
                <td></td>
            </tr>
            <!-- Ceremonial Spontaneous -->
            <tr>
                <td data-i18n="ceremonial" >Ceremonial</td>
                <td><div class="flex-container-center">
                    <!-- <button style="margin: 0px auto;" type="roll" class="button simple-roll" name="roll_Ceremonial_simple" value="$ceremonial_roll_simple$"></button> -->
                    <button style="margin: 0px auto;" type="roll" class="button stress-roll single-roll" name="roll_Ceremonial_stress" value="&{template:arcane} {{label0=^{ceremonial} ^{casting}}} {{result0=[[ (@{stress-die} + @{Ceremonial_Technique} + @{Ceremonial_Form} + ([[@{Ceremonial_Focus}]]) [@{focus_i18n}] + (@{gestures}) + (@{words}) + (@{Stamina_Score}) [@{stamina_i18n}] + (@{aura}) [@{aura_i18n}] + ([[floor(@{Fatigue})]]) [@{fatigue_i18n}] + (@{wound_total}) [@{wounds_i18n}] + (@{Ceremonial_Artes_Lib}) [@{artes_i18n}] + (@{Ceremonial_Philos}) [@{philos_i18n}] + (?{@{modifiers_i18n}|0}) [@{modifiers_i18n}] ) / ([[1 + (@{Ceremonial_Deficiency})]] [@{deficiency_i18n}]) /2 ]]}} {{label1=^{aura}}} {{result1=@{aura}}} {{label2=^{weakness-m}}} }} {{result2=[[ (@{wound_total}) [@{wounds_i18n}] + [[floor(@{fatigue})]] [@{fatigue_i18n}] ]]}} {{label3=^{circumstances-m}}} {{result3=?{@{modifiers_i18n}|0}}} {{botch-button=[@{botch_i18n}!](~@{character_name}|botch)}} {{crit-button=[@{critical_i18n}!](~@{character_name}|critical-spontaneous)}} {{stress=1}}"></button>
                </div></td>
                <td><input type="number" class="number_2" name="attr_Ceremonial" value="((@{Ceremonial_Technique} + @{Ceremonial_Form} + (@{Ceremonial_Focus}) + @{gestures} + @{words} + @{Stamina_Score} + @{aura} + @{Ceremonial_Artes_Lib} + @{Ceremonial_Philos})/2 ) / (1 + (@{Ceremonial_Deficiency}))" disabled="true"/></td>
                <td>
                    <select class="select_1" name="attr_Ceremonial_Technique">
                        <option class="italic" value="0 [@{technique_i18n}]" data-i18n="technique" >Technique</option>
                        <option value="(@{Creo_Score} + @{Creo_Puissant}) [@{creo_i18n}]" data-i18n="creo" >Creo</option>
                        <option value="(@{Intellego_Score} + @{Intellego_Puissant}) [@{intellego_i18n}]" data-i18n="intellego" >Intellego</option>
                        <option value="(@{Muto_Score} + @{Muto_Puissant}) [@{muto_i18n}]" data-i18n="muto" >Muto</option>
                        <option value="(@{Perdo_Score} + @{Perdo_Puissant}) [@{perdo_i18n}]" data-i18n="perdo" >Perdo</option>
                        <option value="(@{Rego_Score} + @{Rego_Puissant}) [@{rego_i18n}]" data-i18n="rego" >Rego</option>
                    </select>
                </td>
                <td>
                    <select class="select_1" name="attr_Ceremonial_Form">
                        <option class="italic" value="0 [@{form_i18n}]" data-i18n="form" >Form</option>
                        <option value="(@{Animal_Score} + @{Animal_Puissant}) [@{animal_i18n}]" data-i18n="animal" >Animal</option>
                        <option value="(@{Aquam_Score} + @{Aquam_Puissant}) [@{aquam_i18n}]" data-i18n="aquam" >Aquam</option>
                        <option value="(@{Auram_Score} + @{Auram_Puissant}) [@{auram_i18n}]" data-i18n="auram" >Auram</option>
                        <option value="(@{Corpus_Score} + @{Corpus_Puissant}) [@{corpus_i18n}]" data-i18n="corpus" >Corpus</option>
                        <option value="(@{Herbam_Score} + @{Herbam_Puissant}) [@{herbam_i18n}]" data-i18n="herbam" >Herbam</option>
                        <option value="(@{Ignem_Score} + @{Ignem_Puissant}) [@{ignem_i18n}]" data-i18n="ignem" >Ignem</option>
                        <option value="(@{Imaginem_Score} + @{Imaginem_Puissant}) [@{imaginem_i18n}]" data-i18n="imaginem" >Imaginem</option>
                        <option value="(@{Mentem_Score} + @{Mentem_Puissant}) [@{mentem_i18n}]" data-i18n="mentem" >Mentem</option>
                        <option value="(@{Terram_Score} + @{Terram_Puissant}) [@{terram_i18n}]" data-i18n="terram" >Terram</option>
                        <option value="(@{Vim_Score} + @{Vim_Puissant}) [@{vim_i18n}]" data-i18n="vim" >Vim</option>
                    </select>
                </td>
                <td style="text-align: center;"><input type="checkbox" class="check" name="attr_Ceremonial_Focus" value="((@{Ceremonial_Technique} + @{Ceremonial_Form} - abs(@{Ceremonial_Technique} - @{Ceremonial_Form}))/2)"></input></td>
                <td style="text-align: center;"><input type="checkbox" class="check" name="attr_Ceremonial_Deficiency" value="1"></input></td>
                <td><input type="number" class="number_2" name="attr_Ceremonial_Sta" value="@{Stamina_Score}" disabled="true"/></td>
                <td><input type="number" class="number_2" name="attr_Ceremonial_aura" value="@{aura}" disabled="true"/></td>
                <td><input type="number" class="number_2" name="attr_Ceremonial_Artes_Lib" value="0"/></td>
                <td><input type="number" class="number_2" name="attr_Ceremonial_Philos" value="0"/></td>

            </tr>
            <!-- Non Fatiguing Spontaneous -->
            <tr>
                <td data-i18n="non-fatiguing" >Non-Fatiguing</td>
                <td><div class="flex-container-center">
                    <button style="margin: 0px auto;" type="roll" class="button simple-roll single-roll" name="roll_Spontaneous2_nodice" value="&{template:arcane} {{label0=^{spontaneous} ^{casting}}} {{result0=[[ ( @{Spontaneous2_Technique} + @{Spontaneous2_Form} + ([[@{Spontaneous2_Focus}]]) [@{focus_i18n}] + (@{gestures}) + (@{words}) + (@{Stamina_Score}) [@{stamina_i18n}] + (@{aura}) [@{aura_i18n}] + ([[floor(@{Fatigue})]]) [@{fatigue_i18n}] + (@{wound_total}) [@{wounds_i18n}] + (?{@{modifiers_i18n}|0}) [@{modifiers_i18n}] ) / ([[1 + (@{Spontaneous1_Deficiency})]] [@{deficiency_i18n}]) /5]]}} {{label1=^{aura}}} {{result1=@{aura}}} {{label2=^{weakness-m}}} {{result2=[[ (@{wound_total}) [@{wounds_i18n}] + [[floor(@{fatigue})]] [@{fatigue_i18n}] ]]}} {{label3=^{circumstances-m}}} {{result3=[[ ?{@{modifiers_i18n}|0} ]]}}"></button>
                </div></td>
                <td><input type="number" class="number_2" name="attr_Spontaneous2" value="((@{Spontaneous2_Technique} + @{Spontaneous2_Form} + (@{Spontaneous2_Focus}) + @{gestures} + @{words} + @{Stamina_Score} + @{aura})/5) / (1 + (@{Spontaneous2_Deficiency}))" disabled="true"/></td>
                <td>
                    <select class="select_1" name="attr_Spontaneous2_Technique">
                        <option class="italic" value="0" data-i18n="technique" >Technique</option>
                        <option value="(@{Creo_Score} + @{Creo_Puissant}) [@{creo_i18n}]" data-i18n="creo" >Creo</option>
                        <option value="(@{Intellego_Score} + @{Intellego_Puissant}) [@{intellego_i18n}]" data-i18n="intellego" >Intellego</option>
                        <option value="(@{Muto_Score} + @{Muto_Puissant}) [@{muto_i18n}]" data-i18n="muto" >Muto</option>
                        <option value="(@{Perdo_Score} + @{Perdo_Puissant}) [@{perdo_i18n}]" data-i18n="perdo" >Perdo</option>
                        <option value="(@{Rego_Score} + @{Rego_Puissant}) [@{rego_i18n}]" data-i18n="rego" >Rego</option>
                    </select>
                </td>
                <td>
                    <select class="select_1" name="attr_Spontaneous2_Form">
                        <option class="italic" value="0" data-i18n="form" >Form</option>
                        <option value="(@{Animal_Score} + @{Animal_Puissant}) [@{animal_i18n}]" data-i18n="animal" >Animal</option>
                        <option value="(@{Aquam_Score} + @{Aquam_Puissant}) [@{aquam_i18n}]" data-i18n="aquam" >Aquam</option>
                        <option value="(@{Auram_Score} + @{Auram_Puissant}) [@{auram_i18n}]" data-i18n="auram" >Auram</option>
                        <option value="(@{Corpus_Score} + @{Corpus_Puissant}) [@{corpus_i18n}]" data-i18n="corpus" >Corpus</option>
                        <option value="(@{Herbam_Score} + @{Herbam_Puissant}) [@{herbam_i18n}]" data-i18n="herbam" >Herbam</option>
                        <option value="(@{Ignem_Score} + @{Ignem_Puissant}) [@{ignem_i18n}]" data-i18n="ignem" >Ignem</option>
                        <option value="(@{Imaginem_Score} + @{Imaginem_Puissant}) [@{imaginem_i18n}]" data-i18n="imaginem" >Imaginem</option>
                        <option value="(@{Mentem_Score} + @{Mentem_Puissant}) [@{mentem_i18n}]" data-i18n="mentem" >Mentem</option>
                        <option value="(@{Terram_Score} + @{Terram_Puissant}) [@{terram_i18n}]" data-i18n="terram" >Terram</option>
                        <option value="(@{Vim_Score} + @{Vim_Puissant}) [@{vim_i18n}]" data-i18n="vim" >Vim</option>
                    </select>
                </td>
                <td style="text-align: center;"><input type="checkbox" class="check" name="attr_Spontaneous2_Focus" value="((@{Spontaneous2_Technique} + @{Spontaneous2_Form} - abs(@{Spontaneous2_Technique} - @{Spontaneous2_Form}))/2)"></input></td>
                <td style="text-align: center;"><input type="checkbox" class="check" name="attr_Spontaneous2_Deficiency" value="1"></input></td>
                <td><input type="number" class="number_2" name="attr_Spontaneous2_Sta" value="@{Stamina_Score}" disabled="true"/></td>
                <td><input type="number" class="number_2" name="attr_Spontaneous2_aura" value="@{aura}" disabled="true"/></td>
                <td></td>
                <td></td>
            </tr>
            <tr>
                <th data-i18n="designed-spells" >Designed Spells</th>
                <td colspan="9"></td>
            </tr>
            <!-- Formulaic -->
            <tr>
                <td data-i18n="formulaic" >Formulaic</td>
                <td><div class="flex-container-center">
                    <button style="margin: 0px auto;" type="roll" class="button simple-roll" name="roll_Formulaic_simple" value="&{template:arcane} {{label0=^{formulaic} ^{casting}}} {{result0=[[ (@{simple-die} + @{Formulaic_Technique} + @{Formulaic_Form} + ([[@{Formulaic_Focus}]]) [@{focus_i18n}] + (@{gestures}) + (@{words}) + (@{Stamina_Score}) [@{stamina_i18n}] + (@{aura}) [@{aura_i18n}] + ([[floor(@{Fatigue})]]) [@{fatigue_i18n}] + (@{wound_total}) [@{wounds_i18n}] + (?{@{modifiers_i18n}|0}) [@{modifiers_i18n}]) / ([[1 + (@{Formulaic_Deficiency})]] [@{deficiency_i18n}]) ]]}} {{label1=^{aura}}} {{result1=@{aura}}} {{label2=^{weakness-m}}} {{result2=[[ (@{wound_total}) [@{wounds_i18n}] + [[floor(@{fatigue})]] [@{fatigue_i18n}] ]]}} {{label3=^{circumstances-m}}} {{result3=?{@{modifiers_i18n}|0}}} {{botch-button=[@{botch_i18n}!](~@{character_name}|botch)}} {{crit-button=[@{critical_i18n}!](~@{character_name}|critical)}} {{stress=}}"></button>
                    <button style="margin: 0px auto;" type="roll" class="button stress-roll" name="roll_Formulaic_stress" value="&{template:arcane} {{label0=^{formulaic} ^{casting}}} {{result0=[[ (@{stress-die} + @{Formulaic_Technique} + @{Formulaic_Form} + ([[@{Formulaic_Focus}]]) [@{focus_i18n}] + (@{gestures}) + (@{words}) + (@{Stamina_Score}) [@{stamina_i18n}] + (@{aura}) [@{aura_i18n}] + ([[floor(@{Fatigue})]]) [@{fatigue_i18n}] + (@{wound_total}) [@{wounds_i18n}] + (?{@{modifiers_i18n}|0}) [@{modifiers_i18n}]) / ([[1 + (@{Formulaic_Deficiency})]] [@{deficiency_i18n}]) ]]}} {{label1=^{aura}}} {{result1=@{aura}}} {{label2=^{weakness-m}}} {{result2=[[ (@{wound_total}) [@{wounds_i18n}] + [[floor(@{fatigue})]] [@{fatigue_i18n}] ]]}} {{label3=^{circumstances-m}}} {{result3=?{@{modifiers_i18n}|0}}} {{botch-button=[@{botch_i18n}!](~@{character_name}|botch)}} {{crit-button=[@{critical_i18n}!](~@{character_name}|critical)}} {{stress=1}}"></button>
                </div></td>
                <td><input type="number" class="number_2" name="attr_Formulaic" value="(@{Formulaic_Technique} + @{Formulaic_Form} + (@{Formulaic_Focus}) + @{gestures} + @{words} + @{Stamina_Score} + @{aura}) / (1 + (@{Formulaic_Deficiency}))" disabled="true"/></td>
                <td>
                    <select class="select_1" name="attr_Formulaic_Technique">
                        <option class="italic" value="0 [@{technique_i18n}]" data-i18n="technique" >Technique</option>
                        <option value="(@{Creo_Score} + @{Creo_Puissant}) [@{creo_i18n}]" data-i18n="creo" >Creo</option>
                        <option value="(@{Intellego_Score} + @{Intellego_Puissant}) [@{intellego_i18n}]" data-i18n="intellego" >Intellego</option>
                        <option value="(@{Muto_Score} + @{Muto_Puissant}) [@{muto_i18n}]" data-i18n="muto" >Muto</option>
                        <option value="(@{Perdo_Score} + @{Perdo_Puissant}) [@{perdo_i18n}]" data-i18n="perdo" >Perdo</option>
                        <option value="(@{Rego_Score} + @{Rego_Puissant}) [@{rego_i18n}]" data-i18n="rego" >Rego</option>
                    </select>
                </td>
                <td>
                    <select class="select_1" name="attr_Formulaic_Form">
                        <option class="italic" value="0 [@{form_i18n}]" data-i18n="form" >Form</option>
                        <option value="(@{Animal_Score} + @{Animal_Puissant}) [@{animal_i18n}]" data-i18n="animal" >Animal</option>
                        <option value="(@{Aquam_Score} + @{Aquam_Puissant}) [@{aquam_i18n}]" data-i18n="aquam" >Aquam</option>
                        <option value="(@{Auram_Score} + @{Auram_Puissant}) [@{auram_i18n}]" data-i18n="auram" >Auram</option>
                        <option value="(@{Corpus_Score} + @{Corpus_Puissant}) [@{corpus_i18n}]" data-i18n="corpus" >Corpus</option>
                        <option value="(@{Herbam_Score} + @{Herbam_Puissant}) [@{herbam_i18n}]" data-i18n="herbam" >Herbam</option>
                        <option value="(@{Ignem_Score} + @{Ignem_Puissant}) [@{ignem_i18n}]" data-i18n="ignem" >Ignem</option>
                        <option value="(@{Imaginem_Score} + @{Imaginem_Puissant}) [@{imaginem_i18n}]" data-i18n="imaginem" >Imaginem</option>
                        <option value="(@{Mentem_Score} + @{Mentem_Puissant}) [@{mentem_i18n}]" data-i18n="mentem" >Mentem</option>
                        <option value="(@{Terram_Score} + @{Terram_Puissant}) [@{terram_i18n}]" data-i18n="terram" >Terram</option>
                        <option value="(@{Vim_Score} + @{Vim_Puissant}) [@{vim_i18n}]" data-i18n="vim" >Vim</option>
                    </select>
                </td>
                <td style="text-align: center;"><input type="checkbox" class="check" name="attr_Formulaic_Focus" value="((@{Formulaic_Technique} + @{Formulaic_Form} - abs(@{Formulaic_Technique} - @{Formulaic_Form}))/2)"></input></td>
                <td style="text-align: center;"><input type="checkbox" class="check" name="attr_Formulaic_Deficiency" value="1"></input></td>
                <td><input type="number" class="number_2" name="attr_Formulaic_Sta" value="@{Stamina_Score}" disabled="true"/></td>
                <td><input type="number" class="number_2" name="attr_Formulaic_aura" value="@{aura}" disabled="true"/></td>
                <td></td>
                <td></td>
            </tr>
            <!-- Ritual -->
            <tr>
                <td data-i18n="ritual" >Ritual</td>
                <td><div class="flex-container-center">
                    <button style="margin: 0px auto;" type="roll" class="button simple-roll" name="roll_Ritual_simple" value="&{template:arcane} {{label0=^{ritual} ^{casting}}} {{result0=[[ (@{simple-die} + @{Ritual_Technique} + @{Ritual_Form} + ([[@{Ritual_Focus}]]) [@{focus_i18n}] + (@{Stamina_Score}) [@{stamina_i18n}] + (@{aura}) [@{aura_i18n}] + (@{Ritual_Artes_Lib}) [@{artes_i18n}] + (@{Ritual_Philos}) [@{philos_i18n}] + (@{wound_total}) [@{wounds_i18n}] + ([[floor(@{fatigue})]]) [@{fatigue_i18n}] + (?{@{modifiers_i18n}|0}) [@{modifiers_i18n}]) / ([[1 + (@{Ritual_Deficiency})]] [@{deficiency_i18n}]) ]]}} {{label1=^{aura}}} {{result1=@{aura}}} {{label2=^{weakness-m}}} {{result2=[[ @{wound_total}[@{wounds_i18n}] + [[floor(@{fatigue})]][@{fatigue_i18n}] ]]}} {{label3=^{circumstances-m}}} {{result3=?{@{modifiers_i18n}|0}}} {{botch-button=[@{botch_i18n}!](~@{character_name}|botch)}} {{crit-button=[@{critical_i18n}!](~@{character_name}|critical)}} {{stress=}}"></button>
                    <button style="margin: 0px auto;" type="roll" class="button stress-roll" name="roll_Ritual_stress" value="&{template:arcane} {{label0=^{ritual} ^{casting}}} {{result0=[[ (@{stress-die} + @{Ritual_Technique} + @{Ritual_Form} + ([[@{Ritual_Focus}]]) [@{focus_i18n}] + (@{Stamina_Score}) [@{stamina_i18n}] + (@{aura}) [@{aura_i18n}] + (@{Ritual_Artes_Lib}) [@{artes_i18n}] + (@{Ritual_Philos}) [@{philos_i18n}] + (@{wound_total}) [@{wounds_i18n}] + ([[floor(@{fatigue})]]) [@{fatigue_i18n}] + (?{@{modifiers_i18n}|0}) [@{modifiers_i18n}]) / ([[1 + (@{Ritual_Deficiency})]] [@{deficiency_i18n}]) ]]}} {{label1=^{aura}}} {{result1=@{aura}}} {{label2=^{weakness-m}}} {{result2=[[ @{wound_total}[@{wounds_i18n}] + [[floor(@{fatigue})]][@{fatigue_i18n}] ]]}} {{label3=^{circumstances-m}}} {{result3=?{@{modifiers_i18n}|0}}} {{botch-button=[@{botch_i18n}!](~@{character_name}|botch)}} {{crit-button=[@{critical_i18n}!](~@{character_name}|critical)}} {{stress=1}}"></button>
                </div></td>
                <td><input type="number" class="number_2" name="attr_Ritual" value="(@{Ritual_Technique} + @{Ritual_Form} + (@{Ritual_Focus}) + @{Stamina_Score} + @{aura} + @{Ritual_Artes_Lib} + @{Ritual_Philos}) / (1 + (@{Ritual_Deficiency}))" disabled="true"/></td>
                <td>
                    <select class="select_1" name="attr_Ritual_Technique">
                        <option class="italic" value="0 [@{technique_i18n}]" data-i18n="technique" >Technique</option>
                        <option value="(@{Creo_Score} + @{Creo_Puissant}) [@{creo_i18n}]" data-i18n="creo" >Creo</option>
                        <option value="(@{Intellego_Score} + @{Intellego_Puissant}) [@{intellego_i18n}]" data-i18n="intellego" >Intellego</option>
                        <option value="(@{Muto_Score} + @{Muto_Puissant}) [@{muto_i18n}]" data-i18n="muto" >Muto</option>
                        <option value="(@{Perdo_Score} + @{Perdo_Puissant}) [@{perdo_i18n}]" data-i18n="perdo" >Perdo</option>
                        <option value="(@{Rego_Score} + @{Rego_Puissant}) [@{rego_i18n}]" data-i18n="rego" >Rego</option>
                    </select>
                </td>
                <td>
                    <select class="select_1" name="attr_Ritual_Form">
                        <option class="italic" value="0 [@{form_i18n}]" data-i18n="form" >Form</option>
                        <option value="(@{Animal_Score} + @{Animal_Puissant}) [@{animal_i18n}]" data-i18n="animal" >Animal</option>
                        <option value="(@{Aquam_Score} + @{Aquam_Puissant}) [@{aquam_i18n}]" data-i18n="aquam" >Aquam</option>
                        <option value="(@{Auram_Score} + @{Auram_Puissant}) [@{auram_i18n}]" data-i18n="auram" >Auram</option>
                        <option value="(@{Corpus_Score} + @{Corpus_Puissant}) [@{corpus_i18n}]" data-i18n="corpus" >Corpus</option>
                        <option value="(@{Herbam_Score} + @{Herbam_Puissant}) [@{herbam_i18n}]" data-i18n="herbam" >Herbam</option>
                        <option value="(@{Ignem_Score} + @{Ignem_Puissant}) [@{ignem_i18n}]" data-i18n="ignem" >Ignem</option>
                        <option value="(@{Imaginem_Score} + @{Imaginem_Puissant}) [@{imaginem_i18n}]" data-i18n="imaginem" >Imaginem</option>
                        <option value="(@{Mentem_Score} + @{Mentem_Puissant}) [@{mentem_i18n}]" data-i18n="mentem" >Mentem</option>
                        <option value="(@{Terram_Score} + @{Terram_Puissant}) [@{terram_i18n}]" data-i18n="terram" >Terram</option>
                        <option value="(@{Vim_Score} + @{Vim_Puissant}) [@{vim_i18n}]" data-i18n="vim" >Vim</option>
                    </select>
                </td>
                <td style="text-align: center;"><input type="checkbox" class="check" name="attr_Ritual_Focus" value="((@{Ritual_Technique} + @{Ritual_Form} - abs(@{Ritual_Technique} - @{Ritual_Form}))/2)"></input></td>
                <td style="text-align: center;"><input type="checkbox" class="check" name="attr_Ritual_Deficiency" value="1"></input></td>
                <td><input type="number" class="number_2" name="attr_Ritual_Sta" value="@{Stamina_Score}" disabled="true"/></td>
                <td><input type="number" class="number_2" name="attr_Ritual_aura" value="@{aura}" disabled="true"/></td>
                <td><input type="number" class="number_2" name="attr_Ritual_Artes_Lib" value="0"/></td>
                <td><input type="number" class="number_2" name="attr_Ritual_Philos" value="0"/></td>
            </tr>
            <tr></tr>
            <tr>
                <th data-i18n="bonus" >Bonus</th>
                <td colspan="9"></td>
            </tr>
            <tr>
                <td style="text-align:right;"><span style="font-size:1.4em;" data-i18n="aura" >Aura</span></td>
                <td><input type="number" class="number_1" name="attr_aura" value="3"/></td>
                <td style="text-align:right;" colspan="2"><span style="font-size:1.2em; margin-right:15px" data-i18n="gestures" >Gestures</span></td>
                <td>
                    <select class="select_1" name="attr_gestures">
                        <option class="italic" value="1 [@{gestures_i18n}: @{exaggerated_i18n}]" data-i18n="gestures-exaggerated" >Exaggerated</option>
                        <option class="italic" selected value="0 [@{gestures_i18n}: @{bold_i18n}]" data-i18n="gestures-bold" >Bold</option>
                        <option class="italic" value="(-2) [@{gestures_i18n}: @{subtle_i18n}]" data-i18n="gestures-subtle" >Subtle</option>
                        <option class="italic" value="(-5) [@{gestures_i18n}: @{gest-none_i18n}]" data-i18n="gestures-none" >None</option>
                    </select>
                </td>
                <td style="text-align:right;" colspan="2"><span style="font-size:1.2em; margin-right:15px" data-i18n="words" >Words</span></td>
                <td colspan="2">
                    <select class="select_1" name="attr_words">
                        <option class="italic" value="1 [@{words_i18n}: @{loud_i18n}]" data-i18n="words-loud" >Loud</option>
                        <option class="italic" selected value="0 [@{words_i18n}: @{firm_i18n}]" data-i18n="words-firm" >Firm</option>
                        <option class="italic" value="(-5) [@{words_i18n}: @{quiet_i18n}]" data-i18n="words-quiet" >Quiet</option>
                        <option class="italic" value="(-10) [@{words_i18n}: @{words-none_i18n}]" data-i18n="words-none" >None</option>
                    </select>
                </td>
                <td></td>
            </tr>
        </table>
    </div>
    <br>
    <div class="divider" style="height:15px;"><span>&nbsp;</span></div>
    <!-- Laboratory -->
    <div>
        <div class='2colrow'>
            <div class='col'>
                <div>
                    <h4 class="heading_label" data-i18n="lab-characteristics" >Lab Characteristics</h4>
                    <div class="col">
                    <table class="table_3" style="width:195px;">
                        <tr>
                            <th style="width:140px;"></th>
                            <th data-i18n="score" >Score</th>
                        </tr>
                        <tr>
                            <td data-i18n="size" >Size</td>
                            <td><input type="text" class="number_1" name="attr_LabSize_Score" value="0"/></td>
                        </tr>
                        <tr>
                            <td data-i18n="refinement" >Refinement</td>
                            <td><input type="text" class="number_1" name="attr_LabRefinement_Score" value="0"/></td>
                        </tr>
                        <tr>
                            <td data-i18n="general-quality" >General Quality</td>
                            <td><input type="text" class="number_1" name="attr_LabGeneralQuality_Score" value="0"/></td>
                        </tr>
                        <tr>
                            <td data-i18n="upkeep" >Upkeep</td>
                            <td><input type="text" class="number_1" name="attr_LabUpkeep_Score" value="0"/></td>
                        </tr>
                    </table>
                    </div>
                    <div class="col">
                    <table class="table_3" style="width:195px">
                        <th style="width:140px;"></th>
                        <th data-i18n="score" >Score</th>
                        <tr>
                            <td data-i18n="safety" >Safety</td>
                            <td><input type="text" class="number_1" name="attr_LabSafety_Score" value="0"/></td>
                        </tr>
                        <tr>
                            <td data-i18n="warping" >Warping</td>
                            <td><input type="text" class="number_1" name="attr_LabWarping_Score" value="0"/></td>
                        </tr>
                        <tr>
                            <td data-i18n="health" >Health</td>
                            <td><input type="text" class="number_1" name="attr_LabHealth_Score" value="0"/></td>
                        </tr>
                        <tr>
                            <td data-i18n="aesthetics" >Aesthetics</td>
                            <td><input type="text" class="number_1" name="attr_LabAesthetics_Score" value="0"/></td>
                        </tr>
                    </table>
                    </div>
                </div>
            <div>
                <div style="margin-top:10px;">
                    <h4 class="heading_label" data-i18n="lab-virtues" >Lab Virtues</h4>
                    <fieldset class="repeating_labVirtue">
                        <table class="table_2" style="width:400px">
                            <tr>
                                <td><input type="text" class="heading_2" name="attr_LabVirtue" style="width:300px"/></td>
                                <th><div style="width:40px;"><input type="checkbox" class="hider checkbox_1" name="attr_labVirtue_show" value="1" checked/><span></span></div></th>
                            </tr>
                            <tr>
                                <td colspan="2">
                                    <input type="checkbox" class="hider hidden" name="attr_labVirtue_show" value="1" checked/>
                                    <div class="hide">
                                        <textarea class="textarea_1" style="width:380px;" name="attr_labvirtue_text"></textarea>
                                    </div>
                                </td>
                            </tr>
                        </table>
                    </fieldset>
                </div>
                <div>
                    <h4 class="heading_label" data-i18n="flaws" >Flaws</h4>
                    <fieldset class="repeating_labFlaw">
                        <table class="table_2" style="width:400px">
                            <tr>
                                <td><input type="text" class="heading_2" name="attr_labFlaw" style="width:300px"/></td>
                                <th><div style="width:40px;"><input type="checkbox" class="hider checkbox_1" name="attr_labFlaw_show" value="1" checked/><span></span></div></th>
                            </tr>
                            <tr>
                                <td colspan="2">
                                    <input type="checkbox" class="hider hidden" name="attr_labFlaw_show" value="1" checked/>
                                    <div class="hide">
                                        <textarea class="textarea_1" style="width:380px;" name="attr_labflaw_text"></textarea>
                                    </div>
                                </td>
                            </tr>
                        </table>
                    </fieldset>
                </div>
            </div>
                <div>
                    <h4 class="heading_label" style="margin-bottom:0px;" data-i18n="sanctum-marker" >Sanctum Marker</h4>
                    <textarea class="textarea_4" name="attr_SanctumMarker"></textarea>
                </div>
                <div>
                    <h4 class="heading_label" style="margin-bottom:0px;" data-i18n="description" >Description</h4>
                    <textarea class="textarea_4" name="attr_LabDescription"></textarea>
                </div>
            </div>
            <div class='col'>
                <div>
                    <h4 class="heading_label" data-i18n="lab-totals" >Lab Totals</h4>
                    <table class="table_2" style="width:400px;">
                        <tr>
                            <th colspan="2" data-i18n="basic-lab-total" >Basic Lab Total</th>
                            <td><div style="width:60px;"><input type="number" class="number_2" name="attr_Lab" value="@{Intelligence_Score} + @{Lab_Theory} + @{aura} + @{lab_Technique} + @{lab_Form} + (@{Lab_Focus}) + @{LabModifiers} + @{labbonus_total} + @{LabGeneralQuality_Score}" disabled="true"/></div></td>
                            <td colspan="2">
                                <div class="flex-container-between">
                                    <span>
                                        <input type="checkbox" class="check" name="attr_Lab_Focus" value="((@{lab_Technique} + @{lab_Form} - abs((@{lab_Technique}) - (@{lab_Form}))) /2)"/>
                                        <span data-i18n="focus">Focus</span>
                                    </span>
                                    <span style="text-align: right;">
                                        <span data-i18n="modifiers" >Modifiers</span>
                                        <input type="number" class="number_1" name="attr_LabModifiers" value="0" />
                                    </span>
                                </div>
                            </td>
                        </tr>
                        
                        <tr>
                            <td><div style="width:50px;"><input type="number" class="number_2" name="attr_Lab_Int" value="@{Intelligence_Score}" disabled="true"/></div></td>
                            <td><div style="width:50px;"><input type="number" class="number_2" name="attr_Lab_Theory" value="0" /></div></td>
                            <td><div style="width:50px;"><input type="number" class="number_2" name="attr_Lab_Aura" value="@{aura}" disabled="true"/></div></td>
                            <td>
                                <select class="select_1" name="attr_lab_Technique">
                                    <option class="italic" value="0" data-i18n="none" >None</option>
                                    <option value="@{Creo_Score} + @{Creo_Puissant}" data-i18n="creo" >Creo</option>
                                    <option value="@{Intellego_Score} + @{Intellego_Puissant}" data-i18n="intellego" >Intellego</option>
                                    <option value="@{Muto_Score} + @{Muto_Puissant}" data-i18n="muto" >Muto</option>
                                    <option value="@{Perdo_Score} + @{Perdo_Puissant}" data-i18n="perdo" >Perdo</option>
                                    <option value="@{Rego_Score} + @{Rego_Puissant}" data-i18n="rego" >Rego</option>
                                </select>
                            </td>
                            <td>
                                <select class="select_1" name="attr_lab_Form">
                                    <option class="italic" value="0" data-i18n="none" >None</option>
                                    <option value="@{Animal_Score} + @{Animal_Puissant}" data-i18n="animal" >Animal</option>
                                    <option value="@{Aquam_Score} + @{Aquam_Puissant}" data-i18n="aquam" >Aquam</option>
                                    <option value="@{Auram_Score} + @{Auram_Puissant}" data-i18n="auram" >Auram</option>
                                    <option value="@{Corpus_Score} + @{Corpus_Puissant}" data-i18n="corpus" >Corpus</option>
                                    <option value="@{Herbam_Score} + @{Herbam_Puissant}" data-i18n="herbam" >Herbam</option>
                                    <option value="@{Ignem_Score} + @{Ignem_Puissant}" data-i18n="ignem" >Ignem</option>
                                    <option value="@{Imaginem_Score} + @{Imaginem_Puissant}" data-i18n="imaginem" >Imaginem</option>
                                    <option value="@{Mentem_Score} + @{Mentem_Puissant}" data-i18n="mentem" >Mentem</option>
                                    <option value="@{Terram_Score} + @{Terram_Puissant}" data-i18n="terram" >Terram</option>
                                    <option value="@{Vim_Score} + @{Vim_Puissant}" data-i18n="vim" >Vim</option>
                                </select>
                            </td>
                        </tr>
                        <tr>
                            <td data-i18n="int" >Int</td>
                            <td data-i18n="theory" >Theory</td>
                            <td data-i18n="aura" >Aura</td>
                            <td data-i18n="technique" >Technique</td>
                            <td data-i18n="form" >Form</td>
                        </tr>
                    </table>
                </div>
                <div>
                    <h4 class="heading_label" data-i18n="lab-bonuses" >Lab Bonuses</h4>
                    <table class="table_2" style="width:400px;margin-top:10px;">
                        <tr>
                            <th><div style="width:300px;padding-left:10px;" data-i18n="specializations-bonuses" >Specializations & Bonuses</div></th>
                            <th><div style="width:40px;" data-i18n="score" >Score</div></th>
                            <th><div style="width:40px;"><span class="has-tooltip"><span data-i18n="inc-">Inc.</span><span class="tooltip" data-i18n="tooltip-inc-">Included<br>Check if the item is active. Unchecked items are not used in the computation</span></span></div></th>
                        </tr>
                    </table>
                    <fieldset class="repeating_labSpecializations">
                        <table class="table_2" style="width:400px">
                            <tr>
                                <td><input type="text" class="heading_2" name="attr_LabSpecialization" style="width:300px"/></td>
                                <td><input type="text" class="number_2" name="attr_LabBonus" value="0" style="width:50px" /></td>
                                <td><div style="width:40px;padding-left:15px;"><input type="checkbox" name="attr_sactive" value="1" /></div></th>
                            </tr>
                        </table>
                    </fieldset>
                    <table class="table_2" style="width:400px;">
                        <tr>
                            <td style="width:300px;text-align:right;" data-i18n="total-specialization-modifier" >Total Specialization Modifier</td>
                            <td> <div style="width:50px;"><input type="number" class="number_2" name="attr_labbonus_total" value="0" readonly/></div></td>
                        </tr>
                    </table>

                </div>
            </div>
        </div>
    </div>
</div>

<!-- 4 Combat -->
<div class="tab-content tab4" >
    <div style="margin-top:10px;">
        <!-- Fatigue -->
        <div class='col'>
            <h4 class="heading_label" style="margin-bottom:15px" data-i18n="fatigue-levels" >Fatigue Levels <input type="number" class="counter" style="width:50px" name="attr_Fatigue_total" value="@{Fatigue}" disabled="true"/></h4>
            <table class="table_2" style="width:300px;">
                <tr>
                    <td><span style="font-size:1.2em;" data_i18n="additional-fatigue-levels">Additional fatigue levels</span></td>
                    <td>
                        <select class="select_1" style="width: 60px" name="attr_additionalFatigue">
                            <option value="0">0</option>
                            <option value="1">1</option>
                            <option value="2">2</option>
                            <option value="3">3</option>
                            <option value="4">4</option>
                            <option value="5">5</option>
                            <option value="6">6</option>
                            <option value="7">7</option>
                            <option value="8">8</option>
                            <option value="9">9</option>
                            <option value="10">10</option>
                        </select>
                    </td>
                <tr/>
            </table>
            <input type="hidden" class="fatigue-proxy" name="attr_additionalFatigueProxy" value="0"/>
            <table class="table_3" style="width:300px" >
                <tr>
                    <th style="width:60px;" data-i18n="current" >Current</th>
                    <th style="text-align:center;" data-i18n="penalty" >Penalty</th>
                    <th data-i18n="recovery" >Recovery</th>
                    <th data-i18n="level" >Level</th>
                </tr>
                <tr>
                    <td><input type="radio" class="radio_1" name="attr_Fatigue" value="0" checked><span></span></td>
                    <td></td>
                    <td></td>
                    <td data-i18n="fresh" >Fresh</td>
                </tr>
                <tr>
                    <td><input type="radio" class="radio_1" name="attr_Fatigue" value="0.1"><span></span></td>
                    <td style="text-align:center;">0</td>
                    <td>2 min.</td>
                    <td data-i18n="winded" >Winded</td>
                </tr>
                <tr class="addfatigue-1">
                    <td><input type="radio" class="radio_1" name="attr_Fatigue" value="0.001"><span></span></td>
                    <td style="text-align:center;">0</td>
                    <td>2 min.</td>
                    <td data-i18n="winded" >Winded</td>
                </tr>
                <tr class="addfatigue-2">
                    <td><input type="radio" class="radio_1" name="attr_Fatigue" value="0.002"><span></span></td>
                    <td style="text-align:center;">0</td>
                    <td>2 min.</td>
                    <td data-i18n="winded" >Winded</td>
                </tr>
                <tr class="addfatigue-3">
                    <td><input type="radio" class="radio_1" name="attr_Fatigue" value="0.003"><span></span></td>
                    <td style="text-align:center;">0</td>
                    <td>2 min.</td>
                    <td data-i18n="winded" >Winded</td>
                </tr>
                <tr class="addfatigue-4">
                    <td><input type="radio" class="radio_1" name="attr_Fatigue" value="0.004"><span></span></td>
                    <td style="text-align:center;">0</td>
                    <td>2 min.</td>
                    <td data-i18n="winded" >Winded</td>
                </tr>
                <tr class="addfatigue-5">
                    <td><input type="radio" class="radio_1" name="attr_Fatigue" value="0.005"><span></span></td>
                    <td style="text-align:center;">0</td>
                    <td>2 min.</td>
                    <td data-i18n="winded" >Winded</td>
                </tr>
                <tr class="addfatigue-6">
                    <td><input type="radio" class="radio_1" name="attr_Fatigue" value="0.006"><span></span></td>
                    <td style="text-align:center;">0</td>
                    <td>2 min.</td>
                    <td data-i18n="winded" >Winded</td>
                </tr>
                <tr class="addfatigue-7">
                    <td><input type="radio" class="radio_1" name="attr_Fatigue" value="0.007"><span></span></td>
                    <td style="text-align:center;">0</td>
                    <td>2 min.</td>
                    <td data-i18n="winded" >Winded</td>
                </tr>
                <tr class="addfatigue-8">
                    <td><input type="radio" class="radio_1" name="attr_Fatigue" value="0.008"><span></span></td>
                    <td style="text-align:center;">0</td>
                    <td>2 min.</td>
                    <td data-i18n="winded" >Winded</td>
                </tr>
                <tr class="addfatigue-9">
                    <td><input type="radio" class="radio_1" name="attr_Fatigue" value="0.009"><span></span></td>
                    <td style="text-align:center;">0</td>
                    <td>2 min.</td>
                    <td data-i18n="winded" >Winded</td>
                </tr>
                <tr class="addfatigue-10">
                    <td><input type="radio" class="radio_1" name="attr_Fatigue" value="0.01"><span></span></td>
                    <td style="text-align:center;">0</td>
                    <td>2 min.</td>
                    <td data-i18n="winded" >Winded</td>
                </tr>
                <tr>
                    <td><input type="radio" class="radio_1" name="attr_Fatigue" value="-1"><span></span></td>
                    <td style="text-align:center;">-1</td>
                    <td>10 min.</td>
                    <td data-i18n="weary" >Weary</td>
                </tr>
                <tr>
                    <td><input type="radio" class="radio_1" name="attr_Fatigue" value="-3"><span></span></td>
                    <td style="text-align:center;">-3</td>
                    <td>30 min.</th>
                    <td data-i18n="tired" >Tired</td>
                </tr>
                <tr>
                    <td><input type="radio" class="radio_1" name="attr_Fatigue" value="-5"><span></span></td>
                    <td style="text-align:center;">-5</td>
                    <td>1 hr.</td>
                    <td data-i18n="dazed" >Dazed</td>
                </tr>
                <tr>
                    <td><input type="radio" class="radio_1" name="attr_Fatigue" value="-99"><span></span></td>
                    <td></td>
                    <td>2 hr.</td>
                    <td data-i18n="unconscious" >Unconscious</td>
                </tr>
            </table>
        </div>
        <!-- Wounds -->
        <div class='col'>
            <h4 class="heading_label" data-i18n="wounds" >Wounds <input type="number" class="counter" name="attr_wound_total" value="0" /></h4>
            <table class="table_3" style="width:500px;" >
                <tr>
                    <th></th>
                    <th data-i18n="range" >Range</th>
                    <th style="text-align:center; width: 100px" data-i18n="number" >Number</th>
                    <th data-i18n="penalty" >Penalty</th>
                </tr>
                <tr>
                    <td data-i18n="light-wounds" >Light Wounds</td>
                    <td><input type="text" class="heading_3" name="attr_Wounds_Light_range"/></td>
                    <td><div class="flex-container-center">
                        <input type="checkbox" class="checkbox_wound" name="attr_Wounds_Light1" value="-1"><span></span>
                        <input type="checkbox" class="checkbox_wound" name="attr_Wounds_Light2" value="-1"><span></span>
                        <input type="checkbox" class="checkbox_wound" name="attr_Wounds_Light3" value="-1"><span></span>
                        <input type="checkbox" class="checkbox_wound" name="attr_Wounds_Light4" value="-1"><span></span>
                        <input type="checkbox" class="checkbox_wound" name="attr_Wounds_Light5" value="-1"><span></span>
                    </div></td>
                    <td style="text-align:center;">-1</td>
                </tr>
                <tr>
                    <td data-i18n="medium-wounds" >Medium Wounds</td>
                    <td><input type="text" class="heading_3" name="attr_Wounds_Medium_range"/></td>
                    <td><div class="flex-container-center">
                        <input type="checkbox" class="checkbox_wound" name="attr_Wounds_Medium1" value="-3"><span></span>
                        <input type="checkbox" class="checkbox_wound" name="attr_Wounds_Medium2" value="-3"><span></span>
                        <input type="checkbox" class="checkbox_wound" name="attr_Wounds_Medium3" value="-3"><span></span>
                        <input type="checkbox" class="checkbox_wound" name="attr_Wounds_Medium4" value="-3"><span></span>
                        <input type="checkbox" class="checkbox_wound" name="attr_Wounds_Medium5" value="-3"><span></span>
                    </div></td>
                    <td style="text-align:center;">-3</th>
                </tr>
                <tr>
                    <td data-i18n="heavy-wounds" >Heavy Wounds</td>
                    <td><input type="text" class="heading_3" name="attr_Wounds_Heavy_range"/></td>
                    <td><div class="flex-container-center">
                        <input type="checkbox" class="checkbox_wound" name="attr_Wounds_Heavy1" value="-5"><span></span>
                        <input type="checkbox" class="checkbox_wound" name="attr_Wounds_Heavy2" value="-5"><span></span>
                        <input type="checkbox" class="checkbox_wound" name="attr_Wounds_Heavy3" value="-5"><span></span>
                        <input type="checkbox" class="checkbox_wound" name="attr_Wounds_Heavy4" value="-5"><span></span>
                        <input type="checkbox" class="checkbox_wound" name="attr_Wounds_Heavy5" value="-5"><span></span>
                    </div></td>
                    <td style="text-align:center;">-5</th>
                </tr>
                <tr>
                    <td data-i18n="incapacitated" >Incapacitated</td>
                    <td><input type="text" class="heading_3" name="attr_Wounds_Incapacitated_range"/></td>
                    <td>
                        <input type="checkbox" class="checkbox_wound" name="attr_Wounds_Incapacitated" value="-99"><span></span>
                    </td>
                </tr>
                <tr>
                    <td data-i18n="dead" >Dead</td>
                    <td><input type="text" class="heading_3" name="attr_Wounds_Dead_range"/></td>
                    <td>
                        <input type="checkbox" class="checkbox_wound" name="attr_Wounds_Dead" value="-1000"><span></span>
                    </td>
                </tr>
            </table>
        </div>
    </div>
    
    <div class="2colgrid">
        <!-- Armor -->
        <div class='col' style="width:415px; padding-right: 2px; border-right: 1px solid #663333; margin-right: 2px;">
            <h4 class="heading_label" data-i18n="armor" >Armor</h4>
            <div style="width: 100%;">
                <table class="table_2" style="margin-top:10px;">
                    <tr>
                        <th style="width: 240px;"></th>
                        <th style="width:  80px; text-align: right;"><span data-i18n="protection">Protection</span></th>
                        <th style="width:  60px; text-align: center;"><span data-i18n="load">Load</span></th>
                        <th style="width:  30px; text-align: center;"></th>
                    </tr>
                    <tr>
                        <th style="width: 240px;"><span data-i18n="armor">Armor</span></th>
                        <td style="width:  75px; text-align: right; padding-right: 5px;">
                            <span class="has-tooltip"><input type="number" class="number_2" name="attr_armors_total_prot" value="0" readonly/><span class="tooltip" data-i18n="total">Total</span></span>
                            <input type="hidden" class="number_2" name="attr_armors_total_prot_detailed" value=" "/>
                        </td>
                        <td style="width:  60px; text-align: center;">
                            <span class="has-tooltip"><input type="number" class="number_2" name="attr_armors_total_load" value="0" readonly/><span class="tooltip" data-i18n="total">Total</span></span>
                            <input type="hidden" class="number_2" name="attr_armors_total_load_detailed" value=" "/>
                        </td>
                        <td style="width:  30px;"><span class="has-tooltip"><span data-i18n="inc-">Inc.</span><span class="tooltip" data-i18n="tooltip-inc-">"Included<br>Check if the item is active. Unchecked items are not used in the computation"</span></span></td>
                    </tr>
                </table>
                <fieldset class="repeating_armors">
                    <table class="table_2">
                        <tr>
                            <td style="width: 240px;"><input type="text" class="heading_2" name="attr_armors_name" style="width: 235px;"/></td>
                            <td style="width:  75px; text-align: right; padding-right: 5px;"><input type="text" class="number_2" name="attr_armors_prot" value="0" /></td>
                            <td style="width:  60px; text-align: center;"><input type="text" class="number_2" name="attr_armors_load" value="0" /></td>
                            <td style="width:  30px;"><div class="flex-container-center"><input type="checkbox" name="attr_isactive" value="1" checked/></div></td>
                        </tr>
                    </table>
                </fieldset>
            </div>
        </div>

        <!-- Bonuses -->
        <div class='col' style="width:100%; padding-right: 5px;">
            <h4 class="heading_label" data-i18n="combat-modifiers">Combat Modifiers</h4>
            <div style="width: 100%;">
                <table class="table_2" style="margin-top:10px;">
                    <tr>
                        <th style="width: 170px;"></th>
                        <th style="width:  40px; text-align: center;"><span data-i18n="init">Init</span></th>
                        <th style="width:  40px; text-align: center;"><span data-i18n="atk">Atk</span></th>
                        <th style="width:  40px; text-align: center;"><span data-i18n="dfn">Dfn</span></th>
                        <th style="width:  40px; text-align: center;"><span data-i18n="dam">Dam</span></th>
                        <th style="width:  40px; text-align: center;"><span data-i18n="soak">Soak</span></th>
                        <th style="width:  30px; text-align: center;"></th>
                    </tr>
                    <tr>
                        <th style="width: 160px;"><span data-i18n="bonus">Bonus</span></th>
                        <td style="width:  40px; text-align: center;">
                            <span class="has-tooltip"><input type="number" class="number_2" name="attr_combat-mods_total_init" value="0" readonly/><span class="tooltip" data-i18n="total">Total</span></span>
                            <input type="hidden" class="number_2" name="attr_combat-mods_total_init_detailed" value=" "/>
                        </td>
                        <td style="width:  40px; text-align: center;">
                            <span class="has-tooltip"><input type="number" class="number_2" name="attr_combat-mods_total_atk" value="0" readonly/><span class="tooltip" data-i18n="total">Total</span></span>
                            <input type="hidden" class="number_2" name="attr_combat-mods_total_atk_detailed" value=" "/>
                        </td>
                        <td style="width:  40px; text-align: center;">
                            <span class="has-tooltip"><input type="number" class="number_2" name="attr_combat-mods_total_dfn" value="0" readonly/><span class="tooltip" data-i18n="total">Total</span></span>
                            <input type="hidden" class="number_2" name="attr_combat-mods_total_dfn_detailed" value=" "/>
                        </td>
                        <td style="width:  40px; text-align: center;">
                            <span class="has-tooltip"><input type="number" class="number_2" name="attr_combat-mods_total_dam" value="0" readonly/><span class="tooltip" data-i18n="total">Total</span></span>
                            <input type="hidden" class="number_2" name="attr_combat-mods_total_dam_detailed" value=" "/>
                        </td>
                        <td style="width:  40px; text-align: center;">
                            <span class="has-tooltip"><input type="number" class="number_2" name="attr_combat-mods_total_soak" value="0" readonly/><span class="tooltip" data-i18n="total">Total</span></span>
                            <input type="hidden" class="number_2" name="attr_combat-mods_total_soak_detailed" value=" "/>
                        </td>
                        <td style="width:  30px;"><span class="has-tooltip"><span data-i18n="inc-">Inc.</span><span class="tooltip" data-i18n="tooltip-inc-">"Included<br>Check if the item is active. Unchecked items are not used in the computation"</span></span></td>
                    </tr>
                </table>
                <fieldset class="repeating_combat-mods">
                    <table class="table_2">
                        <tr>
                            <td style="width: 170px;"><input type="text" class="heading_2" name="attr_combat-mods_name" style="width: 170px;"/></td>
                            <td style="width:  40px; text-align: center;"><input type="text" class="number_2" name="attr_combat-mods_init" value="0"/></td>
                            <td style="width:  40px; text-align: center;"><input type="text" class="number_2" name="attr_combat-mods_atk" value="0"/></td>
                            <td style="width:  40px; text-align: center;"><input type="text" class="number_2" name="attr_combat-mods_dfn" value="0"/></td>
                            <td style="width:  40px; text-align: center;"><input type="text" class="number_2" name="attr_combat-mods_dam" value="0"/></td>
                            <td style="width:  40px; text-align: center;"><input type="text" class="number_2" name="attr_combat-mods_soak" value="0"/></td>
                            <td style="width:  30px;"><div class="flex-container-center"><input type="checkbox" name="attr_isactive" value="1" checked/></div></td>
                        </tr>
                    </table>
                </fieldset>
            </div>
        </div>
    </div>
    <!-- Soak -->
    <div style="padding-bottom: 15px;" >
        <h4 class="heading_label" data-i18n="soak" >Soak</h4>
        <table class="table_2" style="width:380px">
            <tr>
                <td></td>
                <th data-i18n="soak" style="text-align: center;">Soak</th>
                <th data-i18n="sta" style="text-align: center;">sta</th>
                <th data-i18n="armor" style="text-align: center;">Armor</th>
                <th data-i18n="bonus" style="text-align: center;">Bonus</th>
                <th data-i18n="bonus" style="text-align: center;">Bonus</th>
                <th data-i18n="load" style="text-align: center;">Load</th>
            </tr>
            <tr>
                <td style="width:30px;">
                    <button type="roll" class="button stress-roll single-roll" name="roll_soak" value="&{template:soak} {{name=@{character_name}}} {{rollsoak=[[ @{stress-die} + (@{Stamina_Score}) [@{stamina_i18n}] + (@{armors_total_prot_detailed}) [@{armor_i18n}] + (@{soak_bonus}) [@{soakbns_i18n}] + (@{combat-mods_total_soak_detailed}) [@{soakbns_i18n}] ]]}} {{armorsoak=[[@{armors_total_prot_detailed}]]}} {{soakbonus=[[(@{soak_bonus}) + (@{combat-mods_total_soak_detailed})]]}} {{botch-button=[@{botch_i18n}!](~@{character_name}|botch)}} {{crit-button=[@{critical_i18n}!](~@{character_name}|critical)}} {{stress=1}}"></button>
                </td>
                <td style="text-align: center;"><input type="number" class="number_1" name="attr_Soak" value="((@{Stamina_Score}) + (@{armors_total_prot}) + (@{soak_bonus}) + (@{combat-mods_total_soak}))" disabled="true"/></td>
                <td style="text-align: center;"><input type="number" class="number_1" name="attr_soak_stamina" disabled="true" value="(@{Stamina_Score})"></td>
                <td style="text-align: center;"><input type="number" class="number_2" name="attr_armors_total_prot" value="0" readonly/></td>
                <td style="text-align: center;"><input type="number" class="number_2" name="attr_soak_bonus" value="0"/></td>
                <td style="text-align: center;"><input type="number" class="number_2" name="attr_combat-mods_total_soak" value="0" readonly/></td>
                <th style="text-align: center;"><input type="number" class="number_2" name="attr_armors_total_load" value="0" readonly/></th>
            </tr>
        </table>
        <div class="magi-only">
            <h4 class="heading_label" style="margin-bottom:0px;" data-i18n="soak-forms" >Soak by Forms</h4>
            <div class='artgrid' style="border:1px solid black">
                <div class="flex-container-left" style="grid-column: 1 / span 1; grid-row: 1 / span 1;">
                    <button type="roll" class="button stress-roll single-roll" name="roll_soak_animal" value="&{template:soak} {{name=@{character_name}}} {{rollsoak=[[ @{stress-die} + (@{Stamina_Score}) [@{stamina_i18n}] + (@{armors_total_prot_detailed}) [@{armor_i18n}] + (@{soak_bonus}) [@{soakbns_i18n}] + (@{combat-mods_total_soak_detailed}) [@{soakbns_i18n}] + ceil(((@{Animal_Score}) + (@{Animal_Puissant})) / 5) [@{animal_i18n}] ]]}} {{armorsoak=[[@{armors_total_prot_detailed}]]}} {{soakbonus=[[(@{soak_bonus}) + (@{combat-mods_total_soak_detailed})]]}} {{formlabel=^{animal}}} {{formbonus=[[ ceil(((@{Animal_Score}) + (@{Animal_Puissant})) / 5) ]]}} {{botch-button=[@{botch_i18n}!](~@{character_name}|botch)}} {{crit-button=[@{critical_i18n}!](~@{character_name}|critical)}} {{stress=1}}"></button>
                    <input type="text" class="number_1" name="attr_Soak_Animal" value="((@{Stamina_Score}) + (@{armors_total_prot}) + (@{soak_bonus}) + (@{combat-mods_total_soak}) + ceil(((@{Animal_Score}) + (@{Animal_Puissant})) / 5))" disabled="true"/>
                    <span data-i18n="animal">Animal</span>
                </div>
                <div class="flex-container-left" style="grid-column: 2 / span 1; grid-row: 1 / span 1;">
                    <button type="roll" class="button stress-roll single-roll" name="roll_soak_aquam" value="&{template:soak} {{name=@{character_name}}} {{rollsoak=[[ @{stress-die} + (@{Stamina_Score}) [@{stamina_i18n}] + (@{armors_total_prot_detailed}) [@{armor_i18n}] + (@{soak_bonus}) [@{soakbns_i18n}] + (@{combat-mods_total_soak_detailed}) [@{soakbns_i18n}] + ceil(((@{Aquam_Score}) + (@{Aquam_Puissant})) / 5) [@{aquam_i18n}] ]]}} {{armorsoak=[[@{armors_total_prot_detailed}]]}} {{soakbonus=[[(@{soak_bonus}) + (@{combat-mods_total_soak_detailed})]]}} {{formlabel=^{aquam}}} {{formbonus=[[ ceil(((@{Aquam_Score}) + (@{Aquam_Puissant})) / 5) ]]}} {{botch-button=[@{botch_i18n}!](~@{character_name}|botch)}} {{crit-button=[@{critical_i18n}!](~@{character_name}|critical)}} {{stress=1}}"></button>
                    <input type="text" class="number_1" name="attr_Soak_Aquam" value="((@{Stamina_Score}) + (@{armors_total_prot}) + (@{soak_bonus}) + (@{combat-mods_total_soak}) + ceil(((@{Aquam_Score}) + (@{Aquam_Puissant})) / 5))" disabled="true"/>
                    <span data-i18n="aquam">Aquam</span>
                </div>
                <div class="flex-container-left" style="grid-column: 3 / span 1; grid-row: 1 / span 1;">
                    <button type="roll" class="button stress-roll single-roll" name="roll_soak_auram" value="&{template:soak} {{name=@{character_name}}} {{rollsoak=[[ @{stress-die} + (@{Stamina_Score}) [@{stamina_i18n}] + (@{armors_total_prot_detailed}) [@{armor_i18n}] + (@{soak_bonus}) [@{soakbns_i18n}] + (@{combat-mods_total_soak_detailed}) [@{soakbns_i18n}] + ceil(((@{Auram_Score}) + (@{Auram_Puissant})) / 5) [@{auram_i18n}] ]]}} {{armorsoak=[[@{armors_total_prot_detailed}]]}} {{soakbonus=[[(@{soak_bonus}) + (@{combat-mods_total_soak_detailed})]]}} {{formlabel=^{auram}}} {{formbonus=[[ ceil(((@{Auram_Score}) + (@{Auram_Puissant})) / 5) ]]}} {{botch-button=[@{botch_i18n}!](~@{character_name}|botch)}} {{crit-button=[@{critical_i18n}!](~@{character_name}|critical)}} {{stress=1}}"></button>
                    <input type="text" class="number_1" name="attr_Soak_Auram" value="((@{Stamina_Score}) + (@{armors_total_prot}) + (@{soak_bonus}) + (@{combat-mods_total_soak}) + ceil(((@{Auram_Score}) + (@{Auram_Puissant})) / 5))" disabled="true"/>
                    <span data-i18n="auram">Auram</span>
                </div>
                <div class="flex-container-left" style="grid-column: 4 / span 1; grid-row: 1 / span 1;">
                    <button type="roll" class="button stress-roll single-roll" name="roll_soak_corpus" value="&{template:soak} {{name=@{character_name}}} {{rollsoak=[[ @{stress-die} + (@{Stamina_Score}) [@{stamina_i18n}] + (@{armors_total_prot_detailed}) [@{armor_i18n}] + (@{soak_bonus}) [@{soakbns_i18n}] + (@{combat-mods_total_soak_detailed}) [@{soakbns_i18n}] + ceil(((@{Corpus_Score}) + (@{Corpus_Puissant})) / 5) [@{corpus_i18n}] ]]}} {{armorsoak=[[@{armors_total_prot_detailed}]]}} {{soakbonus=[[(@{soak_bonus}) + (@{combat-mods_total_soak_detailed})]]}} {{formlabel=^{corpus}}} {{formbonus=[[ ceil(((@{Corpus_Score}) + (@{Corpus_Puissant})) / 5) ]]}} {{botch-button=[@{botch_i18n}!](~@{character_name}|botch)}} {{crit-button=[@{critical_i18n}!](~@{character_name}|critical)}} {{stress=1}}"></button>
                    <input type="text" class="number_1" name="attr_Soak_Corpus" value="((@{Stamina_Score}) + (@{armors_total_prot}) + (@{soak_bonus}) + (@{combat-mods_total_soak}) + ceil(((@{Corpus_Score}) + (@{Corpus_Puissant})) / 5))" disabled="true"/>
                    <span data-i18n="corpus">Corpus</span>
                </div>
                <div class="flex-container-left" style="grid-column: 5 / span 1; grid-row: 1 / span 1;">
                    <button type="roll" class="button stress-roll single-roll" name="roll_soak_herbam" value="&{template:soak} {{name=@{character_name}}} {{rollsoak=[[ @{stress-die} + (@{Stamina_Score}) [@{stamina_i18n}] + (@{armors_total_prot_detailed}) [@{armor_i18n}] + (@{soak_bonus}) [@{soakbns_i18n}] + (@{combat-mods_total_soak_detailed}) [@{soakbns_i18n}] + ceil(((@{Herbam_Score}) + (@{Herbam_Puissant})) / 5) [@{herbam_i18n}] ]]}} {{armorsoak=[[@{armors_total_prot_detailed}]]}} {{soakbonus=[[(@{soak_bonus}) + (@{combat-mods_total_soak_detailed})]]}} {{formlabel=^{herbam}}} {{formbonus=[[ ceil(((@{Herbam_Score}) + (@{Herbam_Puissant})) / 5) ]]}} {{botch-button=[@{botch_i18n}!](~@{character_name}|botch)}} {{crit-button=[@{critical_i18n}!](~@{character_name}|critical)}} {{stress=1}}"></button>
                    <input type="text" class="number_1" name="attr_Soak_Herbam" value="((@{Stamina_Score}) + (@{armors_total_prot}) + (@{soak_bonus}) + (@{combat-mods_total_soak}) + ceil(((@{Herbam_Score}) + (@{Herbam_Puissant})) / 5))" disabled="true"/>
                    <span data-i18n="herbam">Herbam</span>
                </div>
                <div class="flex-container-left" style="grid-column: 1 / span 1; grid-row: 2 / span 1;">
                    <button type="roll" class="button stress-roll single-roll" name="roll_soak_ignem" value="&{template:soak} {{name=@{character_name}}} {{rollsoak=[[ @{stress-die} + (@{Stamina_Score}) [@{stamina_i18n}] + (@{armors_total_prot_detailed}) [@{armor_i18n}] + (@{soak_bonus}) [@{soakbns_i18n}] + (@{combat-mods_total_soak_detailed}) [@{soakbns_i18n}] + ceil(((@{Ignem_Score}) + (@{Ignem_Puissant})) / 5) [@{ignem_i18n}] ]]}} {{armorsoak=[[@{armors_total_prot_detailed}]]}} {{soakbonus=[[(@{soak_bonus}) + (@{combat-mods_total_soak_detailed})]]}} {{formlabel=^{ignem}}} {{formbonus=[[ ceil(((@{Ignem_Score}) + (@{Ignem_Puissant})) / 5) ]]}} {{botch-button=[@{botch_i18n}!](~@{character_name}|botch)}} {{crit-button=[@{critical_i18n}!](~@{character_name}|critical)}} {{stress=1}}"></button>
                    <input type="text" class="number_1" name="attr_Soak_Ignem" value="((@{Stamina_Score}) + (@{armors_total_prot}) + (@{soak_bonus}) + (@{combat-mods_total_soak}) + ceil(((@{Ignem_Score}) + (@{Ignem_Puissant})) / 5))" disabled="true"/>
                    <span data-i18n="ignem">Ignem</span>
                </div>
                <div class="flex-container-left" style="grid-column: 2 / span 1; grid-row: 2 / span 1;">
                    <button type="roll" class="button stress-roll single-roll" name="roll_soak_imaginem" value="&{template:soak} {{name=@{character_name}}} {{rollsoak=[[ @{stress-die} + (@{Stamina_Score}) [@{stamina_i18n}] + (@{armors_total_prot_detailed}) [@{armor_i18n}] + (@{soak_bonus}) [@{soakbns_i18n}] + (@{combat-mods_total_soak_detailed}) [@{soakbns_i18n}] + ceil(((@{Imaginem_Score}) + (@{Imaginem_Puissant})) / 5) [@{imaginem_i18n}] ]]}} {{armorsoak=[[@{armors_total_prot_detailed}]]}} {{soakbonus=[[(@{soak_bonus}) + (@{combat-mods_total_soak_detailed})]]}} {{formlabel=^{imaginem}}} {{formbonus=[[ ceil(((@{Imaginem_Score}) + (@{Imaginem_Puissant})) / 5) ]]}} {{botch-button=[@{botch_i18n}!](~@{character_name}|botch)}} {{crit-button=[@{critical_i18n}!](~@{character_name}|critical)}} {{stress=1}}"></button>
                    <input type="text" class="number_1" name="attr_Soak_Imaginem" value="((@{Stamina_Score}) + (@{armors_total_prot}) + (@{soak_bonus}) + (@{combat-mods_total_soak}) + ceil(((@{Imaginem_Score}) + (@{Imaginem_Puissant})) / 5))" disabled="true"/>
                    <span data-i18n="imaginem">Imaginem</span>
                </div>
                <div class="flex-container-left" style="grid-column: 3 / span 1; grid-row: 2 / span 1;">
                    <button type="roll" class="button stress-roll single-roll" name="roll_soak_mentem" value="&{template:soak} {{name=@{character_name}}} {{rollsoak=[[ @{stress-die} + (@{Stamina_Score}) [@{stamina_i18n}] + (@{armors_total_prot_detailed}) [@{armor_i18n}] + (@{soak_bonus}) [@{soakbns_i18n}] + (@{combat-mods_total_soak_detailed}) [@{soakbns_i18n}] + ceil(((@{Mentem_Score}) + (@{Mentem_Puissant})) / 5) [@{mentem_i18n}] ]]}} {{armorsoak=[[@{armors_total_prot_detailed}]]}} {{soakbonus=[[(@{soak_bonus}) + (@{combat-mods_total_soak_detailed})]]}} {{formlabel=^{mentem}}} {{formbonus=[[ ceil(((@{Mentem_Score}) + (@{Mentem_Puissant})) / 5) ]]}} {{botch-button=[@{botch_i18n}!](~@{character_name}|botch)}} {{crit-button=[@{critical_i18n}!](~@{character_name}|critical)}} {{stress=1}}"></button>
                    <input type="text" class="number_1" name="attr_Soak_Mentem" value="((@{Stamina_Score}) + (@{armors_total_prot}) + (@{soak_bonus}) + (@{combat-mods_total_soak}) + ceil(((@{Mentem_Score}) + (@{Mentem_Puissant})) / 5))" disabled="true"/>
                    <span data-i18n="mentem">Mentem</span>
                </div>
                <div class="flex-container-left" style="grid-column: 4 / span 1; grid-row: 2 / span 1;">
                    <button type="roll" class="button stress-roll single-roll" name="roll_soak_terram" value="&{template:soak} {{name=@{character_name}}} {{rollsoak=[[ @{stress-die} + (@{Stamina_Score}) [@{stamina_i18n}] + (@{armors_total_prot_detailed}) [@{armor_i18n}] + (@{soak_bonus}) [@{soakbns_i18n}] + (@{combat-mods_total_soak_detailed}) [@{soakbns_i18n}] + ceil(((@{Terram_Score}) + (@{Terram_Puissant})) / 5) [@{terram_i18n}] ]]}} {{armorsoak=[[@{armors_total_prot_detailed}]]}} {{soakbonus=[[(@{soak_bonus}) + (@{combat-mods_total_soak_detailed})]]}} {{formlabel=^{terram}}} {{formbonus=[[ ceil(((@{Terram_Score}) + (@{Terram_Puissant})) / 5) ]]}} {{botch-button=[@{botch_i18n}!](~@{character_name}|botch)}} {{crit-button=[@{critical_i18n}!](~@{character_name}|critical)}} {{stress=1}}"></button>
                    <input type="text" class="number_1" name="attr_Soak_Terram" value="((@{Stamina_Score}) + (@{armors_total_prot}) + (@{soak_bonus}) + (@{combat-mods_total_soak}) + ceil(((@{Terram_Score}) + (@{Terram_Puissant})) / 5))" disabled="true"/>
                    <span data-i18n="terram">Terram</span>
                </div>
                <div class="flex-container-left" style="grid-column: 5 / span 1; grid-row: 2 / span 1;">
                    <button type="roll" class="button stress-roll single-roll" name="roll_soak_vim" value="&{template:soak} {{name=@{character_name}}} {{rollsoak=[[ @{stress-die} + (@{Stamina_Score}) [@{stamina_i18n}] + (@{armors_total_prot_detailed}) [@{armor_i18n}] + (@{soak_bonus}) [@{soakbns_i18n}] + (@{combat-mods_total_soak_detailed}) [@{soakbns_i18n}] + ceil(((@{Vim_Score}) + (@{Vim_Puissant})) / 5) [@{vim_i18n}] ]]}} {{armorsoak=[[@{armors_total_prot_detailed}]]}} {{soakbonus=[[(@{soak_bonus}) + (@{combat-mods_total_soak_detailed})]]}} {{formlabel=^{vim}}} {{formbonus=[[ ceil(((@{Vim_Score}) + (@{Vim_Puissant})) / 5) ]]}} {{botch-button=[@{botch_i18n}!](~@{character_name}|botch)}} {{crit-button=[@{critical_i18n}!](~@{character_name}|critical)}} {{stress=1}}"></button>
                    <input type="text" class="number_1" name="attr_Soak_Vim" value="((@{Stamina_Score}) + (@{armors_total_prot}) + (@{soak_bonus}) + (@{combat-mods_total_soak}) + ceil(((@{Vim_Score}) + (@{Vim_Puissant})) / 5))" disabled="true"/>
                    <span data-i18n="vim">Vim</span>
                </div>
            </div>
        </div>
    </div>
    <!--    Weapons -->
    <div>
        <h4 class="heading_label" data-i18n="weapons" >Weapons</h4>
        <table class="table_2" style="width:800px">
            <tr>
                <th><div style="width:190px" data-i18n="weapon-name" >Weapon Name</div></th>
                <td><div style="width:100px"></div></td>
                <th><div style="width:60px" data-i18n="init" >Init</div></th>
                <td><div style="width:25px"></div></td>
                <th><div style="width:60px" data-i18n="atk" >Atk</div></th>
                <td><div style="width:30px"></div></td>
                <th><div style="width:45px" data-i18n="dfn" >Dfn</div></th>
                <td><div style="width:18px;"></div></td>
                <th><div style="width:45px" data-i18n="dam" >Dam</div></th>
                <th><div style="width:50px" data-i18n="ability" >Ability</div></th>
                <th><div style="width:50px" data-i18n="load" >Load</div></th>
                <th><div style="width:40px" data-i18n="range" >Range</div></th>
                <th><div style="width:60px"></div></th>
            </tr>
        </table>
        <fieldset class="repeating_weapons">
            <table class="table_2" style="width:800px">
                <tr>
                    <th><input type="text" class="heading_3" name="attr_Weapon_name"/></th>

                    <td><button type="roll" class="button stress-roll single-roll" name="roll_weapon_Init" value="&{template:initiative} {{name=@{character_name}}} {{weapon=@{Weapon_name}}} {{roll=[[ @{stress-die} + (@{Quickness_Score}) [@{quickness_i18n}] + (@{Init_Weap}) [@{Weapon_name}] + (@{combat-mods_total_init}) [@{bonus_i18n}] - (@{Init_Encumbrance}) [@{encumbrance_i18n}] + ([[floor(@{Fatigue})]]) [@{fatigue_i18n}] + (@{wound_total}) [@{wounds_i18n}] + (?{@{initiative_i18n} @{modifiers_i18n}|0}) [@{initiative_i18n} @{modifiers_i18n}] &{tracker}]]}} {{botch-button=[@{botch_i18n}!](~@{character_name}|botch)}} {{crit-button=[@{critical_i18n}!](~@{character_name}|critical-init)}} {{stress=1}}" data-i18n="init" >Init</button></td>
                    <td><input type="text" class="number_1" name="attr_Init" value="(@{Quickness_Score}) + (@{Init_Weap}) + (@{combat-mods_total_init})- (@{Init_Encumbrance})" disabled="true"/></td>

                    <td><button type="roll" class="button stress-roll single-roll" name="roll_weapon_Atk" value="&{template:attack} {{name=@{character_name}}} {{weapon=@{Weapon_name}}} {{attack=[[ @{stress-die} + (@{Dexterity_Score}) [@{dexterity_i18n}] + (@{WeaponAbility}) [@{ability_i18n}] + (@{combat-mods_total_atk}) [@{bonus_i18n}] + (@{Atk_Weap}) [@{Weapon_name}] + (@{wound_total}) [@{wounds_i18n}] + ([[floor(@{Fatigue})]]) [@{fatigue_i18n}] + (?{@{circumstantial_i18n} @{attack_i18n}|0}) [@{circumstantial_i18n} @{attack_i18n}]]]}} {{damage=[[ (@{Strength_Score}) [@{strength_i18n}] + (@{Dam_Weap}) [@{Weapon_name}] + (@{combat-mods_total_dam}) [@{bonus_i18n}] + (?{@{circumstantial_i18n} @{damage_i18n}|0}) [@{circumstantial_i18n} @{damage_i18n}] ]]}} {{botch-button=[@{botch_i18n}!](~@{character_name}|botch)}} {{crit-button=[@{critical_i18n}!](~@{character_name}|critical)}} {{stress=1}}" data-i18n="atk" >Atk</button></td>
                    <td><input type="text" class="number_1" name="attr_Atk" value="(@{Dexterity_Score}) + (@{WeaponAbility}) + (@{combat-mods_total_atk}) + (@{Atk_Weap})" disabled="true"/></td>

                    <td><button type="roll" class="button stress-roll single-roll" name="roll_weapon_Dfn" value="&{template:defend} {{name=@{character_name}}} {{weapon=@{Weapon_name}}} {{defend=[[ @{stress-die} + (@{Quickness_Score}) [@{quickness_i18n}] + (@{WeaponAbility}) [@{ability_i18n}] + (@{combat-mods_total_dfn}) [@{bonus_i18n}] + (@{Dfn_Weap}) [@{Weapon_name}] + (@{wound_total}) [@{wounds_i18n}] + ([[floor(@{Fatigue})]]) [@{fatigue_i18n}] + (?{@{circumstantial_i18n} @{defense_i18n}|0}) [@{circumstantial_i18n} @{defense_i18n}] ]]}} {{botch-button=[@{botch_i18n}!](~@{character_name}|botch)}} {{crit-button=[@{critical_i18n}!](~@{character_name}|critical)}} {{stress=1}}" data-i18n="dfn" >Dfn</button></td>
                    <td><input type="text" class="number_1" name="attr_Dfn" value="(@{Quickness_Score}) + (@{WeaponAbility}) + (@{combat-mods_total_dfn}) + (@{Dfn_Weap})" disabled="true"/></td>
                    
                    <td><div style="width:10px;"></div></td>
                    <td><input type="number" class="number_1" name="attr_Dam" value="((@{Strength_Score}) + (@{combat-mods_total_dam}) + (@{Dam_Weap}))" disabled="true"/></td>
                    <td><input type="number" class="number_1" name="attr_WeaponAbility" value="0"/></td>
                    <td><input type="number" class="number_1" name="attr_Weapon_Load" value="0"/></td>
                    <td><input type="text" class="number_1" name="attr_Weapon_Range"/></td>
                    <th><div style="width:40px;"><input type="checkbox" class="hider checkbox_1" name="attr_Weapon_show" value="1" checked/><span></span></div></th>
                </tr>
            </table>
            <input type="checkbox" class="hider hidden" name="attr_Weapon_show" value="1" checked/><span></span>
            <div class="hide" style="border-color:#e6dbc6; border-style: inset;">
                <table class="table_3 table_center" style="display:inline; margin-right:10px;">
                    <tr >
                        <th colspan="7"><div style="width:200px;text-align:center;" data-i18n="initiative" >Initiative</div></th>
                    </tr>
                    <tr>
                        <td data-i18n="qik" >Qik</td>
                        <td></td>
                        <td data-i18n="weap" >Weap.</td>
                        <td></td>
                        <td data-i18n="bonus" >Bonus</td>
                        <td></td>
                        <td data-i18n="enc-" >Enc.</td>
                    </tr>
                    <tr>
                        <td><input type="number" class="number_2" name="attr_Init_Qik" value="(@{Quickness_Score})" disabled='true'/></td>
                        <td>+</td>
                        <td><input type="number" class="number_2" name="attr_Init_Weap" value="0"/></td>
                        <td>+</td>
                        <td><input type="number" class="number_2" name="attr_combat-mods_total_init" value="0" readonly/></td>
                        <td>-</td>
                        <td>
                            <input type="hidden" class="number_2" name="attr_Init_Burden" value="floor((((8*((@{Weapon_Load}) + (@{armors_total_load})) + 1) ** (1/2)) - 1) / 2)" disabled="true"/>
                            <!-- The formula are equivalent to max(0, burden - max(0, strength)), written using max(a,0) = (a + abs(a)) / 2 -->
                            <input type="hidden" class="number_2" name="attr_Init_Relative_Encumbrance" value="((@{Init_Burden}) - (((@{Strength_Score}) + abs((@{Strength_Score}))) / 2))" disabled="true" />
                            <input type="number" class="number_2" name="attr_Init_Encumbrance" value="((@{Init_Relative_Encumbrance}) + abs((@{Init_Relative_Encumbrance}))) / 2" disabled="true" />
                        </td>
                    </tr>
                </table>
                <table class="table_3 table_center" style="display:inline; margin-right:10px;">
                    <tr>
                        <th colspan="7"><div style="width:200px;text-align:center;" data-i18n="attack" >Attack</div></th>
                    </tr>
                    <tr>
                        <td data-i18n="dex" >Dex</td>
                        <td></td>
                        <td data-i18n="ability" >Ability</td>
                        <td></td>
                        <td data-i18n="bonus" >Bonus</td>
                        <td></td>
                        <td data-i18n="weap" >Weap</td>
                    </tr>
                    <tr>
                        <td><input type="text" class="number_2" name="attr_Atk_Dex"  value="(@{Dexterity_Score})" disabled='true'/></td>
                        <td>+</td>
                        <td><input type="text" class="number_2" name="attr_Atk_Ability" value="(@{WeaponAbility})" disabled="true"/></td>
                        <td>+</td>
                        <td><input type="number" class="number_2" name="attr_combat-mods_total_atk" value="0" readonly/></td>
                        <td>+</td>
                        <td><input type="text" class="number_2" name="attr_Atk_Weap" value="0"/></td>
                    </tr>
                </table>
                <table class="table_3 table_center" style="display:inline; margin-right:10px;">
                    <tr>
                        <th colspan="7"><div style="width:200px;text-align:center;" data-i18n="defense" >Defense</div></th>
                    </tr>
                    <tr>
                        <td data-i18n="qik" >Qik</td>
                        <td></td>
                        <td data-i18n="ability" >Ability</td>
                        <td></td>
                        <td data-i18n="bonus" >Bonus</td>
                        <td></td>
                        <td data-i18n="weapon" >Weapon</td>
                    </tr>
                    <tr>
                        <td><input type="text" class="number_2" name="attr_Dfn_Qik" value="(@{Quickness_Score})" disabled='true'/></td>
                        <td>+</td>
                        <td><input type="text" class="number_2" name="attr_Dfn_Ability" value="(@{WeaponAbility})" disabled="true"/></td>
                        <td>+</td>
                        <td><input type="number" class="number_2" name="attr_combat-mods_total_dfn" value="0" readonly/></td>
                        <td>+</td>
                        <td><input type="text" class="number_2" name="attr_Dfn_Weap" value="0"/></td>
                    </tr>
                </table>
                <table class="table_3 table_center" style="display:inline;">
                    <tr>
                        <th colspan="5"><div style="width:150px;text-align:center;" data-i18n="damage" >Damage</div></th>
                    </tr>
                    <tr>
                        <td data-i18n="strength" >Strength</td>
                        <td></td>
                        <td data-i18n="bonus" >Bonus</td>
                        <td></td>
                        <td data-i18n="weapon" >Weapon</td>
                    </tr>
                    <tr>
                        <td><input type="text" class="number_2" name="attr_Dam_Str" value="@{Strength_Score}" disabled='true'/></td>
                        <td>+</td>
                        <td><input type="number" class="number_2" name="attr_combat-mods_total_dam" value="0" readonly/></td>
                        <td>+</td>
                        <td><input type="text" class="number_2" name="attr_Dam_Weap" value="0"/></td>
                    </tr>
                </table>
            </div>
        </fieldset>
    </div>
</div>

<!-- 5  Spells -->
<div class="tab-content tab5">
    <!-- Bonuses -->
    <h4 class="heading_label" style="margin-top:10px;" data-i18n="bonus" >Bonus</h4>
    <table class="table_3" style="width:400px;">
        <tr></tr>
        <tr>
            <td style="text-align:right;"><span style="font-size:1.4em; margin-left: 15px;" data-i18n="aura" >Aura</span></td>
            <td><input type="number" class="number_1" name="attr_aura" value="3"/></td>
            <td style="text-align:right;" colspan="2"><span style="font-size:1.2em; margin-right:15px" data-i18n="gestures" >Gestures</span></td>
            <td>
                <select class="select_1" name="attr_gestures">
                    <option class="italic" value="1 [@{gestures_i18n}: @{exaggerated_i18n}]" data-i18n="gestures-exaggerated" >Exaggerated</option>
                    <option class="italic" selected value="0 [@{gestures_i18n}: @{bold_i18n}]" data-i18n="gestures-bold" >Bold</option>
                    <option class="italic" value="(-2) [@{gestures_i18n}: @{subtle_i18n}]" data-i18n="gestures-subtle" >Subtle</option>
                    <option class="italic" value="(-5) [@{gestures_i18n}: @{gest-none_i18n}]" data-i18n="gestures-none" >None</option>
                </select>
            </td>
            <td style="text-align:right;" colspan="2"><span style="font-size:1.2em; margin-right:15px" data-i18n="words" >Words</span></td>
            <td colspan="2">
                <select class="select_1" name="attr_words">
                    <option class="italic" value="1 [@{words_i18n}: @{loud_i18n}]" data-i18n="words-loud" >Loud</option>
                    <option class="italic" selected value="0 [@{words_i18n}: @{firm_i18n}]" data-i18n="words-firm" >Firm</option>
                    <option class="italic" value="(-5) [@{words_i18n}: @{quiet_i18n}]" data-i18n="words-quiet" >Quiet</option>
                    <option class="italic" value="(-10) [@{words_i18n}: @{words-none_i18n}]" data-i18n="words-none" >None</option>
                </select>
            </td>
            <td></td>
        </tr>
    </table>
    <!-- Formulaic spells -->
    <h4 class="heading_label" style="margin-top:10px;" data-i18n="formulaic-spells" >Formulaic spells</h4>
    <fieldset class="repeating_spell">
        <table style="margin-top:10px;">
            <tr>
                <th style="padding-left:10px;"><div class="flex-container-center">
                    <button type="roll" class="button simple-roll" name="roll_spell_simple" value="&{template:spell} {{spell=@{spell_name}}} {{character=@{character_name}}} {{sigil=@{sigil}}} {{roll=[[ (@{simple-die} + (@{Stamina_Score}) [@{stamina_i18n}] + (@{sys_at}@{character_name}@{sys_pipe}@{spell_tech_name}_Score@{sys_rbk} + @{sys_at}@{character_name}@{sys_pipe}@{spell_tech_name}_Puissant@{sys_rbk}) [@{sys_at}@{character_name}@{sys_pipe}@{spell_tech_name}_i18n@{sys_rbk}] + (@{sys_at}@{character_name}@{sys_pipe}@{spell_form_name}_Score@{sys_rbk} + @{sys_at}@{character_name}@{sys_pipe}@{spell_form_name}_Puissant@{sys_rbk}) [@{sys_at}@{character_name}@{sys_pipe}@{spell_form_name}_i18n@{sys_rbk}] + ([[@{spell_Focus}]]) [@{focus_i18n}] + (@{spell_bonus}) [@{bonus_i18n}] + (@{gestures}) + (@{words}) + (@{aura}) [@{aura_i18n}] + ([[floor(@{Fatigue})]]) [@{fatigue_i18n}] + (@{wound_total}) [@{wounds_i18n}] + (?{@{modifiers_i18n}|0}) [@{modifiers_i18n}]) / ([[1 + (@{spell_Deficiency})]] [@{deficiency_i18n}]) ]]}} {{range=@{spell_range}}} {{duration=@{spell_duration}}} {{target=@{spell_target}}} {{effect=@{spell_note}}} {{mastery=@{spell_note-2}}} {{Technique=@{sys_at}@{character_name}@{sys_pipe}@{spell_tech_name}_i18n@{sys_rbk}}} {{Form=@{sys_at}@{character_name}@{sys_pipe}@{spell_form_name}_i18n@{sys_rbk}}} {{Level=@{spell_level}}} {{botch-button=[@{botch_i18n}!](~@{character_name}|botch)}} {{crit-button=[@{critical_i18n}!](~@{character_name}|critical)}} {{stress=}}"></button>
                    <button type="roll" class="button stress-roll" name="roll_spell_stress" value="&{template:spell} {{spell=@{spell_name}}} {{character=@{character_name}}} {{sigil=@{sigil}}} {{roll=[[ (@{stress-die} + (@{Stamina_Score}) [@{stamina_i18n}] + (@{sys_at}@{character_name}@{sys_pipe}@{spell_tech_name}_Score@{sys_rbk} + @{sys_at}@{character_name}@{sys_pipe}@{spell_tech_name}_Puissant@{sys_rbk}) [@{sys_at}@{character_name}@{sys_pipe}@{spell_tech_name}_i18n@{sys_rbk}] + (@{sys_at}@{character_name}@{sys_pipe}@{spell_form_name}_Score@{sys_rbk} + @{sys_at}@{character_name}@{sys_pipe}@{spell_form_name}_Puissant@{sys_rbk}) [@{sys_at}@{character_name}@{sys_pipe}@{spell_form_name}_i18n@{sys_rbk}] + ([[@{spell_Focus}]]) [@{focus_i18n}] + (@{spell_bonus}) [@{bonus_i18n}] + (@{gestures}) + (@{words}) + (@{aura}) [@{aura_i18n}] + ([[floor(@{Fatigue})]]) [@{fatigue_i18n}] + (@{wound_total}) [@{wounds_i18n}] + (?{@{modifiers_i18n}|0}) [@{modifiers_i18n}]) / ([[1 + (@{spell_Deficiency})]] [@{deficiency_i18n}]) ]]}} {{range=@{spell_range}}} {{duration=@{spell_duration}}} {{target=@{spell_target}}} {{effect=@{spell_note}}} {{mastery=@{spell_note-2}}} {{Technique=@{sys_at}@{character_name}@{sys_pipe}@{spell_tech_name}_i18n@{sys_rbk}}} {{Form=@{sys_at}@{character_name}@{sys_pipe}@{spell_form_name}_i18n@{sys_rbk}}} {{Level=@{spell_level}}} {{botch-button=[@{botch_i18n}!](~@{character_name}|botch)}} {{crit-button=[@{critical_i18n}!](~@{character_name}|critical)}} {{stress=1}}"></button>
                </div></th>
                <th style="padding-left:10px;"><input style="width:645px;" type="text" class="heading_2" name="attr_spell_name" placeholder="Spell Name" data-i18n-placeholder="spell-name" /></th>
                <th><div style="width:40px;"><input type="checkbox" class="hider checkbox_1" name="attr_Spell_show" value="1" checked/><span></span></div></th>
            </tr>
        </table>
        <input type="checkbox" class="hider hidden" value="1" name="attr_Spell_show" checked/>
        <div class="hide">
            <table class="table_2" >
                <tr>
                    <td data-i18n="technique">Technique</td>
                    <td>
                        <!--
                        This select tag is left in comment for reference purposes. A worker will translate from that old select
                        to the new format below
                        -->
                        <!--
                        <select class="select_1" name="attr_Technique_select">
                            <option class="italic" value="0" data-i18n="technique" >Technique</option>
                            <option value="1" data-i18n="creo" >Creo</option>
                            <option value="2" data-i18n="intellego" >Intellego</option>
                            <option value="3" data-i18n="muto" >Muto</option>
                            <option value="4" data-i18n="perdo" >Perdo</option>
                            <option value="5" data-i18n="rego" >Rego</option>
                        </select>
                        -->
                        <select class="select_1" name="attr_spell_tech_name">
                            <option class="italic" value="unselected" data-i18n="technique" >Technique</option>
                            <option value="Creo" data-i18n="creo" >Creo</option>
                            <option value="Intellego" data-i18n="intellego" >Intellego</option>
                            <option value="Muto" data-i18n="muto" >Muto</option>
                            <option value="Perdo" data-i18n="perdo" >Perdo</option>
                            <option value="Rego" data-i18n="rego" >Rego</option>
                        </select>
                    </td>
                    <td data-i18n="form" >Form</td>
                    <td>
                        <!--
                        This select tag is left in comment for reference purposes. A worker will translate from that old select
                        to the new format below
                        -->
                        <!--
                        <select class="select_1" name="attr_Form_select">
                            <option class="italic" value="0" data-i18n="form" >Form</option>
                            <option value="1" data-i18n="animal" >Animal</option>
                            <option value="2" data-i18n="aquam" >Aquam</option>
                            <option value="3" data-i18n="auram" >Auram</option>
                            <option value="4" data-i18n="corpus" >Corpus</option>
                            <option value="5" data-i18n="herbam" >Herbam</option>
                            <option value="6" data-i18n="ignem" >Ignem</option>
                            <option value="7" data-i18n="imaginem" >Imaginem</option>
                            <option value="8" data-i18n="mentem" >Mentem</option>
                            <option value="9" data-i18n="terram" >Terram</option>
                            <option value="10" data-i18n="vim" >Vim</option>
                        </select>
                        -->
                        <select class="select_1" name="attr_spell_form_name">
                            <option class="italic" value="unselected" data-i18n="form" >Form</option>
                            <option value="Animal" data-i18n="animal" >Animal</option>
                            <option value="Aquam" data-i18n="aquam" >Aquam</option>
                            <option value="Auram" data-i18n="auram" >Auram</option>
                            <option value="Corpus" data-i18n="corpus" >Corpus</option>
                            <option value="Herbam" data-i18n="herbam" >Herbam</option>
                            <option value="Ignem" data-i18n="ignem" >Ignem</option>
                            <option value="Imaginem" data-i18n="imaginem" >Imaginem</option>
                            <option value="Mentem" data-i18n="mentem" >Mentem</option>
                            <option value="Terram" data-i18n="terram" >Terram</option>
                            <option value="Vim" data-i18n="vim" >Vim</option>
                        </select>
                    </td>
                    <td colspan="4">
                        <div class="flex-container-between">
                            <span class="vcenter">
                                <span data-i18n="focus" style="padding-right: 5px;">Focus</span>
                                <input type="checkbox" class="check" name="attr_spell_Focus" value="[[{((@{sys_at}@{character_name}@{sys_pipe}@{spell_tech_name}_Score@{sys_rbk} + @{sys_at}@{character_name}@{sys_pipe}@{spell_tech_name}_Puissant@{sys_rbk}) [@{sys_at}@{character_name}@{sys_pipe}@{spell_tech_name}_i18n@{sys_rbk}]), ((@{sys_at}@{character_name}@{sys_pipe}@{spell_form_name}_Score@{sys_rbk} + @{sys_at}@{character_name}@{sys_pipe}@{spell_form_name}_Puissant@{sys_rbk}) [@{sys_at}@{character_name}@{sys_pipe}@{spell_form_name}_i18n@{sys_rbk}])}kl1]] [@{focus_i18n}]"></input>
                            </span>
                            <span class="vcenter">
                                <span data-i18n="deficiency" style="padding-right: 5px;">Deficiency</span>
                                <input type="checkbox" class="check" name="attr_spell_Deficiency" value="1"></input>
                            </span>
                            <span class="vcenter">
                                <span data-i18n="level" >Level</span>
                                <input type="number" class="number_2" name="attr_spell_level" value="0"/>
                            </span>
                            <span class="vcenter">
                                <span data-i18n="bonus" >Bonus</span>
                                <input type="number" class="number_2" name="attr_spell_bonus" value="0"/>
                            </span>
                        </div>
                    </td>
                </tr>
                <!--
                <tr>
                    <td></td>
                    <td><input type="text" class="hidden" name="attr_Technique_name" value="Technique"/></td>
                    <td><input type="number" class="hidden" name="attr_spell_Technique" value="0"/></td></td>
                    <td><input type="text" class="hidden" name="attr_Form_name" value="Form"/></td>
                    <td><input type="number" class="hidden" name="attr_spell_Form" value="0"/></td></td>
                    <td></td>
                </tr>
                -->
                <tr>
                    <td data-i18n="range" >Range</td>
                    <td><input type="text" class="heading_2" name="attr_spell_range" value=""/></td>
                    <td data-i18n="duration" > Duration</td>
                    <td><input type="text" class="heading_2" name="attr_spell_duration" value=""/></td>
                    <td data-i18n="target" >Target</td>
                    <td><input type="text" class="heading_2" name="attr_spell_target" value="" /></td>
                    <td data-i18n="exp">Exp</td>
                    <td>
                        [<input type="number" class="number_2" name="attr_spell_exp" value="0"/>/<input type="number" class="number_2" name="attr_spell_exp-2" value="0"/>]
                    </td>
                </tr>
                <tr>
                    <td colspan="8"><textarea class="textarea_2" style="width:815px;" name="attr_spell_note" placeholder="Spell Description" data-i18n-placeholder="spell-description"></textarea></td>
                </tr>
                <tr>
                    <td colspan="8"><textarea class="textarea_2" style="width:815px;height:36px" name="attr_spell_note-2" data-i18n-placeholder="spell-mastery" placeholder="Spell Mastery "></textarea></td>
                </tr>
            </table>
        </div>
    </fieldset>

    <!-- Spontaneous Spells -->
    <h4 class="heading_label" style="margin-top:10px;" data-i18n="spontaneous-spells" >Spontaneous spells</h4>
    <fieldset class="repeating_spontaneous">
        <table style="margin-top:10px;">
            <tr>
                <th style="padding-left:10px;"><div class="flex-container-center">
                    <button style="margin: 0px auto;" type="roll" class="button stress-roll single-roll" name="roll_saved_spontaneous_stress" value="&{template:arcane} {{label0=@{spell_name}}} {{result0=[[ (@{stress-die} + (@{Stamina_Score}) [@{stamina_i18n}] + (@{sys_at}@{character_name}@{sys_pipe}@{spell_tech_name}_Score@{sys_rbk} + @{sys_at}@{character_name}@{sys_pipe}@{spell_tech_name}_Puissant@{sys_rbk}) [@{sys_at}@{character_name}@{sys_pipe}@{spell_tech_name}_i18n@{sys_rbk}] + (@{sys_at}@{character_name}@{sys_pipe}@{spell_form_name}_Score@{sys_rbk} + @{sys_at}@{character_name}@{sys_pipe}@{spell_form_name}_Puissant@{sys_rbk}) [@{sys_at}@{character_name}@{sys_pipe}@{spell_form_name}_i18n@{sys_rbk}] + ([[@{spell_Focus}]]) [@{focus_i18n}] + (@{spell_bonus}) [@{bonus_i18n}] + (@{gestures}) + (@{words}) + (@{aura}) [@{aura_i18n}] + ([[floor(@{Fatigue})]]) [@{fatigue_i18n}] + (@{wound_total}) [@{wounds_i18n}] + (?{@{modifiers_i18n}|0}) [@{modifiers_i18n}] ) / ([[1 + (@{spell_Deficiency})]] [@{deficiency_i18n}]) /2 ]]}} {{label1=^{aura}}} {{result1=@{aura}}} {{label2=^{weakness-m}}} {{result2=[[ (@{wound_total}) [@{wounds_i18n}] + [[floor(@{fatigue})]] [@{fatigue_i18n}] ]]}} {{label3=^{circumstances-m}}} {{result3=[[ ?{@{modifiers_i18n}|0} ]]}} {{textlabel=@{spell_tech_name} @{spell_form_name} @{spell_level}}} {{textsublabel=@{spell_range} - @{spell_duration} - @{spell_target}}} {{textfield=@{spell_note}}} {{botch-button=[@{botch_i18n}!](~@{character_name}|botch)}} {{crit-button=[@{critical_i18n}!](~@{character_name}|critical-spontaneous)}} {{stress=1}}"></button>
                </div></th>
                <th style="padding-left:10px;"><input style="width:645px;" type="text" class="heading_2" name="attr_spell_name" placeholder="Spell Name" data-i18n-placeholder="spell-name" /></th>
                <th><div style="width:40px;"><input type="checkbox" class="hider checkbox_1" name="attr_Spell_show" value="1" checked/><span></span></div></th>
            </tr>
        </table>
        <input type="checkbox" class="hider hidden" value="1" name="attr_Spell_show" checked/>
        <div class="hide">
            <table class="table_2" >
                <tr>
                    <td data-i18n="technique">Technique</td>
                    <td>
                        <select class="select_1" name="attr_spell_tech_name">
                            <option class="italic" value="unselected" data-i18n="technique" >Technique</option>
                            <option value="Creo" data-i18n="creo" >Creo</option>
                            <option value="Intellego" data-i18n="intellego" >Intellego</option>
                            <option value="Muto" data-i18n="muto" >Muto</option>
                            <option value="Perdo" data-i18n="perdo" >Perdo</option>
                            <option value="Rego" data-i18n="rego" >Rego</option>
                        </select>
                    </td>
                    <td data-i18n="form" >Form</td>
                    <td>
                        <select class="select_1" name="attr_spell_form_name">
                            <option class="italic" value="unselected" data-i18n="form" >Form</option>
                            <option value="Animal" data-i18n="animal" >Animal</option>
                            <option value="Aquam" data-i18n="aquam" >Aquam</option>
                            <option value="Auram" data-i18n="auram" >Auram</option>
                            <option value="Corpus" data-i18n="corpus" >Corpus</option>
                            <option value="Herbam" data-i18n="herbam" >Herbam</option>
                            <option value="Ignem" data-i18n="ignem" >Ignem</option>
                            <option value="Imaginem" data-i18n="imaginem" >Imaginem</option>
                            <option value="Mentem" data-i18n="mentem" >Mentem</option>
                            <option value="Terram" data-i18n="terram" >Terram</option>
                            <option value="Vim" data-i18n="vim" >Vim</option>
                        </select>
                    </td>
                    <td><span class="vcenter">
                        <span data-i18n="focus" style="padding-right: 5px;" >Focus</span>
                        <input type="checkbox" class="check" name="attr_spell_Focus" value="[[{((@{sys_at}@{character_name}@{sys_pipe}@{spell_tech_name}_Score@{sys_rbk} + @{sys_at}@{character_name}@{sys_pipe}@{spell_tech_name}_Puissant@{sys_rbk}) [@{sys_at}@{character_name}@{sys_pipe}@{spell_tech_name}_i18n@{sys_rbk}]), ((@{sys_at}@{character_name}@{sys_pipe}@{spell_form_name}_Score@{sys_rbk} + @{sys_at}@{character_name}@{sys_pipe}@{spell_form_name}_Puissant@{sys_rbk}) [@{sys_at}@{character_name}@{sys_pipe}@{spell_form_name}_i18n@{sys_rbk}])}kl1]] [@{focus_i18n}]"></input>
                    </span></td>
                    <td><span class="vcenter">
                        <span data-i18n="deficiency" style="padding-right: 5px;" >Deficiency</span>
                        <input type="checkbox" class="check" name="attr_spell_Deficiency" value="1"></input>
                    </span></td>
                    <td data-i18n="level" >Level</td>
                    <td><input type="number" class="number_2" name="attr_spell_level" value="0"/></td>
                </tr>
                <!--
                <tr>
                    <td></td>
                    <td><input type="text" class="hidden" name="attr_Technique_name" value="Technique"/></td>
                    <td><input type="number" class="hidden" name="attr_spell_Technique" value="0"/></td></td>
                    <td><input type="text" class="hidden" name="attr_Form_name" value="Form"/></td>
                    <td><input type="number" class="hidden" name="attr_spell_Form" value="0"/></td></td>
                    <td></td>
                </tr>
                -->
                <tr>
                    <td data-i18n="range" >Range</td>
                    <td><input type="text" class="heading_2" name="attr_spell_range" value=""/></td>
                    <td data-i18n="duration" > Duration</td>
                    <td><input type="text" class="heading_2" name="attr_spell_duration" value=""/></td>
                    <td data-i18n="target" >Target</td>
                    <td><input type="text" class="heading_2" name="attr_spell_target" value="" /></td>
                    <td data-i18n="bonus" >Bonus</td>
                    <td><input type="number" class="number_2" name="attr_spell_bonus" value="0"/></td>
                </tr>
                <tr>
                    <td colspan="8"><textarea class="textarea_2" style="width:815px;" name="attr_spell_note" placeholder="Spell Description" data-i18n-placeholder="spell-description"></textarea></td>
                </tr>
            </table>
        </div>
    </fieldset>
</div>

<!-- 6 Sheet -->
<div class="tab-content tab6">
    <!-- Welcome message -->
    <div class="welcome">
        <h3 class="heading_label" style="margin-bottom: 5px;">Ars Magica 5th Edition Sheet - v1.7</h3>
        <div data-i18n="welcome-title">Welcome to the Ars Magica 5th Edition Sheet !</div>
        <br>
        <div data-i18n="welcome-0">Those are a few important notes you'll need to read before using the sheet. A more complete documentation can be found below.
        </div>
        <br>
        <div data-i18n="welcome-1">First, this sheet features some configuration options, found below. Be sure to review those. Configure is your character is a Magi, how you want botches to be rolled and display in chat, and how you want to chose between simple and stress rolls (when applicable).
        </div>
        <br>
        <div data-i18n="welcome-2">Second, you might want to read a bit the section on the documentation on how rolls works. The stress dice of Ars Magica 5th edition are quite complicated, and this sheet isn't <i>quite</i> able to handle them completely automatically. You'll need to copy the result before the critical roll, for instance.
        </div>
        <br>
        <div>
            <span data-i18n="welcome-3a">Third, some element of the sheet are</span> 
            <span class="has-tooltip">
                <span data-i18n="welcome-3b">underlined</span>
                <span class="tooltip" data-i18n="tooltip-welcome">Underlined text features tooltip with additional informations</span>
            </span>: <span data-i18n="welcome-3c">this means they have a tooltip that shows additional info about them.</span>
        </div>
    </div>

    <!-- Configuration -->
    <div>
        <h3 class="heading_label" style="margin-top: 15px;" data-i18n="config-configuration">Configuration</h3>
        <div class="config">
            <span data-i18n="config-botch">Botch formula</span>
            <select class="select_1" name="attr_botch_formula">
                <option value="&{template:botch} {{roll= [[{[[?{@{botch_num_i18n}|1}]]d10cs0cf10}=10]] }} {{type=Grouped}}" data-i18n="config-botch-grouped">Grouped rolls</option>
                <option value="&{template:botch} {{roll= ?{@{botch_num_i18n} | 1 Die,[[1d10cf10cs0]]|2 Dice,[[1d10cf10cs0]] [[1d10cf10cs0]]|3 Dice,[[1d10cf10cs0]] [[1d10cf10cs0]] [[1d10cf10cs0]]|4 Dice,[[1d10cf10cs0]] [[1d10cf10cs0]] [[1d10cf10cs0]] [[1d10cf10cs0]]|5 Dice,[[1d10cf10cs0]] [[1d10cf10cs0]] [[1d10cf10cs0]] [[1d10cf10cs0]] [[1d10cf10cs0]]|6 Dice,[[1d10cf10cs0]] [[1d10cf10cs0]] [[1d10cf10cs0]] [[1d10cf10cs0]] [[1d10cf10cs0]] [[1d10cf10cs0]]|7 Dice,[[1d10cf10cs0]] [[1d10cf10cs0]] [[1d10cf10cs0]] [[1d10cf10cs0]] [[1d10cf10cs0]] [[1d10cf10cs0]] [[1d10cf10cs0]]|8 Dice,[[1d10cf10cs0]] [[1d10cf10cs0]] [[1d10cf10cs0]] [[1d10cf10cs0]] [[1d10cf10cs0]] [[1d10cf10cs0]] [[1d10cf10cs0]] [[1d10cf10cs0]]} }} {{type=Grouped}}" data-i18n="config-botch-separate">Separate rolls</option>
            </select>

            <span data-i18n="config-dice">Dice type</span>
            <select class="select_1" name="attr_die-type-selection">
                <option value="toggle" data-i18n="config-dice-toggle">Toggle</option>
                <option value="both" data-i18n="config-dice-both">Both</option>
            </select>

            <span data-i18n="config-magi">Magi character</span>
            <select class="select_1" name="attr_isMagi">
                <option value="yes" data-i18n="config-magi-yes">Yes</option>
                <option value="no" data-i18n="config-magi-no">No</option>
            </select>
        </div>
    </div>
    <!-- Legacy -->
    <div>
        <h3 class="heading_label" style="margin-top: 15px; margin-bottom: 10px;" data-i18n="legacy-title">Legacy</h3>
        <div class="welcome" data-i18n="legacy-content"> This section contains part of the sheet that are no longer used, but cannot be removed because they contain character data.
        </div>
        <div style="margin-top: 15px;">
            <h4 class="heading_label" data-i18n="armor" >Armor</h4>
            <table class="table_2" style="width:800px;">
                <tr>
                    <th colspan="2" data-i18n="armor-worn" >Armor Worn</th>
                    <th colspan="2" data-i18n="combat-modifiers" >Combat Modifiers</th>
                </tr>
                <tr>
                    <th colspan="2"><textarea class="textarea_2" name="attr_ArmorWorn"></textarea></th>
                    <th colspan="2"><textarea class="textarea_2" name="attr_ArmorModifiers"></textarea></th>
                </tr>
            </table>
        </div>
    </div>

    <!-- Embedded documentation -->
    <div class="divider" style="height:15px;"><span>&nbsp;</span></div>
    <div class="documentation" style="margin-top:5px">
        <h2 class=" heading_label" >Sheet Documentation</h2>
        <p>Welcome the Ars Magica 5th Edition character sheet. This page contains the documentation for the sheet.</p>
        <h3 class=" heading_label" >Experience</h3>
        <p>The fields for experience work as follows:</p>
        <ul>
            <li>the first number is your xp towards the next level. You can edit it.</li>
            <li>the second number is the xp needed to reach the next level. It is readonly.</li>
            <li>the third number is the total xp needed to reach your current level. It is readonly.</li>
        </ul>
        <h3 class=" heading_label" >Rolls and roll buttons</h3>
        <p>The sheet contains a number of button that roll dice, known as roll button. There are the three button right to the tabs:
            <span style="color:#169E9C" >Roll</span>,
            <span style="color:#ee3f2f" >Botch</span>and
            <span style="color:#DAA520" >Critical</span>(in english, they might be translated to your language):
        </p>
        <ul>
            <li>
                <span style="color:#169E9C" >Roll</span>rolls a 10-sided die, with no particular results (roll20's default formatting for 1s and 10s is disabled)
            </li>
            <li>
                <span style="color:#ee3f2f" >Botch</span>handles rolling botch dice, see below
            </li>
            <li>
                <span style="color:#daa520" >Critical</span>handles critical rolls, see below
            </li>
        </ul>
        <p>There are also die-shaped roll buttons in the sheet near interesting totals (characteristics, abilities, spells etc.) for easy rolling. This sheet supports both simple dice and stress dice, for all of them.</p>
        <h4 class=" heading_label" >Roll configuration</h4>
        <p>In the configuration section (above this documentation), you will find a setting for how you want to handle simple vs. stress rolls:</p>
        <ul>
            <li>on "both", you will have two roll buttons, the plain one rolling a simple die, the
                <span style="color:#ee3f2f" >red</span>&
                <span style="color:#daa520" >gold</span>one rolling a stress die
            </li>
            <li>on "toggle", a new button will appear left to the "Roll" button. It display the current type of roll, and you can click on it to toggle between simple and stress dice</li>
        </ul>
        <h4 class=" heading_label" >Simple die</h4>
        <p>The icon for simple dice is a plain die, without particular colouring. When you roll a simple die from the sheet, the result in chat will be coloured
            <span style="color:#5e5e5e" >grey</span>or
            <span style="color:white; text-shadow: 1px 0px 3px #666666" >white</span>(note it is colorless).
        </p>
        <p>A simple die has no special results, so no further formatting is needed.</p>
        <h4 class=" heading_label" >Stress die</h4>
        <p>The icon for stress dice is a die with a
            <span style="color:#ee3f2f" >red</span>side, and a
            <span style="color:#daa520" >gold</span>side, reflecting the possibility of a botch or a critical roll. When you roll a stress die from the sheet, the result will be coloured:
        </p>
        <ul>
            <li>
                <span style="color:#8d4f23" >brown</span>or
                <span style="color:#c2a973" >khaki</span>if the result is nothing special
            </li>
            <li>
                <span style="color:#ee3f2f" >red</span>on a botch
            </li>
            <li>
                <span style="color:#daa520" >gold</span>on a critical (natural 1)
            </li>
        </ul>
        <p>The formula for a stress die (you can see it by hovering over a result, see also "Labels" below) is quite complex, but does something simple:</p>
        <ul>
            <li>on a 0 (or 10 on the standard d10), the value will be 0. You then roll botch dice to see if you botch</li>
            <li>on a critical (natural 1), the value will also be 0</li>
            <li>Otherwise, the result is whatever was rolled</li>
        </ul>
        <h4 class=" heading_label" >Botch</h4>
        <p>When you roll a 0, the formula for a stress die yields a value of 0 (though other modifiers will apply). A roll of 0 can be easily seen, as the result will be bright red. You must then roll botch dice. To roll botch dice, you have to equivalent options:</p>
        <ul>
            <li>click on
                <span style="color:#ee3f2f" >Botch</span>right to the tabs on top of the sheet
            </li>
            <li>click the "botch!" button n direclty in the chat near the result</li>
        </ul>
        <p>In the configuration section (above this documentation), you will find a setting for how you want to roll botch dice:</p>
        <ul>
            <li>on "separate", all botch die will be displayed individually in the chat, and you choose the number of botch dice with a dropdown menu (limited to 8 botch dice)</li>
            <li>on "grouped", only the total number of botch will be displayed (i.e. the number of 0s rolled). You enter the number of botch dice as a number. You can still see the individual rolls by hovering on the result in chat</li>
        </ul>
        <p>When you do botch (i.e roll 10s), the output will be coloured bright red.</p>
        <h4 class=" heading_label" >Critical</h4>
        <p>When you roll a natural 1 on a stress die, you rolled a critical. The result will be displayed in bright
            <span style="color:#daa520" >gold</span>colour. In that case, the formula for a stress die has value 0, so that you can add the result of the dice to your modifiers and bonuses. To roll the critical dice, you have two nearly equivalent options:
        </p>
        <ul>
            <li>click on the
                <span style="color:#DAA520" >Critical</span>button right to the tabs
            </li>
            <li>click the "critical!" golden text next to the result in chat</li>
        </ul>
        <p>In both case, you will be asked for the previous total (just copy-paste the value), and the die special Ars Magica 5th doubling die will be rolled and added (the formula does now you already rolled at least a 1s, and so must multiply by at least 2). The displayed result is the sum, i.e. the final result.</p>
        <blockquote>
            <p>
                <strong>Warning</strong>
            </p>
            <p>When you crit on a
                <em>spontaneous casting roll</em>or
                <em>initiative roll</em>, always use the "critical!" golden text next to the result in chat. Those button do not call the standard critical roll, but specific ones:<br>+ For spontaneous rolls, it takes into account the divide by 2<br>+ For initiative rolls, it will set your token's initiative in the turn tracker
            </p>
        </blockquote>
        <p>As the exploding rolls of Ars Magica are quite hard to handle, there's a caveat in the formula if you use 3D dice in roll20:
            <em>the last result you see on screen is wrong</em>as the last rolled die is rerolled. This is because the formula splits the roll in two parts:
        </p>
        <ul>
            <li>the first computes the number of 1s you rolled (for each 1, it will multiplie the final roll by 2, as in the Ars Magica rules). But in doing that, the last (non-1) roll is lost. This is a limitation of the roll20 dice engine</li>
            <li>the second part rerolls the last result as [[1d9+1]],  a weird dice that takes values from 2 to 10 (because the last roll cannot be 1, otherwise it is not the last)</li>
        </ul>
        <p>This might be a bit weird, but this yields exactly the same results (that is, you have the exact same chance to roll a given number) than what the Ars Magica 5 rules describe. The problem is only visual.</p>
        <p>Other than that, the formula is correct: it does takes into account that you already rolled a 1 before clicking on the "Critical" button, and the previous total is also correct. No need to substract 1, or multiply by two, just copy-paste your previous result and read the final total in the chat.</p>
        <h4 class=" heading_label" >Inline Labels</h4>
        <p>When you roll from the sheet, the rolltemplates displayed in the chat will show some values that went into the roll. You can hover on the final result with your mouse to see all the values that were used in the roll. The values are labelled so that you know where that +5 comes from.</p>
        <h3 class=" heading_label" >Roll buttons</h3>
        <p>The following roll buttons are defined in the sheet and may be called using ability command buttons:</p>
        <ul>
            <li>
                <span class=" codespan" >reroll</span>
            </li>
            <li>
                <span class=" codespan" >botch</span>
            </li>
            <li>
                <span class=" codespan" >critical</span>
            </li>
            <li>
                <span class=" codespan" >critical-spontaneous</span>
            </li>
            <li>
                <span class=" codespan" >critical-init</span>
            </li>
            <li>
                <span class=" codespan" >personality1_simple</span>/
                <span class=" codespan" >personality1_stress</span>through
                <span class=" codespan" >personality6_simple</span>/
                <span class=" codespan" >personality6_stress</span>
            </li>
            <li>
                <span class=" codespan" >reputation1_simple</span>/
                <span class=" codespan" >reputation1_stress</span>through
                <span class=" codespan" >reputation6_simple</span>/
                <span class=" codespan" >reputation6_stress</span>
            </li>
            <li>
                <span class=" codespan" >Intelligence_simple</span>/
                <span class=" codespan" >Intelligence_stress</span>
            </li>
            <li>
                <span class=" codespan" >Perception_simple</span>/
                <span class=" codespan" >Perception_stress</span>
            </li>
            <li>
                <span class=" codespan" >Strength_simple</span>/
                <span class=" codespan" >Strength_stress</span>
            </li>
            <li>
                <span class=" codespan" >Stamina_simple</span>/
                <span class=" codespan" >Stamina_stress</span>
            </li>
            <li>
                <span class=" codespan" >Presence_simple</span>/
                <span class=" codespan" >Presence_stress</span>
            </li>
            <li>
                <span class=" codespan" >Communication_simple</span>/
                <span class=" codespan" >Communication_stress</span>
            </li>
            <li>
                <span class=" codespan" >Dexterity_simple</span>/
                <span class=" codespan" >Dexterity_stress</span>
            </li>
            <li>
                <span class=" codespan" >Quickness_simple</span>/
                <span class=" codespan" >Quickness_stress</span>
            </li>
            <li>
                <span class=" codespan" >ability_simple</span>/
                <span class=" codespan" >ability_stress</span>(inside a repeating section, needs special handling)
            </li>
            <li>
                <span class=" codespan" >Formulaic_simple</span>/
                <span class=" codespan" >Formulaic_stress</span>
            </li>
            <li>
                <span class=" codespan" >Ritual_simple</span>/
                <span class=" codespan" >Ritual_stress</span>
            </li>
            <li>
                <span class=" codespan" >soak</span>
            </li>
            <li>
                <span class=" codespan" >weapon_Init</span>
            </li>
            <li>
                <span class=" codespan" >weapon_Atk</span>
            </li>
            <li>
                <span class=" codespan" >weapon_Dfn</span>
            </li>
            <li>
                <span class=" codespan" >spell_simple</span>/
                <span class=" codespan" >spell_stress</span>(inside a repeating section, needs special handling)
            </li>
        </ul>
        <h3 class=" heading_label" >Roll Template</h3>
        <p>This is the list of available roll template and what value they support.</p>
        <p>All rolltemplate support the following values:</p>
        <ul>
            <li>
                <span class=" codespan" >stress</span>: If any value is supplied, indicate that the roll is a stress rolls. Changes the colors of the main roll, and displays the following buttons if appropriate
            </li>
            <li>
                <span class=" codespan" >botch-button</span>: ability button to roll the botch dice if the roll is a botch. Usually
                <span class=" codespan" >[@{botch_i18n}!](~@{character_name}|botch)</span>
            </li>
            <li>
                <span class=" codespan" >crit-button</span>: ability button to roll the critical dice if the roll is a critical. Usually
                <span class=" codespan" >[@{critical_i18n}!](~@{character_name}|critical)</span>, but not always (e.g. spontaneous and initiative rolls are special-cases)
            </li>
        </ul>
        <p>Those are omitted in the following list of rolltemplate names and supported values:</p>
        <ul>
            <li>
                <strong>
                    <span class=" codespan" >custom</span>
                </strong>:
                <ul>
                    <li>This is the improved default template created by Jakob. See
                        <span class=" codespan" >https://wiki.roll20.net/Building_Character_Sheets/Roll_Templates#Jakob.27s_Better_Default_Rolltemplate</span>for details. All CSS v3 colors are supported by the
                        <span class=" codespan" >color</span>key (names must be all lowercase)
                    </li>
                    <li>In addition, the rolltemplate supports the
                        <span class=" codespan" >roll-color</span>and
                        <span class=" codespan" >button-color</span>to change the background color of inline rolls and ability buttons, respectively, within the template. Both values support all CSS v3 colors, as
                        <span class=" codespan" >color</span>does. Those also support the
                        <span class=" codespan" >transparent</span>color.
                    </li>
                    <li>The keys
                        <span class=" codespan" >left-align</span>and
                        <span class=" codespan" >right-align</span>can be used to control the text alignement of the left and right column, respectively. Values can be "left", "center" or "right".
                    </li>
                </ul>
            </li>
            <li>
                <strong>
                    <span class=" codespan" >spell</span>
                </strong>:
                <ul>
                    <li>
                        <span class=" codespan" >character</span>
                    </li>
                    <li>
                        <span class=" codespan" >duration</span>
                    </li>
                    <li>
                        <span class=" codespan" >effect</span>
                    </li>
                    <li>
                        <span class=" codespan" >Form</span>
                    </li>
                    <li>
                        <span class=" codespan" >Level</span>
                    </li>
                    <li>
                        <span class=" codespan" >mastery</span>
                    </li>
                    <li>
                        <span class=" codespan" >range</span>
                    </li>
                    <li>
                        <span class=" codespan" >roll</span>
                    </li>
                    <li>
                        <span class=" codespan" >sigil</span>
                    </li>
                    <li>
                        <span class=" codespan" >spell</span>
                    </li>
                    <li>
                        <span class=" codespan" >target</span>
                    </li>
                    <li>
                        <span class=" codespan" >Technique</span>
                    </li>
                </ul>
            </li>
            <li>
                <strong>
                    <span class=" codespan" >botch</span>
                </strong>:
                <ul>
                    <li>
                        <span class=" codespan" >roll</span>
                    </li>
                    <li>
                        <span class=" codespan" >type</span>
                    </li>
                </ul>
            </li>
            <li>
                <strong>
                    <span class=" codespan" >reroll</span>
                </strong>:
                <ul>
                    <li>
                        <span class=" codespan" >roll</span>
                    </li>
                </ul>
            </li>
            <li>
                <strong>
                    <span class=" codespan" >critical</span>
                </strong>:
                <ul>
                    <li>
                        <span class=" codespan" >roll</span>
                    </li>
                    <li>
                        <span class=" codespan" >type</span>
                    </li>
                </ul>
            </li>
            <li>
                <strong>
                    <span class=" codespan" >attack</span>
                </strong>:
                <ul>
                    <li>
                        <span class=" codespan" >attack</span>
                    </li>
                    <li>
                        <span class=" codespan" >damage</span>
                    </li>
                    <li>
                        <span class=" codespan" >name</span>
                    </li>
                </ul>
            </li>
            <li>
                <strong>
                    <span class=" codespan" >defend</span>
                </strong>:
                <ul>
                    <li>
                        <span class=" codespan" >defend</span>
                    </li>
                    <li>
                        <span class=" codespan" >name</span>
                    </li>
                </ul>
            </li>
            <li>
                <strong>
                    <span class=" codespan" >soak</span>
                </strong>:
                <ul>
                    <li>
                        <span class=" codespan" >armorsoak</span>
                    </li>
                    <li>
                        <span class=" codespan" >name</span>
                    </li>
                    <li>
                        <span class=" codespan" >rollsoak</span>
                    </li>
                    <li>
                        <span class=" codespan" >soakbonus</span>
                    </li>
                    <li>
                        <span class=" codespan" >formlabel</span>
                    </li>
                    <li>
                        <span class=" codespan" >formbonus</span>
                    </li>
                </ul>
            </li>
            <li>
                <strong>
                    <span class=" codespan" >initiative</span>
                </strong>:
                <ul>
                    <li>
                        <span class=" codespan" >name</span>
                    </li>
                    <li>
                        <span class=" codespan" >roll</span>
                    </li>
                    <li>
                        <span class=" codespan" >weapon</span>
                    </li>
                </ul>
            </li>
            <li>
                <strong>
                    <span class=" codespan" >ability</span>
                </strong>:
                <ul>
                    <li>
                        <span class=" codespan" >banner</span>
                    </li>
                    <li>
                        <span class=" codespan" >label0</span>through
                        <span class=" codespan" >label4</span>
                    </li>
                    <li>
                        <span class=" codespan" >name</span>
                    </li>
                    <li>
                        <span class=" codespan" >result0</span>through
                        <span class=" codespan" >result4</span>
                    </li>
                </ul>
            </li>
            <li>
                <strong>
                    <span class=" codespan" >generic</span>
                </strong>:
                <ul>
                    <li>
                        <span class=" codespan" >Banner</span>
                    </li>
                    <li>
                        <span class=" codespan" >Label</span>
                    </li>
                    <li>
                        <span class=" codespan" >Result</span>
                    </li>
                </ul>
            </li>
            <li>
                <strong>
                    <span class=" codespan" >arcane</span>
                </strong>:
                <ul>
                    <li>
                        <span class=" codespan" >label0</span>through
                        <span class=" codespan" >label6</span>
                    </li>
                    <li>
                        <span class=" codespan" >result0</span>through
                        <span class=" codespan" >result6</span>
                    </li>
                    <li>
                        <span class=" codespan" >textlabel</span>
                    </li>
                    <li>
                        <span class=" codespan" >textsublabel</span>
                    </li>
                    <li>
                        <span class=" codespan" >textfield</span>
                    </li>
                </ul>
            </li>
        </ul>
    </div>
    <div class="documentation" style="margin-top:5px">
        <h2 class=" heading_label" >Changelog</h2>
        <ul>
            <li>
                <strong>February 2022 - v1.7.1 - Fix</strong>
                <ul>
                    <li>Fixed accelerated abilities</li>
                </ul>
            </li>
            <li>
                <strong>January 2022 - v1.7 - Magic & Armory update</strong>
                <ul>
                    <li>
                        <em>General changes</em>:
                        <ul>
                            <li>Added Welcome message to the "Sheet" tab, and made that tab the default tab</li>
                            <li>Added tooltips to some elements of the sheet to provide info about them (e.g. XP fields)</li>
                            <li>Repeated items (such as items, abilities, spells...) start expanded for easier completion.</li>
                        </ul>
                    </li>
                    <li>
                        <em>Magic Update</em>:
                        <ul>
                            <li>Added a toggle to hide elements of the sheet that are specific to Magi (see Sheet tab)</li>
                            <li>Added deficiency toggles that halves casting totals</li>
                            <li>Added a roll button for non-fatiguing spontaneous casting</li>
                            <li>Separated the Artes Liberales and Philosophiae fields of ceremonial and ritual casting, to accomodate specialisation in either</li>
                            <li>Added Soak computations with Form bonuses</li>
                            <li>Added list for useful spontaneous spells in the "Spells" tab</li>
                        </ul>
                    </li>
                    <li>
                        <em>Armory Update</em>:
                        <ul>
                            <li>Added an armor list with togglable elements. Can store multiple armor (parts).</li>
                            <li>Burden and Encumbrance are now computed automatically</li>
                            <li>Added combat modifiers list that is applied to rolls</li>
                        </ul>
                    </li>
                </ul>
            </li>
            <li>
                <strong>October 2021 v1.6.5</strong>
                <ul>
                    <li>Fix to laboratory focus for characters with an affinity bonus to one of the arts used.</li>
                </ul>
            </li>
            <li>
                <strong>March 2021, v1.6.4</strong>
                <ul>
                    <li>Added
                        <code>lalign</code>and
                        <code>ralign</code>to the
                        <code>custom</code>rolltemplate
                    </li>
                </ul>
            </li>
            <li>
                <strong>March 2021, v1.6.3</strong>
                <ul>
                    <li>Added
                        <code>roll-color</code>and
                        <code>button-color</code>properties to the
                        <code>custom</code>rolltemplate, with all CSSv3 colors
                    </li>
                </ul>
            </li>
            <li>
                <strong>February 2021, v1.6.2</strong>
                <ul>
                    <li>Fixed centering not working</li>
                    <li>Fixed translation of spellcasting words options</li>
                    <li>Added support for the
                        <code>custom</code>rolltemplate from the forum, with all CSS colors. Can be useful for spell tables or similar chat menus
                    </li>
                </ul>
            </li>
            <li>
                <strong>February 2021, v1.6.1</strong>
                <ul>
                    <li>Fixed botch die botching on 1s instead of 10s</li>
                    <li>Fixed critical dice displaying 10s as exploding, instead of 1s</li>
                    <li>Fixed spell's arts value not being updated when the character's arts are modified
                        <ul>
                            <li>Completely changed how arts are handled inside spells</li>
                            <li>A script will be run to convert your data to the new format, but may fail for some spells</li>
                        </ul>
                    </li>
                    <li>Added a critical roll for initiative that sets the turn tracker initiative (not visible in the sheet, use the chat button)</li>
                    <li>Added option to always ask which characteristic to use when rolling abilities</li>
                    <li>Centered the sheet in its tab</li>
                </ul>
            </li>
            <li>
                <strong>February 2021, v1.6</strong>
                <ul>
                    <li>Added inline labels to all rolls, hover rolls in chat to see details</li>
                    <li>Fixed tabs not displaying properly
                        <em>(tabs are again attached to an attribute)</em>
                    </li>
                    <li>Added simple/stress die handling. See the "Help" tab for explanation, there's a catch</li>
                    <li>Support for focus in magic totals & rolls</li>
                    <li>Support for additional fatigue levels</li>
                    <li>Fixed ability rolltemplate being too wide in some cases</li>
                    <li>Added documentation direclty to the sheet, see the "Help" tab</li>
                </ul>
            </li>
            <li>
                <strong>May 2020, v1.51</strong>
                <ul>
                    <li>Small change to the Ability roll template for legibility</li>
                </ul>
            </li>
            <li>
                <strong>April 2020, v1.5</strong>
                <ul>
                    <li>Incorporated new fonts throughout the sheet!</li>
                    <li>Polished several roll templates and added new ones for Defending. Stylish!</li>
                    <li>Added an extra button for rerolling stress explosions, can be found next to the botch button.</li>
                    <li>Fixed several missing translation tags and side-effects of having translations added into the sheet. In particular, Abilities should now have access to the Accelerated Ability option.</li>
                    <li>Updated the sheet space and button for Soak/Armor Protection to use the combat roller templates.</li>
                    <li>Relinked images from imgur to github asset folders.</li>
                </ul>
            </li>
            <li>
                <strong>October 2019, v1.4</strong>
                <ul>
                    <li>Initiatives now output to Roll20's Tracker while selecting a token.</li>
                    <li>Character sheet tabs no longer attached to an attribute, so multiple players can view the same character sheet without wrestling over tab controls.</li>
                </ul>
            </li>
        </ul>
    </div>
    
</div>

<!-- Roll Templates -->
<div class="hidden">
    <!-- melee -->
    <rolltemplate class="sheet-rolltemplate-spell">
        <table class="sheet-rolltemplate-all">
            <tr>
                <td class="spellsubheader" colspan="3"><i><b>{{character}}</b> <div data-i18n="casts-rt" style="padding-left: 112px;">casts</div></i></td>
            </tr>
            <tr>
                <th colspan="3">{{spell}}</th>
            </tr>
            {{#sigil}}
            <tr>
                <td colspan="3"><i class="spelldescription" style="margin-left:5px;">{{sigil}}</i></td>
            </tr>
            {{/sigil}}
            <tr>
                <td class="top_bottom" style="padding-left:5px;padding-right:5px;"><i>{{Technique}}</i></td>
                <td class="top_bottom" style="padding-left:5px;padding-right:5px;"><i>{{Form}}</i></td>
                <td class="top_bottom" style="padding-left:5px;padding-right:5px;"><i>{{Level}}</i></td>
            </tr>
            <tr>
                
                <td><div style="padding-left:5px;padding-right:5px;">R</div></td>
                <td><div style="padding-left:5px;padding-right:5px;">D</div></td>
                <td><div style="padding-left:5px;padding-right:5px;">T</div></td>
            </tr>
            <tr>
                <td><div style="padding-left:5px;padding-right:5px;" class="spelllabel">{{range}}</div></td>
                <td><div style="padding-left:5px;padding-right:5px;" class="spelllabel">{{duration}}</div></td>
                <td><div style="padding-left:5px;padding-right:5px;" class="spelllabel">{{target}}</div></td>
            </tr>
            <tr>
                <td><div style="padding-left:5px;padding-right:5px;"><b data-i18n="roll">Roll:</b></div></td>
                {{^stress}}
                <td class="display-simple"><span class="tcat"></span>{{roll}}</td>
                {{/stress}}
                {{#stress}}
                <td class="display-stress">
                    <span class="tcat"></span>
                    {{roll}}

                    {{#rollWasFumble() roll}}
                    <span class="sheet-rolltemplate-botchbt">{{botch-button}}</span>
                    {{/rollWasFumble() roll}}

                    {{#rollWasCrit() roll}}
                    <span class="sheet-rolltemplate-critbt">{{crit-button}}</span>
                    {{/rollWasCrit() roll}}
                </td>
                {{/stress}}
                <td></td>
            </tr>
            {{#effect}}
            <tr>
                <td colspan="3"><div style="padding-left:5px;padding-right:5px;"><b data-i18n="effect" >Effect</b></div></td>
            </tr>
            <tr>
                <td colspan="3"><div style="padding-left:5px;padding-right:5px;" class="spelldescription">{{effect}}</div></td>
            </tr>
            {{/effect}}
            {{#mastery}}
            <tr>
                <td colspan="3"><div style="padding-left:5px;padding-right:5px;"><b data-i18n="mastery">Mastery</b></div> </td>
            </tr>
            <tr>
                <td colspan="3"><div style="padding-left:5px;padding-right:5px;" class="spelldescription">{{mastery}}</div></td>
            </tr>
            {{/mastery}}
        </table>
    </rolltemplate>
    
    <rolltemplate class="sheet-rolltemplate-botch">
        <table class="sheet-rolltemplate-all">
            <tr>
                <th colspan="3">
                    <span data-i18n="botch">Botch</span>
                    {{#type}}
                    <span> ({{type}})</span>
                    {{/type}}
                </th>
            </tr>
            <tr>
                <td colspan="3">{{roll}}</td>
            </tr>
        </table>
    </rolltemplate>
	
	<rolltemplate class="sheet-rolltemplate-reroll">
        <table class="sheet-rolltemplate-all">
            <tr>
                <th colspan="3" data-i18n="roll">Roll</th>
            </tr>
            <tr>
                <td colspan="3">{{roll}}</td>
            </tr>
        </table>
    </rolltemplate>

    <rolltemplate class="sheet-rolltemplate-critical">
        <table class="sheet-rolltemplate-all">
            <tr>
                <th colspan="3">
                    <span data-i18n="critical">Critical</span>
                    {{#type}}
                    <span> ({{type}})</span>
                    {{/type}}
                </th>
            </tr>
            <tr>
                <td colspan="3">{{roll}}</td>
            </tr>
        </table>
    </rolltemplate>
    
    <rolltemplate class="sheet-rolltemplate-attack">
        <table class="combatroller sheet-rolltemplate-all">
            <tr>
                <th colspan="2">{{name}}</th>
            </tr>
            {{#weapon}}
            <tr>
                <td colspan="2" style="text-align: center;">{{weapon}}</td>
            </tr>
            {{/weapon}}
            <tr>
                <td><div style="text-align:center;" data-i18n="attack">Attack</div></td>
                {{^stress}}
                <td class="display-simple-light"><div style="text-align:center;">{{attack}}</div></td>
                {{/stress}}
                {{#stress}}
                <td class="display-stress-light">
                    <div style="text-align:center;">{{attack}}</div>

                    {{#rollWasFumble() attack}}
                    <span class="sheet-rolltemplate-botchbt">{{botch-button}}</span>
                    {{/rollWasFumble() attack}}

                    {{#rollWasCrit() attack}}
                    <span class="sheet-rolltemplate-critbt">{{crit-button}}</span>
                    {{/rollWasCrit() attack}}
                </td>
                {{/stress}}
            </tr>
            <tr>
                <td><div style="text-align:center;" data-i18n="damage">Damage</div></td>
                <td class="display-default"><div style="text-align:center;">{{#^rollLess() damage 0}}<span class="inlinerollresult" style="min-width:0; margin-right: -15px">+</span>{{/^rollLess() damage 0}}{{damage}}</div></td>
            </tr>
        </table>
    </rolltemplate>
	
	<rolltemplate class="sheet-rolltemplate-defend">
        <div class="combatroller sheet-rolltemplate-all">
            <table>
                <tr>
                    <th colspan="2">{{name}}</th>
                </tr>
                {{#weapon}}
                <tr>
                    <td colspan="2" style="text-align: center;">{{weapon}}</td>
                </tr>
                {{/weapon}}
                <tr>
                    <td data-i18n="defend-rt">Defend</td>
                    {{^stress}}
                    <td class="display-simple-light">{{defend}}</td>
                    {{/stress}}
                    {{#stress}}
                    <td class="display-stress-light">
                        {{defend}}

                        {{#rollWasFumble() defend}}
                        <span class="sheet-rolltemplate-botchbt">{{botch-button}}</span>
                        {{/rollWasFumble() defend}}

                        {{#rollWasCrit() defend}}
                        <span class="sheet-rolltemplate-critbt">{{crit-button}}</span>
                        {{/rollWasCrit() defend}}
                    </td>
                    {{/stress}}
                </tr>
            </table>
        </div>
    </rolltemplate>
	
	<rolltemplate class="sheet-rolltemplate-soak">
        <table class="combatroller sheet-rolltemplate-all">
			<tr>
                <th colspan="2">{{name}}</th>
            </tr>
			<tr>
                <td><div style="text-align:center;" data-i18n="soak">Soak</div></td>
                {{^stress}}
                <td class="display-simple-light"><div style="text-align:center;">{{rollsoak}}</div></td>
                {{/stress}}
                {{#stress}}
                <td class="display-stress-light">
                    <div style="text-align:center;">{{rollsoak}}</div>

                    {{#rollWasFumble() rollsoak}}
                    <span class="sheet-rolltemplate-botchbt">{{botch-button}}</span>
                    {{/rollWasFumble() rollsoak}}

                    {{#rollWasCrit() rollsoak}}
                    <span class="sheet-rolltemplate-critbt">{{crit-button}}</span>
                    {{/rollWasCrit() rollsoak}}
                </td>
                {{/stress}}
            </tr>
            <tr>
                <td><div style="text-align:center;" data-i18n="armor-protection">Armor Protection</div></td>
                <td class="display-default"><div style="text-align:center;">{{armorsoak}}</div></td>
            </tr>
            {{#soakbonus}}
            <tr>
                <td><div style="text-align:center;" data-i18n="bonus">Bonus</div></td>
                <td class="display-default"><div style="text-align:center;">{{soakbonus}}</div></td>
            </tr>
            {{/soakbonus}}
            {{#formlabel}}
            <tr>
                <td><div style="text-align:center;">{{formlabel}}</div></td>
                <td class="display-default"><div style="text-align:center;">{{formbonus}}</div></td>
            </tr>
            {{/formlabel}}
        </table>
    </rolltemplate>
    
    <rolltemplate class="sheet-rolltemplate-initiative">
        <table class="combatroller sheet-rolltemplate-all">
            <tr>
                <th>{{name}}</th>
            </tr>
            <tr>
                {{^stress}}
                <td class="display-simple-light">
                    <div style="text-align:center;">
                        <div data-i18n="initiative">Initiative</div>
                        {{roll}}
                        <div data-i18n="with-rt">with</div>
                        {{weapon}}
                    </div>
                </td>
                {{/stress}}
                {{#stress}}
                <td class="display-stress-light">
                    <div style="text-align:center;">
                        <div>
                            <div data-i18n="initiative">Initiative</div>
                            {{roll}}

                            {{#rollWasFumble() roll}}
                            <span class="sheet-rolltemplate-botchbt">{{botch-button}}</span>
                            {{/rollWasFumble() roll}}

                            {{#rollWasCrit() roll}}
                            <span class="sheet-rolltemplate-critbt">{{crit-button}}</span>
                            {{/rollWasCrit() roll}}
                        </div>
                        <div data-i18n="with-rt">with</div>
                        {{weapon}}
                    </div>
                </td>
                {{/stress}}
            </tr>
        </table>
    </rolltemplate>
    
    <rolltemplate class="sheet-rolltemplate-ability">
        <table class="sheet-rolltemplate-all">
            <tr>
                <th colspan="2"><b>{{name}}</b> <div data-i18n="leverages-rt" style="font-size:24px; padding-left:95px;">leverages</div></th>
            </tr>
            <tr class="subheader">
                <td class="label" colspan="2" style="width:100%">
                    <div class="define">{{label0}}</div>
                    <div class="flex_item" data-i18n="attaining-rt">Attaining</div>
                </td>
            </tr>
            <tr class="subheader">
                <td class="label" colspan="2">
                    {{^stress}}
                        <div class="display-simple bigresult">{{result0}}</div>
                    {{/stress}}

                    {{#stress}}
                    <div class="display-stress bigresult">{{result0}}

                        {{#rollWasFumble() result0}}
                        <span class="sheet-rolltemplate-botchbt">{{botch-button}}</span>
                        {{/rollWasFumble() result0}}
                        
                        {{#rollWasCrit() result0}}
                        <span class="sheet-rolltemplate-critbt">{{crit-button}}</span>
                        {{/rollWasCrit() result0}}
                    </div>
                    {{/stress}}
                </td>
            </tr>
            <tr>
                <td class="banner" colspan="2">{{banner}}</td>
            </tr>
            <tr>
                <td class="label">{{label1}}</td>
                <td class="result">{{result1}}</td>
            </tr>
            <tr>
                <td class="label">{{label2}}</td>
                <td class="result">{{result2}}</td>
            </tr>
            <tr>
                <td class="label">{{label3}}</td>
                <td class="result">{{result3}}</td>
            </tr>
            <tr>
                <td class="label">{{label4}}</td>
                <td class="result">{{result4}}</td>
            </tr>
        </table>
    </rolltemplate>
    
    <rolltemplate class="sheet-rolltemplate-generic">
        <table class="sheet-rolltemplate-all">
            <tr>
                <th colspan=2><span style="position:relative;bottom:5px;">{{Banner}}</span></th>
            </tr>
            <tr>
                <td class="Label">{{Label}}</td>
                {{^stress}}
                <td class="Result display-simple">{{Result}}</td>
                {{/stress}}
                {{#stress}}
                <td class="Result display-stress">
                    {{Result}}

                    {{#rollWasFumble() Result}}
                    <span class="sheet-rolltemplate-botchbt">{{botch-button}}</span>
                    {{/rollWasFumble() Result}}

                    {{#rollWasCrit() Result}}
                    <span class="sheet-rolltemplate-critbt">{{crit-button}}</span>
                    {{/rollWasCrit() Result}}
                </td>
                {{/stress}}
            </tr>
        </table>
    </rolltemplate>
 
    <rolltemplate class="sheet-rolltemplate-arcane">
        <div style="background-image:url(https://i.imgur.com/gIacv0f.jpg);box-shadow: 0px 0px 4px black;">
        <div style="background-image:url(https://i.imgur.com/q9tcTtR.jpg);width:235px;height:125px"></div>
        <table class="sheet-rolltemplate-all">
            <tr>
                {{^stress}}
                <td class="bigresult display-simple-light" colspan="2">{{result0}}</td>
                {{/stress}}
                {{#stress}}
                <td class="bigresult display-stress-light" colspan="2">{{result0}}</td>
                {{/stress}}
            </tr>
            {{#rollWasFumble() result0}}
            <tr style="text-align: center;"><td colspan="2"><span class="sheet-rolltemplate-botchbt">{{botch-button}}</span></td></tr>
            {{/rollWasFumble() result0}}

            {{#rollWasCrit() result0}}
            <tr style="text-align: center;"><td colspan="2"><span class="sheet-rolltemplate-critbt">{{crit-button}}</span></td></tr>
            {{/rollWasCrit() result0}}
            <tr>
                <th colspan="2"><span>{{label0}}</span></th>
            </tr>
            <tr>
                <td>&nbsp;</td>
            </tr>
            {{#label1}}
            <tr>
                <td class="label">{{label1}}</td>
                <td class="result">{{result1}}</td>
            </tr>
            {{/label1}}
            {{#label2}}
            <tr>
                <td class="label">{{label2}}</td>
                <td class="result">{{result2}}</td>
            </tr>
            {{/label2}}
            {{#label3}}
            <tr>
                <td class="label">{{label3}}</td>
                <td class="result">{{result3}}</td>
            </tr>
            {{/label3}}
            {{#label4}}
            <tr>
                <td class="label">{{label4}}</td>
                <td class="result">{{result4}}</td>
            </tr>
            {{/label4}}
            {{#label5}}
            <tr>
                <td class="label">{{label5}}</td>
                <td class="result">{{result5}}</td>
            </tr>
            {{/label5}}
            {{#label6}}
            <tr>
                <td class="label">{{label6}}</td>
                <td class="result">{{result6}}</td>
            </tr>
            {{/label6}}
            {{#textlabel}}
            <!--<tr name="divider">
                <td colspan="2"><hr style="margin-bottom:0px;"></td>
            </tr>-->
            <tr>
                <td class="label" colspan="2" style="padding-top: 20px;">{{textlabel}}</td>
            </tr>
            {{/textlabel}}
            {{#textsublabel}}
            <tr>
                <td class="textfield" colspan="2" style="text-align: center;">{{textsublabel}}</td>
            </tr>
            {{/textsublabel}}
            {{#textfield}}
            <tr>
                <td class="textfield" colspan="2">{{textfield}}</td>
            </tr>
            {{/textfield}}
        </table>
        </div>
        <div style="background-image:url(https://i.imgur.com/DdTHJT1.jpg); width:235px; height:125px; position:relative; top:-50px;"></div>
    
    </rolltemplate>

    <rolltemplate class="sheet-rolltemplate-custom">
        <div class="sheet-crt-container sheet-crt-color-{{color}} sheet-crt-rlcolor-{{roll-color}} sheet-crt-btcolor-{{button-color}}">
            <div class="sheet-crt-header">
              {{#title}}<div class="sheet-crt-title"><b>{{title}}</b></div>{{/title}}
              {{#subtitle}}<div class="sheet-crt-subtitle">{{subtitle}}</div>{{/subtitle}}
            </div>
            <div class="sheet-crt-content">
              {{#allprops() title subtitle desc color roll-color button-color left-align right-align}}
              <div class="sheet-crt-key sheet-crt-lalign-{{left-align}}">{{key}}</div>
              <div class="sheet-crt-value sheet-crt-ralign-{{right-align}}">{{value}}</div>
              {{/allprops() title subtitle desc color roll-color button-color left-align right-align}}
              {{#desc}}<div class="sheet-crt-desc">{{desc}}</div>{{/desc}}
            </div>
          </div>
    </rolltemplate>
</div>
    

<!-- Translation keys -->
<input name ="attr_ability_i18n" type="hidden" value="Abiliy" />
<input name ="attr_armor_i18n" type="hidden" value="Armor" />
<input name ="attr_artes_i18n" type="hidden" value="Artes Lib." />
<input name ="attr_attack_i18n" type="hidden" value="Attack" />
<input name ="attr_aura_i18n" type="hidden" value="Aura" />
<input name ="attr_bold_i18n" type="hidden" value="Bold" />
<input name ="attr_bonus_i18n" type="hidden" value="Bonus" />
<input name ="attr_botch_i18n" type="hidden" value="Botch" />
<input name ="attr_characteristic_i18n" type="hidden" value="Characteristic" />
<input name ="attr_botch_num_i18n" type="hidden" value="Number of botch dice" />
<input name ="attr_circumstances_i18n" type="hidden" value="Circumstances" />
<input name ="attr_circumstantial_i18n" type="hidden" value="Circumstancial" />
<input name ="attr_critical_i18n" type="hidden" value="Critical" />
<input name ="attr_damage_i18n" type="hidden" value="Damage" />
<input name ="attr_defense_i18n" type="hidden" value="Defense" />
<input name ="attr_deficiency_i18n" type="hidden" value="Deficiency" />
<input name ="attr_encumbrance_i18n" type="hidden" value="Encumbrance" />
<input name ="attr_exaggerated_i18n" type="hidden" value="Exaggerated" />
<input name ="attr_fatigue_i18n" type="hidden" value="Fatigue" />
<input name ="attr_firm_i18n" type="hidden" value="Firm" />
<input name ="attr_focus_i18n" type="hidden" value="Focus" />
<input name ="attr_form_i18n" type="hidden" value="Form" />
<input name ="attr_gestures_i18n" type="hidden" value="Gestures" />
<input name ="attr_gest-none_i18n" type="hidden" value="None" />
<input name ="attr_initiative_i18n" type="hidden" value="Initiative" />
<input name ="attr_loud_i18n" type="hidden" value="Loud" />
<input name ="attr_modifiers_i18n" type="hidden" value="Modifiers" />
<input name ="attr_philos_i18n" type="hidden" value="Philos." />
<input name ="attr_quiet_i18n" type="hidden" value="Quiet" />
<input name ="attr_simple-die_i18n" type="hidden" value="Simple" />
<input name ="attr_soakbns_i18n" type="hidden" value="Soak Bonus" />
<input name ="attr_spontaneous_i18n" type="hidden" value="Spontaneous" />
<input name ="attr_stress-die_i18n" type="hidden" value="Stress" />
<input name ="attr_subtle_i18n" type="hidden" value="Subtle" />
<input name ="attr_technique_i18n" type="hidden" value="Technique" />
<input name ="attr_total_i18n" type="hidden" value="Total" />
<input name ="attr_unselected_i18n" type="hidden" value="Unselected" />
<input name ="attr_words_i18n" type="hidden" value="Words" />
<input name ="attr_words-none_i18n" type="hidden" value="None" />
<input name ="attr_wounds_i18n" type="hidden" value="Wounds" />
<input name ="attr_intelligence_i18n" type="hidden" value="Intelligence" />
<input name ="attr_perception_i18n" type="hidden" value="Perception" />
<input name ="attr_presence_i18n" type="hidden" value="Presence" />
<input name ="attr_communication_i18n" type="hidden" value="Communication" />
<input name ="attr_strength_i18n" type="hidden" value="Strength" />
<input name ="attr_stamina_i18n" type="hidden" value="Stamina" />
<input name ="attr_dexterity_i18n" type="hidden" value="Dexterity" />
<input name ="attr_quickness_i18n" type="hidden" value="Quickness" />
<input name ="attr_creo_i18n" type="hidden" value="Creo" />
<input name ="attr_intellego_i18n" type="hidden" value="Intellego" />
<input name ="attr_muto_i18n" type="hidden" value="Muto" />
<input name ="attr_perdo_i18n" type="hidden" value="Perdo" />
<input name ="attr_rego_i18n" type="hidden" value="Rego" />
<input name ="attr_animal_i18n" type="hidden" value="Animal" />
<input name ="attr_aquam_i18n" type="hidden" value="Aquam" />
<input name ="attr_auram_i18n" type="hidden" value="Auram" />
<input name ="attr_corpus_i18n" type="hidden" value="Corpus" />
<input name ="attr_herbam_i18n" type="hidden" value="Herbam" />
<input name ="attr_ignem_i18n" type="hidden" value="Ignem" />
<input name ="attr_imaginem_i18n" type="hidden" value="Imaginem" />
<input name ="attr_mentem_i18n" type="hidden" value="Mentem" />
<input name ="attr_terram_i18n" type="hidden" value="Terram" />
<input name ="attr_vim_i18n" type="hidden" value="Vim" />
<!-- Attributes used for the defered attribute access system -->
<!-- See Readme.md for explanation of how it works -->
<input name="attr_Unselected_Score" type="hidden" value="0" />
<input name="attr_Unselected_Puissant" type="hidden" value="0" />
<input name="attr_ask_Score" type="hidden" value="?{@{characteristic_i18n}|@{intelligence_i18n},@{intelligence_Score} [@{intelligence_i18n}]| @{perception_i18n},@{perception_Score} [@{perception_i18n}]| @{presence_i18n},@{presence_Score} [@{presence_i18n}]| @{communication_i18n},@{communication_Score} [@{communication_i18n}]| @{strength_i18n},@{strength_Score} [@{strength_i18n}]| @{stamina_i18n},@{stamina_Score} [@{stamina_i18n}]| @{dexterity_i18n},@{dexterity_Score} [@{dexterity_i18n}]| @{quickness_i18n},@{quickness_Score} [@{quickness_i18n}]}" />
<!-- Those two attribute delegates to the global selector using another deferred attribute -->
<input name="attr_global_char_Score" type="hidden" value="@{sys_at}@{character_name}@{sys_pipe}@{global_Ability_CharacName}_Score@{sys_rbk}" />
<input name="attr_global_char_i18n" type="hidden" value="@{sys_at}@{character_name}@{sys_pipe}@{global_Ability_CharacName}_i18n@{sys_rbk}" />
<input name ="attr_sys_at" type="hidden" value="@{" />
<input name ="attr_sys_pipe" type="hidden" value="|" />
<input name ="attr_sys_rbk" type="hidden" value="}" />
<!-- Used by the alert system to hide old alerts on new sheets -->
<input name="attr_notNew" type="hidden" value="0" />

<!-- Sheet Worker Scripts -->
<script type="text/worker">
["character","abilities","magic","combat","spells","sheet"].forEach(function (button) {
    on("clicked:" + button, function() {
        setAttrs({
            "sheetTab": button
        });
    });
});

// Die configuration and toggle
on("change:die-type-selection", function() {
    getAttrs(["die-type-selection"], function(values) {
        setAttrs({
            "die-type-selection-proxy": values["die-type-selection"]
        });
    });
});

on("clicked:die-toggle-simple", function() {
    setAttrs({
        "selected-die": "stress"
    });
});

on("clicked:die-toggle-stress", function() {
    setAttrs({
        "selected-die": "simple"
    });
});

// Additional fatigue levels
on("change:additionalFatigue", function() {
    getAttrs(["additionalFatigue"], function(values) {
        setAttrs({
            "additionalFatigueProxy": values.additionalFatigue
        });
    });
});

// Laboratory Adding

on("change:repeating_labspecializations:labbonus remove:repeating_labspecializations change:repeating_labspecializations:sactive", function() {
    getSectionIDs("repeating_labspecializations", function(IDArray) {
        var fieldNames = [];
        for (var i=0; i < IDArray.length; i++) {
            fieldNames.push("repeating_labspecializations_" + IDArray[i] + "_labbonus");
            fieldNames.push("repeating_labspecializations_" + IDArray[i] + "_sactive");
        }

        var total = 0;
        getAttrs(fieldNames, function(values) {
            for (var i=0; i < IDArray.length; i++) {
                total += (parseInt(values["repeating_labspecializations_" + IDArray[i] + "_labbonus"])||0) * ( parseInt(values["repeating_labspecializations_" + IDArray[i] + "_sactive"])|| 0 );
            }
            setAttrs({
                "labbonus_total": total
            });
        });
    });
});

//Wounds
on("change:Wounds_Light1 change:Wounds_Light2 change:Wounds_Light3 change:Wounds_Light4 change:Wounds_Light5 change:Wounds_Medium1 change:Wounds_Medium2 change:Wounds_Medium3 change:Wounds_Medium4 change:Wounds_Medium5 change:Wounds_Heavy1 change:Wounds_Heavy2 change:Wounds_Heavy3 change:Wounds_Heavy4 change:Wounds_Heavy5 change:Wounds_Incapacitated change:Wounds_Dead sheet:opened", function() {
    getAttrs(["Wounds_Light1", "Wounds_Light2", "Wounds_Light3", "Wounds_Light4", "Wounds_Light5", "Wounds_Medium1", "Wounds_Medium2", "Wounds_Medium3", "Wounds_Medium4", "Wounds_Medium5", "Wounds_Heavy1", "Wounds_Heavy2", "Wounds_Heavy3", "Wounds_Heavy4", "Wounds_Heavy5", "Wounds_Incapacitated", "Wounds_Dead"], function(values) {
        setAttrs({
            wound_total: (+values.Wounds_Light1 + +values.Wounds_Light2 + +values.Wounds_Light3 + +values.Wounds_Light4 + +values.Wounds_Light5 + +values.Wounds_Medium1 + +values.Wounds_Medium2 + +values.Wounds_Medium3 + +values.Wounds_Medium4 + +values.Wounds_Medium5 + +values.Wounds_Heavy1 + +values.Wounds_Heavy2 + +values.Wounds_Heavy3 + +values.Wounds_Heavy4 + +values.Wounds_Heavy5 + +values.Wounds_Incapacitated + +values.Wounds_Dead)
        });
    });
});

// Function to create a sheet-worker that updates totals computed from repeating sections
// The sections must follow some naming conventions, see code

function register_repeated_section_totals(section, properties) {
    var events = (
        "sheet:opened"
        + " remove:repeating_" + section
        + " change:repeating_" + section + ":isactive"
        + " change:repeating_" + section + ":" + section + "_name"
    );
    properties.forEach(function(prop, index, array) {
        events += " change:repeating_" + section + ":" + section + "_" + prop;
    });

    console.log("Registering events for section: " + section + " -> " + events);

    on(events, function() {
        getSectionIDs("repeating_" + section, function(id_array) {

            var attr_names = [];
            for (var i=0; i < id_array.length; i++) {
                attr_names.push("repeating_" + section + "_" + id_array[i] + "_" + section + "_name");
                attr_names.push("repeating_" + section + "_" + id_array[i] + "_isactive");
                properties.forEach(function(prop, index, array) {
                    attr_names.push("repeating_" + section + "_" + id_array[i] + "_" + section + "_" + prop);
                });
            }
            console.log("Attributes to get: " + attr_names.toString());

            var totals = {};
            properties.forEach(function(prop, index, array) {
                totals[section + "_total_" + prop] = 0
                totals[section + "_total_" + prop + "_detailed"] = "0";
            });
            console.log("Totals to compute: " + JSON.stringify(totals, null, 1));

            getAttrs(attr_names, function(attrs){
                var prefix = "";
                var value = 0;
                console.log("Got attributes: " + JSON.stringify(attrs, null, 1));

                for (var i=0; i < id_array.length; i++) {
                    console.log("Handling item #" + i);
                    prefix = "repeating_" + section + "_" + id_array[i] + "_";

                    properties.forEach(function(prop, index, array) {
                        if ((parseInt(attrs[prefix + "isactive"]) || 0) === 1) {
                            value = (parseFloat(attrs[prefix + section + "_" + prop]) || 0);
                            if (value != 0) {
                                totals[section + "_total_" + prop] += value;
                                totals[section + "_total_" + prop + "_detailed"] += (
                                    " + " + value.toString() + " [" + attrs[prefix + section + "_name"] + "]"
                                );
                            }
                        }
                    });
                }
                console.log("Computed totals: " + JSON.stringify(totals, null, 1));

                properties.forEach(function(prop, index, array) {
                    totals[section + "_total_" + prop] = Math.ceil(totals[section + "_total_" + prop]);
                    totals[section + "_total_" + prop + "_detailed"] = "ceil(" + totals[section + "_total_" + prop + "_detailed"] + ")";
                });
    
                console.log("computed totals: " + JSON.stringify(totals, null, 1));
                setAttrs(totals);
            });
        });
    });
}

register_repeated_section_totals("armors", ["prot", "load"]);
register_repeated_section_totals("combat-mods", ["init", "atk", "dfn", "dam", "soak"]);

// Fix weapon attributes

on("sheet:opened", function() {
    const fixes = {
        "_Wounds_Load": "_Weapon_Load",
        "_Wounds_Range": "_Weapon_Range",
    };
    const keys = Object.keys(fixes);
    getSectionIDs("repeating_weapons", function(id_array) {
        var attr_names = [];
        id_array.forEach( (id_) => (keys.forEach((key) => attr_names.push("repeating_weapons_" + id_ + key))));

        getAttrs(attr_names, function(attrs) {
            var value = 0;
            var updates = {};
            id_array.forEach( (id_) => (keys.forEach(function(key) {
                if (attrs["repeating_weapons_" + id_ + key]) {
                    console.log(attrs["repeating_weapons_" + id_ + key]);
                    console.log("Fixing " + "repeating_weapons_" + id_ + key + " to " + "repeating_weapons_" + id_ + fixes[key]);
                    updates["repeating_weapons_" + id_ + fixes[key]] = parseInt(attrs["repeating_weapons_" + id_ + key]) || 0;
                    updates["repeating_weapons_" + id_ + key] = "";
                }
            })));
            console.log("All fixes :" + JSON.stringify(updates, null, 1));
            setAttrs(updates);
        });
    });
});

// Duplicate the global bonuses inside the weapons repeating section for display
// From https://app.roll20.net/forum/post/10297616/how-do-i-reference-a-global-attribute-in-a-span-in-a-repeating-section

const section = "weapons";
const repeating_stats = ["init", "atk", "dfn", "dam", "soak"].map(prop => `combat-mods_total_${prop}`);
const changes = repeating_stats.reduce((str, stat) => `${str} change:${stat.toLowerCase()}`, 'sheet:opened');
on(changes, () => {
    getSectionIDs(`repeating_${section}`, idarray => {
        const fieldnames = idarray.reduce((rows,id) => [...rows, ...repeating_stats.map(stat => `repeating_${section}_${id}_${stat}`)], []);
        getAttrs([...repeating_stats, ...fieldnames], v => {
            const output = {};
            idarray.forEach(id => {
                repeating_stats.forEach(stat => {
                    output[`repeating_${section}_${id}_${stat}`] = v[stat];
                });
            });
            setAttrs(output);
        });
    });
});


// Translation key replacement
on("sheet:opened", function(eventInfo){
    setAttrs({
        "ability_i18n": getTranslationByKey("ability"),
        "armor_i18n": getTranslationByKey("armor"),
        "artes_i18n": getTranslationByKey("artes-lib-"),
        "attack_i18n": getTranslationByKey("attack"),
        "aura_i18n": getTranslationByKey("aura"),
        "bold_i18n": getTranslationByKey("gestures-bold"),
        "bonus_i18n": getTranslationByKey("bonus"),
        "botch_i18n": getTranslationByKey("botch"),
        "characteristic_i18n": getTranslationByKey("characteristic"),
        "botch_num_i18n": getTranslationByKey("botch-num"),
        "circumstances_i18n": getTranslationByKey("circumstances-m"),
        "circumstantial_i18n": getTranslationByKey("circumstantial"),
        "critical_i18n": getTranslationByKey("critical"),
        "damage_i18n": getTranslationByKey("damage"),
        "defense_i18n": getTranslationByKey("defense"),
        "deficiency_i18n": getTranslationByKey("deficiency"),
        "encumbrance_i18n": getTranslationByKey("encumbrance"),
        "exaggerated_i18n": getTranslationByKey("gestures-exaggerated"),
        "fatigue_i18n": getTranslationByKey("fatigue-m"),
        "firm_i18n": getTranslationByKey("words-firm"),
        "focus_i18n": getTranslationByKey("focus"),
        "form_i18n": getTranslationByKey("form"),
        "gestures_i18n": getTranslationByKey("gestures"),
        "gest-none_i18n": getTranslationByKey("gestures-none"),
        "initiative_i18n": getTranslationByKey("initiative"),
        "loud_i18n": getTranslationByKey("words-loud"),
        "modifiers_i18n": getTranslationByKey("modifiers"),
        "philos_i18n": getTranslationByKey("philos-"),
        "quiet_i18n": getTranslationByKey("words-quiet"),
        "simple-die_i18n": getTranslationByKey("simple"),
        "soakbns_i18n": getTranslationByKey("soak-bonus"),
        "spontaneous_i18n": getTranslationByKey("spontaneous"),
        "stress-die_i18n": getTranslationByKey("stress"),
        "subtle_i18n": getTranslationByKey("gestures-subtle"),
        "technique_i18n": getTranslationByKey("technique"),
        "total_i18n": getTranslationByKey("total"),
        "unselected_i18n": getTranslationByKey("unselected"),
        "words_i18n": getTranslationByKey("words"),
        "words-none_i18n": getTranslationByKey("words-none"),
        "wounds_i18n": getTranslationByKey("wounds"),
        "intelligence_i18n": getTranslationByKey("intelligence"),
        "perception_i18n": getTranslationByKey("perception"),
        "presence_i18n": getTranslationByKey("presence"),
        "communication_i18n": getTranslationByKey("communication"),
        "strength_i18n": getTranslationByKey("strength"),
        "stamina_i18n": getTranslationByKey("stamina"),
        "dexterity_i18n": getTranslationByKey("dexterity"),
        "quickness_i18n": getTranslationByKey("quickness"),
        "creo_i18n": getTranslationByKey("creo"),
        "intellego_i18n": getTranslationByKey("intellego"),
        "muto_i18n": getTranslationByKey("muto"),
        "perdo_i18n": getTranslationByKey("perdo"),
        "rego_i18n": getTranslationByKey("rego"),
        "animal_i18n": getTranslationByKey("animal"),
        "aquam_i18n": getTranslationByKey("aquam"),
        "auram_i18n": getTranslationByKey("auram"),
        "corpus_i18n": getTranslationByKey("corpus"),
        "herbam_i18n": getTranslationByKey("herbam"),
        "ignem_i18n": getTranslationByKey("ignem"),
        "imaginem_i18n": getTranslationByKey("imaginem"),
        "mentem_i18n": getTranslationByKey("mentem"),
        "terram_i18n": getTranslationByKey("terram"),
        "vim_i18n": getTranslationByKey("vim")
    });

    getAttrs(["notNew"], function (values) {
        if (values.notNew == 0) {
            setAttrs({
                "notNew": 1,
                "alert-alert-update-v1-7-1": 1,
                "alert-alert-update-v1-7": 1,
                "alert-alert-update-v1-6-5": 1,
                "alert-alert-update-v1-6-4": 1,
                "alert-alert-update-v1-6-3": 1,
                "alert-alert-update-v1-6-2": 1,
                "alert-alert-update-v1-6-1": 1,
                "alert-alert-update-v1-6": 1,
                "alert-alert-update-v1-51": 1,
                "alert-alert-update-v1-5": 1,
                "alert-alert-update-v1-4": 1,
                "alert-161-spell-update": 1,
                "alert-alert-update-v1_6-dataloss": 1,
                "alert-alert-update-v1-7-armorylegacy": 1
            }); 
        }
    });

    // Update old spell art selection to new format
    // Skip it if the Warning banner for that update is closed
    getAttrs(["alert-161-spell-update"], function(values) {
        if (values["alert-161-spell-update"] == 0) {
            getSectionIDs("spell", function(idarray) {
                const tech_translation = {
                    0: "unselected",
                    1: "Creo",
                    2: "Intellego",
                    3: "Muto",
                    4: "Perdo",
                    5: "Rego"
                };
                const form_translation = {
                    0: "unselected",
                    1: "Animal",
                    2: "Aquam",
                    3: "Auram",
                    4: "Corpus",
                    5: "Herbam",
                    6: "Ignem",
                    7: "Imaginem",
                    8: "Mentem",
                    9: "Terram",
                    10: "Vim"
                };
                for (var i=0; i < idarray.length; i++) {
                    const spellid = idarray[i];
                    console.log("Update 1.6.1 - Spell arts updater script - scheduling update for spell ID:" + spellid);
                    getAttrs(
                        [   
                            "repeating_spell_" + spellid + "_spell_name",
                            "repeating_spell_" + spellid + "_Technique_select",
                            "repeating_spell_" + spellid + "_Form_select"
                        ],
                        function (values) {
                            attr_updates = {
                                ["repeating_spell_" + spellid + "_spell_tech_name"]: tech_translation[values["repeating_spell_" + spellid + "_Technique_select"]] || "unselected",
                                ["repeating_spell_" + spellid + "_spell_form_name"]: form_translation[values["repeating_spell_" + spellid + "_Form_select"]] || "unselected"
                            };
                            console.log("Update 1.6.1 - Spell arts updater script - " + values["repeating_spell_" + spellid + "_spell_name"] + " (ID " + spellid + ")");
                            console.log(attr_updates);
                            console.log("Update 1.6.1 - Spell arts updater script - spell " + spellid + " END");
                            setAttrs(attr_updates);
                        }
                    );
                }
                console.log("Update 1.6.1 - Spell arts updater script - all spell scheduled for update");
                setAttrs({"alert-161-spell-update": 1});
            });
        }
    });
    
});

</script>

<!--
------------- i18n-tags generated with ACSI V0.50 (Automated Character Sheet Internationalizer)-------------
	ACSI author: https://github.com/Anduh
	ACSI Sourcecode: https://github.com/Anduh/acsi
-->
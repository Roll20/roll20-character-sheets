<!-- Begin Tabs -->
<input type="radio" checked="checked" class="tab tab1" name="attr_Core-Tab" value="1" title="Character">
<span class="tab tab1" style="line-height: 40px;" data-temp="tab-character">Character</span>

<input type="radio" class="tab tab2" name="attr_Core-Tab" value="2" title="Character Notes">
<span class="tab tab2" style="line-height: 40px;" data-temp="tab-characternotes">Character Notes</span>

<input type="radio" class="tab tab3" name="attr_Core-Tab" value="3" title="Features">
<span class="tab tab3" style="line-height: 40px;" data-temp="tab-features">Features</span>

<!-- <input type="radio" class="tab tab5" name="attr_Core-Tab" value="5" title="Scripts"> --> <!-- HIDDEN SCIRPTS -->
<!-- <span class="tab tab2" style="line-height: 40px;" data-temp="tab-scripts">Scripts</span> --> <!-- HIDDEN SCIRPTS -->

<br><br>
<!-- End Tabs -->

<!--    *************************   Character Sheet *************************   -->
<div class="section-character">

    <!-- VERSION -->
    <div class="hidden">
        <input type="hidden" name="attr_version"> <!-- VERSION -->
    </div>

    <!-- HEADER -->
    <div class="header">
        <br><span data-temp="title-character-u">CHARACTER SHEET</span><br><br>
        <img src="https://i.imgur.com/gc2AgVa.png" alt="Logo">
    </div><br>

    <!-- MAIN -->
    <div class="wrapper">

        <!-- MODIFIERS -->
        <div class="1colrow" style="width: 35%; position:relative; left:34.3%">

            <div class="col">

                <div class="table-border table-graphic-light">
                    <div class="row table-graphic-dark">
                        <div class="item"><h1 data-temp="modifiers-u">MODIFIERS</h1></div>
                    </div>
                    <div class="row">
    					<div class="item" style="width:76%"><h2 data-temp="modifiers-positive">Positive</h2></div>
    					<div class="item" style="width:24%"><input type="number" name="attr_modifier-pos" min="0" value="0"></div>
                    </div>
                    <div class="row">
    					<div class="item" style="width:76%"><h2 data-temp="modifiers-negative">Negative</h2></div>
    					<div class="item" style="width:24%"><input type="number" name="attr_modifier-neg" min="0" value="0"></div>
                    </div>
                </div><br>

            </div>

        </div><br>

        <!-- CHARACTER INFORMATION TOP -->
        <div class="2colrow-tight-left">

            <!-- Left Column-->
            <div class="col">

                <!-- Left Column Attributes -->
                <div class="table-border table-graphic-light">
                    <div class="row table-graphic-dark">
                        <div class="item"><h1 data-temp="attributes-u">ATTRIBUTES</h1></div>
                    </div>
                    <div class="row">
    					<div class="item" style="width:64%"><h2 data-temp="attributes-strength">Strength</h2></div>
    					<div class="item" style="width:12%"><button type="roll" name="roll_strength" value="&{template:coriolis} {{isNotAdvanced=1}} {{name=^{Strength}}} {{roll=[[(@{strength} + @{modifier-pos} - @{modifier-neg})d6>6]]}} {{pool=[[(@{strength} + @{modifier-pos} - @{modifier-neg})>0]]}} {{reroll=[[2d6>6]]}}"></button></div>
    					<div class="item" style="width:24%"><input type="number" name="attr_strength" min="0"  value="0"></div>
                    </div>
                    <div class="row">
    					<div class="item" style="width:64%"><h2 data-temp="attributes-agility">Agility</h2></div>
    					<div class="item" style="width:12%"><button type="roll" name="roll_agility" value="&{template:coriolis} {{isNotAdvanced=1}} {{name=^{Agility}}} {{roll=[[(@{agility} + @{modifier-pos} - @{modifier-neg})d6>6]]}} {{pool=[[(@{strength} + @{modifier-pos} - @{modifier-neg})>0]]}} {{reroll=[[2d6>6]]}}" ></button></div>
    					<div class="item" style="width:24%"><input type="number" name="attr_agility" min="0"  value="0"></div>
                    </div>
                    <div class="row">
    					<div class="item" style="width:64%"><h2 data-temp="attributes-wits">Wits</h2></div>
    					<div class="item" style="width:12%"><button type="roll" name="roll_wits" value="&{template:coriolis} {{isNotAdvanced=1}} {{name=^{Wits}}} {{roll=[[(@{wits} + @{modifier-pos} - @{modifier-neg})d6>6]]}} {{pool=[[(@{strength} + @{modifier-pos} - @{modifier-neg})>0]]}} {{reroll=[[2d6>6]]}}"></button></div>
    					<div class="item" style="width:24%"><input type="number" name="attr_wits"  min="0" value="0"></div>
                    </div>
                    <div class="row">
    					<div class="item" style="width:64%"><h2 data-temp="attributes-empathy">Edge</h2></div>
    					<div class="item" style="width:12%"><button type="roll" name="roll_empathy" value="&{template:coriolis} {{isNotAdvanced=1}} {{name=^{Edge}}} {{roll=[[(@{empathy} + @{modifier-pos} - @{modifier-neg})d6>6]]}} {{pool=[[(@{strength} + @{modifier-pos} - @{modifier-neg})>0]]}} {{reroll=[[2d6>6]]}}"></button></div>
    					<div class="item" style="width:24%"><input type="number" name="attr_empathy" min="0"  value="0"></div>
                    </div>
                </div><br>

                <!-- Left Column Trauma -->
                <div class="table-border table-graphic-light">
                    <div class="row table-graphic-dark">
                        <div class="item"><h1 data-temp="character-trauma-u">TRAUMA</h1></div>
                    </div>
                    <div class="row" style="border-bottom: none">
    					<div class="item" style="width:76%"><h2 data-temp="character-trauma-hitpoints-strength-plus-agility">Hit Points (Str+Agi)</h2></div>
    					<div class="item" style="width:24%"><input type="number" name="attr_hitpoints" min="0"  value="0"></div>
                    </div>
    		        <div class="row">
                        <div class="flex-checkbox custom-checkbox">
                            <input type="checkbox" name="attr_hitpoints-check1" class="cb-small" value="1"><span></span>
                            <input type="checkbox" name="attr_hitpoints-check2" class="cb-small" value="1"><span></span>
                            <input type="checkbox" name="attr_hitpoints-check3" class="cb-small" value="1"><span></span>
                            <input type="checkbox" name="attr_hitpoints-check4" class="cb-small" value="1"><span></span>
                            <input type="checkbox" name="attr_hitpoints-check5" class="cb-small" value="1"><span></span>
                            <input type="checkbox" name="attr_hitpoints-check6" class="cb-small" value="1"><span></span>
                            <input type="checkbox" name="attr_hitpoints-check7" class="cb-small" value="1"><span></span>
                            <input type="checkbox" name="attr_hitpoints-check8" class="cb-small" value="1"><span></span>
                            <input type="checkbox" name="attr_hitpoints-check9" class="cb-small" value="1"><span></span>
                            <input type="checkbox" name="attr_hitpoints-check10" class="cb-small" value="1"><span></span>
                            <input type="checkbox" name="attr_hitpoints-check11" class="cb-small" value="1"><span></span>
                            <input type="checkbox" name="attr_hitpoints-check12" class="cb-small" value="1"><span></span>
                        </div>
            		</div>
            		<div class="row table-background-light">
    					<div class="item"><h3 data-temp="character-trauma-critical-injuries">Critical Injuries:</h3></div>
            		</div>
        		    <fieldset class="repeating_crits">
        		        <div class="row table-background-light">
    					    <div class="item" style="width:100%"><input type="text" name="attr_crit-injury"></div>
    					</div>
					</fieldset>
                    <div class="row" style="border-bottom: none">
    					<div class="item" style="width:76%"><h2 data-temp="character-trauma-mindpoints-wits-plus-empathy">Mind points (Wits+Edge)</h2></div>
    					<div class="item" style="width:24%"><input type="number" name="attr_mindpoints"  min="0" value="0"></div>
                    </div>
    		        <div class="row">
                        <div class="flex-checkbox custom-checkbox">
                            <input type="checkbox" name="attr_mindpoints-check1" class="cb-small" value="1"><span></span>
                            <input type="checkbox" name="attr_mindpoints-check2" class="cb-small" value="1"><span></span>
                            <input type="checkbox" name="attr_mindpoints-check3" class="cb-small" value="1"><span></span>
                            <input type="checkbox" name="attr_mindpoints-check4" class="cb-small" value="1"><span></span>
                            <input type="checkbox" name="attr_mindpoints-check5" class="cb-small" value="1"><span></span>
                            <input type="checkbox" name="attr_mindpoints-check6" class="cb-small" value="1"><span></span>
                            <input type="checkbox" name="attr_mindpoints-check7" class="cb-small" value="1"><span></span>
                            <input type="checkbox" name="attr_mindpoints-check8" class="cb-small" value="1"><span></span>
                            <input type="checkbox" name="attr_mindpoints-check9" class="cb-small" value="1"><span></span>
                            <input type="checkbox" name="attr_mindpoints-check10" class="cb-small" value="1"><span></span>
                            <input type="checkbox" name="attr_mindpoints-check11" class="cb-small" value="1"><span></span>
                            <input type="checkbox" name="attr_mindpoints-check12" class="cb-small" value="1"><span></span>
                        </div>
            		</div>

                </div><br>

            </div>

            <!-- Right Column -->
            <div class="col">

                <!-- Right Column Basic Info -->
                <div class="table-border table-background-light">
    				<div class="row">
    					<div class="item" style="width:15%"><h3 data-temp="name">Name:</h3></div>
    					<div class="item" style="width:35%"><input type="text" name="attr_name"></div>
    					<div class="item" style="width:20%; border-left: 1px solid #61574b"><h3 data-temp="character-background">Background:</h3></div>
    					<div class="item" style="width:30%"><input type="text" name="attr_background"></div>
    				</div>
    				<div class="row">
    					<div class="item" style="width:15%"><h3 data-temp="character-concept">Concept:</h3></div>
    					<div class="item" style="width:35%"><input type="text" name="attr_concept"></div>
    					<div class="item" style="width:20%; border-left: 1px solid #61574b"><h3 data-temp="character-icon">AI:</h3></div>
    					<div class="item" style="width:30%"><input type="text" name="attr_icon"></div>
    				</div>
    				<div class="row">
    					<div class="item" style="width:25%"><h3 data-temp="character-group-concept">Crew concept:</h3></div>
    					<div class="item" style="width:25%"><input type="text" name="attr_groupconcept"></div>
    					<div class="item table-graphic-light" style="width:38.2%; border-left: 1px solid #61574b; border-bottom: 1px solid #61574b"><h3 data-temp="character-reputation">Reputation:</h3></div>
    					<div class="item table-graphic-light" style="width:12%; border-bottom: 1px solid #61574b"><input type="number" name="attr_reputation" value="0"></div>
    				</div>
    				<div class="row">
    					<div class="item" style="width:25%"><h3 data-temp="character-personal-problem">Personal Problem:</h3></div>
    					<div class="item" style="width:75%"><input type="text" name="attr_personal_problem"></div>
    				</div>
				</div><br>

                
    			
    			<!-- Left Column Weapons -->
                <div class="table-border table-background-light">
                    <div class="row table-graphic-dark">
                        <div class="item" style="width:23.3%"><h1 data-temp="weapons-u">WEAPONS</h1></div>
                        <div class="item" style="width:7%; border-left: 1px solid #61574b"><h4 data-temp="bonus-u">BONUS</h4></div>
                        <div class="item" style="width:7%; border-left: 1px solid #61574b"><h4 data-temp="init-initiative-u">INIT</h4></div>
                        <div class="item" style="width:9%; border-left: 1px solid #61574b"><h4 data-temp="weapons-damage-u">DAMAGE</h4></div>
                        <div class="item" style="width:7%; border-left: 1px solid #61574b"><h4 data-temp="weapons-crit-critical-u">CRIT</h4></div>
                        <div class="item" style="width:12%; border-left: 1px solid #61574b"><h4 data-temp="weapons-range-u">RANGE</h4></div>
                        <div class="item" style="width:25%; border-left: 1px solid #61574b"><h4 style="text-align:left" data-temp="comments-u">COMMENTS</h4></div>
                        <div class="item" style="width:10%; border-left: 1px solid #61574b"><h4 data-temp="weapons-reloads-u">RELOADS</h4></div>
                    </div>
        		    <fieldset class="repeating_weapon">
        		        <div class="row table-background-light" style="height:3em">
        		            <div class="item" style="width:23.3%; height:3em"><input type="text" name="attr_weapon"></div>
                            <div class="item" style="width:7%; height:3em; border-left: 1px solid #61574b"><input type="text" name="attr_weapon_bonus" style="text-align:center"></div>
                            <div class="item" style="width:7%; height:3em; border-left: 1px solid #61574b"><input type="text" name="attr_weapon_init" style="text-align:center"></div>
                            <div class="item" style="width:9%; height:3em; border-left: 1px solid #61574b"><input type="text" name="attr_weapon_damage" style="text-align:center"></div>
                            <div class="item" style="width:7%; height:3em; border-left: 1px solid #61574b"><input type="text" name="attr_weapon_crit" style="text-align:center"></div>
                            <div class="item" style="width:12%; height:3em; border-left: 1px solid #61574b"><input type="text" name="attr_weapon_range" style="text-align:center"></div>
                            <div class="item" style="width:25%; height:3em; border-left: 1px solid #61574b"><input type="text" name="attr_weapon_comments"></div>
                            <div class="item table-graphic-light" style="width:10%; height:3em; border-bottom: 1px solid #61574b; border-left: 1px solid #61574b">
                                <div class="flex-reloads-checkbox reloads-checkbox" style="height:1.5em; position:relative; left:-2.5px">
                                    <input type="checkbox" class="cb-small" name="attr_reload1" value="1"><span></span>
                                    <input type="checkbox" class="cb-small" name="attr_reload2" value="1"><span></span>
                                    <input type="checkbox" class="cb-small" name="attr_reload3" value="1"><span></span>
                                </div>
                                <div class="flex-reloads-checkbox reloads-checkbox" style="height:1.5em; position:relative; left:-2.5px">
                                    <input type="checkbox" class="cb-small" name="attr_reload4" value="1"><span></span>
                                    <input type="checkbox" class="cb-small" name="attr_reload5" value="1"><span></span>
                                    <input type="checkbox" class="cb-small" name="attr_reload6" value="1"><span></span>
                                </div>
                            </div>
                        </div>
        			</fieldset>
                </div><br>
    			
    			<!-- ARMOR TABLE -->
    			<div class="table-border table-background-light">
                    <div class="row table-graphic-dark">
                        <div class="item" style="width:50%"><h1 data-temp="armor-u">ARMOR</h1></div>
                        <div class="item" style="width:20%; border-left: 1px solid #61574b"><h4 data-temp="armor-rating-u">RATING</h4></div>
                        <div class="item" style="width:30%; border-left: 1px solid #61574b"><h4 style="text-align: left" data-temp="comment-u">COMMENT</h4></div>
                    </div>
    		        <div class="row table-background-light">
    		            <div class="item" style="width:50%"><input type="text" name="attr_armor"></div>
                        <div class="item" style="width:20%; border-left: 1px solid #61574b"><input type="text" name="attr_armor_rating" style="text-align:center"></div>
                        <div class="item" style="width:30%; border-left: 1px solid #61574b"><input type="text" name="attr_armor_comments"></div>
					</div>
                </div><br>
    			
            </div>

        </div><br>

        <!-- CHARACTER INFORMATION BOTTOM -->
        <div class="2colrow-tight-right">

            <!-- Left Column -->
            <div class="col">

                
                <!-- Left Column Skills -->
                <div class="table-border table-graphic-light">
                    <div class="row table-graphic-dark">
                        <div class="item" style="width:32%"><h1 data-temp="character-skills-u">SKILLS</h1></div>
                        <div class="item" style="width:6%"></div>
                        <div class="item" style="width:12%"><h4 data-temp="character-skills-general-u">GENERAL</h4></div>
                        <div class="item" style="width:32%"></div>
                        <div class="item" style="width:6%"></div>
                        <div class="item" style="width:12%"><h4 data-temp="character-skills-advanced-u">ADVANCED</h4></div>
                    </div>
                    <div class="row">
                        <div class="item" style="width:32%"><h2 data-temp="character-skills-athletics-strength">Athletics (Str)</h2></div>
                        <div class="item" style="width:6%"><button type="roll" name="roll_athletics" value="&{template:coriolis} {{isNotAdvanced=1}} {{name=^{Athletics}}} {{roll=[[(@{strength} + @{athletics} + @{modifier-pos} - @{modifier-neg})d6>6]]}} {{pool=[[(@{strength} + @{athletics} + @{modifier-pos} - @{modifier-neg})>0]]}} {{reroll=[[2d6>6]]}}"></button></div>
                        <div class="item" style="width:12%; text-align:right"><input type="number" name="attr_athletics" min="0"  value="0"></div>
                        <div class="item" style="width:32%"><h2 data-temp="character-skills-resist-strength">Resist (Str)</h2></div>
                        <div class="item" style="width:6%"><button type="roll" name="roll_resist" value="&{template:coriolis} {{isAdvanced=1}} {{name=^{Resist}}} {{advanced-skill=[[@{command}>0]]}} {{roll=[[(@{strength} + @{resist} + @{modifier-pos} - @{modifier-neg})d6>6]]}} {{pool=[[(@{strength} + @{resist} + @{modifier-pos} - @{modifier-neg})>0]]}} {{reroll=[[2d6>6]]}}"></button></div>
                        <div class="item" style="width:12%; text-align:right"><input type="number" name="attr_resist"  min="0" value="0"></div>
                    </div>
                    <div class="row">
                        <div class="item" style="width:32%"><h2 data-temp="character-skills-closecombat-strength">Close Combat (Str)</h2></div>
                        <div class="item" style="width:6%"><button type="roll" name="roll_closecombat" value="&{template:coriolis} {{isNotAdvanced=1}} {{name=^{Close Combat}}} {{roll=[[(@{strength} + @{closecombat} + @{modifier-pos} - @{modifier-neg})d6>6]]}} {{pool=[[(@{strength} + @{closecombat} + @{modifier-pos} - @{modifier-neg})>0]]}} {{reroll=[[2d6>6]]}}"></button></div>
                        <div class="item" style="width:12%; text-align:right"><input type="number" name="attr_closecombat" min="0"  value="0"></div>
                        <div class="item" style="width:32%"><h2 data-temp="character-skills-drive-agility">Drive (Agi)</h2></div>
                        <div class="item" style="width:6%"><button type="roll" name="roll_drive" value="&{template:coriolis} {{isAdvanced=1}} {{name=^{Drive}}} {{advanced-skill=[[@{drive}>0]]}} {{roll=[[(@{agility} + @{drive} + @{modifier-pos} - @{modifier-neg})d6>6]]}} {{pool=[[(@{agility} + @{drive} + @{modifier-pos} - @{modifier-neg})>0]]}} {{reroll=[[2d6>6]]}}"></button></div>
                        <div class="item" style="width:12%; text-align:right"><input type="number" name="attr_drive" min="0"  value="0"></div>
                    </div>
                    <div class="row">
                        <div class="item" style="width:32%"><h2 data-temp="character-skills-throw-strength">Throw (Str)</h2></div>
                        <div class="item" style="width:6%"><button type="roll" name="roll_throw" value="&{template:coriolis} {{isNotAdvanced=1}} {{name=^{Throw}}} {{roll=[[(@{strength} + @{throw} + @{modifier-pos} - @{modifier-neg})d6>6]]}} {{pool=[[(@{strength} + @{throw} + @{modifier-pos} - @{modifier-neg})>0]]}} {{reroll=[[2d6>6]]}}"></button></div>
                        <div class="item" style="width:12%; text-align:right"><input type="number" name="attr_throw"  min="0" value="0"></div>
                        <div class="item" style="width:32%"><h2 data-temp="character-skills-sleight-agility">Sleight (Agi)</h2></div>
                        <div class="item" style="width:6%"><button type="roll" name="roll_sleight" value="&{template:coriolis} {{isAdvanced=1}} {{name=^{Sleight}}} {{advanced-skill=[[@{sleight}>0]]}} {{roll=[[(@{agility} + @{sleight} + @{modifier-pos} - @{modifier-neg})d6>6]]}} {{pool=[[(@{agility} + @{sleight} + @{modifier-pos} - @{modifier-neg})>0]]}} {{reroll=[[2d6>6]]}}"></button></div>
                        <div class="item" style="width:12%; text-align:right"><input type="number" name="attr_sleight" min="0"  value="0"></div>
                    </div>
                    <div class="row">
                        <div class="item" style="width:32%"><h2 data-temp="character-skills-rangedcombat-agility">Ranged Combat (Agi)</h2></div>
                        <div class="item" style="width:6%"><button type="roll" name="roll_rangedcombat" value="&{template:coriolis} {{isNotAdvanced=1}} {{name=^{Ranged Combat}}} {{roll=[[(@{agility} + @{rangedcombat} + @{modifier-pos} - @{modifier-neg})d6>6]]}} {{pool=[[(@{agility} + @{rangedcombat} + @{modifier-pos} - @{modifier-neg})>0]]}} {{reroll=[[2d6>6]]}}"></button></div>
                        <div class="item" style="width:12%; text-align:right"><input type="number" name="attr_rangedcombat"  min="0" value="0"></div>
                        <div class="item" style="width:32%"><h2 data-temp="character-skills-shadow-agility">Shadow (Agi)</h2></div>
                        <div class="item" style="width:6%"><button type="roll" name="roll_shadow" value="&{template:coriolis} {{isAdvanced=1}} {{name=^{Shadow}}} {{advanced-skill=[[@{shadow}>0]]}} {{roll=[[(@{agility} + @{shadow} + @{modifier-pos} - @{modifier-neg})d6>6]]}} {{pool=[[(@{agility} + @{shadow} + @{modifier-pos} - @{modifier-neg})>0]]}} {{reroll=[[2d6>6]]}}"></button></div>
                        <div class="item" style="width:12%; text-align:right"><input type="number" name="attr_shadow"  min="0" value="0"></div>
                    </div>
                    <div class="row">
                        <div class="item" style="width:32%"><h2 data-temp="character-skills-infiltration-agility">Infiltration (Agi)</h2></div>
                        <div class="item" style="width:6%"><button type="roll" name="roll_infiltration" value="&{template:coriolis} {{isNotAdvanced=1}} {{name=^{Infiltration}}} {{roll=[[(@{agility} + @{infiltration} + @{modifier-pos} - @{modifier-neg})d6>6]]}} {{pool=[[(@{agility} + @{infiltration} + @{modifier-pos} - @{modifier-neg})>0]]}} {{reroll=[[2d6>6]]}}"></button></div>
                        <div class="item" style="width:12%; text-align:right"><input type="number" name="attr_infiltration" min="0"  value="0"></div>
                        <div class="item" style="width:32%"><h2 data-temp="character-skills-disguise-empathy">Disguise (Edge)</h2></div>
                        <div class="item" style="width:6%"><button type="roll" name="roll_disguise" value="&{template:coriolis} {{isAdvanced=1}} {{name=^{Disguise}}} {{advanced-skill=[[@{disguise}>0]]}} {{roll=[[(@{empathy} + @{disguise} + @{modifier-pos} - @{modifier-neg})d6>6]]}} {{pool=[[(@{empathy} + @{disguise} + @{modifier-pos} - @{modifier-neg})>0]]}} {{reroll=[[2d6>6]]}}"></button></div>
                        <div class="item" style="width:12%; text-align:right"><input type="number" name="attr_disguise" min="0"  value="0"></div>
                    </div>
                    <div class="row">
                        <div class="item" style="width:32%"><h2 data-temp="character-skills-dodge-agility">Dodge (Agi)</h2></div>
                        <div class="item" style="width:6%"><button type="roll" name="roll_dodge" value="&{template:coriolis} {{isNotAdvanced=1}} {{name=^{Dodge}}} {{roll=[[(@{agility} + @{dodge} + @{modifier-pos} - @{modifier-neg})d6>6]]}} {{pool=[[(@{agility} + @{dodge} + @{modifier-pos} - @{modifier-neg})>0]]}} {{reroll=[[2d6>6]]}}"></button></div>
                        <div class="item" style="width:12%; text-align:right"><input type="number" name="attr_dodge"  min="0" value="0"></div>
                        <div class="item" style="width:32%"><h2 data-temp="character-skills-command-empathy">Command (Edge)</h2></div>
                        <div class="item" style="width:6%"><button type="roll" name="roll_command" value="&{template:coriolis} {{isAdvanced=1}} {{name=^{Command}}} {{advanced-skill=[[@{command}>0]]}} {{roll=[[(@{empathy} + @{command} + @{modifier-pos} - @{modifier-neg})d6>6]]}} {{pool=[[(@{empathy} + @{command} + @{modifier-pos} - @{modifier-neg})>0]]}} {{reroll=[[2d6>6]]}}"></button></div>
                        <div class="item" style="width:12%; text-align:right"><input type="number" name="attr_command" min="0"  value="0"></div>
                    </div>
                    <div class="row">
                        <div class="item" style="width:32%"><h2 data-temp="character-skills-manipulation-empathy">Manipulation (Edge)</h2></div>
                        <div class="item" style="width:6%"><button type="roll" name="roll_manipulation" value="&{template:coriolis} {{isNotAdvanced=1}} {{name=^{Manipulation}}} {{roll=[[(@{empathy} + @{manipulation} + @{modifier-pos} - @{modifier-neg})d6>6]]}} {{pool=[[@{empathy} + @{manipulation} + @{modifier-pos} - @{modifier-neg})>0]]}} {{reroll=[[2d6>6]]}}"></button></div>
                        <div class="item" style="width:12%; text-align:right"><input type="number" name="attr_manipulation" min="0"  value="0"></div>
                        <div class="item" style="width:32%"><h2 data-temp="character-skills-culture-empathy">Culture (Edge)</h2></div>
                        <div class="item" style="width:6%"><button type="roll" name="roll_culture" value="&{template:coriolis} {{isAdvanced=1}} {{name=^{Culture}}} {{advanced-skill=[[@{culture}>0]]}} {{roll=[[(@{empathy} + @{culture} + @{modifier-pos} - @{modifier-neg})d6>6]]}} {{pool=[[(@{empathy} + @{culture} + @{modifier-pos} - @{modifier-neg})>0]]}} {{reroll=[[2d6>6]]}}"></button></div>
                        <div class="item" style="width:12%; text-align:right"><input type="number" name="attr_culture"  min="0" value="0"></div>
                    </div>
                    <div class="row">
                        <div class="item" style="width:32%"><h2 data-temp="character-skills-smoothtalk-empathy">Smooth Talk (Edge)</h2></div>
                        <div class="item" style="width:6%"><button type="roll" name="roll_smoothtalk" value="&{template:coriolis} {{isNotAdvanced=1}} {{name=^{Smooth Talk}}} {{roll=[[(@{empathy} + @{smoothtalk} + @{modifier-pos} - @{modifier-neg})d6>6]]}} {{pool=[[(@{empathy} + @{smoothtalk} + @{modifier-pos} - @{modifier-neg})>0]]}} {{reroll=[[2d6>6]]}}"></button></div>
                        <div class="item" style="width:12%; text-align:right"><input type="number" name="attr_smoothtalk" min="0"  value="0"></div>
                        <div class="item" style="width:32%"><h2 data-temp="character-skills-cybernetics-wits">Cybernetics (Wits)</h2></div>
                        <div class="item" style="width:6%"><button type="roll" name="roll_cybernetics" value="&{template:coriolis} {{isAdvanced=1}} {{name=^{Cybernetics}}} {{advanced-skill=[[@{cybernetics}>0]]}} {{roll=[[(@{wits} + @{cybernetics} + @{modifier-pos} - @{modifier-neg})d6>6]]}} {{pool=[[(@{wits} + @{cybernetics} + @{modifier-pos} - @{modifier-neg})>0]]}} {{reroll=[[2d6>6]]}}"></button></div>
                        <div class="item" style="width:12%; text-align:right"><input type="number" name="attr_cybernetics"  min="0" value="0"></div>
                    </div>
                    <div class="row">
                        <div class="item" style="width:32%"><h2 data-temp="character-skills-barter-empathy">Barter (Edge)</h2></div>
                        <div class="item" style="width:6%"><button type="roll" name="roll_barter" value="&{template:coriolis} {{isNotAdvanced=1}} {{name=^{Barter}}} {{roll=[[(@{empathy} + @{barter} + @{modifier-pos} - @{modifier-neg})d6>6]]}} {{pool=[[(@{empathy} + @{barter} + @{modifier-pos} - @{modifier-neg})>0]]}} {{reroll=[[2d6>6]]}}"></button></div>
                        <div class="item" style="width:12%; text-align:right"><input type="number" name="attr_barter"  min="0" value="0"></div>
                        <div class="item" style="width:32%"><h2 data-temp="character-skills-science-wits">Science (Wits)</h2></div>
                        <div class="item" style="width:6%"><button type="roll" name="roll_science" value="&{template:coriolis} {{isAdvanced=1}} {{name=^{Science}}} {{advanced-skill=[[@{science}>0]]}} {{roll=[[(@{wits} + @{science} + @{modifier-pos} - @{modifier-neg})d6>6]]}} {{pool=[[(@{wits} + @{science} + @{modifier-pos} - @{modifier-neg})>0]]}} {{reroll=[[2d6>6]]}}"></button></div>
                        <div class="item" style="width:12%; text-align:right"><input type="number" name="attr_science" min="0"  value="0"></div>
                    </div>
                    <div class="row">
                        <div class="item" style="width:32%"><h2 data-temp="character-skills-demolitions-wits">Demolitions (Wits)</h2></div>
                        <div class="item" style="width:6%"><button type="roll" name="roll_demolitions" value="&{template:coriolis} {{isNotAdvanced=1}} {{name=^{Demolitions}}} {{roll=[[(@{wits} + @{demolitions} + @{modifier-pos} - @{modifier-neg})d6>6]]}} {{pool=[[(@{wits} + @{demolitions} + @{modifier-pos} - @{modifier-neg})>0]]}} {{reroll=[[2d6>6]]}}"></button></div>
                        <div class="item" style="width:12%; text-align:right"><input type="number" name="attr_demolitions"  min="0" value="0"></div>
                        <div class="item" style="width:32%"><h2 data-temp="character-skills-biotech-wits">Biotech (Wits)</h2></div>
                        <div class="item" style="width:6%"><button type="roll" name="roll_biotech" value="&{template:coriolis} {{isAdvanced=1}} {{name=^{Biotech}}} {{advanced-skill=[[@{biotech}>0]]}} {{roll=[[(@{wits} + @{biotech} + @{modifier-pos} - @{modifier-neg})d6>6]]}} {{pool=[[(@{wits} + @{biotech} + @{modifier-pos} - @{modifier-neg})>0]]}} {{reroll=[[2d6>6]]}}"></button></div>
                        <div class="item" style="width:12%; text-align:right"><input type="number" name="attr_biotech"  min="0" value="0"></div>
                    </div>
                    <div class="row">
                        <div class="item" style="width:32%"><h2 data-temp="character-skills-observation-wits">Observation (Wits)</h2></div>
                        <div class="item" style="width:6%"><button type="roll" name="roll_observation" value="&{template:coriolis} {{isNotAdvanced=1}} {{name=^{Observation}}} {{roll=[[(@{wits} + @{observation} + @{modifier-pos} - @{modifier-neg})d6>6]]}} {{pool=[[@{wits} + @{observation} + @{modifier-pos} - @{modifier-neg})>0]]}} {{reroll=[[2d6>6]]}}"></button></div>
                        <div class="item" style="width:12%; text-align:right"><input type="number" name="attr_observation" min="0"  value="0"></div>
                        <div class="item" style="width:32%"><h2 data-temp="character-skills-hacking-wits">Hacking (Wits)</h2></div>
                        <div class="item" style="width:6%"><button type="roll" name="roll_hacking" value="&{template:coriolis} {{isAdvanced=1}} {{name=^{Hacking}}} {{advanced-skill=[[@{hacking}>0]]}} {{roll=[[(@{wits} + @{hacking} + @{modifier-pos} - @{modifier-neg})d6>6]]}} {{pool=[[(@{wits} + @{hacking} + @{modifier-pos} - @{modifier-neg})>0]]}} {{reroll=[[2d6>6]]}}"></button></div>
                        <div class="item" style="width:12%; text-align:right"><input type="number" name="attr_hacking" min="0"  value="0"></div>
                    </div>
                    <div class="row">
                        <div class="item" style="width:32%"><h2 data-temp="character-skills-survival-wits">Survival (Wits)</h2></div>
                        <div class="item" style="width:6%"><button type="roll" name="roll_survival" value="&{template:coriolis} {{isNotAdvanced=1}} {{name=^{Survival}}} {{roll=[[(@{wits} + @{survival} + @{modifier-pos} - @{modifier-neg})d6>6]]}} {{pool=[[@{wits} + @{survival} + @{modifier-pos} - @{modifier-neg})>0]]}} {{reroll=[[2d6>6]]}}"></button></div>
                        <div class="item" style="width:12%; text-align:right"><input type="number" name="attr_survival" min="0"  value="0"></div>
                        <div class="item" style="width:32%"><h2 data-temp="character-skills-psychotherapy-wits">Psychotherapy (Wits)</h2></div>
                        <div class="item" style="width:6%"><button type="roll" name="roll_psychotherapy" value="&{template:coriolis} {{isAdvanced=1}} {{name=^{Psychotherapy}}} {{advanced-skill=[[@{psychotherapy}>0]]}} {{roll=[[(@{wits} + @{psychotherapy} + @{modifier-pos} - @{modifier-neg})d6>6]]}} {{pool=[[(@{wits} + @{psychotherapy} + @{modifier-pos} - @{modifier-neg})>0]]}} {{reroll=[[2d6>6]]}}"></button></div>
                        <div class="item" style="width:12%; text-align:right"><input type="number" name="attr_psychotherapy" min="0"  value="0"></div>
                    </div>
                    <div class="row">
                        <div class="item" style="width:32%"><h2 data-temp="character-skills-technology-wits">Technology (Wits)</h2></div>
                        <div class="item" style="width:6%"><button type="roll" name="roll_technology" value="&{template:coriolis} {{isNotAdvanced=1}} {{name=^{Technology}}} {{roll=[[(@{wits} + @{technology} + @{modifier-pos} - @{modifier-neg})d6>6]]}} {{pool=[[@{wits} + @{technology} + @{modifier-pos} - @{modifier-neg})>0]]}} {{reroll=[[2d6>6]]}}"></button></div>
                        <div class="item" style="width:12%; text-align:right"><input type="number" name="attr_technology" min="0"  value="0"></div>
                        <div class="item" style="width:32%"></div>
                        <div class="item" style="width:6%"></div>
                        <div class="item" style="width:12%; text-align:right"></div>
                    </div>
                </div><br>

                

            </div>

            <!-- Right Column -->
            <div class="col">
                
                <div>
            <div class="col table-border table-graphic-light" style="width:90%;">
                <div class="col table-border table-graphic-light" style="width: 90%">
                        <div class="row table-graphic-dark">
                            <div class="item"><h1 data-temp="experience-u">STREET CRED</h1></div>
                        </div>
                        <div class="row" style="border:none">
                            <div class="flex-checkbox custom-checkbox">
                                <input type="checkbox" class="cb-small" name="attr_exp1" value="1"><span></span>
                                <input type="checkbox" class="cb-small" name="attr_exp2" value="1"><span></span>
                                <input type="checkbox" class="cb-small" name="attr_exp3" value="1"><span></span>
                                <input type="checkbox" class="cb-small" name="attr_exp4" value="1"><span></span>
                                <input type="checkbox" class="cb-small" name="attr_exp5" value="1"><span></span>
                                <input type="checkbox" class="cb-small" name="attr_exp6" value="1"><span></span>
                                <input type="checkbox" class="cb-small" name="attr_exp7" value="1"><span></span>
                                <input type="checkbox" class="cb-small" name="attr_exp8" value="1"><span></span>
                                <input type="checkbox" class="cb-small" name="attr_exp9" value="1"><span></span>
                                <input type="checkbox" class="cb-small" name="attr_exp10" value="1"><span></span>
                            </div>
                        </div>
                        <div class="row">
                            <div class="flex-checkbox custom-checkbox">
                                <input type="checkbox" class="cb-small" name="attr_exp11" value="1"><span></span>
                                <input type="checkbox" class="cb-small" name="attr_exp12" value="1"><span></span>
                                <input type="checkbox" class="cb-small" name="attr_exp13" value="1"><span></span>
                                <input type="checkbox" class="cb-small" name="attr_exp14" value="1"><span></span>
                                <input type="checkbox" class="cb-small" name="attr_exp15" value="1"><span></span>
                                <input type="checkbox" class="cb-small" name="attr_exp16" value="1"><span></span>
                                <input type="checkbox" class="cb-small" name="attr_exp17" value="1"><span></span>
                                <input type="checkbox" class="cb-small" name="attr_exp18" value="1"><span></span>
                                <input type="checkbox" class="cb-small" name="attr_exp19" value="1"><span></span>
                                <input type="checkbox" class="cb-small" name="attr_exp20" value="1"><span></span>
                            </div>
                        </div>
                    </div>
                </div><br>
                </div><br>
                
                
                
                
                
            
                <!-- Right Column Carry -->
                <div class="table-border table-background-light">
                    <div class="row table-graphic-dark">
    			        <div class="item" style="width:30%"><h1 data-temp="carry-u">CARRY</h1></div>
    			        <div class="item" style="width:25%"><input type="number" name="attr_carry"  min="0" value="0"></div>
    			        <div class="item" style="width:20%"><h1 data-temp="carry-max-u">MAX</h1></div>
    			        <div class="item" style="width:25%"><input type="number" name="attr_carry-max"  min="0" value="0"></div>
                    </div>
                </div><br>

                <!-- Right Column Gear -->
    			<div class="table-border table-background-light">
    			    <div class="row table-graphic-dark">
    			        <div class="item" style="width:75%"><h1 data-temp="inventory-gear-u">GEAR</h1></div>
    			        <div class="item" style="width:25%; border-left: 1px solid #61574b"><h4 data-temp="bonus-u">BONUS</h4></div>
    			    </div>
        		    <fieldset class="repeating_gear">
        		        <div class="row table-background-light">
        		            <div class="item" style="width:75%"><input type="text" name="attr_gear"></div>
                            <div class="item" style="width:25%; border-left: 1px solid #61574b"><input type="text" name="attr_gear_bonus"></div>
    					</div>
					</fieldset>
    			</div><br>

                <!-- Right Column Armor -->
                
            </div>

        </div><br>

    </div><br>

</div>

<!--    *************************   Character Notes *************************   -->
<div class="section-characternotes">

    <!-- HEADER -->
    <div class="header">
        <br><span data-temp="title-characternotes-u">CHARACTER NOTES</span><br><br>
        <img src="https://i.imgur.com/gc2AgVa.png" alt="Logo">
    </div><br>

    <!-- MAIN -->
    <div class="wrapper">

        <!-- TOP -->
        <div class="1colrow">

            <div class="col">

                <div class="table-border table-background-light">
                    <div class="row table-graphic-dark">
                        <div class="item" style="width:30%"><h1 data-temp="people-u">CONTACTS</h1></div>
                        <div class="item" style="width:15%; border-left: 1px solid #61574b"><h4 style="text-align:left" data-temp="people-concept-u">CONCEPT</h4></div>
                        <div class="item" style="width:55%; border-left: 1px solid #61574b"><h4 style="text-align:left" data-temp="notes-u">NOTES</h4></div>
                    </div>
        		    <fieldset class="repeating_character-logs">
        		        <div class="row table-background-light">
        		            <div class="item" style="width:30%; border-bottom: 1px solid #61574b; border-left: 1px solid #61574b"><input type="text" name="attr_character-log-people"></div>
        		            <div class="item" style="width:15%; border-bottom: 1px solid #61574b; border-left: 1px solid #61574b"><input type="text" name="attr_character-log-concept"></div>
        		            <div class="item" style="width:55%; border-bottom: 1px solid #61574b; border-left: 1px solid #61574b"><input type="text" name="attr_character-log-notes"></div>
                        </div>
        			</fieldset>
                </div><br>


<!-- Right Column Appereance -->
                <div class="table-border table-background-light">
                    <div class="row table-graphic-dark">
                        <div class="item"><h1 data-temp="appearance-u">APPEARANCE</h1></div>
                    </div>
    				<div class="row">
    					<div class="item" style="width:15%"><h3 data-temp="appearance-face">Face:</h3></div>
    					<div class="item" style="width:85%"><input type="text" name="attr_face"></div>
    				</div>
    				<div class="row">
    					<div class="item" style="width:15%"><h3 data-temp="appearance-clothing">Clothing:</h3></div>
    					<div class="item" style="width:85%"><input type="text" name="attr_clothing"></div>
    				</div>
    			</div><br>

    			<!-- Right Column Relationships -->
    			<div class="table-border table-background-light">
    			    <div class="row table-graphic-dark">
    			        <div class="item" style="width:88.2%"><h1 data-temp="character-relationships-u">RELATIONSHIPS</h1></div>
    			        <div class="item" style="width:12.2%; border-left: 1px solid #61574b"><h4 data-temp="character-relationships-buddy-u">BUDDY</h4></div>
    			    </div>
        		    <fieldset class="repeating_relationships">
        		        <div class="row table-background-light">
        		            <div class="item" style="width:15%"><input type="text" name="attr_relationship_pc" value="'Name'"></div>
        		            <div class="item" style="width:2%; padding:0"><h3>:</h3></div>
                            <div class="item" style="width:71.2%"><input type="text" name="attr_relationship" value="'Description'"></div>
                            <div class="item  table-graphic-light" style="width:12.2%; border-bottom: 1px solid #61574b; border-left: 1px solid #61574b">
                                <div class="flex-checkbox custom-checkbox" style="width:45%; position:relative; left:15px">
                                    <input type="checkbox" name="attr_buddy" value="1"><span></span>
                                </div>
                            </div>
    					</div>
					</fieldset>
    			</div><br>





            </div>

        </div><br>

        <!-- MIDDLE -->
        <div class="2colrow-split">

            <!-- LEFT SIDE -->
            <div class="col">

                <div class="table-border table-background-light">
                    <div class="row table-graphic-dark">
                        <div class="item"><h1 data-temp="characternotes-cabin-u">MY ROOM</h1></div>
                    </div>
                    <div class="row" style="border-bottom: none">
                        <div class="item"><h3 data-temp="characternotes-cabin-description">Description:</h3></div>
                    </div>
                    <div><textarea class="textbox" name="attr_cabin-description" style="border-bottom: 1px solid #61574b; min-height: 3em; height: 3em; min-width: 98%; max-width: 98%;"></textarea></div>
                    <div class="row" style="border-bottom: none">
                        <div class="item"><h3 data-temp="characternotes-cabin-gear">Gear:</h3></div>
                    </div>
                    <div><textarea class="textbox" name="attr_cabin-gear" style="border-bottom: 1px solid #61574b; min-height: 3em; height: 3em; min-width: 98%; max-width: 98%;"></textarea></div>
                    <div class="row" style="border-bottom: none">
                        <div class="item"><h3 data-temp="characternotes-cabin-other">Other:</h3></div>
                    </div>
                    <div><textarea class="textbox" name="attr_cabin-other" style="border-bottom: 1px solid #61574b; min-height: 3em; height: 3em; min-width: 98%; max-width: 98%;"></textarea></div>
                </div><br>

            </div>

            <!-- RIGHT SIDE -->
            <div class="col">

    			<div class="table-border table-background-light">
    				<div class="row table-graphic-dark">
    					<div class="item" style="width:50.6%; border-bottom: 1px solid #61574b"><h1 data-TEMP="tiny-items-u">TINY ITEMS</h1></div>
    					<div class="item table-graphic-light" style="width:20%; border-bottom: 1px solid #61574b; border-left: 1px solid #61574b"><h3 data-temp="characternotes-money-birr-u">Eddies:</h3></div>
    					<div class="item table-graphic-light" style="width:30%; border-bottom: 1px solid #61574b;"><input type="number" name="attr_birr" style="width:8em; text-align:right; padding-right:1em" value="0"></div>
    				</div>
                    <div><textarea class="textbox" name="attr_tiny-items" style="border-bottom: 1px solid #61574b; min-height: 18em; height: 18em; min-width: 98%; max-width: 98%;"></textarea></div>
    			</div><br>

            </div>

        </div><br>

        <!-- BOTTOM -->
        <div class="1colrow">

            <div class="col">

				<div class="table-border table-background-light">
					<div class="row table-graphic-dark">
						<div class="item" style="width:50.5%"><h1 data-temp="notes-u">NOTES</h1></div>
					</div>
                    <div><textarea class="textbox" name="attr_notes" style="border-bottom: 1px solid #61574b; min-height: 18em; height: 18em; min-width: 98%; max-width: 98%;"></textarea></div>
				</div><br>

            </div>

        </div>

    </div><br>

</div>




<!--    *************************   Features  *************************   -->

<div class="section-features">

    <!-- HEADER -->
    <div class="header">
        <br><span data-temp="title-features">FEATURES</span><br><br>
        <img src="https://i.imgur.com/gc2AgVa.png" alt="Logo">
    </div><br>

    <!-- MAIN -->
    <div class="wrapper">

        <!-- TOP -->
        
        <!-- MIDDLE -->
        <div class="2colrow-split">

            <!-- LEFT SIDE -->
            <div class="col">

                <!-- LEFT  Column PRAXIS -->
                <div class="table-border table-background-light">
                    <div class="row table-graphic-dark">
                        <div class="item"><h1 data-temp="character-skills-talent-u">PRAXIS</h1></div>
                    </div>
                    <div>
        		    <fieldset class="repeating_talent">
        		        <div class="row table-background-light">
    					    <div class="item" style="width:100%"><input type="text" name="attr_talent"></div>
    					</div>
					</fieldset>
                    </div>
                </div><br><br>

            </div>
            
            
            
            

            <!-- RIGHT SIDE -->
            <div class="col">

    			<!-- Right Column Augments -->
                <div class="table-border table-background-light">
                    <div class="row table-graphic-dark">
                        <div class="item"><h1 data-temp="character-skills-augment-u">AUGMENTS</h1></div>
                    </div>
                    <div>
        		    <fieldset class="repeating_augment">
        		        <div class="row table-background-light">
    					    <div class="item" style="width:100%"><input type="text" name="attr_augment"></div>
    					</div>
					</fieldset>
                    </div>
                </div><br>

            </div>

        </div><br>

        <!-- BOTTOM -->
        <div class="1colrow">

            <div class="col">

				<div class="table-border table-background-light">
					<div class="row table-graphic-dark">
						<div class="item" style="width:50.5%"><h1 data-temp="notes2-u">NOTES</h1></div>
					</div>
                    <div><textarea class="textbox" name="attr_notes2" style="border-bottom: 1px solid #61574b; min-height: 18em; height: 18em; min-width: 98%; max-width: 98%;"></textarea></div>
				</div><br>

            </div>

        </div>

    </div><br>

</div>








<!--    *************************   Hidden test  *************************   -->
<div class="section-scripts">
  <rolltemplate class="sheet-rolltemplate-coriolis">
    <table class="sheet-skill-roll">
    	<tr>
			<th>
				{{name}}
			</th>
		</tr>

	    {{#isNotAdvanced}}
	        {{#rollLess() pool 1}}
        		<tr class="sheet-reroll">
        		    <td><span data-temp="rolltemplate-dice-pool">Dice pool is 0 or less.<br> Rolling 2d6 instead.</span></td>
        		</tr>

            	{{#rollLess() reroll 2}}
        			<tr class="sheet-fail">
        				<td><span class="sheet-roll">{{reroll}}</span><span style="padding-left: 20px" data-temp="rolltemplate-fail">Failure.</span></td>
        			</tr>
        		{{/rollLess() reroll 2}}

        		{{#rollGreater() reroll 1}}
        				<tr class="sheet-great-success">
        				<td><span class="sheet-roll">{{reroll}}</span><span style="padding-left: 20px" data-temp="rolltemplate-limitedsuccess">Limited Success.</span></td>
        				</tr>
        		{{/rollGreater() reroll 1}}
    	    {{/rollLess() pool 1}}

    	    {{#rollGreater() pool 0}}
        		{{#rollLess() roll 1}}
        				<tr class="sheet-fail">
        					<td><span class="sheet-roll">{{roll}}</span><span style="padding-left: 20px" data-temp="rolltemplate-fail">Failure.</span></td>
        				</tr>
        	    {{/rollLess() roll 1}}

        	    {{#rollBetween() roll 1 2}}
        				<tr class="sheet-success">
        					<td><span class="sheet-roll">{{roll}}</span><span style="padding-left: 20px" data-temp="rolltemplate-limitedsuccess">Limited Success.</span></td>
        				</tr>
        	    {{/rollBetween() roll 1 2}}

        	    {{#rollGreater() roll 2}}
        				<tr class="sheet-great-success">
        					<td><span class="sheet-roll">{{roll}}</span><span style="padding-left: 20px" data-temp="rolltemplate-criticalsuccess">Critical Success.</span></td>
        				</tr>
        	    {{/rollGreater() roll 2}}
    		{{/rollGreater() pool 0}}
	    {{/isNotAdvanced}}

	    {{#isAdvanced}}
    		{{#rollLess() advanced-skill 1}}
              <tr class="sheet-reroll">
                  <td data-temp="rolltemplate-autofail">Missing skill point in advanced skill. Automatic fail.</td>
              </tr>
            {{/rollLess() advanced-skill 1}}

            {{#rollGreater() advanced-skill 0}}
                {{#rollLess() pool 1}}
            		<tr class="sheet-reroll">
            		    <td><span data-temp="rolltemplate-dice-pool">Dice pool is 0 or less.<br> Rolling 2d6 instead.</span></td>
            		</tr>

                	{{#rollLess() reroll 2}}
            			<tr class="sheet-fail">
            				<td><span class="sheet-roll">{{reroll}}</span><span style="padding-left: 20px" data-temp="rolltemplate-fail">Failure.</span></td>
            			</tr>
            		{{/rollLess() reroll 2}}

            		{{#rollGreater() reroll 1}}
            				<tr class="sheet-great-success">
            				<td><span class="sheet-roll">{{reroll}}</span><span style="padding-left: 20px" data-temp="rolltemplate-limitedsuccess">Limited Success.</span></td>
            				</tr>
            		{{/rollGreater() reroll 1}}
        	    {{/rollLess() pool 1}}

        	    {{#rollGreater() pool 0}}
            		{{#rollLess() roll 1}}
            				<tr class="sheet-fail">
            					<td><span class="sheet-roll">{{roll}}</span><span style="padding-left: 20px" data-temp="rolltemplate-fail">Failure.</span></td>
            				</tr>
            	    {{/rollLess() roll 1}}

            	    {{#rollBetween() roll 1 2}}
            				<tr class="sheet-success">
            					<td><span class="sheet-roll">{{roll}}</span><span style="padding-left: 20px" data-temp="rolltemplate-limitedsuccess">Limited Success.</span></td>
            				</tr>
            	    {{/rollBetween() roll 1 2}}

            	    {{#rollGreater() roll 2}}
            				<tr class="sheet-great-success">
            					<td><span class="sheet-roll">{{roll}}</span><span style="padding-left: 20px" data-temp="rolltemplate-criticalsuccess">Critical Success.</span></td>
            				</tr>
            	    {{/rollGreater() roll 2}}
        		{{/rollGreater() pool 0}}
            {{/rollGreater() advanced-skill 0}}
        {{/isAdvanced}}

    </table>
  </rolltemplate>
</div><br>

<!--    *************************   WORKERS  *************************   -->
<script type="text/worker">

    on("sheet:opened", function() {
        console.log("** Coriolis Third Horizon Character Sheet 2.5 by Nicolaj G. **")
        versioning();
    });

    on("change:strength change:agility", function() {
        update_hitpoints("strength", "agility");
    });

    on("change:wits change:empathy", function() {
        update_mindpoints("wits", "empathy");
    });

    on("change:strength", function() {
        update_carryMAX("strength");
    });

    var versioning = function() {
        console.log("Version Checking...")
        getAttrs(["version"], function(v) {
            if(v.version == undefined || v.version == "") {
                console.log("** UPGRADING TO v2.0 **");

                upgrade_to_2_0()
                setAttrs({version: 2.0});

                console.log("** DONE UPGRADING TO v2.0 **");
            }
            if(v.version == 2.0) {
                console.log("** UPGRADING TO v2.5 **");

                upgrade_to_2_5()
                setAttrs({version: 2.5});

                console.log("** DONE UPGRADING TO v2.5 **");
            }
            else {
                console.log("** Coriolis v2.5 by Nicolaj G. **");
                return;
            }
        });
    };

    var upgrade_to_2_0 = function() {

        update_number("pc", "sheetstyle");
        update_number("sty", "strength");
        update_number("kyl", "agility");
        update_number("skp", "wits");
        update_number("kns", "empathy");
        update_number("rorlighet", "dexterity");
        update_number("befal", "command");
        update_number("kraftprov", "force");
        update_number("horisontens_kultur", "culture");
        update_number("smyga", "infiltration");
        update_number("datadjinn", "datadjinn");
        update_number("manipulera", "manipulation");
        update_number("medikurgi", "medicurgy");
        update_number("narkamp", "melee-combat");
        update_number("mystiska_krafter", "mystic-powers");
        update_number("spaning", "observation");
        update_number("pilot", "pilot");
        update_number("skjutvape", "ranged-combat");
        update_number("vetenskap", "science");
        update_number("overlevnad", "survival");
        update_number("rustning_skydd", "armor_rating");
        update_number("skepp-manoverformaga", "spaceship-maneuverability");
        update_number("skepp-signatur", "spaceship-signature");
        update_number("skepp-hastighet", "spaceship-speed");
        update_number("skepp-pansar", "spaceship-armor");
        update_number("skepp-max-modulerderp", "spaceship-modules-max");
        update_number("captainnum", "captainskill");
        update_number("pilotnum", "pilotskill");
        update_number("sensoroperatornum", "sensoroperatorskill");
        update_number("gunnernum", "gunnerskill");
        update_number("engineernum", "engineerskill");
        update_number("teknologi", "technology");
        update_number("teknologi", "technology");
        update_number("teknologi", "technology");
        update_number("teknologi", "technology");
        update_number("teknologi", "technology");
        update_number("teknologi", "technology");

        update_text("namn", "name");
        update_text("bakgrund", "background");
        update_text("koncept", "concept");
        update_text("ikon", "icon");
        update_text("gruppkoncept", "groupconcept");
        update_text("pers_problem", "personal_problem");
        update_text("anseende", "reputation");
        update_text("ansikte", "face");
        update_text("rustning", "armor");
        update_text("rustning_ovrigt", "armor_comments");
        update_text("skepp-namn", "spaceship-name");
        update_text("skepp-typ", "spaceship-type");
        update_text("skepp-varv", "spaceship-yard");
        update_text("skepp-problem", "spaceship-problem");
        update_text("captain", "captain");
        update_text("sensoroperator", "sensoroperator");
        update_text("gunner", "gunner");
        update_text("engineer", "engineer");
        update_text("kladsel", "clothing");

        update_checkbox("trauma", "hitpoints-check", 12)
        update_checkbox("mind", "mindpoints-check", 12)
        update_checkbox("stp", "rad", 10)
        update_checkbox("erf", "exp", 20)
        update_checkbox("skepp-energi", "ep", 10)
        update_checkbox("skepp-kp", "space-hp", 20)

        update_repeating("repeating_krits", "repeating_crits", "krit-skador", "crit-injury");
        update_repeating("repeating_talanger", "repeating_talents", "talang", "talent");
        update_repeating("repeating_skepp-krits", "repeating_spaceship-crits", "skepp-krit-skador", "spaceship-crit-damage");
        update_repeating("repeating_utrustning", "repeating_gear", "utrustning", "gear", "utrustning_bonus", "gear_bonus");
        update_repeating("repeating_skepp-tillval", "repeating_spaceship-features", "skepp-tillvalsnamn", "spaceship-features-name", "skepp-tillval-bonus", "spaceship-features-bonus"); //2

        update_hitpoints("strength", "agility");
        update_mindpoints("wits", "empathy");
        update_carryMAX("strength");

        update_relationships();
        update_weapons();
        update_spaceship_module();
        update_spaceship_weaponsystem();
     };

    var upgrade_to_2_5 = function() {

        oldRepeating = "repeating_talents";
        oldAttribute = "items";
        newAttribute = "tiny-items";

        getSectionIDs(oldRepeating, function(idArray) {
            var update = {};
            update[newAttribute] = "";
            _.each(idArray, function(currentID) {
                getAttrs([oldRepeating + "_" + currentID + "_" + oldAttribute], function(v) {
                    if(v[oldRepeating + "_" + currentID + "_" + oldAttribute]) {
                        var newrowid = generateRowID();
                        update[newAttribute] += v[oldRepeating + "_" + currentID + "_" + oldAttribute] + "\n";
                        setAttrs(update);
                    }
                });
            });
        });

    };

    var update_text = function(oldAttribute, newAttribute) {
        console.log("Updating Text from: " + oldAttribute + " to: " + newAttribute);

        getAttrs([oldAttribute], function(v) {
            if(v[oldAttribute]) {
                var update = {};
                update[newAttribute] = v[oldAttribute];
                setAttrs(update, {silent: true});
            }
        });
    }

    var update_number = function(oldAttribute, newAttribute) {
        console.log("Updating number from: " + oldAttribute + " to: " + newAttribute);

        getAttrs([oldAttribute], function(v) {
            if(v[oldAttribute]) {
                var update = {};
                update[newAttribute] = parseInt(v[oldAttribute], 10);
                setAttrs(update, {silent: true});
            }
        });
    }

    var update_checkbox = function(oldAttribute, newAttribute, numberOfAttributes) {
        console.log("Updating checkbox from: " + oldAttribute + " to: " + newAttribute);
        var array = [];

        for(var i = 1; i <= numberOfAttributes; i++) {
            array.push(oldAttribute + i);
        }

        getAttrs(array, function(v) {
            for(var i = 1; i <= numberOfAttributes; i++) {
                var update = {};

                if( isNaN(parseInt(v[oldAttribute + i], 10)) ) {
                    update[newAttribute + i] = 0;
                    console.log(oldAttribute + i + " Is NaN. Updating " + newAttribute + i + " with 0")
                    setAttrs(update, {silent: true});
                }
                else {
                    update[newAttribute + i] = 1;
                    console.log(oldAttribute + i + " Is aN. Updating " + newAttribute + i + " with 1")
                    setAttrs(update, {silent: true});
                }
            }
        });
    }

    var update_repeating = function(oldRepeating, newRepeating, oldField1, newField1, oldField2, newField2) {
        console.log("Updating repeating from: " + oldRepeating + " to: " + newRepeating);

        getSectionIDs(oldRepeating, function(idArray) {
            if(!oldField2) {
                var update={};
                _.each(idArray, function(currentID) {
                    getAttrs([oldRepeating + "_" + currentID + "_" + oldField1], function(v) {
                        if(v[oldRepeating + "_" + currentID + "_" + oldField1]) {
                            var newrowid = generateRowID();
                            update[newRepeating + "_" + newrowid + "_" + newField1] = v[oldRepeating + "_" + currentID + "_" + oldField1];
                            setAttrs(update);
                        }
                    });
                });
            }

            if(oldField2) {
                var update={};
                _.each(idArray, function(currentID) {
                    getAttrs([oldRepeating + "_" + currentID + "_" + oldField1, oldRepeating + "_" + currentID + "_" + oldField2], function(v) {
                        if(v[oldRepeating + "_" + currentID + "_" + oldField1]) {
                            var newrowid = generateRowID();
                            update[newRepeating + "_" + newrowid + "_" + newField1] = v[oldRepeating + "_" + currentID + "_" + oldField1];
                            setAttrs(update);

                            if(v[oldRepeating + "_" + currentID + "_" + oldField2]) {
                                update[newRepeating + "_" + newrowid + "_" + newField2] = v[oldRepeating + "_" + currentID + "_" + oldField2];
                                setAttrs(update);
                            }
                        }
                    });
                });
            }
        });
    }

    //relationship, buddy
    var update_relationships = function() {
        console.log("Updating repeating from: repeating_relations to: repeating_relationships");
        getSectionIDs("repeating_relations", function(idarray) {
            var update={};
            _.each(idarray, function(currentID) {
                getAttrs(["repeating_relations" + "_" + currentID + "_" + "relation", "repeating_relations" + "_" + currentID + "_" + "narstaende"], function(v) {
                    var newrowid = generateRowID();
                    if(v["repeating_relations" + "_" + currentID + "_" + "relation"]) {
                        update["repeating_relationships" + "_" + newrowid + "_" + "relationship_pc"] = v["repeating_relations" + "_" + currentID + "_" + "relation"];
                        setAttrs(update);

                        if(v["repeating_relations" + "_" + currentID + "_" + "narstaende"]) {
                            update["repeating_relationships" + "_" + newrowid + "_" + "buddy"] = 1;
                            setAttrs(update, {silent: true});
                        }
                    }
                });
            });
        });
    }

    //weapon, weapon_bonus, weapon_init, weapon_damage, weapon_crit, weapon_range, weapon_comments
    var update_weapons = function() {
        console.log("Updating repeating from: repeating_vapen to: repeating_weapon");
        getSectionIDs("repeating_vapen", function(idarray) {
            var update={};
            _.each(idarray, function(currentID) {
                getAttrs(["repeating_vapen" + "_" + currentID + "_" + "vapen", "repeating_vapen" + "_" + currentID + "_" + "vapen_bonus", "repeating_vapen" + "_" + currentID + "_" + "vapen_init", "repeating_vapen" + "_" + currentID + "_" + "vapen_skada", "repeating_vapen" + "_" + currentID + "_" + "vapen_krit", "repeating_vapen" + "_" + currentID + "_" + "vapen_rackvidd", "repeating_vapen" + "_" + currentID + "_" + "vapen_ovrigt", "repeating_vapen" + "_" + currentID + "_" + "reload1", "repeating_vapen" + "_" + currentID + "_" + "reload2", "repeating_vapen" + "_" + currentID + "_" + "reload3", "repeating_vapen" + "_" + currentID + "_" + "reload4", "repeating_vapen" + "_" + currentID + "_" + "reload5", "repeating_vapen" + "_" + currentID + "_" + "reload6"], function(v) {
                    var newrowid = generateRowID();
                    if(v["repeating_vapen" + "_" + currentID + "_" + "vapen"]) {
                        update["repeating_weapon" + "_" + newrowid + "_" + "weapon"] = v["repeating_vapen" + "_" + currentID + "_" + "vapen"];
                        setAttrs(update);
                        update["repeating_weapon" + "_" + newrowid + "_" + "weapon_bonus"] = v["repeating_vapen" + "_" + currentID + "_" + "vapen_bonus"];
                        setAttrs(update);
                        update["repeating_weapon" + "_" + newrowid + "_" + "weapon_init"] = v["repeating_vapen" + "_" + currentID + "_" + "vapen_init"];
                        setAttrs(update);
                        update["repeating_weapon" + "_" + newrowid + "_" + "weapon_damage"] = v["repeating_vapen" + "_" + currentID + "_" + "vapen_skada"];
                        setAttrs(update);
                        update["repeating_weapon" + "_" + newrowid + "_" + "weapon_crit"] = v["repeating_vapen" + "_" + currentID + "_" + "vapen_krit"];
                        setAttrs(update);
                        update["repeating_weapon" + "_" + newrowid + "_" + "weapon_range"] = v["repeating_vapen" + "_" + currentID + "_" + "vapen_rackvidd"];
                        setAttrs(update);
                        update["repeating_weapon" + "_" + newrowid + "_" + "weapon_comments"] = v["repeating_vapen" + "_" + currentID + "_" + "vapen_ovrigt"];
                        setAttrs(update);

                        for(var i = 1; i <= 6; i++) {
                            if( isNaN(parseInt(v["repeating_vapen" + "_" + currentID + "_" + "reload" + i],10)) ) {
                                update["repeating_weapon" + "_" + newrowid + "_" + "reload" + i] = 0;
                                setAttrs(update, {silent: true});
                            }
                            else {
                                update["repeating_weapon" + "_" + newrowid + "_" + "reload" + i] = 1;
                                setAttrs(update, {silent: true});
                            }
                        }
                    }
                });
            });
        });
    }

    //spaceship_module
    var update_spaceship_module = function() {
        console.log("Updating repeating from: repeating_skeppsmoduler to: repeating_spaceship-modules");
        getSectionIDs("repeating_skeppsmoduler", function(idarray) {
            var update={};
            _.each(idarray, function(currentID) {
                getAttrs(["repeating_skeppsmoduler" + "_" + currentID + "_" + "skeppsmodul", "repeating_skeppsmoduler" + "_" + currentID + "_" + "utslagen"], function(v) {
                    var newrowid = generateRowID();
                    if(v["repeating_skeppsmoduler" + "_" + currentID + "_" + "skeppsmodul"]) {
                        update["repeating_spaceship-modules" + "_" + newrowid + "_" + "spaceship-module"] = v["repeating_skeppsmoduler" + "_" + currentID + "_" + "skeppsmodul"];
                        setAttrs(update);

                        if( isNaN(parseInt(v["repeating_skeppsmoduler" + "_" + currentID + "_" + "utslagen"],10)) ) {
                            update["repeating_spaceship-modules" + "_" + newrowid + "_" + "disabled"] = 0;
                            setAttrs(update, {silent: true});
                        }
                        else if(parseInt(v["repeating_skeppsmoduler" + "_" + currentID + "_" + "utslagen"],10) === 0) { // Checking for 0, since original sheet set this value to 0 if checked
                            update["repeating_spaceship-modules" + "_" + newrowid + "_" + "disabled"] = 1;
                            setAttrs(update, {silent: true});
                        }
                    }
                });
            });
        });
    }

    //spaceship-weaponsystem, spaceship-weaponsystem-bonus, spaceship-weaponsystem-damage, spaceship-weaponsystem-crit, spaceship-weaponsystem-range, spaceship-weaponsystem-comments
    var update_spaceship_weaponsystem = function() {
    console.log("Updating repeating from: repeating_skepp-vapen to: repeating_spaceship-weapons");
    getSectionIDs("repeating_skepp-vapen", function(idarray) {
            var update={};
            _.each(idarray, function(currentID) {
                getAttrs(["repeating_skepp-vapen" + "_" + currentID + "_" + "skepp-vapensystem", "repeating_skepp-vapen" + "_" + currentID + "_" + "skepp-vapensystem-bonus", "repeating_skepp-vapen" + "_" + currentID + "_" + "skepp-vapensystem-r&auml;ckvidd", "repeating_skepp-vapen" + "_" + currentID + "_" + "skepp-vapensystem-skada", "repeating_skepp-vapen" + "_" + currentID + "_" + "skepp-vapensystem-krit", "repeating_skepp-vapen" + "_" + currentID + "_" + "skepp-vapensystem-ovrigt"], function(v) {
                    var newrowid = generateRowID();
                    if(v["repeating_skepp-vapen" + "_" + currentID + "_" + "skepp-vapensystem"]) {
                            update["repeating_spaceship-weapons" + "_" + newrowid + "_" + "spaceship-weaponsystem"] = v["repeating_skepp-vapen" + "_" + currentID + "_" + "skepp-vapensystem"];
                            setAttrs(update);
                        if(v["repeating_skepp-vapen" + "_" + currentID + "_" + "skepp-vapensystem-bonus"]) {
                            update["repeating_spaceship-weapons" + "_" + newrowid + "_" + "spaceship-weaponsystem-bonus"] = v["repeating_skepp-vapen" + "_" + currentID + "_" + "skepp-vapensystem-bonus"];
                            setAttrs(update);
                        }
                        if(v["repeating_skepp-vapen" + "_" + currentID + "_" + "skepp-vapensystem-skada"]) {
                            update["repeating_spaceship-weapons" + "_" + newrowid + "_" + "spaceship-weaponsystem-damage"] = v["repeating_skepp-vapen" + "_" + currentID + "_" + "skepp-vapensystem-skada"];
                            setAttrs(update);
                        }
                        if(v["repeating_skepp-vapen" + "_" + currentID + "_" + "skepp-vapensystem-krit"]) {
                            update["repeating_spaceship-weapons" + "_" + newrowid + "_" + "spaceship-weaponsystem-crit"] = v["repeating_skepp-vapen" + "_" + currentID + "_" + "skepp-vapensystem-krit"];
                            setAttrs(update);
                        }
                        if(v["repeating_skepp-vapen" + "_" + currentID + "_" + "skepp-vapensystem-r&auml;ckvidd"]) {
                            update["repeating_spaceship-weapons" + "_" + newrowid + "_" + "spaceship-weaponsystem-range"] = v["repeating_skepp-vapen" + "_" + currentID + "_" + "skepp-vapensystem-r&auml;ckvidd"];
                            setAttrs(update);
                        }
                        if(v["repeating_skepp-vapen" + "_" + currentID + "_" + "skepp-vapensystem-ovrigt"]) {
                            update["repeating_spaceship-weapons" + "_" + newrowid + "_" + "spaceship-weaponsystem-comments"] = v["repeating_skepp-vapen" + "_" + currentID + "_" + "skepp-vapensystem-ovrigt"];
                            setAttrs(update);
                        }
                    }
                });
            });
        });
    }

    var update_hitpoints = function(par_Strength, par_Agility) {
        console.log("Updating hitpoints");
            getAttrs([par_Strength, par_Agility], function(v) {
                setAttrs({
                    "hitpoints": parseInt(v[par_Strength],10) + parseInt(v[par_Agility],10)
                });
            });
    }

    var update_mindpoints = function(par_Wits, par_Empathy) {
        console.log("Updating mindpoints");
            getAttrs([par_Wits, par_Empathy], function(v) {
                setAttrs({
                    "mindpoints": parseInt(v[par_Wits],10) + parseInt(v[par_Empathy],10)
                });
            });
    }

    var update_carryMAX = function(par_Strength) {
        console.log("Updating carryMAX");
            getAttrs([par_Strength], function(v) {
                setAttrs({
                    "carry-max": parseInt((v[par_Strength]*2),10)
                });
            });
    }

</script>





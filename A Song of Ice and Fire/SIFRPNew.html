<!-- Set up the Tabs -->
<input type="radio" class="sheet-tab sheet-tab1" name="attr_core-tab" value="1" title="Player Sheet"
    checked="checked" />
<span class="sheet-tab sheet-tab1" style='line-height: 40px;'>Info & Abilities</span>

<input type="radio" class="sheet-tab sheet-tab2" name="attr_core-tab" value="2" title="Intrigue Combat" />
<span class="sheet-tab sheet-tab2" style='line-height: 40px;'>Intrigue & Combat</span>

<input type="radio" class="sheet-tab sheet-tab3" name="attr_core-tab" value="3" title="Character Details" />
<span class="sheet-tab sheet-tab3" style='line-height: 40px;'>Character Details</span>

<input type="radio" class="sheet-tab sheet-tab4" name="attr_core-tab" value="4" title="NPCs" />
<span class="sheet-tab sheet-tab4" style='line-height: 40px;'>NPCs</span>

<input type="radio" class="sheet-tab sheet-tab5" name="attr_core-tab" value="5" title="Personal Journal" />
<span class="sheet-tab sheet-tab5" style='line-height: 40px;'>Journal</span>

<br><br>
<!-- End Tab setup -->

<div class="sheet-section-core">
    <!-- Core Tab -->
    <div class="sheet-wrapper">

        <!-- Basic Player Character Information -->
        <!--%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%-->

        <div class="sheet-3colrowspecial">
            <div class="sheet-col">
                <div class="sheet-row">
                    <div class="sheet-item" style="width: 15%"><label>Name</label></div>
                    <div class="sheet-item" style="width: 18%"></div>
                    <div class="sheet-item" style="width: 60%"><input name="attr_character_name" type="text"></div>
                </div>
                <div class="sheet-row">
                    <div class="sheet-item" style="width: 33%"><label>Player Name</label></div>
                    <div class="sheet-item" style="width: 60%"><input name="attr_Player" type="text"></div>
                </div>
                <div class="sheet-row">
                    <div class="sheet-item" style="width:33%"><label>House</label></div>
                    <div class="sheet-item" style="width:60%"><input name="attr_House" type="text"></div>
                </div>
                <div class="sheet-row">
                    <div class="sheet-item" style="width:33%"><label>Motto</label></div>
                    <div class="sheet-item" style="width:60%"><input name="attr_Motto"
                        type="text" style="display: table-cell; font-style: italic;"></div>
                </div>
            </div>
            <div class="sheet-col sheet-tcenter">
                <img src="https://i.imgur.com/rgqz6BH.png" style="max-width: 80%;">
                <br />
            </div>
            <div class="sheet-col">
                <div class="sheet-row">
                    <div class="sheet-item" style="width:13%"><label>Age</label></div>
                    <div class="sheet-item" style="width: 9%"></div>
                    <div class="sheet-item" style="width:18%"><input name="attr_Age" type="text"></div>
                    <div class="sheet-item" style="width:21%"><label>Gender</label></div>
                    <div class="sheet-item" style="width:18%"><input name="attr_Gender" type="text"></div>
                </div>
                <div class="sheet-row">
                    <div class="sheet-item" style="width: 15%"><label>Height</label></div>
                    <div class="sheet-item" style="width: 7%"></div>
                    <div class="sheet-item" style="width: 18%"><input name="attr_charHeight" type="text"></div>
                    <div class="sheet-item" style="width: 21%"><label>Weight</label></div>
                    <div class="sheet-item" style="width: 18%"><input name="attr_charWeight" type="text"></div>
                </div>
                <div class="sheet-row">
                    <div class="sheet-item" style="width: 22%"><label>Hair Color</label></div>
                    <div class="sheet-item" style="width: 18%"><input name="attr_charHair" type="text"></div>
                    <div class="sheet-item" style="width: 21%"><label>Eye Color</label></div>
                    <div class="sheet-item" style="width: 18%"><input name="attr_charEyes" type="text"></div>
                </div>
            </div>
        </div>

        <br /><br />       

        <div class="sheet-2colrow">

            <!-- Left ability column -->

            <div class="sheet-col">
                <div class="sheet-dhhr"></div>

                <!-- Custom -->

                <div class="sheet-2colrow">
                    <div class="sheet-col sheet-characteristics">
                        <div class="sheet-2colrow">
                            <div class="sheet-col">
                                <div class="unnatural_box">
                                    <input name="" class="unnaturaltext" type="text" value="âš…" readonly>
                                </div>
                            </div>
                            <div class="sheet-col">
                                <button type='roll' class='sheet-characteristics' name='attr_will-roll'
                                    value='&{template:sofai} {{input= @{character_name} rolls [[ ( [[ ?{Dice|1} + ?{Bonus Dice|0} ]] )d6dl( [[ ?{Bonus Dice|0} + ?{Penalty Dice|0} ]] ) + ?{Modifier|0} ]] }}'><label
                                        style="vertical-align: middle;">Custom Roll</label></button>
                            </div>
						</div>
                    </div>
                    <div class="sheet-col sheet-Custom">
                            <div style="height: 50px !important;">
                                <input type="checkbox" name="attr_customSpecialty_Open" class="sheet-Custom" value="1"
                                    checked /><span></span>
                            </div>
                            <input type="checkbox" name="attr_customSpecialty_Open" class="sheet-hidden sheet-hider"
                                value="1" style="height: 0px !important;" checked />
                            <div class="sheet-body" style="position: relative; left: -100px;">
                                <div class="sheet-row">
                                    <div class="sheet-item" style="width: 15%;"></div>
                                    <div class="sheet-item" style="width: 85%;"><button type='roll'
                                            class="sheet-specialtyRoll" name="roll_custom2d6"
                                            value="&{template:sofai} {{input=@{character_name} rolls 2d6!  \n\n [[2d6sd - @{injuries} - @{fatigue} ]] }}">2d6</button>
                                    </div>
                                </div>
                                <div class="sheet-row">
                                    <div class="sheet-item" style="width: 15%;"></div>
                                    <div class="sheet-item" style="width: 85%;"><button type='roll'
                                            class="sheet-specialtyRoll" name="roll_custom3d6"
                                            value="&{template:sofai} {{input=@{character_name} rolls 3d6!  \n\n [[3d6sd - @{injuries} - @{fatigue}]] }}">3d6</button>
                                    </div>
                                </div>                                
                                <div class="sheet-row">
                                        <div class="sheet-item" style="width: 15%;"></div>
                                        <div class="sheet-item" style="width: 85%;"><button type='roll'
                                                class="sheet-specialtyRoll" name="roll_custom4d6"
                                                value="&{template:sofai} {{input=@{character_name} rolls 4d6!  \n\n [[4d6sd - @{injuries} - @{fatigue}]] }}">4d6</button>
                                        </div>
                                    </div>
                                <div class="sheet-row">
                                    <div class="sheet-item" style="width: 15%;"></div>
                                    <div class="sheet-item" style="width: 85%;"><button type='roll'
                                            class="sheet-specialtyRoll" name="roll_custom2d62B"
                                            value="&{template:sofai} {{input=@{character_name} rolls 2d6+2B!  \n\n [[ ( [[ 2 + 2 ]] )d6kh2sd - @{injuries} - @{fatigue} ]] }}">2d6+2B</button>
                                    </div>
                                </div>
                                <div class="sheet-row">
                                    <div class="sheet-item" style="width: 15%;"></div>
                                    <div class="sheet-item" style="width: 85%;"><button type='roll'
                                            class="sheet-specialtyRoll" name="roll_custom3d63B"
                                            value="&{template:sofai} {{input=@{character_name} rolls 3d6+3B!  \n\n [[( [[ 3 + 3 ]] )d6kh3sd - @{injuries} - @{fatigue} ]] }}">3d6+3B</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                </div>                

                <div style="height: 4px;">&emsp;</div>

                <!-- Agility -->
                <div class="sheet-2colrow">
                    <div class="sheet-col sheet-characteristics">
                        <div class="sheet-2colrow">
                            <div class="sheet-col">
                                <div class="unnatural_box">
                                    <input name="attr_agility" class="unnaturaltext" type="text" value="2">
                                    <input type='number' name='attr_agility-passive' class='sheet-unnatural'
                                        value='@{agility} * 4' disabled="true" />
                                </div>
                            </div>
                            <div class="sheet-col">
                                <button type='roll' class='sheet-characteristics' name='attr_agility-roll'
                                    value='&{template:sofai} {{input=**@{character_name} tests Agility!** \n\n [[ ( [[ @{agility} + ?{Bonus Dice|0}]] )d6dl( [[ ?{Bonus Dice|0} + @{wounds} + ?{Penalty Dice|0} ]] ) - @{injuries} - @{fatigue} ]] }}'><label
                                        style="vertical-align: middle;">Agility</label></button>
                            </div>
                        </div>
                    </div>
                    <div class="sheet-col sheet-Specialty">
                        <div style="height: 50px !important;">
                            <input type="checkbox" name="attr_agilitySpecialty_Open" class="sheet-Specialty" value="1"
                                checked /><span></span>
                        </div>
                        <input type="checkbox" name="attr_agilitySpecialty_Open" class="sheet-hidden sheet-hider"
                            value="1" style="height: 0px !important;" checked />
                        <div class="sheet-body" style="position: relative; left: -100px;">
                            <div class="sheet-row">
                                <div class="sheet-item" style="width: 15%;"><input type='number'
                                        style="font-weight: bold; text-align: center;" name='attr_agilityAcrobatics'
                                        value='0' /></div>
                                <div class="sheet-item" style="width: 85%;"><button type='roll'
                                        class="sheet-specialtyRoll" name="roll_agilityAcrobatics"
                                        value="&{template:sofai} {{input=**@{character_name} tests Agility (Acrobatics)!** \n\n [[ ( [[ @{agility} + @{agilityAcrobatics} + ?{Bonus Dice|0} ]] )d6dl( [[ @{agilityAcrobatics} + ?{Bonus Dice|0} + @{wounds} + ?{Penalty Dice|0} ]] ) - @{injuries} - @{fatigue} ]] }}">Acrobatics</button>
                                </div>
                            </div>
                            <div class="sheet-row">
                                <div class="sheet-item" style="width: 15%;"><input type='number'
                                        style="font-weight: bold; text-align: center;" name='attr_agilityBalance'
                                        value='0' /></div>
                                <div class="sheet-item" style="width: 85%;"><button type='roll'
                                        class="sheet-specialtyRoll" name="roll_agilityBalance"
                                        value="&{template:sofai} {{input=**@{character_name} tests Agility (Balance)!** \n\n [[ ( [[ @{agility} + @{agilityBalance} + ?{Bonus Dice|0} ]] )d6dl( [[ @{agilityBalance} + ?{Bonus Dice|0} + @{wounds} + ?{Penalty Dice|0} ]] }}">Balance</button>
                                </div>
                            </div>
                            <div class="sheet-row">
                                <div class="sheet-item" style="width: 15%;"><input type='number'
                                        style="font-weight: bold; text-align: center;" name='attr_agilityContortions'
                                        value='0' /></div>
                                <div class="sheet-item" style="width: 85%;"><button type='roll'
                                        class="sheet-specialtyRoll" name="roll_agilityContortions"
                                        value="&{template:sofai} {{input=**@{character_name} tests Agility (Contortions)!** \n\n [[ ( [[ @{agility} + @{agilityContortions} + ?{Bonus Dice|0} ]] )d6dl( [[ @{agilityContortions} + ?{Bonus Dice|0} + @{wounds} + ?{Penalty Dice|0} ]] ) - @{injuries} - @{fatigue} ]] }}">Contortions</button>
                                </div>
                            </div>
                            <div class="sheet-row">
                                <div class="sheet-item" style="width: 15%;"><input type='number'
                                        style="font-weight: bold; text-align: center;" name='attr_agilityDodge'
                                        value='0' /></div>
                                <div class="sheet-item" style="width: 85%;"><button type='roll'
                                        class="sheet-specialtyRoll" name="roll_agilityDodge"
                                        value="&{template:sofai} {{input=**@{character_name} tests Agility (Dodge)!** \n\n [[ ( [[ @{agility} + @{agilityDodge} + ?{Bonus Dice|0} ]] )d6dl( [[ @{agilityDodge} + ?{Bonus Dice|0} + @{wounds} + ?{Penalty Dice|0} ]] ) - @{injuries} - @{fatigue} ]] }}">Dodge</button>
                                </div>
                            </div>
                            <div class="sheet-row">
                                <div class="sheet-item" style="width: 15%;"><input type='number'
                                        style="font-weight: bold; text-align: center;" name='attr_agilityQuickness'
                                        value='0' /></div>
                                <div class="sheet-item" style="width: 85%;"><button type='roll'
                                        class="sheet-specialtyRoll" name="roll_agilityQuickness"
                                        value="&{template:sofai} {{input=**@{character_name} tests Agility (Quickness)!** \n\n [[ ( [[ @{agility} + @{agilityQuickness} + ?{Bonus Dice|0} ]] )d6dl( [[ @{agilityQuickness} + ?{Bonus Dice|0} + @{wounds} + ?{Penalty Dice|0} ]] ) - @{injuries} - @{fatigue} ]] }}">Quickness</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div style="height: 4px;">&emsp;</div>

                <!-- Animal Handling -->

                <div class="sheet-2colrow">
                    <div class="sheet-col sheet-characteristics">
                        <div class="sheet-2colrow">
                            <div class="sheet-col">
                                <div class="unnatural_box">
                                    <input name="attr_animalhandling" class="unnaturaltext" type="text" value="2">
                                    <input type='number' name='attr_animalhandling-passive' class='sheet-unnatural'
                                        value='@{animalhandling} * 4' disabled="true" />
                                </div>
                            </div>
                            <div class="sheet-col">
                                <button type='roll' class='sheet-characteristics' name='attr_animalhandling-roll'
                                    value='&{template:sofai} {{input=**@{character_name} tests Animal Handling!** \n\n [[ ( [[ @{animalhandling} + ?{Bonus Dice|0} ]] )d6dl( [[ ?{Bonus Dice|0} + @{wounds} + ?{Penalty Dice|0} ]] ) - @{injuries} - @{fatigue} ]] }}'><label
                                        style="vertical-align: middle;">Animal Handling</label></button>
                            </div>
                        </div>
                    </div>
                    <div class="sheet-col sheet-Specialty">
                        <div style="height: 50px !important;">
                            <input type="checkbox" name="attr_animalhandlingSpecialty_Open" class="sheet-Specialty"
                                value="1" checked /><span></span>
                        </div>
                        <input type="checkbox" name="attr_animalhandlingSpecialty_Open" class="sheet-hidden sheet-hider"
                            value="1" style="height: 0px !important;" checked />
                        <div class="sheet-body" style="position: relative; left: -100px;">
                            <div class="sheet-row">
                                <div class="sheet-item" style="width: 15%;"><input type='number'
                                        style="font-weight: bold; text-align: center;" name='attr_animalhandlingCharm'
                                        value='0' /></div>
                                <div class="sheet-item" style="width: 85%;"><button type='roll'
                                        class="sheet-specialtyRoll" name="roll_animalhandlingCharm"
                                        value="&{template:sofai} {{input=**@{character_name} tests Animal Handling (Charm)!** \n\n [[ ( [[ @{animalhandling} + @{animalhandlingCharm} + ?{Bonus Dice|0} ]] )d6dl( [[ @{animalhandlingCharm} + ?{Bonus Dice|0} + @{wounds} + ?{Penalty Dice|0} ]] ) - @{injuries} - @{fatigue} ]] }}">Charm</button>
                                </div>
                            </div>
                            <div class="sheet-row">
                                <div class="sheet-item" style="width: 15%;"><input type='number'
                                        style="font-weight: bold; text-align: center;" name='attr_animalhandlingDrive'
                                        value='0' /></div>
                                <div class="sheet-item" style="width: 85%;"><button type='roll'
                                        class="sheet-specialtyRoll" name="roll_animalhandlingDrive"
                                        value="&{template:sofai} {{input=**@{character_name} tests Animal Handling (Drive)!** \n\n [[ ( [[ @{animalhandling} + @{animalhandlingDrive} + ?{Bonus Dice|0} ]] )d6dl( [[ @{animalhandlingDrive} + ?{Bonus Dice|0} + @{wounds} + ?{Penalty Dice|0} ]] ) - @{injuries} - @{fatigue} ]] }}">Drive</button>
                                </div>
                            </div>
                            <div class="sheet-row">
                                <div class="sheet-item" style="width: 15%;"><input type='number'
                                        style="font-weight: bold; text-align: center;" name='attr_animalhandlingRide'
                                        value='0' /></div>
                                <div class="sheet-item" style="width: 85%;"><button type='roll'
                                        class="sheet-specialtyRoll" name="roll_animalhandlingRide"
                                        value="&{template:sofai} {{input=**@{character_name} tests Animal Handling (Ride)!** \n\n [[ ( [[ @{animalhandling} + @{animalhandlingRide} + ?{Bonus Dice|0} ]] )d6dl( [[ @{animalhandlingRide} + ?{Bonus Dice|0} + @{wounds} + ?{Penalty Dice|0} ]] ) - @{injuries} - @{fatigue} ]] }}">Ride</button>
                                </div>
                            </div>
                            <div class="sheet-row">
                                <div class="sheet-item" style="width: 15%;"><input type='number'
                                        style="font-weight: bold; text-align: center;" name='attr_animalhandlingTrain'
                                        value='0' /></div>
                                <div class="sheet-item" style="width: 85%;"><button type='roll'
                                        class="sheet-specialtyRoll" name="roll_animalhandlingTrain"
                                        value="&{template:sofai} {{input=**@{character_name} tests Animal Handling (Train)!** \n\n [[ ( [[ @{animalhandling} + @{animalhandlingTrain} + ?{Bonus Dice|0} ]] )d6dl( [[ @{animalhandlingTrain} + ?{Bonus Dice|0} + @{wounds} + ?{Penalty Dice|0} ]] ) - @{injuries} - @{fatigue} ]] }}">Train</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div style="height: 4px;">&emsp;</div>

                <!-- Athletics -->

                <div class="sheet-2colrow">
                    <div class="sheet-col sheet-characteristics">
                        <div class="sheet-2colrow">
                            <div class="sheet-col">
                                <div class="unnatural_box">
                                    <input name="attr_athletics" class="unnaturaltext" type="text" value="2">
                                    <input type='number' name='attr_athletics-passive' class='sheet-unnatural'
                                        value='@{athletics} * 4' disabled="true" />
                                </div>
                            </div>
                            <div class="sheet-col">
                                <button type='roll' class='sheet-characteristics' name='attr_athletics-roll'
                                    value='&{template:sofai} {{input=**@{character_name} tests Athletics!** \n\n [[ ( [[ @{athletics} + ?{Bonus Dice|0} ]] )d6dl( [[ ?{Bonus Dice|0} + @{wounds} + ?{Penalty Dice|0} ]] ) - @{injuries} - @{fatigue} ]] }}'><label
                                        style="vertical-align: middle;">Athletics</label></button>
                            </div>
                        </div>
                    </div>
                    <div class="sheet-col sheet-Specialty">
                        <div style="height: 50px !important;">
                            <input type="checkbox" name="attr_athleticsSpecialty_Open" class="sheet-Specialty" value="1"
                                checked /><span></span>
                        </div>
                        <input type="checkbox" name="attr_athleticsSpecialty_Open" class="sheet-hidden sheet-hider"
                            value="1" style="height: 0px !important;" checked />
                        <div class="sheet-body" style="position: relative; left: -100px;">
                            <div class="sheet-row">
                                <div class="sheet-item" style="width: 15%;"><input type='number'
                                        style="font-weight: bold; text-align: center;" name='attr_athleticsClimb'
                                        value='0' /></div>
                                <div class="sheet-item" style="width: 85%;"><button type='roll'
                                        class="sheet-specialtyRoll" name="roll_athleticsClimb"
                                        value="&{template:sofai} {{input=**@{character_name} tests Athletics (Climb)!** \n\n [[ ( [[ @{athletics} + @{athleticsClimb} + ?{Bonus Dice|0} ]] )d6dl( [[ @{athleticsClimb} + ?{Bonus Dice|0} + @{wounds} + ?{Penalty Dice|0} ]] ) - @{injuries} - @{fatigue} ]] }}">Climb</button>
                                </div>
                            </div>
                            <div class="sheet-row">
                                <div class="sheet-item" style="width: 15%;"><input type='number'
                                        style="font-weight: bold; text-align: center;" name='attr_athleticsJump'
                                        value='0' /></div>
                                <div class="sheet-item" style="width: 85%;"><button type='roll'
                                        class="sheet-specialtyRoll" name="roll_athleticsJump"
                                        value="&{template:sofai} {{input=**@{character_name} tests Athletics (Jump)!** \n\n [[ ( [[ @{athletics} + @{athleticsJump} + ?{Bonus Dice|0} ]] )d6dl( [[ @{athleticsJump} + ?{Bonus Dice|0} + @{wounds} + ?{Penalty Dice|0} ]] ) - @{injuries} - @{fatigue} ]] }}">Jump</button>
                                </div>
                            </div>
                            <div class="sheet-row">
                                <div class="sheet-item" style="width: 15%;"><input type='number'
                                        style="font-weight: bold; text-align: center;" name='attr_athleticsRun'
                                        value='0' /></div>
                                <div class="sheet-item" style="width: 85%;"><button type='roll'
                                        class="sheet-specialtyRoll" name="roll_athleticsRun"
                                        value="&{template:sofai} {{input=**@{character_name} tests Athletics (Run)!** \n\n [[ ( [[ @{athletics} + @{athleticsRun} + ?{Bonus Dice|0} ]] )d6dl( [[ @{athleticsRun} + ?{Bonus Dice|0} + @{wounds} + ?{Penalty Dice|0} ]] ) - @{injuries} - @{fatigue} ]] }}">Run</button>
                                </div>
                            </div>
                            <div class="sheet-row">
                                <div class="sheet-item" style="width: 15%;"><input type='number'
                                        style="font-weight: bold; text-align: center;" name='attr_athleticsStrength'
                                        value='0' /></div>
                                <div class="sheet-item" style="width: 85%;"><button type='roll'
                                        class="sheet-specialtyRoll" name="roll_athleticsStrength"
                                        value="&{template:sofai} {{input=**@{character_name} tests Athletics (Strength)!** \n\n [[ ( [[ @{athletics} + @{athleticsStrength} + ?{Bonus Dice|0} ]] )d6dl( [[ @{athleticsStrength} + ?{Bonus Dice|0} + @{wounds} + ?{Penalty Dice|0} ]] ) - @{injuries} - @{fatigue} ]] }}">Strength</button>
                                </div>
                            </div>
                            <div class="sheet-row">
                                <div class="sheet-item" style="width: 15%;"><input type='number'
                                        style="font-weight: bold; text-align: center;" name='attr_athleticsSwim'
                                        value='0' /></div>
                                <div class="sheet-item" style="width: 85%;"><button type='roll'
                                        class="sheet-specialtyRoll" name="roll_athleticsSwim"
                                        value="&{template:sofai} {{input=**@{character_name} tests Athletics (Swim)!** \n\n [[ ( [[ @{athletics} + @{athleticsSwim} + ?{Bonus Dice|0} ]] )d6dl( [[ @{athleticsSwim} + ?{Bonus Dice|0} + @{wounds} + ?{Penalty Dice|0} ]] ) - @{injuries} - @{fatigue} ]] }}">Swim</button>
                                </div>
                            </div>
                            <div class="sheet-row">
                                <div class="sheet-item" style="width: 15%;"><input type='number'
                                        style="font-weight: bold; text-align: center;" name='attr_athleticsThrow'
                                        value='0' /></div>
                                <div class="sheet-item" style="width: 85%;"><button type='roll'
                                        class="sheet-specialtyRoll" name="roll_athleticsThrow"
                                        value="&{template:sofai} {{input=**@{character_name} tests Athletics (Throw)!** \n\n [[ ( [[ @{athletics} + @{athleticsThrow} + ?{Bonus Dice|0} ]] )d6dl( [[ @{athleticsThrow} + ?{Bonus Dice|0} + @{wounds} + ?{Penalty Dice|0} ]] ) - @{injuries} - @{fatigue} ]] }}">Throw</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>


                <div style="height: 4px;">&emsp;</div>

                <!-- Awareness -->

                <div class="sheet-2colrow">
                    <div class="sheet-col sheet-characteristics">
                        <div class="sheet-2colrow">
                            <div class="sheet-col">
                                <div class="unnatural_box">
                                    <input name="attr_awareness" class="unnaturaltext" type="text" value="2">
                                    <input type='number' name='attr_awareness-passive' class='sheet-unnatural'
                                        value='@{awareness} * 4' disabled="true" />
                                </div>
                            </div>
                            <div class="sheet-col">
                                <button type='roll' class='sheet-characteristics' name='attr_awareness-roll'
                                    value='&{template:sofai} {{input=**@{character_name} tests Awareness!** \n\n [[ ( [[ @{awareness} + ?{Bonus Dice|0} ]] )d6dl( [[ ?{Bonus Dice|0} + @{wounds} + ?{Penalty Dice|0} ]] ) - @{injuries} - @{fatigue} ]] }}'><label
                                        style="vertical-align: middle;">Awareness</label></button>
                            </div>
                        </div>
                    </div>
                    <div class="sheet-col sheet-Specialty">
                        <div style="height: 50px !important;">
                            <input type="checkbox" name="attr_awarenessSpecialty_Open" class="sheet-Specialty" value="1"
                                checked /><span></span>
                        </div>
                        <input type="checkbox" name="attr_awarenessSpecialty_Open" class="sheet-hidden sheet-hider"
                            value="1" style="height: 0px !important;" checked />
                        <div class="sheet-body" style="position: relative; left: -100px;">
                            <div class="sheet-row">
                                <div class="sheet-item" style="width: 15%;"><input type='number'
                                        style="font-weight: bold; text-align: center;" name='attr_awarenessEmpathy'
                                        value='0' /></div>
                                <div class="sheet-item" style="width: 85%;"><button type='roll'
                                        class="sheet-specialtyRoll" name="roll_awarenessEmpathy"
                                        value="&{template:sofai} {{input=**@{character_name} tests Awareness (Empathy)!** \n\n [[ ( [[ @{awareness} + @{awarenessEmpathy} + ?{Bonus Dice|0} ]] )d6dl( [[ @{awarenessEmpathy} + ?{Bonus Dice|0} + @{wounds} + ?{Penalty Dice|0} ]] ) - @{injuries} - @{fatigue} ]] }}">Empathy</button>
                                </div>
                            </div>
                            <div class="sheet-row">
                                <div class="sheet-item" style="width: 15%;"><input type='number'
                                        style="font-weight: bold; text-align: center;" name='attr_awarenessNotice'
                                        value='0' /></div>
                                <div class="sheet-item" style="width: 85%;"><button type='roll'
                                        class="sheet-specialtyRoll" name="roll_awarenessNotice"
                                        value="&{template:sofai} {{input=**@{character_name} tests Awareness (Notice)!** \n\n [[ ( [[ @{awareness} + @{awarenessNotice} + ?{Bonus Dice|0} ]] )d6dl( [[ @{awarenessNotice} + ?{Bonus Dice|0} + @{wounds} + ?{Penalty Dice|0} ]] ) - @{injuries} - @{fatigue} ]] }}">Notice</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div style="height: 4px;">&emsp;</div>

                <!-- Cunning -->

                <div class="sheet-2colrow">
                    <div class="sheet-col sheet-characteristics">
                        <div class="sheet-2colrow">
                            <div class="sheet-col">
                                <div class="unnatural_box">
                                    <input name="attr_cunning" class="unnaturaltext" type="text" value="2">
                                    <input type='number' name='attr_cunning-passive' class='sheet-unnatural'
                                        value='@{cunning} * 4' disabled="true" />
                                </div>
                            </div>
                            <div class="sheet-col">
                                <button type='roll' class='sheet-characteristics' name='attr_cunning-roll'
                                    value='&{template:sofai} {{input=**@{character_name} tests Cunning!** \n\n [[ ( [[ @{cunning} + ?{Bonus Dice|0} ]] )d6dl( [[ ?{Bonus Dice|0} + @{wounds} + ?{Penalty Dice|0} ]] ) - @{injuries} - @{fatigue} ]] }}'><label
                                        style="vertical-align: middle;">Cunning</label></button>
                            </div>
                        </div>
                    </div>
                    <div class="sheet-col sheet-Specialty">
                        <div style="height: 50px !important;">
                            <input type="checkbox" name="attr_cunningSpecialty_Open" class="sheet-Specialty" value="1"
                                checked /><span></span>
                        </div>
                        <input type="checkbox" name="attr_cunningSpecialty_Open" class="sheet-hidden sheet-hider"
                            value="1" style="height: 0px !important;" checked />
                        <div class="sheet-body" style="position: relative; left: -100px;">
                            <div class="sheet-row">
                                <div class="sheet-item" style="width: 15%;"><input type='number'
                                        style="font-weight: bold; text-align: center;" name='attr_cunningDecipher'
                                        value='0' /></div>
                                <div class="sheet-item" style="width: 85%;"><button type='roll'
                                        class="sheet-specialtyRoll" name="roll_cunningDecipher"
                                        value="&{template:sofai} {{input=**@{character_name} tests Cunning (Decipher)!** \n\n [[ ( [[ @{cunning} + @{cunningDecipher} + ?{Bonus Dice|0} ]] )d6dl( [[ @{cunningDecipher} + ?{Bonus Dice|0} + @{wounds} + ?{Penalty Dice|0} ]] ) - @{injuries} - @{fatigue} ]] }}">Decipher</button>
                                </div>
                            </div>
                            <div class="sheet-row">
                                <div class="sheet-item" style="width: 15%;"><input type='number'
                                        style="font-weight: bold; text-align: center;" name='attr_cunningLogic'
                                        value='0' /></div>
                                <div class="sheet-item" style="width: 85%;"><button type='roll'
                                        class="sheet-specialtyRoll" name="roll_cunningLogic"
                                        value="&{template:sofai} {{input=**@{character_name} tests Cunning (Logic)!** \n\n [[ ( [[ @{cunning} + @{cunningLogic} + ?{Bonus Dice|0} ]] )d6dl( [[ @{cunningLogic} + ?{Bonus Dice|0} + @{wounds} + ?{Penalty Dice|0} ]] ) - @{injuries} - @{fatigue} ]] }}">Logic</button>
                                </div>
                            </div>
                            <div class="sheet-row">
                                <div class="sheet-item" style="width: 15%;"><input type='number'
                                        style="font-weight: bold; text-align: center;" name='attr_cunningMemory'
                                        value='0' /></div>
                                <div class="sheet-item" style="width: 85%;"><button type='roll'
                                        class="sheet-specialtyRoll" name="roll_cunningMemory"
                                        value="&{template:sofai} {{input=**@{character_name} tests Cunning (Memory)!** \n\n [[ ( [[ @{cunning} + @{cunningMemory} + ?{Bonus Dice|0} ]] )d6dl( [[ @{cunningMemory} + ?{Bonus Dice|0} + @{wounds} + ?{Penalty Dice|0} ]] ) - @{injuries} - @{fatigue} ]] }}">Memory</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div style="height: 4px;">&emsp;</div>

                <!-- Deception -->

                <div class="sheet-2colrow">
                    <div class="sheet-col sheet-characteristics">
                        <div class="sheet-2colrow">
                            <div class="sheet-col">
                                <div class="unnatural_box">
                                    <input name="attr_deception" class="unnaturaltext" type="text" value="2">
                                    <input type='number' name='attr_deception-passive' class='sheet-unnatural'
                                        value='@{deception} * 4' disabled="true" />
                                </div>
                            </div>
                            <div class="sheet-col">
                                <button type='roll' class='sheet-characteristics' name='attr_deception-roll'
                                    value='&{template:sofai} {{input=**@{character_name} tests Deception!** \n\n [[ ( [[ @{deception} + ?{Bonus Dice|0} ]] )d6dl( [[ ?{Bonus Dice|0} + @{wounds} + ?{Penalty Dice|0} ]] ) - @{injuries} - @{fatigue} ]] }}'><label
                                        style="vertical-align: middle;">Deception</label></button>
                            </div>
                        </div>
                    </div>
                    <div class="sheet-col sheet-Specialty">
                        <div style="height: 50px !important;">
                            <input type="checkbox" name="attr_deceptionSpecialty_Open" class="sheet-Specialty" value="1"
                                checked /><span></span>
                        </div>
                        <input type="checkbox" name="attr_deceptionSpecialty_Open" class="sheet-hidden sheet-hider"
                            value="1" style="height: 0px !important;" checked />
                        <div class="sheet-body" style="position: relative; left: -100px;">
                            <div class="sheet-row">
                                <div class="sheet-item" style="width: 15%;"><input type='number'
                                        style="font-weight: bold; text-align: center;" name='attr_deceptionAct'
                                        value='0' /></div>
                                <div class="sheet-item" style="width: 85%;"><button type='roll'
                                        class="sheet-specialtyRoll" name="roll_deceptionAct"
                                        value="&{template:sofai} {{input=**@{character_name} tests Deception (Act)!** \n\n [[ ( [[ @{deception} + @{deceptionAct} + ?{Bonus Dice|0} ]] )d6dl( [[ @{deceptionAct} + ?{Bonus Dice|0} + @{wounds} + ?{Penalty Dice|0} ]] ) - @{injuries} - @{fatigue} ]] }}">Act</button>
                                </div>
                            </div>
                            <div class="sheet-row">
                                <div class="sheet-item" style="width: 15%;"><input type='number'
                                        style="font-weight: bold; text-align: center;" name='attr_deceptionBluff'
                                        value='0' /></div>
                                <div class="sheet-item" style="width: 85%;"><button type='roll'
                                        class="sheet-specialtyRoll" name="roll_deceptionBluff"
                                        value="&{template:sofai} {{input=**@{character_name} tests Deception (Bluff)!** \n\n [[ ( [[ @{deception} + @{deceptionBluff} + ?{Bonus Dice|0} ]] )d6dl( [[ @{deceptionBluff} + ?{Bonus Dice|0} + @{wounds} + ?{Penalty Dice|0} ]] ) - @{injuries} - @{fatigue} ]] }}">Bluff</button>
                                </div>
                            </div>
                            <div class="sheet-row">
                                <div class="sheet-item" style="width: 15%;"><input type='number'
                                        style="font-weight: bold; text-align: center;" name='attr_deceptionCheat'
                                        value='0' /></div>
                                <div class="sheet-item" style="width: 85%;"><button type='roll'
                                        class="sheet-specialtyRoll" name="roll_deceptionCheat"
                                        value="&{template:sofai} {{input=**@{character_name} tests Deception (Cheat)!** \n\n [[ ( [[ @{deception} + @{deceptionCheat} + ?{Bonus Dice|0} ]] )d6dl( [[ @{deceptionCheat} + ?{Bonus Dice|0} + @{wounds} + ?{Penalty Dice|0} ]] ) - @{injuries} - @{fatigue} ]] }}">Cheat</button>
                                </div>
                            </div>
                            <div class="sheet-row">
                                <div class="sheet-item" style="width: 15%;"><input type='number'
                                        style="font-weight: bold; text-align: center;" name='attr_deceptionDisguise'
                                        value='0' /></div>
                                <div class="sheet-item" style="width: 85%;"><button type='roll'
                                        class="sheet-specialtyRoll" name="roll_deceptionDisguise"
                                        value="&{template:sofai} {{input=**@{character_name} tests Deception (Disguise)!** \n\n [[ ( [[ @{deception} + @{deceptionDisguise} + ?{Bonus Dice|0} ]] )d6dl( [[ @{deceptionDisguise} + ?{Bonus Dice|0} + @{wounds} + ?{Penalty Dice|0} ]] ) - @{injuries} - @{fatigue} ]] }}">Disguise</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div style="height: 4px;">&emsp;</div>

                <!-- Endurance -->

                <div class="sheet-2colrow">
                    <div class="sheet-col sheet-characteristics">
                        <div class="sheet-2colrow">
                            <div class="sheet-col">
                                <div class="unnatural_box">
                                    <input name="attr_endurance" class="unnaturaltext" type="text" value="2">
                                    <input type='number' name='attr_endurance-passive' class='sheet-unnatural'
                                        value='@{endurance} * 4' disabled="true" />
                                </div>
                            </div>
                            <div class="sheet-col">
                                <button type='roll' class='sheet-characteristics' name='attr_endurance-roll'
                                    value='&{template:sofai} {{input=**@{character_name} tests Endurance!** \n\n [[ ( [[ @{endurance} + ?{Bonus Dice|0} ]] )d6dl( [[ ?{Bonus Dice|0} + @{wounds} + ?{Penalty Dice|0} ]] ) - @{injuries} - @{fatigue} ]] }}'><label
                                        style="vertical-align: middle;">Endurance</label></button>
                            </div>
                        </div>
                    </div>
                    <div class="sheet-col sheet-Specialty">
                        <div style="height: 50px !important;">
                            <input type="checkbox" name="attr_enduranceSpecialty_Open" class="sheet-Specialty" value="1"
                                checked /><span></span>
                        </div>
                        <input type="checkbox" name="attr_enduranceSpecialty_Open" class="sheet-hidden sheet-hider"
                            value="1" style="height: 0px !important;" checked />
                        <div class="sheet-body" style="position: relative; left: -100px;">
                            <div class="sheet-row">
                                <div class="sheet-item" style="width: 15%;"><input type='number'
                                        style="font-weight: bold; text-align: center;" name='attr_enduranceResilience'
                                        value='0' /></div>
                                <div class="sheet-item" style="width: 85%;"><button type='roll'
                                        class="sheet-specialtyRoll" name="roll_enduranceResilience"
                                        value="&{template:sofai} {{input=**@{character_name} tests Endurance (Resilience)!** \n\n [[ ( [[ @{endurance} + @{enduranceResilience} + ?{Bonus Dice|0} ]] )d6dl( [[ @{enduranceResilience} + ?{Bonus Dice|0} + @{wounds} + ?{Penalty Dice|0} ]] ) - @{injuries} - @{fatigue} ]] }}">Resilience</button>
                                </div>
                            </div>
                            <div class="sheet-row">
                                <div class="sheet-item" style="width: 15%;"><input type='number'
                                        style="font-weight: bold; text-align: center;" name='attr_enduranceStamina'
                                        value='0' /></div>
                                <div class="sheet-item" style="width: 85%;"><button type='roll'
                                        class="sheet-specialtyRoll" name="roll_enduranceStamina"
                                        value="&{template:sofai} {{input=**@{character_name} tests Endurance (Stamina)!** \n\n [[ ( [[ @{endurance} + @{enduranceStamina} + ?{Bonus Dice|0} ]] )d6dl( [[ @{enduranceStamina} + ?{Bonus Dice|0} + @{wounds} + ?{Penalty Dice|0} ]] ) - @{injuries} - @{fatigue} ]] }}">Stamina</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div style="height: 4px;">&emsp;</div>

                <!-- Fighting -->

                <div class="sheet-2colrow">
                    <div class="sheet-col sheet-characteristics">
                        <div class="sheet-2colrow">
                            <div class="sheet-col">
                                <div class="unnatural_box">
                                    <input name="attr_fighting" class="unnaturaltext" type="text" value="2">
                                    <input type='number' name='attr_fighting-passive' class='sheet-unnatural'
                                        value='@{fighting} * 4' disabled="true" />
                                </div>
                            </div>
                            <div class="sheet-col">
                                <button type='roll' class='sheet-characteristics' name='attr_fighting-roll'
                                    value='&{template:sofai} {{input=**@{character_name} tests Fighting!** \n\n [[ ( [[ @{fighting} + ?{Bonus Dice|0} ]] )d6dl( [[ ?{Bonus Dice|0} + @{wounds} + ?{Penalty Dice|0} ]] ) - @{injuries} - @{fatigue} ]] }}'><label
                                        style="vertical-align: middle;">Fighting</label></button>
                            </div>
                        </div>
                    </div>
                    <div class="sheet-col sheet-Specialty">
                        <div style="height: 50px !important;">
                            <input type="checkbox" name="attr_fightingSpecialty_Open" class="sheet-Specialty" value="1"
                                checked /><span></span>
                        </div>
                        <input type="checkbox" name="attr_fightingSpecialty_Open" class="sheet-hidden sheet-hider"
                            value="1" style="height: 0px !important;" checked />
                        <div class="sheet-body" style="position: relative; left: -100px;">
                            <div class="sheet-row">
                                <div class="sheet-item" style="width: 15%;"><input type='number'
                                        style="font-weight: bold; text-align: center;" name='attr_fightingAxes'
                                        value='0' /></div>
                                <div class="sheet-item" style="width: 85%;"><button type='roll'
                                        class="sheet-specialtyRoll" name="roll_fightingAxes"
                                        value="&{template:sofai} {{input=**@{character_name} tests Fighting (Axes)!** \n\n [[ ( [[ @{fighting} + @{fightingAxes} + ?{Bonus Dice|0} ]] )d6dl( [[ @{fightingAxes} + ?{Bonus Dice|0} + @{wounds} + ?{Penalty Dice|0} ]] ) - @{injuries} - @{fatigue} ]] }}">Axes</button>
                                </div>
                            </div>
                            <div class="sheet-row">
                                <div class="sheet-item" style="width: 15%;"><input type='number'
                                        style="font-weight: bold; text-align: center;" name='attr_fightingBludgeons'
                                        value='0' /></div>
                                <div class="sheet-item" style="width: 85%;"><button type='roll'
                                        class="sheet-specialtyRoll" name="roll_fightingBludgeons"
                                        value="&{template:sofai} {{input=**@{character_name} tests Fighting (Bludgeons)!** \n\n [[ ( [[ @{fighting} + @{fightingBludgeons} + ?{Bonus Dice|0} ]] )d6dl( [[ @{fightingBludgeons} + ?{Bonus Dice|0} + @{wounds} + ?{Penalty Dice|0} ]] ) - @{injuries} - @{fatigue} ]] }}">Bludgeons</button>
                                </div>
                            </div>
                            <div class="sheet-row">
                                <div class="sheet-item" style="width: 15%;"><input type='number'
                                        style="font-weight: bold; text-align: center;" name='attr_fightingBrawling'
                                        value='0' /></div>
                                <div class="sheet-item" style="width: 85%;"><button type='roll'
                                        class="sheet-specialtyRoll" name="roll_fightingBrawling"
                                        value="&{template:sofai} {{input=**@{character_name} tests Fighting (Brawling)!** \n\n [[ ( [[ @{fighting} + @{fightingBrawling} + ?{Bonus Dice|0} ]] )d6dl( [[ @{fightingBrawling} + ?{Bonus Dice|0} + @{wounds} + ?{Penalty Dice|0} ]] ) - @{injuries} - @{fatigue} ]] }}">Brawling</button>
                                </div>
                            </div>
                            <div class="sheet-row">
                                <div class="sheet-item" style="width: 15%;"><input type='number'
                                        style="font-weight: bold; text-align: center;" name='attr_fightingFencing'
                                        value='0' /></div>
                                <div class="sheet-item" style="width: 85%;"><button type='roll'
                                        class="sheet-specialtyRoll" name="roll_fightingFencing"
                                        value="&{template:sofai} {{input=**@{character_name} tests Fighting (Fencing)!** \n\n [[ ( [[ @{fighting} + @{fightingFencing} + ?{Bonus Dice|0} ]] )d6dl( [[ @{fightingFencing} + ?{Bonus Dice|0} + @{wounds} + ?{Penalty Dice|0} ]] ) - @{injuries} - @{fatigue} ]] }}">Fencing</button>
                                </div>
                            </div>
                            <div class="sheet-row">
                                <div class="sheet-item" style="width: 15%;"><input type='number'
                                        style="font-weight: bold; text-align: center;" name='attr_fightingLongBlades'
                                        value='0' /></div>
                                <div class="sheet-item" style="width: 85%;"><button type='roll'
                                        class="sheet-specialtyRoll" name="roll_fightingLongBlades"
                                        value="&{template:sofai} {{input=**@{character_name} tests Fighting (Long Blades)!** \n\n [[ ( [[ @{fighting} + @{fightingLongBlades} + ?{Bonus Dice|0} ]] )d6dl( [[ @{fightingLongBlades} + ?{Bonus Dice|0} + @{wounds} + ?{Penalty Dice|0} ]] ) - @{injuries} - @{fatigue} ]] }}">Long
                                        Blades</button>
                                </div>
                            </div>
                            <div class="sheet-row">
                                <div class="sheet-item" style="width: 15%;"><input type='number'
                                        style="font-weight: bold; text-align: center;" name='attr_fightingPolearms'
                                        value='0' /></div>
                                <div class="sheet-item" style="width: 85%;"><button type='roll'
                                        class="sheet-specialtyRoll" name="roll_fightingPolearms"
                                        value="&{template:sofai} {{input=**@{character_name} tests Fighting (Polearms)!** \n\n [[ ( [[ @{fighting} + @{fightingPolearms} + ?{Bonus Dice|0} ]] )d6dl( [[ @{fightingPolearms} + ?{Bonus Dice|0} + @{wounds} + ?{Penalty Dice|0} ]] ) - @{injuries} - @{fatigue} ]] }}">Polearms</button>
                                </div>
                            </div>
                            <div class="sheet-row">
                                <div class="sheet-item" style="width: 15%;"><input type='number'
                                        style="font-weight: bold; text-align: center;" name='attr_fightingShields'
                                        value='0' /></div>
                                <div class="sheet-item" style="width: 85%;"><button type='roll'
                                        class="sheet-specialtyRoll" name="roll_fightingShields"
                                        value="&{template:sofai} {{input=**@{character_name} tests Fighting (Shields)!** \n\n [[ ( [[ @{fighting} + @{fightingShields} + ?{Bonus Dice|0} ]] )d6dl( [[ @{fightingShields} + ?{Bonus Dice|0} + @{wounds} + ?{Penalty Dice|0} ]] ) - @{injuries} - @{fatigue} ]] }}">Shields</button>
                                </div>
                            </div>
                            <div class="sheet-row">
                                <div class="sheet-item" style="width: 15%;"><input type='number'
                                        style="font-weight: bold; text-align: center;" name='attr_fightingShortBlades'
                                        value='0' /></div>
                                <div class="sheet-item" style="width: 85%;"><button type='roll'
                                        class="sheet-specialtyRoll" name="roll_fightingShortBlades"
                                        value="&{template:sofai} {{input=**@{character_name} tests Fighting (Short Blades)!** \n\n [[ ( [[ @{fighting} + @{fightingShortBlades} + ?{Bonus Dice|0} ]] )d6dl( [[ @{fightingShortBlades} + ?{Bonus Dice|0} + @{wounds} + ?{Penalty Dice|0} ]] ) - @{injuries} - @{fatigue} ]] }}">Short
                                        Blades</button>
                                </div>
                            </div>
                            <div class="sheet-row">
                                <div class="sheet-item" style="width: 15%;"><input type='number'
                                        style="font-weight: bold; text-align: center;" name='attr_fightingSpears'
                                        value='0' /></div>
                                <div class="sheet-item" style="width: 85%;"><button type='roll'
                                        class="sheet-specialtyRoll" name="roll_fightingSpears"
                                        value="&{template:sofai} {{input=**@{character_name} tests Fighting (Spears)!** \n\n [[ ( [[ @{fighting} + @{fightingSpears} + ?{Bonus Dice|0} ]] )d6dl( [[ @{fightingSpears} + ?{Bonus Dice|0} + @{wounds} + ?{Penalty Dice|0} ]] ) - @{injuries} - @{fatigue} ]] }}">Spears</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div style="height: 4px;">&emsp;</div>

                <!-- Healing -->

                <div class="sheet-2colrow">
                    <div class="sheet-col sheet-characteristics">
                        <div class="sheet-2colrow">
                            <div class="sheet-col">
                                <div class="unnatural_box">
                                    <input name="attr_healing" class="unnaturaltext" type="text" value="2">
                                    <input type='number' name='attr_healing-passive' class='sheet-unnatural'
                                        value='@{healing} * 4' disabled="true" />
                                </div>
                            </div>
                            <div class="sheet-col">
                                <button type='roll' class='sheet-characteristics' name='attr_healing-roll'
                                    value='&{template:sofai} {{input=**@{character_name} tests Healing!** \n\n [[ ( [[ @{healing} + ?{Bonus Dice|0} ]] )d6dl( [[ ?{Bonus Dice|0} + @{wounds} + ?{Penalty Dice|0} ]] ) - @{injuries} - @{fatigue} ]] }}'><label
                                        style="vertical-align: middle;">Healing</label></button>
                            </div>
                        </div>
                    </div>
                    <div class="sheet-col sheet-Specialty">
                        <div style="height: 50px !important;">
                            <input type="checkbox" name="attr_healingSpecialty_Open" class="sheet-Specialty" value="1"
                                checked /><span></span>
                        </div>
                        <input type="checkbox" name="attr_healingSpecialty_Open" class="sheet-hidden sheet-hider"
                            value="1" style="height: 0px !important;" checked />
                        <div class="sheet-body" style="position: relative; left: -100px;">
                            <div class="sheet-row">
                                <div class="sheet-item" style="width: 15%;"><input type='number'
                                        style="font-weight: bold; text-align: center;" name='attr_healingDiagnose'
                                        value='0' /></div>
                                <div class="sheet-item" style="width: 85%;"><button type='roll'
                                        class="sheet-specialtyRoll" name="roll_healingDiagnose"
                                        value="&{template:sofai} {{input=**@{character_name} tests Healing (Diagnose)!** \n\n [[ ( [[ @{healing} + @{healingDiagnose} + ?{Bonus Dice|0} ]] )d6dl( [[ @{healingDiagnose} + ?{Bonus Dice|0} + @{wounds} + ?{Penalty Dice|0} ]] ) - @{injuries} - @{fatigue} ]] }}">Diagnose</button>
                                </div>
                            </div>
                            <div class="sheet-row">
                                <div class="sheet-item" style="width: 15%;"><input type='number'
                                        style="font-weight: bold; text-align: center;" name='attr_healingTreatAilment'
                                        value='0' /></div>
                                <div class="sheet-item" style="width: 85%;"><button type='roll'
                                        class="sheet-specialtyRoll" name="roll_healingTreatAilment"
                                        value="&{template:sofai} {{input=**@{character_name} tests Healing(Treat Ailment)!** \n\n [[ ( [[ @{healing} + @{healingTreatAilment} + ?{Bonus Dice|0} ]] )d6dl( [[ @{healingTreatAilment} + ?{Bonus Dice|0} + @{wounds} + ?{Penalty Dice|0} ]] ) - @{injuries} - @{fatigue} ]] }}">Treat
                                        Ailment</button>
                                </div>
                            </div>
                            <div class="sheet-row">
                                <div class="sheet-item" style="width: 15%;"><input type='number'
                                        style="font-weight: bold; text-align: center;" name='attr_healingTreatInjury'
                                        value='0' /></div>
                                <div class="sheet-item" style="width: 85%;"><button type='roll'
                                        class="sheet-specialtyRoll" name="roll_healingTreatInjury"
                                        value="&{template:sofai} {{input=**@{character_name} tests Healing (Treat Injury)!** \n\n [[ ( [[ @{healing} + @{healingTreatInjury} + ?{Bonus Dice|0} ]] )d6dl( [[ @{healingTreatInjury} + ?{Bonus Dice|0} + @{wounds} + ?{Penalty Dice|0} ]] ) - @{injuries} - @{fatigue} ]] }}">Treat
                                        Injury</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                
            </div>


            <!-- Right ability column -->

            <div class="sheet-col">
                <div class="sheet-dhhr"></div>

                <!-- Language -->

                <div class="sheet-2colrow">
                    <div class="sheet-col sheet-characteristics">
                        <div class="sheet-2colrow">
                            <div class="sheet-col">
                                <div class="unnatural_box">
                                    <input name="attr_language" class="unnaturaltext" type="text" value="2">
                                    <input type='number' name='attr_language-passive' class='sheet-unnatural'
                                        value='@{language} * 4' disabled="true" />
                                </div>
                            </div>
                            <div class="sheet-col">
                                <button type='roll' class='sheet-characteristics' name='attr_language-roll'
                                    value='&{template:sofai} {{input=**@{character_name} tests Language!** \n\n [[ ( [[ @{language} + ?{Bonus Dice|0} ]] )d6dl( [[ ?{Bonus Dice|0} + @{wounds} + ?{Penalty Dice|0} ]] ) - @{injuries} - @{fatigue} ]] }}'><label
                                        style="vertical-align: middle;">Language</label></button>
                            </div>
                        </div>
                    </div>
                    <div class="sheet-col sheet-Specialty">
                        <div style="height: 50px !important;">
                            <input type="checkbox" name="attr_languageSpecialty_Open" class="sheet-Specialty" value="1"
                                checked /><span></span>
                        </div>
                        <input type="checkbox" name="attr_languageSpecialty_Open" class="sheet-hidden sheet-hider"
                            value="1" style="height: 0px !important;" checked />
                        <div class="sheet-body" style="position: relative; left: -100px;">
                            <fieldset class="repeating_languageKnown">
                                <div class="sheet-row">
                                    <div class="sheet-item" style="width: 15%;"><input type='number'
                                        style="font-weight: bold; text-align: center;" name='attr_knownLanguageRank'
                                        value='0' /></div>                                      
                                    <div class="sheet-item" style="width: 85%;"><input type='text' name='attr_languageKnown' value='' /></div>
                                </div>
                                <div class="sheet-row">
                                    <div class="sheet-item" style="width: 15%;"></div>
                                    <div class="sheet-item" style="width: 85%;"> <button type='roll' class='sheet-specialtyRoll' name='attr_languageRe-roll'
                                        value='&{template:sofai} {{input=**@{character_name} tests Language (@{languageKnown})!** \n\n [[ ( [[ @{language} + @{knownLanguageRank} + ?{Bonus Dice|0} ]] )d6dl( [[ @{language} + @{knownLanguageRank} + ?{Bonus Dice|0} + @{wounds} + ?{Penalty Dice|0} ]] ) - @{injuries} - @{fatigue} ]] }}'><label
                                            style="vertical-align: middle;">Roll</label></button></div>
                                </div>
                                <br/>
                            </fieldset>
                        </div>
                    </div>
                </div>                

                <div style="height: 4px;">&emsp;</div>

                <!-- Knowledge -->

                <div class="sheet-2colrow">
                    <div class="sheet-col sheet-characteristics">
                        <div class="sheet-2colrow">
                            <div class="sheet-col">
                                <div class="unnatural_box">
                                    <input name="attr_knowledge" class="unnaturaltext" type="text" value="2">
                                    <input type='number' name='attr_knowledge-passive' class='sheet-unnatural'
                                        value='@{knowledge} * 4' disabled="true" />
                                </div>
                            </div>
                            <div class="sheet-col">
                                <button type='roll' class='sheet-characteristics' name='attr_knowledge-roll'
                                    value='&{template:sofai} {{input=**@{character_name} tests Knowledge!** \n\n [[ ( [[ @{language} + @{languageX} + ?{Bonus Dice|0} ]] )d6dl( [[ @{languageX} + ?{Bonus Dice|0} + @{wounds} + ?{Penalty Dice|0} ]] ) - @{injuries} - @{fatigue} ]] }}'><label
                                        style="vertical-align: middle;">Knowledge</label></button>
                            </div>
                        </div>
                    </div>
                    <div class="sheet-col sheet-Specialty">
                        <div style="height: 50px !important;">
                            <input type="checkbox" name="attr_knowledgeSpecialty_Open" class="sheet-Specialty" value="1"
                                checked /><span></span>
                        </div>
                        <input type="checkbox" name="attr_knowledgeSpecialty_Open" class="sheet-hidden sheet-hider"
                            value="1" style="height: 0px !important;" checked />
                        <div class="sheet-body" style="position: relative; left: -100px;">
                            <div class="sheet-row">
                                <div class="sheet-item" style="width: 15%;"><input type='number'
                                        style="font-weight: bold; text-align: center;" name='attr_knowledgeEducation'
                                        value='0' /></div>
                                <div class="sheet-item" style="width: 85%;"><button type='roll'
                                        class="sheet-specialtyRoll" name="roll_knowledgeEducation"
                                        value="&{template:sofai} {{input=**@{character_name} tests Knowledge (Education)!** \n\n [[ ( [[ @{language} + @{languageEducation} + ?{Bonus Dice|0} ]] )d6dl( [[ @{languageEducation} + ?{Bonus Dice|0} + @{wounds} + ?{Penalty Dice|0} ]] ) - @{injuries} - @{fatigue} ]] }}">Education</button>
                                </div>
                            </div>
                            <div class="sheet-row">
                                <div class="sheet-item" style="width: 15%;"><input type='number'
                                        style="font-weight: bold; text-align: center;" name='attr_knowledgeResearch'
                                        value='0' /></div>
                                <div class="sheet-item" style="width: 85%;"><button type='roll'
                                        class="sheet-specialtyRoll" name="roll_knowledgeResearch"
                                        value="&{template:sofai} {{input=**@{character_name} tests Knowledge (Research)!** \n\n [[ ( [[ @{language} + @{languageResearch} + ?{Bonus Dice|0} ]] )d6dl( [[ @{languageResearch} + ?{Bonus Dice|0} + @{wounds} + ?{Penalty Dice|0} ]] ) - @{injuries} - @{fatigue} ]] }}">Research</button>
                                </div>
                            </div>
                            <div class="sheet-row">
                                <div class="sheet-item" style="width: 15%;"><input type='number'
                                        style="font-weight: bold; text-align: center;" name='attr_knowledgeStreetwise'
                                        value='0' /></div>
                                <div class="sheet-item" style="width: 85%;"><button type='roll'
                                        class="sheet-specialtyRoll" name="roll_knowledgeStreetwise"
                                        value="&{template:sofai} {{input=**@{character_name} tests Knowledge (Streetwise)!** \n\n [[ ( [[ @{language} + @{languageStreetwise} + ?{Bonus Dice|0} ]] )d6dl( [[ @{languageStreetwise} + ?{Bonus Dice|0} + @{wounds} + ?{Penalty Dice|0} ]] ) - @{injuries} - @{fatigue} ]] }}">Streetwise</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div style="height: 4px;">&emsp;</div>

                <!-- Marksmanship -->

                <div class="sheet-2colrow">
                    <div class="sheet-col sheet-characteristics">
                        <div class="sheet-2colrow">
                            <div class="sheet-col">
                                <div class="unnatural_box">
                                    <input name="attr_marksmanship" class="unnaturaltext" type="text" value="2">
                                    <input type='number' name='attr_marksmanship-passive' class='sheet-unnatural'
                                        value='@{marksmanship} * 4' disabled="true" />
                                </div>
                            </div>
                            <div class="sheet-col">
                                <button type='roll' class='sheet-characteristics' name='attr_marksmanship-roll'
                                    value='&{template:sofai} {{input=**@{character_name} tests Marksmanship!** \n\n [[ ( [[ @{marksmanship} + ?{Bonus Dice|0} ]] )d6dl( [[ ?{Bonus Dice|0} + @{wounds} + ?{Penalty Dice|0} ]] ) - @{injuries} - @{fatigue} ]] }}'><label
                                        style="vertical-align: middle;">Marksman- ship</label></button>
                            </div>
                        </div>
                    </div>
                    <div class="sheet-col sheet-Specialty">
                        <div style="height: 50px !important;">
                            <input type="checkbox" name="attr_marksmanshipSpecialty_Open" class="sheet-Specialty"
                                value="1" checked /><span></span>
                        </div>
                        <input type="checkbox" name="attr_marksmanshipSpecialty_Open" class="sheet-hidden sheet-hider"
                            value="1" style="height: 0px !important;" checked />
                        <div class="sheet-body" style="position: relative; left: -100px;">
                            <div class="sheet-row">
                                <div class="sheet-item" style="width: 15%;"><input type='number'
                                        style="font-weight: bold; text-align: center;" name='attr_marksmanshipBows'
                                        value='0' /></div>
                                <div class="sheet-item" style="width: 85%;"><button type='roll'
                                        class="sheet-specialtyRoll" name="roll_marksmanshipBows"
                                        value="&{template:sofai} {{input=**@{character_name} tests Marksmanship (Bows)!** \n\n [[ ( [[ @{marksmanship} + @{marksmanshipBows} + ?{Bonus Dice|0} ]] )d6dl( [[ @{marksmanshipBows} + ?{Bonus Dice|0} + @{wounds} + ?{Penalty Dice|0} ]] ) - @{injuries} - @{fatigue} ]] }}">Bows</button>
                                </div>
                            </div>
                            <div class="sheet-row">
                                <div class="sheet-item" style="width: 15%;"><input type='number'
                                        style="font-weight: bold; text-align: center;" name='attr_marksmanshipCrossbows'
                                        value='0' /></div>
                                <div class="sheet-item" style="width: 85%;"><button type='roll'
                                        class="sheet-specialtyRoll" name="roll_marksmanshipCrossbows"
                                        value="&{template:sofai} {{input=**@{character_name} tests Marksmanship (Crossbows)!** \n\n [[ ( [[ @{marksmanship} + @{marksmanshipCrossbows} + ?{Bonus Dice|0} ]] )d6dl( [[ @{marksmanshipCrossbows} + ?{Bonus Dice|0} + @{wounds} + ?{Penalty Dice|0} ]] ) - @{injuries} - @{fatigue} ]] }}">Crossbows</button>
                                </div>
                            </div>
                            <div class="sheet-row">
                                <div class="sheet-item" style="width: 15%;"><input type='number'
                                        style="font-weight: bold; text-align: center;" name='attr_marksmanshipSiege'
                                        value='0' /></div>
                                <div class="sheet-item" style="width: 85%;"><button type='roll'
                                        class="sheet-specialtyRoll" name="roll_marksmanshipSiege"
                                        value="&{template:sofai} {{input=**@{character_name} tests Marksmanship (Siege)!** \n\n [[ ( [[ @{marksmanship} + @{marksmanshipSiege} + ?{Bonus Dice|0} ]] )d6dl( [[ @{marksmanshipSiege} + ?{Bonus Dice|0} + @{wounds} + ?{Penalty Dice|0} ]] ) - @{injuries} - @{fatigue} ]] }}">Siege</button>
                                </div>
                            </div>
                            <div class="sheet-row">
                                <div class="sheet-item" style="width: 15%;"><input type='number'
                                        style="font-weight: bold; text-align: center;" name='attr_marksmanshipThrown'
                                        value='0' /></div>
                                <div class="sheet-item" style="width: 85%;"><button type='roll'
                                        class="sheet-specialtyRoll" name="roll_marksmanshipThrown"
                                        value="&{template:sofai} {{input=**@{character_name} tests Marksmanship (Thrown)!** \n\n [[ ( [[ @{marksmanship} + @{marksmanshipThrown} + ?{Bonus Dice|0} ]] )d6dl( [[ @{marksmanshipThrown} + ?{Bonus Dice|0} + @{wounds} + ?{Penalty Dice|0} ]] ) - @{injuries} - @{fatigue} ]] }}">Thrown</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div style="height: 4px;">&emsp;</div>

                <!-- Persuasion -->

                <div class="sheet-2colrow">
                    <div class="sheet-col sheet-characteristics">
                        <div class="sheet-2colrow">
                            <div class="sheet-col">
                                <div class="unnatural_box">
                                    <input name="attr_persuasion" class="unnaturaltext" type="text" value="2">
                                    <input type='number' name='attr_persuasion-passive' class='sheet-unnatural'
                                        value='@{persuasion} * 4' disabled="true" />
                                </div>
                            </div>
                            <div class="sheet-col">
                                <button type='roll' class='sheet-characteristics' name='attr_persuasion-roll'
                                    value='&{template:sofai} {{input=**@{character_name} tests Persuasion!** \n\n [[ ( [[ @{persuasion} + ?{Bonus Dice|0} ]] )d6dl( [[ ?{Bonus Dice|0} + @{wounds} + ?{Penalty Dice|0} ]] ) - @{injuries} - @{fatigue} ]] }}'><label
                                        style="vertical-align: middle;">Persuasion</label></button>
                            </div>
                        </div>
                    </div>
                    <div class="sheet-col sheet-Specialty">
                        <div style="height: 50px !important;">
                            <input type="checkbox" name="attr_persuasionSpecialty_Open" class="sheet-Specialty"
                                value="1" checked /><span></span>
                        </div>
                        <input type="checkbox" name="attr_persuasionSpecialty_Open" class="sheet-hidden sheet-hider"
                            value="1" style="height: 0px !important;" checked />
                        <div class="sheet-body" style="position: relative; left: -100px;">
                            <div class="sheet-row">
                                <div class="sheet-item" style="width: 15%;"><input type='number'
                                        style="font-weight: bold; text-align: center;" name='attr_persuasionBargain'
                                        value='0' /></div>
                                <div class="sheet-item" style="width: 85%;"><button type='roll'
                                        class="sheet-specialtyRoll" name="roll_persuasionBargain"
                                        value="&{template:sofai} {{input=**@{character_name} tests Persuasion (Bargain)!** \n\n [[ ( [[ @{persuasion} + @{persuasionBargain} + ?{Bonus Dice|0} ]] )d6dl( [[ @{persuasionBargain} + ?{Bonus Dice|0} + @{wounds} + ?{Penalty Dice|0} ]] ) - @{injuries} - @{fatigue} ]] }}">Bargain</button>
                                </div>
                            </div>
                            <div class="sheet-row">
                                <div class="sheet-item" style="width: 15%;"><input type='number'
                                        style="font-weight: bold; text-align: center;" name='attr_persuasionCharm'
                                        value='0' /></div>
                                <div class="sheet-item" style="width: 85%;"><button type='roll'
                                        class="sheet-specialtyRoll" name="roll_persuasionCharm"
                                        value="&{template:sofai} {{input=**@{character_name} tests Persuasion (Charm)!** \n\n [[ ( [[ @{persuasion} + @{persuasionCharm} + ?{Bonus Dice|0} ]] )d6dl( [[ @{persuasionCharm} + ?{Bonus Dice|0} + @{wounds} + ?{Penalty Dice|0} ]] ) - @{injuries} - @{fatigue} ]] }}">Charm</button>
                                </div>
                            </div>
                            <div class="sheet-row">
                                <div class="sheet-item" style="width: 15%;"><input type='number'
                                        style="font-weight: bold; text-align: center;" name='attr_persuasionConvince'
                                        value='0' /></div>
                                <div class="sheet-item" style="width: 85%;"><button type='roll'
                                        class="sheet-specialtyRoll" name="roll_persuasionConvince"
                                        value="&{template:sofai} {{input=**@{character_name} tests Persuasion (Convince)!** \n\n [[ ( [[ @{persuasion} + @{persuasionConvince} + ?{Bonus Dice|0} ]] )d6dl( [[ @{persuasionConvince} + ?{Bonus Dice|0} + @{wounds} + ?{Penalty Dice|0} ]] ) - @{injuries} - @{fatigue} ]] }}">Convince</button>
                                </div>
                            </div>
                            <div class="sheet-row">
                                <div class="sheet-item" style="width: 15%;"><input type='number'
                                        style="font-weight: bold; text-align: center;" name='attr_persuasionIncite'
                                        value='0' /></div>
                                <div class="sheet-item" style="width: 85%;"><button type='roll'
                                        class="sheet-specialtyRoll" name="roll_persuasionIncite"
                                        value="&{template:sofai} {{input=**@{character_name} tests Persuasion (Incite)!** \n\n [[ ( [[ @{persuasion} + @{persuasionIncite} + ?{Bonus Dice|0} ]] )d6dl( [[ @{persuasionIncite} + ?{Bonus Dice|0} + @{wounds} + ?{Penalty Dice|0} ]] ) - @{injuries} - @{fatigue} ]] }}">Incite</button>
                                </div>
                            </div>
                            <div class="sheet-row">
                                <div class="sheet-item" style="width: 15%;"><input type='number'
                                        style="font-weight: bold; text-align: center;" name='attr_persuasionIntimidate'
                                        value='0' /></div>
                                <div class="sheet-item" style="width: 85%;"><button type='roll'
                                        class="sheet-specialtyRoll" name="roll_persuasionIntimidate"
                                        value="&{template:sofai} {{input=**@{character_name} tests Persuasion (Intimidate)!** \n\n [[ ( [[ @{persuasion} + @{persuasionIntimidate} + ?{Bonus Dice|0} ]] )d6dl( [[ @{persuasionIntimidate} + ?{Bonus Dice|0} + @{wounds} + ?{Penalty Dice|0} ]] ) - @{injuries} - @{fatigue} ]] }}">Intimidate</button>
                                </div>
                            </div>
                            <div class="sheet-row">
                                <div class="sheet-item" style="width: 15%;"><input type='number'
                                        style="font-weight: bold; text-align: center;" name='attr_persuasionSeduce'
                                        value='0' /></div>
                                <div class="sheet-item" style="width: 85%;"><button type='roll'
                                        class="sheet-specialtyRoll" name="roll_persuasionSeduce"
                                        value="&{template:sofai} {{input=**@{character_name} tests Persuasion (Seduce)!** \n\n [[ ( [[ @{persuasion} + @{persuasionSeduce} + ?{Bonus Dice|0} ]] )d6dl( [[ @{persuasionSeduce} + ?{Bonus Dice|0} + @{wounds} + ?{Penalty Dice|0} ]] ) - @{injuries} - @{fatigue} ]] }}">Seduce</button>
                                </div>
                            </div>
                            <div class="sheet-row">
                                <div class="sheet-item" style="width: 15%;"><input type='number'
                                        style="font-weight: bold; text-align: center;" name='attr_persuasionTaunt'
                                        value='0' /></div>
                                <div class="sheet-item" style="width: 85%;"><button type='roll'
                                        class="sheet-specialtyRoll" name="roll_persuasionTaunt"
                                        value="&{template:sofai} {{input=**@{character_name} tests Persuasion (Taunt)!** \n\n [[ ( [[ @{persuasion} + @{persuasionTaunt} + ?{Bonus Dice|0} ]] )d6dl( [[ @{persuasionTaunt} + ?{Bonus Dice|0} + @{wounds} + ?{Penalty Dice|0} ]] ) - @{injuries} - @{fatigue} ]] }}">Taunt</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>


                <div style="height: 4px;">&emsp;</div>

                <!-- Status -->

                <div class="sheet-2colrow">
                    <div class="sheet-col sheet-characteristics">
                        <div class="sheet-2colrow">
                            <div class="sheet-col">
                                <div class="unnatural_box">
                                    <input name="attr_status" class="unnaturaltext" type="text" value="2">
                                    <input type='number' name='attr_status-passive' class='sheet-unnatural'
                                        value='@{status} * 4' disabled="true" />
                                </div>
                            </div>
                            <div class="sheet-col">
                                <button type='roll' class='sheet-characteristics' name='attr_status-roll'
                                    value='&{template:sofai} {{input=**@{character_name} tests Status!** \n\n [[ ( [[ @{status} + ?{Bonus Dice|0} ]] )d6dl( [[ ?{Bonus Dice|0} + @{wounds} + ?{Penalty Dice|0} ]] ) - @{injuries} - @{fatigue} ]] }}'><label
                                        class="sheet-statusRoll">Status</label></button>
                            </div>
                        </div>
                    </div>
                    <div class="sheet-col sheet-Specialty">
                        <div style="height: 50px !important;">
                            <input type="checkbox" name="attr_statusSpecialty_Open" class="sheet-Specialty" value="1"
                                checked /><span></span>
                        </div>
                        <input type="checkbox" name="attr_statusSpecialty_Open" class="sheet-hidden sheet-hider"
                            value="1" style="height: 0px !important;" checked />
                        <div class="sheet-body" style="position: relative; left: -100px;">
                            <div class="sheet-row">
                                <div class="sheet-item" style="width: 15%;"><input type='number'
                                        style="font-weight: bold; text-align: center;" name='attr_statusBreeding'
                                        value='0' /></div>
                                <div class="sheet-item" style="width: 85%;"><button type='roll'
                                        class="sheet-specialtyRoll" name="roll_statusBreeding"
                                        value="&{template:sofai} {{input=**@{character_name} tests Status (Breeding)!** \n\n [[ ( [[ @{status} + @{statusBreeding} + ?{Bonus Dice|0} ]] )d6dl( [[ @{statusBreeding} + ?{Bonus Dice|0} + @{wounds} + ?{Penalty Dice|0} ]] ) - @{injuries} - @{fatigue} ]] }}">Breeding</button>
                                </div>
                            </div>
                            <div class="sheet-row">
                                <div class="sheet-item" style="width: 15%;"><input type='number'
                                        style="font-weight: bold; text-align: center;" name='attr_statusReputation'
                                        value='0' /></div>
                                <div class="sheet-item" style="width: 85%;"><button type='roll'
                                        class="sheet-specialtyRoll" name="roll_statusReputation"
                                        value="&{template:sofai} {{input=**@{character_name} tests Status (Reputation)!** \n\n [[ ( [[ @{status} + @{statusReputation} + ?{Bonus Dice|0} ]] )d6dl( [[ @{statusReputation} + ?{Bonus Dice|0} + @{wounds} + ?{Penalty Dice|0} ]] ) - @{injuries} - @{fatigue} ]] }}">Reputation</button>
                                </div>
                            </div>
                            <div class="sheet-row">
                                <div class="sheet-item" style="width: 15%;"><input type='number'
                                        style="font-weight: bold; text-align: center;" name='attr_statusStewardship'
                                        value='0' /></div>
                                <div class="sheet-item" style="width: 85%;"><button type='roll'
                                        class="sheet-specialtyRoll" name="roll_statusStewardship"
                                        value="&{template:sofai} {{input=**@{character_name} tests Status (Stewardship)!** \n\n [[ ( [[ @{status} + @{statusStewardship} + ?{Bonus Dice|0} ]] )d6dl( [[ @{statusStewardship} + ?{Bonus Dice|0} + @{wounds} + ?{Penalty Dice|0} ]] ) - @{injuries} - @{fatigue} ]] }}">Stewardship</button>
                                </div>
                            </div>
                            <div class="sheet-row">
                                <div class="sheet-item" style="width: 15%;"><input type='number'
                                        style="font-weight: bold; text-align: center;" name='attr_statusTournaments'
                                        value='0' /></div>
                                <div class="sheet-item" style="width: 85%;"><button type='roll'
                                        class="sheet-specialtyRoll" name="roll_statusTournaments"
                                        value="&{template:sofai} {{input=**@{character_name} tests Status (Tournaments)!** \n\n [[ ( [[ @{status} + @{statusTournaments} + ?{Bonus Dice|0} ]] )d6dl( [[ @{statusTournaments} + ?{Bonus Dice|0} + @{wounds} + ?{Penalty Dice|0} ]] ) - @{injuries} - @{fatigue} ]] }}">Tournaments</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div style="height: 4px;">&emsp;</div>

                <!-- Stealth -->

                <div class="sheet-2colrow">
                    <div class="sheet-col sheet-characteristics">
                        <div class="sheet-2colrow">
                            <div class="sheet-col">
                                <div class="unnatural_box">
                                    <input name="attr_stealth" class="unnaturaltext" type="text" value="2">
                                    <input type='number' name='attr_stealth-passive' class='sheet-unnatural'
                                        value='@{stealth} * 4' disabled="true" />
                                </div>
                            </div>
                            <div class="sheet-col">
                                <button type='roll' class='sheet-characteristics' name='attr_stealth-roll'
                                    value='&{template:sofai} {{input=**@{character_name} tests Stealth!** \n\n [[ ( [[ @{stealth} + ?{Bonus Dice|0} ]] )d6dl( [[ ?{Bonus Dice|0} + @{wounds} + ?{Penalty Dice|0} ]] ) - @{injuries} - @{fatigue} ]] }}'><label
                                        style="vertical-align: middle;">Stealth</label></button>
                            </div>
                        </div>
                    </div>
                    <div class="sheet-col sheet-Specialty">
                        <div style="height: 50px !important;">
                            <input type="checkbox" name="attr_stealthSpecialty_Open" class="sheet-Specialty" value="1"
                                checked /><span></span>
                        </div>
                        <input type="checkbox" name="attr_stealthSpecialty_Open" class="sheet-hidden sheet-hider"
                            value="1" style="height: 0px !important;" checked />
                        <div class="sheet-body" style="position: relative; left: -100px;">
                            <div class="sheet-row">
                                <div class="sheet-item" style="width: 15%;"><input type='number'
                                        style="font-weight: bold; text-align: center;" name='attr_stealthBlendIn'
                                        value='0' /></div>
                                <div class="sheet-item" style="width: 85%;"><button type='roll'
                                        class="sheet-specialtyRoll" name="roll_stealthBlendIn"
                                        value="&{template:sofai} {{input=**@{character_name} tests Stealth (Blend In)!** \n\n [[ ( [[ @{stealth} + @{stealthBlendIn} + ?{Bonus Dice|0} ]] )d6dl( [[ @{stealthBlendIn} + ?{Bonus Dice|0} + @{wounds} + ?{Penalty Dice|0} ]] ) - @{injuries} - @{fatigue} ]] }}">Blend
                                        In</button>
                                </div>
                            </div>
                            <div class="sheet-row">
                                <div class="sheet-item" style="width: 15%;"><input type='number'
                                        style="font-weight: bold; text-align: center;" name='attr_stealthSneak'
                                        value='0' /></div>
                                <div class="sheet-item" style="width: 85%;"><button type='roll'
                                        class="sheet-specialtyRoll" name="roll_stealthSneak"
                                        value="&{template:sofai} {{input=**@{character_name} tests Stealth (Sneak)!** \n\n [[ ( [[ @{stealth} + @{stealthSneak} + ?{Bonus Dice|0} ]] )d6dl( [[ @{stealthSneak} + ?{Bonus Dice|0} + @{wounds} + ?{Penalty Dice|0} ]] ) - @{injuries} - @{fatigue} ]] }}">Sneak</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div style="height: 4px;">&emsp;</div>

                <!-- Survival -->

                <div class="sheet-2colrow">
                    <div class="sheet-col sheet-characteristics">
                        <div class="sheet-2colrow">
                            <div class="sheet-col">
                                <div class="unnatural_box">
                                    <input name="attr_survival" class="unnaturaltext" type="text" value="2">
                                    <input type='number' name='attr_survival-passive' class='sheet-unnatural'
                                        value='@{survival} * 4' disabled="true" />
                                </div>
                            </div>
                            <div class="sheet-col">
                                <button type='roll' class='sheet-characteristics' name='attr_survival-roll'
                                    value='&{template:sofai} {{input=**@{character_name} tests Survival!** \n\n [[ ( [[ @{survival} + ?{Bonus Dice|0} ]] )d6dl( [[ ?{Bonus Dice|0} + @{wounds} + ?{Penalty Dice|0} ]] ) - @{injuries} - @{fatigue} ]] }}'><label
                                        style="vertical-align: middle;">Survival</label></button>
                            </div>
                        </div>
                    </div>
                    <div class="sheet-col sheet-Specialty">
                        <div style="height: 50px !important;">
                            <input type="checkbox" name="attr_survivalSpecialty_Open" class="sheet-Specialty" value="1"
                                checked /><span></span>
                        </div>
                        <input type="checkbox" name="attr_survivalSpecialty_Open" class="sheet-hidden sheet-hider"
                            value="1" style="height: 0px !important;" checked />
                        <div class="sheet-body" style="position: relative; left: -100px;">
                            <div class="sheet-row">
                                <div class="sheet-item" style="width: 15%;"><input type='number'
                                        style="font-weight: bold; text-align: center;" name='attr_survivalForage'
                                        value='0' /></div>
                                <div class="sheet-item" style="width: 85%;"><button type='roll'
                                        class="sheet-specialtyRoll" name="roll_survivalForage"
                                        value="&{template:sofai} {{input=**@{character_name} tests Survival (Forage)!** \n\n [[ ( [[ @{survival} + @{survivalForage} + ?{Bonus Dice|0} ]] )d6dl( [[ @{survivalForage} + ?{Bonus Dice|0} + @{wounds} + ?{Penalty Dice|0} ]] ) - @{injuries} - @{fatigue} ]] }}">Forage</button>
                                </div>
                            </div>
                            <div class="sheet-row">
                                <div class="sheet-item" style="width: 15%;"><input type='number'
                                        style="font-weight: bold; text-align: center;" name='attr_survivalHunt'
                                        value='0' /></div>
                                <div class="sheet-item" style="width: 85%;"><button type='roll'
                                        class="sheet-specialtyRoll" name="roll_survivalHunt"
                                        value="&{template:sofai} {{input=**@{character_name} tests Survival (Hunt)!** \n\n [[ ( [[ @{survival} + @{survivalHunt} + ?{Bonus Dice|0} ]] )d6dl( [[ @{survivalHunt} + ?{Bonus Dice|0} + @{wounds} + ?{Penalty Dice|0} ]] ) - @{injuries} - @{fatigue} ]] }}">Hunt</button>
                                </div>
                            </div>
                            <div class="sheet-row">
                                <div class="sheet-item" style="width: 15%;"><input type='number'
                                        style="font-weight: bold; text-align: center;" name='attr_survivalOrientation'
                                        value='0' /></div>
                                <div class="sheet-item" style="width: 85%;"><button type='roll'
                                        class="sheet-specialtyRoll" name="roll_survivalOrientation"
                                        value="&{template:sofai} {{input=**@{character_name} tests Survival (Orientation)!** \n\n [[ ( [[ @{survival} + @{survivalOrientation} + ?{Bonus Dice|0} ]] )d6dl( [[ @{survivalOrientation} + ?{Bonus Dice|0} + @{wounds} + ?{Penalty Dice|0} ]] ) - @{injuries} - @{fatigue} ]] }}">Orientation</button>
                                </div>
                            </div>
                            <div class="sheet-row">
                                <div class="sheet-item" style="width: 15%;"><input type='number'
                                        style="font-weight: bold; text-align: center;" name='attr_survivalTrack'
                                        value='0' /></div>
                                <div class="sheet-item" style="width: 85%;"><button type='roll'
                                        class="sheet-specialtyRoll" name="roll_survivalTrack"
                                        value="&{template:sofai} {{input=**@{character_name} tests Survival (Track)!** \n\n [[ ( [[ @{survival} + @{survivalTrack} + ?{Bonus Dice|0} ]] )d6dl( [[ @{survivalTrack} + ?{Bonus Dice|0} + @{wounds} + ?{Penalty Dice|0} ]] ) - @{injuries} - @{fatigue} ]] }}">Track</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div style="height: 4px;">&emsp;</div>

                <!-- Thievery -->

                <div class="sheet-2colrow">
                    <div class="sheet-col sheet-characteristics">
                        <div class="sheet-2colrow">
                            <div class="sheet-col">
                                <div class="unnatural_box">
                                    <input name="attr_thievery" class="unnaturaltext" type="text" value="2">
                                    <input type='number' name='attr_thievery-passive' class='sheet-unnatural'
                                        value='@{thievery} * 4' disabled="true" />
                                </div>
                            </div>
                            <div class="sheet-col">
                                <button type='roll' class='sheet-characteristics' name='attr_thievery-roll'
                                    value='&{template:sofai} {{input=**@{character_name} tests Thievery!** \n\n [[ ( [[ @{thievery} + ?{Bonus Dice|0} ]] )d6dl( [[ ?{Bonus Dice|0} + @{wounds} + ?{Penalty Dice|0} ]] ) - @{injuries} - @{fatigue} ]] }}'><label
                                        style="vertical-align: middle;">Thievery</label></button>
                            </div>
                        </div>
                    </div>
                    <div class="sheet-col sheet-Specialty">
                        <div style="height: 50px !important;">
                            <input type="checkbox" name="attr_thieverySpecialty_Open" class="sheet-Specialty" value="1"
                                checked /><span></span>
                        </div>
                        <input type="checkbox" name="attr_thieverySpecialty_Open" class="sheet-hidden sheet-hider"
                            value="1" style="height: 0px !important;" checked />
                        <div class="sheet-body" style="position: relative; left: -100px;">
                            <div class="sheet-row">
                                <div class="sheet-item" style="width: 15%;"><input type='number'
                                        style="font-weight: bold; text-align: center;" name='attr_thieveryPickLock'
                                        value='0' /></div>
                                <div class="sheet-item" style="width: 85%;"><button type='roll'
                                        class="sheet-specialtyRoll" name="roll_thieveryPickLock"
                                        value="&{template:sofai} {{input=**@{character_name} tests Thievery (Pick Lock)!** \n\n [[ ( [[ @{thievery} + @{thieveryPickLock} + ?{Bonus Dice|0} ]] )d6dl( [[ @{thieveryPickLock} + ?{Bonus Dice|0} + @{wounds} + ?{Penalty Dice|0} ]] ) - @{injuries} - @{fatigue} ]] }}">Pick
                                        Lock</button>
                                </div>
                            </div>
                            <div class="sheet-row">
                                <div class="sheet-item" style="width: 15%;"><input type='number'
                                        style="font-weight: bold; text-align: center;" name='attr_thieverySleightOfHand'
                                        value='0' /></div>
                                <div class="sheet-item" style="width: 85%;"><button type='roll'
                                        class="sheet-specialtyRoll" name="roll_thieverySleightOfHand"
                                        value="&{template:sofai} {{input=**@{character_name} tests Thievery (Sleight of Hand)!** \n\n [[ ( [[ @{thievery} + @{thieverySleightOfHand} + ?{Bonus Dice|0} ]] )d6dl( [[ @{thieverySleightOfHand} + ?{Bonus Dice|0} + @{wounds} + ?{Penalty Dice|0} ]] ) - @{injuries} - @{fatigue} ]] }}">Sleight
                                        of Hand</button>
                                </div>
                            </div>
                            <div class="sheet-row">
                                <div class="sheet-item" style="width: 15%;"><input type='number'
                                        style="font-weight: bold; text-align: center;" name='attr_thieverySteal'
                                        value='0' /></div>
                                <div class="sheet-item" style="width: 85%;"><button type='roll'
                                        class="sheet-specialtyRoll" name="roll_thieverySteal"
                                        value="&{template:sofai} {{input=**@{character_name} tests Thievery (Steal)!** \n\n [[ ( [[ @{thievery} + @{thieverySteal} + ?{Bonus Dice|0} ]] )d6dl( [[ @{thieverySteal} + ?{Bonus Dice|0} + @{wounds} + ?{Penalty Dice|0} ]] ) - @{injuries} - @{fatigue} ]] }}">Steal</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div style="height: 4px;">&emsp;</div>

                <!-- Warfare -->

                <div class="sheet-2colrow">
                    <div class="sheet-col sheet-characteristics">
                        <div class="sheet-2colrow">
                            <div class="sheet-col">
                                <div class="unnatural_box">
                                    <input name="attr_warfare" class="unnaturaltext" type="text" value="2">
                                    <input type='number' name='attr_warfare-passive' class='sheet-unnatural'
                                        value='@{warfare} * 4' disabled="true" />
                                </div>
                            </div>
                            <div class="sheet-col">
                                <button type='roll' class='sheet-characteristics' name='attr_warfare-roll'
                                    value='&{template:sofai} {{input=**@{character_name} tests Warfare!** \n\n [[ ( [[ @{warfare} + ?{Bonus Dice|0} ]] )d6dl( [[ ?{Bonus Dice|0} + @{wounds} + ?{Penalty Dice|0} ]] ) - @{injuries} - @{fatigue} ]] }}'><label
                                        style="vertical-align: middle;">Warfare</label></button>
                            </div>
                        </div>
                    </div>
                    <div class="sheet-col sheet-Specialty">
                        <div style="height: 50px !important;">
                            <input type="checkbox" name="attr_warfareSpecialty_Open" class="sheet-Specialty" value="1"
                                checked /><span></span>
                        </div>
                        <input type="checkbox" name="attr_warfareSpecialty_Open" class="sheet-hidden sheet-hider"
                            value="1" style="height: 0px !important;" checked />
                        <div class="sheet-body" style="position: relative; left: -100px;">
                            <div class="sheet-row">
                                <div class="sheet-item" style="width: 15%;"><input type='number'
                                        style="font-weight: bold; text-align: center;" name='attr_warfareCommand'
                                        value='0' /></div>
                                <div class="sheet-item" style="width: 85%;"><button type='roll'
                                        class="sheet-specialtyRoll" name="roll_warfareCommand"
                                        value="&{template:sofai} {{input=**@{character_name} tests Warfare (Command)!** \n\n [[ ( [[ @{warfare} + @{warfareCommand} + ?{Bonus Dice|0} ]] )d6dl( [[ @{warfareCommand} + ?{Bonus Dice|0} + @{wounds} + ?{Penalty Dice|0} ]] ) - @{injuries} - @{fatigue} ]] }}">Command</button>
                                </div>
                            </div>
                            <div class="sheet-row">
                                <div class="sheet-item" style="width: 15%;"><input type='number'
                                        style="font-weight: bold; text-align: center;" name='attr_warfareStrategy'
                                        value='0' /></div>
                                <div class="sheet-item" style="width: 85%;"><button type='roll'
                                        class="sheet-specialtyRoll" name="roll_warfareStrategy"
                                        value="&{template:sofai} {{input=**@{character_name} tests Warfare (Strategy)!** \n\n [[ ( [[ @{warfare} + @{warfareStrategy} + ?{Bonus Dice|0} ]] )d6dl( [[ @{warfareStrategy} + ?{Bonus Dice|0} + @{wounds} + ?{Penalty Dice|0} ]] ) - @{injuries} - @{fatigue} ]] }}">Strategy</button>
                                </div>
                            </div>
                            <div class="sheet-row">
                                <div class="sheet-item" style="width: 15%;"><input type='number'
                                        style="font-weight: bold; text-align: center;" name='attr_warfareTactics'
                                        value='0' /></div>
                                <div class="sheet-item" style="width: 85%;"><button type='roll'
                                        class="sheet-specialtyRoll" name="roll_warfareTactics"
                                        value="&{template:sofai} {{input=**@{character_name} tests Warfare (Tactics)!** \n\n [[ ( [[ @{warfare} + @{warfareTactics} + ?{Bonus Dice|0} ]] )d6dl( [[ @{warfareTactics} + ?{Bonus Dice|0} + @{wounds} + ?{Penalty Dice|0} ]] ) - @{injuries} - @{fatigue} ]] }}">Tactics</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div style="height: 4px;">&emsp;</div>

                <!-- Will -->

                <div class="sheet-2colrow">
                    <div class="sheet-col sheet-characteristics">
                        <div class="sheet-2colrow">
                            <div class="sheet-col">
                                <div class="unnatural_box">
                                    <input name="attr_will" class="unnaturaltext" type="text" value="2">
                                    <input type='number' name='attr_will-passive' class='sheet-unnatural'
                                        value='@{will} * 4' disabled="true" />
                                </div>
                            </div>
                            <div class="sheet-col">
                                <button type='roll' class='sheet-characteristics' name='attr_will-roll'
                                    value='&{template:sofai} {{input=**@{character_name} tests Will!** \n\n [[ ( [[ @{will} + ?{Bonus Dice|0} ]] )d6dl( [[ ?{Bonus Dice|0} + @{wounds} + ?{Penalty Dice|0} ]] ) - @{injuries} - @{fatigue} ]] }}'><label
                                        style="vertical-align: middle;">Will</label></button>
                            </div>
                        </div>
                    </div>
                    <div class="sheet-col sheet-Specialty">
                        <div style="height: 50px !important;">
                            <input type="checkbox" name="attr_willSpecialty_Open" class="sheet-Specialty" value="1"
                                checked /><span></span>
                        </div>
                        <input type="checkbox" name="attr_willSpecialty_Open" class="sheet-hidden sheet-hider" value="1"
                            style="height: 0px !important;" checked />
                        <div class="sheet-body" style="position: relative; left: -100px;">
                            <div class="sheet-row">
                                <div class="sheet-item" style="width: 15%;"><input type='number'
                                        style="font-weight: bold; text-align: center;" name='attr_willCourage'
                                        value='0' /></div>
                                <div class="sheet-item" style="width: 85%;"><button type='roll'
                                        class="sheet-specialtyRoll" name="roll_willCourage"
                                        value="&{template:sofai} {{input=**@{character_name} tests Will (Courage)!** \n\n [[ ( [[ @{will} + @{willCourage} + ?{Bonus Dice|0} ]] )d6dl( [[ @{willCourage} + ?{Bonus Dice|0} + @{wounds} + ?{Penalty Dice|0} ]] ) - @{injuries} - @{fatigue} ]] }}">Courage</button>
                                </div>
                            </div>
                            <div class="sheet-row">
                                <div class="sheet-item" style="width: 15%;"><input type='number'
                                        style="font-weight: bold; text-align: center;" name='attr_willCoordinate'
                                        value='0' /></div>
                                <div class="sheet-item" style="width: 85%;"><button type='roll'
                                        class="sheet-specialtyRoll" name="roll_willCoordinate"
                                        value="&{template:sofai} {{input=**@{character_name} tests Will (Coordinate)!** \n\n [[ ( [[ @{will} + @{willCoordinate} + ?{Bonus Dice|0} ]] )d6dl( [[ @{willCoordinate} + ?{Bonus Dice|0} + @{wounds} + ?{Penalty Dice|0} ]] ) - @{injuries} - @{fatigue} ]] }}">Coordinate</button>
                                </div>
                            </div>
                            <div class="sheet-row">
                                <div class="sheet-item" style="width: 15%;"><input type='number'
                                        style="font-weight: bold; text-align: center;" name='attr_willDedication'
                                        value='0' /></div>
                                <div class="sheet-item" style="width: 85%;"><button type='roll'
                                        class="sheet-specialtyRoll" name="roll_willDedication"
                                        value="&{template:sofai} {{input=**@{character_name} tests Will (Dedication)!** \n\n [[ ( [[ @{will} + @{willDedication} + ?{Bonus Dice|0} ]] )d6dl( [[ @{willDedication} + ?{Bonus Dice|0} + @{wounds} + ?{Penalty Dice|0} ]] ) - @{injuries} - @{fatigue} ]] }}">Dedication</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>


                
            </div>
        </div>

        <br />
        <br />
        <br />
    </div>
</div>

<div class="sheet-section-gear">
    <!-- Gear Tab -->
    <!--%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%-->
    <div class="sheet-wrapper">
        <!-- Intrigue, Combat, Armor, Injuries & Wounds -->
        <div class="sheet-2colrow">
            <!-- Intrigue & Combat -->
            <div class="sheet-col">

                <div class="sheet-2colrow">
                    <!-- Intrigue -->
                    <div class="sheet-col">
                        <div class="sheet-row">
                            <h3>Intrigue</h3>                            
                        </div>
                        <div class="sheet-row">
                            <div class="sheet-item" style="width: 50%; margin-left: 25%;"><button name="roll_intrigueInit" type="roll"
                                value="&{template:sofai} {{input=**@{character_name} tests a [[ ( [[ @{selected|status} - @{selected|wounds} + @{selected|statusReputation}]] )d6kh@{selected|status}sd - @{selected|injuries} &{tracker}]] for Initiative (Intrigue)!">
                                <label style="font-size: 1em;">Initiative</label> </button></div>
                        </div>
                        <br/>
                        <div class="sheet-quickborder">
                            <div class="sheet-row">
                                <div class="sheet-item sheet-tcenter" style="width: 60%;"><label>Defense</label></div>
                                <div class="sheet-item sheet-tcenter" style="width: 25%;"><input type="number"
                                        name="attr_intrigueDefense"
                                        value="@{awareness}+@{cunning}+@{status}+@{intrigueDefenseBonus}"
                                        disabled="true" style="background: #4A798B !important; color: white !important; font-weight: bold !important; text-align: center !important;"></div>
                            </div>
                            <div class="sheet-row">
                                <div class="sheet-item sheet-tcenter" style="width: 60%;"><label>Defense Bonus</label>
                                </div>
                                <div class="sheet-item sheet-tcenter" style="width: 25%;"><input type="number"
                                        name="attr_intrigueDefenseBonus" value="0"></div>
                            </div>
                        </div>
                        <div class="sheet-row">
                            <div class="sheet-quickborder">
                                <div class="sheet-tcenter"><label>Composure:</label></div>
                                <div class="sheet-2colrow">
                                    <div class="sheet-col">
                                        <div class="sheet-item" style="width: 60%"><label>Current</label></div>
                                        <div class="sheet-item" style="width: 40%"><input type="number"
                                                name="attr_composure" value="0"></div>
                                    </div>
                                    <div class="sheet-col">
                                        <div class="sheet-item" style="width: 50%"><label>Max</label></div>
                                        <div class="sheet-item" style="width: 40%"><input type="number"
                                                name="attr_composureMax" value="@{will}*3 + @{composureBonus}"
                                                disabled="true" style="background: #4A798B !important; color: white !important; font-weight: bold !important; text-align: center !important;"></div>
                                    </div>
                                </div>
                                <div class="sheet-row">
                                    <div class="sheet-item sheet-tcenter" style="width: 75%;"><label>Composure
                                            Bonus</label></div>
                                    <div class="sheet-item sheet-tcenter" style="width: 20%;"><input type="number"
                                            name="attr_composureBonus" value="0"></div>
                                </div>
                            </div>
                        </div>
                        <br/><br/><br/><br/>
                        <div class="sheet-row">
                            <div class="sheet-quickborder">
                                <div class="sheet-item"><label>Frustration:</label></div>
                                <div class="sheet-2colrow">
                                    <div class="sheet-col">
                                        <div class="sheet-item" style="width: 60%"><label>Current</label></div>
                                        <div class="sheet-item" style="width: 40%"><input type="number"
                                                name="attr_frustration" value="0"></div>
                                    </div>
                                    <div class="sheet-col">
                                        <div class="sheet-item" style="width: 50%"><label>Max</label></div>
                                        <div class="sheet-item" style="width: 40%"><input type="number"
                                                name="attr_frustrationMax" value="@{will}" disabled="true" style="background: #4A798B !important; color: white !important; font-weight: bold !important; text-align: center !important;"></div>
                                    </div>
                                </div>
                                <div class="sheet-row">
                                    <span style="font-size: 0.9em; font-style: italic;">â€“1D on Deception and Persuasion</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Combat -->
                    <div class="sheet-col">
                        <div class="sheet-row">
                            <h3>Combat</h3>
                        </div>
                        <div class="sheet-row">
                            <div class="sheet-item" style="width: 50%; margin-left: 25%"><button name="roll_combatInit" type="roll" class="initRoll"
                                value="&{template:sofai} {{input=**@{character_name} tests a [[ ( [[ @{selected|agility} - @{selected|wounds} + @{selected|agilityQuickness}]] )d6kh@{selected|agility}sd - @{selected|injuries} &{tracker}]] for Initiative (Combat)!">
                                <label style="font-size: 1em;">Initiative</label></button></div>
                        </div>
                        <br/>
                        <div class="sheet-quickborder">
                            <div class="sheet-row">
                                <div class="sheet-item sheet-tcenter" style="width: 60%;"><label>Defense</label></div>
                                <div class="sheet-item sheet-tcenter" style="width: 25%;"><input type="number"
                                        name="attr_combatDefense"
                                        value="@{agility} + @{athletics} + @{awareness} + @{defenseBonus} + @{armorPenalty}"
                                        disabled="true" style="background: #4A798B !important; color: white !important; font-weight: bold !important; text-align: center !important;"></div>
                            </div>
                            <div class="sheet-row">
                                <div class="sheet-item sheet-tcenter" style="width: 60%;"><label>Defense Bonus</label>
                                </div>
                                <div class="sheet-item sheet-tcenter" style="width: 25%;"><input type="number"
                                        name="attr_defenseBonus" value="0"></div>
                            </div>
                        </div>
                        <div class="sheet-row">
                            <div class="sheet-quickborder">
                                <div class="sheet-tcenter"><label>Health:</label></div>
                                <div class="sheet-2colrow">
                                    <div class="sheet-col">
                                        <div class="sheet-item" style="width: 60%"><label>Current</label></div>
                                        <div class="sheet-item" style="width: 40%"><input type="number"
                                                name="attr_health" value="0"></div>
                                    </div>
                                    <div class="sheet-col">
                                        <div class="sheet-item" style="width: 50%"><label>Max</label></div>
                                        <div class="sheet-item" style="width: 40%"><input type="number"
                                                name="attr_healthMax" value="@{endurance}*3 + @{healthBonus}"
                                                disabled="true" style="background: #4A798B !important; color: white !important; font-weight: bold !important; text-align: center !important;"></div>
                                    </div>
                                </div>

                                <div class="sheet-row">
                                    <div class="sheet-item sheet-tcenter" style="width: 75%;"><label>Health
                                            Bonus</label>
                                    </div>
                                    <div class="sheet-item sheet-tcenter" style="width: 20%;"><input type="number"
                                            name="attr_healthBonus" value="0"></div>
                                </div>
                            </div>
                        </div>
                        <br/><br/><br/><br/>
                        <div class="sheet-row">
                            <div class="sheet-quickborder">
                                <div class="sheet-item"><label>Fatigue:</label></div>
                                <div class="sheet-2colrow">
                                    <div class="sheet-col">
                                        <div class="sheet-item" style="width: 60%"><label>Current</label></div>
                                        <div class="sheet-item" style="width: 40%"><input type="number"
                                                name="attr_fatigue" value="0"></div>
                                    </div>
                                    <div class="sheet-col">
                                        <div class="sheet-item" style="width: 50%"><label>Max</label></div>
                                        <div class="sheet-item" style="width: 40%"><input type="number"
                                                name="attr_fatigueMax" value="@{endurance}" disabled="true" style="background: #4A798B !important; color: white !important; font-weight: bold !important; text-align: center !important;"></div>
                                    </div>
                                </div>
                                <div class="sheet-row">
                                    <span style="font-size: 0.9em; font-style: italic;">â€“1 on all tests</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Armour, Injuries & Wounds -->
            <div class="sheet-col">
                <div class="sheet-2colrow">
                    <!-- Armor -->
                    <div class="sheet-col">
                        <div class="sheet-row">
                            <h3>Armor</h3>
                        </div>
                        <div class="sheet-quickborder">
                            <div class="sheet-row">
                                <div class="sheet-item" style="width: 100%"><input name="attr_armorName" type="text"
                                        value="Clothing" style="font-weight: bold;"></div>
                            </div>
                            <div class="sheetrow">
                                <div class="sheet-item" style="width: 60%"><label>Armor Rating</label></div>
                                <div class="sheet-item" style="width: 40%"><input name="attr_armorRating" type="number"
                                        value=0></div>
                            </div>
                            <div class="sheetrow">
                                <div class="sheet-item" style="width: 60%"><label>Armor Penalty</label></div>
                                <div class="sheet-item" style="width: 40%"><input name="attr_armorPenalty" type="number"
                                        value=0></div>
                            </div>

                            <div class="sheetrow">
                                <div class="sheet-item" style="width: 60%"><label>Armor Bulk</label></div>
                                <div class="sheet-item" style="width: 40%"><input name="attr_armorBulk" type="number"
                                        value=0></div>
                            </div>
                        </div>
                    </div>

                    <!-- Injuries & Wounds -->
                    <div class="sheet-col">
                        <div class="sheet-row">
                            <h3>Injuries & Wounds</h3>
                        </div>
                        <div class="sheet-quickborder">
                            <div class="sheet-row">
                                <div class="sheet-item sheet-tcenter" style="width: 60%;"><label>Injuries</label></div>
                            </div>

                            <div class="sheet-2colrow">
                                <div class="sheet-col">
                                    <div class="sheet-item" style="width: 60%"><label>Current</label></div>
                                    <div class="sheet-item" style="width: 40%"><input type="number" name="attr_injuries"
                                            value="0"></div>
                                </div>
                                <div class="sheet-col">
                                    <div class="sheet-item" style="width: 50%"><label>Max</label></div>
                                    <div class="sheet-item" style="width: 40%"><input type="number"
                                            name="attr_injuriesMax" value="@{endurance}" disabled="true" style="background: #4A798B !important; color: white !important; font-weight: bold !important; text-align: center !important;"></div>
                                </div>
                            </div>
                            <div class="sheet-row">
                                <span style="font-size: 0.9em; font-style: italic;">Injuries impose -1 to all tests.</span>
                            </div>
                            <div class="sheet-row">
                                <fieldset class="repeating_injury">
                                    <input type='text' name='attr_injuryRe' value='' />
                                </fieldset>
                            </div>
                        </div>

                        <div class="sheet-row">
                            <div class="sheet-quickborder">
                                <div class="sheet-item"><label>Wounds:</label></div>
                                <div class="sheet-2colrow">
                                    <div class="sheet-col">
                                        <div class="sheet-item" style="width: 60%"><label>Current</label></div>
                                        <div class="sheet-item" style="width: 40%"><input type="number"
                                                name="attr_wounds" value="0"></div>
                                    </div>
                                    <div class="sheet-col">
                                        <div class="sheet-item" style="width: 50%"><label>Max</label></div>
                                        <div class="sheet-item" style="width: 40%"><input type="number"
                                                name="attr_woundsMax" value="@{endurance}" disabled="true" style="background: #4A798B !important; color: white !important; font-weight: bold !important; text-align: center !important;"></div>
                                    </div>
                                </div>
                                <div class="sheet-row">
                                    <span style="font-size: 0.9em; font-style: italic;">Wounds impose -1D to all tests.</span>
                                </div>
                                <div class="sheet-row">
                                    <fieldset class="repeating_wound">
                                        <input type='text' name='attr_woundRe' value='' />
                                    </fieldset>
                                </div>
                            </div>
                        </div>

                        
                    </div>

                </div>
            </div>
        </div>

        <br />
        <br/><br/><br/><br/>

        <div class="sheet-2colrow">
            <!-- Movement & Destiny -->
            <div class="sheet-col">
                <div class="sheet-2colrow">
                    <!-- Destiny -->
                    <div class="sheet-col">
                        <div class="sheet-row">
                            <h3>Destiny Points</h3>
                        </div>
                        <div class="sheet-quickborder">
                            <div class="sheet-row">
                                <div class="sheet-item sheet-tcenter" style="width: 60%;"><label>Available</label>
                                </div>
                                <div class="sheet-item sheet-tcenter" style="width: 25%;"><input type="number"
                                        name="attr_destiny" value="0"></div>
                            </div>
                            <div class="sheet-row">
                                <div class="sheet-item sheet-tcenter" style="width: 60%;"><label>Maximum</label>
                                </div>
                                <div class="sheet-item sheet-tcenter" style="width: 25%;">
                                    <input disabled="true" type="number" style="background: #4A798B !important; color: white !important; font-weight: bold !important; text-align: center !important;"
                                        name="attr_destinyMax" value="@{destinyBase} + @{destinyBonus} - @{destinyInvested}">
                                </div>
                            </div>
                            <div class="sheet-row">
                                <div class="sheet-item sheet-tcenter" style="width: 60%;"><label>Base</label>
                                </div>
                                <div class="sheet-item sheet-tcenter" style="width: 25%;"><input type="number"
                                        name="attr_destinyBase" value="0"></div>
                            </div>
                            <div class="sheet-row">
                                <div class="sheet-item sheet-tcenter" style="width: 60%;"><label>Invested</label>
                                </div>
                                <div class="sheet-item sheet-tcenter" style="width: 25%;"><input type="number"
                                        name="attr_destinyInvested" value="0"></div>
                            </div>
                            <div class="sheet-row">
                                <div class="sheet-item sheet-tcenter" style="width: 60%;"><label>Bonus</label>
                                </div>
                                <div class="sheet-item sheet-tcenter" style="width: 25%;"><input type="number"
                                        name="attr_destinyBonus" value="0"></div>
                            </div>
                        </div>
                    </div>
                    <!-- Movement -->
                    <div class="sheet-col">
                        <div class="sheet-row">
                            <h3>Movement</h3>
                        </div>
                        <div class="sheet-quickborder">
                            <div class="sheet-row">
                                    <div class="sheet-item sheet-tcenter" style="width: 50%;"><label>Base</label>
                                    </div>
                                    <div class="sheet-item" style="width: 25%">
                                        <input name="attr_baseMovement" value="4" type="number">
                                    </div>
                                    <div class="sheet-item" style="width: 15%"><span>yds</span></div>
                            </div>
                            <div class="sheet-row">
                                <div class="sheet-item sheet-tcenter" style="width: 50%;"><label>Move Speed</label>
                                </div>
                                <div class="sheet-item sheet-tcenter" style="width: 25%;">
                                    <input type="hidden" name="attr_movementCalc"
                                        value="@{baseMovement} + floor(@{athleticsRun}/2) - (@{bulk}/2)" disabled="true">
                                    <input type="hidden" name="attr_movementMin" value=1 disabled="true">
                                    <input type="number" name="attr_movement"
                                        value="(((@{movementCalc} + @{movementMin}) + abs(@{movementCalc} - @{movementMin})) / 2)"
                                        disabled="true" style="background: #4A798B !important; color: white !important; font-weight: bold !important; text-align: center !important;"></div>
                                <div class="sheet-item" style="width: 15%"><span>yds</span></div>
                            </div>
                            <div class="sheet-row">
                                    <div class="sheet-item sheet-tcenter" style="width: 50%;"><label>Sprint Multi</label>
                                    </div>
                                    <div class="sheet-item" style="width: 25%">
                                        <input name="attr_sprintMulti" value="4" type="number">
                                    </div>
                                    <div class="sheet-item" style="width: 15%"><span>Ã—</span></div>
                            </div>
                            <div class="sheet-row">
                                    <div class="sheet-item sheet-tcenter" style="width: 50%;"><label>Sprint Speed</label>
                                    </div>
                                    <div class="sheet-item sheet-tcenter" style="width: 25%;">
                                        <input type="hidden" name="attr_sprintCalc"
                                            value="(@{movement} * @{sprintMulti}) - @{bulk}" disabled="true">
                                        <input type="hidden" name="attr_sprintMin" value=1 disabled="true">
                                        <input type="number" name="attr_sprint"
                                            value="(((@{sprintCalc} + @{sprintMin}) + abs(@{sprintCalc} - @{sprintMin})) / 2)"
                                            disabled="true" style="background: #4A798B !important; color: white !important; font-weight: bold !important; text-align: center !important;"></div>
                                    <div class="sheet-item" style="width: 15%"><span>yds</span></div>
                                </div>
                            <div class="sheet-row">
                                <div class="sheet-item sheet-tcenter" style="width: 50%;"><label>Bulk</label>
                                </div>
                                <div class="sheet-item sheet-tcenter" style="width: 25%;"><input type="number"
                                        name="attr_bulk" value="(@{armorBulk} + @{totalWeaponBulk})" disabled="true" style="background: #4A798B !important; color: white !important; font-weight: bold !important; text-align: center !important;">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Weapons -->
            <div class="sheet-col">
                <div class="sheet-row">
                    <h3>Equipped Weapons</h3>
                </div>
                <div class="sheet-hidden">
                    <div class="sheet-item"><input type="number" name="attr_totalWeaponBulk" value=0 readonly></div>
                </div>
                <fieldset class="repeating_weapon">
                    <div class="sheet-quickborder">
                        <div class="sheet-row">
                            <div class="sheet-item" style="width: 15%;"><span>Name:</span></div>
                            <div class="sheet-item" style="width: 50%;"><input name="attr_weapon" type="text"
                                    style="font-weight: bold" /></div>
                            <div class="sheet-item" style="width: 10%"><span>Type: </span></div>
                            <div class="sheet-item" style="width: 25%;"><select name="attr_weaponType">
                                    <option selected value="@{fighting}">Melee</option>
                                    <option value="@{marksmanship}">Ranged</option>
                                </select></div>
                        </div>
                        <div class="sheet-row">
                            <div class="sheet-item" style="width: 15%;"><span>Specialty:</span></div>
                            <div class="sheet-item" style="width: 30%;"><select name="attr_weaponSpecialty">
                                    <option value="@{fightingAxes}">Axes</option>
                                    <option value="@{fightingBludgeons}">Bludgeons</option>
                                    <option value="@{fightingBrawling}">Brawling</option>
                                    <option value="@{fightingFencing}">Fencing</option>
                                    <option value="@{fightingLongBlades}">Long Blades</option>
                                    <option value="@{fightingPolearms}">Polearms</option>
                                    <option value="@{fightingShields}">Shields</option>
                                    <option selected value="@{fightingShortBlades}">Short Blades</option>
                                    <option value="@{fightingSpears}">Spears</option>
                                    <option value="@{marksmanshipBows}">Bows</option>
                                    <option value="@{marksmanshipCrossbows}">Crossbows</option>
                                    <option value="@{marksmanshipThrown}">Thrown</option>
                                </select></div>
                            <div class="sheet-item" style="width: 5%"></div>
                            <div class="sheet-item" style="width: 15%;"><span>Training:</span></div>
                            <div class="sheet-item" style="width: 8%;"><input name="attr_weaponTraining"
                                    type="number" /></div>
                            <div class="sheet-item" style="width: 5%;"><span>B</span></div>
                            <div class="sheet-item" style="width: 10%;"><span>Bulk:</span></div>
                            <div class="sheet-item" style="width: 5%;"><input name="attr_weaponBulk" type="number"
                                    value=0 /></div>
                        </div>
                        <div class="sheet-row">
                            <div class="sheet-item" style="width: 15%;"><span>Damage:</span></div>
                            <div class="sheet-item" style="width: 35%;"><select name="attr_weaponDamageTest">
                                    <option selected value="@{athletics}">Athletics</option>
                                    <option value="@{agility}">Agility</option>
                                    <option value="@{animalhandling}">Animal Handling</option>
                                </select></div>
                            <div class="sheet-item" style="width: 5%"></div>
                            <div class="sheet-item" style="width: 25%;"><span>Damage Mod:</span></div>
                            <div class="sheet-item" style="width: 8%;"><input name="attr_weaponDamageMod"
                                    type="number" /></div>
                        </div>
                        <div class="sheet-row">
                            <div class="sheet-item" style="width: 15%;"><span>Qualities:</span>
                            </div>
                            <div class="sheet-item" style="width: 85%;"><input name="attr_weaponqualities"
                                    type="text" /> </div>
                        </div>
                        <div class="sheet-row">
                            <div class="sheet-item" style="width: 15%;"><button name="roll_hit" type="roll"
                                    value="&{template:sofai} {{input=** @{character_name} attacks @{target|token_name} with @{weapon}!** \n\n Attack: ( [[ @{weaponType} - @{wounds} + @{weaponSpecialty} - @{weaponTraining}]] )d6kh@{weaponType}sd - @{injuries} - @{fatigue} + ?{Modifier|0} ]] \n Target:  [[@{target|combatDefense}]]}}">
                                    <span>Hit</span> </button></div>
                            <div class="sheet-item" style="width: 20%;"><button name="roll_Rangeddamage" type="roll"
                                    value="&{template:sofai} {{input=**@{character_name} does [[@{weaponDamageTest} + @{weaponDamageMod} + ?{Modifier|0}]] damage!**}}">
                                    <span>Damage</span> </button></div>
                        </div>
                    </div>
                </fieldset>
            </div>
        </div>

        <hr />

        <div class="sheet-3colrow">
            <h3>Possessions</h3>
            <div class="sheet-col">
                <label>Equipment & Gear</label>
                <div class="sheet-row">
                    <div class="sheet-item" style="width:85%">
                        <span>Item Name</span>
                    </div>
                    <div class="sheet-item" style="width:15%">
                        <span>Value</span>
                    </div>
                </div>
                <div class="sheet-row">
                    <fieldset class="repeating_Equip">
                        <div class="sheet-item" style="width:85%">
                            <input name="attr_Equip" type="text">
                        </div>
                        <div class="sheet-item" style="width:15%">
                            <input name="attr_EquipValue" type="text" value="">
                        </div>
                    </fieldset>
                </div>
            </div>
            <div class="sheet-col">
                <label>Mounts & Livestock</label>
                <div class="sheet-row">
                    <div class="sheet-item" style="width:75%">
                        <span>Animal</span>
                    </div>
                    <div class="sheet-item" style="width:25%">
                        <span>Value</span>
                    </div>
                </div>
                <div class="sheet-row">
                    <fieldset class="repeating_Animal">
                        <div class="sheet-item" style="width:75%">
                            <input name="attr_Animal" type="text">
                        </div>
                        <div class="sheet-item" style="width:25%">
                            <input name="attr_AnimalValue" type="text" value="">
                        </div>
                    </fieldset>
                </div>
            </div>
            <div class="sheet-col">
                <label>Currency</label>
                <div class="sheet-row">
                    <div class="sheet-item" style="width: 60%;"><span>Copper Pennies:</span></div>
                    <div class="sheet-item" style="width: 40%;"><input
                            style="background-color: #da8a67; font-weight: bold;" name="attr_pennies" type="number" />
                    </div>
                </div>
                <div class="sheet-row">
                    <div class="sheet-item" style="width: 60%;"><span>Silver Stags:</span></div>
                    <div class="sheet-item" style="width: 40%;"><input
                            style="background-color: #C0C0C0; font-weight: bold;" name="attr_stags" type="number" />
                    </div>
                </div>
                <div class="sheet-row">
                    <div class="sheet-item" style="width: 60%;"><span>Gold Dragons:</span></div>
                    <div class="sheet-item" style="width: 40%;"><input
                            style="background-color: gold; font-weight: bold;" name="attr_dragons" type="number" />
                    </div>
                </div>
                <div class="sheet-row">
                    <div class="sheet-item" style="width: 100%">
                        <span style="font-size: 0.9em; font-style: italic;">Silver Stag = 56 Pennies</span>
                    </div>
                </div>
                <div class="sheet-row">
                    <div class="sheet-item" style="width: 100%">
                        <span style="font-size: 0.9em; font-style: italic;">Gold Dragon = 210 Stags (11,760
                            Pennies)</span>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="sheet-section-advancements">
    <!-- Advancements Tab -->
    <!--%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%-->
    <div class="sheet-wrapper">
        <h3>Character Information</h3>
        <div class="sheet-2colrow">
            <div class="sheet-col">
                <div class="sheet-row">
                    <div class="sheet-item"><h3>Experience</h3></div>
                </div>
                <div class="sheet-row"></div>
                <div class="sheet-row">
                    <div class="sheet-item" style="width: 10%">
                        <span>Total:</span>
                    </div>
                    <div class="sheet-item" style="width:15%">
                        <input name="attr_exp" type="number" value="0">
                    </div>
                    <div class="sheet-item" style="width: 5%"></div>
                    <div class="sheet-item" style="width: 10%">
                        <span>Spent:</span>
                    </div>
                    <div class="sheet-item" style="width:15%">
                        <input readonly name="attr_expSpent" type="number" value="0" style="background: #4A798B !important; color: white !important; font-weight: bold !important; text-align: center !important;">
                    </div>
                    <div class="sheet-item" style="width: 5%"></div>
                    <div class="sheet-item" style="width: 15%">
                        <span>Available:</span>
                    </div>
                    <div class="sheet-item" style="width:15%">
                        <input disabled="true" name="attr_expAvail" type="number" value="@{exp} - @{expSpent}" style="background: #4A798B !important; color: white !important; font-weight: bold !important; text-align: center !important;">
                    </div> 
                </div>
                <div class="sheet-row"></div>
                <div class="sheet-row">
                    <div class="sheet-item" style="width: 25%">
                        <label>Expenditures</label>
                    </div>
                </div>
                <div class="sheet-row">                    
                        <input type="checkbox" class="arrow" /><span></span>
                        <div class="hbody">
                                <fieldset class="repeating_expSpend">
                                    <div class="sheet-item" style="width: 50%">
                                            <input name="attr_expSpend" type="text">
                                    </div>
                                    <div class="sheet-item" style="width: 15%">
                                            <input name="attr_expSpendCost" type="number" value="0">
                                    </div>
                                </fieldset>
                        </div>
                </div>
            </div>
            <div class="sheet-col">
                    <div class="sheet-row">
                        <div class="sheet-item"><h3>Glory</h3></div>
                    </div>
                    <div class="sheet-row"></div>
                <div class="sheet-row">
                    <div class="sheet-item" style="width: 10%">
                        <span>Total:</span>
                    </div>
                    <div class="sheet-item" style="width:15%">
                        <input name="attr_glory" type="number" value="0">
                    </div>
                    <div class="sheet-item" style="width: 5%"></div>
                    <div class="sheet-item" style="width: 10%">
                        <span>Spent:</span>
                    </div>
                    <div class="sheet-item" style="width:15%">
                        <input readonly name="attr_glorySpent" type="number" value="0" style="background: #4A798B !important; color: white !important; font-weight: bold !important; text-align: center !important;">
                    </div>
                    <div class="sheet-item" style="width: 5%"></div>
                    <div class="sheet-item" style="width: 15%">
                        <span>Available:</span>
                    </div>
                    <div class="sheet-item" style="width:15%">
                        <input disabled="true" name="attr_gloryAvail" type="number" value="@{glory} - @{glorySpent}" style="background: #4A798B !important; color: white !important; font-weight: bold !important; text-align: center !important;">
                    </div> 
                </div>
                <div class="sheet-row"></div>
                <div class="sheet-row">
                    <div class="sheet-item" style="width: 25%">
                        <label>Expenditures</label>
                    </div>
                </div>
                <div class="sheet-row">                    
                        <input type="checkbox" class="arrow" /><span></span>
                        <div class="hbody">
                                <fieldset class="repeating_glorySpend">
                                    <div class="sheet-item" style="width: 50%">
                                            <input name="attr_glorySpend" type="text">
                                    </div>
                                    <div class="sheet-item" style="width: 15%">
                                            <input name="attr_glorySpendCost" type="number" value="0">
                                    </div>
                                </fieldset>
                        </div>
                </div>
            </div>
        </div>

        <hr/>

        <h3>Qualities</h3>
        <div class="sheet-2colrow">
            <div class="sheet-col">
                <label>Benefits</label>
                <div class="sheet-row">
                        <div class="sheet-item" style="width: 30%">
                                <span>Name</span>
                            </div>
                            <div class="sheet-item" style="width:70%">
                                    <span>Effect</span>
                            </div>
                    <fieldset class="repeating_Benefit">
                        <div class="sheet-item" style="width: 30%">
                            <input name="attr_Benefit" type="text">
                        </div>
                        <div class="sheet-item" style="width:70%">
                            <input name="attr_BenefitEffect" type="text">
                        </div>
                    </fieldset>
                </div>
            </div>
            <div class="sheet-col">
                <label>Drawbacks</label>
                <div class="sheet-row">
                        <div class="sheet-item" style="width: 30%">
                            <span>Name</span>
                        </div>
                        <div class="sheet-item" style="width:70%">
                                <span>Effect</span>
                        </div>
                    <fieldset class="repeating_Drawback">
                            <div class="sheet-item" style="width: 30%">
                                <input name="attr_Drawback" type="text">
                            </div>
                        <div class="sheet-item" style="width:70%">
                            <input name="attr_DrawbackEffect" type="text">
                        </div>
                    </fieldset>
                </div>
            </div>
        </div>
        <br/>
        <hr/>

        <div class="sheet-3colrow">
            <div class="sheet-col">
                <div class="sheet-row">
                    <div class="sheet-item"><label>Virtues</label></div>
                </div>
                <div class="sheet-row">
                    <fieldset class="repeating_Virtue">
                        <div class="sheet-item" style="width:100%">
                            <input name="attr_Virtue" type="text">
                        </div>
                    </fieldset>
                </div>
            </div>
            <div class="sheet-col">
                <div class="sheet-row">
                    <div class="sheet-item"><label>Vices</label></div>
                </div>
                <div class="sheet-row">
                    <fieldset class="repeating_Vice">
                        <div class="sheet-item" style="width:100%">
                            <input name="attr_Vice" type="text">
                        </div>
                    </fieldset>
                </div>
            </div>
            <div class="sheet-col">
            </div>
        </div>
        <br/>
        <div class="sheet-3colrow">
            <div class="sheet-col">
                <div class="sheet-row">
                    <div class="sheet-item"><label>Goals</label></div>
                </div>
                <div class="sheet-row">
                    <fieldset class="repeating_Goal">
                        <div class="sheet-item" style="width:100%">
                            <input name="attr_Goal" type="text">
                        </div>
                    </fieldset>
                </div>
            </div>
            <div class="sheet-col">
                <div class="sheet-row">
                    <div class="sheet-item"><label>Motivations</label></div>
                </div>
                <div class="sheet-row">
                    <fieldset class="repeating_Motivation">
                        <div class="sheet-item" style="width:100%">
                            <input name="attr_Motivation" type="text">
                        </div>
                    </fieldset>
                </div>
            </div>
            <div class="sheet-col">
            </div>
        </div>
        <br/>
        <div class="sheet-3colrow">
            <div class="sheet-col">
                <div class="sheet-row">
                    <div class="sheet-item"><label>Mannerisms</label></div>
                </div>
                <div class="sheet-row">
                    <fieldset class="repeating_Mannerism">
                        <div class="sheet-item" style="width:100%">
                            <input name="attr_Mannerism" type="text">
                        </div>
                    </fieldset>
                </div>
            </div>
            <div class="sheet-col">
                <div class="sheet-row">
                    <div class="sheet-item"><label>Distinguishing Features</label></div>
                </div>
                <div class="sheet-row">
                    <fieldset class="repeating_Feature">
                        <div class="sheet-item" style="width:100%">
                            <input name="attr_Feature" type="text">
                        </div>
                    </fieldset>
                </div>
            </div>
            <div class="sheet-col">
                <div class="sheet-row">
                    <div class="sheet-item"><label>Retainers</label></div>
                </div>
                <div class="sheet-row">
                    <fieldset class="repeating_Retainer">
                        <div class="sheet-item" style="width:100%">
                            <input name="attr_Retainer" type="text">
                        </div>
                    </fieldset>
                </div>
            </div>
        </div>
        <br/>

        <div class="sheet-3colrow">
            <div class="sheet-col">
                <div class="sheet-row">
                    <div class="sheet-item"><label>Allies</label></div>
                </div>
                <div class="sheet-row">
                    <fieldset class="repeating_Ally">
                        <div class="sheet-item" style="width:100%">
                            <input name="attr_Ally" type="text">
                        </div>
                    </fieldset>
                </div>
            </div>
            <div class="sheet-col">
                <div class="sheet-row">
                    <div class="sheet-item"><label>Enemies</label></div>
                </div>
                <div class="sheet-row">
                    <fieldset class="repeating_Enemy">
                        <div class="sheet-item" style="width:100%">
                            <input name="attr_Enemy" type="text">
                        </div>
                    </fieldset>
                </div>
            </div>
            <div class="sheet-col">
                <div class="sheet-row">
                    <div class="sheet-item"><label>Oaths</label></div>
                </div>
                <div class="sheet-row">
                    <fieldset class="repeating_Oath">
                        <div class="sheet-item" style="width:100%">
                            <input name="attr_Oath" type="text">
                        </div>
                    </fieldset>
                </div>
            </div>
        </div>

        <hr/>

        <div class="sheet-row">
            <h3>Personal History</h3>
            <textarea name="attr_background"></textarea>
        </div>

        <br/>
        <br/>
        <br/>
        <br/>
        <br/>
        <br/>
        <br/>
        <br/>
        <br/>
        <br/>
        <br/>
        <br/>

    </div>
</div>

<div class="sheet-section-npcsandminions">
    <!-- Npcs and Minions Tab -->
    <!--%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%-->
    <div class="sheet-wrapper">
        <h3>Notable NPCs</h3>
        <fieldset class="repeating_NPC">
                <div class="sheet-row">
                        <div class="sheet-item" style="width:10%"><label>Name:</label></div>
                        <div class="sheet-item" style="width:50%"><input name="attr_NPCName" type="text"></div>
                    </div>
            <input type="checkbox" class="arrow" /><span></span>
            <!-- This is the selector that enables hiding a grouped area -->
            <div class="hbody">
                <!-- This is the start of the hidden div -->
                <div class="sheet-quickborder">
                    <!-- NPC Narrative lines -->
                    <div class="sheet-2colrow">
                        <div class="sheet-col">                            
                            <div class="sheet-row">
                                <div class="sheet-item" style="width:15%"><label>House:</label></div>
                                <div class="sheet-item" style="width:70%"><input name="attr_NPCHouse" type="text"></div>
                            </div>
                        </div>
                        <div class="sheet-col">
                            <div class="sheet-row">
                                <div class="sheet-item" style="width:20%"><label>Realm:</label></div>
                                <div class="sheet-item" style="width:65%"><input name="attr_NPChomeworld" type="text">
                                </div>
                            </div>
                            <div class="sheet-row">
                                <div class="sheet-item" style="width:20%"><label>Liege:</label></div>
                                <div class="sheet-item" style="width:65%"><input name="attr_NPCbackground" type="text">
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="sheet-2colrow">
                        <div class="sheet-col">
                            <div class="sheet-row">
                                <div class="sheet-item" style="width:27%"><label>Appearance:</label></div>
                                <div class="sheet-item" style="width:58%"><input name="attr_NPCApperance" type="text">
                                </div>
                            </div>
                            <div class="sheet-row">
                                <div class="sheet-item" style="width:60%"><label>Disposition (Deceive/Persuade):</label>
                                </div>
                            </div>
                            <div class="sheet-row">
                                <div class="sheet-item" style="width:20%"><label>Mine:</label></div>
                                <div class="sheet-item" style="width:50%">
                                    <select class="NPCdispoSelectMine" name="attr_NPCdispoMine">
                                        <option value="1">Affectionate (-2/+5)</option>
                                        <option value="2">Friendly (-1/+3)</option>
                                        <option value="3">Amiable (0/+1)</option>
                                        <option value="4" selected>Indifferent (0/0)</option>
                                        <option value="5">Dislike (+1/-2)</option>
                                        <option value="6">Unfriendly (+2/-4)</option>
                                        <option value="7">Malicious (+3/-6)</option>
                                    </select>
                                </div>
                            </div>
                            <div class="sheet-row">
                                <div class="sheet-item" style="width:20%"><label>Theirs:</label></div>
                                <div class="sheet-item" style="width:50%">
                                    <select class="NPCdispoSelectTheirs" name="attr_NPCdispoTheirs">
                                        <option value="1">Affectionate (-2/+5)</option>
                                        <option value="2">Friendly (-1/+3)</option>
                                        <option value="3">Amiable (0/+1)</option>
                                        <option value="4" selected>Indifferent (0/0)</option>
                                        <option value="5">Dislike (+1/-2)</option>
                                        <option value="6">Unfriendly (+2/-4)</option>
                                        <option value="7">Malicious (+3/-6)</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        <div class="sheet-col">
                            <div class="sheet-row">
                                <div class="sheet-item" style="width:15%"><label>Notes:</label></div>
                            </div>
                            <div class="sheet-row">
                                <textarea name="attr_NPCnotesRe"></textarea>
                            </div>
                        </div>
                    </div>
                    <div class="sheet-row"></div>
                </div>
        </fieldset>
    </div> <!-- This is the closing div for the hidden grouping for NPC repeatable -->
</div>

<div class="sheet-section-journal">
    <!-- Journal Tab-->
    <!--%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%-->
    <div class="sheet-wrapper">
        <h3>Journal</h3>
        <fieldset class="repeating_journalnotes">
            <div><input style="font-size: 18pt; height: 35px;" align="middle" name="attr_NotesTitle" type="text">
            </div>
            <input type="checkbox" class="arrow" /><span></span>
            <div class="hbody">
                <textarea name="attr_journalnotesRe"></textarea>
            </div>
        </fieldset>
    </div>
</div>

<script type="text/worker">
    /* ---- BEGIN: TheAaronSheet.js ---- */
    // Github:   https://github.com/shdwjk/TheAaronSheet/blob/master/TheAaronSheet.js
    // By:       The Aaron, Arcane Scriptomancer
    // Contact:  https://app.roll20.net/users/104025/the-aaron
    var TAS = TAS || (function(){
        'use strict';
        var version = '0.2.3',
            lastUpdate = 1457098056,
            loggingSettings = {
                debug: {
                    key:     'debug',
                    title:   'DEBUG',
                    color: {
                        bgLabel: '#7732A2',
                        label:   '#F2EF40',
                        bgText:  '#FFFEB7',
                        text:    '#7732A2'
                    }
                },
                error: {
                    key:     'error',
                    title:   'Error',
                    color: {
                        bgLabel: '#C11713',
                        label:   'white',
                        bgText:  '#C11713',
                        text:    'white'
                    }
                },
                warn: {
                    key:     'warn',
                    title:   'Warning',
                    color: {
                        bgLabel: '#F29140',
                        label:   'white',
                        bgText:  '#FFD8B7',
                        text:    'black'
                    }
                },
                info: {
                    key:     'info',
                    title:   'Info',
                    color: {
                        bgLabel: '#413FA9',
                        label:   'white',
                        bgText:  '#B3B2EB',
                        text:    'black'
                    }
                },
                notice: {
                    key:     'notice',
                    title:   'Notice',
                    color: {
                        bgLabel: '#33C133',
                        label:   'white',
                        bgText:  '#ADF1AD',
                        text:    'black'
                    }
                },
                log: {
                    key:     'log',
                    title:   'Log',
                    color: {
                        bgLabel: '#f2f240',
                        label:   'black',
                        bgText:  '#ffff90',
                        text:    'black'
                    }
                },
                callstack: {
                    key:     'TAS',
                    title:   'function',
                    color: {
                        bgLabel: '#413FA9',
                        label:   'white',
                        bgText:  '#B3B2EB',
                        text:    'black'
                    }
                },
                callstack_async: {
                    key:     'TAS',
                    title:   'ASYNC CALL',
                    color: {
                        bgLabel: '#413FA9',
                        label:   'white',
                        bgText:  '#413FA9',
                        text:    'white'
                    }
                },
                TAS: {
                    key:     'TAS',
                    title:   'TAS',
                    color: {
                        bgLabel: 'grey',
                        label:   'black;background:linear-gradient(#304352,#d7d2cc,#d7d2cc,#d7d2cc,#304352)',
                        bgText:  'grey',
                        text:    'black;background:linear-gradient(#304352,#d7d2cc,#d7d2cc,#d7d2cc,#304352)'
                    }
                }
            },
            config = {
                debugMode: false,
                logging: {
                    log: true,
                    notice: true,
                    info: true,
                    warn: true,
                    error: true,
                    debug: false
                }
            },
            callstackRegistry = [],
            queuedUpdates = {}, //< Used for delaying saves till the last momment.
        complexType = function(o){
            switch(typeof o){
                case 'string':
                    return 'string';
                case 'boolean':
                    return 'boolean';
                case 'number':
                    return (_.isNaN(o) ? 'NaN' : (o.toString().match(/\./) ? 'decimal' : 'integer'));
                case 'function':
                    return 'function: '+(o.name ? o.name+'()' : '(anonymous)');
                case 'object':
                    return (_.isArray(o) ? 'array' : (_.isArguments(o) ? 'arguments' : ( _.isNull(o) ? 'null' : 'object')));
                default:
                    return typeof o;
            }
        },
        dataLogger = function(primaryLogger,secondaryLogger,data){
            _.each(data,function(m){
                var type = complexType(m);
                switch(type){
                    case 'string':
                        primaryLogger(m);
                        break;
                    case 'undefined':
                    case 'null':
                    case 'NaN':
                        primaryLogger('['+type+']');
                        break;
                    case 'number':
                    case 'not a number':
                    case 'integer':
                    case 'decimal':
                    case 'boolean':
                        primaryLogger('['+type+']: '+m);
                        break;
                    default:
                        primaryLogger('['+type+']:=========================================');
                        secondaryLogger(m);
                        primaryLogger('=========================================================');
                        break;
                }
            });
        },
        colorLog = function(options){
            var coloredLoggerFunction,
                key = options.key,
                label = options.title || 'TAS',
                lBGColor = (options.color && options.color.bgLabel) || 'blue',
                lTxtColor = (options.color && options.color.label) || 'white',
                mBGColor = (options.color && options.color.bgText) || 'blue',
                mTxtColor = (options.color && options.color.text) || 'white';
            coloredLoggerFunction = function(message){
                console.log(
                    '%c '+label+': %c '+message + ' ',
                    'background-color: '+lBGColor+';color: '+lTxtColor+'; font-weight:bold;',
                    'background-color: '+mBGColor+';color: '+mTxtColor+';'
                ); 
            };
            return function(){
                if('TAS'===key || config.logging[key]){
                   dataLogger(coloredLoggerFunction,function(m){console.log(m);},_.toArray(arguments)); 
                }
            };
        },
        logDebug  = colorLog(loggingSettings.debug),
        logError  = colorLog(loggingSettings.error),
        logWarn   = colorLog(loggingSettings.warn),
        logInfo   = colorLog(loggingSettings.info),
        logNotice = colorLog(loggingSettings.notice),
        logLog    = colorLog(loggingSettings.log),
        log       = colorLog(loggingSettings.TAS),
        logCS     = colorLog(loggingSettings.callstack),
        logCSA    = colorLog(loggingSettings.callstack_async),
        registerCallstack = function(callstack,label){
            var idx=_.findIndex(callstackRegistry,function(o){
                return (_.difference(o.stack,callstack).length === _.difference(callstack,o.stack).length) &&
                    _.difference(o.stack,callstack).length === 0 &&
                    o.label === label;
            });
            if(-1 === idx){
                idx=callstackRegistry.length;
                callstackRegistry.push({
                    stack: callstack,
                    label: label
                });
            }
            return idx;
        },
        setConfigOption = function(options){
            var newconf =_.defaults(options,config);
            newconf.logging=_.defaults(
                (options && options.logging)||{},
                config.logging
            );
            config=newconf;
        },
        
        debugMode = function(){
            config.logging.debug=true;
            config.debugMode = true;
        },
        getCallstack = function(){
            var e = new Error('dummy'),
                stack = _.map(_.rest(e.stack.replace(/^[^\(]+?[\n$]/gm, '')
                .replace(/^\s+at\s+/gm, '')
                .replace(/^Object.<anonymous>\s*\(/gm, '{anonymous}()@')
                .split('\n')),function(l){
                    return l.replace(/\s+.*$/,'');
                });
            return stack;
        },
        logCallstackSub = function(cs){
            var matches, csa;
            _.find(cs,function(line){
                matches = line.match(/TAS_CALLSTACK_(\d+)/);
                if(matches){
                   csa=callstackRegistry[matches[1]];
                   logCSA( '===================='+(csa.label ? '> '+csa.label+' <' : '')+'====================');
                   logCallstackSub(csa.stack);
                   return true;
                } 
                logCS(line);
                return false;
            });
        },
        logCallstack = function(){
            var cs;
            if(config.debugMode){
                cs = getCallstack();
                cs.shift();
                log('==============================> CALLSTACK <==============================');
                logCallstackSub(cs);
                log('=========================================================================');
            }
        },
        wrapCallback = function (label, callback, context){
            var callstack;
            if('function' === typeof label){
                context=callback;
                callback=label;
                label=undefined;
            }
            if(!config.debugMode){
                return (function(cb,ctx){
                    return function(){
                        cb.apply(ctx||{},arguments);
                    };
                }(callback,context));
            }
            
            callstack = getCallstack();
            callstack.shift();
            
            return (function(cb,ctx,cs,lbl){
                var ctxref=registerCallstack(cs,lbl);
                /*jshint -W054 */
                return new Function('cb','ctx','TASlog',
                    "return function TAS_CALLSTACK_"+ctxref+"(){"+
                        "TASlog('Entering: '+(cb.name||'(anonymous function)'));"+
                        "cb.apply(ctx||{},arguments);"+
                        "TASlog('Exiting: '+(cb.name||'(anonymous function)'));"+
                    "};")(cb,ctx,log);
                /*jshint +W054 */
            }(callback,context,callstack,label));
        },
        prepareUpdate = function( attribute, value ){
            queuedUpdates[attribute]=value;
        },
        applyQueuedUpdates = function() {
          setAttrs(queuedUpdates);
          queuedUpdates = {};
        },
        namesFromArgs = function(args,base){
            return _.chain(args)
                .reduce(function(memo,attr){
                    if('string' === typeof attr) {
                        memo.push(attr);
                    } else if(_.isArray(args) || _.isArguments(args)){
                        memo = namesFromArgs(attr,memo);
                    }
                    return memo;
                },(_.isArray(base) && base) || [])
                .uniq()
                .value();
        },
        addId = function(obj,value){
            Object.defineProperty(obj,'id',{
                value: value,
                writeable: false,
                enumerable: false
            });
        },
        addProp = function(obj,prop,value,fullname){
            (function(){
                var pname=(_.contains(['S','F','I','D'],prop) ? '_'+prop : prop),
                    full_pname = fullname || prop,
                    pvalue=value;
                _.each(['S','I','F'],function(p){
                    if( !_.has(obj,p)){
                        Object.defineProperty(obj, p, {
                            value: {},
                            enumerable: false,
                            readonly: true
                        });
                    }
                });
                if( !_.has(obj,'D')){
                    Object.defineProperty(obj, 'D', {
                        value: _.reduce(_.range(10),function(m,d){
                                Object.defineProperty(m, d, {
                                    value: {},
                                    enumerable: true,
                                    readonly: true
                                });
                                return m;
                            },{}),
                        enumerable: false,
                        readonly: true
                    });
                }
                // Raw value
                Object.defineProperty(obj, pname, {
                    enumerable: true,
                    set: function(v){
                        if(v!==pvalue) {
                            pvalue=v;
                            prepareUpdate(full_pname,v);
                        }
                    },
                    get: function(){
                        return pvalue;
                    }
                });
                
                // string value
                Object.defineProperty(obj.S, pname, {
                    enumerable: true,
                    set: function(v){
                        var val=v.toString();
                        if(val !== pvalue) {
                            pvalue=val;
                            prepareUpdate(full_pname,val);
                        }
                    },
                    get: function(){
                        return pvalue.toString();
                    }
                });
                // int value
                Object.defineProperty(obj.I, pname, {
                    enumerable: true,
                    set: function(v){
                        var val=parseInt(v,10) || 0;
                        if(val !== pvalue){
                            pvalue=val;
                            prepareUpdate(full_pname,val);
                        }
                    },
                    get: function(){
                        return parseInt(pvalue,10) || 0;
                    }
                });
                // float value
                Object.defineProperty(obj.F, pname, {
                    enumerable: true,
                    set: function(v){
                        var val=parseFloat(v) || 0;
                        if(val !== pvalue) {
                            pvalue=val;
                            prepareUpdate(full_pname,val);
                        }
                    },
                    get: function(){
                        return parseFloat(pvalue) || 0;
                    }
                });
                _.each(_.range(10),function(d){
                    Object.defineProperty(obj.D[d], pname, {
                        enumerable: true,
                        set: function(v){
                            var val=(parseFloat(v) || 0).toFixed(d);
                            if(val !== pvalue){
                                pvalue=val;
                                prepareUpdate(full_pname,val);
                            }
                        },
                        get: function(){
                            return (parseFloat(pvalue) || 0).toFixed(d);
                        }
                    });
                });
            }());
        },
        
        repeating = function( section ) {
            return (function(s){
                var sectionName = s,
                    attrNames = [],
                    fieldNames = [],
                    operations = [],
                    after = [],
                
                repAttrs = function TAS_Repeating_Attrs(){
                    attrNames = namesFromArgs(arguments,attrNames);
                    return this;
                },
                repFields = function TAS_Repeating_Fields(){
                    fieldNames = namesFromArgs(arguments,fieldNames);
                    return this;
                },
                repReduce = function TAS_Repeating_Reduce(func, initial, final, context) { 
                    operations.push({
                        type: 'reduce',
                        func: (func && _.isFunction(func) && func) || _.noop,
                        memo: (_.isUndefined(initial) && 0) || initial,
                        final: (final && _.isFunction(final) && final) || _.noop,
                        context: context || {}
                    });
                    return this;
                },
                repMap = function TAS_Repeating_Map(func, final, context) {
                    operations.push({
                        type: 'map',
                        func: (func && _.isFunction(func) && func) || _.noop,
                        final: (final && _.isFunction(final) && final) || _.noop,
                        context: context || {}
                    });
                    return this;
                },
                repEach = function TAS_Repeating_Each(func, final, context) {
                    operations.push({
                        type: 'each',
                        func: (func && _.isFunction(func) && func) || _.noop,
                        final: (final && _.isFunction(final) && final) || _.noop,
                        context: context || {}
                    });
                    return this;
                },
                repTap = function TAS_Repeating_Tap(final, context) {
                    operations.push({
                        type: 'tap',
                        final: (final && _.isFunction(final) && final) || _.noop,
                        context: context || {}
                    });
                    return this;
                },
                repAfter = function TAS_Repeating_After(callback,context) {
                    after.push({
                        callback: (callback && _.isFunction(callback) && callback) || _.noop,
                        context: context || {}
                    });
                    return this;
                },
                repExecute = function TAS_Repeating_Execute(callback,context){
                    var rowSet = {},
                        attrSet = {},
                        fieldIds = [],
                        fullFieldNames = [];
                    repAfter(callback,context);
                    // call each operation per row.
                    // call each operation's final
                    getSectionIDs("repeating_"+sectionName,function(ids){
                        fieldIds = ids;
                        fullFieldNames = _.reduce(fieldIds,function(memo,id){
                            return memo.concat(_.map(fieldNames,function(name){
                                return 'repeating_'+sectionName+'_'+id+'_'+name;  
                            }));
                        },[]);
                        getAttrs( _.uniq(attrNames.concat(fullFieldNames)), function(values){
                            _.each(attrNames,function(aname){
                                if(values.hasOwnProperty(aname)){
                                    addProp(attrSet,aname,values[aname]);
                                }
                            });
                            rowSet = _.reduce(fieldIds,function(memo,id){
                                var r={};
                                addId(r,id);
                                _.each(fieldNames,function(name){
                                    var fn = 'repeating_'+sectionName+'_'+id+'_'+name;  
                                    addProp(r,name,values[fn],fn);
                                });
                                memo[id]=r;
                                return memo;
                            },{});
                            _.each(operations,function(op){
                                var res;
                                switch(op.type){
                                    case 'tap':
                                        _.bind(op.final,op.context,rowSet,attrSet)();
                                        break;
                                    case 'each':
                                        _.each(rowSet,function(r){
                                            _.bind(op.func,op.context,r,attrSet,r.id,rowSet)();
                                        });
                                        _.bind(op.final,op.context,rowSet,attrSet)();
                                        break;
                                    case 'map':
                                        res = _.map(rowSet,function(r){
                                            return _.bind(op.func,op.context,r,attrSet,r.id,rowSet)();
                                        });
                                        _.bind(op.final,op.context,res,rowSet,attrSet)();
                                        break;
                                    case 'reduce':
                                        res = op.memo;
                                        _.each(rowSet,function(r){
                                            res = _.bind(op.func,op.context,res,r,attrSet,r.id,rowSet)();
                                        });
                                        _.bind(op.final,op.context,res,rowSet,attrSet)();
                                        break;
                                }
                            });
                            // finalize attrs
                            applyQueuedUpdates();
                            _.each(after,function(op){
                                _.bind(op.callback,op.context)();
                            });
                        });
                    });
                };
                    
                return {
                    attrs: repAttrs,
                    attr: repAttrs,
                    column: repFields,
                    columns: repFields,
                    field: repFields,
                    fields: repFields,
                    reduce: repReduce,
                    inject: repReduce,
                    foldl: repReduce,
                    map: repMap,
                    collect: repMap,
                    each: repEach,
                    forEach: repEach,
                    tap: repTap,
                    'do': repTap,
                    after: repAfter,
                    last: repAfter,
                    done: repAfter,
                    execute: repExecute,
                    go: repExecute,
                    run: repExecute
                };
            }(section));
        },
        repeatingSimpleSum = function(section, field, destination){
            repeating(section)
                .attr(destination)
                .field(field)
                .reduce(function(m,r){
                    return m + (r.F[field]);
                },0,function(t,r,a){
                    a.S[destination]=t;
                })
                .execute();
        };
        console.log('%câ€¢.Â¸Â¸.â€¢*Â´Â¨`*â€¢.Â¸Â¸.â€¢*Â´Â¨`*â€¢.Â¸  The Aaron Sheet  v'+version+'  Â¸.â€¢*Â´Â¨`*â€¢.Â¸Â¸.â€¢*Â´Â¨`*â€¢.Â¸Â¸.â€¢','background: linear-gradient(to right,green,white,white,green); color:black;text-shadow: 0 0 8px white;');
        console.log('%câ€¢.Â¸Â¸.â€¢*Â´Â¨`*â€¢.Â¸Â¸.â€¢*Â´Â¨`*â€¢.Â¸  Last update: '+(new Date(lastUpdate*1000))+'  Â¸.â€¢*Â´Â¨`*â€¢.Â¸Â¸.â€¢*Â´Â¨`*â€¢.Â¸Â¸.â€¢','background: linear-gradient(to right,green,white,white,green); color:black;text-shadow: 0 0 8px white;');
        return {
            /* Repeating Sections */
            repeatingSimpleSum: repeatingSimpleSum,
            repeating: repeating,
            /* Configuration */
            config: setConfigOption,
            /* Debugging */
            callback: wrapCallback,
            callstack: logCallstack,
            debugMode: debugMode,
            _fn: wrapCallback,
            /* Logging */
            debug: logDebug,
            error: logError,
            warn: logWarn,
            info: logInfo,
            notice: logNotice,
            log: logLog
        };
    }());

    on('change:repeating_weapon', function(){
        TAS.repeatingSimpleSum('weapon','weaponBulk','totalWeaponBulk')
    });


    on('change:repeating_expSpend', function(){
        TAS.repeatingSimpleSum('expSpend', 'expSpendCost', 'expSpent')
    });

    on('change:repeating_glorySpend', function(){
        TAS.repeatingSimpleSum('glorySpend', 'glorySpendCost', 'glorySpent')
    });
</script>

<rolltemplate class="sheet-rolltemplate-sofai">
        {{input}}
    </rolltemplate>


<!-- ==== Sheet definition ==== -->
	
    <!-- Hidden attributes for calculated values -->
    <input type="hidden" name="attr_character_strength_half" value="0"> 	
    <input type="hidden" name="attr_character_constitution_half" value="0"> 	
    <input type="hidden" name="attr_character_dexterity_half" value="0"> 	
    <input type="hidden" name="attr_character_intelligence_half" value="0"> 	
    <input type="hidden" name="attr_character_power_half" value="0"> 	
    <input type="hidden" name="attr_character_athletics_half" value="30"> 	
    <input type="hidden" name="attr_character_drive_half" value="30"> 	
    <input type="hidden" name="attr_character_navigate_half" value="30"> 	
    <input type="hidden" name="attr_character_observation_half" value="30"> 	
    <input type="hidden" name="attr_character_read-person_half" value="30"> 	
    <input type="hidden" name="attr_character_research_half" value="30"> 	
    <input type="hidden" name="attr_character_sense-vestigia_half" value="30"> 	
    <input type="hidden" name="attr_character_social_half" value="30"> 	
    <input type="hidden" name="attr_character_stealth_half" value="30"> 
	<input type="hidden" name="attr_character_expert1_half" value="0"> 
	<input type="hidden" name="attr_character_expert2_half" value="0"> 
	<input type="hidden" name="attr_character_expert3_half" value="0"> 
	<input type="hidden" name="attr_character_expert4_half" value="0"> 
	<input type="hidden" name="attr_character_expert5_half" value="0"> 
	<input type="hidden" name="attr_character_expert6_half" value="0"> 
	<input type="hidden" name="attr_character_expert7_half" value="0"> 
	<input type="hidden" name="attr_character_expert8_half" value="0"> 
	<input type="hidden" name="attr_character_expert9_half" value="0">	
	<input type="hidden" name="attr_character_expert10_half" value="0">	
	<input type="hidden" name="attr_character_expert11_half" value="0">	
    <input type="hidden" name="attr_character_fighting_half" value="0"> 	
    <input type="hidden" name="attr_character_firearms_half" value="0"> 	
	<input type="hidden" name="attr_character_luck_current_half" value="0"> 
    <input type="hidden" name="attr_character_status" value=""> 
    <input type="hidden" name="attr_character_status_desc" value="">  
	<input type="hidden" name="attr_character_magic_half" value="30"> 
	<input type="hidden" name="attr_character_statstotal" value = "0">
	
	

    <!-- Value used for dice rolls - fumble will be changed based on damage level -->
    <input type="hidden" name="attr_roll_fumble" value="100">  
    <input type="hidden" name="attr_roll_skill_formula" value="{{?{Type|Standard,standard=[[d100cs0cf0]]|Advantage,advantage=[[2d100cs0cf0kl1]]|Disadvantage,disadvantage=[[2d100cs0cf0kh1]]}}}">
	<input type="hidden" name="attr_roll_skill_description" value="For opposed rolls the greater success wins, ties go to the initiator.">  
    <input type="hidden" name="attr_roll_damage_formula" value="{{?{Type|Standard,standard=[[d100cs0cf0]]|Advantage,advantage=[[2d100cs0cf0kl1]]|Disadvantage,disadvantage=[[2d100cs0cf0kh1]]}}}"> 
    
     
    <!-- character sheet header -->
    <div class="sheet-header-bar">
    	<span class="sheet-game-name">Rivers of London</span> <span class="sheet-version">version 0.2</span> 
    	
    	<!-- sheet controll buttons -->
    	<div class="sheet-page-control">
    	    <!-- need to mirror the hidden attribute here for CSS magic to change effects on buttons to match selected page -->
    	    <input type="hidden" class="sheet-page-toggle" name="attr_pagename"  title="@{pagename}" value = "stats">
        	<button type="action" class="sheet-page-btn" id="sheet-btn-stats" name="act_stats" autofocus>Stats &amp; Skills</button>
        	<button type="action" class="sheet-page-btn" id="sheet-btn-contacts" name="act_contacts">Contacts &amp; Magic</button>
        	<button type="action" class="sheet-page-btn" id="sheet-btn-equipment" name="act_equipment">Equipment &amp; Notes</button>
        	<div class="sheet-lock-icon"><input class="sheet-lock-state" name="attr_character_lock_state" type="checkbox"><span></span></div>
        </div>
    </div>
	
	 <!-- input used for CSS page hiding/showing magic - must be at same level as page divs -->
    <input type="hidden" class="sheet-page-toggle" name="attr_pagename"  value="stats"/>


	<!-- Main charcater sheet page -->
	<div class="sheet-stats-page">
        <div class="sheet-grid-section-stats">
            
            <!-- Investigator stats & skills -->	
        	<div class="sheet-bio sheet-block">
            	<div class="sheet-section-inner-container">
            	    <h4 class="sheet-section-head">Investigator Info</h4>
            		<div class="sheet-section-row">
            		    <input type="hidden" class="sheet-lock-state" name="attr_character_lock_state"/>
            		    
            			<label class="sheet-label sheet-label-medium-width">Occupation</label>
            			<input class="sheet-text-short sheet-text-edit" name="attr_character_occupation" type="text">
            			<input class="sheet-text-short sheet-text-readonly" name="attr_character_occupation" type="text" readonly>
            		</div>
            		<div  class="sheet-section-row">
            		    <input type="hidden" class="sheet-lock-state" name="attr_character_lock_state"/>
            		    
            			<label class="sheet-label sheet-label-medium-width">Birthplace</label>
            			<input class="sheet-text-short sheet-text-edit" name="attr_character_birthplace" type="text">
            			<input class="sheet-text-short sheet-text-readonly" name="attr_character_birthplace" type="text" readonly>
            		</div>
            		<div class="sheet-section-row">
            		    <input type="hidden" class="sheet-lock-state" name="attr_character_lock_state"/>
            		    
            			<label class="sheet-label sheet-label-medium-width">Affluence</label>
            			<input class="sheet-text-short sheet-text-edit" name="attr_character_affluence" type="text">
            			<input class="sheet-text-short sheet-text-readonly" name="attr_character_affluence" type="text" readonly>
            		</div>	
            		<div  class="sheet-section-row">
            		    <input type="hidden" class="sheet-lock-state" name="attr_character_lock_state"/>
            		    
            		    <label class="sheet-label sheet-label-medium-width">Pronoun</label>
            			<input class="sheet-text-short sheet-text-edit" name="attr_character_pronoun" type="text">
            			<input class="sheet-text-short sheet-text-readonly" name="attr_character_pronoun" type="text" readonly>
            		</div>
            		<div  class="sheet-section-row">
            		    <input type="hidden" class="sheet-lock-state" name="attr_character_lock_state"/>
            		    
            			<label class="sheet-label sheet-label-medium-width">Age</label>
            			<input class="sheet-text-short sheet-text-edit" name="attr_character_age" type="text">
            			<input class="sheet-text-short sheet-text-readonly" name="attr_character_age" type="text" readonly>
                	</div>
                	<div  class="sheet-section-row">
                	    <input type="hidden" class="sheet-lock-state" name="attr_character_lock_state"/>
                	    
            			<label class="sheet-label sheet-label-medium-width">Residence</label>
            			<textarea class="sheet-textarea-residence sheet-text-edit" name="attr_character_residence"></textarea>
            			<textarea class="sheet-textarea-residence sheet-text-readonly" name="attr_character_residence" readonly></textarea>
            		</div>           		
                	<div class="sheet-section-row">
                	    <input type="hidden" class="sheet-lock-state" name="attr_character_lock_state"/>
                	    
                	    <div class="sheet-demimonde-control sheet-section-unlocked">
                	         <label class="sheet-label sheet-label-medium-width">Type</label>
                	         <select name="attr_demimonde" class="sheet-dropdown-edit">
                	             <option value="Human" selected="selected">Human</option>
								 <option value="Human-Magic">Human - Magic</option>
                	             <option value="Demi-Monde">Demi-Monde</option>
                	         </select>
                    	</div>
                    	<div class="sheet-demimonde-control  sheet-section-locked">
                    	    <label class="sheet-label sheet-label-medium-width">Type</label>
                    	    <input class="sheet-text-short sheet-dropdown-value" name="attr_demimonde" type="text" value="Human" readonly>
                    	</div>
                    </div>
        		</div>
        	</div>
        	
        	<!-- Investigator stats -->
        	<div class="sheet-stats sheet-block">
        	    <div class="sheet-section-inner-container">
            	    <h4 class="sheet-section-head">Characteristics</h4>
            		<div class="sheet-section-row">
            		    <input type="hidden" class="sheet-lock-state" name="attr_character_lock_state"/>
                	    
            			<label class="sheet-label sheet-label-medium-width">Strength</label>
            			<input name="attr_character_strength" class="sheet-stat-input sheet-text-edit" type="number" min="0" max="100" value = "0">
            			<input name="attr_character_strength" class="sheet-stat-input sheet-text-readonly" type="number" min="0" max="100" value = "0" readonly>
            			<span>/</span>
            			<input type="number" class="sheet-stat-input" name="attr_character_strength_half" value="0" readonly>
                        <button type="roll" name="roll_strength" value="&{template:rol} {{rollname=Strength}} {{charname=@{character_name}}} {{success=[[@{character_strength}]]}} {{hard=[[@{character_strength_half}]]}} {{fumble=[[@{character_fumble}]]}} {{status=@{character_status}}}  @{roll_skill_formula}"></button>
                        <button type="roll" id="sheet-damage-strength" name="roll_strength_damage" value="&{template:rol} {{damageroll=1}} {{rollname=Damage (Strength)}} {{charname=@{character_name}}} {{success=[[@{character_strength}]]}} {{hard=[[@{character_strength_half}]]}} {{fumble=[[@{character_fumble}]]}} {{status=@{character_status}}} @{roll_damage_formula}"></button>        			
            			<br>
           			    <span class="sheet-hint sheet-hint-medium-width"/><span class="sheet-hint sheet-hint-full">Full</span><span class="sheet-hint sheet-hint-half">Half</span>
            		</div>
            		<div class="sheet-section-row">
							<input type="hidden" class="sheet-lock-state" name="attr_character_lock_state"/>
					
            			    <label class="sheet-label sheet-label-medium-width">Constitution</label>
            			    <input name="attr_character_constitution" class="sheet-stat-input sheet-text-edit" type="number" min="0" max="100" value = "0"> 
							<input name="attr_character_constitution" class="sheet-stat-input sheet-text-readonly" type="number" min="0" max="100" value = "0" readonly> 
            			    <span class="sheet-input-seperator">/</span>
                			<input name="attr_character_constitution_half" class="sheet-stat-input" type="number" value="0" readonly> 	
                            <button type="roll" name="roll_constitution" value="&{template:rol} {{rollname=Constitution}} {{charname=@{character_name}}} {{success=[[@{character_constitution}]]}} {{hard=[[@{character_constitution_half}]]}} {{fumble=[[@{character_fumble}]]}} {{status=@{character_status}}}  @{roll_skill_formula}"></button>        			
                            <br>
               			    <span class="sheet-hint sheet-hint-medium-width"/><span class="sheet-hint sheet-hint-full">Full</span><span class="sheet-hint sheet-hint-half">Half</span>
            		</div>
            		<div class="sheet-section-row">
						<input type="hidden" class="sheet-lock-state" name="attr_character_lock_state"/>
						
            			<label class="sheet-label sheet-label-medium-width">Dexterity</label>
            			<input name="attr_character_dexterity" class="sheet-stat-input sheet-text-edit" type="number" min="0" max="100" value = "0">
						<input name="attr_character_dexterity" class="sheet-stat-input sheet-text-readonly" type="number" min="0" max="100" value = "0" readonly>
            			<span>/</span>
            			<input name="attr_character_dexterity_half" class="sheet-stat-input" type="number" value="0" readonly> 	
                        <button type="roll" name="roll_dexterity" value="&{template:rol} {{rollname=Dexterity}} {{charname=@{character_name}}} {{success=[[@{character_dexterity}]]}} {{hard=[[@{character_dexterity_half}]]}} {{fumble=[[@{character_fumble}]]}} {{status=@{character_status}}}  @{roll_skill_formula}"></button>        			
                        <button type="roll" id="sheet-damage-dexterity" name="roll_dexterity_damage" value="&{template:rol} {{damageroll=1}} {{rollname=Damage (Dexterity)}} {{charname=@{character_name}}} {{success=[[@{character_dexterity}]]}} {{hard=[[@{character_dexterity_half}]]}} {{fumble=[[@{character_fumble}]]}} {{status=@{character_status}}} @{roll_damage_formula}"></button>        			
                        <br>
           			    <span class="sheet-hint sheet-hint-medium-width"/><span class="sheet-hint sheet-hint-full">Full</span><span class="sheet-hint sheet-hint-half">Half</span>
            		</div>
            		<div class="sheet-section-row">
						<input type="hidden" class="sheet-lock-state" name="attr_character_lock_state"/>
						
            			<label class="sheet-label sheet-label-medium-width">Intelligence</label>
            			<input name="attr_character_intelligence" class="sheet-stat-input sheet-text-edit" type="number" min="0" max="100" value = "0">
						<input name="attr_character_intelligence" class="sheet-stat-input sheet-text-readonly" type="number" min="0" max="100" value = "0" readonly>
            			<span>/</span>
            			<input name="attr_character_intelligence_half" class="sheet-stat-input" type="number" value="0" readonly> 
                        <button type="roll" name="roll_intelligence" value="&{template:rol} {{rollname=Intelligence}} {{charname=@{character_name}}} {{success=[[@{character_intelligence}]]}} {{hard=[[@{character_intelligence_half}]]}} {{fumble=[[@{character_fumble}]]}} {{status=@{character_status}}}  @{roll_skill_formula}"></button>        			
                        <br>
           			    <span class="sheet-hint sheet-hint-medium-width"/><span class="sheet-hint sheet-hint-full">Full</span><span class="sheet-hint sheet-hint-half">Half</span>
            		</div>
            		<div class="sheet-section-row">
						<input type="hidden" class="sheet-lock-state" name="attr_character_lock_state"/>
						
            			<label class="sheet-label sheet-label-medium-width">Power</label>
            			<input name="attr_character_power" class="sheet-stat-input sheet-text-edit" type="number" min="0" max="100" value = "0">
						<input name="attr_character_power" class="sheet-stat-input sheet-text-readonly" type="number" min="0" max="100" value = "0" readonly>
            			<span>/</span>
            			<input name="attr_character_power_half" class="sheet-stat-input" type="number" value="0" readonly> 	
                        <button type="roll" name="roll_power" value="&{template:rol} {{rollname=Power}} {{charname=@{character_name}}} {{success=[[@{character_power}]]}} {{hard=[[@{character_power_half}]]}} {{fumble=[[@{character_fumble}]]}} {{status=@{character_status}}}  @{roll_skill_formula}"></button>        			
    					<br>
           			    <span class="sheet-hint sheet-hint-medium-width"/><span class="sheet-hint sheet-hint-full">Full</span><span class="sheet-hint sheet-hint-half">Half</span>
            		</div>
					<div class="sheet-section-row">
						<input type="hidden" class="sheet-lock-state" name="attr_character_lock_state"/>
						
						<div class="sheet-total-section">														
							<label class="sheet-label sheet-label-medium-width">Total</label>
							<input name="attr_character_statstotal" class="sheet-stat-total" type="number" readonly>
						</div>			
					</div>
					
            	</div>
        	</div>
      	
      	    <!-- Suplimentery info -->
        	<div class="sheet-sup sheet-block">
        	    <div class="sheet-section-inner-container">
    	        	<!-- input used for CSS page hiding/showing demi-monde stuff - must be at same level as components to change -->
                    <input type="hidden" class="sheet-demimonde-toggle" name="attr_demimonde"  value="Human"/>
	                    
            	    <h4 class="sheet-section-head">Supplemental  info</h4>
            		<div class="sheet-section-row">
						<input type="hidden" class="sheet-lock-state" name="attr_character_lock_state"/>
					
            			<label class="sheet-label sheet-label-short-width">MOV</label>
            			<input name="attr_character_mov" class="sheet-stat-input sheet-text-edit" type="number" value = "0" min="0">
						<input name="attr_character_mov" class="sheet-stat-input sheet-text-readonly" type="number" value = "0" min="0" readonly>
						
						<label class="sheet-label sheet-label-short-width sheet-label-right">XP</label>
            			<input name="attr_character_xp" class="sheet-stat-input sheet-text-edit" type="number" value = "0" min="0">
						<input name="attr_character_xp" class="sheet-stat-input sheet-text-readonly" type="number" value = "0" min="0" readonly>
            			<br>
           			    <span class="sheet-hint sheet-hint-short-width"/>
            		</div>
            		<div class="sheet-section-row">
						<input type="hidden" class="sheet-lock-state" name="attr_character_lock_state"/>
						
            			<label class="sheet-label sheet-label-short-width">Luck</label>
            			<input name="attr_character_luck" class="sheet-stat-input sheet-text-edit" type="number" value = "0" min="0" max="100">
						<input name="attr_character_luck" class="sheet-stat-input sheet-text-readonly" type="number" value = "0" min="0"  max="100" readonly>
            			<span>/</span>
            			<input name="attr_character_luck_current" class="sheet-stat-input sheet-text-always-edit" type="number" value = "0" min="0" max="100">
            			<button type="roll" name="roll_luck" value="&{template:rol} {{rollname=Luck}} {{charname=@{character_name}}} {{success=[[@{character_luck_current}]]}} {{hard=[[@{character_luck_current_half}]]}} {{fumble=[[@{character_fumble}]]}} {{status=@{character_status}}}  @{roll_skill_formula}"></button>        			
          			    <br>
           			    <span class="sheet-hint sheet-hint-short-width"/><span class="sheet-hint sheet-hint-starting">Starting</span><span class="sheet-hint sheet-hint-current">Current</span>
            		</div>
            		<div class="sheet-section-row sheet-human-magic-only">
						<input type="hidden" class="sheet-lock-state" name="attr_character_lock_state"/>
						
            			<label class="sheet-label sheet-label-short-width">Magic</label>
            			<input name="attr_character_magicpts" class="sheet-stat-input sheet-text-edit" type="number" value = "0" min="0" max="100">
						<input name="attr_character_magicpts" class="sheet-stat-input sheet-text-readonly" type="number" value = "0" min="0" max="100" readonly>
            			<span>/</span>
            			<input name="attr_character_magicpts_current" class="sheet-stat-input sheet-text-always-edit" type="number" value="0" min="0" max="100">
          			    <br>
           			    <span class="sheet-hint sheet-hint-short-width"/><span class="sheet-hint sheet-hint-starting">Starting</span><span class="sheet-hint sheet-hint-current">Current</span>  			
            		</div>
            	</div>
        	</div>
     	
     	    <!-- Health -->
        	<div class="sheet-health sheet-block">
        	    <div class="sheet-section-inner-container">
        	        <h4 class="sheet-section-head">Health</h4>
        	        <div class="sheet-section-row">
        	            <label class="sheet-label sheet-label-icon"><span class="sheet-heart-icon"><span></label>
                        <select class="sheet-text-always-edit" name="attr_character_damage">
                            <option value="0" selected="selected">0: Unharmed</option>
                            <option value="1">1: Hurt</option>
                            <option value="2">2: Bloodied</option>
                            <option value="3">3: Down</option>
                            <option value="4">4: (in one attack)</option>
                            <option value="5">5: (in one attack)</option>
                        </select>
						<label class="sheet-label sheet-label-icon-padded"><span class="sheet-head-icon"><span></label>
						<input class="sheet-health-mental" name="attr_character_mentalimpaired" type="checkbox"><span></span>
						
						<!-- input class="sheet-mental-state" name="attr_character_mental_state" type="checkbox"><span></span -->
                    </div>
                    <div class="sheet-section-row">
                        <div class="sheet-damage-dscription"> 
                            <input type="text" class="sheet-damage-status" name="attr_character_status" readonly>
                            <br>
                            <textarea class="sheet-damage-description " name="attr_character_status_desc" readonly></textarea>
                        </div>
                        
                    </div>
        	   </div>
        	</div>
        	
        	<!-- Advantages and disdvantages -->
        	<div class="sheet-advantages sheet-block">
        	    <div class="sheet-section-inner-container">
            		<h4 class="sheet-section-head">Advantages & Disadvantages</h4>
					<input type="hidden" class="sheet-lock-state" name="attr_character_lock_state"/>
					<input type="hidden" class="sheet-demimonde-toggle" name="attr_demimonde"  title="@{demimonde}" value = "Human">
					<!--div class="sheet-section-row sheet-human-magic-only" -->
						<input class="sheet-adv-input sheet-human-magic-only" name="attr_character_advmagic" type="text" value="Magical" readonly>
					<!-- /div -->
					<input class="sheet-adv-input sheet-text-edit" name="attr_character_adv1" type="text">
    	        	<input class="sheet-adv-input sheet-text-edit" name="attr_character_adv2" type="text">
    	        	<input class="sheet-adv-input sheet-text-edit" name="attr_character_adv3" type="text">
    		        <input class="sheet-adv-input sheet-text-edit" name="attr_character_adv4" type="text">
            		<input class="sheet-adv-input sheet-text-edit" name="attr_character_adv5" type="text">
    		        <input class="sheet-adv-input sheet-text-edit" name="attr_character_adv6" type="text">
    		        <input class="sheet-adv-input sheet-text-edit" name="attr_character_adv7" type="text">
    		        <input class="sheet-adv-input sheet-text-edit" name="attr_character_adv8" type="text">
					<input class="sheet-adv-input sheet-text-edit" name="attr_character_adv9" type="text">
					<input class="sheet-adv-input sheet-text-readonly" name="attr_character_adv1" type="text" readonly>
    	        	<input class="sheet-adv-input sheet-text-readonly" name="attr_character_adv2" type="text" readonly>
    	        	<input class="sheet-adv-input sheet-text-readonly" name="attr_character_adv3" type="text" readonly>
    		        <input class="sheet-adv-input sheet-text-readonly" name="attr_character_adv4" type="text" readonly>
            		<input class="sheet-adv-input sheet-text-readonly" name="attr_character_adv5" type="text" readonly>
    		        <input class="sheet-adv-input sheet-text-readonly" name="attr_character_adv6" type="text" readonly>
    		        <input class="sheet-adv-input sheet-text-readonly" name="attr_character_adv7" type="text" readonly>
    		        <input class="sheet-adv-input sheet-text-readonly" name="attr_character_adv8" type="text" readonly>
					<input class="sheet-adv-input sheet-text-readonly" name="attr_character_adv9" type="text" readonly>
            	</div>
        	</div>
        	
        	<!-- common skills -->
        	<div class="sheet-common sheet-block">
        	    <div class="sheet-section-inner-container">
            	    <h4 class="sheet-section-head">Common skills</h4>
            		<div class="sheet-section-row">
						<input type="hidden" class="sheet-lock-state" name="attr_character_lock_state"/>
						
            			<label class="sheet-label sheet-label-long-width">Athletics</label>
            			<input name="attr_character_athletics" class="sheet-stat-input sheet-text-edit" type="number" min="30" max="100" value = "30">
						<input name="attr_character_athletics" class="sheet-stat-input sheet-text-readonly" type="number" min="30" max="100" value = "30" readonly>
            			<span>/</span>
            			<input type="number" class="sheet-stat-input" name="attr_character_athletics_half" value="15" readonly>
           			    <button type="roll" name="roll_athletics" value="&{template:rol} {{rollname=Athletics}} {{charname=@{character_name}}} {{success=[[@{character_athletics}]]}} {{hard=[[@{character_athletics_half}]]}} {{fumble=[[@{character_fumble}]]}} {{status=@{character_status}}}  @{roll_skill_formula}"></button>        			
           			    <br>
           			    <span class="sheet-hint sheet-hint-long-width"/><span class="sheet-hint sheet-hint-full">Full</span><span class="sheet-hint sheet-hint-half">Half</span>
            		</div>
            		<div class="sheet-section-row">
						<input type="hidden" class="sheet-lock-state" name="attr_character_lock_state"/>
						
            			<label class="sheet-label sheet-label-long-width">Drive</label>
            			<input name="attr_character_drive" class="sheet-stat-input sheet-text-edit" type="number" min="30" max="100" value = "30">
						<input name="attr_character_drive" class="sheet-stat-input sheet-text-readonly" type="number" min="30" max="100" value = "30" readonly>
            			<span>/</span>
            			<input type="number" class="sheet-stat-input" name="attr_character_drive_half" value="15" readonly>
           			    <button type="roll" name="roll_drive" value="&{template:rol} {{rollname=Drive}} {{charname=@{character_name}}} {{success=[[@{character_drive}]]}} {{hard=[[@{character_drive_half}]]}} {{fumble=[[@{character_fumble}]]}} {{status=@{character_status}}}  @{roll_skill_formula}"></button>    
           			    <br>
           			    <span class="sheet-hint sheet-hint-long-width"/><span class="sheet-hint sheet-hint-full">Full</span><span class="sheet-hint sheet-hint-half">Half</span>
            		</div>    		
            		<div class="sheet-section-row">
						<input type="hidden" class="sheet-lock-state" name="attr_character_lock_state"/>
						
            			<label class="sheet-label sheet-label-long-width">Navigate</label>
            			<input name="attr_character_navigate" class="sheet-stat-input sheet-text-edit" type="number" min="30" max="100" value = "30">
						<input name="attr_character_navigate" class="sheet-stat-input sheet-text-readonly" type="number" min="30" max="100" value = "30" readonly>
            			<span>/</span>
            			<input type="number" class="sheet-stat-input" name="attr_character_navigate_half" value="15" readonly>
           			    <button type="roll" name="roll_navigate" value="&{template:rol} {{rollname=Navigate}} {{charname=@{character_name}}} {{success=[[@{character_navigate}]]}} {{hard=[[@{character_navigate_half}]]}} {{fumble=[[@{character_fumble}]]}} {{status=@{character_status}}}  @{roll_skill_formula}"></button>    
           			    <br>
           			    <span class="sheet-hint sheet-hint-long-width"/><span class="sheet-hint sheet-hint-full">Full</span><span class="sheet-hint sheet-hint-half">Half</span>
            		</div>
            		<div class="sheet-section-row">
						<input type="hidden" class="sheet-lock-state" name="attr_character_lock_state"/>
						
            			<label class="sheet-label sheet-label-long-width">Observation</label>
            			<input name="attr_character_observation" class="sheet-stat-input sheet-text-edit" type="number" min="30" max="100" value = "30">
						<input name="attr_character_observation" class="sheet-stat-input sheet-text-readonly" type="number" min="30" max="100" value = "30" readonly>
            			<span>/</span>
            			<input type="number" class="sheet-stat-input" name="attr_character_observation_half" value="15" readonly>
           			    <button type="roll" name="roll_observation" value="&{template:rol} {{rollname=Observation}} {{charname=@{character_name}}} {{success=[[@{character_observation}]]}} {{hard=[[@{character_observation_half}]]}} {{fumble=[[@{character_fumble}]]}} {{status=@{character_status}}}  @{roll_skill_formula}"></button>    
           			    <br>
           			    <span class="sheet-hint sheet-hint-long-width"/><span class="sheet-hint sheet-hint-full">Full</span><span class="sheet-hint sheet-hint-half">Half</span>
            		</div>
            		<div class="sheet-section-row">
						<input type="hidden" class="sheet-lock-state" name="attr_character_lock_state"/>
						
            			<label class="sheet-label sheet-label-long-width">Read Person</label>
            			<input name="attr_character_read-person" class="sheet-stat-input sheet-text-edit" type="number" min="30" max="100" value = "30">
						<input name="attr_character_read-person" class="sheet-stat-input sheet-text-readonly" type="number" min="30" max="100" value = "30" readonly>
            			<span>/</span>
            			<input type="number" class="sheet-stat-input" name="attr_character_read-person_half" value="15" readonly>
           			    <button type="roll" name="roll_read-person" value="&{template:rol} {{rollname=Read Person}} {{charname=@{character_name}}} {{success=[[@{character_read-person}]]}} {{hard=[[@{character_read-person_half}]]}} {{fumble=[[@{character_fumble}]]}} {{status=@{character_status}}}  @{roll_skill_formula}"></button>    
           			    <br>
           			    <span class="sheet-hint sheet-hint-long-width"/><span class="sheet-hint sheet-hint-full">Full</span><span class="sheet-hint sheet-hint-half">Half</span>
            		</div>
            		<div class="sheet-section-row">
						<input type="hidden" class="sheet-lock-state" name="attr_character_lock_state"/>
						
            			<label class="sheet-label sheet-label-long-width">Research</label>
            			<input name="attr_character_research" class="sheet-stat-input sheet-text-edit" type="number" min="30" max="100" value = "30">
						<input name="attr_character_research" class="sheet-stat-input sheet-text-readonly" type="number" min="30" max="100" value = "30" readonly>
            			<span>/</span>
            			<input type="number" class="sheet-stat-input" name="attr_character_research_half" value="15" readonly>
           			    <button type="roll" name="roll_research" value="&{template:rol} {{rollname=Research}} {{charname=@{character_name}}} {{success=[[@{character_research}]]}} {{hard=[[@{character_research_half}]]}} {{fumble=[[@{character_fumble}]]}} {{status=@{character_status}}}  @{roll_skill_formula}"></button>    
           			    <br>
           			    <span class="sheet-hint sheet-hint-long-width"/><span class="sheet-hint sheet-hint-full">Full</span><span class="sheet-hint sheet-hint-half">Half</span>
            		</div>
            		<div class="sheet-section-row">
						<input type="hidden" class="sheet-lock-state" name="attr_character_lock_state"/>
						
            			<label class="sheet-label sheet-label-long-width">Sense Vestigia</label>
            			<input name="attr_character_sense-vestigia" class="sheet-stat-input sheet-text-edit" type="number" min="30" max="100" value = "30">
						<input name="attr_character_sense-vestigia" class="sheet-stat-input sheet-text-readonly" type="number" min="30" max="100" value = "30" readonly>
            			<span>/</span>
            			<input type="number" class="sheet-stat-input" name="attr_character_sense-vestigia_half" value="15" readonly>
           			    <button type="roll" name="roll_sense-vestigia" value="&{template:rol} {{rollname=Sense Vestigia}} {{charname=@{character_name}}} {{success=[[@{character_sense-vestigia}]]}} {{hard=[[@{character_sense-vestigia_half}]]}} {{fumble=[[@{character_fumble}]]}} {{status=@{character_status}}}  @{roll_skill_formula}"></button>    
           			    <br>
           			    <span class="sheet-hint sheet-hint-long-width"/><span class="sheet-hint sheet-hint-full">Full</span><span class="sheet-hint sheet-hint-half">Half</span>
            		</div>
            		<div class="sheet-section-row">
						<input type="hidden" class="sheet-lock-state" name="attr_character_lock_state"/>
						
            			<label class="sheet-label sheet-label-long-width">Social</label>
            			<input name="attr_character_social" class="sheet-stat-input sheet-text-edit" type="number" min="30" max="100" value = "30">
						<input name="attr_character_social" class="sheet-stat-input sheet-text-readonly" type="number" min="30" max="100" value = "30" readonly>
            			<span>/</span>
            			<input type="number" class="sheet-stat-input" name="attr_character_social_half" value="15" readonly>
           			    <button type="roll" name="roll_social" value="&{template:rol} {{rollname=Social}} {{charname=@{character_name}}} {{success=[[@{character_social}]]}} {{hard=[[@{character_social_half}]]}} {{fumble=[[@{character_fumble}]]}} {{status=@{character_status}}}  @{roll_skill_formula}"></button>    
           			    <br>
           			    <span class="sheet-hint sheet-hint-long-width"/><span class="sheet-hint sheet-hint-full">Full</span><span class="sheet-hint sheet-hint-half">Half</span>
            		</div>    		
            		<div class="sheet-section-row">
						<input type="hidden" class="sheet-lock-state" name="attr_character_lock_state"/>
						
            			<label class="sheet-label sheet-label-long-width">Stealth</label>
            			<input name="attr_character_stealth" class="sheet-stat-input sheet-text-edit" type="number" min="30" max="100" value = "30">
						<input name="attr_character_stealth" class="sheet-stat-input sheet-text-readonly" type="number" min="30" max="100" value = "30" readonly>
            			<span>/</span>
            			<input type="number" class="sheet-stat-input" name="attr_character_stealth_half" value="15" readonly>
           			    <button type="roll" name="roll_stealth" value="&{template:rol} {{rollname=Stealth}} {{charname=@{character_name}}} {{success=[[@{character_stealth}]]}} {{hard=[[@{character_stealth_half}]]}} {{fumble=[[@{character_fumble}]]}} {{status=@{character_status}}}  @{roll_skill_formula}"></button>    
           			    <br>
           			    <span class="sheet-hint sheet-hint-long-width"/><span class="sheet-hint sheet-hint-full">Full</span><span class="sheet-hint sheet-hint-half">Half</span>
            		</div>    				
            	</div>
        	</div>
        	
        	<!-- Combat -->
        	<div class="sheet-combat sheet-block">
        	    <div class="sheet-section-inner-container">
            	    <h4 class="sheet-section-head">Combat</h4>
           		    <div class="sheet-section-row">
						<input type="hidden" class="sheet-lock-state" name="attr_character_lock_state"/>
						
            			<label class="sheet-label sheet-label-long-width">Fighting</label>
            			<input name="attr_character_fighting" class="sheet-stat-input sheet-text-edit" type="number" min="30" max="100" value = "30">
						<input name="attr_character_fighting" class="sheet-stat-input sheet-text-readonly" type="number" min="30" max="100" value = "30" readonly>
            			<span>/</span>
            			<input type="number" class="sheet-stat-input" name="attr_character_fighting_half" value="15" readonly>
            			<button type="roll" name="roll_fighting" value="&{template:rol} {{rollname=Fighting}} {{charname=@{character_name}}} {{success=[[@{character_fighting}]]}} {{hard=[[@{character_fighting_half}]]}} {{fumble=[[@{character_fumble}]]}} {{status=@{character_status}}}  @{roll_skill_formula}"></button>    
            			<br>
           			    <span class="sheet-hint sheet-hint-long-width"/><span class="sheet-hint sheet-hint-full">Full</span><span class="sheet-hint sheet-hint-half">Half</span>
            		</div>
            		<div class="sheet-section-row">
						<input type="hidden" class="sheet-lock-state" name="attr_character_lock_state"/>
						
            			<label class="sheet-label sheet-label-long-width">Firearms</label>
            			<input name="attr_character_firearms" class="sheet-stat-input sheet-text-edit" type="number" min="30" max="100" value = "30">
						<input name="attr_character_firearms" class="sheet-stat-input sheet-text-readonly" type="number" min="30" max="100" value = "30" readonly>
            			<span>/</span>
            			<input type="number" class="sheet-stat-input" name="attr_character_firearms_half" value="15" readonly>
                        <button type="roll" name="roll_firearms" value="&{template:rol} {{rollname=Firearms}} {{charname=@{character_name}}} {{success=[[@{character_firearms}]]}} {{hard=[[@{character_firearms_half}]]}} {{fumble=[[@{character_fumble}]]}} {{status=@{character_status}}}  @{roll_skill_formula}"></button>    
           			    <span class="sheet-hint sheet-hint-long-width"/><span class="sheet-hint sheet-hint-full">Full</span><span class="sheet-hint sheet-hint-half">Half</span>
            		</div>    
                    <div class="sheet-section-row">
						<input type="hidden" class="sheet-lock-state" name="attr_character_lock_state"/>
						
            			<label class="sheet-label sheet-label-long-width">Armour</label>
            			<input name="attr_character_armour_regular" class="sheet-armour-regular sheet-text-edit" type="text" value = "">
            			<input name="attr_character_armour_balistic" class="sheet-armour-balistic sheet-text-edit" type="text" value = "">
						<input name="attr_character_armour_regular" class="sheet-armour-regular sheet-text-readonly" type="text" value = "" readonly>
            			<input name="attr_character_armour_balistic" class="sheet-armour-balistic sheet-text-readonly" type="text" value = "" readonly> 						
            			<br>
            			<span class="sheet-hint sheet-hint-long-width"/><span class="sheet-hint sheet-hint-armour-regular">Regular</span><span class="sheet-hint sheet-hint-armour-balistic">Balistic</span>
            		</div>            		
        	    </div>
        	</div>
        	
        	<!-- Expert skills -->
        	<div class="sheet-expert sheet-block">
        	    <div class="sheet-section-inner-container">
        	        <h4 class="sheet-section-head">Expert skills</h4>
					
					<input type="hidden" class="sheet-demimonde-toggle" name="attr_demimonde"  title="@{demimonde}" value = "Human">
					<div class="sheet-section-row sheet-human-magic-only">
						<input type="hidden" class="sheet-lock-state" name="attr_character_lock_state"/>
            			<label class="sheet-label-underline sheet-label-long-width">Magic</label>
            			<input name="attr_character_magic" class="sheet-stat-input sheet-text-edit sheet-magic-specific" type="number" min="60" max="100" value = "60">
						<input name="attr_character_magic" class="sheet-stat-input sheet-text-readonly sheet-magic-specific" type="number" min="60" max="100" value = "60" readonly>
            			<span>/</span>
            			<input type="number" class="sheet-stat-input sheet-magic-specific" name="attr_character_magic_half" value="30" readonly>
           			    <button type="roll" name="roll_magic" value="&{template:rol} {{rollname=Magic}} {{charname=@{character_name}}} {{success=[[@{character_magic}]]}} {{hard=[[@{character_magic_half}]]}} {{fumble=[[@{character_fumble}]]}} {{status=@{character_status}}}  @{roll_skill_formula}"></button>    
           			    <br>
           			    <span class="sheet-hint sheet-hint-long-width sheet-magic-specific"/><span class="sheet-hint sheet-hint-full sheet-magic-specific">Full</span><span class="sheet-hint sheet-hint-half sheet-magic-specific">Half</span>
            		</div> 					
            		<div class="sheet-section-row">
						<input type="hidden" class="sheet-lock-state" name="attr_character_lock_state"/>
						
            			<input class="sheet-expert-skill sheet-text-edit" name="attr_character_expert1_name" type="text">
            			<input name="attr_character_expert1" class="sheet-stat-input sheet-text-edit" type="number" min="0" max="100" value = "0">
						<input class="sheet-expert-skill sheet-text-readonly" name="attr_character_expert1_name" type="text" readonly>
            			<input name="attr_character_expert1" class="sheet-stat-input sheet-text-readonly" type="number" min="0" max="100" value = "0" readonly>
            			<span>/</span>
            			<input type="number" class="sheet-stat-input" name="attr_character_expert1_half" value="0" readonly>
           			    <button type="roll" name="roll_expert1" value="&{template:rol} {{rollname=@{character_expert1_name}}} {{charname=@{character_name}}} {{success=[[@{character_expert1}]]}} {{hard=[[@{character_expert1_half}]]}} {{fumble=[[@{character_fumble}]]}} {{status=@{character_status}}}  @{roll_skill_formula}"></button>        			
           			    <br>
           			    <span class="sheet-hint sheet-hint-xlong-label"/><span class="sheet-hint sheet-hint-full">Full</span><span class="sheet-hint sheet-hint-half">Half</span>
            		</div>
            		<div class="sheet-section-row">
						<input type="hidden" class="sheet-lock-state" name="attr_character_lock_state"/>
						
            			<input class="sheet-expert-skill sheet-text-edit" name="attr_character_expert2_name" type="text">
            			<input name="attr_character_expert2" class="sheet-stat-input sheet-text-edit" type="number" min="0" max="100" value = "0">
						<input class="sheet-expert-skill sheet-text-readonly" name="attr_character_expert2_name" type="text" readonly>
            			<input name="attr_character_expert2" class="sheet-stat-input sheet-text-readonly" type="number" min="0" max="100" value = "0" readonly>
            			<span>/</span>
            			<input type="number" class="sheet-stat-input" name="attr_character_expert2_half" value="0" readonly>
           			    <button type="roll" name="roll_expert2" value="&{template:rol} {{rollname=@{character_expert2_name}}} {{charname=@{character_name}}} {{success=[[@{character_expert2}]]}} {{hard=[[@{character_expert2_half}]]}} {{fumble=[[@{character_fumble}]]}} {{status=@{character_status}}}  @{roll_skill_formula}"></button>        			
           			    <br>
           			    <span class="sheet-hint sheet-hint-xlong-label"/><span class="sheet-hint sheet-hint-full">Full</span><span class="sheet-hint sheet-hint-half">Half</span>
            		</div>
            		<div class="sheet-section-row">
						<input type="hidden" class="sheet-lock-state" name="attr_character_lock_state"/>
						
            			<input class="sheet-expert-skill sheet-text-edit" name="attr_character_expert3_name" type="text">
            			<input name="attr_character_expert3" class="sheet-stat-input sheet-text-edit" type="number" min="0" max="100" value = "0">
						<input class="sheet-expert-skill sheet-text-readonly" name="attr_character_expert3_name" type="text" readonly>
            			<input name="attr_character_expert3" class="sheet-stat-input sheet-text-readonly" type="number" min="0" max="100" value = "0" readonly>
            			<span>/</span>
            			<input type="number" class="sheet-stat-input" name="attr_character_expert3_half" value="0" readonly>
           			    <button type="roll" name="roll_expert3" value="&{template:rol} {{rollname=@{character_expert3_name}}} {{charname=@{character_name}}} {{success=[[@{character_expert3}]]}} {{hard=[[@{character_expert3_half}]]}} {{fumble=[[@{character_fumble}]]}} {{status=@{character_status}}}  @{roll_skill_formula}"></button>        			
           			    <br>
           			    <span class="sheet-hint sheet-hint-xlong-label"/><span class="sheet-hint sheet-hint-full">Full</span><span class="sheet-hint sheet-hint-half">Half</span>
            		</div>
            		<div class="sheet-section-row">
						<input type="hidden" class="sheet-lock-state" name="attr_character_lock_state"/>
						
            			<input class="sheet-expert-skill sheet-text-edit" name="attr_character_expert4_name" type="text">
            			<input name="attr_character_expert4" class="sheet-stat-input sheet-text-edit" type="number" min="0" max="100" value = "0">
						<input class="sheet-expert-skill sheet-text-readonly" name="attr_character_expert4_name" type="text" readonly>
            			<input name="attr_character_expert4" class="sheet-stat-input sheet-text-readonly" type="number" min="0" max="100" value = "0" readonly>
            			<span>/</span>
            			<input type="number" class="sheet-stat-input" name="attr_character_expert4_half" value="0" readonly>
           			    <button type="roll" name="roll_expert4" value="&{template:rol} {{rollname=@{character_expert4_name}}} {{charname=@{character_name}}} {{success=[[@{character_expert4}]]}} {{hard=[[@{character_expert4_half}]]}} {{fumble=[[@{character_fumble}]]}} {{status=@{character_status}}}  @{roll_skill_formula}"></button>        			
           			    <br>
           			    <span class="sheet-hint sheet-hint-xlong-label"/><span class="sheet-hint sheet-hint-full">Full</span><span class="sheet-hint sheet-hint-half">Half</span>
            		</div>
            		<div class="sheet-section-row">
						<input type="hidden" class="sheet-lock-state" name="attr_character_lock_state"/>
						
            			<input class="sheet-expert-skill sheet-text-edit" name="attr_character_expert5_name" type="text">
            			<input name="attr_character_expert5" class="sheet-stat-input sheet-text-edit" type="number" min="0" max="100" value = "0">
						<input class="sheet-expert-skill sheet-text-readonly" name="attr_character_expert5_name" type="text" readonly>
            			<input name="attr_character_expert5" class="sheet-stat-input sheet-text-readonly" type="number" min="0" max="100" value = "0" readonly>
            			<span>/</span>
            			<input type="number" class="sheet-stat-input" name="attr_character_expert5_half" value="0" readonly>
           			    <button type="roll" name="roll_expert5" value="&{template:rol} {{rollname=@{character_expert5_name}}} {{charname=@{character_name}}} {{success=[[@{character_expert5}]]}} {{hard=[[@{character_expert5_half}]]}} {{fumble=[[@{character_fumble}]]}} {{status=@{character_status}}}  @{roll_skill_formula}"></button>        			
           			    <br>
           			    <span class="sheet-hint sheet-hint-xlong-label"/><span class="sheet-hint sheet-hint-full">Full</span><span class="sheet-hint sheet-hint-half">Half</span>
            		</div>
            		<div class="sheet-section-row">
						<input type="hidden" class="sheet-lock-state" name="attr_character_lock_state"/>
						
            			<input class="sheet-expert-skill sheet-text-edit" name="attr_character_expert6_name" type="text">
            			<input name="attr_character_expert6" class="sheet-stat-input sheet-text-edit" type="number" min="0" max="100" value = "0">
						<input class="sheet-expert-skill sheet-text-readonly" name="attr_character_expert6_name" type="text" readonly>
            			<input name="attr_character_expert6" class="sheet-stat-input sheet-text-readonly" type="number" min="0" max="100" value = "0" readonly>
            			<span>/</span>
            			<input type="number" class="sheet-stat-input" name="attr_character_expert6_half" value="0" readonly>
           			    <button type="roll" name="roll_expert6" value="&{template:rol} {{rollname=@{character_expert6_name}}} {{charname=@{character_name}}} {{success=[[@{character_expert6}]]}} {{hard=[[@{character_expert6_half}]]}} {{fumble=[[@{character_fumble}]]}} {{status=@{character_status}}}  @{roll_skill_formula}"></button>        			
           			    <br>
           			    <span class="sheet-hint sheet-hint-xlong-label"/><span class="sheet-hint sheet-hint-full">Full</span><span class="sheet-hint sheet-hint-half">Half</span>
            		</div>
            		<div class="sheet-section-row">
						<input type="hidden" class="sheet-lock-state" name="attr_character_lock_state"/>
						
            			<input class="sheet-expert-skill sheet-text-edit" name="attr_character_expert7_name" type="text">
            			<input name="attr_character_expert7" class="sheet-stat-input sheet-text-edit" type="number" min="0" max="100" value = "0">
						<input class="sheet-expert-skill sheet-text-readonly" name="attr_character_expert7_name" type="text" readonly>
            			<input name="attr_character_expert7" class="sheet-stat-input sheet-text-readonly" type="number" min="0" max="100" value = "0" readonly>
            			<span>/</span>
            			<input type="number" class="sheet-stat-input" name="attr_character_expert7_half" value="0" readonly>
           			    <button type="roll" name="roll_expert7" value="&{template:rol} {{rollname=@{character_expert7_name}}} {{charname=@{character_name}}} {{success=[[@{character_expert7}]]}} {{hard=[[@{character_expert7_half}]]}} {{fumble=[[@{character_fumble}]]}} {{status=@{character_status}}}  @{roll_skill_formula}"></button>        			
           			    <br>
           			    <span class="sheet-hint sheet-hint-xlong-label"/><span class="sheet-hint sheet-hint-full">Full</span><span class="sheet-hint sheet-hint-half">Half</span>
            		</div>
            		<div class="sheet-section-row">
						<input type="hidden" class="sheet-lock-state" name="attr_character_lock_state"/>
						
            			<input class="sheet-expert-skill sheet-text-edit" name="attr_character_expert8_name" type="text">
            			<input name="attr_character_expert8" class="sheet-stat-input sheet-text-edit" type="number" min="0" max="100" value = "0">
						<input class="sheet-expert-skill sheet-text-readonly" name="attr_character_expert8_name" type="text" readonly>
            			<input name="attr_character_expert8" class="sheet-stat-input sheet-text-readonly" type="number" min="0" max="100" value = "0" readonly>
            			<span>/</span>
            			<input type="number" class="sheet-stat-input" name="attr_character_expert8_half" value="0" readonly>
           			    <button type="roll" name="roll_expert8" value="&{template:rol} {{rollname=@{character_expert8_name}}} {{charname=@{character_name}}} {{success=[[@{character_expert8}]]}} {{hard=[[@{character_expert1_half}]]}} {{fumble=[[@{character_fumble}]]}} {{status=@{character_status}}}  @{roll_skill_formula}"></button>        			
           			    <br>
           			    <span class="sheet-hint sheet-hint-xlong-label"/><span class="sheet-hint sheet-hint-full">Full</span><span class="sheet-hint sheet-hint-half">Half</span>
            		</div>
            		<div class="sheet-section-row">
						<input type="hidden" class="sheet-lock-state" name="attr_character_lock_state"/>
						
            			<input class="sheet-expert-skill sheet-text-edit" name="attr_character_expert9_name" type="text">
            			<input name="attr_character_expert9" class="sheet-stat-input sheet-text-edit" type="number" min="0" max="100" value = "0">
						<input class="sheet-expert-skill sheet-text-readonly" name="attr_character_expert9_name" type="text" readonly>
            			<input name="attr_character_expert9" class="sheet-stat-input sheet-text-readonly" type="number" min="0" max="100" value = "0" readonly>
            			<span>/</span>
            			<input type="number" class="sheet-stat-input" name="attr_character_expert9_half" value="0" readonly>
           			    <button type="roll" name="roll_expert9" value="&{template:rol} {{rollname=@{character_expert9_name}}} {{charname=@{character_name}}} {{success=[[@{character_expert9}]]}} {{hard=[[@{character_expert9_half}]]}} {{fumble=[[@{character_fumble}]]}} {{status=@{character_status}}}  @{roll_skill_formula}"></button>        			
           			    <br>
           			    <span class="sheet-hint sheet-hint-xlong-label"/><span class="sheet-hint sheet-hint-full">Full</span><span class="sheet-hint sheet-hint-half">Half</span>
            		</div>
					<div class="sheet-section-row">
						<input type="hidden" class="sheet-lock-state" name="attr_character_lock_state"/>
						
            			<input class="sheet-expert-skill sheet-text-edit" name="attr_character_expert10_name" type="text">
            			<input name="attr_character_expert10" class="sheet-stat-input sheet-text-edit" type="number" min="0" max="100" value = "0">
						<input class="sheet-expert-skill sheet-text-readonly" name="attr_character_expert10_name" type="text" readonly>
            			<input name="attr_character_expert10" class="sheet-stat-input sheet-text-readonly" type="number" min="0" max="100" value = "0" readonly>
            			<span>/</span>
            			<input type="number" class="sheet-stat-input" name="attr_character_expert10_half" value="0" readonly>
           			    <button type="roll" name="roll_expert10" value="&{template:rol} {{rollname=@{character_expert10_name}}} {{charname=@{character_name}}} {{success=[[@{character_expert10}]]}} {{hard=[[@{character_expert10_half}]]}} {{fumble=[[@{character_fumble}]]}} {{status=@{character_status}}}  @{roll_skill_formula}"></button>        			
           			    <br>
           			    <span class="sheet-hint sheet-hint-xlong-label"/><span class="sheet-hint sheet-hint-full">Full</span><span class="sheet-hint sheet-hint-half">Half</span>
            		</div>		
        	   </div>
        	</div>
        	
        	<!-- Weapons -->
        	<div class="sheet-weapons sheet-block">
        	    <div class="sheet-section-inner-container">
        	        <h4 class="sheet-section-head">Weapons</h4>
        	        <div class="sheet-2colrow sheet-adv-div">
        	            <div class="sheet-col">
                	       <div class="sheet-section-row">
								<input type="hidden" class="sheet-lock-state" name="attr_character_lock_state"/>
						   
                    		    <input class="sheet-weapon-name sheet-text-edit" name="attr_character_weapon1_name" type="text">
                    			<input class="sheet-weapon-damage sheet-text-edit" name="attr_character_weapon1_damage" type="text">
                    			<input class="sheet-weapon-range sheet-text-edit" name="attr_character_weapon1_range" type="text">  
								<input class="sheet-weapon-name sheet-text-readonly" name="attr_character_weapon1_name" type="text" readonly>
                    			<input class="sheet-weapon-damage sheet-text-readonly" name="attr_character_weapon1_damage" type="text" readonly>
                    			<input class="sheet-weapon-range sheet-text-readonly" name="attr_character_weapon1_range" type="text" readonly>       			
                    			<br>
                   			    <span class="sheet-hint sheet-hint-weapon-name">name</span><span class="sheet-hint sheet-hint-weapon-damage">Damage</span><span class="sheet-hint sheet-hint-weapon-range">Range</span>
                    		</div>
                	       <div class="sheet-section-row">
								<input type="hidden" class="sheet-lock-state" name="attr_character_lock_state"/>
								
                    		    <input class="sheet-weapon-name sheet-text-edit" name="attr_character_weapon2_name" type="text">
                    			<input class="sheet-weapon-damage sheet-text-edit" name="attr_character_weapon2_damage" type="text">
                    			<input class="sheet-weapon-range sheet-text-edit" name="attr_character_weapon2_range" type="text">
								<input class="sheet-weapon-name sheet-text-readonly" name="attr_character_weapon2_name" type="text" readonly>
                    			<input class="sheet-weapon-damage sheet-text-readonly" name="attr_character_weapon2_damage" type="text" readonly>
                    			<input class="sheet-weapon-range sheet-text-readonly" name="attr_character_weapon2_range" type="text" readonly>       			    								
                    			<br>
                   			    <span class="sheet-hint sheet-hint-weapon-name">name</span><span class="sheet-hint sheet-hint-weapon-damage">Damage</span><span class="sheet-hint sheet-hint-weapon-range">Range</span>
                    		</div>
                	       <div class="sheet-section-row">
								<input type="hidden" class="sheet-lock-state" name="attr_character_lock_state"/>
							
                    		    <input class="sheet-weapon-name sheet-text-edit" name="attr_character_weapon3_name" type="text">
                    			<input class="sheet-weapon-damage sheet-text-edit" name="attr_character_weapon3_damage" type="text">
                    			<input class="sheet-weapon-range sheet-text-edit" name="attr_character_weapon3_range" type="text"> 
								<input class="sheet-weapon-name sheet-text-readonly" name="attr_character_weapon3_name" type="text" readonly>
                    			<input class="sheet-weapon-damage sheet-text-readonly" name="attr_character_weapon3_damage" type="text" readonly>
                    			<input class="sheet-weapon-range sheet-text-readonly" name="attr_character_weapon3_range" type="text" readonly>
                    			<br>
                   			    <span class="sheet-hint sheet-hint-weapon-name">name</span><span class="sheet-hint sheet-hint-weapon-damage">Damage</span><span class="sheet-hint sheet-hint-weapon-range">Range</span>
                    	    </div>                    		
                    	</div> 
                        <div class="sheet-col">
                            <div class="sheet-section-row">								
								<input type="hidden" class="sheet-lock-state" name="attr_character_lock_state"/>
								
                    		    <input class="sheet-weapon-name sheet-text-edit" name="attr_character_weapon4_name" type="text">
                    			<input class="sheet-weapon-damage sheet-text-edit" name="attr_character_weapon4_damage" type="text">
                    			<input class="sheet-weapon-range sheet-text-edit" name="attr_character_weapon4_range" type="text"> 
								<input class="sheet-weapon-name sheet-text-readonly" name="attr_character_weapon4_name" type="text" readonly>
                    			<input class="sheet-weapon-damage sheet-text-readonly" name="attr_character_weapon4_damage" type="text" readonly>
                    			<input class="sheet-weapon-range sheet-text-readonly" name="attr_character_weapon4_range" type="text" readonly>
                    			<br>
                   			    <span class="sheet-hint sheet-hint-weapon-name">name</span><span class="sheet-hint sheet-hint-weapon-damage">Damage</span><span class="sheet-hint sheet-hint-weapon-range">Range</span>
                    		</div>
                	       <div class="sheet-section-row">
								<input type="hidden" class="sheet-lock-state" name="attr_character_lock_state"/>
							
                    		    <input class="sheet-weapon-name sheet-text-edit" name="attr_character_weapon5_name" type="text">
                    			<input class="sheet-weapon-damage sheet-text-edit" name="attr_character_weapon5_damage" type="text">
                    			<input class="sheet-weapon-range sheet-text-edit" name="attr_character_weapon5_range" type="text">    
                    		    <input class="sheet-weapon-name sheet-text-readonly" name="attr_character_weapon5_name" type="text" readonly>
                    			<input class="sheet-weapon-damage sheet-text-readonly" name="attr_character_weapon5_damage" type="text" readonly>
                    			<input class="sheet-weapon-range sheet-text-readonly" name="attr_character_weapon5_range" type="text" readonly>       			    								
                    			<br>
                   			    <span class="sheet-hint sheet-hint-weapon-name">name</span><span class="sheet-hint sheet-hint-weapon-damage">Damage</span><span class="sheet-hint sheet-hint-weapon-range">Range</span>
                    	    </div>
                	       <div class="sheet-section-row">
								<input type="hidden" class="sheet-lock-state" name="attr_character_lock_state"/>
								
                    		    <input class="sheet-weapon-name sheet-text-edit" name="attr_character_weapon6_name" type="text">
                    			<input class="sheet-weapon-damage sheet-text-edit" name="attr_character_weapon6_damage" type="text">
                    			<input class="sheet-weapon-range sheet-text-edit" name="attr_character_weapon6_range" type="text">    
                    		    <input class="sheet-weapon-name sheet-text-readonly" name="attr_character_weapon6_name" type="text" readonly>
                    			<input class="sheet-weapon-damage sheet-text-readonly" name="attr_character_weapon6_damage" type="text" readonly>
                    			<input class="sheet-weapon-range sheet-text-readonly" name="attr_character_weapon6_range" type="text" readonly>       			    								
                    			<br>
                   			    <span class="sheet-hint sheet-hint-weapon-name">name</span><span class="sheet-hint sheet-hint-weapon-damage">Damage</span><span class="sheet-hint sheet-hint-weapon-range">Range</span>
                    	    </div>                    	    
                       	</div>                       	
                    </div>
    
        	   </div>
        	</div>    	
        </div>
    </div>	
    
    <!-- contacts sheet page -->
    <div class="sheet-contacts-page">
    	<div class="sheet-grid-section-magic">	
    	
           	<!-- contacts -->
        	<div class="sheet-contacts sheet-block">
        	    <div class="sheet-section-inner-container">
        	       <h4 class="sheet-section-head">Contacts</h4>
    	           <div class="sheet-2colrow sheet-contacts-div">
    	                <div class="sheet-col">
                	        <div class="sheet-section-row">
								<input type="hidden" class="sheet-lock-state" name="attr_character_lock_state"/>
								
                    			<input class="sheet-contact-state" name="attr_character_contact1_state" type="checkbox"><span></span>	
								<input class="sheet-contact-details sheet-text-edit" name="attr_character_contact1_details" type="text">
								<input class="sheet-contact-details sheet-text-readonly" name="attr_character_contact1_details" type="text" readonly>                    							
                     		</div>
                	        <div class="sheet-section-row">
								<input type="hidden" class="sheet-lock-state" name="attr_character_lock_state"/>
								
                    			<input class="sheet-contact-state" name="attr_character_contact2_state" type="checkbox"><span></span>	
								<input class="sheet-contact-details sheet-text-edit" name="attr_character_contact2_details" type="text">
								<input class="sheet-contact-details sheet-text-readonly" name="attr_character_contact2_details" type="text" readonly>                            										    
                     		</div>
                	        <div class="sheet-section-row">
								<input type="hidden" class="sheet-lock-state" name="attr_character_lock_state"/>
								
                    			<input class="sheet-contact-state" name="attr_character_contact3_state" type="checkbox"><span></span>	
								<input class="sheet-contact-details sheet-text-edit" name="attr_character_contact3_details" type="text">
								<input class="sheet-contact-details sheet-text-readonly" name="attr_character_contact3_details" type="text" readonly>                    										
                     		</div>
                	        <div class="sheet-section-row">
								<input type="hidden" class="sheet-lock-state" name="attr_character_lock_state"/>
								
                    			<input class="sheet-contact-state" name="attr_character_contact4_state" type="checkbox"><span></span>
								<input class="sheet-contact-details sheet-text-edit" name="attr_character_contact4_details" type="text">
								<input class="sheet-contact-details sheet-text-readonly" name="attr_character_contact4_details" type="text" readonly>                    											
                     		</div>     
                     		 <div class="sheet-section-row">
							 	<input type="hidden" class="sheet-lock-state" name="attr_character_lock_state"/>
								
                    			<input class="sheet-contact-state" name="attr_character_contact5_state" type="checkbox"><span></span>
								<input class="sheet-contact-details sheet-text-edit" name="attr_character_contact5_details" type="text">
								<input class="sheet-contact-details sheet-text-readonly" name="attr_character_contact5_details" type="text" readonly>                    											
                     		</div>  
                     	</div>
    	                <div class="sheet-col">
                	        <div class="sheet-section-row">
								<input type="hidden" class="sheet-lock-state" name="attr_character_lock_state"/>
								
                    			<input class="sheet-contact-state" name="attr_character_contact6_state" type="checkbox"><span></span>								
								<input class="sheet-contact-details sheet-text-edit" name="attr_character_contact6_details" type="text">
								<input class="sheet-contact-details sheet-text-readonly" name="attr_character_contact6_details" type="text" readonly>                    			
                     		</div>
                	        <div class="sheet-section-row">
								<input type="hidden" class="sheet-lock-state" name="attr_character_lock_state"/>
								
                    			<input class="sheet-contact-state" name="attr_character_contact7_state" type="checkbox"><span></span>
								<input class="sheet-contact-details sheet-text-edit" name="attr_character_contact7_details" type="text">
								<input class="sheet-contact-details sheet-text-readonly" name="attr_character_contact7_details" type="text" readonly>                    										
                     		</div>
                	        <div class="sheet-section-row">
								<input type="hidden" class="sheet-lock-state" name="attr_character_lock_state"/>
								
                    			<input class="sheet-contact-state" name="attr_character_contact8_state" type="checkbox"><span></span>	
								<input class="sheet-contact-details sheet-text-edit" name="attr_character_contact8_details" type="text">
								<input class="sheet-contact-details sheet-text-readonly" name="attr_character_contact8_details" type="text" readonly>                    									
                     		</div>                     		
                     		<div class="sheet-section-row">
								<input type="hidden" class="sheet-lock-state" name="attr_character_lock_state"/>
								
								<input class="sheet-contact-state" name="attr_character_contact9_state" type="checkbox"><span></span>
                    			<input class="sheet-contact-details sheet-text-edit" name="attr_character_contact9_details" type="text">
								<input class="sheet-contact-details sheet-text-readonly" name="attr_character_contact9_details" type="text" readonly>								
                     		</div>
                     		<div class="sheet-section-row">
								<input type="hidden" class="sheet-lock-state" name="attr_character_lock_state"/>
								
                    			<input class="sheet-contact-state" name="attr_character_contact10_state" type="checkbox"><span></span>									
                    			<input class="sheet-contact-details sheet-text-edit" name="attr_character_contact10_details" type="text">
								<input class="sheet-contact-details sheet-text-readonly" name="attr_character_contact10_details" type="text" readonly>							
                     		</div>
                     	</div>
                    </div>
					<h3 class="sheet-subsection-head">Contact Notes</h3>
                		<div class="sheet-2colrow sheet-spells-div">
							<div class="sheet-section-row">
								<input type="hidden" class="sheet-lock-state" name="attr_character_lock_state"/>
								
								<textarea class="sheet-contactnotes sheet-textarea-edit" name="attr_character_contactnotes"></textarea>
								<textarea class="sheet-contactnotes sheet-text-readonly" name="attr_character_contactnotes" readonly></textarea>
							</div>
					</div>
               	</div>                       	
        	</div>
        	
        	
        	<!-- MAGIC -->
        	<div class="sheet-magic sheet-block">
        	    <input type="hidden" class="sheet-demimonde-toggle" name="attr_demimonde"  title="@{demimonde}" value = "Human">
        	    <div class="sheet-section-inner-container sheet-human-magic-only">
            		<h4 class="sheet-section-head">Magic</h4>
            		
            		<!-- signare  -->
            		<div class="sheet-subsection">
            		    <h3 class="sheet-subsection-head">Signare</h3>
            		    <div class="sheet-section-row">
							<input type="hidden" class="sheet-lock-state" name="attr_character_lock_state"/>
							
            		        <textarea class="sheet-signare sheet-textarea-edit" name="attr_character_signare"></textarea>
							<textarea class="sheet-signare sheet-text-readonly" name="attr_character_signare" readonly></textarea>
            		    </div>
            		</div>
            		
            		<!-- spells -->
            		<div class="sheet-subsection sheet-spells">
            		    <h3 class="sheet-subsection-head">Spells</h3>
                		<div class="sheet-2colrow sheet-spells-div">
                		   <div class="sheet-col"> 
                        		<div class="sheet-section-row">
									<input type="hidden" class="sheet-lock-state" name="attr_character_lock_state"/>
									
                                	<input class="sheet-magic-mastery" name="attr_character_magic_mastery1" type="checkbox"><span></span>
                                	<input class="sheet-magic-order sheet-text-edit" name="attr_character_magic_order1" type="number" min="1" max="6">
                                	<input class="sheet-magic-name sheet-text-edit" name="attr_character_magic_name1" type="text">
                                	<input class="sheet-magic-order sheet-text-readonly" name="attr_character_magic_order1" type="number" min="1" max="6" readonly>
                                	<input class="sheet-magic-name sheet-text-readonly" name="attr_character_magic_name1" type="text" readonly>									
                                	<br>
                                	<span class="sheet-hint sheet-hint-mastery">&nbsp;</span><span class="sheet-hint sheet-hint-order">Order</span><span class="sheet-hint sheet-hint-magic-name">Name</span>
                                 </div>  
                        		<div class="sheet-section-row">
									<input type="hidden" class="sheet-lock-state" name="attr_character_lock_state"/>
									
                                	<input class="sheet-magic-mastery" name="attr_character_magic_mastery2" type="checkbox"><span></span>
                                	<input class="sheet-magic-order sheet-text-edit" name="attr_character_magic_order2" type="number" min="1" max="6">
                                	<input class="sheet-magic-name sheet-text-edit" name="attr_character_magic_name2" type="text">
									<input class="sheet-magic-order sheet-text-readonly" name="attr_character_magic_order2" type="number" min="1" max="6" readonly>
                                	<input class="sheet-magic-name sheet-text-readonly" name="attr_character_magic_name2" type="text" readonly>
                                	<br>
                                	<span class="sheet-hint sheet-hint-mastery">&nbsp;</span><span class="sheet-hint sheet-hint-order">Order</span><span class="sheet-hint sheet-hint-magic-name">Name</span>
                                 </div>  
                        		<div class="sheet-section-row">
									<input type="hidden" class="sheet-lock-state" name="attr_character_lock_state"/>
									
                                	<input class="sheet-magic-mastery" name="attr_character_magic_mastery3" type="checkbox"><span></span>
                                	<input class="sheet-magic-order sheet-text-edit" name="attr_character_magic_order3" type="number" min="1" max="6">
                                	<input class="sheet-magic-name sheet-text-edit" name="attr_character_magic_name3" type="text">
									<input class="sheet-magic-order sheet-text-readonly" name="attr_character_magic_order3" type="number" min="1" max="6" readonly>
                                	<input class="sheet-magic-name sheet-text-readonly" name="attr_character_magic_name3" type="text" readonly>
                                	<br>
                                	<span class="sheet-hint sheet-hint-mastery">&nbsp;</span><span class="sheet-hint sheet-hint-order">Order</span><span class="sheet-hint sheet-hint-magic-name">Name</span>
                                 </div> 
                        		<div class="sheet-section-row">
									<input type="hidden" class="sheet-lock-state" name="attr_character_lock_state"/>
									
                                	<input class="sheet-magic-mastery" name="attr_character_magic_mastery4" type="checkbox"><span></span>
                                	<input class="sheet-magic-order sheet-text-edit" name="attr_character_magic_order4" type="number" min="1" max="6">
                                	<input class="sheet-magic-name sheet-text-edit" name="attr_character_magic_name4" type="text">
									<input class="sheet-magic-order sheet-text-readonly" name="attr_character_magic_order4" type="number" min="1" max="6" readonly>
                                	<input class="sheet-magic-name sheet-text-readonly" name="attr_character_magic_name4" type="text" readonly>
                                	<br>
                                	<span class="sheet-hint sheet-hint-mastery">&nbsp;</span><span class="sheet-hint sheet-hint-order">Order</span><span class="sheet-hint sheet-hint-magic-name">Name</span>
                                 </div>  
                        		<div class="sheet-section-row">
									<input type="hidden" class="sheet-lock-state" name="attr_character_lock_state"/>
									
                                	<input class="sheet-magic-mastery" name="attr_character_magic_mastery5" type="checkbox"><span></span>
                                	<input class="sheet-magic-order sheet-text-edit" name="attr_character_magic_order5" type="number" min="1" max="6">
                                	<input class="sheet-magic-name sheet-text-edit" name="attr_character_magic_name5" type="text">
									<input class="sheet-magic-order sheet-text-readonly" name="attr_character_magic_order5" type="number" min="1" max="6" readonly>
                                	<input class="sheet-magic-name sheet-text-readonly" name="attr_character_magic_name5" type="text" readonly>
                                	<br>
                                	<span class="sheet-hint sheet-hint-mastery">&nbsp;</span><span class="sheet-hint sheet-hint-order">Order</span><span class="sheet-hint sheet-hint-magic-name">Name</span>
                                 </div>                                    
                            </div>
                            <div class="sheet-col"> 
                        		<div class="sheet-section-row">
									<input type="hidden" class="sheet-lock-state" name="attr_character_lock_state"/>
									
                                	<input class="sheet-magic-mastery" name="attr_character_magic_mastery6" type="checkbox"><span></span>
                                	<input class="sheet-magic-order sheet-text-edit" name="attr_character_magic_order6" type="number" min="1" max="6">
                                	<input class="sheet-magic-name sheet-text-edit" name="attr_character_magic_name6" type="text">
									<input class="sheet-magic-order sheet-text-readonly" name="attr_character_magic_order6" type="number" min="1" max="6" readonly>
                                	<input class="sheet-magic-name sheet-text-readonly" name="attr_character_magic_name6" type="text" readonly>
                                    <br>
                                	<span class="sheet-hint sheet-hint-mastery">&nbsp;</span><span class="sheet-hint sheet-hint-order">Order</span><span class="sheet-hint sheet-hint-magic-name">Name</span>
                                 </div>  
                        		<div class="sheet-section-row">
									<input type="hidden" class="sheet-lock-state" name="attr_character_lock_state"/>
									
                                	<input class="sheet-magic-mastery" name="attr_character_magic_mastery7" type="checkbox"><span></span>
                                	<input class="sheet-magic-order sheet-text-edit" name="attr_character_magic_order7" type="number" min="1" max="6">
                                	<input class="sheet-magic-name sheet-text-edit" name="attr_character_magic_name7" type="text">
									<input class="sheet-magic-order sheet-text-readonly" name="attr_character_magic_order7" type="number" min="1" max="6" readonly>
                                	<input class="sheet-magic-name sheet-text-readonly" name="attr_character_magic_name7" type="text" readonly>
                                	<br>
                                	<span class="sheet-hint sheet-hint-mastery">&nbsp;</span><span class="sheet-hint sheet-hint-order">Order</span><span class="sheet-hint sheet-hint-magic-name">Name</span>
                                 </div>  
                        		<div class="sheet-section-row">
									<input type="hidden" class="sheet-lock-state" name="attr_character_lock_state"/>
									
                                	<input class="sheet-magic-mastery" name="attr_character_magic_mastery8" type="checkbox"><span></span>
                                	<input class="sheet-magic-order sheet-text-edit" name="attr_character_magic_order8" type="number" min="1" max="6">
                                	<input class="sheet-magic-name sheet-text-edit" name="attr_character_magic_name8" type="text">
									<input class="sheet-magic-order sheet-text-readonly" name="attr_character_magic_order8" type="number" min="1" max="6" readonly>
                                	<input class="sheet-magic-name sheet-text-readonly" name="attr_character_magic_name8" type="text" readonly>
                                	<br>
                                	<span class="sheet-hint sheet-hint-mastery">&nbsp;</span><span class="sheet-hint sheet-hint-order">Order</span><span class="sheet-hint sheet-hint-magic-name">Name</span>
                                 </div>  
                        		<div class="sheet-section-row">
									<input type="hidden" class="sheet-lock-state" name="attr_character_lock_state"/>
									
                                	<input class="sheet-magic-mastery" name="attr_character_magic_mastery9" type="checkbox"><span></span>
                                	<input class="sheet-magic-order sheet-text-edit" name="attr_character_magic_order9" type="number" min="1" max="6">
                                	<input class="sheet-magic-name sheet-text-edit" name="attr_character_magic_name9" type="text">
									<input class="sheet-magic-order sheet-text-readonly" name="attr_character_magic_order9" type="number" min="1" max="6" readonly>
                                	<input class="sheet-magic-name sheet-text-readonly" name="attr_character_magic_name9" type="text" readonly>
                                	<br>
                                	<span class="sheet-hint sheet-hint-mastery">&nbsp;</span><span class="sheet-hint sheet-hint-order">Order</span><span class="sheet-hint sheet-hint-magic-name">Name</span>
                                 </div>                                 
                        		<div class="sheet-section-row">
									<input type="hidden" class="sheet-lock-state" name="attr_character_lock_state"/>
									
                                	<input class="sheet-magic-mastery" name="attr_character_magic_mastery10" type="checkbox"><span></span>
                                	<input class="sheet-magic-order sheet-text-edit" name="attr_character_magic_order10" type="number" min="1" max="6">
                                	<input class="sheet-magic-name sheet-text-edit" name="attr_character_magic_name10" type="text">
									<input class="sheet-magic-order sheet-text-readonly" name="attr_character_magic_order10" type="number" min="1" max="6" readonly>
                                	<input class="sheet-magic-name sheet-text-readonly" name="attr_character_magic_name10" type="text" readonly>
                                	<br>
                                	<span class="sheet-hint sheet-hint-mastery">&nbsp;</span><span class="sheet-hint sheet-hint-order">Order</span><span class="sheet-hint sheet-hint-magic-name">Name</span>
                                 </div>                                  
                            </div>
                        </div>
						<h3 class="sheet-subsection-head">Magic Notes</h3>
                		<div class="sheet-2colrow sheet-spells-div">
							<div class="sheet-section-row">
								<input type="hidden" class="sheet-lock-state" name="attr_character_lock_state"/>
								
								<textarea class="sheet-spellnotes sheet-textarea-edit" name="attr_character_spellnotes"></textarea>
								<textarea class="sheet-spellnotes sheet-text-readonly" name="attr_character_spellnotes" readonly></textarea>
							</div>
						</div>
                    </div>
            	</div>
				<div class="sheet-section-inner-container sheet-human-only">
            		<h4 class="sheet-section-head">Special abilities (if any)</h4>
					<h3 class="sheet-subsection-head">Ability Notes</h3>
                		<div class="sheet-2colrow sheet-spells-div">
							<div class="sheet-section-row">
								<input type="hidden" class="sheet-lock-state" name="attr_character_lock_state"/>
								
								<textarea class="sheet-abilitynotes sheet-textarea-edit" name="attr_character_abilitynotes"></textarea>
								<textarea class="sheet-abilitynotes sheet-text-readonly" name="attr_character_abilitynotes" readonly></textarea>
							</div>
					</div>
				</div>
                <div class="sheet-section-inner-container sheet-demimonde-only">
            		<h4 class="sheet-section-head">Demi-monde details</h4>
					<div class="sheet-2colrow">
						<div class="sheet-col"> 
							<div class="sheet-section-row">
								<input type="hidden" class="sheet-lock-state" name="attr_character_lock_state"/>
								
								<label class="sheet-label sheet-label-long-width">Affinity</label>
								<input name="attr_character_affinity" class="sheet-affinity-input sheet-text-edit" type="text">
								<input name="attr_character_affinity" class="sheet-affinity-input sheet-text-readonly" type="text" readonly>
							</div>
						</div>
						<div class="sheet-col"> 
							<div class="sheet-section-row">
								<input type="hidden" class="sheet-lock-state" name="attr_character_lock_state"/>
								
								<label class="sheet-label sheet-label-long-width">Luck Refresh</label>
								<input name="attr_character_luckrefresh" class="sheet-luckrefresh-input sheet-text-edit" type="text">
								<input name="attr_character_luckrefresh" class="sheet-luckrefresh-input sheet-text-readonly" type="text" readonly>
							</div>
						</div>
					</div>
					<div class="sheet-section-row">
						<input type="hidden" class="sheet-lock-state" name="attr_character_lock_state"/>
				
						<label class="sheet-label sheet-label-long-width">Vestigia (if any)</label>
						<input name="attr_character_vestigia" class="sheet-vestigia-input sheet-text-edit" type="text">
						<input name="attr_character_vestigia" class="sheet-vestigia-input sheet-text-readonly" type="text" readonly>
					</div>		
					<div  class="sheet-section-spacer">
                	    <!-- spacer -->
            		</div> 
                	<div class="sheet-2colrow">
						<div class="sheet-col"> 
							<div class="sheet-section-row">
								<div class="sheet-subsection">
									<h3 class="sheet-subsection-head">Example Minor Effects (5 luck)</h3>										
									<input type="hidden" class="sheet-lock-state" name="attr_character_lock_state"/>
									
									<textarea class="sheet-minor-effect sheet-textarea-edit" name="attr_character_minor_effect"></textarea>
									<textarea class="sheet-minor-effect sheet-text-readonly" name="attr_character_minor_effect" readonly></textarea>
								</div>
							</div>
						</div>
						<div class="sheet-col"> 
							<div class="sheet-section-row">
								<div class="sheet-subsection">
									<h3 class="sheet-subsection-head">Example Significant Effects (20 luck)</h3>
									<input type="hidden" class="sheet-lock-state" name="attr_character_lock_state"/>
									
									<textarea class="sheet-major-effect sheet-textarea-edit" name="attr_character_major_effect"></textarea>
									<textarea class="sheet-major-effect sheet-text-readonly" name="attr_character_major_effect" readonly></textarea>
								</div>
							</div>
						</div>    
                    </div>
					<h3 class="sheet-subsection-head">Demi-monde Notes</h3>
					<div class="sheet-2colrow sheet-spells-div">
						<div class="sheet-section-row">
							<input type="hidden" class="sheet-lock-state" name="attr_character_lock_state"/>
							
							<textarea class="sheet-deminotes sheet-textarea-edit" name="attr_character_deminotes"></textarea>
							<textarea class="sheet-deminotes sheet-text-readonly" name="attr_character_deminotes" readonly></textarea>
						</div>
					</div>
            	</div>
        	</div>
        </div>
    </div>
	
	    <!-- Equipment sheet page -->
    <div class="sheet-equipment-page">
    	<div class="sheet-grid-section-equipment">	   
		
           	<!-- equipment -->
        	<div class="sheet-equipment sheet-block">
        	    <div class="sheet-section-inner-container">
                	<h4 class="sheet-section-head">Equipment</h4>
                    <div class="sheet-section-row">
						<input type="hidden" class="sheet-lock-state" name="attr_character_lock_state"/>
						
                        <textarea class="sheet-equipment sheet-textarea-edit" name="attr_character_equipment"></textarea>
						<textarea class="sheet-equipment sheet-text-readonly" name="attr_character_equipment" readonly></textarea>
                    </div>
                </div>
            </div>
           	<!-- notes -->
        	<div class="sheet-notes sheet-block">
        	    <div class="sheet-section-inner-container">
                	<h4 class="sheet-section-head">Case files</h4>
                    <div class="sheet-section-row">
						<input type="hidden" class="sheet-lock-state" name="attr_character_lock_state"/>
                        <textarea class="sheet-notes sheet-textarea-edit" name="attr_character_cases"></textarea>
						<textarea class="sheet-notes sheet-text-readonly" name="attr_character_cases" readonly></textarea>
                    </div>
                </div>
            </div>            
        </div>
    </div>
</div>



<!-- ==== Roll Templates ==== -->
 <div class="rolltemplates">
	<rolltemplate class="sheet-rolltemplate-rol">
		<div class="sheet-template-charname">{{charname}}</div>
		<div class="sheet-template-container">
			{{^damageroll}}<div class="sheet-template-rollname-skill">{{#rollname}}{{rollname}}{{/rollname}} {{^rollname}}Unnamed skill{{/rollname}}</div>{{/damageroll}}
			{{#damageroll}}<div class="sheet-template-rollname-damage">{{#rollname}}{{rollname}}{{/rollname}} {{^rollname}}Damage{{/rollname}}</div>{{/damageroll}}

			<!-- Info about the value needed, the type of roll and the character damage status )if any) -->
			<div class="sheet-template-details">Target: {{success}} {{#hard}}/ {{hard}}{{/hard}} {{#advantage}}(Advantage){{/advantage}}{{#disadvantage}}(Disadvantage){{/disadvantage}}</div>
			{{#status}}<div class="sheet-template-status">{{status}}</div>{{/status}}    	

			<!-- build results of roll -->
			<div class="sheet-template-result">
				
				<!-- standard roll -->
				{{#standard}}
					Roll:
					<!-- Critical -->
					{{#rollTotal() standard 1}} 
						{{^damageroll}}<span class="sheet-template-critical"> {{standard}} (Critical)</span>{{/damageroll}}
						{{#damageroll}}<span class="sheet-template-critical"> {{standard}} (3 + base weapon damage)</span>{{/damageroll}}
					{{/rollTotal() standard 1}}
					
					<!-- Hard -->
					{{#rollGreater() standard 1}} {{#rollBetween() standard 1 hard}} 
						{{^damageroll}}<span class="sheet-template-hard"> {{standard}} (Hard Success)</span>{{/damageroll}}
						{{#damageroll}}<span class="sheet-template-hard"> {{standard}} (2 + base weapon damage)</span>{{/damageroll}}
					{{/rollBetween() standard 1 hard}} {{/rollGreater() standard 1}} 
					
					<!-- Success -->
					{{#rollGreater() standard hard}} {{#rollBetween() standard hard success}} {{#rollLess() standard fumble}}   
						{{^damageroll}}<span class="sheet-template-success"> {{standard}} (Success)</span>{{/damageroll}}
						{{#damageroll}}<span class="sheet-template-success"> {{standard}} (1 + base weapon damage)</span>{{/damageroll}}
					{{/rollLess() standard fumble}} {{/rollBetween() standard hard success}} {{/rollGreater() standard hard}}     	        
							
					<!-- fail -->                 	    
					{{#rollGreater() standard success}} {{#rollBetween() standard success fumble}} 
						{{^damageroll}}<span class="sheet-template-fail"> {{standard}} (Fail)</span>{{/damageroll}}
						{{#damageroll}}<span class="sheet-template-fail"> {{standard}} (1 damage)</span>{{/damageroll}}
					{{/rollBetween() standard success fumble}} {{/rollGreater() standard success}} 
					
					<!-- fumble --> 
					{{#rollBetween() standard fumble 100}}
						{{^damageroll}}<span class="sheet-template-fumble"> {{standard}} (fumble)</span>{{/damageroll}}
						{{#damageroll}}<span class="sheet-template-fumble"> {{standard}} (1 damage)</span>{{/damageroll}}
					{{/rollBetween() standard fumble 100}}
				{{/standard}}
				
				<!-- rolling with advantage -->
				{{#advantage}}
					Roll:
					<!-- Critical -->
					{{#rollTotal() advantage 1}} 
						{{^damageroll}}<span class="sheet-template-critical"> {{advantage}} (Critical)</span>{{/damageroll}}
						{{#damageroll}}<span class="sheet-template-critical"> {{standard}} (3 + base weapon damage)</span>{{/damageroll}}
					{{/rollTotal() advantage 1}}
					
					<!-- Hard -->
					{{#rollGreater() advantage 1}} {{#rollBetween() advantage 1 hard}} 
						{{^damageroll}}<span class="sheet-template-hard"> {{advantage}} (Hard Success)</span>{{/damageroll}}
						{{#damageroll}}<span class="sheet-template-hard"> {{standard}} (2 + base weapon damage)</span>{{/damageroll}}
					{{/rollBetween() advantage 1 hard}} {{/rollGreater() advantage 1}} 
					
					<!-- Success -->
					{{#rollGreater() advantage hard}} {{#rollBetween() advantage hard success}} {{#rollLess() advantage fumble}}   
						{{^damageroll}}<span class="sheet-template-success"> {{advantage}} (Success)</span>{{/damageroll}}
						{{#damageroll}}<span class="sheet-template-success"> {{standard}} (1 + base weapon damage)</span>{{/damageroll}}
					{{/rollLess() advantage fumble}} {{/rollBetween() advantage hard success}} {{/rollGreater() advantage hard}}     	        
							
					<!-- fail -->                 	    
					{{#rollGreater() advantage success}} {{#rollBetween() advantage success fumble}} 
						{{^damageroll}}<span class="sheet-template-fail"> {{advantage}} (Fail)</span>{{/damageroll}}
						{{#damageroll}}<span class="sheet-template-fail"> {{standard}} (1 damage)</span>{{/damageroll}}
					{{/rollBetween() advantage success fumble}} {{/rollGreater() advantage success}} 
					
					<!-- fumble --> 
					{{#rollBetween() advantage fumble 100}}
						{{^damageroll}}<span class="sheet-template-fumble"> {{advantage}} (fumble)</span>{{/damageroll}}
						{{#damageroll}}<span class="sheet-template-fumble"> {{standard}} (1 damage)</span>{{/damageroll}}
					{{/rollBetween() advantage fumble 100}}
				{{/advantage}}
				
				<!-- rolling with disadvantage -->
				{{#disadvantage}}
					Roll:
					<!-- Critical -->
					{{#rollTotal() disadvantage 1}} 
						{{^damageroll}}<span class="sheet-template-critical"> {{disadvantage}} (Critical)</span>{{/damageroll}}
						{{#damageroll}}<span class="sheet-template-critical"> {{standard}} (3 + base weapon damage)</span>{{/damageroll}}
					{{/rollTotal() disadvantage 1}}
					
					<!-- Hard -->
					{{#rollGreater() disadvantage 1}} {{#rollBetween() disadvantage 1 hard}} 
						{{^damageroll}}<span class="sheet-template-hard"> {{disadvantage}} (Hard Success)</span>{{/damageroll}}
						{{#damageroll}}<span class="sheet-template-hard"> {{standard}} (2 + base weapon damage)</span>{{/damageroll}}
					{{/rollBetween() disadvantage 1 hard}} {{/rollGreater() disadvantage 1}} 
					
					<!-- Success -->
					{{#rollGreater() disadvantage hard}} {{#rollBetween() disadvantage hard success}} {{#rollLess() disadvantage fumble}}   
						{{^damageroll}}<span class="sheet-template-success"> {{disadvantage}} (Success)</span>{{/damageroll}}
						{{#damageroll}}<span class="sheet-template-success"> {{standard}} (1 + base weapon damage)</span>{{/damageroll}}
					{{/rollLess() disadvantage fumble}} {{/rollBetween() disadvantage hard success}} {{/rollGreater() disadvantage hard}}     	        
							
					<!-- fail -->                 	    
					{{#rollGreater() disadvantage success}} {{#rollBetween() disadvantage success fumble}} 
						{{^damageroll}}<span class="sheet-template-fail"> {{disadvantage}} (Fail)</span>{{/damageroll}}
						{{#damageroll}}<span class="sheet-template-fail"> {{standard}} (1 damage)</span>{{/damageroll}}
					{{/rollBetween() disadvantage success fumble}} {{/rollGreater() disadvantage success}} 
					
					<!-- fumble --> 
					{{#rollBetween() disadvantage fumble 100}}
						{{^damageroll}}<span class="sheet-template-fumble"> {{disadvantage}} (fumble)</span>{{/damageroll}}
						{{#damageroll}}<span class="sheet-template-fumble"> {{standard}} (1 damage)</span>{{/damageroll}}
					{{/rollBetween() disadvantage fumble 100}}
				{{/disadvantage}}    	    
			</div>
		</div>    
	</rolltemplate>


	</div>

<!-- ==== Sheet worker ==== -->

<script type="text/worker">

    // ==== handle updating 'half' values ====
    const halfAttrList = [
            "character_strength",
            "character_constitution",
            "character_dexterity",
            "character_intelligence",
            "character_power",
            "character_athletics",
            "character_drive",
            "character_navigate",
            "character_observation",
            "character_read-person",    
            "character_research",
            "character_sense-vestigia",
            "character_social",  
            "character_stealth",  
            "character_fighting",  
            "character_firearms",  
            "character_expert1",
            "character_expert2",
            "character_expert3",
            "character_expert4",
            "character_expert5",
            "character_expert6",
            "character_expert7",
            "character_expert8",
            "character_expert9",
			"character_luck_current",
    ]
    
    function updateHalfAttr(attr) {
        getAttrs([attr], function(values) {
            let srcVal = Object.values(values)[0]
            let intval = parseInt(srcVal)||0;
            let destval = Math.floor(intval / 2);
            let destHash = {}
            destHash[`${attr}_half`] = destval
            setAttrs(destHash);
    
       });
    }
    
	
    const statAttrList = [
            "character_strength",
            "character_constitution",
            "character_dexterity",
            "character_intelligence",
            "character_power",
	]
	
	function updateStatTotal() {
	console.log("total ...")
		getAttrs(statAttrList, function(values) {
			let total = 0
			statAttrList.forEach(stat => {
			    total += parseInt(values[stat])||0
			});
			let destHash = {}
            destHash["character_statstotal"] = total
			setAttrs(destHash);
		});
	}
	
    // on sheet open update all
    on("sheet:opened", function() { 
        halfAttrList.forEach(updateHalfAttr);
		updateStatTotal();
    });
    
    // on change only update the one that has changed & total
    halfAttrList.forEach(attr => {
    on(`change:${attr}`, function() { 
       updateHalfAttr(attr);
	   updateStatTotal();
        });
    });
    
	
    /* damage and damage status*/
    on("sheet:opened change:character_damage change:character_mentalimpaired", function() { 
      getAttrs(["character_damage","character_mentalimpaired"], function(values) {
            let health = parseInt(values["character_damage"])||0;
			let mental = values["character_mentalimpaired"];
			
			console.log(`health: ${health}`);
			console.log(`mental: ${mental}`);
			
            let fumble = 100;
            let status = "";
            let desc = "";
			
			/* if mentally impaired and heal is not worse set to impaired */
			if (mental == "on" && health < 2) {
				health = 2
			}
			
			/* Build status and description strings */
            switch (health) {
                case 2:
                    status = "Status: impaired"
                    desc = "Any rolls of 90 or over count as a fumble and trigger an Involuntary Action."
                    fumble = 90;
                    break;                      
                case 3:
                    status = "Status: Down"
                    desc = "You are down and can take no actions."
					fumble = 90;
                    break;   
                case 4: 
                    status = "Status: Mortal wound"
                    desc = "You are down and can take no actions. You wil be dead in an hour without urgent treatment."
                    fumble = 90;
                    break; 
                case 5: 
                    status = "Status: Fatal blow"
                    desc = "You are dead. You can spend 30 luck points to instead have a mortal wound."
                    fumble = 90;
                    break;                     
                    
            }
            let destHash = {};
            destHash["character_status"] = status;
            destHash["character_status_desc"] = desc;
            destHash["character_fumble"] = fumble;
            setAttrs(destHash);
       });        
    });  
    
    const pagebuttonlist = ["stats","contacts","equipment"];
    pagebuttonlist.forEach(button => {
        on(`clicked:${button}`, function() {
            setAttrs({
                pagename: button
            });
        });
    });
    

</script>
<div class="main">
    <!-- EN-TÊTE : logo, nom du personnage, couverture, etc. -->
	<div class="header 3colrow">
		<div class="col">
			<div><img src="https://raw.githubusercontent.com/Luckyn1604/roll20-character-sheets/ins-mv-apero/INS-MV_apero/insmv-300x206.jpg" /></div>
			<div class="text-center">
				<h2>INS/MV - apéro</h2>
				<br />
				<button type="roll" class="sheet-btRoll" title="Jet" name="jet"
						value="&{template:insmv} {{name=@{name}}} {{jet1=[[1d6]]}}  {{jet2=[[1d6]]}} {{jet3=[[1d6]]}}">
				   Lancer 3d6
				</button>
			</div>
		</div>

		<div class="col">
			<label>Nom humain :</label><input type="text" name="attr_name" placeholder="Nom de mon personnage" />
			<label>Vrai nom :</label><input type="text" name="attr_true_name" />
			<label>Supérieur :</label><input type="text" name="attr_superieur" />
			<label>Grade :</label><input type="text" name="attr_grade" placeholder="0" />
			<label>Nature :</label><input type="text" name="attr_nature" placeholder="Humain" />
		</div>

		<div class="col">
			<label>Couverture :</label>
			<textarea type="text" name="attr_couverture" rows=10></textarea>
		</div>
    </div>
    <!-- FIN DE L'EN-TÊTE -->

    <hr/>

    <!-- ATTRIBUTS -->
	<div class="block attributes">
		<h2>Caractéristiques</h2>
		<div class="flex-col attributes-group">
			<div>
				<label>Force</label>
				<input type="number" value="1" min="1" max="6" name='attr_force' class='sheet-short'>
				<button type="roll" class="sheet-btRoll" title="Jet de Force" name="jet"
						value="&{template:insmv} {{name=@{name}}} {{level=@{force}}} {{subtags=Force}} {{bonus=@{force}}} {{jet1=[[1d6]]}}  {{jet2=[[1d6]]}} {{jet3=[[1d6]]}}" />
			</div>
			<div>
				<label>Agilité</label>
				<input type="number" value="1" min="1" max="6" name='attr_agilite' class='sheet-short'>
				<button type="roll" class="sheet-btRoll" title="Jet d'Agilité" name="jet"
						value="&{template:insmv} {{name=@{name}}} {{level=@{agilite}}} {{subtags=Agilité}} {{bonus=@{agilite}}} {{jet1=[[1d6]]}}  {{jet2=[[1d6]]}} {{jet3=[[1d6]]}}" />
			</div>
			<div>
				<label>Perception</label>
				<input type="number" value="1" min="1" max="6" name='attr_perception' class='sheet-short'>
				<button type="roll" class="sheet-btRoll" title="Jet de Perception" name="jet"
						value="&{template:insmv} {{name=@{name}}} {{level=@{perception}}} {{subtags=Perception}} {{bonus=@{perception}}} {{jet1=[[1d6]]}}  {{jet2=[[1d6]]}} {{jet3=[[1d6]]}}" />
			</div>
			<div>
				<label>Volonté</label>
				<input type="number" value="1" min="1" max="6" name='attr_volonte' class='sheet-short'>
				<button type="roll" class="sheet-btRoll" title="Jet de Volonté" name="jet"
						value="&{template:insmv} {{name=@{name}}} {{level=@{volonte}}} {{subtags=Volonté}} {{bonus=@{volonte}}} {{jet1=[[1d6]]}}  {{jet2=[[1d6]]}} {{jet3=[[1d6]]}}" />
			</div>
			<div>
				<label>Présence</label>
				<input type="number" value="1" min="1" max="6" min="1" max="6" name='attr_presence' class='sheet-short'>
				<button type="roll" class="sheet-btRoll" title="Jet de Présence" name="jet"
						value="&{template:insmv} {{name=@{name}}} {{level=@{presence}}} {{subtags=Présence}} {{bonus=@{presence}}} {{jet1=[[1d6]]}}  {{jet2=[[1d6]]}} {{jet3=[[1d6]]}}" />
			</div>
			<div>
				<label>Foi</label>
				<input type="number" value="1" min="1" max="6" name='attr_foi' class='sheet-short'>
				<button type="roll" class="sheet-btRoll" title="Jet de Foi" name="jet"
						value="&{template:insmv} {{name=@{name}}} {{level=@{foi}}} {{subtags=Foi}} {{bonus=@{foi}}} {{jet1=[[1d6]]}}  {{jet2=[[1d6]]}} {{jet3=[[1d6]]}}" />
			</div>
			<div></div>
			<div class="pp">
				<label>Points de vie</label>
				<input type="number" value="0" min="0" max="@{pv_max}" name='attr_pv' class='sheet-short'/>
				<span class="pp_divider">/</span>
				<input type="number" name="attr_pv_max" value="2" min="1" class="sheet-short"/>
			</div>
			<div class="pp">
				<label>Points de pouvoir</label>
				<input type="number" value="0" min="0" max="@{pp_max}" name='attr_pp' class='sheet-short'/>
				<span class="pp_divider">/</span>
				<input type="number" name="attr_pp_max" value="2" min="0" class='sheet-short'>
			</div>
		</div>
    </div>
    <!-- FIN DES ATTRIBUTS -->

    <!-- TALENTS -->
	<div class="block skills">
        <h2>Talents</h2>
        <!-- Les talents sont répartis sur deux colonnes pour une meilleure lisibilité. -->
		<div class="skills-group">
			<h3>Principaux</h3>
			<div class="flex-col">
				<div class="flex-col skill">
					<label>Baratin</label>
					<input type="number" value="1" min="1" max="6" name="attr_baratin" />
					<button type="roll" class="sheet-btRoll" title="Jet" name="jet"
							value="&{template:insmv} {{name=@{name}}} {{level=@{baratin}}} {{subtags=Baratin}} {{bonus=@{baratin}}} {{jet1=[[1d6]]}}  {{jet2=[[1d6]]}} {{jet3=[[1d6]]}}" />
				</div>
				<div class="flex-col skill">
					<label>Combat</label>
					<input type="number" value="1" min="1" max="6" name="attr_combat" />
					<button type="roll" class="sheet-btRoll" title="Jet" name="jet"
							value="&{template:insmv} {{name=@{name}}} {{level=@{combat}}} {{subtags=Combat}} {{bonus=@{combat}}} {{jet1=[[1d6]]}}  {{jet2=[[1d6]]}} {{jet3=[[1d6]]}}" />
				</div>
			</div>
			<div class="flex-col">
				<div class="flex-col skill">
					<label>Corps à corps</label>
					<input type="number" value="1" min="1" max="6" name="attr_cac" />
					<button type="roll" class="sheet-btRoll" title="Jet" name="jet"
							value="&{template:insmv} {{name=@{name}}} {{level=@{cac}}} {{subtags=Corps à Corps}} {{bonus=@{cac}}} {{jet1=[[1d6]]}}  {{jet2=[[1d6]]}} {{jet3=[[1d6]]}}" />
				</div>
				<div class="flex-col skill">
					<label>Culture générale</label>
					<input type="number" value="1" min="1" max="6" name="attr_culture" />
					<button type="roll" class="sheet-btRoll" title="Jet" name="jet"
							value="&{template:insmv} {{name=@{name}}} {{level=@{culture}}} {{subtags=Culture générale}} {{bonus=@{culture}}} {{jet1=[[1d6]]}}  {{jet2=[[1d6]]}} {{jet3=[[1d6]]}}" />
				</div>
			</div>
			<div class="flex-col">
				<div class="flex-col skill">
					<label>Défense</label>
					<input type="number" value="1" min="1" max="6" name="attr_defense" />
					<button type="roll" class="sheet-btRoll" title="Jet" name="jet"
							value="&{template:insmv} {{name=@{name}}} {{level=@{defense}}} {{subtags=Défense}} {{bonus=@{defense}}} {{jet1=[[1d6]]}}  {{jet2=[[1d6]]}} {{jet3=[[1d6]]}}" />
				</div>
				<div class="flex-col skill">
					<label>Discrétion</label>
					<input type="number" value="1" min="1" max="6" name="attr_discretion" />
					<button type="roll" class="sheet-btRoll" title="Jet" name="jet"
							value="&{template:insmv} {{name=@{name}}} {{level=@{discretion}}} {{subtags=Discrétion}} {{bonus=@{discretion}}} {{jet1=[[1d6]]}}  {{jet2=[[1d6]]}} {{jet3=[[1d6]]}}" />
				</div>
			</div>
			<div class="flex-col">
				<div class="flex-col skill">
					<label>Discussion</label>
					<input type="number" value="1" min="1" max="6" name="attr_discussion" />
					<button type="roll" class="sheet-btRoll" title="Jet" name="jet"
							value="&{template:insmv} {{name=@{name}}} {{level=@{discussion}}} {{subtags=Discussion}} {{bonus=@{discussion}}} {{jet1=[[1d6]]}}  {{jet2=[[1d6]]}} {{jet3=[[1d6]]}}" />
				</div>
				<div class="flex-col skill">
					<label>Enquête</label>
					<input type="number" value="1" min="1" max="6" name="attr_enquete" />
					<button type="roll" class="sheet-btRoll" title="Jet" name="jet"
							value="&{template:insmv} {{name=@{name}}} {{level=@{enquete}}} {{subtags=Enquête}} {{bonus=@{enquete}}} {{jet1=[[1d6]]}} {{jet2=[[1d6]]}} {{jet3=[[1d6]]}}" />
				</div>
			</div>
			<div class="flex-col">
				<div class="flex-col skill">
					<label>Tir</label>
					<input type="number" value="1" min="1" max="6" name="attr_tir" />
					<button type="roll" class="sheet-btRoll" title="Jet" name="jet"
							value="&{template:insmv} {{name=@{name}}} {{level=@{tir}}} {{subtags=Tir}} {{bonus=@{tir}}} {{jet1=[[1d6]]}} {{jet2=[[1d6]]}} {{jet3=[[1d6]]}}" />
				</div>
				<div class="flex-col skill"></div>
			</div>
			<h3>Secondaires</h3>
			<div class="flex-col">
				<div>
					<fieldset class="repeating_talents1">
						<div class="flex-col skill">
							<input type="text" name="attr_skillname1" placeholder="Nouveau talent" autofocus />
							<input type="number" value="1" min="1" max="6" name="attr_skilllevel1" />
							<button type="roll" class="sheet-btRoll" title="Jet" name="jet"
									value="&{template:insmv} {{name=@{name}}} {{level=@{skilllevel1}}} {{subtags=@{skillname1}}} {{bonus=@{skilllevel1}}} {{jet1=[[1d6]]}}  {{jet2=[[1d6]]}} {{jet3=[[1d6]]}}" />
						</div>
					</fieldset>
				</div>
				<div>
					<fieldset class="repeating_talents2">
						<div class="flex-col skill">
							<input type="text" name="attr_skillname2" placeholder="Nouveau talent" autofocus />
							<input type="number" value="1" min="1" max="6" name="attr_skilllevel2" />
							<button type="roll" class="sheet-btRoll" title="Jet" name="jet"
									value="&{template:insmv} {{name=@{name}}} {{level=@{skilllevel2}}} {{subtags=@{skillname2}}} {{bonus=@{skilllevel2}}} {{jet1=[[1d6]]}} {{jet2=[[1d6]]}} {{jet3=[[1d6]]}}" />
						</div>
					</fieldset>
				</div>
			</div>
			<h3>Mineurs</h3>
			<div class="flex-col">
				<div>
					<fieldset class="repeating_talents3">
						<div class="flex-col skill">
							<input type="text" name="attr_skillname3" placeholder="Nouveau talent" autofocus />
							<input type="number" value="1" min="1" max="6" name="attr_skilllevel3" />
							<button type="roll" class="sheet-btRoll" title="Jet" name="jet"
									value="&{template:insmv} {{name=@{name}}} {{level=@{skilllevel3}}} {{subtags=@{skillname3}}} {{bonus=@{skilllevel3}}} {{jet1=[[1d6]]}} {{jet2=[[1d6]]}} {{jet3=[[1d6]]}}" />
						</div>
					</fieldset>
				</div>
				<div>
					<fieldset class="repeating_talents4">
						<div class="flex-col skill">
							<input type="text" name="attr_skillname4" placeholder="Nouveau talent" autofocus />
							<input type="number" value="1" min="1" max="6" name="attr_skilllevel4" />
							<button type="roll" class="sheet-btRoll" title="Jet" name="jet"
									value="&{template:insmv} {{name=@{name}}} {{level=@{skilllevel4}}} {{subtags=@{skillname4}}} {{bonus=@{skilllevel4}}} {{jet1=[[1d6]]}} {{jet2=[[1d6]]}} {{jet3=[[1d6]]}}" />
						</div>
					</fieldset>
				</div>
			</div>
		</div>
    </div>
    <!-- FIN DES TALENTS -->

    <!-- POUVOIRS (inclut les pouvoirs et les limitations) -->
	<div class="block powers">
		<h2>Pouvoirs</h2>
		<div class="powers-group">
			<fieldset class="repeating_powers">
				<div class="flex-col power">
					<div><!-- Caractéristique -->
						<label>Test :</label>
						<select name="attr_powerattack" class="dtype">
							<option value="@{powerlevel}">Pouvoir</option>
							<option value="@{force}">Force</option>
							<option value="@{agilite}">Agilité</option>
							<option value="@{perception}">Perception</option>
							<option value="@{volonte}">Volonté</option>
							<option value="@{presence}">Présence</option>
							<option value="@{foi}">Foi</option>
							<option value="@{baratin}">Baratin</option>
							<option value="@{combat}">Combat</option>
							<option value="@{cac}">Corps à corps</option>
							<option value="@{culture}">Culture générale</option>
							<option value="@{defense}">Défense</option>
							<option value="@{discretion}">Discrétion</option>
							<option value="@{discussion}">Discussion</option>
							<option value="@{enquete}">Enquête</option>
							<option value="@{tir}">Tir</option>
						</select>
					</div>
					<div><!-- Défense -->
						<label>Défense :</label>
						<select name="attr_powerdefense" class="dtype">
							<option value="">Aucune</option>
							<option value="Force">Force</option>
							<option value="Agilité">Agilité</option>
							<option value="Perception">Perception</option>
							<option value="Volonté">Volonté</option>
							<option value="Présence">Présence</option>
							<option value="Foi">Foi</option>
							<option value="Baratin">Baratin</option>
							<option value="Combat">Combat</option>
							<option value="Corps à corps">Corps à corps</option>
							<option value="Culture générale">Culture générale</option>
							<option value="Défense">Défense</option>
							<option value="Discrétion">Discrétion</option>
							<option value="Discussion">Discussion</option>
							<option value="Enquête">Enquête</option>
							<option value="Tir">Tir</option>
						</select>
					</div>
					<div class="powername"><!-- Nom -->
						<br/>
						<input type="text" name="attr_powername" placeholder="Nom du pouvoir" autofocus />
					</div>
					<div><!-- Niveau -->
						<label>Niveau :</label>
						<input type="number" value="1" min="1" max="6" name="attr_powerlevel" />
					</div>
					<div><!-- Coût -->
						<label>PP :</label>
						<input type="number" min="0" value="1" name="attr_powercost" class="pp_cost" />
					</div>
					<div>
						<br/>
						<button type="roll" class="sheet-btRoll" title="Jet" name="jet"
								value="&{template:insmv} {{name=@{name}}} {{level=@{powerlevel}}} {{subtags=@{powername}}} {{bonus=@{powerattack}}} {{defense=@{powerdefense}}} {{jet1=[[1d6]]}}  {{jet2=[[1d6]]}} {{jet3=[[1d6]]}}" />
					</div>
				</div>
				<textarea rows="1" name="attr_powerdescription" placeholder="Description" /></textarea>
			</fieldset>

			<h3>Limitations</h3>
			<fieldset class="repeating_limitations">
				<input name="attr_limitation" type="text" />
			</fieldset>
		</div>
    </div>
    <!-- FIN DES POUVOIRS -->

    <!-- ÉQUIPEMENT (armes, armures, matériel divers) -->
	<div class="block inventory">
		<h2>Équipement</h2>
		<div class="inventory-group">
			<textarea type="text" name="attr_inventory"></textarea>
		</div>
    </div>
    <!-- FIN DES ÉQUIPEMENTS -->
</div>

<!-- ROLL TEMPLATE -->
<rolltemplate class="sheet-rolltemplate-insmv">
    <div class="container">
        <div><h1>{{name}}</h1></div>
		<div><span class="subheader">{{subtags}}{{#level}} (niv. {{level}}){{/level}}</span></div>
        <div class="arrow-container"><div class="arrow-right"></div></div>
        <div class="rowcolor"><span class="tcat">Dés : </span>{{jet1}} | {{jet2}} | {{jet3}}</div>
        <div class="rowcolor"><span class="tcat">RU : </span>
			<!-- get the median result -->
			{{#rollTotal() jet1 jet2}}
				{{jet1}}
			{{/rollTotal() jet1 jet2}}
			{{#^rollTotal() jet1 jet2}}
				{{#rollTotal() jet1 jet3}}
					{{jet1}}
				{{/rollTotal() jet1 jet3}}
				{{#^rollTotal() jet1 jet3}}
					{{#rollTotal() jet2 jet3}}
						{{jet2}}
					{{/rollTotal() jet2 jet3}}
					{{#^rollTotal() jet2 jet3}}
						{{#rollBetween() jet1 jet2 jet3}}
							{{jet1}}
						{{/rollBetween() jet1 jet2 jet3}}
						{{#rollBetween() jet1 jet3 jet2}}
							{{jet1}}
						{{/rollBetween() jet1 jet3 jet2}}
						{{#rollBetween() jet2 jet1 jet3}}
							{{jet2}}
						{{/rollBetween() jet2 jet1 jet3}}
						{{#rollBetween() jet2 jet3 jet1}}
							{{jet2}}
						{{/rollBetween() jet2 jet3 jet1}}						
						{{#rollBetween() jet3 jet1 jet2}}
							{{jet3}}
						{{/rollBetween() jet3 jet1 jet2}}
						{{#rollBetween() jet3 jet2 jet1}}
							{{jet3}}
						{{/rollBetween() jet3 jet2 jet1}}
					{{/^rollTotal() jet2 jet3}}
				{{/^rollTotal() jet1 jet3}}
			{{/^rollTotal() jet1 jet2}}
			{{#bonus}}
				<span> + {{bonus}}</span>
				{{#defense}}
					<span> vs {{defense}}</span>
				{{/defense}}
			{{/bonus}}
		</div>
    </div>
</rolltemplate>
